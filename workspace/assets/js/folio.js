require=function r(a,o,l){function c(t,e){if(!o[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var s=o[t]={exports:{}};a[t][0].call(s.exports,function(e){return c(a[t][1][e]||e)},s,s.exports,r,a,o,l)}return o[t].exports}for(var h="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,i){function s(e){var t,i,n=e[0]/255,s=e[1]/255,r=e[2]/255,a=Math.min(n,s,r),o=Math.max(n,s,r),l=o-a;return o==a?t=0:n==o?t=(s-r)/l:s==o?t=2+(r-n)/l:r==o&&(t=4+(n-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),i=(a+o)/2,[t,100*(o==a?0:i<=.5?l/(o+a):l/(2-o-a)),100*i]}function n(e){var t,i,n=e[0],s=e[1],r=e[2],a=Math.min(n,s,r),o=Math.max(n,s,r),l=o-a;return i=0==o?0:l/o*1e3/10,o==a?t=0:n==o?t=(s-r)/l:s==o?t=2+(r-n)/l:r==o&&(t=4+(n-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,i,o/255*1e3/10]}function a(e){var t=e[0],i=e[1],n=e[2];return[s(e)[0],100*(1/255*Math.min(t,Math.min(i,n))),100*(n=1-1/255*Math.max(t,Math.max(i,n)))]}function o(e){var t,i=e[0]/255,n=e[1]/255,s=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-n,1-s)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]}function l(e){return S[JSON.stringify(e)]}function c(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255;return[100*(.4124*(t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=.04045<i?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*i+.0722*n),100*(.0193*t+.1192*i+.9505*n)]}function h(e){var t=c(e),i=t[0],n=t[1],s=t[2];return n/=100,s/=108.883,i=.008856<(i/=95.047)?Math.pow(i,1/3):7.787*i+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(s=.008856<s?Math.pow(s,1/3):7.787*s+16/116))]}function u(e){var t,i,n,s,r,a=e[0]/360,o=e[1]/100,l=e[2]/100;if(0==o)return[r=255*l,r,r];t=2*l-(i=l<.5?l*(1+o):l+o-l*o),s=[0,0,0];for(var c=0;c<3;c++)(n=a+1/3*-(c-1))<0&&n++,1<n&&n--,r=6*n<1?t+6*(i-t)*n:2*n<1?i:3*n<2?t+(i-t)*(2/3-n)*6:t,s[c]=255*r;return s}function d(e){var t=e[0]/60,i=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,r=t-Math.floor(t),a=255*n*(1-i),o=255*n*(1-i*r),l=255*n*(1-i*(1-r));n*=255;switch(s){case 0:return[n,l,a];case 1:return[o,n,a];case 2:return[a,n,l];case 3:return[a,o,n];case 4:return[l,a,n];case 5:return[n,a,o]}}function p(e){var t,i,n,s,a=e[0]/360,o=e[1]/100,l=e[2]/100,c=o+l;switch(1<c&&(o/=c,l/=c),n=6*a-(t=Math.floor(6*a)),0!=(1&t)&&(n=1-n),s=o+n*((i=1-l)-o),t){default:case 6:case 0:r=i,g=s,b=o;break;case 1:r=s,g=i,b=o;break;case 2:r=o,g=i,b=s;break;case 3:r=o,g=s,b=i;break;case 4:r=s,g=o,b=i;break;case 5:r=i,g=o,b=s}return[255*r,255*g,255*b]}function f(e){var t=e[0]/100,i=e[1]/100,n=e[2]/100,s=e[3]/100;return[255*(1-Math.min(1,t*(1-s)+s)),255*(1-Math.min(1,i*(1-s)+s)),255*(1-Math.min(1,n*(1-s)+s))]}function m(e){var t,i,n,s=e[0]/100,r=e[1]/100,a=e[2]/100;return i=-.9689*s+1.8758*r+.0415*a,n=.0557*s+-.204*r+1.057*a,t=.0031308<(t=3.2406*s+-1.5372*r+-.4986*a)?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function v(e){var t=e[0],i=e[1],n=e[2];return i/=100,n/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116))]}function _(e){var t,i,n,s,r=e[0],a=e[1],o=e[2];return r<=8?s=(i=100*r/903.3)/100*7.787+16/116:(i=100*Math.pow((r+16)/116,3),s=Math.pow(i/100,1/3)),[t=t/95.047<=.008856?t=95.047*(a/500+s-16/116)/7.787:95.047*Math.pow(a/500+s,3),i,n=n/108.883<=.008859?n=108.883*(s-o/200-16/116)/7.787:108.883*Math.pow(s-o/200,3)]}function y(e){var t,i=e[0],n=e[1],s=e[2];return(t=360*Math.atan2(s,n)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(n*n+s*s),t]}function w(e){return m(_(e))}function x(e){var t,i=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[i,n*Math.cos(t),n*Math.sin(t)]}function T(e){return E[e]}t.exports={rgb2hsl:s,rgb2hsv:n,rgb2hwb:a,rgb2cmyk:o,rgb2keyword:l,rgb2xyz:c,rgb2lab:h,rgb2lch:function(e){return y(h(e))},hsl2rgb:u,hsl2hsv:function(e){var t=e[0],i=e[1]/100,n=e[2]/100;if(0===n)return[0,0,0];return[t,100*(2*(i*=(n*=2)<=1?n:2-n)/(n+i)),100*((n+i)/2)]},hsl2hwb:function(e){return a(u(e))},hsl2cmyk:function(e){return o(u(e))},hsl2keyword:function(e){return l(u(e))},hsv2rgb:d,hsv2hsl:function(e){var t,i,n=e[0],s=e[1]/100,r=e[2]/100;return t=s*r,[n,100*(t=(t/=(i=(2-s)*r)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(e){return a(d(e))},hsv2cmyk:function(e){return o(d(e))},hsv2keyword:function(e){return l(d(e))},hwb2rgb:p,hwb2hsl:function(e){return s(p(e))},hwb2hsv:function(e){return n(p(e))},hwb2cmyk:function(e){return o(p(e))},hwb2keyword:function(e){return l(p(e))},cmyk2rgb:f,cmyk2hsl:function(e){return s(f(e))},cmyk2hsv:function(e){return n(f(e))},cmyk2hwb:function(e){return a(f(e))},cmyk2keyword:function(e){return l(f(e))},keyword2rgb:T,keyword2hsl:function(e){return s(T(e))},keyword2hsv:function(e){return n(T(e))},keyword2hwb:function(e){return a(T(e))},keyword2cmyk:function(e){return o(T(e))},keyword2lab:function(e){return h(T(e))},keyword2xyz:function(e){return c(T(e))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(e){return y(v(e))},lab2xyz:_,lab2rgb:w,lab2lch:y,lch2lab:x,lch2xyz:function(e){return _(x(e))},lch2rgb:function(e){return w(x(e))}};var E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},S={};for(var k in E)S[JSON.stringify(E[k])]=k},{}],2:[function(e,t,i){var s=e("./conversions"),r=function(){return new c};for(var n in s){r[n+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),s[t](e)}}(n);var a=/(\w+)2(\w+)/.exec(n),o=a[1],l=a[2];(r[o]=r[o]||{})[l]=r[n]=function(n){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var t=s[n](e);if("string"==typeof t||void 0===t)return t;for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]);return t}}(n)}var c=function(){this.convs={}};c.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},c.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},c.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space,n=this.convs[i];t=r[i][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){c.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),t.exports=r},{"./conversions":1}],3:[function(e,t,i){var r=e("color-name");function n(e){if(e){var t=[0,0,0],i=1,n=e.match(/^#([a-fA-F0-9]{3})$/);if(n){n=n[1];for(var s=0;s<t.length;s++)t[s]=parseInt(n[s]+n[s],16)}else if(n=e.match(/^#([a-fA-F0-9]{6})$/)){n=n[1];for(s=0;s<t.length;s++)t[s]=parseInt(n.slice(2*s,2*s+2),16)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<t.length;s++)t[s]=parseInt(n[s+1]);i=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<t.length;s++)t[s]=Math.round(2.55*parseFloat(n[s+1]));i=parseFloat(n[4])}else if(n=e.match(/(\D+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=r[n[1]]))return}for(s=0;s<t.length;s++)t[s]=h(t[s],0,255);return i=i||0==i?h(i,0,1):1,t[3]=i,t}}function s(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[h(parseInt(t[1]),0,360),h(parseFloat(t[2]),0,100),h(parseFloat(t[3]),0,100),h(isNaN(i)?1:i,0,1)]}}}function a(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[h(parseInt(t[1]),0,360),h(parseFloat(t[2]),0,100),h(parseFloat(t[3]),0,100),h(isNaN(i)?1:i,0,1)]}}}function o(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function l(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function c(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function h(e,t,i){return Math.min(Math.max(t,e),i)}function u(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}t.exports={getRgba:n,getHsla:s,getRgb:function(e){var t=n(e);return t&&t.slice(0,3)},getHsl:function(e){var t=s(e);return t&&t.slice(0,3)},getHwb:a,getAlpha:function(e){var t=n(e);{if(t)return t[3];if(t=s(e))return t[3];if(t=a(e))return t[3]}},hexString:function(e){return"#"+u(e[0])+u(e[1])+u(e[2])},rgbString:function(e,t){if(t<1||e[3]&&e[3]<1)return o(e,t);return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:o,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return l(e,t);var i=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),s=Math.round(e[2]/255*100);return"rgb("+i+"%, "+n+"%, "+s+"%)"},percentaString:l,hslString:function(e,t){if(t<1||e[3]&&e[3]<1)return c(e,t);return"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:c,hwbString:function(e,t){void 0===t&&(t=void 0!==e[3]?e[3]:1);return"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return d[e.slice(0,3)]}};var d={};for(var p in r)d[r[p]]=p},{"color-name":4}],4:[function(e,t,i){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(e,n,s){!function(e,a){"use strict";var t=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var r=function(e,t,i){return 1===arguments.length?r.get(e):r.set(e,t,i)};return r._document=e.document,r._cacheKeyPrefix="cookey.",r._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),r.defaults={path:"/",secure:!1},r.get=function(e){r._cachedDocumentCookie!==r._document.cookie&&r._renewCache();var t=r._cache[r._cacheKeyPrefix+e];return t===a?a:decodeURIComponent(t)},r.set=function(e,t,i){return(i=r._getExtendedOptions(i)).expires=r._getExpiresDate(t===a?-1:i.expires),r._document.cookie=r._generateCookieString(e,t,i),r},r.expire=function(e,t){return r.set(e,a,t)},r._getExtendedOptions=function(e){return{path:e&&e.path||r.defaults.path,domain:e&&e.domain||r.defaults.domain,expires:e&&e.expires||r.defaults.expires,secure:e&&e.secure!==a?e.secure:r.defaults.secure}},r._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},r._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?r._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!r._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},r._generateCookieString=function(e,t,i){var n=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return n+=(i=i||{}).path?";path="+i.path:"",n+=i.domain?";domain="+i.domain:"",n+=i.expires?";expires="+i.expires.toUTCString():"",n+=i.secure?";secure":""},r._getCacheFromString=function(e){for(var t={},i=e?e.split("; "):[],n=0;n<i.length;n++){var s=r._getKeyValuePairFromCookieString(i[n]);t[r._cacheKeyPrefix+s.key]===a&&(t[r._cacheKeyPrefix+s.key]=s.value)}return t},r._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var i,n=e.substr(0,t);try{i=decodeURIComponent(n)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+n+'"',e)}return{key:i,value:e.substr(t+1)}},r._renewCache=function(){r._cache=r._getCacheFromString(r._document.cookie),r._cachedDocumentCookie=r._document.cookie},r._areEnabled=function(){var e="cookies.js",t="1"===r.set(e,1).get(e);return r.expire(e),t},r.enabled=r._areEnabled(),r},i=e&&"object"==typeof e.document?t(e):t;"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof s?("object"==typeof n&&"object"==typeof n.exports&&(s=n.exports=i),s.Cookies=i):e.Cookies=i}("undefined"==typeof window?this:window)},{}],6:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i.__esModule=!0;var r=s(e("./handlebars/base")),a=n(e("./handlebars/safe-string")),o=n(e("./handlebars/exception")),l=s(e("./handlebars/utils")),c=s(e("./handlebars/runtime")),h=n(e("./handlebars/no-conflict"));function u(){var t=new r.HandlebarsEnvironment;return l.extend(t,r),t.SafeString=a.default,t.Exception=o.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var d=u();d.create=u,h.default(d),d.default=d,i.default=d,t.exports=i.default},{"./handlebars/base":7,"./handlebars/exception":10,"./handlebars/no-conflict":20,"./handlebars/runtime":21,"./handlebars/safe-string":22,"./handlebars/utils":23}],7:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.HandlebarsEnvironment=h;var s=e("./utils"),r=n(e("./exception")),a=e("./helpers"),o=e("./decorators"),l=n(e("./logger"));i.VERSION="4.0.12";i.COMPILER_REVISION=7;i.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};var c="[object Object]";function h(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},a.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(s.toString.call(e)===c){if(t)throw new r.default("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(s.toString.call(e)===c)s.extend(this.partials,e);else{if(void 0===t)throw new r.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(s.toString.call(e)===c){if(t)throw new r.default("Arg not supported with multiple decorators");s.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var u=l.default.log;i.log=u,i.createFrame=s.createFrame,i.logger=l.default},{"./decorators":8,"./exception":10,"./helpers":11,"./logger":19,"./utils":23}],8:[function(e,t,i){"use strict";i.__esModule=!0,i.registerDefaultDecorators=function(e){r.default(e)};var n,s=e("./decorators/inline"),r=(n=s)&&n.__esModule?n:{default:n}},{"./decorators/inline":9}],9:[function(e,t,i){"use strict";i.__esModule=!0;var o=e("../utils");i.default=function(e){e.registerDecorator("inline",function(s,r,a,e){var t=s;return r.partials||(r.partials={},t=function(e,t){var i=a.partials;a.partials=o.extend({},i,r.partials);var n=s(e,t);return a.partials=i,n}),r.partials[e.args[0]]=e.fn,t})},t.exports=i.default},{"../utils":23}],10:[function(e,t,i){"use strict";i.__esModule=!0;var o=["description","fileName","lineNumber","message","name","number","stack"];function l(e,t){var i=t&&t.loc,n=void 0,s=void 0;i&&(e+=" - "+(n=i.start.line)+":"+(s=i.start.column));for(var r=Error.prototype.constructor.call(this,e),a=0;a<o.length;a++)this[o[a]]=r[o[a]];Error.captureStackTrace&&Error.captureStackTrace(this,l);try{i&&(this.lineNumber=n,Object.defineProperty?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(e){}}l.prototype=new Error,i.default=l,t.exports=i.default},{}],11:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.registerDefaultHelpers=function(e){s.default(e),r.default(e),a.default(e),o.default(e),l.default(e),c.default(e),h.default(e)};var s=n(e("./helpers/block-helper-missing")),r=n(e("./helpers/each")),a=n(e("./helpers/helper-missing")),o=n(e("./helpers/if")),l=n(e("./helpers/log")),c=n(e("./helpers/lookup")),h=n(e("./helpers/with"))},{"./helpers/block-helper-missing":12,"./helpers/each":13,"./helpers/helper-missing":14,"./helpers/if":15,"./helpers/log":16,"./helpers/lookup":17,"./helpers/with":18}],12:[function(e,t,i){"use strict";i.__esModule=!0;var a=e("../utils");i.default=function(r){r.registerHelper("blockHelperMissing",function(e,t){var i=t.inverse,n=t.fn;if(!0===e)return n(this);if(!1===e||null==e)return i(this);if(a.isArray(e))return 0<e.length?(t.ids&&(t.ids=[t.name]),r.helpers.each(e,t)):i(this);if(t.data&&t.ids){var s=a.createFrame(t.data);s.contextPath=a.appendContextPath(t.data.contextPath,t.name),t={data:s}}return n(e,t)})},t.exports=i.default},{"../utils":23}],13:[function(e,t,i){"use strict";i.__esModule=!0;var n,d=e("../utils"),s=e("../exception"),p=(n=s)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("each",function(n,e){if(!e)throw new p.default("Must pass iterator to #each");var s=e.fn,t=e.inverse,i=0,r="",a=void 0,o=void 0;function l(e,t,i){a&&(a.key=e,a.index=t,a.first=0===t,a.last=!!i,o&&(a.contextPath=o+e)),r+=s(n[e],{data:a,blockParams:d.blockParams([n[e],e],[o+e,null])})}if(e.data&&e.ids&&(o=d.appendContextPath(e.data.contextPath,e.ids[0])+"."),d.isFunction(n)&&(n=n.call(this)),e.data&&(a=d.createFrame(e.data)),n&&"object"==typeof n)if(d.isArray(n))for(var c=n.length;i<c;i++)i in n&&l(i,i,i===n.length-1);else{var h=void 0;for(var u in n)n.hasOwnProperty(u)&&(void 0!==h&&l(h,i-1),h=u,i++);void 0!==h&&l(h,i-1,!0)}return 0===i&&(r=t(this)),r})},t.exports=i.default},{"../exception":10,"../utils":23}],14:[function(e,t,i){"use strict";i.__esModule=!0;var n,s=e("../exception"),r=(n=s)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=i.default},{"../exception":10}],15:[function(e,t,i){"use strict";i.__esModule=!0;var n=e("../utils");i.default=function(i){i.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),i.registerHelper("unless",function(e,t){return i.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},t.exports=i.default},{"../utils":23}],16:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(s){s.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var n=1;null!=t.hash.level?n=t.hash.level:t.data&&null!=t.data.level&&(n=t.data.level),e[0]=n,s.log.apply(s,e)})},t.exports=i.default},{}],17:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},t.exports=i.default},{}],18:[function(e,t,i){"use strict";i.__esModule=!0;var s=e("../utils");i.default=function(e){e.registerHelper("with",function(e,t){s.isFunction(e)&&(e=e.call(this));var i=t.fn;if(s.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=s.createFrame(t.data)).contextPath=s.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:n,blockParams:s.blockParams([e],[n&&n.contextPath])})})},t.exports=i.default},{"../utils":23}],19:[function(e,t,i){"use strict";i.__esModule=!0;var n=e("./utils"),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(r.methodMap,e.toLowerCase());e=0<=t?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var i=arguments.length,n=Array(1<i?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];console[t].apply(console,n)}}};i.default=r,t.exports=i.default},{"./utils":23}],20:[function(e,t,i){(function(n){"use strict";i.__esModule=!0,i.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},t.exports=i.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,i){"use strict";i.__esModule=!0,i.checkRevision=function(e){var t=e&&e[0]||1,i=d.COMPILER_REVISION;if(t!==i){if(t<i){var n=d.REVISION_CHANGES[i],s=d.REVISION_CHANGES[t];throw new u.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new u.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},i.template=function(o,l){if(!l)throw new u.default("No environment passed to template");if(!o||!o.main)throw new u.default("Unknown template object: "+typeof o);o.main.decorator=o.main_d,l.VM.checkRevision(o.compiler);var a={strict:function(e,t){if(!(t in e))throw new u.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:function(e,t,i){i.hash&&(t=h.extend({},t,i.hash),i.ids&&(i.ids[0]=!0));e=l.VM.resolvePartial.call(this,e,t,i);var n=l.VM.invokePartial.call(this,e,t,i);null==n&&l.compile&&(i.partials[i.name]=l.compile(e,o.compilerOptions,l),n=i.partials[i.name](t,i));{if(null!=n){if(i.indent){for(var s=n.split("\n"),r=0,a=s.length;r<a&&(s[r]||r+1!==a);r++)s[r]=i.indent+s[r];n=s.join("\n")}return n}throw new u.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}},fn:function(e){var t=o[e];return t.decorator=o[e+"_d"],t},programs:[],program:function(e,t,i,n,s){var r=this.programs[e],a=this.fn(e);return t||s||n||i?r=p(this,e,a,t,i,n,s):r||(r=this.programs[e]=p(this,e,a)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=h.extend({},t,e)),i},nullContext:Object.seal({}),noop:l.VM.noop,compilerInfo:o.compiler};function c(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.data;c._setup(t),!t.partial&&o.useData&&(i=function(e,t){t&&"root"in t||((t=t?d.createFrame(t):{}).root=e);return t}(e,i));var n=void 0,s=o.useBlockParams?[]:void 0;function r(e){return""+o.main(a,e,a.helpers,a.partials,i,s,n)}return o.useDepths&&(n=t.depths?e!=t.depths[0]?[e].concat(t.depths):t.depths:[e]),(r=f(o.main,r,a,t.depths||[],i,s))(e,t)}return c.isTop=!0,c._setup=function(e){e.partial?(a.helpers=e.helpers,a.partials=e.partials,a.decorators=e.decorators):(a.helpers=a.merge(e.helpers,l.helpers),o.usePartial&&(a.partials=a.merge(e.partials,l.partials)),(o.usePartial||o.useDecorators)&&(a.decorators=a.merge(e.decorators,l.decorators)))},c._child=function(e,t,i,n){if(o.useBlockParams&&!i)throw new u.default("must pass block params");if(o.useDepths&&!n)throw new u.default("must pass parent depths");return p(a,e,o[e],t,0,i,n)},c},i.wrapProgram=p,i.resolvePartial=function(e,t,i){e?e.call||i.name||(i.name=e,e=i.partials[e]):e="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name];return e},i.invokePartial=function(e,t,n){var s=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;n.fn&&n.fn!==a&&function(){n.data=d.createFrame(n.data);var i=n.fn;r=n.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=d.createFrame(t.data),t.data["partial-block"]=s,i(e,t)},i.partials&&(n.partials=h.extend({},n.partials,i.partials))}();void 0===e&&r&&(e=r);{if(void 0===e)throw new u.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}},i.noop=a;var n,h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./utils")),s=e("./exception"),u=(n=s)&&n.__esModule?n:{default:n},d=e("./base");function p(n,e,s,r,t,a,o){function i(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=o;return!o||e==o[0]||e===n.nullContext&&null===o[0]||(i=[e].concat(o)),s(n,e,n.helpers,n.partials,t.data||r,a&&[t.blockParams].concat(a),i)}return(i=f(s,i,n,o,r,a)).program=e,i.depth=o?o.length:0,i.blockParams=t||0,i}function a(){return""}function f(e,t,i,n,s,r){if(e.decorator){var a={};t=e.decorator(t,a,i,n&&n[0],s,r,n),h.extend(t,a)}return t}},{"./base":7,"./exception":10,"./utils":23}],22:[function(e,t,i){"use strict";function n(e){this.string=e}i.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},i.default=n,t.exports=i.default},{}],23:[function(e,t,i){"use strict";i.__esModule=!0,i.extend=o,i.indexOf=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},i.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!r.test(e))return e;return e.replace(s,a)},i.isEmpty=function(e){return!e&&0!==e||!(!h(e)||0!==e.length)},i.createFrame=function(e){var t=o({},e);return t._parent=e,t},i.blockParams=function(e,t){return e.path=t,e},i.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},s=/[&<>"'`=]/g,r=/[&<>"'`=]/;function a(e){return n[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}var l=Object.prototype.toString;i.toString=l;var c=function(e){return"function"==typeof e};c(/x/)&&(i.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),i.isFunction=c;var h=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};i.isArray=h},{}],24:[function(e,t,i){t.exports=e("./dist/cjs/handlebars.runtime").default},{"./dist/cjs/handlebars.runtime":6}],25:[function(e,t,i){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":24}],26:[function(e,t,i){var n,s,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var c,h=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?h=c.concat(h):d=-1,h.length&&f())}function f(){if(!u){var e=l(p);u=!0;for(var t=h.length;t;){for(c=h,h=[];++d<t;)c&&c[d].run();d=-1,t=h.length}c=null,u=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new g(e,t)),1!==h.length||u||l(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],27:[function(e,t,i){var n=e("./helper/makeString");t.exports=function(e,t){e=n(e);var i=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+i}},{"./helper/makeString":31}],28:[function(e,t,i){var n=e("./trim");t.exports=function(e){return n(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":36}],29:[function(e,t,i){var n=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+n(e)+"]"}},{"./escapeRegExp":30}],30:[function(e,t,i){var n=e("./makeString");t.exports=function(e){return n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":31}],31:[function(e,t,i){t.exports=function(e){return null==e?"":""+e}},{}],32:[function(e,t,i){t.exports=function(e,t){if(t<1)return"";for(var i="";0<t;)1&t&&(i+=e),t>>=1,e+=e;return i}},{}],33:[function(e,t,i){var n=e("./pad");t.exports=function(e,t,i){return n(e,t,i)}},{"./pad":34}],34:[function(e,t,i){var r=e("./helper/makeString"),a=e("./helper/strRepeat");t.exports=function(e,t,i,n){e=r(e),t=~~t;var s=0;switch(i?1<i.length&&(i=i.charAt(0)):i=" ",n){case"right":return s=t-e.length,e+a(i,s);case"both":return s=t-e.length,a(i,Math.ceil(s/2))+e+a(i,Math.floor(s/2));default:return s=t-e.length,a(i,s)+e}}},{"./helper/makeString":31,"./helper/strRepeat":32}],35:[function(e,t,i){var n=e("./pad");t.exports=function(e,t,i){return n(e,t,i,"right")}},{"./pad":34}],36:[function(e,t,i){var n=e("./helper/makeString"),s=e("./helper/defaultToWhiteSpace"),r=String.prototype.trim;t.exports=function(e,t){return e=n(e),!t&&r?r.call(e):(t=s(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":29,"./helper/makeString":31}],37:[function(o,e,t){(function(e,a){"use strict";o("backbone").$=o("backbone.native"),o("backbone.babysitter"),o("Backbone.Mutators"),o("hammerjs"),window.addEventListener("load",function(e){e.target,e.type;try{o("app/model/helper/bootstrap")(window.bootstrap)}catch(e){var t=document.querySelector(".app");throw t.classList.remove("app-initial"),t.classList.add("app-error"),new Error("bootstrap data error ("+e.message+")",e.fileName,e.lineNumber)}finally{delete window.bootstrap}o("app/view/template/_helpers"),o("app/view/helper/createColorStyleSheet").call();var i=o("app/view/AppView"),n=i.getInstance.bind(i),s=o("webfontloader"),r={async:!0,groupName:"",classes:!1,active:function(){this.groupName},fontactive:function(e,t){this.groupName},inactive:function(){console.warn("WebFont:%s:inactive",this.groupName)},fontinactive:function(e,t){console.warn("WebFont:%s:fontinactive '%s' (%s)",this.groupName,e,t)},loading:function(){this.groupName}};s.load(a.defaults({async:!1,groupName:"required",custom:{families:["Franklin Gothic FS:n4,n7","FolioFigures:n4"],testStrings:{FolioFigures:"hms"}},active:n,inactive:n},r)),s.load(a.defaults({},r))})}).call(this,!1,o("underscore"))},{"Backbone.Mutators":"Backbone.Mutators","app/model/helper/bootstrap":52,"app/view/AppView":59,"app/view/helper/createColorStyleSheet":81,"app/view/template/_helpers":108,backbone:"backbone","backbone.babysitter":"backbone.babysitter","backbone.native":"backbone.native",hammerjs:"hammerjs",underscore:"underscore",webfontloader:"webfontloader"}],38:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){return'<svg class="cog-symbol icon" viewBox="-100 -100 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">\n\t<path d="M11.754,-99.307c-7.809,-0.924 -15.699,-0.924 -23.508,0l-3.73,20.82c-6.254,1.234 -12.338,3.21 -18.123,5.888l-15.255,-14.651c-6.861,3.842 -13.244,8.48 -19.018,13.818l9.22,19.036c-4.335,4.674 -8.095,9.849 -11.201,15.416l-20.953,-2.886c-3.292,7.141 -5.731,14.645 -7.265,22.357l18.648,9.981c-0.759,6.329 -0.759,12.727 0,19.056l-18.648,9.981c1.534,7.712 3.973,15.216 7.265,22.357l20.953,-2.886c3.106,5.567 6.866,10.742 11.201,15.416l-9.22,19.036c5.774,5.338 12.157,9.976 19.018,13.818l15.255,-14.651c5.785,2.678 11.869,4.654 18.123,5.888l3.73,20.82c7.809,0.924 15.699,0.924 23.508,0l3.73,-20.82c6.254,-1.234 12.338,-3.21 18.123,-5.888l15.255,14.651c6.861,-3.842 13.244,-8.48 19.018,-13.818l-9.22,-19.036c4.335,-4.674 8.095,-9.849 11.201,-15.416l20.953,2.886c3.292,-7.141 5.731,-14.645 7.265,-22.357l-18.648,-9.981c0.759,-6.329 0.759,-12.727 0,-19.056l18.648,-9.981c-1.534,-7.712 -3.973,-15.216 -7.265,-22.357l-20.953,2.886c-3.106,-5.567 -6.866,-10.742 -11.201,-15.416l9.22,-19.036c-5.774,-5.338 -12.157,-9.976 -19.018,-13.818l-15.255,14.651c-5.785,-2.678 -11.869,-4.654 -18.123,-5.888l-3.73,-20.82ZM0,-33c18.213,0 33,14.787 33,33c0,18.213 -14.787,33 -33,33c-18.213,0 -33,-14.787 -33,-33c0,-18.213 14.787,-33 33,-33Z" style="fill:currentColor;fill-rule:evenodd;"/>\n</svg>\n'},useData:!0})},{"hbsfy/runtime":25}],39:[function(i,o,e){(function(t,n){var s=i("backbone"),r=i("app/model/collection/ArticleCollection"),a=i("app/model/collection/BundleCollection"),e=s.Router.extend({initialize:function(e){t&&(this._routeNames=[],this.route=function(e,t,i){return this._routeNames.push(n.isString(t)?t:""),s.Router.prototype.route.apply(this,arguments)},this.on("route",function(e,t){t.join()})),this.route(/(.*)/,"notfound",this.toNotFound),this.route(/^([a-z][a-z0-9\-]*)\/?$/,"article-item",this.toArticleItem),this.route(/^(?:bundles)?\/?$/,"root",this.toRoot),this.route(/^bundles\/([^\/]+)\/?$/,"bundle-item",this.toBundleItem),this.route(/^bundles\/([^\/]+)\/(\d+)\/?$/,"media-item",this.toMediaItem),t&&this._routeNames},selectMedia:function(e){this._goToLocation(e.get("bundle"),e)},selectBundle:function(e){this._goToLocation(e)},deselectMedia:function(){this._goToLocation(a.selected)},deselectBundle:function(){this._goToLocation()},selectArticle:function(e){this.navigate(e.get("handle"),{trigger:!0})},deselectArticle:function(){this.navigate("",{trigger:!0})},_getLocation:function(e,t){var i,n=[];return e&&(n.push("bundles"),n.push(e.get("handle")),t&&0<=(i=e.get("media").indexOf(t))&&n.push(i)),n.join("/")},_goToLocation:function(e,t){this.navigate(this._getLocation(e,t),{trigger:!0})},toRoot:function(){this.trigger("change:before"),a.selected&&a.deselect(),r.deselect(),this.trigger("change:after")},toNotFound:function(e){},toBundleItem:function(e){var t=a.findWhere({handle:e});if(!t)throw new Error('Cannot find bundle with handle "'+e+'"');this._changeSelection(t)},toMediaItem:function(e,t){var i,n;if(!(i=a.findWhere({handle:e})))throw new Error('No bundle with handle "'+e+'" found');if(!(n=i.get("media").at(t)))throw new Error("No media at index "+t+' in bundle with handle "'+e+'" found');this._changeSelection(i,n)},toArticleItem:function(e){var t=r.findWhere({handle:e});if(!t)throw new Error('Cannot find article with handle "'+e+'"');this.trigger("change:before",t),a.deselect(),r.select(t),this.trigger("change:after",t)},_changeSelection:function(e,t){var i,n;void 0===e&&(e=null),void 0===t&&(t=null),n=(i=a.selected)?i.get("media").selected:null,i&&i.cid,e&&e.cid,n&&n.cid,t&&t.cid,(r.selected||i!==e||n!==t)&&(this.trigger("change:before",e,t),e&&e.get("media").select(t),a.select(e),r.deselect(),this.trigger("change:after",e,t))}});o.exports=new e}).call(this,!1,i("underscore"))},{"app/model/collection/ArticleCollection":48,"app/model/collection/BundleCollection":49,backbone:"backbone",underscore:"underscore"}],40:[function(p,e,t){(function(u,d){e.exports=function(){var e,t,i,n={},s=p("../../../sass/variables.json");for(t in n.VPAN_DRAG=.95,n.HPAN_OUT_DRAG=.4,n.VPAN_OUT_DRAG=.1,n.PAN_THRESHOLD=15,n.COLLAPSE_THRESHOLD=75,n.COLLAPSE_OFFSET=parseInt(s.temp.collapse_offset),n.VIDEO_CROP_PX=parseInt(s.video_crop_px),n.BREAKPOINTS={},s.breakpoints)e=s.breakpoints[t],e=(e=Array.isArray(e)?e.join(", "):e).replace(/[\'\"]/g,""),(e=window.matchMedia(e)).className=t,n.BREAKPOINTS[t]=e;if(u)for(t in n.BREAKPOINTS)n.BREAKPOINTS[t].media;n.DEFAULT_COLORS=d.clone(s.default_colors),n.APP_ROOT=window.approot,n.MEDIA_DIR=window.mediadir,delete window.approot,delete window.mediadir,n.FONT_METRICS={"Franklin Gothic FS":{unitsPerEm:1e3,ascent:827,descent:-173},ITCFranklinGothicStd:{unitsPerEm:1e3,ascent:686,descent:-314},FolioFigures:{unitsPerEm:1024,ascent:939,descent:-256}},n.PAUSE_CHAR=String.fromCharCode(9208),n.PLAY_CHAR=String.fromCharCode(9205),n.STOP_CHAR=String.fromCharCode(9209),"3d"==s.transform_type?n.TRANSLATE_TEMPLATE=function(e,t){return"translate3d("+e+"px, "+t+"px, 0px)"}:n.TRANSLATE_TEMPLATE=function(e,t){return"translate("+e+"px, "+t+"px)"},n.TRANSLATE_TEMPLATE=function(e,t){return"translate("+e+"px, "+t+"px)"};var r=n.TRANSITION_EASE=s.transitions.ease,a=n.TRANSITION_DURATION=parseFloat(s.transitions.duration_ms),o=n.TRANSITION_DELAY_INTERVAL=parseFloat(s.transitions.delay_interval_ms),l=n.TRANSITION_MIN_DELAY=parseFloat(s.transitions.min_delay_ms),c=n.TRANSITION_DELAY=n.TRANSITION_DURATION+n.TRANSITION_DELAY_INTERVAL;(e={tx:function(e,t,i){d.isNumber(e)||(e=1),d.isNumber(t)||(t=-1),d.isString(i)||(i=r);var n={};return t<0?(n.duration=a*e+o*(e-1),n.delay=0):(n.duration=a*e+o*(e-1)-l,n.delay=c*t-l),n.easeing=i,0},NONE:{delay:0,duration:0,easing:"step-start"}}).NOW={delay:0,duration:a,easing:r},e.UNSET=d.defaults({cssText:""},e.NONE);var h=d.defaults({duration:a-l},e.NOW);for(t in e.FIRST=d.defaults({delay:0*c+l},h),e.BETWEEN=d.defaults({delay:1*c+l},h),e.LAST=d.defaults({delay:2*c+l},h),e.AFTER=d.defaults({delay:2*c+l},h),e.BETWEEN_EARLY=d.defaults({delay:1*c+l-60},h),e.BETWEEN_LATE=d.defaults({delay:1*c+l+60},h),e.FIRST_LATE=d.defaults({delay:.5*c+l},h),e.LAST_EARLY=d.defaults({delay:1.5*c+l},h),e)d.isFunction(e[t])||((i=e[t]).name=t,i.className="tx-"+t.replace("_","-").toLowerCase(),i.hasOwnProperty("cssText")||(i.cssText=i.duration/1e3+"s "+i.easing+" "+i.delay/1e3+"s"),i.name,i.cssText);return n.transitions=e,n}()}).call(this,!1,p("underscore"))},{"../../../sass/variables.json":138,underscore:"underscore"}],41:[function(n,s,e){(function(a){var r=n("cookies-js"),o=n("app/control/Globals"),e=n("app/view/base/View"),t=n("./template/DebugToolbar.hbs"),i=n("./template/DebugToolbar.SVGGrid.hbs"),l=a.template("<%= w %> × <%= h %>");s.exports=e.extend({cidPrefix:"debugToolbar",tagName:"div",className:"toolbar",template:t,properties:{grid:{get:function(){return this._grid||(this._grid=this.createGridElement())}}},initialize:function(e){r.defaults={expires:new Date(2147483647e3),domain:String(window.location).match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i)[1]},this.el.innerHTML=this.template({tests:Modernizr,navigator:window.navigator});var t=document.getElementById("container");t.insertBefore(this.createGridElement(),t.firstElementChild),this.backendEl=this.el.querySelector("#edit-backend a"),this.mediaInfoEl=this.el.querySelector("#media-info span"),this.appStateEl=this.el.querySelector("#app-state"),this.initializeClassToggle("show-links",this.el.querySelector("#links-toggle"),this.el,function(e,t){this.el.classList.toggle("not-"+e,!t)}),this.initializeClassToggle("show-tests",this.el.querySelector("#toggle-tests a"),this.el),this.initializeClassToggle("hide-passed",this.el.querySelector("#toggle-passed"),this.el),this.initializeClassToggle("debug-state",this.el.querySelector("#toggle-state a"),t),this.initializeClassToggle("debug-blocks-nav",this.el.querySelector("#toggle-blocks-nav a"),t),this.initializeClassToggle("debug-blocks-content",this.el.querySelector("#toggle-blocks-content a"),t),this.initializeClassToggle("debug-mdown",this.el.querySelector("#toggle-mdown a"),t),this.initializeClassToggle("debug-tx",this.el.querySelector("#toggle-tx a"),t,function(e,t){this.el.classList.toggle("show-tx",t),this.el.classList.toggle("not-show-tx",!t)}),this.initializeClassToggle("debug-graph",this.el.querySelector("#toggle-graph a"),t),this.initializeClassToggle("debug-logs",this.el.querySelector("#toggle-logs a"),t),this.initializeClassToggle("debug-grid-bg",this.el.querySelector("#toggle-grid-bg a"),document.body),this.initializeViewportInfo(),this.listenTo(this.model,"change",this._onModelChange),this._onModelChange()},initializeViewportInfo:function(){var e=this.el.querySelector("#viewport-info span"),t=function(){e.textContent=l({w:window.innerWidth,h:window.innerHeight})};t.call(),window.addEventListener("resize",a.debounce(t,100,!1,!1))},initializeToggle:function(t,e,i){if(e){var n=this,s="true"===r.get(t);i.call(n,t,s),e.addEventListener("click",function(e){e.defaultPrevented||(e.preventDefault(),s=!s,r.set(t,s?"true":""),i.call(n,t,s))},!1)}},initializeClassToggle:function(e,i,n,s){var r=a.isFunction(s);this.initializeToggle(e,i,function(e,t){n.classList.toggle(e,t),i.classList.toggle("toggle-enabled",t),i.classList.toggle("color-reverse",t),r&&s.apply(this,arguments)})},_onModelChange:function(){var e,t,i,n,s=this.appStateEl.children;for(e=0,t=s.length;e<t;e++)i=(n=s[e]).getAttribute("data-prop"),n.classList.toggle("has-value",this.model.get(i)),n.classList.toggle("has-changed",this.model.hasChanged(i)),n.classList.toggle("color-reverse",this.model.hasChanged(i));var r=o.APP_ROOT+"symphony/";switch(this.model.get("routeName")){case"article-item":r+="publish/articles/edit/"+this.model.get("article").id;break;case"bundle-item":r+="publish/bundles/edit/"+this.model.get("bundle").id;break;case"media-item":r+="publish/media/edit/"+this.model.get("media").id;break;case"root":r+="publish/bundles"}this.backendEl.setAttribute("href",r),this.model.hasChanged("routeName")&&(document.body.setAttribute("last-route",this.model.previous("routeName")),document.body.setAttribute("current-route",this.model.get("routeName"))),this.model.hasChanged("media")&&(this.model.has("media")?(this.mediaInfoEl.textContent=l(this.model.get("media").get("source").toJSON()),this.mediaInfoEl.style.display=""):(this.mediaInfoEl.textContent="",this.mediaInfoEl.style.display="none"))},createGridElement:function(){var e=document.createElement("div");return e.id="grid-wrapper",e.innerHTML=i(),e}}),s.exports.prototype._logFlags=""}).call(this,n("underscore"))},{"./template/DebugToolbar.SVGGrid.hbs":42,"./template/DebugToolbar.hbs":43,"app/control/Globals":40,"app/view/base/View":67,"cookies-js":5,underscore:"underscore"}],42:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){return'<svg id="debug-grid" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMaxYMid slice" viewport-fill="hsl(0,0%,100%)" viewport-fill-opacity="1" style="fill:none;stroke:none;stroke-width:1px;fill:none;fill-rule:evenodd;">\n<defs>\n\t<pattern id="pat-baseline-12px" class="baseline base12" x="0" y="0" width="20" height="12" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.0"/>\n\t\t<line x1="0" x2="100%" y1="3" y2="3" stroke-opacity="0.125"/>\n\t\t<line x1="0" x2="100%" y1="6" y2="6" stroke-opacity="0.375"/>\n\t\t<line x1="0" x2="100%" y1="9" y2="9" stroke-opacity="0.125"/>\n\t</pattern>\n\n\t<pattern id="pat-baseline-24px" class="baseline base12" x="0" y="0" width="20" height="24" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.0"/>\n\t</pattern>\n\n\t<pattern id="pat-baseline-10px" class="baseline base10" x="0" y="0" width="20" height="10" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.00"/>\n\t\t<line x1="0" x2="100%" y1="5" y2="5" stroke-opacity="0.75"/>\n\t</pattern>\n\t<pattern id="pat-baseline-20px" class="baseline base10" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.0"/>\n\t</pattern>\n\t<pattern id="pat-cols-220px" x="0" y="0" width="220" height="36" patternUnits="userSpaceOnUse">\n\t\t<rect transform="translate(0,0)" x="0" y="0" width="20" height="100%" fill="hsl(336,50%,40%)" fill-opacity="0.1"/>\n\t\t<rect transform="translate(200,0)" x="0" y="0" width="20" height="100%" fill="hsl(336,50%,40%)" fill-opacity="0.1"/>\n\t\t<line transform="translate(20 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,60%)" stroke-opacity="0.2"/>\n\t\t<line transform="translate(200 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,40%)" stroke-opacity="0.2"/>\n\n\t\t<line transform="translate(140 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,40%)" stroke-opacity="0.3"/>\n\t\t<line transform="translate(80 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,40%)" stroke-opacity="0.3"/>\n\n\t\t<line transform="translate(0 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(236,50%,40%)" stroke-opacity="0.4" stroke-width="1"/>\n\t\t<line transform="translate(220 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(236,50%,40%)" stroke-opacity="0.4" stroke-width="1"/>\n\t</pattern>\n</defs>\n<g id="debug-grid-body" transform="translate(0 0.5)">\n\t<rect id="baseline" x="0" y="0" width="100%" height="100%"/>\n\t<g id="debug-grid-container">\n\t\t<g id="debug-grid-content">\n\t\t\t<rect id="baseline-content" x="0" y="0" width="100%" height="100%"/>\n\t\t\t<line id="gct0" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t\t\t<line id="gct1" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t\t</g>\n\t\t<line id="gnv0" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t\t<line id="gnv1" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t</g>\n\n\t<g id="abs-cols">\n\t\t<rect id="columns" x="0" y="0" width="100%" height="100%"/>\n\t</g>\n\n\t<g id="rel-cols">\n\t\t<line id="le" class="vguide edge" x1="0" x2="0" y1="0" y2="100%"/>\n\t\t<line id="re" class="vguide edge" x1="100%" x2="100%" y1="0" y2="100%"/>\n\n\t\t<line id="gl0" class="vguide margin" x1="0" x2="0" y1="0" y2="100%"/>\n\t\t<line id="gl1" class="vguide gutter" x1="0" x2="0" y1="0" y2="100%"/>\n\n\t\t<line id="gr0" class="vguide margin" x1="0" x2="0" y1="0" y2="100%"/>\n\t\t<line id="gr1" class="vguide gutter" x1="0" x2="0" y1="0" y2="100%"/>\n\n\t\t<line id="gm" class="vguide" x1="0" x2="0" y1="0" y2="100%"/>\n\t</g>\n</g>\n</svg>\n'},useData:!0})},{"hbsfy/runtime":25}],43:[function(e,t,i){var n=e("hbsfy/runtime"),s=e("../../View/template/svg/CogSymbol.hbs");n.registerPartial("../../View/template/svg/CogSymbol.hbs",s),t.exports=n.template({1:function(e,t,i,n,s){var r;return'\t<dd id="select-layout">\n\t\t<select size=1>\n'+(null!=(r=i.each.call(null!=t?t:e.nullContext||{},null!=t?t.layouts:t,{name:"each",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?r:"")+"\t\t</select>\n\t</dd>\n"},2:function(e,t,i,n,s){var r=e.lambda,a=e.escapeExpression;return'\t\t\t<option value="'+a(r(t,t))+'">'+a(r(t,t))+"</option>\n"},4:function(e,t,i,n,s){var r,a,o=null!=t?t:e.nullContext||{};return'\t\t<li class="'+(null!=(r=i.if.call(o,t,{name:"if",hash:{},fn:e.program(5,s,0),inverse:e.program(7,s,0),data:s}))?r:"")+'">'+e.escapeExpression("function"==typeof(a=null!=(a=i.key||s&&s.key)?a:i.helperMissing)?a.call(o,{name:"key",hash:{},data:s}):a)+"</li>\n"},5:function(e,t,i,n,s){return"passed"},7:function(e,t,i,n,s){return"failed"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a=null!=t?t:e.nullContext||{},o=e.escapeExpression;return'<dl class="debug-links color-bg">\n\t<dt id="links-toggle">\n'+(null!=(r=e.invokePartial(n["../../View/template/svg/CogSymbol.hbs"],t,{name:"../../View/template/svg/CogSymbol.hbs",data:s,indent:"\t\t",helpers:i,partials:n,decorators:e.decorators}))?r:"")+"\t</dt>\n"+(null!=(r=i.if.call(a,null!=t?t.layouts:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?r:"")+'\t<dd id="edit-backend">\n\t\t<a href="'+o((i.global||t&&t.global||i.helperMissing).call(a,"APP_ROOT",{name:"global",hash:{},data:s}))+'symphony/" class="color-fg color-bg" target="_blank">CMS</a>\n\t</dd>\n\t<dd id="toggle-tests">\n\t\t<a href="#toggle-tests" class="color-fg color-bg">Tests</a>\n\t</dd>\n\t<dd id="toggle-state">\n\t\t<a href="#toggle-state" class="color-fg color-bg">Route</a>\n\t</dd>\n\t<dd id="toggle-blocks-nav">\n\t\t<a href="#toggle-blocks-nav" class="color-fg color-bg">Nav</a>\n\t</dd>\n\t<dd id="toggle-blocks-content">\n\t\t<a href="#toggle-blocks-content" class="color-fg color-bg">Content</a>\n\t</dd>\n\t<dd id="toggle-mdown">\n\t\t<a href="#toggle-mdown" class="color-fg color-bg">Markdown</a>\n\t</dd>\n\t<dd id="toggle-tx">\n\t\t<a href="#toggle-tx" class="color-fg color-bg">TX/FX</a>\n\t</dd>\n\t<dd id="toggle-grid-bg">\n\t\t<a href="#toggle-grid-bg" class="color-fg color-bg">Grid</a>\n\t</dd>\n\t<dd id="toggle-graph">\n\t\t<a href="#toggle-graph" class="color-fg color-bg">Graph</a>\n\t</dd>\n\t<dd id="toggle-logs">\n\t\t<a href="#toggle-logs" class="color-fg color-bg">Logs</a>\n\t</dd>\n\t<dd id="media-info">\n\t\t<span></span>\n\t</dd>\n\t<dd id="viewport-info">\n\t\t<span></span>\n\t</dd>\n\t<dd id="app-state">\n\t\t<span class="color-fg color-bg" data-prop="collapsed">c</span><span class="color-fg color-bg" data-prop="withBundle">b</span><span class="color-fg color-bg" data-prop="withMedia">m</span><span class="color-fg color-bg" data-prop="withArticle">a</span>\n\t</dd>\n</dl>\n<div id="test-results">\n\t<h6>Tests <a id="toggle-passed" href="#toggle-passed">Passed</a></h6>\n\t<p>'+o(e.lambda(null!=(r=null!=t?t.navigator:t)?r.userAgent:r,t))+"</p>\n\t<ul>\n"+(null!=(r=i.each.call(a,null!=t?t.tests:t,{name:"each",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?r:"")+"\t</ul>\n</div>\n"},usePartial:!0,useData:!0})},{"../../View/template/svg/CogSymbol.hbs":38,"hbsfy/runtime":25}],44:[function(e,t,i){var n=e("backbone").Model;t.exports=n.extend({defaults:{collapsed:!1,routeName:"initial",article:null,bundle:null,media:null,fromRouteName:"",withArticle:!1,withBundle:!1,withMedia:!1},getters:["collapsed","routeName","article","bundle","media","fromRouteName","withArticle","withBundle","withMedia"],initialize:function(){var t={silent:!1};this.listenTo(this,"change",function(e){this.hasChanged("routeName")&&this.set("fromRouteName",this.previous("routeName"),t),this.hasChanged("article")&&this.set("withArticle",this.has("article"),t),this.hasChanged("bundle")&&this.set("withBundle",this.has("bundle"),t),this.hasChanged("media")&&this.set("withMedia",this.has("media"),t)}),this.listenTo(this,"change:routeName",function(e){this.cid}),this.listenTo(this,"change:article",function(e){this.cid}),this.listenTo(this,"change:bundle",function(e){this.cid}),this.listenTo(this,"change:media",function(e){this.cid})},hasAnyPrevious:function(e){return null!=this.previous(e)},hasAnyChanged:function(e){return this.hasChanged(e)&&this.has(e)!=this.hasAnyPrevious(e)}})},{backbone:"backbone"}],45:[function(t,i,e){(function(s){var e=t("app/model/BaseModel"),r=function(e,t){if(s.isString(t)){var i=t.indexOf(":");0<i?e[t.substring(0,i)]=t.substring(i+1).replace(/(\,|\;)/g,function(e){return","==e?";":","}):e[t]=t}return e};i.exports=e.extend({_domPrefix:"_",defaults:{get attrs(){return{}}},getters:["domid"],mutators:{domid:function(){return this.hasOwnProperty("_domId")||(this._domId=this._domPrefix+this.id),this._domId},attrs:{set:function(e,t,i,n){Array.isArray(t)&&(t=t.reduce(r,{})),s.isObject(t)||(console.error("%s::attrs value not an object or string array",this.cid,t),t={}),n(e,t,i)}}},attr:function(e){return this.attrs()[e]},attrs:function(){return this.get("attrs")},toString:function(){return this.get("domid")},getDistanceToSelected:function(){return this.collection&&0<this.collection.selectedIndex?this.collection.indexOf(this)-this.collection.selectedIndex:-1},getIndex:function(){return this.collection?this.collection.indexOf(this):-1}})}).call(this,t("underscore"))},{"app/model/BaseModel":46,underscore:"underscore"}],46:[function(t,i,e){(function(s){var r=t("backbone"),e={extend:function(e,t){var i,n;for(n in e)e.hasOwnProperty(n)&&s.isObject(e[n])&&(e[n]=s.defaults(e[n],this.prototype[n]));return i=r.Model.extend.apply(this,arguments),Array.isArray(i.prototype.getters)&&i.prototype.getters.forEach(function(e){Object.defineProperty(i.prototype,e,{enumerable:!0,get:function(){return this.get(e)}})}),i}};i.exports=r.Model.extend.call(r.Model,{},e)}).call(this,t("underscore"))},{backbone:"backbone",underscore:"underscore"}],47:[function(t,n,e){(function(s){var i=t("backbone"),e=i.Collection.extend({initialize:function(e,t){t=s.defaults({},t,{initialSelection:"none",silentInitial:!0}),this.initialSelection=t.initialSelection,this.initialOptions={silent:t.silentInitial}},reset:function(e,t){this.deselect(this.initialOptions),i.Collection.prototype.reset.apply(this,arguments),"first"===this.initialSelection&&this.length&&this.select(this.at(0),this.initialOptions)},select:function(e,t){if(void 0===e&&(e=null),this.selected!==e){var i=!(t&&t.silent),n=this.selected;this.lastSelected=this.selected,this.lastSelectedIndex=this.selectedIndex,this.selected=e,this.selectedIndex=this.indexOf(e),n?(s.isFunction(n.deselect)?n.deselect(t):i&&(n.selected=void 0,n.trigger("deselected",e,n)),i&&this.trigger("deselect:one",n)):i&&this.trigger("deselect:none",null),e?(s.isFunction(e.select)?e.select(t):i&&(e.selected=!0,e.trigger("selected",e,n)),i&&this.trigger("select:one",e)):i&&this.trigger("select:none",null)}},deselect:function(e){this.select(null,e)},selectAt:function(e,t){(e<0||e>=this.length)&&new RangeError("index is out of bounds"),this.select(this.at(e),t)},distance:function(e,t){var i,n;if(!e)return NaN;if(-1==(i=this.indexOf(e)))return NaN;if(1==arguments.length)n=this.selectedIndex;else{if(!t)return NaN;if(-1==(n=this.indexOf(t)))return NaN}return Math.abs(n-i)},hasFollowing:function(e){return e||(e=this.selected),this.indexOf(e)<this.length-1},following:function(e){return e||(e=this.selected),this.hasFollowing(e)?this.at(this.indexOf(e)+1):null},followingOrFirst:function(e){return e||(e=this.selected),this.at((this.indexOf(e)+1)%this.length)},hasPreceding:function(e){return e||(e=this.selected),0<this.indexOf(e)},preceding:function(e){return e||(e=this.selected),this.hasPreceding(e)?this.at(this.indexOf(e)-1):null},precedingOrLast:function(e){e||(e=this.selected);var t=this.indexOf(e)-1;return this.at(-1<t?t:this.length-1)}});n.exports=e}).call(this,t("underscore"))},{backbone:"backbone",underscore:"underscore"}],48:[function(e,t,i){var n=e("app/model/SelectableCollection"),s=e("app/model/item/ArticleItem"),r=n.extend({model:s});t.exports=new r},{"app/model/SelectableCollection":47,"app/model/item/ArticleItem":53}],49:[function(e,t,i){var n=e("app/model/SelectableCollection"),s=e("app/model/item/BundleItem"),r=n.extend({model:s,comparator:function(e,t){var i=e.get("completed"),n=t.get("completed");return n<i?-1:i<n?1:0},url:"/json/bundles/"});t.exports=new r},{"app/model/SelectableCollection":47,"app/model/item/BundleItem":54}],50:[function(e,t,i){var n=e("app/model/SelectableCollection"),s=e("app/model/item/KeywordItem"),r=n.extend({model:s});t.exports=new r},{"app/model/SelectableCollection":47,"app/model/item/KeywordItem":55}],51:[function(e,t,i){var n=e("backbone"),s=e("app/model/item/TypeItem"),r=n.Collection.extend({model:s});t.exports=new r},{"app/model/item/TypeItem":58,backbone:"backbone"}],52:[function(d,e,t){(function(u){e.exports=function(e){d("app/control/Globals").APP_NAME=e.params["website-name"];var t=d("app/model/collection/TypeCollection"),i=d("app/model/collection/KeywordCollection"),n=d("app/model/collection/BundleCollection"),s=d("app/model/collection/ArticleCollection"),r=e["articles-all"],a=e["types-all"],o=e["keywords-all"],l=e["bundles-all"],c=e["media-all"],h=u.groupBy(c,"bId");l.forEach(function(n,s,e){n.tIds=[],n.media=h[n.id],o.forEach(function(e,t,i){0===s&&(e.bIds=[]),-1!=n.kIds.indexOf(e.id)&&(e.bIds.push(n.id),-1==n.tIds.indexOf(e.tId)&&n.tIds.push(e.tId))})}),s.reset(r),t.reset(a),i.reset(o),n.reset(l)}}).call(this,d("underscore"))},{"app/control/Globals":40,"app/model/collection/ArticleCollection":48,"app/model/collection/BundleCollection":49,"app/model/collection/KeywordCollection":50,"app/model/collection/TypeCollection":51,underscore:"underscore"}],53:[function(e,t,i){var n=e("app/model/BaseItem");t.exports=n.extend({_domPrefix:"a",defaults:{name:"",handle:"",text:""}})},{"app/model/BaseItem":45}],54:[function(c,h,e){(function(e){var i=c("color"),t=c("app/model/BaseItem"),n=c("app/model/item/MediaItem"),s=c("app/model/SelectableCollection"),r=c("app/control/Globals"),a=c("utils/strings/stripTags"),o=e.defaults({"has-colors":"defaults"},r.DEFAULT_COLORS),l=s.extend({model:n,comparator:"o"});h.exports=t.extend({_domPrefix:"b",defaults:{name:"",handle:"",desc:"",completed:0,get kIds(){return[]}},getters:["name","media"],mutators:{text:function(){return a(this.get("desc"))},media:{transient:!0,set:function(e,t,i,n){Array.isArray(t)&&(t.forEach(function(e){e.bundle=this},this),t=new l(t)),n(e,t,i)}}},initialize:function(e,t){this.colors={fgColor:new i(this.attr("color")),bgColor:new i(this.attr("background-color")),lnColor:new i(this.attr("link-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},attrs:function(){return this._attrs||(this._attrs=e.defaults({},this.get("attrs"),o))}})}).call(this,c("underscore"))},{"app/control/Globals":40,"app/model/BaseItem":45,"app/model/SelectableCollection":47,"app/model/item/MediaItem":56,color:"color",underscore:"underscore","utils/strings/stripTags":136}],55:[function(e,t,i){var n=e("app/model/BaseItem");t.exports=n.extend({_domPrefix:"k",defaults:{name:"",handle:"",tId:-1}})},{"app/model/BaseItem":45}],56:[function(c,h,e){(function(e){var t=c("color"),s=c("app/model/BaseItem"),i=c("app/model/item/SourceItem"),n=c("app/model/SelectableCollection"),r=c("app/control/Globals"),a=c("utils/strings/stripTags"),o={original:e.template(r.MEDIA_DIR+"/<%= src %>"),"constrain-width":e.template(r.APP_ROOT+"image/1/<%= width %>/0/uploads/<%= src %>"),"constrain-height":e.template(r.APP_ROOT+"image/1/0/<%= height %>/uploads/<%= src %>"),"debug-bandwidth":e.template(r.MEDIA_DIR.replace(/(https?\:\/\/[^\/]+)/,"$1/slow/<%= kbps %>")+"/<%= src %>")},l=n.extend({model:i});h.exports=s.extend({_domPrefix:"m",defaults:{name:"<p><em>Untitled</em></p>",sub:"",o:0,bId:-1,srcIdx:0,get srcset(){return[]},get sources(){return new l}},getters:["name","bundle","source","sources"],mutators:{handle:function(){return this.get("src")},text:function(){return this.hasOwnProperty("_text")||(this._text=e.unescape(a(this.get("name")))),this._text},attrs:{set:function(e,t,i,n){this._attrs=null,s.prototype.mutators.attrs.set.apply(this,arguments),this._updateSources()}},srcset:{set:function(e,t,i,n){n(e,t,i),this.get("sources").reset(t,i),this._updateSources()}},source:{transient:!0,get:function(){return this.get("sources").at(this.get("srcIdx"))}}},initialize:function(){this._updateColors(),this.listenTo(this,"change:attrs change:bundle",function(){this._attrs=null})},attrs:function(){return this._attrs||(this._attrs=e.defaults({},this.get("bundle").attrs(),this.get("attrs")))},_updateColors:function(){this.colors={fgColor:new t(this.attr("color")),bgColor:new t(this.attr("background-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},_updateSources:function(){var t={kbps:this.attr("@debug-bandwidth")},i=o[t.kbps?"debug-bandwidth":"original"];this.get("sources").forEach(function(e){t.src=e.get("src"),e.set("original",i(t))})}})}).call(this,c("underscore"))},{"app/control/Globals":40,"app/model/BaseItem":45,"app/model/SelectableCollection":47,"app/model/item/SourceItem":57,color:"color",underscore:"underscore","utils/strings/stripTags":136}],57:[function(t,i,e){(function(s){var e=t("app/model/BaseItem"),r="?"+Date.now();i.exports=e.extend({defaults:{src:null,mime:null,w:null,h:null},getters:["src","original"],mutators:{src:{set:function(e,t,i,n){s&&(t+=r),n(e,t,i)}}}})}).call(this,!1)},{"app/model/BaseItem":45}],58:[function(e,t,i){var n=e("app/model/BaseItem");t.exports=n.extend({_domPrefix:"t",defaults:{name:"",handle:""}})},{"app/model/BaseItem":45}],59:[function(g,m,e){(function(e,r){var i,n,l=g("backbone"),t=g("utils/strings/stripTags"),a=g("app/control/Globals"),c=g("app/control/Controller"),s=g("app/model/AppState"),o=g("app/model/collection/BundleCollection"),h=g("app/model/collection/ArticleCollection"),u=g("app/view/base/View"),d=g("app/view/NavigationView"),p=g("app/view/ContentView"),f=g("app/view/base/TouchManager");g("hammerjs");m.exports=u.extend({cidPrefix:"app",el:"html",className:"app",model:s,events:{visibilitychange:function(e){this.cid,e.type},fullscreenchange:function(e){this.cid,e.type,document.fullscreenElement,document.fullscreen},dragstart:function(e){"IMG"!=e.target.nodeName&&"A"!=e.target.nodeName||e.defaultPrevented||e.preventDefault()}},properties:{container:{get:function(){return this._container||(this._container=document.getElementById("container"))}},navigation:{get:function(){return this._navigation||(this._navigation=document.getElementById("navigation"))}},content:{get:function(){return this._content||(this._content=document.getElementById("content"))}}},initialize:function(e){var t,i,n;this.breakpointEl=this.el,n=this.content,t=i=f.init(n),this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize,!1),this.listenTo(c,"route",this._onRoute),this.listenTo(this.model,"change",this._onModelChange),this.navigationView=new d({el:this.navigation,model:this.model,vpan:t,hpan:i}),this.contentView=new p({el:this.content,model:this.model,vpan:t,hpan:i});(function(e,t){e.hasOwnProperty("type")&&(e=e.type+" : "+(e.defaultPrevented?"prevented":"not prevented")),this.el.scrollTop,this.el.scrollHeight,this.el.clientHeight,this.cid,this.navigationView.el.style.height,this.navigationView.el.scrollHeight}).bind(this);var s={capture:!1,passive:!1},r=function(e){this.el.addEventListener("touchmove",a,s),this.el.addEventListener("touchend",o,s),this.el.addEventListener("touchcancel",o,s)}.bind(this),a=function(e){!e.defaultPrevented&&this.el.scrollHeight-1<=this.el.clientHeight&&e.preventDefault()}.bind(this),o=function(e){this.el.removeEventListener("touchmove",a,s),this.el.removeEventListener("touchend",o,s),this.el.removeEventListener("touchcancel",o,s)}.bind(this);this.el.addEventListener("touchstart",r);this.listenTo(this.navigationView,"view:collapsed:measured",function(e){this.requestAnimationFrame(function(){this.el.scrollHeight-1<=this.el.clientHeight?this.el.style.overflowY="hidden":this.el.style.overflowY="",this.el.scrollTop=1})}),window.ga&&window.GA_ID&&c.once("route",function(){window.ga("create",window.GA_ID,"auto"),(/(?:(localhost|\.local))$/.test(location.hostname)||"UA-9123564-8"==window.GA_ID)&&window.ga("set","sendHitTask",null)}).on("route",function(e){var t=l.history.getFragment();t.replace(/^(?!\/)/,"/"),window.ga("set","page",t),window.ga("send","pageview")}),this.listenToOnce(c,"route",this._appStart),l.history.start({pushState:!1,hashChange:!0})},_appStart:function(e,t){this.cid,t.join(),this.skipTransitions=!0,this.el.classList.add("skip-transitions"),this.requestRender(u.MODEL_INVALID|u.SIZE_INVALID).requestChildrenRender(u.MODEL_INVALID|u.SIZE_INVALID).listenToOnce(this,"view:render:after",function(e,t){this.requestAnimationFrame(function(){this.cid,this.skipTransitions=!1,this.el.classList.remove("skip-transitions"),this.el.classList.remove("app-initial")})})},_onRoute:function(e,t){this.cid,this.model.get("routeName");var i={routeName:e,bundle:null,media:null,article:null};switch(e){case"media-item":i.bundle=o.selected,i.media=i.bundle.media.selected,i.collapsed=!0;break;case"bundle-item":i.bundle=o.selected,i.collapsed=!0;break;case"article-item":i.article=h.selected,i.collapsed=!0;break;case"bundle-list":case"notfound":case"root":default:i.collapsed=!1}this.model.set(i)},_onModelChange:function(){e&&(this.cid,Object.keys(this.model.changedAttributes()).forEach(function(e){this.cid,this.model.previous(e),this.model.get(e)},this),["Article","Bundle","Media"].forEach(function(e){var t=e.toLowerCase();console[this.hasChanged("with"+e)==this.hasAnyChanged(t)?"log":"warn"].call(console,"%s::_onModelChange with%s: %o with%sChanged: %o",this.cid,e,this.has(t),e,this.hasAnyChanged(t))},this.model),this.once("view:render:after",function(e,t){e.cid})),this.requestRender(u.MODEL_INVALID)},_onResize:function(e){this.cid,this.skipTransitions=!0,this.el.classList.add("skip-transitions"),this.requestRender(u.SIZE_INVALID).once("view:render:after",function(e,t){this.requestAnimationFrame(function(){e.cid,e.skipTransitions=!1,e.el.classList.remove("skip-transitions"),this.el.scrollTop=1})}),null===document.fullscreenElement&&this.renderNow()},renderFrame:function(e,t){this.cid,u.flagsToString(t),t&u.MODEL_INVALID&&this.renderModelChange(t),t&u.SIZE_INVALID&&r.each(a.BREAKPOINTS,function(e,t){this.toggle(t,e.matches)},this.breakpointEl.classList),this.requestChildrenRender(t,!0)},renderModelChange:function(){var i=this.el.classList,n=null,e=[],s=!1;e.push(a.APP_NAME),this.model.get("bundle")?(e.push(t(this.model.get("bundle").get("name"))),this.model.get("media")&&e.push(t(this.model.get("media").get("name")))):this.model.get("article")&&e.push(t(this.model.get("article").get("name"))),document.title=r.unescape(e.join(" / ")),this.model.hasChanged("routeName")&&((n=this.model.previous("fromRouteName"))&&i.remove("from-route-"+n),i.add("from-route-"+this.model.get("fromRouteName")),(n=this.model.previous("routeName"))&&i.remove("route-"+n),i.add("route-"+this.model.get("routeName"))),["article","bundle","media"].forEach(function(e){var t=this.model.get(e);this.model.hasChanged(e)&&((n=this.model.previous(e))&&i.remove(n.get("domid")),t&&i.add(t.get("domid"))),i.toggle("with-"+e,!!t),i.toggle("without-"+e,!t),s|=t&&t.colors&&t.colors.hasDarkBg}.bind(this)),i.toggle("color-dark",s)}},{getInstance:function(){return window.app instanceof this||(window.app=new this({model:new s})),window.app}}),e&&(m.exports=(i=m.exports,n=g("app/debug/DebugToolbar"),i.extend({initialize:function(){var e,t=new n({id:"debug-toolbar",model:this.model});return document.body.appendChild(t.render().el),e=i.prototype.initialize.apply(this,arguments),this._logFlags["view.trace"]=!0,this.navigationView._logFlags["view.trace"]=!0,e}})))}).call(this,!1,g("underscore"))},{"app/control/Controller":39,"app/control/Globals":40,"app/debug/DebugToolbar":41,"app/model/AppState":44,"app/model/collection/ArticleCollection":48,"app/model/collection/BundleCollection":49,"app/view/ContentView":60,"app/view/NavigationView":61,"app/view/base/TouchManager":66,"app/view/base/View":67,backbone:"backbone",hammerjs:"hammerjs",underscore:"underscore","utils/strings/stripTags":136}],60:[function(e,x,t){(function(t){var a=e("app/control/Globals"),i=e("utils/TransformHelper"),s=e("app/control/Controller"),l=e("app/model/collection/BundleCollection"),c=e("app/model/collection/ArticleCollection"),h=e("app/view/base/View"),n=e("app/view/component/ArticleView"),r=e("app/view/component/CollectionStack"),o=e("app/view/component/SelectableListView"),u=e("app/view/render/DotNavigationRenderer"),d=e("app/view/component/Carousel"),p=e("app/view/render/CarouselRenderer"),f=e("app/view/render/ImageRenderer"),g=e("app/view/render/VideoRenderer"),m=e("app/view/render/SequenceRenderer"),v=e("./template/Carousel.EmptyRenderer.Bundle.hbs"),_=e("./template/CollectionStack.Media.hbs"),y=h.prefixedProperty("transform"),b=h.prefixedProperty("transition"),w=a.transitions;x.exports=h.extend({cidPrefix:"contentView",className:"container-expanded",events:{"transitionend .adding-child":"_onAddedTransitionEnd","transitionend .removing-child":"_onRemovedTransitionEnd"},initialize:function(e){t.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal","_onCollapsedEvent"),this.transforms=new i,this.vpan=e.vpan||new Error("no vpan"),this.hpan=e.hpan||new Error("no hpan"),this.listenTo(this.model,"change",this._onModelChange),this.skipTransitions=!0,this.itemViews=[]},renderFrame:function(e,t){var i=this.model.get("collapsed"),n=t&h.MODEL_INVALID&&this.model.hasChanged("collapsed"),s=t&h.MODEL_INVALID&&(this.model.hasChanged("bundle")||this.model.hasChanged("article")),r=!!(t&h.SIZE_INVALID),a=!!(t&(h.MODEL_INVALID|h.SIZE_INVALID|h.LAYOUT_INVALID));if(a=a||this._transformsChanged||this.skipTransitions,s&&(this.removeChildren(),l.selected?this.createChildren(l.selected):c.selected&&this.createChildren(c.selected)),n&&(this.el.classList.toggle("container-collapsed",i),this.el.classList.toggle("container-expanded",!i)),r&&this.transforms.clearAllCaptures(),a){var o;if(this.el.classList.remove("container-changing"),this.skipTransitions)this.transforms.stopAllTransitions(),this.el.classList.remove("container-changed"),s||n&&this._setChildrenEnabled(i);else if(!s)if(n)this.el.classList.add("container-changed"),i?(o=function(){this._setChildrenEnabled(!0),this.el.classList.remove("container-changed")},this.transforms.runAllTransitions(w.LAST)):(o=function(){this.el.classList.remove("container-changed")},this._setChildrenEnabled(!1),this.transforms.runAllTransitions(w.FIRST)),o=o.bind(this),this.transforms.whenAllTransitionsEnd().then(o,o);else this.transforms.items.forEach(function(e){e.hasOffset&&e.runTransition(w.NOW)});s||this.transforms.clearAllOffsets(),this.transforms.validate()}r&&this.itemViews.forEach(function(e){e.skipTransitions=this.skipTransitions,e.requestRender(h.SIZE_INVALID).renderNow()},this),this.skipTransitions=this._transformsChanged=!1},_setChildrenEnabled:function(t){this.itemViews.forEach(function(e){e.setEnabled(t)})},_onCollapsedEvent:function(e){this.cid,e.type,e.target,e.defaultPrevented||!this.model.has("bundle")||this.model.get("collapsed")||this.enabled||(e.preventDefault(),this.setImmediate(function(){this.model.set("collapsed",!0)}))},_onModelChange:function(){this.model.hasAnyChanged("bundle")&&(this.model.has("bundle")?this.vpan.on("vpanstart",this._onVPanStart):this.vpan.off("vpanstart",this._onVPanStart)),this.requestRender(h.MODEL_INVALID)},_collapsedOffsetY:a.COLLAPSE_OFFSET,_onVPanStart:function(e){this.vpan.on("vpanmove",this._onVPanMove),this.vpan.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopAllTransitions(),this.transforms.clearAllCaptures(),this.el.classList.add("container-changing"),this._onVPanMove(e)},_onVPanMove:function(e){var t=this.model.get("collapsed"),i=e.deltaY,n=this._collapsedOffsetY,s=t?0<i:i<0,r=t?a.VPAN_DRAG:1-a.VPAN_DRAG;i=Math.abs(i),i*=r,n*=r,s?n<i&&(i=(i-n)*a.VPAN_OUT_DRAG+n):i=-i*a.VPAN_OUT_DRAG,i*=t?1:-1,this.transforms.offsetAll(0,i),this.transforms.validate()},_onVPanFinal:function(e){this.vpan.off("vpanmove",this._onVPanMove),this.vpan.off("vpanend vpancancel",this._onVPanFinal),this._onVPanMove(e),this.setImmediate(function(){this._transformsChanged=!0,this.requestRender()})},createChildren:function(e){var t;e.__proto__.constructor===l.model?(t=this.createMediaCaptionStack(e),this.itemViews.push(t),this.transforms.add(t.el),t=this.createMediaCarousel(e),this.itemViews.push(t),this.transforms.add(t.el),t=this.createMediaDotNavigation(e),this.itemViews.push(t)):e.__proto__.constructor===c.model&&(t=this.createArticleView(e),this.itemViews.push(t)),this.itemViews.forEach(function(e){this.skipTransitions||(e.el.classList.add("adding-child"),e.el.style.opacity=0),this.el.appendChild(e.el),e.render()},this),this.skipTransitions||this.requestAnimationFrame(function(){this.cid,this.itemViews.forEach(function(e){this.skipTransitions||(e.el.style[b]="opacity "+w.LAST.cssText),e.el.style.removeProperty("opacity")},this)})},removeChildren:function(){this.itemViews.forEach(function(e,t,i){if(this.transforms.remove(e.el),this.skipTransitions)e.remove();else{var n=window.getComputedStyle(e.el);"0"==n.opacity||"hidden"==n.visibility?(this.cid,e.cid,e.remove()):(e.el.classList.add("removing-child"),n[y]&&(e.el.style[y]=n[y]),e.el.style[b]="opacity "+w.FIRST.cssText,e.el.style.opacity=0)}i[t]=null},this),this.itemViews.length=0},_onAddedTransitionEnd:function(e){if(e.target.cid&&this.childViews.hasOwnProperty(e.target.cid)){this.cid,e.target.cid,e.propertyName,e.type;var t=this.childViews[e.target.cid];t.el.classList.remove("adding-child"),t.el.style.removeProperty(b)}},_onRemovedTransitionEnd:function(e){if(e.target.cid&&this.childViews.hasOwnProperty(e.target.cid)){this.cid,e.target.cid,e.propertyName,e.type;var t=this.childViews[e.target.cid];t.el.classList.remove("removing-child"),t.remove()}},createMediaCarousel:function(e){var n=p.extend({className:"carousel-item empty-item",model:e,template:v}),t=new d({className:"media-carousel "+e.get("domid"),collection:e.get("media"),rendererFunction:function(e,t,i){if(-1===t)return n;switch(e.attr("@renderer")){case"video":return g;case"sequence":return m;case"image":default:return f}},requireSelection:!1,direction:d.DIRECTION_HORIZONTAL,touch:this.hpan});return s.listenTo(t,{"view:select:one":s.selectMedia,"view:select:none":s.deselectMedia}),t.listenTo(e,"deselected",function(){this.stopListening(this.collection),s.stopListening(this)}),t},createMediaCaptionStack:function(e){var t=new r({className:"media-caption-stack",collection:e.get("media"),template:_});return t.listenTo(e,"deselected",function(){this.stopListening(this.collection)}),t},createMediaDotNavigation:function(e){var t=new o({className:"media-dotnav dots-fontface color-fg05",collection:e.get("media"),renderer:u});return s.listenTo(t,{"view:select:one":s.selectMedia,"view:select:none":s.deselectMedia}),t.listenTo(e,"deselected",function(){this.stopListening(this.collection),s.stopListening(this)}),t},createArticleView:function(e){return new n({model:e})}})}).call(this,e("underscore"))},{"./template/Carousel.EmptyRenderer.Bundle.hbs":105,"./template/CollectionStack.Media.hbs":106,"app/control/Controller":39,"app/control/Globals":40,"app/model/collection/ArticleCollection":48,"app/model/collection/BundleCollection":49,"app/view/base/View":67,"app/view/component/ArticleView":71,"app/view/component/Carousel":73,"app/view/component/CollectionStack":75,"app/view/component/SelectableListView":80,"app/view/render/CarouselRenderer":90,"app/view/render/DotNavigationRenderer":95,"app/view/render/ImageRenderer":97,"app/view/render/SequenceRenderer":102,"app/view/render/VideoRenderer":104,underscore:"underscore","utils/TransformHelper":111}],61:[function(d,p,e){(function(t){var i=d("hammerjs"),f=d("app/control/Globals"),n=d("utils/TransformHelper"),s=d("app/control/Controller"),r=d("app/model/collection/TypeCollection"),a=d("app/model/collection/KeywordCollection"),o=d("app/model/collection/BundleCollection"),e=d("app/model/collection/ArticleCollection"),g=d("app/view/base/View"),l=d("app/view/component/FilterableListView"),c=d("app/view/component/GroupingListView"),h=d("app/view/component/GraphView"),u=d("app/view/component/ArticleButton"),m=f.transitions,v=t.clone(m.NOW);v.easing="ease",p.exports=g.extend({cidPrefix:"navigationView",className:"navigation container-expanded",initialize:function(e){t.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal"),t.bindAll(this,"_onHPanStart","_onHPanMove","_onHPanFinal"),t.bindAll(this,"_onNavigationClick"),this.itemViews=[],this.transforms=new n,this.vpan=e.vpan||new Error("no vpan"),this.hpan=e.hpan||new Error("no hpan"),this.listenTo(this.model,"change",this._onModelChange),this.listenTo(a,"select:one select:none",this._onKeywordSelect),this.vpanGroup=this.el.querySelector("#vpan-group"),this.keywordList=this.createKeywordList(),this.bundleList=this.createBundleList(),this.itemViews.push(this.keywordList),this.itemViews.push(this.bundleList),this.graph=this.createGraphView(this.bundleList,this.keywordList,this.vpanGroup),this.sitename=this.createSitenameButton(),this.about=this.createAboutButton(),this.hGroupings=this.keywordList.el.querySelectorAll(".list-group .label"),this.transforms.add(this.vpanGroup,this.bundleList.wrapper,this.keywordList.wrapper,this.bundleList.el,this.keywordList.el,this.hGroupings,this.sitename.wrapper,this.about.wrapper,this.sitename.el,this.about.el,this.graph.el)},renderFrame:function(e,t){t&g.MODEL_INVALID&&(this.model.hasChanged("collapsed")&&(this.el.classList.toggle("container-collapsed",this.model.get("collapsed")),this.el.classList.toggle("container-expanded",!this.model.get("collapsed"))),(this.model.hasChanged("collapsed")||this.model.hasChanged("withBundle"))&&this.el.classList.add("container-changing"),this.model.hasChanged("routeName")&&(this.bundleList.requestRender(g.SIZE_INVALID|g.LAYOUT_INVALID),this.keywordList.requestRender(g.SIZE_INVALID|g.LAYOUT_INVALID))),(this.skipTransitions||t&g.ALL_INVALID)&&(this.skipTransitions?(this.transforms.stopAllTransitions(),this.transforms.validate(),this.transforms.clearAllOffsets()):this.renderTransitions(t),this.transforms.validate());var i,n=function(e){var t=Math.max(this.bundleList.metrics.height,this.keywordList.metrics.height);return this.model.get("collapsed")?(this.el.style.height="",this.graph.el.style.height=""):(this.el.style.height=t+"px",this.graph.el.style.height=t+"px"),this.graph.requestRender(g.SIZE_INVALID|g.LAYOUT_INVALID),this.cid,this.model.get("collapsed"),this.trigger("view:collapsed:measured",this),e}.bind(this),s=function(e){return this.graph.enabled=!this.model.get("collapsed"),this.graph.valueTo("a2b",0,0),this.model.get("collapsed")||this.graph.valueTo("a2b",1,f.TRANSITION_DURATION),e}.bind(this),r=function(e){return this.cid,g.flagsToString(t),this.el.classList.remove("container-changing"),this.trigger("view:collapsed:end",this),e}.bind(this);i=Promise.all([this.bundleList.whenCollapseChangeEnds(),this.keywordList.whenCollapseChangeEnds()]).then(n),t&g.MODEL_INVALID&&this.model.hasChanged("collapsed")&&(i=i.then(s)),i.then(this.transforms.whenAllTransitionsEnd()).then(r).catch(function(e){return console.error("%s::renderFrame promise rejected",this.cid,e),e}.bind(this)),this.itemViews.forEach(function(e){this.skipTransitions&&(e.skipTransitions=!0),t&g.SIZE_INVALID&&e.requestRender(g.SIZE_INVALID),e.renderNow()},this),this.requestAnimationFrame(function(){this.skipTransitions=!1})},renderTransitions:function(e){var t,i=e&g.MODEL_INVALID,n=this.model.get("fromRouteName"),s=this.model.get("routeName"),r=i&&this.model.hasChanged("routeName"),a=this.model.has("bundle"),o=i&&this.model.hasAnyChanged("bundle"),l=i&&this.model.hasChanged("bundle"),c=this.model.has("media"),h=i&&this.model.hasAnyChanged("media"),u=i&&this.model.hasAnyChanged("article"),d=this.model.get("collapsed"),p=i&&this.model.hasChanged("collapsed");(t=this.transforms.get(this.vpanGroup))&&t.hasOffset&&(t.runTransition(p?m.BETWEEN:m.NOW),t.clearOffset()),f.BREAKPOINTS["medium-wide"].matches?(t=this.transforms.get(this.keywordList.wrapper),p&&!u?o?h&&t.runTransition(a?m.LAST:m.FIRST):c&&t.runTransition(d?m.LAST:m.FIRST):!o&&h&&t.runTransition(l?m.BETWEEN:v),t.hasOffset&&t.clearOffset(),p^u&&(this.transforms.runTransition(d?m.LAST:m.FIRST,this.sitename.el,this.about.el,this.bundleList.wrapper),this.transforms.runTransition(d?m.LAST:m.FIRST,this.hGroupings)),!r||"root"!=n&&"root"!=s||this.transforms.runTransition(m.BETWEEN,this.sitename.wrapper,this.about.wrapper)):f.BREAKPOINTS["small-stretch"].matches?p^u&&this.transforms.runTransition(d?m.FIRST:m.LAST,this.sitename.el,this.about.el):o&&this.transforms.runTransition(m.BETWEEN,this.sitename.el,this.about.el)},_onModelChange:function(){this.requestRender(g.MODEL_INVALID),this.model.hasChanged("collapsed")&&(this.model.get("collapsed")&&a.deselect(),this.keywordList.collapsed=this.model.get("collapsed"),this.bundleList.collapsed=this.model.get("collapsed")),this.model.hasChanged("bundle")&&(this.bundleList.selectedItem=this.model.get("bundle"),this.keywordList.refreshFilter()),this.model.hasChanged("withBundle")&&(this.model.get("withBundle")?(this.el.addEventListener(g.CLICK_EVENT,this._onNavigationClick),this.vpan.on("vpanstart",this._onVPanStart),this.hpan.on("hpanstart",this._onHPanStart)):(this.el.removeEventListener(g.CLICK_EVENT,this._onNavigationClick),this.vpan.off("vpanstart",this._onVPanStart),this.hpan.off("hpanstart",this._onHPanStart),a.deselect()))},_onKeywordSelect:function(e){!this.model.get("collapsed")&&this.graph&&this.listenToOnce(this.bundleList,"view:render:after",function(e,t){this.graph.valueTo("b2a",0,0),this.graph.valueTo("b2a",1,f.TRANSITION_DURATION)}),this.bundleList.refreshFilter()},_onNavigationClick:function(e){this.cid,e.type,e.defaultPrevented,e.defaultPrevented||(e.preventDefault(),this.model.has("bundle")&&this.model.set("collapsed",!this.model.get("collapsed")))},_setCollapsed:function(e){e!==this.model.get("collapsed")&&this.setImmediate(function(){this.model.set("collapsed",e)})},_onHPanStart:function(e){this.transforms.get(this.keywordList.wrapper).stopTransition().clearOffset().validate(),f.BREAKPOINTS["medium-wide"].matches&&this.model.get("bundle").get("media").selectedIndex<=0&&this.model.get("collapsed")&&(this.transforms.get(this.keywordList.wrapper).clearCapture(),this._onHPanMove(e),this.hpan.on("hpanmove",this._onHPanMove),this.hpan.on("hpanend hpancancel",this._onHPanFinal))},_onHPanMove:function(e){var t=e.deltaX;this.model.has("media")?t*=e.offsetDirection&i.DIRECTION_LEFT?0:720/920:t*=e.offsetDirection&i.DIRECTION_LEFT?720/920:f.HPAN_OUT_DRAG,this.transforms.offset(t,null,this.keywordList.wrapper),this.transforms.validate()},_onHPanFinal:function(e){this.hpan.off("hpanmove",this._onHPanMove),this.hpan.off("hpanend hpancancel",this._onHPanFinal);var t=this.transforms.get(this.keywordList.wrapper);this._renderFlags&g.MODEL_INVALID||!t.hasOffset||(0!=t.offsetX&&t.runTransition(m.NOW),t.clearOffset().validate())},_collapsedOffsetY:f.COLLAPSE_OFFSET,_onVPanStart:function(e){this.vpan.on("vpanmove",this._onVPanMove),this.vpan.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopTransition(this.vpanGroup),this.transforms.clearCapture(this.vpanGroup)},_onVPanMove:function(e){var t=this._computeVPanDelta(e.deltaY);this.transforms.offset(0,t,this.vpanGroup),this.transforms.validate()},_onVPanFinal:function(e){this.vpan.off("vpanmove",this._onVPanMove),this.vpan.off("vpanend vpancancel",this._onVPanFinal),this.setImmediate(function(){this.willCollapsedChange(e)&&this.model.set("collapsed",!this.model.get("collapsed")),this.requestRender(g.LAYOUT_INVALID)})},willCollapsedChange:function(e){return"vpanend"==e.type&&(this.model.get("collapsed")?e.deltaY>f.COLLAPSE_THRESHOLD:e.deltaY<-f.COLLAPSE_THRESHOLD)},_computeVPanDelta:function(e){var t=this.model.get("collapsed"),i=this._collapsedOffsetY,n=t?0<e:e<0,s=t?1-f.VPAN_DRAG:f.VPAN_DRAG;return e=Math.abs(e),e*=s,i*=s,n?i<e&&(e=(e-i)*f.VPAN_OUT_DRAG+i):e=-e*f.VPAN_OUT_DRAG,e*=t?.5:-1},createSitenameButton:function(){var e=new g({el:"#site-name",events:{"click a":function(e){e.defaultPrevented||e.preventDefault(),this.trigger("view:click")}}});return e.wrapper=e.el.parentElement,this.listenTo(e,"view:click",this._onSitenameClick),e},_onSitenameClick:function(){switch(this.model.get("routeName")){case"media-item":case"bundle-item":s.deselectBundle();break;case"article-item":s.deselectArticle()}},createArticleButton:function(e){var t=new u({el:".article-button[data-handle='about']",model:e}).render();return t.wrapper=t.el.parentElement,this.listenTo(t,"view:click",this._onArticleClick),t},_onArticleClick:function(e){switch(this.model.get("routeName")){case"article-item":s.deselectArticle();break;case"root":default:s.selectArticle(e)}},createAboutButton:function(){return this.createArticleButton(e.findWhere({handle:"about"}))},createBundleList:function(e){var t=new l({el:"#bundle-list",collection:o,collapsed:!1,filterFn:function(e,t,i){return!!a.selected&&-1!==e.get("kIds").indexOf(a.selected.id)}});return t.wrapper=t.el.parentElement,this.listenTo(t,"view:select:one view:select:none",function(e){this.setImmediate(function(){s.selectBundle(e)})}),this.listenTo(t,"view:select:same",this._onBundleListSame),t},_onBundleListSame:function(e){this.model.set("collapsed",!this.model.get("collapsed"))},createKeywordList:function(e){var t=new c({el:"#keyword-list",collection:a,collapsed:!1,filterFn:function(e,t,i){return!!o.selected&&-1!==o.selected.get("kIds").indexOf(e.id)},groupingFn:function(e,t,i){return r.get(e.get("tId"))}});return t.wrapper=t.el.parentElement,t.listenTo(a,"select:one select:none",function(e){t.selectedItem=e}),this.listenTo(t,"view:select:one view:select:none",this._onKeywordListChange),t},_onKeywordListChange:function(e){this.model.get("collapsed")||a.select(e)},createGraphView:function(e,t,i){var n=new h({id:"nav-graph",listA:e,listB:t,model:this.model,useOpaque:!1});return i||(i=this.el),i.insertBefore(n.el,i.firstElementChild),n}})}).call(this,d("underscore"))},{"app/control/Controller":39,"app/control/Globals":40,"app/model/collection/ArticleCollection":48,"app/model/collection/BundleCollection":49,"app/model/collection/KeywordCollection":50,"app/model/collection/TypeCollection":51,"app/view/base/View":67,"app/view/component/ArticleButton":70,"app/view/component/FilterableListView":76,"app/view/component/GraphView":77,"app/view/component/GroupingListView":78,hammerjs:"hammerjs",underscore:"underscore","utils/TransformHelper":111}],62:[function(e,t,i){var s=function(e){this._offset=0|e,this._items=[],this._priorities=[],this._numItems=0};s.prototype=Object.create({enqueue:function(e,t){var i=this._items.length;return this._items[i]=e,this._priorities[i]={priority:0|t,index:i},this._numItems++,this._offset+i},contains:function(e){return 0<=(e-=this.offset)&&e<this._items.length},skip:function(e){var t,i;if(!((t=e-this._offset)<0||t>=this._items.length))return null!==(i=this._items[t])&&(this._items[t]=null,this._numItems--),i},indexes:function(){var e=this._priorities.concat();return e.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),e.forEach(function(e,t,i){i[t]=e.index},this),e},items:function(){var e=this._priorities.concat();return e.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),e.forEach(function(e,t,i){i[t]=this._items[e.index]},this),e},_empty:function(e){this._offset=e,this._items.length=0,this._priorities.length=0,this._numItems=0}},{offset:{get:function(){return this._offset}},length:{get:function(){return this._items.length}},numItems:{get:function(){return this._numItems}}});var n=function(e,t){this._nextQueue=new s(0),this._currQueue=null,this._running=!1,this._runId=-1,this._requestFn=e,this._cancelFn=t,this._runQueue=this._runQueue.bind(this)};n.prototype=Object.create({_runQueue:function(){if(this._running)throw new Error("wtf!!!");var e,t;this._currQueue=this._nextQueue,this._nextQueue=new s(this._currQueue.offset+this._currQueue.length),this._runId=-1,this._running=!0;var i=this._currQueue.indexes(),n=this._currQueue._items;for(e=0;e<i.length;e++)null!==(t=n[i[e]])&&t.apply(null,arguments);this._running=!1,this._currQueue=null,0<this._nextQueue.numItems&&(this._runId=this._requestFn.call(null,this._runQueue))},request:function(e,t){return this._running||-1!==this._runId||(this._runId=this._requestFn.call(null,this._runQueue)),this._nextQueue.enqueue(e,t)},cancel:function(e){var t;return this._running?t=this._currQueue.skip(e)||this._nextQueue.skip(e):(t=this._nextQueue.skip(e),-1!==this._runId&&0===this._nextQueue.numItems&&(this._cancelFn.call(null,this._runId),this._runId=-1)),t}},{running:{get:function(){return this._running}}}),t.exports=n},{}],63:[function(o,l,e){(function(e,n){var s=o("app/view/base/View"),r=o("app/control/Globals"),a=o("app/view/base/Interpolator"),i=o("utils/css/getBoxEdgeStyles"),t=s.extend({cidPrefix:"canvasView",tagName:"canvas",className:"canvas-view",properties:{paused:{get:function(){return this._paused},set:function(e){e=!!e,this._interpolator.paused!==e&&((this._interpolator.paused=e)||this.requestRender())}},context:{get:function(){return this._ctx}},interpolator:{get:function(){return this._interpolator}},canvasRatio:{get:function(){return this._canvasRatio}}},defaults:{values:{value:0},maxValues:{value:1},paused:!1,useOpaque:!1},initialize:function(e){(e=n.defaults(e||{},this.defaults)).values=n.defaults(e.values||{},this.defaults.values),e.maxValues=n.defaults(e.maxValues||{},this.defaults.maxValues),this._interpolator=new a(e.values,e.maxValues),this._interpolator.paused=e.paused,this._useOpaque=e.useOpaque,this._options=n.pick(e,"color","backgroundColor");this._ctx=this.el.getContext("2d",{});var t=1,i=this._ctx.webkitBackingStorePixelRatio||1;window.devicePixelRatio!==i&&(t=window.devicePixelRatio/i,t=Math.max(t,1)),this._canvasRatio=t,this.listenTo(this,"view:attached",function(){this.requestRender(s.SIZE_INVALID|s.LAYOUT_INVALID).renderNow()})},_updateCanvas:function(){var e=getComputedStyle(this.el);if(this._canvasWidth=this.el.scrollWidth,this._canvasHeight=this.el.scrollHeight,"border-box"===e.boxSizing){var t=i(e);this._canvasWidth-=t.paddingLeft+t.paddingRight+t.borderLeftWidth+t.borderRightWidth,this._canvasHeight-=t.paddingTop+t.paddingBottom+t.borderTopWidth+t.borderBottomWidth}this._canvasWidth*=this._canvasRatio,this._canvasHeight*=this._canvasRatio,this.measureCanvas(this._canvasWidth,this._canvasHeight,e),this.el.width=this._canvasWidth,this.el.height=this._canvasHeight,this._color=this._options.color||e.color||r.DEFAULT_COLORS.color,this._backgroundColor=this._options.backgroundColor||e.backgroundColor||r.DEFAULT_COLORS["background-color"],this._useOpaque&&this._opaqueProp&&(this.el[this._opaqueProp]=!0),this._fontSize=parseFloat(e.fontSize)*this._canvasRatio,this._fontFamily=e.fontFamily,this._ctx.restore(),this._ctx.font=[e.fontWeight,e.fontStyle,this._fontSize+"px/1",e.fontFamily].join(" "),this._ctx.textAlign="left",this._ctx.lineCap="butt",this._ctx.lineJoin="miter",this._ctx.strokeStyle=this._color,this._ctx.fillStyle=this._color,this.updateCanvas(this._ctx,e),this._ctx.save()},measureCanvas:function(e,t,i){},updateCanvas:function(e,t){},_getFontMetrics:function(e){var t,i,n,s=e.length;for(t in r.FONT_METRICS)-1!==(i=e.indexOf(t))&&i<s&&(s=i,n=r.FONT_METRICS[t]);return n||{unitsPerEm:1024,ascent:939,descent:-256}},_clearCanvas:function(){4==arguments.length?this._clearCanvasRect.apply(this,arguments):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._clearCanvasRect(0,0,this.el.width,this.el.height),this._ctx.restore())},_clearCanvasRect:function(e,t,i,n){this._ctx.clearRect(e,t,i,n),this._useOpaque&&(this._ctx.save(),this._ctx.fillStyle=this._backgroundColor,this._ctx.fillRect(e,t,i,n),this._ctx.restore())},_setStyle:function(e){t.setStyle(this._ctx,e)},render:function(){return this.attached?this.renderNow():this},renderFrame:function(e,t){if(!this.attached)return t;t&s.SIZE_INVALID&&this._updateCanvas(),this._interpolator.valuesChanged&&(t|=s.LAYOUT_INVALID,this._interpolator.interpolate(e)),t&(s.LAYOUT_INVALID|s.SIZE_INVALID)&&(this.redraw(this._ctx,this._interpolator,t),this._interpolator.valuesChanged&&this.requestRender())},getTargetValue:function(e){return this._interpolator.getTargetValue(e)},getRenderedValue:function(e){return this._interpolator.getRenderedValue(e)},valueTo:function(e,t,i){this._interpolator.valueTo(e,t,i),this.requestRender(s.MODEL_INVALID|s.LAYOUT_INVALID)},redraw:function(e,t,i){}},{setStyle:function(e,t){if("object"==typeof t)for(var i in t)switch(typeof e[i]){case"undefined":break;case"function":Array.isArray(t[i])?e[i].apply(e,t[i]):e[i].call(e,t[i]);break;default:e[i]=t[i]}}});e&&(t.prototype._logFlags=""),l.exports=t}).call(this,!1,o("underscore"))},{"app/control/Globals":40,"app/view/base/Interpolator":64,"app/view/base/View":67,underscore:"underscore","utils/css/getBoxEdgeStyles":123}],64:[function(t,i,e){(function(a){var s=t("utils/ease/fn/linear"),e=function(e,t,i){for(var n in this._tstamp=0,this._renderableKeys=[],this._renderedKeys=[],this._paused=!1,this._pausedChanging=!1,this._maxValues=a.isObject(t)?a.extend({},t):{},this._easeFn=a.isObject(i)?a.extend({},i):{},this._valueData={},e)a.isNumber(this._maxValues[n])||(this._maxValues[n]=null),a.isFunction(this._easeFn[n])||(this._easeFn[n]=s),this._valueData[n]=this._initValue(e[n],0,this._maxValues[n]),this._renderableKeys.push(n)};e.prototype=Object.create({isAtTarget:function(e){return-1===this._renderableKeys.indexOf(e)},getCurrentValue:function(e){return this._valueData[e]._renderedValue||this._valueData[e]._value},getTargetValue:function(e){return this._valueData[e]._value},getStartValue:function(e){return this._valueData[e]._startValue},getRenderedValue:function(e){return this._valueData[e]._renderedValue},getOption:function(e,t){return"max"===t?this._maxValues[e]:"ease"===t?this._easeFn[e]:void 0},valueTo:function(n,e,s,t){var i,r=this._valueData[n];return a.isFunction(t)&&(this._easeFn[n]=t),(i=Array.isArray(r)?e.reduce(function(e,t,i){return r[i]?(r[i]=this._initNumber(t,s,this._maxValues[n]),!0):this._setValue(r[i],t,s)||e}.bind(this),i):this._setValue(r,e,s))&&(-1!==this._renderableKeys.indexOf(n)||this._renderableKeys.push(n)),this},updateValue:function(e){var t=this._renderableKeys.indexOf(e);return-1===t||this._interpolateKey(e)||this._renderableKeys.splice(t,1),this},_initValue:function(e,t,i){return Array.isArray(e)?e.map(function(e){return this._initNumber(e,t,i)},this):this._initNumber(e,t,i)},_initNumber:function(e,t,i){var n={};return n._value=e,n._startValue=e,n._valueDelta=0,n._duration=t||0,n._startTime=NaN,n._elapsedTime=NaN,n._lastRenderedValue=null,n._renderedValue=n._startValue,n._maxVal=i,n},_setValue:function(e,t,i){return e._value!==t&&(e._startValue=e._value,e._valueDelta=t-e._value,e._value=t,e._duration=i||0,e._startTime=NaN,!(e._elapsedTime=NaN))},_tstamp:0,interpolate:function(i){if(this._tstamp=i,this.valuesChanged){this._pausedChanging&&(this._renderableKeys.forEach(function(e){var t=this._valueData[e];isNaN(t._elapsedTime)||(t._startTime=i-t._elapsedTime)},this),this._pausedChanging=!1);var e=this._renderableKeys;this._renderableKeys=e.filter(function(e){return this._interpolateValue(i,this._valueData[e],this._easeFn[e])},this),this._renderedKeys=e}return this},_interpolateKey:function(e){return this._interpolateValue(this._tstamp,this._valueData[e],this._easeFn[e])},_interpolateValue:function(s,e,r){return Array.isArray(e)?e.reduce(function(e,t,i,n){return this._interpolateNumber(s,t,r)||e}.bind(this),!1):this._interpolateNumber(s,e,r)},_interpolateNumber:function(e,t,i){isNaN(t._startTime)&&(t._startTime=e),t._lastRenderedValue=t._renderedValue;var n=Math.max(0,e-t._startTime);return n<t._duration?(t._maxVal&&t._valueDelta<0?t._renderedValue=i(n,t._startValue,t._valueDelta+t._maxVal,t._duration)-t._maxVal:t._renderedValue=i(n,t._startValue,t._valueDelta,t._duration),t._elapsedTime=n,!0):(t._renderedValue=t._value,t._elapsedTime=NaN,t._startTime=NaN,!1)}},{paused:{get:function(){return this._paused},set:function(e){e=!!e,this._paused!==e&&(this._paused=e,this._pausedChanging=!0)}},valuesChanged:{get:function(){return!this._paused&&0<this._renderableKeys.length}},renderableKeys:{get:function(){return this._renderableKeys}},renderedKeys:{get:function(){return this._renderedKeys}},keys:{get:function(){return Object.keys(this._valueData)}}}),i.exports=e}).call(this,t("underscore"))},{underscore:"underscore","utils/ease/fn/linear":126}],65:[function(r,a,e){(function(e){var t=r("utils/prefixedEvent"),i={transitionend:t("transitionend"),fullscreenchange:t("fullscreenchange",document),fullscreenerror:t("fullscreenerror",document),visibilitychange:t("visibilitychange",document,"hidden")},n=0;for(var s in i)s===i[s]?delete i[s]:(Object.defineProperty(i,s,{value:i[s],enumerable:!0}),Object.defineProperty(i,n,{value:s,enumerable:!1}),n++);Object.defineProperty(i,"length",{value:n}),e&&(i.length,Object.keys(i)),a.exports=i}).call(this,!1)},{"utils/prefixedEvent":129}],66:[function(e,t,i){var s=e("app/control/Globals"),r=e("hammerjs"),a=r.Pan;var o={},n=-1;o["vpanstart vpanend vpancancel"]=o["hpanstart hpanend hpancancel"]=function(e){!e.isFinal,e.isFinal&&(n=e.srcEvent.timeStamp)};o["vpanmove vpanend vpancancel"]=o["hpanmove hpanend hpancancel"]=function(e){e.srcEvent.preventDefault()};var l={},c={};l.click=function(e){n===e.timeStamp&&(n=-1,e.defaultPrevented||e.preventDefault())};var h=null,u={init:function(e){var t,i,n;return null===h?(t=e,i=new r.Manager(t),n=new a({event:"hpan",direction:r.DIRECTION_HORIZONTAL,threshold:s.PAN_THRESHOLD}),i.add(n),h=i,function(){var e,t=h.element;for(e in o)o.hasOwnProperty(e)&&h.on(e,o[e]);for(e in l)l.hasOwnProperty(e)&&t.addEventListener(e,l[e],!0);for(e in c)c.hasOwnProperty(e)&&t.addEventListener(e,c[e],!1)}()):h.element!==e&&console.warn("TouchManager already initialized with another element"),h},destroy:function(){null!==h?(!function(){var e,t=h.element;for(e in l)l.hasOwnProperty(e)&&t.removeEventListener(e,l[e],!0);for(e in c)l.hasOwnProperty(e)&&t.removeEventListener(e,c[e],!0)}(),h.destroy(),h=null):console.warn("no instance to destroy")},getInstance:function(){return null===h&&console.error("TouchManager has not been initialized"),h}};t.exports=u},{"app/control/Globals":40,hammerjs:"hammerjs"}],67:[function(m,v,e){(function(i,o){m("setimmediate");var s=m("backbone"),e=1,n={};function l(e){for(var t,i=e.querySelectorAll("*[data-cid]"),n=0,s=i.length;n<s;n++)(t=p.findByElement(i.item(n)))&&(t.attached||t._elementAttached())}function c(e){for(var t,i=e.querySelectorAll("*[data-cid]"),n=0,s=i.length;n<s;n++)(t=p.findByElement(i.item(n)))&&(t.attached?(t.cid,t._elementDetached()):console.warn("View::[detached (parent)] %s (ignored)",t.cid))}new MutationObserver(function(e){var t,i,n,s,r,a,o;for(t=0,i=e.length;t<i;t++)if("childList"==(n=e[t]).type){for(s=0,r=n.addedNodes.length;s<r;s++)a=n.addedNodes.item(s),(o=p.findByElement(a))&&(o.attached||o._elementAttached()),a instanceof HTMLElement&&l(a);for(s=0,r=n.removedNodes.length;s<r;s++)a=n.removedNodes.item(s),(o=p.findByElement(a))&&(o.attached?(o.cid,o.attached,o._elementDetached()):console.warn("View::[detached (childList)] %s (ignored)",o.cid,o.attached)),a instanceof HTMLElement&&c(a)}else"attributes"==n.type&&(o=p.findByElement(n.target))&&(o.attached||o._elementAttached())}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["data-cid"]});var t=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date),r=new(m("app/view/base/CallbackQueue"))(function(e){return window.requestAnimationFrame(e)},function(e){return window.cancelAnimationFrame(e)}),a=new(m("app/view/base/CallbackQueue"))(function(e){return window.setImmediate(function(){e.call(null,t())})},function(e){return window.clearImmediate(e)}),h=m("app/view/base/PrefixedEvents"),u=function(e){var t,i;for(t in e)i=t.match(/^\w+/i)[0],h.hasOwnProperty(i)&&(e[t.replace(i,h[i])]=e[t],delete e[t]);return e};function d(e,t,i){-1!=["log","info","warn","error"].indexOf(i)&&(i="log"),console[i].call(console,"%s::%s [parent:%s %s %s depth:%s]",e.cid,t,e.parentView&&e.parentView.cid,e.attached?"attached":"detached",e._viewPhase,e.viewDepth)}var p={NONE_INVALID:0,ALL_INVALID:-1>>>1,CHILDREN_INVALID:1,MODEL_INVALID:2,STYLES_INVALID:4,SIZE_INVALID:8,LAYOUT_INVALID:16,CLICK_EVENT:"click",ViewError:m("app/view/base/ViewError"),prefixedProperty:m("utils/prefixedProperty"),prefixedStyleName:m("utils/prefixedStyleName"),prefixedEvent:m("utils/prefixedEvent"),whenViewIsAttached:m("app/view/promise/whenViewIsAttached"),whenViewIsRendered:m("app/view/promise/whenViewIsRendered"),findByElement:function(e){return n[e.cid]?n[e.cid]:null},findByDescendant:function(e){do{if(n[e.cid])return n[e.cid]}while(e=e.parentElement||e.parentNode);return null},extend:function(e,t){return h.length&&e.events&&(o.isFunction(e.events)?e.events=o.wrap(e.events,function(e){return u(e.apply(this))}):o.isObject(e.events)&&(e.events=u(e.events))),e.properties&&this.prototype.properties&&o.defaults(e.properties,this.prototype.properties),s.View.extend.apply(this,arguments)},_flagsToStrings:["-"],flagsToString:function(e){var t=p._flagsToStrings[0|e];return t||(t=[],e&p.CHILDREN_INVALID&&t.push("children"),e&p.MODEL_INVALID&&t.push("model"),e&p.STYLES_INVALID&&t.push("styles"),e&p.SIZE_INVALID&&t.push("size"),e&p.LAYOUT_INVALID&&t.push("layout"),p._flagsToStrings[e]=t=t.join(" ")),t}};Object.defineProperty(p,"instances",{value:n,enumerable:!0});var f,g={cidPrefix:"view",_attached:!1,_parentView:null,_viewDepth:null,_viewPhase:"initializing",_renderQueueId:-1,_renderFlags:0,_enabled:null,properties:{cid:{get:function(){return this._cid||(this._cid=this.cidPrefix+e++)}},attached:{get:function(){return this._attached}},parentView:{get:function(){return this._parentView}},viewDepth:{get:function(){return this._getViewDepth()}},invalidated:{get:function(){return-1!==this._renderQueueId}},enabled:{get:function(){return this._enabled},set:function(e){this.setEnabled(e)}},renderFlags:{get:function(){return this._renderFlags}}},$:s.$,constructor:function(e){this.transform={},this.childViews={},this._applyRender=this._applyRender.bind(this),this.properties&&Object.defineProperties(this,this.properties),e&&e.className&&this.className&&(e.className+=" "+o.result(this,"className")),e&&e.parentView&&this._setParentView(e.parentView,!0),s.View.apply(this,arguments),this._viewPhase="initialized",null!==this.parentView&&this.trigger("view:parentChange",this.parentView,null),this.attached&&this.trigger("view:attached",this)},remove:function(){return"disposing"==this._viewPhase&&d(this,"remove","warn"),this._viewPhase="disposing",this._cancelRender(),this.$el.remove(),this._attached=!1,this.trigger("view:removed",this),this._setParentView(null),this.stopListening(),this.invalidated&&(console.warn("%s::remove invalidated after remove()",this.cid),this._cancelRender()),delete n[this.cid],this._viewPhase="disposed",this},_elementAttached:function(){this._attached=!0,this._viewDepth=null,this.setEnabled(!0),this._setParentView(p.findByDescendant(this.el.parentElement)),"initialized"==this._viewPhase?this.trigger("view:attached",this):"replacing"==this._viewPhase&&(this._viewPhase="initialized",this.trigger("view:replaced",this))},_elementDetached:function(){this.attached&&"disposing"!=this._viewPhase&&"disposed"!=this._viewPhase||d(this,"_elementDetached","error"),this._attached=!1,this._viewDepth=null,this.setEnabled(!1),"disposing"==this._viewPhase&&"disposed"!=this._viewPhase||this.remove()},_setParentView:function(e,t){void 0===e&&(console.warn("$s::_setParentView invalid value '%s'",this.cid,e),e=null);var i=this._parentView;this._parentView=e,this._viewDepth=null,e!==i&&(null!==i&&this.cid in i.childViews&&delete i.childViews[this.cid],null!==e&&(e.childViews[this.cid]=this),t||this.trigger("view:parentChange",this,e,i))},whenAttached:function(){return p.whenViewIsAttached(this)},_getViewDepth:function(){var e;return null===this._viewDepth&&(this._viewDepth=(e=this)?e.attached?null===e.parentView?0:e.parentView.viewDepth+1:NaN:null),this._viewDepth},setElement:function(e,t){if(this.el?(this.el!==e&&this.el.parentElement&&(this.attached&&(this._viewPhase="replacing"),this.el.parentElement.replaceChild(e,this.el)),s.View.prototype.setElement.apply(this,arguments),this.className&&o.result(this,"className").split(" ").forEach(function(e){this.el.classList.add(e)},this)):s.View.prototype.setElement.apply(this,arguments),void 0===this.el)throw new Error("Backbone view has no element");return(n[this.cid]=this).el.cid=this.cid,this.el.setAttribute("data-cid",this.cid),this},addListeners:function(e,t,i,n){o.isObject(n)||(n=!!n),"string"==typeof t&&(t=t.split(" "));for(var s=0;s<t.length;s++)e.addEventListener(t[s],i,n);return this},removeListeners:function(e,t,i,n){o.isObject(n)||(n=!!n),"string"==typeof t&&(t=t.split(" "));for(var s=0;s<t.length;s++)e.removeEventListener(t[s],i,n);return this},listenToElement:function(e,t,i){e=s.$(e),"string"==typeof t&&(t=t.split(" "));for(var n=0;n<t.length;n++)this.listenTo(e,t[n],i)},stopListeningToElement:function(e,t,i){e=s.$(e),"string"==typeof t&&(t=t.split(" "));for(var n=0;n<t.length;n++)this.stopListening(e,t[n],i)},listenToElementOnce:function(e,t,i,n){var s,r,a;return o.isObject(n)||(n=!!n),s=function(){a.off("view:remove",s),e.removeEventListener(t,r,n)},r=function(e){s(),i.call(a,e)},(a=this).on("view:remove",s),e.addEventListener(t,r,n),this},requestAnimationFrame:function(e,t,i){return r.request(e.bind(i||this),t)},cancelAnimationFrame:function(e){return r.cancel(e)},setImmediate:function(e,t,i){return a.request(e.bind(i||this),t)},clearImmediate:function(e){return a.cancel(e)},_traceRenderStatus:function(){return[-1!=this._renderQueueId?"async id:"+this._renderQueueId:"sync",p.flagsToString(this._renderFlags),this.attached?"attached":"detached",(this.skipTransitions?"skip":"run")+"-tx"].join(", ")},_applyRender:function(e){i&&(this._logFlags["view.render"]&&(this.cid,this._traceRenderStatus(),this._logFlags["view.trace"]&&this._logRenderCallers.join("\n")),this._logRenderCallers.length=0);var t=this._renderFlags;this.trigger("view:render:before",this,t),this._renderFlags=0,this._renderQueueId=-1,this._renderFlags|=this.renderFrame(e,t),this.trigger("view:render:after",this,t),0!=this._renderFlags&&console.warn("%s::_applyRender [returned] phase: %s flags: %s (%s)",this.cid,this._viewPhase,p.flagsToString(this._renderFlags),this._renderFlags)},_cancelRender:function(){var e,t;-1!=this._renderQueueId&&(e=this._renderQueueId,this._renderQueueId=-1,void 0===(t=r.cancel(e))?console.warn("%s::_cancelRender [id:%i] not found",this.cid,e):null===t&&console.warn("%s::_cancelRender [id:%i] already cancelled",this.cid,e))},_requestRender:function(){r.running&&this._cancelRender(),-1==this._renderQueueId&&(this._renderQueueId=r.request(this._applyRender,isNaN(this.viewDepth)?Number.MAX_VALUE:this.viewDepth)),i&&this._logFlags["view.trace"]&&(this.cid,r.running,this._traceRenderStatus())},invalidate:function(e){return void 0!==e&&(this._renderFlags|=e),this},requestRender:function(e){return this.invalidate(e),this._requestRender(),this},renderFrame:function(e,t){return p.NONE_INVALID},renderNow:function(e){return-1!=this._renderQueueId&&(this._cancelRender(),e=!0),e&&this._applyRender(t()),this},whenRendered:function(){return p.whenViewIsRendered(this)},requestChildrenRender:function(e,t,i){var n,s;for(n in this.childViews)(s=this.childViews[n]).skipTransitions=s.skipTransitions||this.skipTransitions,s.requestRender(e),t&&s.renderNow(i);return this},render:function(){return this.renderNow(!0)},setEnabled:function(e){this._enabled!=e&&(this._enabled=!!e,this._enabled?this.delegateEvents():this.undelegateEvents())}};i&&(g._logFlags=["view.render"].join(" "),g.constructor=(f=g.constructor,function(){return this._logRenderCallers=[],this._logFlags=this._logFlags.split(" ").reduce(function(e,t){return e[t]=!0,e},{}),f.apply(this,arguments)})),v.exports=s.View.extend(g,p)}).call(this,!1,m("underscore"))},{"app/view/base/CallbackQueue":62,"app/view/base/PrefixedEvents":65,"app/view/base/ViewError":68,"app/view/promise/whenViewIsAttached":88,"app/view/promise/whenViewIsRendered":89,backbone:"backbone",setimmediate:"setimmediate",underscore:"underscore","utils/prefixedEvent":129,"utils/prefixedProperty":130,"utils/prefixedStyleName":131}],68:[function(e,t,i){function n(e,t){this.view=e,this.err=t,this.message=t.message}((n.prototype=Object.create(Error.prototype)).constructor=n).prototype.name="ViewError",t.exports=n},{}],69:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a,o=null!=t?t:e.nullContext||{},l=i.helperMissing,c=e.escapeExpression,h="function";return'<a href="'+c((i.global||t&&t.global||l).call(o,"APP_ROOT",{name:"global",hash:{},data:s}))+"#"+c(typeof(a=null!=(a=i.handle||(null!=t?t.handle:t))?a:l)===h?a.call(o,{name:"handle",hash:{},data:s}):a)+'">'+(null!=(r=typeof(a=null!=(a=i.name||(null!=t?t.name:t))?a:l)===h?a.call(o,{name:"name",hash:{},data:s}):a)?r:"")+"</a>\n"},useData:!0})},{"hbsfy/runtime":25}],70:[function(e,t,i){var n=e("app/view/base/View"),s=e("./ArticleButton.hbs"),r=n.extend({cidPrefix:"articleButton",tagName:"h2",className:"article-button",template:s,events:{"click a":function(e){e.defaultPrevented||e.preventDefault(),this.trigger("view:click",this.model)}},renderFrame:function(e,t){this.el.innerHTML=this.template(this.model.toJSON())}});t.exports=r},{"./ArticleButton.hbs":69,"app/view/base/View":67}],71:[function(e,t,i){var n=e("app/view/base/View").extend({cidPrefix:"articleView",tagName:"article",className:"article-view mdown",initialize:function(e){},renderFrame:function(e,t){this.el.innerHTML=this.model.get("text")}});t.exports=n},{"app/view/base/View":67}],72:[function(t,i,e){(function(e,n){var s=t("app/view/base/CanvasView"),m=2*Math.PI,v=m/48,_=t("utils/ease/fn/easeInQuad"),y=t("utils/ease/fn/easeOutQuad"),r={amount:{lineWidth:.75,radiusOffset:0},available:{lineWidth:.75,inverse:"not-available"},"not-available":{lineWidth:.8,lineDash:[.3,.7],lineDashOffset:0},indeterminate:{lineWidth:2,lineDash:[.3,1.7],lineDashOffset:0}};i.exports=s.extend({cidPrefix:"canvasProgressMeter",className:"progress-meter canvas-progress-meter",defaultKey:"amount",defaults:{values:{amount:0,available:0,_loop:0,_stalled_arc:0,_stalled_loop:0},maxValues:{amount:1,available:1,_stalled_loop:1},useOpaque:!0,labelFn:function(e,t){return e/t*100|0}},properties:{stalled:{get:function(){return!1},set:function(e){}}},_setStalled:function(e){this._stalled!==e&&(this._stalled=e,this.requestRender(s.MODEL_INVALID|s.LAYOUT_INVALID))},initialize:function(e){s.prototype.initialize.apply(this,arguments),this._labelFn=e.labelFn,this._stalled=!!e.stalled,this._valueStyles={},this._canvasSize=null,this._canvasOrigin=null},_needsLoop:!1,valueTo:function(e,t,i){"amount"===e&&t<this.interpolator.getCurrentValue("amount")&&(this._needsLoop=!0),s.prototype.valueTo.apply(this,arguments)},measureCanvas:function(e,t,i){this._canvasHeight=this._canvasWidth=Math.min(e,t)},updateCanvas:function(){var e;for(var t in r)(e=n.defaults({},r[t])).lineWidth*=this._canvasRatio,e.radius=(this._canvasWidth-e.lineWidth)/2,e.radiusOffset&&(e.radius+=e.radiusOffset*this._canvasRatio),n.isArray(e.lineDash)?(e.lineDash=e.lineDash.map(function(e,t,i){return e*this.radius*v},e),e.lineDashLength=e.lineDash.reduce(function(e,t,i,n){return e+t},0),e.lineDashArc=e.lineDash[0]*v):e.lineDashArc=0,this._valueStyles[t]=e;var i=this._getFontMetrics(this._fontFamily);this._baselineShift=i?(i.ascent+i.descent)/i.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._ctx.restore(),this._ctx.setTransform(1,0,0,1,this._canvasWidth/2,this._canvasHeight/2),this._ctx.save()},redraw:function(e,t,i){var n,s,r,a;this._clearCanvas(-this._canvasWidth/2,-this._canvasHeight/2,this._canvasWidth,this._canvasHeight),s=t._valueData.amount,this.drawLabel(this._labelFn(s._renderedValue,s._maxVal)),e.save(),this._needsLoop&&(this._needsLoop=!1,t.valueTo("_loop",1,0),t.valueTo("_loop",0,750),t.updateValue("_loop")),a=t.getCurrentValue("_loop"),e.rotate(m*(1-a+.75));var o=0;n=this._valueStyles.amount,0<(r=a+s._renderedValue/s._maxVal)&&(o=this.drawArc(r,v,m-v,o,n),this.drawEndCap(o,n),o+=2*v),n=this._valueStyles.available;var l=(s=t._valueData.available).length||1,c=m/l,h=v+(c%v-n.lineDashArc)/2;if(Array.isArray(s))for(var u=0;u<l;u++)r=s[u]._renderedValue/(s[u]._maxVal/l),this.drawArc(r,u*c+h,(u+1)*c-h,o,n);else r=s._renderedValue/s._maxVal,this.drawArc(r,h,m-h,o,n);this._stalled?0===t.getTargetValue("_stalled_arc")&&t.valueTo("_stalled_arc",1,400,_).updateValue("_stalled_arc"):1===t.getTargetValue("_stalled_arc")&&t.valueTo("_stalled_arc",0,400,y).updateValue("_stalled_arc");var d=t.getRenderedValue("_stalled_arc");0<d&&!t.paused&&t.isAtTarget("_stalled_loop")&&t.valueTo("_stalled_loop",0,0).valueTo("_stalled_loop",1,800).updateValue("_stalled_loop");var p=t.getRenderedValue("_stalled_loop");if(0<d){var f=d*(2*(p<.5?p%.5:.5-p%.5))*.25+.125*d+1e-4,g=p+1.833333;e.save(),e.lineWidth=10*this._canvasRatio,e.globalAlpha=1,e.globalCompositeOperation="destination-out",e.strokeColor="red",e.beginPath(),e.arc(0,0,this._canvasWidth/2,(1-f+g)*m,(f+g)*m,!1),e.stroke(),e.restore()}e.restore()},drawArc:function(e,t,i,n,s){var r,a,o,l,c,h;return n||(n=0),o=t+(r=i-t)*e,(a=Math.max(t,n))<o&&(this._ctx.save(),this.applyValueStyle(s),this._ctx.beginPath(),this._ctx.arc(0,0,s.radius,o,a,!0),this._ctx.stroke(),this._ctx.restore()),void 0!==s.inverse&&(l=this._valueStyles[s.inverse],h=o+r*(1-e),(c=Math.max(o,n))<h&&(this._ctx.save(),this.applyValueStyle(l),this._ctx.beginPath(),this._ctx.arc(0,0,l.radius,h,c,!0),this._ctx.stroke(),this._ctx.restore())),o},applyValueStyle:function(e){this._ctx.lineWidth=e.lineWidth,n.isArray(e.lineDash)&&this._ctx.setLineDash(e.lineDash),n.isNumber(e.lineDashOffset)&&(this._ctx.lineDashOffset=e.lineDashOffset)},drawNotch:function(e,t,i){var n,s,r,a;n=Math.cos(e),s=Math.sin(e),r=i.radius,a=i.radius-t,this._ctx.save(),this.applyValueStyle(i),this._ctx.lineCap="square",this._ctx.beginPath(),this._ctx.moveTo(r*n,r*s),this._ctx.lineTo(a*n,a*s),this._ctx.stroke(),this._ctx.restore()},drawEndCap:function(e,t){var i=t.radius;this._ctx.save(),this._ctx.lineWidth=t.lineWidth,this._ctx.rotate(e-2*v),this._ctx.beginPath(),this._ctx.arc(0,0,i,.5*v,2*v,!1),this._ctx.lineTo(i-v*i,0),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()},drawLabel:function(e){this._labelText!==e&&(this._labelText=e,this._labelWidth=this._ctx.measureText(e).width),this._ctx.fillText(e,-.5*this._labelWidth,this._baselineShift,this._labelWidth)}}),e&&(i.exports.prototype._logFlags="")}).call(this,!1,t("underscore"))},{"app/view/base/CanvasView":63,underscore:"underscore","utils/ease/fn/easeInQuad":124,"utils/ease/fn/easeOutQuad":125}],73:[function(y,b,e){(function(e,r){var n,s,a=y("backbone.babysitter"),o=y("hammerjs"),l=y("utils/touch/SmoothPanRecognizer"),c=o.Tap,h=y("app/control/Globals"),u=y("app/view/base/View"),t=y("app/view/render/CarouselRenderer"),i=y("utils/prefixedProperty"),d=y("utils/prefixedStyleName")("transform"),p=i("transform"),f=h.TRANSLATE_TEMPLATE,g=o.DIRECTION_VERTICAL,m=o.DIRECTION_HORIZONTAL,v={ANIMATED:!1,IMMEDIATE:!0,DIRECTION_VERTICAL:g,DIRECTION_HORIZONTAL:m,defaults:{selectOnScrollEnd:!1,requireSelection:!1,direction:m,selectThreshold:20,rendererFunction:(n=t.extend({className:"carousel-item default-renderer"}),s=t.extend({className:"carousel-item empty-renderer"}),function(e,t,i){return-1===t?s:n})}};v.validOptions=r.keys(v.defaults);var _={cidPrefix:"carousel",tagName:"div",className:"carousel skip-transitions",properties:{scrolling:{get:function(){return this._scrolling}},selectedItem:{get:function(){return this._selectedView.model},set:function(e){e?this._onSelectOne(e):this._onSelectNone()}}},events:{"transitionend .carousel-item.selected":"_onScrollTransitionEnd","click .carousel-item:not(.selected)":"_onClick"},initialize:function(e){var t,i,n,s;r.bindAll(this,"_onPointerEvent","_onClick"),this.itemViews=new a,this.metrics={},r.extend(this,r.defaults(r.pick(e,v.validOptions),v.defaults)),this._precedingDir=(o.DIRECTION_LEFT|o.DIRECTION_UP)&this.direction,this._followingDir=(o.DIRECTION_RIGHT|o.DIRECTION_DOWN)&this.direction,!function(e,t){try{return e.get("hpan").options.direction==t}catch(e){return!1}}(e.touch,this.direction)?(console.warn("%s::initialize creating Hammer instance",this.cid),this.touch=(t=this.el,this.direction,i=new o.Manager(t),n=new l({event:"hpan",threshold:h.THRESHOLD,direction:o.DIRECTION_HORIZONTAL}),(s=new c({threshold:h.THRESHOLD-1,interval:50,time:200})).recognizeWith(n),i.add([n,s]),i),this.listenTo(this,"view:removed",function(){this.touch.destroy()})):this.touch=e.touch,this.setEnabled(!0),this.skipTransitions=!0,this._renderFlags=u.CHILDREN_INVALID,this.listenTo(this,"view:attached",function(){this.skipTransitions=!0,this.requestRender(u.SIZE_INVALID|u.LAYOUT_INVALID)}),this.listenTo(this.collection,{reset:this._onReset,"select:one":this._onSelectOne,"select:none":this._onSelectNone,"deselect:one":this._onDeselectAny,"deselect:none":this._onDeselectAny})},remove:function(){return this._togglePointerEvents(!1),this.removeChildren(),u.prototype.remove.apply(this,arguments),this},dirProp:function(e,t){return this.direction&m?e:t},renderFrame:function(e,t){t&u.CHILDREN_INVALID&&(this._createChildren(),t&=~u.CHILDREN_INVALID),this.attached?(t&u.SIZE_INVALID&&this._measure(),t&(u.LAYOUT_INVALID|u.SIZE_INVALID)&&this._scrollBy(this._delta,this.skipTransitions)):t&&this.listenToOnce(this,"view:attached",function(){this.requestRender(t)})},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this._togglePointerEvents(e),this.setImmediate(this._renderEnabled))},_renderEnabled:function(){this.el.classList.toggle("disabled",!this.enabled),this.itemViews.each(function(e){e.setEnabled(this.enabled)},this)},_createChildren:function(){var n,s,r,a;this.removeChildren(),this.collection.length&&(a={enabled:this.enabled},n=document.createDocumentFragment(),this.requireSelection||(s=this.rendererFunction(null,-1,this.collection),r=new s(a),this.itemViews.add(r),n.appendChild(r.el),this.emptyView=r),this.collection.each(function(e,t,i){a.model=e,s=this.rendererFunction(e,t,i),r=new s(a),this.itemViews.add(r),n.appendChild(r.el)},this),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this.el.appendChild(n))},removeChildren:function(){this.itemViews.each(this.removeItemView,this),this.emptyView=void 0},removeItemView:function(e){return this.itemViews.remove(e),e.remove(),e},_measure:function(){var t,e,i,n,s=0,r=0,a=0,o=0;i=n=this.emptyView||this.itemViews.first(),this.itemViews.each(function(e){e.render()}),this.itemViews.each(function(e){(t=this.measureItemView(e)).pos=s,s+=t.outer,t.posInner=r,r+=t.inner,e!==this.emptyView&&(t.across>a&&(a=t.across,n=e),t.outer>o&&(o=t.outer,i=e))},this),(e=this.metrics[this.cid]||(this.metrics[this.cid]={})).outer=this.el[this.dirProp("offsetWidth","offsetHeight")],e.before=i.el[this.dirProp("offsetLeft","offsetTop")],e.inner=i.el[this.dirProp("offsetWidth","offsetHeight")],e.after=e.outer-(e.inner+e.before),e.across=a,this._tapAcrossBefore=n.el[this.dirProp("offsetTop","offsetLeft")],this._tapAcrossAfter=this._tapAcrossBefore+a,this._tapBefore=e.before+this._tapGrow,this._tapAfter=e.before+e.inner-this._tapGrow,this.selectThreshold=Math.min(20,.1*e.outer)},measureItemView:function(e){var t,i;return i=e.el,(t=this.metrics[e.cid]||(this.metrics[e.cid]={})).outer=i[this.dirProp("offsetWidth","offsetHeight")],t.across=i[this.dirProp("offsetHeight","offsetWidth")],e.metrics?(t.before=e.metrics[this.dirProp("marginLeft","marginTop")],t.outer+=t.before,t.outer+=e.metrics[this.dirProp("marginRight","marginBottom")],t.inner=e.metrics.content[this.dirProp("width","height")],t.before+=e.metrics.content[this.dirProp("x","y")],t.after=t.outer-(t.inner+t.before)):(console.warn("%s::measureItemView view '%s' has no metrics",this.cid,e.cid),t.inner=t.outer,t.after=t.before=0),t},_delta:0,_scrolling:!1,_setScrolling:function(e){this._scrolling!=e&&(this._scrolling=e,this.el.classList.toggle("scrolling",e),this.trigger(e?"view:scrollstart":"view:scrollend"))},scrollBy:function(e,t){this._delta=e||0,this.skipTransitions=!!t,this.requestRender(u.LAYOUT_INVALID)},_scrollBy:function(t,e){var i,n,s;i=this.metrics[(this._scrollCandidateView||this._selectedView).cid],this.itemViews.each(function(e){n=this.metrics[e.cid],s=Math.floor(this._getScrollOffset(t,n,i)),e.metrics.translateX=this.direction&m?s:0,e.metrics.translateY=this.direction&m?0:s,e.metrics._transform=f(e.metrics.translateX,e.metrics.translateY),e.el.style[p]=e.metrics._transform},this),this.el.classList.toggle("skip-transitions",e),this.selectFromView()},_getScrollOffset:function(e,t,i){var n,s=0;return(n=t.pos-i.pos+e)<0?Math.abs(n)<i.outer?s+=-t.after/i.outer*n:s+=t.after:0<=n&&(Math.abs(n)<i.outer?s-=t.before/i.outer*n:s-=t.before),n+s},_onScrollTransitionEnd:function(e){e.propertyName===d&&this.scrolling&&(this.cid,e.target.cid,this._setScrolling(!1))},_togglePointerEvents:function(e){this._pointerEventsEnabled!=e&&((this._pointerEventsEnabled=e)?(this.touch.on("hpanstart hpanmove hpanend hpancancel",this._onPointerEvent),this.el.addEventListener(u.CLICK_EVENT,this._onClick,!0)):(this.touch.off("hpanstart hpanmove hpanend hpancancel",this._onPointerEvent),this.el.removeEventListener(u.CLICK_EVENT,this._onClick,!0)))},_onPointerEvent:function(e){if("pointercancel"!==e.srcEvent.type)switch(e.type){case"hpanstart":return this._onPanStart(e);case"hpanmove":return this._onPanMove(e);case"hpanend":case"hpancancel":return this._onPanFinal(e)}},getViewAtPanDir:function(e){return e&this._followingDir?this._precedingView:this._followingView},_onPanStart:function(e){this.selectFromView(),this.el.classList.add("panning"),this._setScrolling(!0)},_onPanMove:function(e){var t=this.direction&m?e.deltaX:e.deltaY,i=this.getViewAtPanDir(e.offsetDirection),n=this._panCandidateView;n!==i&&(n&&n.el.classList.remove("candidate"),i&&i.el.classList.add("candidate"),this._panCandidateView=i),void 0===n&&(t*=h.HPAN_OUT_DRAG),-1!==this._renderRafId?(this.scrollBy(t,v.IMMEDIATE),this.renderNow()):this._scrollBy(t,v.IMMEDIATE)},_onPanFinal:function(e){var t,i=this.direction&m?e.deltaX:e.deltaY;"hpanend"==e.type&&e.direction^e.offsetDirection^this.direction&&Math.abs(i)>this.selectThreshold&&(t=this.getViewAtPanDir(e.offsetDirection)),this._scrollCandidateView=t||void 0,this._panCandidateView&&this._panCandidateView!==t&&this._panCandidateView.el.classList.remove("candidate"),this._panCandidateView=void 0,this.el.classList.remove("panning"),this.scrollBy(0,v.ANIMATED),this.selectFromView()},_tapGrow:10,getViewAtTapPos:function(e,t){if(this._tapAcrossBefore<t&&t<this._tapAcrossAfter){if(e<this._tapBefore)return this._precedingView;if(e>this._tapAfter)return this._followingView}},_onClick:function(e){this.cid,e.type,this._onTap(e)},_onTap:function(e){if(!e.defaultPrevented){var t,i=u.findByDescendant(e.target);do{if(this._selectedView===i){t=null;break}if(this===i.parentView){t=i;break}if(this===i){var n,s,r;n=this.el.getBoundingClientRect(),s=("tap"==e.type?e.center.x:e.clientX)-n.left,r=("tap"==e.type?e.center.y:e.clientY)-n.top,t=this.getViewAtTapPos(this.dirProp(s,r),this.dirProp(r,s));break}}while(i=i.parentView);t&&(e.preventDefault(),this._scrollCandidateView=t,this._setScrolling(!0),this.scrollBy(0,v.ANIMATED),this.triggerSelectionEvents(t,!0))}},triggerSelectionEvents:function(e,t){void 0===e||this._internalSelection||(this._internalSelection=!!t,e===this.emptyView?this.trigger("view:select:none"):this.trigger("view:select:one",e.model),this._internalSelection=!1)},selectFromView:function(){if(void 0!==this._scrollCandidateView){var e=this._scrollCandidateView;this.triggerSelectionEvents(e,!0)}},adjustToSelection:function(){var e,t=this.collection.selectedIndex;this.requireSelection?(-1==t&&t++,this._selectedView=(e=this.collection.at(t))&&this.itemViews.findByModel(e),this._precedingView=(e=this.collection.at(t-1))&&this.itemViews.findByModel(e)):(this._selectedView=(e=this.collection.at(t))?this.itemViews.findByModel(e):this.emptyView,this._precedingView=e&&((e=this.collection.at(t-1))?this.itemViews.findByModel(e):this.emptyView)),this._followingView=(e=this.collection.at(t+1))&&this.itemViews.findByModel(e)},_onSelectOne:function(e){e!==this._selectedView.model&&this._onSelectAny(e)},_onSelectNone:function(){(this.requireSelection?this.itemViews.first():this.emptyView)!==this._selectedView&&this._onSelectAny()},_onSelectAny:function(e){this._selectedView.el.classList.remove("selected"),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this._scrollCandidateView&&(this._scrollCandidateView.el.classList.remove("candidate"),this._scrollCandidateView=void 0),this._internalSelection||(this._setScrolling(!0),this.scrollBy(0,v.ANIMATED))},_onReset:function(){this.requestRender(u.CHILDREN_INVALID|u.MODEL_INVALID)}};e&&(_._logFlags=""),b.exports=v=u.extend(_,v)}).call(this,!1,y("underscore"))},{"app/control/Globals":40,"app/view/base/View":67,"app/view/render/CarouselRenderer":90,"backbone.babysitter":"backbone.babysitter",hammerjs:"hammerjs",underscore:"underscore","utils/prefixedProperty":130,"utils/prefixedStyleName":131,"utils/touch/SmoothPanRecognizer":137}],74:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r;return e.escapeExpression("function"==typeof(r=null!=(r=i.id||(null!=t?t.id:t))?r:i.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:s}):r)},useData:!0})},{"hbsfy/runtime":25}],75:[function(e,t,i){var n=e("app/view/base/View"),s=e("./CollectionStack.hbs");t.exports=n.extend({cidPrefix:"stack",tagName:"div",className:"stack",template:s,events:{transitionend:function(e){this._renderContent()}},initialize:function(e){this._enabled=!0,this._skipTransitions=!0,this._contentInvalid=!0,e.template&&(this.template=e.template),this.content=document.createElement("div"),this.content.className="stack-item",this.el.appendChild(this.content),this.listenTo(this.collection,"select:one select:none",this._onSelectChange)},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this.el.classList.toggle("disabled",!this._enabled))},_onSelectChange:function(e){if(this._renderedItem===this.collection.selected)throw new Error("change event received but item is identical");this._renderedItem=this.collection.selected,this._contentInvalid=!0,this.render()},render:function(){return this._skipTransitions?(this._skipTransitions=!1,this.el.classList.add("skip-transitions"),this.setImmediate(function(){this.el.classList.remove("skip-transitions")}),this._contentInvalid&&this._renderContent()):this._contentInvalid&&this.content.classList.remove("current"),this},_renderContent:function(){if(this._contentInvalid){this._contentInvalid=!1;var e=this.collection.selected;this.content.innerHTML=e?this.template(e.toJSON()):"",this.content.classList.add("current")}}})},{"./CollectionStack.hbs":74,"app/view/base/View":67}],76:[function(p,f,e){(function(n,t){var i=p("backbone.babysitter"),s=p("app/view/base/View"),e=p("app/view/render/ClickableRenderer"),r=p("utils/prefixedProperty"),a=p("utils/css/getBoxEdgeStyles"),o=p("utils/array/difference"),l=p("utils/promise/resolveAll"),c=p("utils/promise/rejectAll"),h=p("app/control/Globals").TRANSLATE_TEMPLATE,u=r("transform"),d=s.extend({cidPrefix:"filterableList",tagName:"ul",className:"list selectable filterable",defaults:{collapsed:!0,filterFn:function(){return!0},renderer:e.extend({cidPrefix:"listItem",className:"list-item list-node"})},properties:{collapsed:{get:function(){return this._collapsed},set:function(e){this._setCollapsed(e)}},selectedItem:{get:function(){return this._selectedItem},set:function(e){this._setSelection(e)}},filteredItems:{get:function(){return this._filteredItems}},metrics:{get:function(){return this._metrics}}},events:{"transitionend .list-node":function(e){e.propertyName==u&&e.target.parentElement===this.el&&this._changedPosNum--,this._collapsedChanging&&0==this._changedPosNum&&(this.cid,e.type,e.propertyName,this._collapsePromises.length,this._collapsedChanging=!1,this.el.classList.remove("collapsed-changing"),l(this._collapsePromises,this))}},initialize:function(e){this._filteredItems=[],this._filteredIncoming=[],this._filteredOutgoing=[],this._metrics={},this._itemMetrics=[],this._collapsePromises=[],this.itemViews=new i,t.defaults(e,this.defaults),this.renderer=e.renderer,this._filterFn=e.filterFn,this.collection.each(this.createItemView,this),this._setSelection(this.collection.selected),this._setCollapsed(e.collapsed),this.refreshFilter(),this.listenTo(this.collection,"reset",function(){throw this._allItems=null,new Error("not implemented")}),this.cid,this.attached,this.once("view:attached",function(e){e.cid,e.attached,e.skipTransitions=!0,e.el.classList.add("skip-transitions"),e.setImmediate(function(){e.renderNow()})})},_getAllItems:function(){return this._allItems||(this._allItems=this.collection.slice())},_whenCollapseChangeEnds:function(){if(this._collapsedChanged){var i=this;return new Promise(function(e,t){i.on("view:render:after",e)})}return Promise.resolve(this)},whenCollapseChangeEnds:function(){var i,e;return this._collapsedChanging||this._collapsedChanged?(i={},e=new Promise(function(e,t){i.resolve=e,i.reject=t}),this._collapsePromises.push(i)):e=Promise.resolve(this),e},renderFrame:function(e,t){if(this._collapsedChanging&&(console.warn("%s::renderFrame collapsed tx interrupted",this.cid),this._collapsedChanging=!1,this.el.classList.remove("collapsed-changing"),c(this._collapsePromises,this)),this.skipTransitions&&(this.el.classList.add("skip-transitions"),this.setImmediate(function(){this.skipTransitions=!1,this.el.classList.remove("skip-transitions")})),this._collapsedChanged&&(this._collapsedChanged=!1,t|=s.SIZE_INVALID,this.el.classList.toggle("collapsed",this._collapsed),this.skipTransitions?(this._collapsedChanging=!1,this.once("view:render:after",function(e){this._changedPosNum=0,l(e._collapsePromises,e)})):(this._collapsedChanging=!0,this.el.classList.add("collapsed-changing")),this.cid,this._collapsePromises.length,this._collapsedChanging),this._selectionChanged&&(this._selectionChanged=!1,t|=s.LAYOUT_INVALID,this.renderSelection(this.collection.selected,this.collection.lastSelected)),this._filterChanged){this._filterChanged=!1,t|=s.LAYOUT_INVALID;var i=this.filteredItems;this.computeFilter(),this.applyFilter(),n&&this._printStats(i)}t&s.SIZE_INVALID&&this.measure(),t&(s.LAYOUT_INVALID|s.SIZE_INVALID)&&this.renderLayout()},measure:function(){this._metrics=a(this.el,this._metrics),this.itemViews.forEach(function(e){e._metrics||(e._metrics={}),e._metrics.offsetTop=e.el.offsetTop,e._metrics.offsetHeight=e.el.offsetHeight,e._metrics.offsetLeft=e.el.offsetLeft,e._metrics.offsetWidth=e.el.offsetWidth,!this._collapsed&&e.label?(e._metrics.textLeft=e.label.offsetLeft,e._metrics.textWidth=e.label.offsetWidth):(e._metrics.textLeft=e._metrics.offsetLeft,e._metrics.textWidth=e._metrics.offsetWidth)},this)},renderLayout:function(){var e,t,i,n;e=this._metrics.paddingLeft,t=this._metrics.paddingTop;for(var s=this._changedPosNum=0,r=this.el.children.length;s<r;s++){var a=this.itemViews.findByCid(this.el.children[s].cid);i=a.transform.tx,n=a.transform.ty,(this.collection.selected&&!a.model.selected||a.el.classList.contains("excluded"))&&this._collapsed?(a.transform.tx=e,a.transform.ty=t):(0==a._metrics.offsetHeight&&(t-=a._metrics.offsetTop),a.transform.tx=e,a.transform.ty=t,t+=a._metrics.offsetHeight+a._metrics.offsetTop),a.el.style[u]=h(a.transform.tx,a.transform.ty),a.transform.tx==i&&a.transform.ty==n||this._changedPosNum++}this._metrics.height=Math.max(0,t+this._metrics.paddingBottom),this.el.style.height=this._metrics.height+"px"},createItemView:function(e,t){var i=new this.renderer({model:e,el:this.el.querySelector('.list-item[data-id="'+e.id+'"]')});return this.listenTo(i,"renderer:click",this._onRendererClick),this.itemViews.add(i),i},_onRendererClick:function(e,t){this._collapsedChanging||this._collapsed&&e.get("excluded")||(this.collection.selected!==e?this.trigger("view:select:one",e):t.altKey?this.trigger("view:select:none"):this.trigger("view:select:same",e))},_collapsed:void 0,_setCollapsed:function(e){e!==this._collapsed&&(this._collapsed=e,this._collapsedChanged=!0,this.requestRender())},_selectedItem:void 0,_setSelection:function(e){e!==this._selectedItem&&(this._selectedItem=e,this._selectionChanged=!0,this.requestRender(s.MODEL_INVALID))},renderSelection:function(e,t){t&&this.itemViews.findByModel(t).el.classList.remove("selected"),e&&this.itemViews.findByModel(e).el.classList.add("selected"),this.el.classList.toggle("has-selected",null!==this.selectedItem)},refreshFilter:function(){this._filterFn&&(this._filterChanged=!0,this.requestRender(s.MODEL_INVALID))},computeFilter:function(){var e,t,i,n;this._filteredIncoming.length=0,this._filteredOutgoing.length=0,e=this._filterFn?this.collection.filter(this._filterFn,this):this._getAllItems(),t=this._filteredItems,i=!(!e||!e.length),n=!(!t||!t.length),i&&o(n?t:this._getAllItems(),e,this._filteredIncoming),n&&o(i?e:this._getAllItems(),t,this._filteredOutgoing),this._filteredItems=e},applyFilter:function(){this._filteredIncoming.forEach(function(e){this.itemViews.findByModel(e).el.classList.add("excluded"),e.set("excluded",!0)},this),this._filteredOutgoing.forEach(function(e){this.itemViews.findByModel(e).el.classList.remove("excluded"),e.set("excluded",!1)},this),this.el.classList.toggle("has-excluded",0<this.filteredItems.length)}});n&&(d.prototype._logFlags=["view.render"].join(" "),d.prototype._printStats=function(e){this._logFlags["view.trace"]&&(this.cid,this.filteredItems.length,this.filteredItems.length,e?(this.filteredItems.length,this._filteredIncoming.length,this._filteredOutgoing.length):this.filteredItems.length,this.collection.length,this._filteredIncoming.length,this._filteredOutgoing.length,this._filteredIncoming.length,this._filteredOutgoing.length)}),f.exports=d}).call(this,!1,p("underscore"))},{"app/control/Globals":40,"app/view/base/View":67,"app/view/render/ClickableRenderer":91,"backbone.babysitter":"backbone.babysitter",underscore:"underscore","utils/array/difference":113,"utils/css/getBoxEdgeStyles":123,"utils/prefixedProperty":130,"utils/promise/rejectAll":133,"utils/promise/resolveAll":134}],77:[function(d,p,e){(function(n,a){var s=d("color"),r=d("app/view/base/CanvasView"),o=d("app/control/Globals"),y=d("utils/canvas/calcArcHConnector"),h=d("utils/canvas/CanvasHelper"),t=d("utils/geom/inflateRect"),i={lineCap:"butt",lineWidth:.75,lineDashOffset:0,setLineDash:[[]]},l={radiusBase:1.25,radiusIncrement:.21,outlineWidth:3,arrowSize:.4};if(n){var u={defaults:{globalAlpha:.66,lineWidth:0,fillStyle:"transparent",strokeStyle:"transparent",lineDashOffset:0,setLineDash:[[]]}};["red","salmon","sienna","green","yellowgreen","olive","blue","lightskyblue","midnightblue","grey","silver"].forEach(function(e){var t=s(e).alpha(.75).rgbaString();u[e]=a.defaults({lineWidth:.75,strokeStyle:t},u.defaults),u[e+"_dashed"]=a.defaults({setLineDash:[[4,2]],strokeStyle:t},u.defaults),u[e+"_thick"]=a.defaults({lineWidth:5,strokeStyle:t},u.defaults),u[e+"_fill"]=a.defaults({fillStyle:t},u.defaults)})}var e=r.extend({cidPrefix:"graph",tagName:"canvas",className:"graph",defaultKey:"a2b",defaults:{values:{a2b:0,b2a:0},maxValues:{a2b:1,b2a:1}},initialize:function(e){r.prototype.initialize.apply(this,arguments),this._listA=e.listA,this._listB=e.listB,this._a2b={srcView:e.listA,destView:e.listB,s:a.defaults({lineWidth:1.25},i,l),p:a.defaults({},l),strokeStyleFn:function(e,t,i){return s(i).mix(t,.9).hexString()}},this._b2a={srcView:e.listB,destView:e.listA,s:a.defaults({lineWidth:.7},i,l),p:a.defaults({},l),strokeStyleFn:function(e,t,i){return s(e).mix(t,.6).hexString()}}},measureCanvas:function(e,t,i){this.cid,i.height,this.el.offsetHeight,this.el.scrollHeight,this.el.clientHeight},updateCanvas:function(){this._updateMetrics(),this._updateStyles()},_updateStyles:function(){var e,t,i;this.model.has("bundle")?(i=(e=this.model.get("bundle")).colors.lnColor.clone(),t=e.colors.bgColor.clone()):(t=s(o.DEFAULT_COLORS["background-color"]),i=s(o.DEFAULT_COLORS["link-color"])),this._a2b.s.strokeStyle=this._a2b.s.fillStyle=this._a2b.strokeStyleFn(this._color,t,i),this._b2a.s.strokeStyle=this._b2a.s.fillStyle=this._b2a.strokeStyleFn(this._color,t,i),n&&(this._debugBlocks=this.el.matches(".debug-blocks ."+this.className),this._debugGraph=this.el.matches(".debug-graph ."+this.className))},_setStyle:function(e){"string"==typeof e&&(e=this._styleData[e]),r.setStyle(this._ctx,e)},_updateMetrics:function(){var e,t,i,n,s,r,a,o,l,c;for(this._rootFontSize=parseFloat(getComputedStyle(document.documentElement).fontSize),e=this.el.getBoundingClientRect(),this._ctx.setTransform(this._canvasRatio,0,0,this._canvasRatio,-(e.left+window.pageXOffset)*this._canvasRatio-.5,-(e.top+window.pageYOffset)*this._canvasRatio-.5),s=this._a2b.srcView.el.getBoundingClientRect(),r=this._a2b.destView.el.getBoundingClientRect(),this._a2b.qx=(c=r,(l=s).right<c.left?1:c.right<l.left?-1:0),n=this._listA.el.querySelectorAll(".label"),a=s.left+window.pageXOffset,t=0,i=n.length;t<i;t++)a=Math.max(a,n[t].getBoundingClientRect().right+window.pageXOffset);for(this._a2b.xMin=a,n=this._listB.el.querySelectorAll(".label"),o=r.left+window.pageXOffset,t=0,i=n.length;t<i;t++)o=Math.min(o,n[t].getBoundingClientRect().left+window.pageXOffset);this._a2b.destMinX=o,this._b2a.qx=-this._a2b.qx,this._b2a.xMin=this._a2b.destMinX,this._b2a.destMinX=this._a2b.xMin},redraw:function(e,t,i){this._clearCanvas(0,0,this._canvasWidth,this._canvasHeight),e.save(),this._redraw_fromElements(e,t,i),e.restore()},_redraw_fromElements:function(e,t,i){var n,s;i&(r.SIZE_INVALID|r.MODEL_INVALID)&&(this.cid,t.valuesChanged,r.flagsToString(i),this._a2b.connectorsOut=this._a2b.connectors,this._b2a.connectorsOut=this._b2a.connectors,this._b2a.connectors=this._computeConnectors(this._b2a),this._a2b.connectors=this._computeConnectors(this._a2b),this._labelOverlays=this._computeLabelOverlays(this._listB)),n=t.getRenderedValue("b2a")/t.getOption("b2a","max"),s=t.getRenderedValue("a2b")/t.getOption("a2b","max"),this._drawConnectors(this._b2a.connectors,this._b2a.s,n,1),this._drawConnectors(this._b2a.connectorsOut,this._b2a.s,1-n,1),this._drawConnectors(this._a2b.connectors,this._a2b.s,s,2),this._drawLabelOverlays(this._labelOverlays)},_computeLabelOverlays:function(e){var t,i,n,s={rects:[]},r=e.el.querySelectorAll(".list-group .label span");for(t=0,i=r.length;t<i;t++)(n=a.clone(r[t].getBoundingClientRect())).top+=window.pageYOffset,n.left+=window.pageXOffset,s.rects[t]=n;return s},_drawLabelOverlays:function(e){this._ctx.save(),this._ctx.globalAlpha=.85,this._ctx.globalCompositeOperation="destination-out",e.rects.forEach(function(e){this._ctx.fillRect(e.left,e.top,e.width,e.height)},this),this._ctx.restore(),n&&(this._debugGraph||this._debugBlocks)&&e.rects.forEach(function(e){e=t(e,0,0),h.drawRect(this._ctx,u.silver_dashed,e.left,e.top,e.width,e.height)},this)},_computeConnectors:function(e){var t,i,n=e.xMin,s=e.destMinX,r=e.qx;t=this._roundTo(e.s.radiusBase*this._rootFontSize,.5),i=this._roundTo(e.s.radiusIncrement*this._rootFontSize,.5);var a,o,l,c,h,u,d,p=[];if(e.srcView.collection.selected&&e.destView.filteredItems){var f=e.srcView.itemViews.findByModel(e.srcView.collection.selected).label.getBoundingClientRect();for(c=f.left,h=f.top+f.height/2,0<r&&(c+=f.width),c+=window.pageXOffset,h+=window.pageYOffset,d=e.destView.filteredItems,l=e.destView.filteredItems.length,a=0;a<l;a++)o={},f=e.destView.itemViews.findByModel(d[a]).label.getBoundingClientRect(),o.x2=f.left,o.y2=f.top+f.height/2,r<0&&(o.x2+=f.width),o.x2+=window.pageXOffset,o.y2+=window.pageYOffset,o.x1=c,o.y1=h,o.qx=r,p[a]=o;p.sort(function(e,t){return e.y2-t.y2});var g,m=0,v=l*i*.5;for(a=0;a<l;a++)g=(a-(l-1)/2)*i,(o=p[a]).cy1=o.y1+g,o.cy2=o.y2,o.r0=Math.abs(g),o.cx0=o.x1+(v-o.r0)*r,o.di=0<o.cy1-o.y2?a:l-(a+1),m=Math.max(m,o.di);var _=(Math.abs(s-n)-(v+m*i))/2;for(t=Math.max(0,Math.min(t,_)),a=0;a<l;a++)(o=p[a]).r1=o.di*i+t,o.r2=t,o.cx1=n+v*r,o.cx2=s-(m-o.di)*i*r,(u=y(o.cx1,o.cy1,o.r1,o.cx2,o.cy2,o.r2,.9))?(o.tx1=u[0],o.tx2=u[1]):(o.tx1=o.cx1,o.tx2=o.cx2),o.length=Math.abs(o.x1-o.x2)+Math.abs(o.cy1-o.cy2);p.sort(function(e,t){return e.di-t.di}),p.si=m,p.qx=r,p.sMin=n,p.dMin=s}return p},_drawConnectors:function(e,t,i,n){var s,r,a,o,l,c,h;if(e&&e.length&&i){if(r=e.length,o=t.lineWidth+t.outlineWidth,c=(l=t.arrowSize*this._rootFontSize)+(o-t.lineWidth),h=Math.PI*n,this._setStyle(t),t.outlineWidth){for(this._ctx.save(),this._ctx.globalCompositeOperation="destination-out",this._ctx.lineWidth=o,s=0;s<r;s++)a=e[s],i<1&&(this._ctx.lineDashOffset=a.length*(1+i),this._ctx.setLineDash([a.length,a.length])),this._drawConnector(a,s,e),1==i&&this._drawArrowhead(a.x2,a.y2,c,n*h);this._ctx.restore()}for(s=0;s<r;s++)a=e[s],i<1&&(this._ctx.lineDashOffset=a.length*(1+i),this._ctx.setLineDash([a.length,a.length])),this._drawConnector(a,s,e),1==i&&this._drawArrowhead(a.x2,a.y2,l,n*h)}},_drawArrowhead:function(e,t,i,n){h.arrowhead2(this._ctx,e,t,i,n),this._ctx.stroke()},_drawArrowhead2:function(e,t,i,n){h.arrowhead(this._ctx,e,t,i,n),this._ctx.fill()},_drawConnector:function(e,t,i){this._ctx.beginPath(),this._ctx.moveTo(e.x2,e.cy2),this._ctx.arcTo(e.tx2,e.cy2,e.tx1,e.cy1,e.r2),this._ctx.arcTo(e.tx1,e.cy1,e.cx1,e.cy1,e.r1),this._ctx.arcTo(e.cx0,e.cy1,e.cx0,e.y1,e.r0),this._ctx.stroke()},_roundTo:function(e,t){return 1<t&&(t=1/t),Math.round(e/t)*t}});if(n){if(e.prototype._drawConnector=a.wrap(e.prototype._drawConnector,function(e,t,i,n){if(!this._debugGraph)return e.call(this,t,i,n);var s=0==i,r=i==n.length-1,a=u[s?"salmon_dashed":"lightskyblue_dashed"];s&&(h.drawVGuide(this._ctx,u.grey,n.sMin),h.drawVGuide(this._ctx,u.grey,n.dMin)),s&&(h.drawHGuide(this._ctx,u.silver_dashed,t.y1),h.drawVGuide(this._ctx,u.silver_dashed,t.x1),h.drawCircle(this._ctx,u.midnightblue,t.x1,t.y1,10)),(s||r)&&(h.drawVGuide(this._ctx,a,t.tx2),h.drawVGuide(this._ctx,a,t.cx2-t.r2*t.qx)),(s||r)&&(this._ctx.save(),this._ctx.strokeStyle=u[s?"red":"blue"].strokeStyle,this._ctx.lineWidth*=1.5),e.call(this,t,i,n),(s||r)&&this._ctx.restore();var o=r?"midnightblue":s?"sienna":"grey",l=u[o],c=u[o+"_fill"];(s||r)&&(h.drawCrosshair(this._ctx,l,t.x2,t.cy2,10),h.drawCircle(this._ctx,l,t.x2,t.cy2,3),h.drawSquare(this._ctx,l,t.tx2,t.cy2,4),h.drawCircle(this._ctx,c,t.tx1,t.cy1,2),h.drawSquare(this._ctx,l,t.tx1,t.cy1,4),h.drawCircle(this._ctx,c,t.cx1,t.cy1,2),h.drawSquare(this._ctx,l,t.cx0,t.cy1,4),h.drawCircle(this._ctx,c,t.cx0,t.y1,2),h.drawCircle(this._ctx,u.green,t.tx1,t.cy1,4),h.drawCircle(this._ctx,u.green,t.cx1,t.cy1,4),h.drawCircle(this._ctx,u.green,t.cx2,t.cy2,4))}),e.prototype._traceScroll=function(e){this.cid,this._canvasRatio,window.pageYOffset,window.pageYOffset,document.documentElement.clientHeight,document.documentElement.scrollTop,document.documentElement.scrollHeight,document.body.clientHeight,document.body.scrollTop,document.body.scrollHeight,document.body.firstElementChild.clientHeight,document.body.firstElementChild.scrollTop,document.body.firstElementChild.scrollHeight,this.el.clientHeight,this.el.scrollTop,this.el.scrollHeight},e.prototype._logFlags.split(" ")["view.render"]){var c=a.debounce(a.bind(console.log,console),500,!0);e.prototype._applyRender=a.wrap(r.prototype._applyRender,function(e){var t,i,n;return this._logFlags["view.render"]=!1,c("%s::_applyRender [debounced]",this.cid),i=this,n=arguments,t=Array.prototype.shift.apply(n).apply(i,n),this._logFlags["view.render"]=!0,t})}}p.exports=e}).call(this,!1,d("underscore"))},{"app/control/Globals":40,"app/view/base/CanvasView":63,color:"color",underscore:"underscore","utils/canvas/CanvasHelper":114,"utils/canvas/calcArcHConnector":122,"utils/geom/inflateRect":128}],78:[function(r,a,e){(function(e){var t=r("app/view/component/FilterableListView"),i=r("app/view/render/ClickableRenderer"),n=r("app/view/render/LabelRenderer"),s=t.extend({cidPrefix:"groupingList",tagName:"dl",className:"grouped",_groupingFn:null,defaults:e.defaults({renderer:i.extend({cidPrefix:"groupingListItem",tagName:"dl",className:"list-item list-node"}),groupingRenderer:n.extend({cidPrefix:"groupingListGroup",tagName:"dt",className:"list-group list-node"}),groupingFn:null},t.prototype.defaults),properties:{groups:{get:function(){return this._groups}},filteredGroups:{get:function(){return this._filteredGroups}}},initialize:function(e){t.prototype.initialize.apply(this,arguments),this._groups=[],this._filteredGroups=[],this._changedFilteredGroups=[],this._groupsByItemCid={},this._groupingFn=e.groupingFn,this.groupingRenderer=e.groupingRenderer,this._computeGroups(),this._groupingFn&&this._groups.forEach(this.createGroupingView,this)},_computeGroups:function(){this._groups.length=0,this._groupingFn?this.collection.forEach(function(e){var t,i;(i=this._groupingFn.apply(null,arguments))&&-1==(t=this._groups.indexOf(i))&&(t=this._groups.length,this._groups[t]=i),this._groupsByItemCid[e.cid]=i},this):this.collection.forEach(function(e){this._groupsByItemCid[e.cid]=null},this)},createGroupingView:function(e){var t=new this.groupingRenderer({model:e,el:this.el.querySelector('.list-group[data-id="'+e.id+'"]')});return this.itemViews.add(t),t},computeFilter:function(){t.prototype.computeFilter.apply(this,arguments),this._groupingFn&&(0==this._filteredItems.length?this._filteredGroups=this._groups.concat():this._filteredGroups=e.uniq(this._filteredItems.map(function(e){return this._groupsByItemCid[e.cid]},this)))},applyFilter:function(){t.prototype.applyFilter.apply(this,arguments),this._groups.forEach(function(e){this.itemViews.findByModel(e).el.classList.toggle("excluded",-1==this._filteredGroups.indexOf(e))},this)}});a.exports=s}).call(this,r("underscore"))},{"app/view/component/FilterableListView":76,"app/view/render/ClickableRenderer":91,"app/view/render/LabelRenderer":98,underscore:"underscore"}],79:[function(e,n,t){(function(t){var i=e("app/view/base/CanvasView"),a=(e("color"),e("utils/canvas/bitmap/stackBlurRGB")),o=(e("utils/canvas/bitmap/getAverageRGB"),e("utils/canvas/bitmap/multiply")),l=(e("utils/canvas/bitmap/desaturate"),e("utils/canvas/CanvasHelper").roundRect,e("utils/ease/fn/easeInQuad")),c=e("utils/ease/fn/easeOutQuad"),h=2*Math.PI,u=e("app/control/Globals").TRANSITION_DURATION;n.exports=i.extend({cidPrefix:"playToggleSymbol",className:"play-toggle",defaults:{values:{_loop:0,_arc:0},maxValues:{_loop:1},color:"rgba(255,255,255,1.0)",backgroundColor:"rgba(0,0,0,0.25)",paused:!0,symbolName:""},properties:{symbolName:{get:function(){return this._symbolName},set:function(e){this._setSymbolName(e)}}},initialize:function(e){i.prototype.initialize.apply(this,arguments),this._options=t.extend(this._options,t.pick(e,"symbolName","borderRadius","borderWidth")),this.symbolName=this._options.symbolName},measureCanvas:function(e,t,i){this._canvasHeight=this._canvasWidth=Math.min(e,t)},updateCanvas:function(e,t){var i=this._getFontMetrics(this._fontFamily);this._baselineShift=i?(i.ascent+i.descent)/i.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._canvasOffsetX=this._canvasOffsetY=this._canvasWidth/2,this._radius=this._canvasWidth/2*Math.SQRT1_2*Math.SQRT1_2*Math.SQRT1_2,this._side=this._radius,this._ctx.setTransform(1,0,0,1,this._canvasOffsetX,this._canvasOffsetY),this._ctx.lineWidth=this._radius*(1-Math.SQRT1_2),this._ctx.shadowColor="rgba(0,0,0,0.75)",this._ctx.shadowBlur=1,this._ctx.shadowOffsetX=2,this._ctx.shadowOffsetY=2,this._isImageDataInvalid=!0},_symbolName:"",_setSymbolName:function(e){this._symbolName!==e&&(this._lastSymbolName=this._symbolName,this._symbolName=e,this.refreshImageSource(),this.requestRender(i.LAYOUT_INVALID),this.attached?this.parentView.cid:this.cid,this._symbolName,this._lastSymbolName,this.paused)},_imageSource:null,setImageSource:function(e){this._imageSource!==e&&(this._imageSource=e,this._isImageDataInvalid=!0,this.requestRender(i.SIZE_INVALID))},_imageDataTC:null,refreshImageSource:function(e){!this._isImageDataInvalid&&this._imageSource instanceof HTMLVideoElement&&(t.isNumber(e)||(e=.5),e<Math.abs(this._imageDataTC-this._imageSource.currentTime)&&(this._isImageDataInvalid=!0,this.requestRender(i.SIZE_INVALID)))},_imageData:null,_updateImageData:function(){if(null===this._imageSource)return this._imageData=null,void(this._imageDataTC=null);var e,t,i,n,s,r;t=this._imageSource.getBoundingClientRect(),n=this.el.getBoundingClientRect(),this._imageSource instanceof HTMLVideoElement?(e=this._imageSource.videoWidth/t.width,s=this._imageSource.currentTime):(e=this._imageSource.naturalWidth/t.width,s=0),i=1.5*e,this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.drawImage(this._imageSource,(n.left-t.left)*e+n.width/2*e-n.width/2*i,(n.top-t.top)*e+n.height/2*e-n.height/2*i,n.width*i,n.height*i,0,0,this.el.width,this.el.height),r=this._ctx.getImageData(0,0,this.el.width,this.el.height),this._ctx.clearRect(0,0,this.el.width,this.el.height),this._ctx.restore(),this._color="black",r=o(r,1.1),r=a(r,30),this._imageData=r,this._imageDataTC=s},redraw:function(e,t,i){this._clearCanvas(),"waiting"===this._symbolName?0===t.getTargetValue("_arc")&&t.valueTo("_arc",1,0*u,l).updateValue("_arc"):1===t.getTargetValue("_arc")&&t.valueTo("_arc",0,0*u,c).updateValue("_arc");var n=t.getRenderedValue("_arc");0<n&&!t.paused&&t.isAtTarget("_loop")&&t.valueTo("_loop",0,0).valueTo("_loop",1,2*u).updateValue("_loop");var s=t.getRenderedValue("_loop");if(0<n){var r=n*(2*(s<.5?s%.5:.5-s%.5))*.25+.125*n+1e-4,a=s+1.833333;e.beginPath(),e.arc(0,0,this._radius,(1-r+a)*h,(r+a)*h,!1),e.stroke()}switch(this._symbolName){case"replay":case"ended":case"play":this.drawPlay(e,this._side),e.fill();break;case"pause":this.drawPause(e,this._side),e.fill();break;case"waiting":switch(this._lastSymbolName){case"replay":case"ended":case"play":this.drawPlay(e,(1-n)*this._side),e.fill();break;case"pause":this.drawPause(e,(1-n)*this._side),e.fill()}}},drawPlay:function(e,t){var i=(1-Math.SQRT1_2)*t;e.beginPath(),e.moveTo(i+t,0),e.lineTo(i-t,-t),e.lineTo(i-t,t),e.closePath()},drawPause:function(e,t){var i=.75*t,n=2*t;e.beginPath(),e.rect(-t,-t,i,n),e.rect(t-i,-t,i,n),e.closePath()},drawLabel:function(e){var t=this._ctx.measureText(e).width;this._ctx.fillText(e,-.5*t,this._baselineShift,t)}},{PLAY:"playing",PAUSE:"paused",WAITING:"waiting",ENDED:"ended"})}).call(this,e("underscore"))},{"app/control/Globals":40,"app/view/base/CanvasView":63,color:"color",underscore:"underscore","utils/canvas/CanvasHelper":114,"utils/canvas/bitmap/desaturate":116,"utils/canvas/bitmap/getAverageRGB":117,"utils/canvas/bitmap/multiply":119,"utils/canvas/bitmap/stackBlurRGB":121,"utils/ease/fn/easeInQuad":124,"utils/ease/fn/easeOutQuad":125}],80:[function(e,t,i){var n=e("app/view/base/View"),s=e("backbone.babysitter"),r=e("app/view/render/DefaultSelectableRenderer"),a=e("app/view/render/ClickableRenderer"),o=n.extend({cidPrefix:"selectableList",tagName:"ul",className:"list selectable",renderer:r,initialize:function(e){this._enabled=!0,this._childrenInvalid=!0,e.renderer&&(this.renderer=e.renderer),this.showEmpty=!!e.showEmpty,this.itemViews=new s,this.listenTo(this.collection,"add remove reset",this._onCollectionChange)},remove:function(){return this.removeChildren(),n.prototype.remove.apply(this,arguments),this},_onCollectionChange:function(e){this._childrenInvalid=!0,this.render()},render:function(){return this._childrenInvalid&&(this._childrenInvalid=!1,this.createChildren()),this},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this.el.classList.toggle("disabled",!this._enabled))},createChildren:function(){var n,s;this.removeChildren(),this.el.innerHTML="",this.collection.length&&(n=document.createDocumentFragment(),this.showEmpty&&(s=this.createEmptyView(),n.appendChild(s.render().el)),this.collection.each(function(e,t,i){s=this.createItemView(e,t),n.appendChild(s.render().el)},this),this.el.appendChild(n))},createItemView:function(e,t){var i=new this.renderer({model:e});return this.itemViews.add(i),this.listenTo(i,"renderer:click",this.onItemViewClick),i},removeChildren:function(){this.itemViews.each(this.removeItemView,this)},removeItemView:function(e){return this.stopListening(e),this.itemViews.remove(e),e.remove(),e},onItemViewClick:function(e){this.collection.selected!==e&&this._enabled&&this.trigger("view:select:one",e)},createEmptyView:function(){var e=new o.EmptyRenderer({model:this.collection});return this.itemViews.add(e),this.listenTo(e,"renderer:click",function(){this._enabled&&this.trigger("view:select:none")}),e}},{EmptyRenderer:a.extend({tagName:"li",className:"list-item empty-item",initialize:function(e){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML='<a href="#clear"><b> </b></a>',this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",-1===this.model.selectedIndex)}})});t.exports=o},{"app/view/base/View":67,"app/view/render/ClickableRenderer":91,"app/view/render/DefaultSelectableRenderer":93,"backbone.babysitter":"backbone.babysitter"}],81:[function(t,i,e){(function(u){var e=t("color"),o=t("app/control/Globals"),l=t("app/model/collection/BundleCollection");function d(e,t,i){var n="";for(var s in i)n+=s+":"+i[s]+";";e.insertRule(t+"{"+n+"}",e.cssRules.length)}function p(e,t){return e+" "+t+", "+e+t}var f=["color","background","background-color"];function c(e,t,i,n,s,r,a){var o,l,c,h;(o=u.pick(i,f))["-webkit-font-smoothing"]=a?"antialiased":"auto",d(e,t,o),(o={}).color=r.rgbString(),d(e,t+" a",o),d(e,t+" .color-ln",o),(o={}).color=n.clone().mix(s,.5).rgbString(),o["border-color"]=n.clone().mix(s,.7).rgbString(),d(e,t+" .color-fg05",o),c=n.rgbString(),h=s.rgbString(),l=t+" .color-reverse",d(e,t+" .color-fg",o={color:c}),d(e,t+" .color-bg",o={"background-color":h}),o={color:h},d(e,p(l,".color-fg"),o),o={"background-color":c},d(e,p(l,".color-bg"),o),d(e,t+" .color-stroke",o={stroke:c}),d(e,t+" .color-fill",o={fill:h}),o={stroke:h},d(e,p(l,".color-stroke"),o),o={fill:c},d(e,p(l,".color-fill"),o)}var h=["box-shadow","border","border-radius"];function g(e,t,i,n,s,r,a){var o=u.pick(i,h);d(e,t+" .media-item .content",o),(o={})["background-color"]=s.clone().mix(n,.95).rgbString(),d(e,t+" .media-item .color-bg09",o),(o={})["-webkit-font-smoothing"]=a?"auto":"antialiased",o.color=s.rgbString(),o["background-color"]=s.clone().mix(n,.95).rgbString(),"border-radius"in i&&(o["border-radius"]=i["border-radius"]),d(e,t+" .media-item .placeholder",o),(o={})["text-decoration-color"]=n.clone().mix(s,.3).rgbString(),d(e,t+" .empty-item A",o)}i.exports=function(){var t,i,n,s,r;t=o.DEFAULT_COLORS,i=new e(o.DEFAULT_COLORS.color),n=new e(o.DEFAULT_COLORS["background-color"]),s=new e(o.DEFAULT_COLORS["link-color"]),r=i.luminosity()>n.luminosity();var a=document.createElement("style");a.id="colors",a.type="text/css",document.head.appendChild(a),c(a.sheet,".app",t,i,n,s,r),g(a.sheet,".carousel",t,i,n,0,r),l.each(function(e){t=e.attrs(),i=e.colors.fgColor,n=e.colors.bgColor,s=e.colors.lnColor,r=e.colors.hasDarkBg,c(a.sheet,".app."+e.get("domid"),t,i,n,s,r),g(a.sheet,".carousel."+e.get("domid"),t,i,n,0,r)})}}).call(this,t("underscore"))},{"app/control/Globals":40,"app/model/collection/BundleCollection":49,color:"color",underscore:"underscore"}],82:[function(e,t,i){window.XMLHttpRequest&&window.URL&&window.Blob?t.exports=function(r,a){return new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType="blob";var s=function(e){var t=new Error((0<e.target.status?"http_"+n.statusText.replace(/\s/g,"_"):e.type+"_event").toUpperCase());return t.infoCode=e.target.status,t.infoSrc=r,t.logEvent=e,t.logMessage="_loadImageAsObjectURL::"+e.type+" [reject]",t};a&&(n.onprogress=function(e){a(e.loaded/e.total,n)}),n.onload=function(e){200==n.status?t(URL.createObjectURL(n.response)):i(s(e))},n.onabort=function(e){t(void 0)},n.onerror=function(e){i(s(e))},n.ontimeout=n.onerror,n.onloadend=function(e){n.onabort=n.ontimeout=n.onerror=void 0,n.onload=n.onloadend=void 0,a&&(n.onprogress=void 0)},n.send()})}:t.exports=function(e,t){return Promise.resolve(e)}},{}],83:[function(e,t,i){t.exports=function(r,a){return new Promise(function(t,i){if(r instanceof window.HTMLImageElement)if(r.complete&&(0<r.src.length||a))t(r);else{var n={load:function(e){s(),t(r)},error:function(e){var t=new Error("Loading failed ("+e.type+" event)");t.infoCode=-1,t.infoSrc=r.src,t.logEvent=e,t.logMessage="_whenImageLoads::"+e.type+" [reject]",s(),i(t)}};n.abort=n.error;var s=function(){for(var e in n)n.hasOwnProperty(e)&&r.removeEventListener(e,n[e],!1)};for(var e in n)n.hasOwnProperty(e)&&r.addEventListener(e,n[e],!1)}else i("Error: not an HTMLImageElement")})}},{}],84:[function(e,t,i){(function(a){var o=e("app/view/promise/_whenImageLoads"),l=e("app/view/promise/_loadImageAsObjectURL");t.exports=function(r){return new Promise(function(t,i){var n=r.model.get("source");if(n.has("prefetched"))r.defaultImage.src=n.get("prefetched"),o(r.defaultImage).then(function(e){t(r)});else{r.mediaState="pending";var s=n.get("original"),e=function(e,t){r.updateMediaProgress(e,s)};e=a.throttle(e,100,{leading:!0,trailing:!1}),l(s,e).then(function(e){return/^blob\:.*/.test(e)&&n.set("prefetched",e),r.defaultImage.src=e,r.defaultImage}).then(o).then(function(e){r.on("view:removed",function(){var e=n.get("prefetched");e&&/^blob\:/.test(e)&&(n.unset("prefetched",{silent:!0}),URL.revokeObjectURL(e))}),t(r)},function(e){i(e)})}})}}).call(this,e("underscore"))},{"app/view/promise/_loadImageAsObjectURL":82,"app/view/promise/_whenImageLoads":83,underscore:"underscore"}],85:[function(e,t,i){var o=e("app/view/base/ViewError"),n=e("app/view/promise/whenViewIsAttached");function s(a){return new Promise(function(e,t){var i=a.parentView;if(null===i)console.error("%s::whenScrollingEnds [%s] (sync)",a.cid,"rejected",a.attached),t(new o(a,new Error("whenScrollingEnds: view has no parent")));else if(i.scrolling){var n=function(){i.off("view:scrollend",s),i.off("view:remove",r)},s=function(){n(),e(a)},r=function(){n(),t(new o(a,new Error("whenScrollingEnds: view was removed")))};i.on("view:scrollend",s),i.on("view:remove",r)}else e(a)})}t.exports=function(e){return Promise.resolve(e).then(n).then(s)}},{"app/view/base/ViewError":68,"app/view/promise/whenViewIsAttached":88}],86:[function(e,t,i){var h=e("app/view/base/ViewError");t.exports=function(l,c){return new Promise(function(t,i){var n=l.model,s=n.collection,r=function(e){return Math.abs(s.indexOf(n)-s.selectedIndex)<=c};if(r())t(l);else{var a=function(){s.off("select:one select:none",e),l.off("view:removed",o)},e=function(e){r()&&(a(),t(l))},o=function(e){a(),i(new h(e,new Error("whenSelectionDistanceIs: view was removed")))};s.on("select:one select:none",e),l.on("view:removed",o)}})}},{"app/view/base/ViewError":68}],87:[function(e,t,i){var n=e("app/view/promise/whenSelectionDistanceIs");t.exports=function(e){return n(e,1)}},{"app/view/promise/whenSelectionDistanceIs":86}],88:[function(e,t,i){t.exports=function(i){return new Promise(function(t,e){i.attached?t(i):i.on("view:attached",function(e){t(e)})})}},{}],89:[function(e,t,i){t.exports=function(t){return new Promise(function(i,e){t.invalidated?t.once("view:render:after",function(e,t){i(e)}):i(t)})}},{}],90:[function(s,r,e){(function(e){var t=s("app/view/base/View"),i=s("utils/css/getBoxEdgeStyles"),n=t.extend({cidPrefix:"carouselRenderer",tagName:"div",className:"carousel-item",template:e.template('<div class="content sizing"><%= name %></div>'),properties:{content:{get:function(){return this._content||(this._content=this.el.querySelector(".content"))}},sizing:{get:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))}}},initialize:function(e){if(void 0!==this.model.attr("@classname"))for(var t=this.model.attr("@classname").split(" "),i=0;i<t.length;i++)this.el.classList.add(t[i]);e.parentView&&(this.parentView=e.parentView),this.metrics={},this.metrics.content={},this.createChildren(),this.setEnabled(!!e.enabled)},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},getSizingEl:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))},getContentEl:function(){return this._content||(this._content=this.el.querySelector(".content"))},measure:function(){var e=this.getSizingEl();return this.metrics=i(this.el,this.metrics),this.metrics.content=i(this.getContentEl(),this.metrics.content),e.style.maxWidth="",e.style.maxHeight="",this.metrics.content.x=e.offsetLeft+e.clientLeft,this.metrics.content.y=e.offsetTop+e.clientTop,this.metrics.content.width=e.clientWidth,this.metrics.content.height=e.clientHeight,this},render:function(){return this.measure(),this},getSelectionDistance:function(){return Math.abs(this.model.collection.indexOf(this.model)-this.model.collection.selectedIndex)}});r.exports=n}).call(this,s("underscore"))},{"app/view/base/View":67,underscore:"underscore","utils/css/getBoxEdgeStyles":123}],91:[function(e,t,i){var n=e("app/view/render/LabelRenderer").extend({cidPrefix:"clickableRenderer",events:{"click .label":function(e){e.defaultPrevented||(e.preventDefault(),this.trigger("renderer:click",this.model,e))},"click a":function(e){e.defaultPrevented||e.preventDefault()}}});t.exports=n},{"app/view/render/LabelRenderer":98}],92:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a,o=null!=t?t:e.nullContext||{},l=i.helperMissing,c="function";return'<a href="#'+e.escapeExpression(typeof(a=null!=(a=i.domid||(null!=t?t.domid:t))?a:l)===c?a.call(o,{name:"domid",hash:{},data:s}):a)+'"><span class="label">'+(null!=(r=typeof(a=null!=(a=i.name||(null!=t?t.name:t))?a:l)===c?a.call(o,{name:"name",hash:{},data:s}):a)?r:"")+"</span></a>"},useData:!0})},{"hbsfy/runtime":25}],93:[function(e,t,i){var n=e("app/view/render/ClickableRenderer").extend({tagName:"li",className:"list-item",template:e("./DefaultSelectableRenderer.hbs"),initialize:function(e){this.listenTo(this.model,"selected deselected",this._renderClassList),this._renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this._renderClassList(),this},_renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});t.exports=n},{"./DefaultSelectableRenderer.hbs":92,"app/view/render/ClickableRenderer":91}],94:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a=null!=t?t:e.nullContext||{},o=i.helperMissing,l="function",c=e.escapeExpression;return'<span class="label">'+c(typeof(r=null!=(r=i.name||(null!=t?t.name:t))?r:o)===l?r.call(a,{name:"name",hash:{},data:s}):r)+'</span><a href="#'+c(typeof(r=null!=(r=i.domid||(null!=t?t.domid:t))?r:o)===l?r.call(a,{name:"domid",hash:{},data:s}):r)+'"><b> </b></a>'},useData:!0})},{"hbsfy/runtime":25}],95:[function(e,t,i){var n=e("app/view/base/View"),s=e("./DotNavigationRenderer.hbs"),r=n.extend({cidPrefix:"dotRenderer",tagName:"li",className:"list-item",template:s,events:{click:function(e){e.defaultPrevented||(e.preventDefault(),this.trigger("renderer:click",this.model,e))},"click a":function(e){e.defaultPrevented||e.preventDefault()}},initialize:function(e){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});t.exports=r},{"./DotNavigationRenderer.hbs":94,"app/view/base/View":67}],96:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a=null!=t?t:e.nullContext||{},o=i.helperMissing,l="function",c=e.escapeExpression;return'<div class="placeholder sizing"></div>\n<img class="content media-border default" alt="'+c(typeof(r=null!=(r=i.text||(null!=t?t.text:t))?r:o)===l?r.call(a,{name:"text",hash:{},data:s}):r)+'" longdesc="#desc_m'+c(typeof(r=null!=(r=i.id||(null!=t?t.id:t))?r:o)===l?r.call(a,{name:"id",hash:{},data:s}):r)+'" />\n'},useData:!0})},{"hbsfy/runtime":25}],97:[function(e,t,i){var n=e("./MediaRenderer"),s=e("./ImageRenderer.hbs"),r=n.extend({cidPrefix:"imageRenderer",className:n.prototype.className+" image-item",template:s,initialize:function(e){n.prototype.initialize.apply(this,arguments)},createChildren:function(){n.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder")},render:function(){n.prototype.render.apply(this,arguments);var e=this.getDefaultImage();e.setAttribute("width",this.metrics.media.width),e.setAttribute("height",this.metrics.media.height);var t=this.getContentEl();return t.style.left=this.metrics.content.x+"px",t.style.top=this.metrics.content.y+"px",this},initializeAsync:function(){return n.prototype.initializeAsync.apply(this,arguments)}});t.exports=r},{"./ImageRenderer.hbs":96,"./MediaRenderer":99}],98:[function(e,t,i){var n=e("app/view/base/View").extend({cidPrefix:"labelRenderer",properties:{label:{get:function(){return this._label||(this._label=this.el.querySelector(".label"))}}}});t.exports=n},{"app/view/base/View":67}],99:[function(r,a,e){(function(e,i){var s=r("underscore.string/lpad"),t=r("app/model/item/MediaItem"),d=r("app/view/render/CarouselRenderer"),n=d.extend({cidPrefix:"mediaRenderer",className:d.prototype.className+" media-item",model:t,properties:{defaultImage:{get:function(){return this._defaultImage||(this._defaultImage=this.el.querySelector("img.default"))}},mediaState:{get:function(){return this._mediaState},set:function(e){this._setMediaState(e)}}},initialize:function(e){d.prototype.initialize.apply(this,arguments),this.metrics.media={},this.mediaState="idle",this.initializeAsync().then(this.whenInitialized).catch(this.whenInitializeError.bind(this))},initializeAsync:function(){return Promise.resolve(this).then(n.whenSelectionIsContiguous).then(n.whenScrollingEnds).then(n.whenDefaultImageLoads)},whenInitialized:function(e){return e.mediaState="ready",e.placeholder.removeAttribute("data-progress"),e},whenInitializeError:function(e){e instanceof d.ViewError||(e instanceof Error&&console.error(e.stack),this.placeholder.removeAttribute("data-progress"),this.mediaState="error")},updateMediaProgress:function(e,t){i.isNumber(e)&&this.placeholder.setAttribute("data-progress",s(Math.floor(100*e),2,"0"))},getDefaultImage:function(){return this.defaultImage},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},measure:function(){var e,t,i,n,s,r,a,o,l,c,h,u;return d.prototype.measure.apply(this,arguments),s=(u=this.metrics.content).x,r=u.y,i=u.width,n=u.height,i-=c=u.paddingLeft+u.paddingRight+u.borderLeftWidth+u.borderRightWidth,n-=h=u.paddingTop+u.paddingBottom+u.borderTopWidth+u.borderBottomWidth,e=this.model.get("source").get("w"),t=this.model.get("source").get("h"),e<i&&t<n?(l=1,a=e,o=t,this.metrics.fitDirection="both"):i/n<e/t?(l=(a=i)/e,o=Math.round(l*t),this.metrics.fitDirection="width"):(l=(o=n)/t,a=Math.round(l*e),this.metrics.fitDirection="height"),this.metrics.content.x=s,this.metrics.content.y=r,this.metrics.content.width=a+c,this.metrics.content.height=o+h,this.metrics.media.x=s+u.paddingLeft+u.borderLeftWidth,this.metrics.media.y=r+u.paddingTop+u.borderTopWidth,this.metrics.media.width=a,this.metrics.media.height=o,this.metrics.media.scale=l,this},render:function(){this.measure();var e=this.getSizingEl();return e.style.maxWidth=this.metrics.content.width+"px",e.style.maxHeight=this.metrics.content.height+"px",this.el.setAttribute("data-fit-dir",this.metrics.fitDirection),this},_mediaStateEnum:["idle","pending","ready","error"],_setMediaState:function(e){if(-1===this._mediaStateEnum.indexOf(e))throw new Error("Argument "+e+" invalid. Must be one of: "+this._mediaStateEnum.join(", "));this._mediaState!==e&&(this._mediaState&&this.el.classList.remove(this._mediaState),this.el.classList.add(e),this._mediaState=e,this.trigger("media:"+e))}},{LOG_TO_SCREEN:!0,whenSelectionDistanceIs:r("app/view/promise/whenSelectionDistanceIs"),whenSelectionIsContiguous:r("app/view/promise/whenSelectionIsContiguous"),whenScrollingEnds:r("app/view/promise/whenScrollingEnds"),whenDefaultImageLoads:r("app/view/promise/whenDefaultImageLoads")});e&&(n=function(i){if(!i.LOG_TO_SCREEN)return i;var n=r("color");return i.extend({initialize:function(){var e=new n(this.model.attr("color")),t=new n(this.model.attr("background-color"));this.__logColors={normal:e.clone().mix(t,.75).hslString(),ignored:e.clone().mix(t,.25).hslString(),error:"brown",abort:"orange"},this.__logFrameStyle="1px dashed "+e.clone().mix(t,.5).hslString(),this.__logStartTime=Date.now(),this.__rafId=-1,this.__onFrame=this.__onFrame.bind(this),i.prototype.initialize.apply(this,arguments)},initializeAsync:function(){return i.prototype.initializeAsync.apply(this,arguments).catch(function(e){return e instanceof i.ViewError||this.__logMessage(e.message,e.name,this.__logColors.error),Promise.reject(e)}.bind(this))},createChildren:function(){var e=i.prototype.createChildren.apply(this,arguments);return this.__logElement=document.createElement("div"),this.__logElement.className="debug-log",this.__logHeaderEl=document.createElement("pre"),this.__logHeaderEl.className="log-header color-bg",this.__logHeaderEl.textContent=this.__getHeaderText(),this.__logElement.appendChild(this.__logHeaderEl),this.el.insertBefore(this.__logElement,this.el.firstElementChild),e},render:function(){var e=i.prototype.render.apply(this,arguments);return this.__logElement.style.top=this.metrics.content.height+this.metrics.content.y+"px",this.__logElement.style.left=this.metrics.content.x+"px",this.__logElement.style.width=this.metrics.content.width+"px",this.__logElement.scrollTop=this.__logElement.scrollHeight,e},whenInitializeError:function(e){e instanceof d.ViewError||(e instanceof Error&&console.warn(e.stack),this.placeholder.removeAttribute("data-progress"),this.mediaState="error")},__logMessage:function(e,t,i){var n=document.createElement("pre");t||(t="-"),n.textContent=this.__getTStamp()+" "+e,n.setAttribute("data-logtype",t),n.style.color=i||this.__logColors[t]||this.__logColors.normal,this.__logElement.appendChild(n),this.__logElement.scrollTop=this.__logElement.scrollHeight,-1==this.__rafId&&(this.__rafId=this.requestAnimationFrame(this.__onFrame))},__onFrame:function(e){this.__rafId=-1,this.__logElement.lastElementChild.style.borderBottom=this.__logFrameStyle,this.__logElement.lastElementChild.style.paddingBottom="2px",this.__logElement.lastElementChild.style.marginBottom="2px"},__getTStamp:function(){return s(((Date.now()-this.__logStartTime)/1e3).toFixed(3),8,"0")},__getHeaderText:function(){return""}})}(n)),a.exports=n}).call(this,!1,r("underscore"))},{"app/model/item/MediaItem":56,"app/view/promise/whenDefaultImageLoads":84,"app/view/promise/whenScrollingEnds":85,"app/view/promise/whenSelectionDistanceIs":86,"app/view/promise/whenSelectionIsContiguous":87,"app/view/render/CarouselRenderer":90,color:"color",underscore:"underscore","underscore.string/lpad":33}],100:[function(u,d,e){(function(t,e,i){var n,s,r=u("app/view/render/MediaRenderer"),a=u("utils/prefixedProperty"),o=u("utils/prefixedEvent"),l=a("visibilityState",document),c=o("visibilitychange",document,"hidden"),h=r.extend({cidPrefix:"playableRenderer",className:r.prototype.className+" playable-item",properties:{mediaPaused:{get:function(){return this._isMediaPaused()}},mediaWaiting:{get:function(){return this._isMediaWaiting()}},playbackRequested:{get:function(){return this._playbackRequested},set:function(e){this._setPlaybackRequested(e)}},overlay:{get:function(){return this._overlay||(this._overlay=this.el.querySelector(".overlay"))}},playToggleHitarea:{get:function(){return this._playToggleHitarea||(this._playToggleHitarea=this.el.querySelector(".play-toggle-hitarea"))}}},initialize:function(e){this._playToggleSymbol={},i.bindAll(this,"_onPlaybackToggle","_onVisibilityChange"),r.prototype.initialize.apply(this,arguments),this._setPlaybackRequested(this._playbackRequested)},setEnabled:function(e){r.prototype.setEnabled.apply(this,arguments),this._validatePlayback()},listenToSelection:function(){if("initialized"!=this._viewPhase)throw new Error(this.cid+"::listenToSelection called while "+this._viewPhase);this.listenTo(this.model,"selected",this._onModelSelected),this.listenTo(this.model,"deselected",this._onModelDeselected),this.model.selected&&this._onModelSelected()},_onModelSelected:function(){this.cid,this._playbackRequested,this._toggleEvent,this.listenTo(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,this.parentView,null),this._playToggleSymbol.paused=!this.enabled,this._listenWhileSelected(),this._validatePlayback()},_onModelDeselected:function(){this.cid,this._playbackRequested,this._toggleEvent,this.stopListening(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,null,this.parentView),this._playToggleSymbol.paused=!0,this._stopListeningWhileSelected(),this._validatePlayback(!1)},_onParentChange:function(e,t,i){i&&this.stopListening(i,"view:scrollstart view:scrollend",this._onScrollChange),t&&this.listenTo(t,"view:scrollstart view:scrollend",this._onScrollChange)},_onScrollChange:function(){if(null===this.parentView)throw new Error(this.cid+"::_onScrollChange parentView is null");this._validatePlayback()},_onVisibilityChange:function(e){this._validatePlayback()},_listenWhileSelected:function(){this.listenTo(this,"view:removed",this._stopListeningWhileSelected),document.addEventListener(c,this._onVisibilityChange,!1),this.playToggleHitarea.addEventListener(this._toggleEvent,this._onPlaybackToggle,!1)},_stopListeningWhileSelected:function(){this.stopListening(this,"view:removed",this._stopListeningWhileSelected),document.removeEventListener(c,this._onVisibilityChange,!1),this.playToggleHitarea.removeEventListener(this._toggleEvent,this._onPlaybackToggle,!1)},_toggleEvent:r.CLICK_EVENT,_onPlaybackToggle:function(e){!this.enabled||e.defaultPrevented||e.button||(e.preventDefault(),this.playbackRequested=!this.playbackRequested)},_playbackCount:0,_playbackRequested:null,_setPlaybackRequested:function(e){this._playbackRequested=e;var t=this.content.classList;t.toggle("playing",!0===e),t.toggle("paused",!1===e),t.toggle("requested",!0===e||!1===e),this._renderPlaybackState(),this._validatePlayback()},_togglePlayback:function(e){t&&this.__logMessage(["args:",Array.prototype.join.apply(arguments),"paused:",this._isMediaPaused()?"pause":"play","media-state:",this.mediaState].join(" "),"toggle-playback"),i.isBoolean(e)&&e!==this._isMediaPaused()||((e=this._isMediaPaused())?this._playMedia():this._pauseMedia())},_canResumePlayback:function(){return!(!(this.enabled&&this.model.selected&&this.playbackRequested&&"ready"===this.mediaState&&this.attached&&null!==this.parentView)||this.parentView.scrolling||"hidden"==document[l])},_validatePlayback:function(e){0===arguments.length||e?this._togglePlayback(this._canResumePlayback()):this._togglePlayback(!1),this._playToggleSymbol.paused=!(this.attached&&this.enabled&&this.model.selected)},_renderPlaybackState:function(){if(this.attached){this.progressMeter&&(this.progressMeter.stalled=this._isMediaWaiting());var e=!this.parentView.scrolling&&this._isMediaWaiting();this.playbackRequested?e?this._setPlayToggleSymbol("waiting"):this._setPlayToggleSymbol("play"):this.content.classList.contains("started")?this._setPlayToggleSymbol("pause"):this._setPlayToggleSymbol("play");var t=this.content.classList;t.toggle("playing",this.playbackRequested),t.toggle("paused",!this.playbackRequested),t.toggle("waiting",e)}},_setPlayToggleSymbol:function(e){this._playToggleSymbol.symbolName=e,"ready"===this.mediaState&&this._playToggleSymbol.renderNow()},_isWaiting:!1,_isMediaWaiting:function(){return this._isWaiting},_toggleWaiting:function(e){0===arguments.length&&(e=!this._isWaiting),this._isWaiting!==e&&(this._isWaiting=e,this._renderPlaybackState())},_isMediaPaused:function(){return console.warn("%s::_isMediaPaused Not implemented",this.cid),!0},_playMedia:function(){console.warn("%s::_playMedia Not implemented",this.cid)},_pauseMedia:function(){console.warn("%s::_pauseMedia Not implemented",this.cid)},updateOverlay:function(e,t,i){}});e&&(n=h,s=u("underscore.string/dasherize"),h=n.extend({initialize:function(){var e=n.prototype.initialize.apply(this,arguments);return this._gaEventSuffix=this.playbackRequested?"-autoplay":"",e},_onPlaybackToggle:function(e){var t=n.prototype._onPlaybackToggle.apply(this,arguments);return window.ga?window.ga("send",{hitType:"event",eventCategory:s(this.cidPrefix),eventAction:(this.playbackRequested?"play":"pause")+this._gaEventSuffix,eventLabel:this.model.get("text")}):console.warn("%s::_onPlaybackToggle window.ga is %s",this.cid,window.ga),t}})),d.exports=h}).call(this,!1,!0,u("underscore"))},{"app/view/render/MediaRenderer":99,underscore:"underscore","underscore.string/dasherize":28,"utils/prefixedEvent":129,"utils/prefixedProperty":130}],101:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a=null!=t?t:e.nullContext||{},o=i.helperMissing,l="function",c=e.escapeExpression;return'<div class="placeholder sizing"></div>\n<div class="content">\n\t<div class="media-border content-size"></div>\n\t<div class="controls content-size">\n\t\t<canvas class="progress-meter"></canvas>\n\t</div>\n\t<div class="sequence media-size">\n\t\t<img class="sequence-step current default" alt="'+c(typeof(r=null!=(r=i.text||(null!=t?t.text:t))?r:o)===l?r.call(a,{name:"text",hash:{},data:s}):r)+'" longdesc="#desc_m'+c(typeof(r=null!=(r=i.id||(null!=t?t.id:t))?r:o)===l?r.call(a,{name:"id",hash:{},data:s}):r)+'" />\n\t</div>\n\t<div class="overlay media-size play-toggle-hitarea">\n\t\t<canvas class="play-toggle"/>\n\t</div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":25}],102:[function(_,y,e){(function(e,r){var i=_("backbone.babysitter"),t=_("app/view/base/View"),l=_("app/view/render/PlayableRenderer"),n=_("app/control/Globals"),s=_("app/view/component/CanvasProgressMeter"),a=_("app/view/component/PlayToggleSymbol"),o=_("utils/Timer"),c=_("app/view/promise/_whenImageLoads"),h=_("app/view/promise/_loadImageAsObjectURL"),u=_("../template/ErrorBlock.hbs"),d=2*n.TRANSITION_DURATION+n.TRANSITION_DELAY_INTERVAL,p=6*n.TRANSITION_DURATION+n.TRANSITION_DELAY_INTERVAL,f=t.extend({cidPrefix:"sequenceStepRenderer",className:"sequence-step",tagName:"img",properties:{ready:{get:function(){return this._ready}}},initialize:function(e){!this.el.hasAttribute("alt")&&this.el.setAttribute("alt",this.model.get("src")),this.model.has("prefetched")?this._renderPrefetched():this.listenTo(this.model,"change:prefetched",this._renderPrefetched),this.listenTo(this.model,"selected deselected",this._renderSelection),this._renderSelection()},_renderSelection:function(){this.el.classList.toggle("current",!!this.model.selected)},_renderPrefetched:function(){var e=this.model.get("prefetched");e!==this.el.src&&(this.el.src=e),c(this.el).then(function(e){this.requestAnimationFrame(function(e){this._setReady(!0)})}.bind(this),function(e){throw e instanceof Error||(e=new Error("cannot load prefetched url")),e}.bind(this))},_ready:!1,_setReady:function(e){this._ready!==e&&(this._ready=!!e,this.trigger("renderer:ready",this))},render:function(){return this.cid,this}}),g=t.extend({className:"sequence-step error",cidPrefix:"sourceErrorRenderer",template:u,ready:!0,initialize:function(e){this.listenTo(this.model,"selected deselected",function(){this.el.classList.toggle("current",!!this.model.selected)})},render:function(){return this.el.classList.toggle("current",!!this.model.selected),this.el.innerHTML=this.template(this.model.get("error")),this}}),m=f,v=l.extend({cidPrefix:"sequenceRenderer",className:l.prototype.className+" sequence-item",template:_("./SequenceRenderer.hbs"),initialize:function(e){this.sources=this.model.get("sources"),l.prototype.initialize.apply(this,arguments)},createChildren:function(){l.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.sequence=this.content.querySelector(".sequence");var e,t=this.model.attrs();e=r.pick(t,"box-shadow","border","border-radius"),r.extend(this.content.querySelector(".media-border").style,e),e=r.pick(t,"border-radius"),r.extend(this.sequence.style,e),r.extend(this.placeholder.style,e),this.sources.select(this.model.get("source")),this.itemViews=new i,this.itemViews.add(new m({el:this.getDefaultImage(),model:this.model.get("source")}))},render:function(){var e,t,i,n,s;l.prototype.render.apply(this,arguments);var r,a,o=this.content;for(n=this.metrics.media.width+"px",s=this.metrics.media.height+"px",e=this.el.querySelectorAll(".media-size"),i=0;i<e.length;i++)(t=e.item(i)).style.width=n,t.style.height=s;return o.style.width=n,o.style.height=s,r=this.metrics.content.x+"px",a=this.metrics.content.y+"px",o.style.left=r,o.style.top=a,(t=this.el.querySelector(".controls")).style.width=this.metrics.content.width+"px",t.style.height=this.metrics.content.height+"px",this},initializePlayable:function(){this.content.classList.add("started"),l.whenSelectionDistanceIs(this,0).then(this._preloadAllItems,function(e){return e instanceof t.ViewError?void 0:e}),this._sequenceInterval=Math.max(parseInt(this.model.attr("@sequence-interval")),d)||p,this.timer=new o,this.listenTo(this,"view:removed",function(){this.timer.stop(),this.stopListening(this.timer)}),this.listenTo(this.timer,{start:this._onTimerStart,resume:this._onTimerResume,pause:this._onTimerPause,end:this._onTimerEnd}),this._playToggleSymbol=new a(r.extend({el:this.el.querySelector(".play-toggle")},this._playToggleSymbol||{})),this._sourceProgressByIdx=this.sources.map(function(){return 0}),this._sourceProgressByIdx[0]=1,this.progressMeter=new s({el:this.el.querySelector(".progress-meter"),color:this.model.attr("color"),values:{available:this._sourceProgressByIdx.concat()},maxValues:{amount:this.sources.length,available:this.sources.length},labelFn:function(){return!1===this.playbackRequested?n.PAUSE_CHAR:this.sources.selectedIndex+1+"/"+this.sources.length}.bind(this)})},initializeAsync:function(){return l.prototype.initializeAsync.apply(this,arguments).then(function(e){return e.whenAttached()}).then(function(e){return e.initializePlayable(),e.listenToSelection(),e})},whenInitialized:function(e){var t=l.prototype.whenInitialized.apply(this,arguments);return e._validatePlayback(),t},_preloadAllItems:function(e){return e.once("view:remove",function(){var s={silent:!0};e.sources.forEach(function(e,t,i){var n=e.get("prefetched");n&&/^blob\:/.test(n)&&(e.set("progress",0,s),e.unset("prefetched",s),URL.revokeObjectURL(n))})}),e.sources.reduce(function(e,n,s,t){return e.then(function(i){if("disposed"===i._viewPhase)return i;if(n.has("prefetched"))return i._updateItemProgress(1,s),i;var t=function(e,t){i._updateItemProgress(t,s)};return i.listenTo(n,"change:progress",t),i.once("view:remove",function(e){e.stopListening(n,"change:progress",t)}),h(n.get("original"),function(e,t){"disposed"===i._viewPhase?t.abort():n.set("progress",e)}).then(function(e){return n.set({progress:e?1:0,prefetched:e}),i},function(e){return n.set({progress:0,error:e}),i})})},Promise.resolve(e))},_updateItemProgress:function(e,t){this._sourceProgressByIdx[t]=e,this.progressMeter&&this.progressMeter.valueTo("available",this._sourceProgressByIdx,300)},_playbackRequested:!0,_paused:!0,_isMediaPaused:function(){return this._paused},_playMedia:function(){this._paused&&(this._paused=!1,this._isMediaWaiting()||(this.timer.status===o.PAUSED?this.timer.start():this.timer.start(this._sequenceInterval)))},_pauseMedia:function(){this._paused||(this._paused=!0,this.timer.status===o.STARTED&&this.timer.pause())},_onTimerStart:function(e){var t;t=-1===this.sources.selectedIndex?this.model.get("source"):this.sources.followingOrFirst(),this.sources.select(t),this.progressMeter.valueTo("amount",this.sources.selectedIndex+1,e),this.content.classList.toggle("playback-error",t.has("error"))},_onTimerResume:function(e){this.progressMeter.valueTo("amount",this.sources.selectedIndex+1,e)},_onTimerPause:function(e){this.progressMeter.valueTo("amount",this.progressMeter.getRenderedValue("amount"),0)},_onTimerEnd:function(){var e,t,i=function(e){return this.setImmediate(function(){this.mediaPaused||this.timer.start(this._sequenceInterval)}),e}.bind(this);e=this.sources.followingOrFirst(),t=this._getItemView(e),e.has("error")?i():e.has("prefetched")?c(t.el).then(i,i):(this._toggleWaiting(!0),this.listenToOnce(e,"change:prefetched change:error",function(e){this._toggleWaiting(!1),c(t.el).then(i,i)}))},_getItemView:function(e){var t=this.itemViews.findByModel(e);return t||(t=new(e.has("error")?g:m)({model:e}),this.itemViews.add(t),this.sequence.appendChild(t.render().el)),t}});e&&(v=function(i){if(!i.LOG_TO_SCREEN)return i;var n=_("underscore.string/lpad"),s=_("underscore.string/capitalize");return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.__logColors=r.extend({"media:play":"darkred","media:pause":"darkred","timer:start":"darkgreen","timer:end":"darkgreen","timer:resume":"green","timer:pause":"green","load:progress":"blue","load:complete":"darkblue"},this.__logColors)},__getHeaderText:function(){return["tstamp","index","duration","playback","media","timer","next"].map(function(e,t,i){return n(s(e),8).substr(0,8).toUpperCase()}).join(" ")},__logTimerEvent:function(e,t){var i=[this.sources.selectedIndex,(.001*this.timer.getDuration()).toFixed(3),this.playbackRequested?">>":"::",this.mediaPaused?"paused":this.mediaWaiting?"waiting":"playing",this.timer.getStatus(),this.sources.followingOrFirst().has("prefetched")?"ready":"pending"].map(function(e,t,i){return n(e,8).substr(0,8).toUpperCase()});t&&i.push(t),i=i.join(" "),this.__logMessage(i,e)},_playMedia:function(){this.__logTimerEvent("media:play"),i.prototype._playMedia.apply(this,arguments)},_pauseMedia:function(){this.__logTimerEvent("media:pause"),i.prototype._pauseMedia.apply(this,arguments)},_onTimerStart:function(){this.__logTimerEvent("timer:start"),i.prototype._onTimerStart.apply(this,arguments)},_onTimerResume:function(){this.__logTimerEvent("timer:resume"),i.prototype._onTimerResume.apply(this,arguments)},_onTimerPause:function(){this.__logTimerEvent("timer:pause"),i.prototype._onTimerPause.apply(this,arguments)},_onTimerEnd:function(){this.__logTimerEvent("timer:end"),i.prototype._onTimerEnd.apply(this,arguments)},_updateItemProgress:function(e,t){1==e?this.__logTimerEvent("load:complete","item "+t+": complete"):t===this.sources.selectedIndex&&this.__logTimerEvent("load:progress","item "+t+": "+e),i.prototype._updateItemProgress.apply(this,arguments)},_preloadAllItems:function(e){e.__logMessage(e.cid+"::_preloadAllItems","load:start"),i.prototype._preloadAllItems.apply(e,arguments)}})}(v)),y.exports=v}).call(this,!1,_("underscore"))},{"../template/ErrorBlock.hbs":107,"./SequenceRenderer.hbs":101,"app/control/Globals":40,"app/view/base/View":67,"app/view/component/CanvasProgressMeter":72,"app/view/component/PlayToggleSymbol":79,"app/view/promise/_loadImageAsObjectURL":82,"app/view/promise/_whenImageLoads":83,"app/view/render/PlayableRenderer":100,"backbone.babysitter":"backbone.babysitter",underscore:"underscore","underscore.string/capitalize":27,"underscore.string/lpad":33,"utils/Timer":110}],103:[function(e,t,i){var n=e("hbsfy/runtime"),s=e("../template/svg/FullscreenSymbol.hbs");n.registerPartial("../template/svg/FullscreenSymbol.hbs",s),t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a;return'<div class="placeholder sizing"></div>\n<div class="content media-border">\n\t<div class="controls content-size">\n\t\t<canvas class="progress-meter"></canvas>\n\t</div>\n\t<div class="crop-box media-size">\n\t\t<video width="240" height="180" muted playsinline></video>\n\t\t<img class="poster default" alt="'+e.escapeExpression("function"==typeof(a=null!=(a=i.text||(null!=t?t.text:t))?a:i.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:s}):a)+'" width="240" height="180" />\n\t</div>\n\t<div class="overlay media-size play-toggle-hitarea">\n\t\t\t<canvas class="play-toggle"></canvas>\n\t\t<a class="fullscreen-toggle" href="javascript:(void 0)">\n'+(null!=(r=e.invokePartial(n["../template/svg/FullscreenSymbol.hbs"],t,{name:"../template/svg/FullscreenSymbol.hbs",data:s,indent:"\t\t\t",helpers:i,partials:n,decorators:e.decorators}))?r:"")+"\t\t</a>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0})},{"../template/svg/FullscreenSymbol.hbs":109,"hbsfy/runtime":25}],104:[function(w,l,e){(function(e,b){var i=w("app/control/Globals"),h=w("app/view/render/PlayableRenderer"),t=w("app/view/component/CanvasProgressMeter"),n=w("app/view/component/PlayToggleSymbol"),s=w("utils/prefixedEvent")("fullscreenchange",document),r=function(e){return isNaN(e)?"":3600<=e?(e/3600|0)+"H":60<=e?(e/60|0)+"M":(0|e)+"S"},c=i.VIDEO_CROP_PX,a=1200,o=h.extend({cidPrefix:"videoRenderer",className:h.prototype.className+" video-item",template:w("./VideoRenderer.hbs"),properties:{fullscreenToggle:{get:function(){return this._fullscreenToggle||(this._fullscreenToggle=this.el.querySelector(".fullscreen-toggle"))}}},initialize:function(e){h.prototype.initialize.apply(this,arguments),b.bindAll(this,"_updatePlaybackState","_updateCurrTimeValue","_updateBufferedValue","_onMediaError","_onMediaEnded","_onFullscreenChange","_onFullscreenToggle"),b.bindAll(this,"_playbackTimeoutFn_playing","_playbackTimeoutFn_waiting")},createChildren:function(){h.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.video=this.content.querySelector("video"),this.video.setAttribute("preload","none"),this.video.controlList&&this.video.controlList.add("nodownload"),this.video.loop=void 0!==this.model.attr("@video-loop"),this.video.src=this.findPlayableSource(this.video)},measure:function(){h.prototype.measure.apply(this,arguments),this.metrics.media.height+=2*c,this.metrics.content.height+=2*c},render:function(){var e,t,i,n,s;h.prototype.render.apply(this,arguments);var r,a,o=this.defaultImage,l=this.content;for(n=this.metrics.media.width+"px",s=this.metrics.media.height+"px",e=this.el.querySelectorAll(".media-size"),i=0;i<e.length;i++)(t=e.item(i)).style.width=n,t.style.height=s;return l.style.width=n,l.style.height=this.metrics.media.height+c+"px",r=this.metrics.content.x+"px",a=this.metrics.content.y+"px",l.style.left=r,l.style.top=a,(t=this.el.querySelector(".controls")).style.width=this.metrics.content.width+"px",t.style.height=this.metrics.content.height+"px",this.video.setAttribute("width",this.metrics.media.width),this.video.setAttribute("height",this.metrics.media.height-2*c),o.setAttribute("width",this.metrics.media.width),o.setAttribute("height",this.metrics.media.height-2*c),this},initializeAsync:function(){return Promise.resolve(this).then(h.whenSelectionIsContiguous).then(h.whenScrollingEnds).then(h.whenViewIsAttached).then(function(e){return Promise.all([h.whenDefaultImageLoads(e),e.whenVideoHasMetadata(e)]).then(function(){return e})}).then(function(e){return e.initializePlayable(),e.listenToSelection(),e})},initializePlayable:function(){h.whenSelectionDistanceIs(this,0).then(function(e){return e.video.setAttribute("preload","auto"),e.video.preload="auto",e}).catch(function(e){e instanceof h.ViewError?(e.view.cid,e.message):console.warn(e)}),this._playToggleSymbol=new n(b.extend({el:this.el.querySelector(".play-toggle")},this._playToggleSymbol||{})),this.progressMeter=new t({el:this.el.querySelector(".progress-meter"),color:this.model.attr("color"),maxValues:{amount:this.video.duration,available:this.video.duration},labelFn:function(e,t){return!this._started||this.video.ended||isNaN(e)?r(t):this.playbackRequested?r(t-e):i.PAUSE_CHAR}.bind(this)}),this._renderPlaybackState(),this.addMediaListeners()},whenVideoHasMetadata:function(c){return new Promise(function(t,i){var n=c.video,s={loadedmetadata:function(e){e&&o(),t(c)},abort:function(e){e&&o(),i(new h.ViewError(c,new Error("whenVideoHasMetadata: view was removed")))},error:function(e){var t;e&&o(),n.error?(t=new Error(b.invert(MediaError)[n.error.code])).infoCode=n.error.code:t=new Error("Unspecified error"),t.infoSrc=n.src,t.logMessage="whenVideoHasMetadata: "+t.name+" "+t.infoSrc,t.logEvent=e,i(t)}};if(n.error)s.error();else if(n.readyState>=HTMLMediaElement.HAVE_METADATA)s.loadedmetadata();else{var e=n.querySelectorAll("source"),r=0<e.length?e.item(e.length-1):n,a=r===n,o=function(){for(var e in r.removeEventListener("error",s.error,a),s)"error"!==e&&s.hasOwnProperty(e)&&n.removeEventListener(e,s[e],!1)};for(var l in r.addEventListener("error",s.error,a),s)"error"!==l&&s.hasOwnProperty(l)&&n.addEventListener(l,s[l],!1);n.setAttribute("preload","metadata"),n.preload="metadata"}})},findPlayableSource:function(t){var e=this.model.get("sources").find(function(e){return/^video\//.test(e.get("mime"))&&""!=t.canPlayType(e.get("mime"))});return e?e.get("original"):""},_playbackRequested:!1,_isMediaPaused:function(){return this.video.paused},_playMedia:function(){this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&0==this.video.seekable.length?(console.warn(this.cid,"WTF! got video data, but cannot seek, calling load()"),b.isFunction(this.video.load)&&this.video.load()):this.video.ended&&(this.video.currentTime=this.video.seekable.start(0)),this.video.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA?(this.video.networkState==HTMLMediaElement.NETWORK_IDLE&&this.video.load(),this._toggleWaiting(!0)):this.video.play()},_pauseMedia:function(){this.video.pause()},_listenWhileSelected:function(){h.prototype._listenWhileSelected.apply(this,arguments),this.fullscreenToggle.addEventListener(this._toggleEvent,this._onFullscreenToggle,!1)},_stopListeningWhileSelected:function(){h.prototype._stopListeningWhileSelected.apply(this,arguments),this.fullscreenToggle.removeEventListener(this._toggleEvent,this._onFullscreenToggle,!1)},addMediaListeners:function(){this.addListeners(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.addListeners(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.addListeners(this.video,this.updateCurrTimeEvents,this._updateCurrTimeValue),this.video.addEventListener("ended",this._onMediaEnded,!1),this.video.addEventListener("error",this._onMediaError,!0),this.on("view:removed",this.removeMediaListeners,this)},removeMediaListeners:function(){this.off("view:removed",this.removeMediaListeners,this),this.removeListeners(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.removeListeners(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.removeListeners(this.video,this.updateCurrTimeEvents,this._updateCurrTimeValue),this.video.removeEventListener("ended",this._onMediaEnded,!1),this.video.removeEventListener("error",this._onMediaError,!0)},_onMediaError:function(e){this.removeMediaListeners(),this.removeSelectionListeners(),this._started=!1,this.content.classList.remove("started"),this.mediaState="error",this.playbackRequested=!1,this._exitFullscreen()},_onMediaEnded:function(e){this.playbackRequested=!1,this._exitFullscreen()},_exitFullscreen:function(){this.video.webkitDisplayingFullscreen&&this.video.webkitExitFullscreen(),document.fullscreenElement===this.video&&this.video.exitFullscreen()},updateCurrTimeEvents:"playing waiting pause timeupdate seeked",_updateCurrTimeValue:function(e){this.video.played.length&&this.content.classList.add("started"),this.progressMeter&&this.progressMeter.valueTo("amount",this.video.currentTime,0)},updatePlaybackEvents:"timeupdate playing pause waiting canplaythrough seeked",_isPlaybackWaiting:!1,_playbackStartTS:-1,_playbackStartTC:-1,_updatePlaybackState:function(e){if(window.clearTimeout(this._playbackTimeoutID),this._playbackTimeoutID=-1,this.playbackRequested)switch("timeupdate"!==e.type&&(this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime),e.type){case"timeupdate":100<Math.abs(e.timeStamp-this._playbackStartTS-1e3*(this.video.currentTime-this._playbackStartTC))?(this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_waiting,a),this._toggleWaiting(!0)):(this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,a),this._toggleWaiting(!1));break;case"playing":this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,a),this._toggleWaiting(!1);break;case"pause":this._toggleWaiting(this.playbackRequested);break;case"canplaythrough":this._toggleWaiting(!1),this._validatePlayback();break;case"waiting":this.video.seeking||(this.video.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA&&this.video.pause(),this._toggleWaiting(!0));break;default:this._toggleWaiting(!1)}else this._toggleWaiting(!1)},_playbackTimeoutID:-1,_playbackTimeoutFn_playing:function(){this._playbackTimeoutID=-1,this._toggleWaiting(!0)},_playbackTimeoutFn_waiting:function(){100<1e3*(this.video.currentTime-this._playbackStartTC)?this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_waiting,a):(this._playbackStartTS+=a,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,a),this._toggleWaiting(!1))},_renderPlaybackState:function(){this.content.classList.toggle("ended",this.video.ended),h.prototype._renderPlaybackState.apply(this,arguments)},_setPlayToggleSymbol:function(e){return h.prototype._setPlayToggleSymbol.call(this,this.video.ended?"ended":e)},updateBufferedEvents:"progress canplay canplaythrough play playing",_updateBufferedValue:function(e){var t=this.video.buffered;0<t.length&&(this._bufferedValue=t.end(t.length-1),this.progressMeter&&this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&this.progressMeter.valueTo("available",this._bufferedValue,300))},_onFullscreenToggle:function(e){if(!e.defaultPrevented&&!e.button&&this.model.selected){e.preventDefault();try{document.hasOwnProperty("fullscreenElement")&&document.fullscreenElement!==this.video?(document.addEventListener(s,this._onFullscreenChange,!1),this.video.requestFullscreen()):this.video.webkitSupportsFullscreen&&!this.video.webkitDisplayingFullscreen&&(this.video.addEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.webkitEnterFullScreen())}catch(e){this.video.controls=!1,console.error(e)}}},_onFullscreenChange:function(e){switch(e.type){case s:var t=document.fullscreenElement===this.video;(this.video.controls=t)||document.removeEventListener(s,this._onFullscreenChange,!1);break;case"webkitbeginfullscreen":this.video.controls=!0,this.video.removeEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.addEventListener("webkitendfullscreen",this._onFullscreenChange,!1);break;case"webkitendfullscreen":this.video.removeEventListener("webkitendfullscreen",this._onFullscreenChange,!1),this.video.controls=!1}}});l.exports=o,e&&(l.exports=function(l){if(!l.LOG_TO_SCREEN)return l;var c,h,u,d=w("color"),p=w("underscore.string/lpad"),f=w("underscore.string/rpad"),g=w("utils/event/mediaEventsEnum");c=["loadstart","progress","suspend","abort","error","emptied","stalled"],h=["loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended"],u=["play","pause"],g=b.without(g,"resize","error"),c=b.intersection(g,c),h=b.intersection(g,h),u=b.intersection(g,u);var t=b.invert(b.pick(HTMLMediaElement,function(e,t,i){return/^HAVE_/.test(t)})),m=function(e){return t[e.readyState]+"("+e.readyState+")"},i=b.invert(b.pick(HTMLMediaElement,function(e,t,i){return/^NETWORK_/.test(t)})),v=function(e){return i[e.networkState]+"("+e.networkState+")"},n=b.invert(MediaError),_=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e.start(i)<=t&&t<=e.end(i))return i;return-1},y=function(e){return[(t=e,t.error?n[t.error.code]+"("+t.error.code+")":"[MediaError null]"),v(e),m(e)].join(" ");var t};return l.extend({initialize:function(){l.prototype.initialize.apply(this,arguments),b.bindAll(this,"__handleMediaEvent");for(var e=this.model.attr("color"),t=new d("red"),i=new d("blue"),n=new d("green"),s=0;s<g.length;s++){var r=g[s];this.video.addEventListener(r,this.__handleMediaEvent,!1);var a=new d(e),o=1;-1!=h.indexOf(r)&&a.mix(n,o/=2),-1!=u.indexOf(r)&&a.mix(t,o/=2),-1!=c.indexOf(r)&&a.mix(i,o/=2),this.__logColors[r]=a.rgbString()}this.video.addEventListener("error",this.__handleMediaEvent,!0)},remove:function(){l.prototype.remove.apply(this,arguments);for(var e=0;e<g.length;e++)"error"!=g[e]&&this.video.removeEventListener(g[e],this.__handleMediaEvent,!1);this.video.removeEventListener("error",this.__handleMediaEvent,!0)},_onFullscreenToggle:function(e){!e.defaultPrevented&&this.model.selected&&this.__logEvent("fullscreen-toggle",e.type),l.prototype._onFullscreenToggle.apply(this,arguments)},_playbackTimeoutFn_playing:function(){l.prototype._playbackTimeoutFn_playing.apply(this,arguments),this.__handleMediaEvent({type:"timeout-play",timeStamp:null,isTimeout:!0})},_playbackTimeoutFn_waiting:function(){l.prototype._playbackTimeoutFn_waiting.apply(this,arguments),this.__handleMediaEvent({type:"timeout-wait",timeStamp:null,isTimeout:!0})},__handleMediaEvent:function(e){var t,i,n,s,r,a,o,l,c,h=(t=this.video,s=t.currentTime,r=t.duration,a=t.buffered,o=t.seekable,i=_(a,s),n=_(o,s),["["+p(s.toFixed(1),5)+" "+p(isNaN(r)?"-":r.toFixed(1),4)+"]","["+p(0<=n?o.end(n).toFixed(1):"-",5)+" "+(0<=n?n:"-")+"/"+o.length+"]","["+p(0<=i?a.end(i).toFixed(1):"-",5)+" "+(0<=i?i:"-")+"/"+a.length+"]",f(v(t).substr(8),12),f(m(t).substr(5),15),t.ended?">:":t.paused?"::":">>"]);!0===this.playbackRequested?h.push("(>>)"):!1===this.playbackRequested?h.push("(::)"):h.push("(--)"),this.playbackRequested?h.push(-1!==this._playbackTimeoutID?"W":"-"):h.push(-1!==this._playbackTimeoutID?"?":"!"),(-1<this.updatePlaybackEvents.indexOf(e.type)||e.isTimeout)&&(l=e.timeStamp-this._playbackStartTS,c=this.video.currentTime-this._playbackStartTC,l*=.001,h.push(Math.abs(c-l).toFixed(3))),this.__logEvent(h.join(" "),e.type),"error"!==e.type&&"abort"!==e.type||this.__logMessage(y(this.video),e.type)},__logEvent:function(e,t,i){var n=this.__logElement.lastElementChild;if(!n||n.getAttribute("data-logtype")!=t||"timeupdate"!==t&&"progress"!==t)this.__logMessage(e,t,i);else{var s=parseInt(n.getAttribute("data-logrepeat"));n.textContent=this.__getTStamp()+" "+e,n.setAttribute("data-logrepeat",isNaN(s)?2:++s)}},__getHeaderText:function(){return"0000.000 [Curr/Total] [Seekable]  [Buffered]  networkState readyState      Playback"}})}(l.exports))}).call(this,!1,w("underscore"))},{"./VideoRenderer.hbs":103,"app/control/Globals":40,"app/view/component/CanvasProgressMeter":72,"app/view/component/PlayToggleSymbol":79,"app/view/render/PlayableRenderer":100,color:"color",underscore:"underscore","underscore.string/lpad":33,"underscore.string/rpad":35,"utils/event/mediaEventsEnum":127,"utils/prefixedEvent":129}],105:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a,o=null!=t?t:e.nullContext||{},l=i.helperMissing,c="function";return'<div id="desc_b'+e.escapeExpression(typeof(a=null!=(a=i.id||(null!=t?t.id:t))?a:l)===c?a.call(o,{name:"id",hash:{},data:s}):a)+'" class="content sizing mdown">'+(null!=(r=typeof(a=null!=(a=i.desc||(null!=t?t.desc:t))?a:l)===c?a.call(o,{name:"desc",hash:{},data:s}):a)?r:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":25}],106:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a,o=null!=t?t:e.nullContext||{},l=i.helperMissing,c="function";return'<div id="desc_m'+e.escapeExpression(typeof(a=null!=(a=i.id||(null!=t?t.id:t))?a:l)===c?a.call(o,{name:"id",hash:{},data:s}):a)+'" class="content sizing"><p>'+(null!=(r=typeof(a=null!=(a=i.name||(null!=t?t.name:t))?a:l)===c?a.call(o,{name:"name",hash:{},data:s}):a)?r:"")+"</p>"+(null!=(r=typeof(a=null!=(a=i.sub||(null!=t?t.sub:t))?a:l)===c?a.call(o,{name:"sub",hash:{},data:s}):a)?r:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":25}],107:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,s){var r;return"\t\t<p><code>"+e.escapeExpression("function"==typeof(r=null!=(r=i.infoSrc||(null!=t?t.infoSrc:t))?r:i.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"infoSrc",hash:{},data:s}):r)+"</code></p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){var r,a,o=null!=t?t:e.nullContext||{},l=i.helperMissing,c="function",h=e.escapeExpression;return'<div class="error-title color-fg color-reverse">'+h(typeof(a=null!=(a=i.name||(null!=t?t.name:t))?a:l)===c?a.call(o,{name:"name",hash:{},data:s}):a)+'</div>\n<div class="error-message color-fg">\n\t<p><strong>'+h(typeof(a=null!=(a=i.name||(null!=t?t.name:t))?a:l)===c?a.call(o,{name:"name",hash:{},data:s}):a)+"</strong> <code>"+h(typeof(a=null!=(a=i.message||(null!=t?t.message:t))?a:l)===c?a.call(o,{name:"message",hash:{},data:s}):a)+"</code></p>\n"+(null!=(r=i.if.call(o,null!=t?t.infoSrc:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?r:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":25}],108:[function(e,t,i){var n=e("hbsfy/runtime"),s=e("color"),r=e("app/control/Globals"),a={add:function(e,t){return e+t},subtract:function(e,t){return e-t},divide:function(e,t){return e/t},multiply:function(e,t){return e*t},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},round:function(e){return Math.round(e)},global:function(e){return r[e]},is:function(e,t,i){return e===t?i.fn(this):i.inverse(this)},isnot:function(e,t,i){return e!==t?i.fn(this):i.inverse(this)},isany:function(e){var t=0,i=arguments.length-2,n=arguments[i+1];do{if(e===arguments[++t])return n.fn(this)}while(t<i);return n.inverse(this)},contains:function(e,t,i){return-1!==e.indexOf(t)?i.fn(this):i.inverse(this)},ignore:function(){return""},mix:function(e,t,i){return new s(e).mix(new s(t),i).rgbString()},lighten:function(e,t){return new s(e).lighten(t).rgbString()},darken:function(e,t){return new s(e).darken(t).rgbString()}};for(var o in a)a.hasOwnProperty(o)&&n.registerHelper(o,a[o])},{"app/control/Globals":40,color:"color","hbsfy/runtime":25}],109:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,s){return'<svg class="fullscreen-symbol" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="-21 -21 42 42">\n\t<path id="fullscreen-shadow" d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="bg-color-stroke" style="fill:none" vector-effect="non-scaling-stroke" transform="translate(2 2)"/>\n\t<path id="fullscreen-path" d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="color-stroke" style="fill:none" vector-effect="non-scaling-stroke" />\n</svg>\n'},useData:!0})},{"hbsfy/runtime":25}],110:[function(a,o,e){(function(i){var e=a("backbone").Events,t=0,n=function(e){this._id=t++,this._duration=0,this._status="initialized",this._start=0};i.extend(n.prototype,e,{start:function(e){if(!i.isNumber(e)&&!this._duration)return this;if(this._timeout&&"started"===this._status)return this;var t="stopped"===this._status?"start":"resume";return this._duration=e||this._duration,this._timeout=window.setTimeout(function(){r.call(this),this._status="stopped",this.trigger("end")}.bind(this),this._duration),this._start=s(),this._status="started",this.trigger(t,this.getDuration()),this},pause:function(){return"started"!==this._status||(this._duration-=s()-this._start,r.call(this,!1),this._status="paused",this.trigger("pause",this.getDuration())),this},stop:function(){return/started|paused/.test(this._status)&&(r.call(this,!0),this._status="stopped",this.trigger("stop")),this},getDuration:function(){return"started"===this._status?this._duration-(s()-this._start):"paused"===this._status?this._duration:0},getStatus:function(){return this._status}});var s=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date);function r(e){window.clearTimeout(this._timeout),!0===e&&(this._duration=0)}Object.defineProperties(n.prototype,{duration:{enumerable:!0,get:function(){return this.getDuration()}},status:{enumerable:!0,get:function(){return this.getStatus()}}}),Object.defineProperties(n,{STOPPED:{enumerable:!0,value:"stopped"},STARTED:{enumerable:!0,value:"started"},PAUSED:{enumerable:!0,value:"paused"}}),o.exports=n}).call(this,a("underscore"))},{backbone:"backbone",underscore:"underscore"}],111:[function(e,t,i){var n=e("./TransformItem"),s=0,r=100,u=Array.prototype.slice;function a(){this.id=s++,this._items=[],this._itemsById={}}a.prototype=Object.create({_get:function(e){return this.has(e)?this._itemsById[e.eid]:this._add(e)},_add:function(e){var t,i;return i=e.eid||e.cid||"elt"+r++,t=new n(e,i),this._itemsById[i]=t,this._items.push(t),t},_remove:function(e){if(this.has(e)){var t=this._itemsById[e.eid];this._items.splice(this._items.indexOf(t),1),t.destroy(),delete this._itemsById[e.eid]}},_invoke:function(e,t,i){var n,s,r,a,o,l,c,h=null;for(void 0!==i?h=u.call(t,0,i):i=0,n=i,s=t.length,c=[];n<s;++n)if((o=t[n]).length)for(r=0,a=o.length;r<a;++r)l=this._get(o[r]),c.push(l[e].apply(l,h));else l=this._get(o),c.push(l[e].apply(l,h));return c},has:function(e){return e.eid&&void 0!==this._itemsById[e.eid]},getItems:function(){var e,t,i,n=[];for(e=0;e<arguments.length;++e)if((i=arguments[e]).length)for(t=0;t<i.length;++t)n.push(this._get(i[t]));else n.push(this._get(i));return n},get:function(e){return this._get(e)},add:function(){var e,t,i;for(e=0;e<arguments.length;++e)if((i=arguments[e]).length)for(t=0;t<i.length;++t)this._get(i[t]);else this._get(i)},remove:function(){var e,t,i;for(e=0;e<arguments.length;++e)if((i=arguments[e]).length)for(t=0;t<i.length;++t)this._remove(i[t]);else this._remove(i)},hasOffset:function(e){return this.has(e)?this._itemsById[e.eid].hasOffset:void 0},capture:function(){this._invoke("capture",arguments)},captureAll:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].capture()},clearCapture:function(){this._invoke("clearCapture",arguments)},clearAllCaptures:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clearCapture()},offset:function(e,t){this._invoke("offset",arguments,2)},offsetAll:function(e,t){for(var i=0,n=this._items.length;i<n;i++)this._items[i].offset(e,t)},clearOffset:function(){this._invoke("clearOffset",arguments)},clearAllOffsets:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clearOffset()},runTransition:function(e){this._invoke("runTransition",arguments,1)},runAllTransitions:function(e){for(var t=0,i=this._items.length;t<i;t++)this._items[t].runTransition(e)},clearTransition:function(){this._invoke("clearTransition",arguments)},clearAllTransitions:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clearTransition()},stopTransition:function(){this._invoke("stopTransition",arguments)},stopAllTransitions:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].stopTransition()},whenTransitionEnds:function(){var e=this._invoke("whenTransitionEnds",arguments);return 0!=e.length?Promise.all(e):Promise.resolve(null)},whenAllTransitionsEnd:function(){return 0!=this._items.length?Promise.all(this._items.map(function(e){return e.whenTransitionEnds()})):Promise.resolve(null)},promise:function(){return 0==arguments.length?this.whenAllTransitionsEnd():this.whenTransitionEnds.call(this,arguments)},validate:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].validate()}},{items:{get:function(){return this._items}}}),t.exports=a},{"./TransformItem":112}],112:[function(m,v,e){(function(t,s){var i,e,n=m("utils/prefixedProperty"),r=m("utils/prefixedStyleName"),a=m("utils/prefixedEvent")("transitionend"),o="none 0s step-start 0s",l={name:"unset",className:"tx-unset",property:"none",easing:"ease",delay:0,duration:0,cssText:"unset"},c=(i=m("app/control/Globals").TRANSLATE_TEMPLATE,function(e){return i(e._renderedX,e._renderedY)}),h=Object.keys({opacity:"1",visibility:"visible",transform:"matrix(1, 0, 0, 1, 0, 0)",transformStyle:"",transition:""}),u=h.reduce(function(e,t){return e[t]=n(t),e},{}),d=(e=m("utils/strings/camelToDashed"),h.map(e).reduce(function(e,t){return e[t]=r(t),e},{})),p=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,i){e.resolve(n),i[t]=null}),e.length=0),e},f=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,i){e.reject(n),i[t]=null}),e.length=0),e},g=function(e,t){this.el=e,this.id=t,this.el.eid=t,this._onTransitionEnd=this._onTransitionEnd.bind(this),this.el.addEventListener(a,this._onTransitionEnd,!1),this._captureInvalid=!1,this._capturedChanged=!1,this._capturedX=null,this._capturedY=null,this._currCapture={},this._lastCapture={},this._hasOffset=!1,this._offsetInvalid=!1,this._offsetX=null,this._offsetY=null,this._renderedX=null,this._renderedY=null,this._hasTransition=!1,this._transitionInvalid=!1,this._transitionRunning=!1,this._transition=s.extend({},l),this._promises=[],this._pendingPromises=[]};g.prototype=Object.create({destroy:function(){this.el.removeEventListener(a,this._onTransitionEnd,!1),f(this._pendingPromises,this),f(this._promises,this)},capture:function(e){return e&&this.clearCapture(),this._validateCapture(),this},clearCapture:function(){return this._captureInvalid=!0,this},offset:function(e,t){return this._hasOffset=!0,this._offsetInvalid=!0,this._offsetX=e||0,this._offsetY=t||0,this},clearOffset:function(){return this._hasOffset&&(this._hasOffset=!1,this._offsetInvalid=!0,this._offsetX=null,this._offsetY=null),this},runTransition:function(e){if(!e)return this.clearTransition();var t,i=this._transitionValue,n=this._transition.name;return this._transition.property=d.transform,this._transition=s.extend(this._transition,e),this._transitionValue=(t=this._transition).property+" "+t.duration/1e3+"s "+t.easing+" "+t.delay/1e3+"s",this._transitionInvalid&&console.warn("tx[%s]::runTransition set over (%s:'%s' => %s:'%s')",this.id,n,i,this._transition.name,this._transitionValue),this._hasTransition=!0,this._transitionInvalid=!0,this},clearTransition:function(){return this._transition=s.extend(this._transition,l),this._transitionValue=o,this._hasTransition=!1,this._transitionInvalid=!0,this},stopTransition:function(){return this._transition=s.extend(this._transition,l),this._transitionValue=o,this._hasTransition=!1,this._transitionInvalid=!0,this},whenTransitionEnds:function(){var i,e;return this._transitionInvalid||this._transitionRunning?(i={},e=new Promise(function(e,t){i.resolve=e,i.reject=t}),(this._transitionInvalid?this._pendingPromises:this._promises).push(i)):e=Promise.resolve(this),e},validate:function(){if(this._ignoreEvent=!0,this._captureInvalid){var e=null!==this._renderedX?this._renderedX:this._capturedX,t=null!==this._renderedY?this._renderedY:this._capturedY;this._validateCapture(),this._validateOffset();var i=null!==this._renderedX?this._renderedX:this._capturedX,n=null!==this._renderedY?this._renderedY:this._capturedY;e===i&&t===n&&(this._hasTransition&&console.warn("tx[%s]::validate unchanged: last:[%i,%i] curr:[%i,%i]",this.el.id||this.id,e,t,i,n),this.clearTransition()),this._validateTransition()}else this._validateTransition(),this._validateOffset();return this._ignoreEvent=!1,this._capturedChanged=!1,this},_validateCapture:function(){if(this._captureInvalid){var e,t,i=null;if(this._hasOffset&&!this._offsetInvalid&&(""===(i=this._getCSSProp("transform"))&&console.error('tx[%s]::_capture valid offset (%i,$i) but transformValue=""',this.id,this._offsetX,this._offsetY),this._removeCSSProp("transform")),this._lastCapture=this._currCapture,this._currCapture=this._getComputedCSSProps(),this._currCapture.transform!==this._lastCapture.transform)(t=this._currCapture.transform.match(/(matrix|matrix3d)\(([^\)]+)\)/))?(e=t[2].split(","),"matrix"===t[1]?(this._capturedX=parseFloat(e[4]),this._capturedY=parseFloat(e[5])):(this._capturedX=parseFloat(e[12]),this._capturedY=parseFloat(e[13]))):(this._capturedX=0,this._capturedY=0),this._capturedChanged=!0;null!==i&&(this.id,this._setCSSProp("transform",i)),this._captureInvalid=!1}},_validateOffset:function(){if(this._offsetInvalid)if(this._offsetInvalid=!1,this._hasOffset){var e=this._offsetX+this._capturedX,t=this._offsetY+this._capturedY;e===this._renderedX&&t===this._renderedY||(this._renderedX=e,this._renderedY=t,this._setCSSProp("transform",c(this)))}else this._renderedX=null,this._renderedY=null,this._removeCSSProp("transform")},_validateTransition:function(){if(this._transitionInvalid){this._transitionInvalid=!1;var e=this._promises;this._promises=this._pendingPromises,this._pendingPromises=f(e,this),this._transitionRunning=this._hasTransition,this._setCSSProp("transition",this._transitionValue),t&&this._hasTransition&&this.el.setAttribute("data-tx",this._transition.name),this._hasTransition||p(this._promises,this)}},_onTransitionEnd:function(e){this._ignoreEvent||this._transitionRunning&&this.el===e.target&&this._transition.property==e.propertyName&&(this._hasTransition=!1,this._transitionRunning=!1,this._removeCSSProp("transition"),p(this._promises,this),t&&this.el.hasAttribute("data-tx")&&this.el.removeAttribute("data-tx"))},_getCSSProp:function(e){return this.el.style[u[e]]},_setCSSProp:function(e,t){"transition"===e&&t==o&&(t=""),null==t||""===t?this._removeCSSProp(e):this.el.style[u[e]]=t},_removeCSSProp:function(e){this.el.style[u[e]]=""},_getComputedCSSProps:function(){var e={},t=window.getComputedStyle(this.el);for(var i in u)e[i]=t[u[i]];return e}},{transition:{get:function(){return this._transition}},hasTransition:{get:function(){return this._hasTransition}},capturedChanged:{get:function(){return this._capturedChanged}},capturedX:{get:function(){return this._capturedX}},capturedY:{get:function(){return this._capturedY}},hasOffset:{get:function(){return this._hasOffset}},offsetX:{get:function(){return this._offsetX}},offsetY:{get:function(){return this._offsetY}}}),v.exports=g}).call(this,!1,m("underscore"))},{"app/control/Globals":40,underscore:"underscore","utils/prefixedEvent":129,"utils/prefixedProperty":130,"utils/prefixedStyleName":131,"utils/strings/camelToDashed":135}],113:[function(e,t,i){t.exports=function(e,s,t){return e.reduce(function(e,t,i,n){return-1==s.indexOf(t)&&e.push(t),e},void 0!==t?t:[])}},{}],114:[function(e,t,i){var r=2*Math.PI,n=Array.prototype.splice,a=function(e,t){return(e%t+t)%t},s=function(e,t){if("object"==typeof t)for(var i in t)switch(typeof e[i]){case"undefined":break;case"function":Array.isArray(t[i])?e[i].apply(e,t[i]):e[i].call(e,t[i]);break;default:e[i]=t[i]}},o=function(e,t,i){i.save(),t&&s(i,t),e.apply(null,n.call(arguments,2)),"strokeStyle"in t&&i.stroke(),"fillStyle"in t&&i.fill(),i.restore()};t.exports={setStyle:s,vGuide:function(e,t){e.beginPath(),e.moveTo(t,0),e.lineTo(t,e.canvas.height)},drawVGuide:function(e,t,i){o(this.vGuide,t,e,i)},hGuide:function(e,t){e.beginPath(),e.moveTo(0,t),e.lineTo(e.canvas.width,t)},drawHGuide:function(e,t,i){o(this.hGuide,t,e,i)},crosshair:function(e,t,i,n){e.save(),e.translate(t,i),e.rotate(Math.PI/4),e.beginPath(),e.moveTo(0,-n),e.lineTo(0,n),e.moveTo(-n,0),e.lineTo(n,0),e.restore()},drawCrosshair:function(e,t,i,n,s){o(this.crosshair,t,e,i,n,s)},circle:function(e,t,i,n){e.beginPath(),e.arc(t,i,n,0,r)},drawCircle:function(e,t,i,n,s){o(this.circle,t,e,i,n,s)},square:function(e,t,i,n){n=2*Math.floor(n/2),e.beginPath(),e.rect(t-n,i-n,2*n,2*n)},drawSquare:function(e,t,i,n,s){o(this.square,t,e,i,n,s)},arrowhead:function(e,t,i,n,s){e.save(),e.translate(t,i),e.rotate(a(s,r)),e.translate(.5*n,0),e.beginPath(),e.moveTo(0,0),e.lineTo(-n*Math.SQRT2,n*Math.SQRT1_2),e.arcTo(0,0,-n*Math.SQRT2,-n*Math.SQRT1_2,n),e.lineTo(0,0),e.closePath(),e.restore()},drawArrowhead:function(e,t,i,n,s,r){o(this.arrowhead,t,e,i,n,s,r)},arrowhead2:function(e,t,i,n,s){e.save(),e.translate(t,i),e.rotate(a(s,r)),e.beginPath(),e.moveTo(-n,n*Math.SQRT1_2),e.lineTo(0,0),e.lineTo(-n,-n*Math.SQRT1_2),e.restore()},drawArrowhead2:function(e,t,i,n,s,r){o(this.arrowhead,t,e,i,n,s,r)},rect:function(e,t,i,n,s){"object"==typeof t&&(s=t.height,n=t.width,i=t.top,t=t.left),e.beginPath(),e.rect(t,i,n,s)},drawRect:function(e,t,i,n,s,r){o(this.rect,t,e,i,n,s,r)},roundRect:function(e,t,i,n,s,r){n<2*r&&(r=n/2),s<2*r&&(r=s/2),e.beginPath(),e.moveTo(t+r,i),e.arcTo(t+n,i,t+n,i+s,r),e.arcTo(t+n,i+s,t,i+s,r),e.arcTo(t,i+s,t,i,r),e.arcTo(t,i,t+n,i,r),e.closePath()},drawRoundRect:function(e,t,i,n,s,r,a){o(this.roundRect,t,e,i,n,r,a)},quadRoundRect:function(e,t,i,n,s,r){e.beginPath(),e.moveTo(t,i+r),e.quadraticCurveTo(t,i,t+r,i),e.lineTo(t+n-r,i),e.quadraticCurveTo(t+n,i,t+n,i+r),e.lineTo(t+n,i+s-r),e.quadraticCurveTo(t+n,i+s,t+n-r,i+s),e.lineTo(t+r,i+s),e.quadraticCurveTo(t,i+s,t,i+s-r),e.closePath()},drawQuadRoundRect:function(e,t,i,n,s,r,a){o(this.quadRoundRect,t,e,i,n,r,a)}}},{}],115:[function(e,t,i){t.exports=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},{}],116:[function(e,t,i){t.exports=function(e,t){var i,n,s,r,a,o,l=e.data;if(1===arguments.length)for(a=0,o=l.length;a<o;a+=4)l[a]=(299*l[a]+587*l[a+1]+144*l[a+2])/1e3;else if(2===arguments.length){if(1<(t<=0))return console.warn("argument out of range (1-0)",t),e;for(a=0,o=l.length;a<o;a+=4)i=l[a],n=l[a+1],s=l[a+2],0===(r=Math.max(i,n,s))?(l[a]=Math.round(255*t),l[a+1]=Math.round(255*t),l[a+2]=Math.round(255*t)):(r=255*t/r,l[a]=Math.round(i*r),l[a+1]=Math.round(n*r),l[a+2]=Math.round(s*r))}return e}},{}],117:[function(e,t,i){t.exports=function(e,t){var i,n=e.data,s=n.length,r=[0,0,0];for(i=0;i<s;i+=4)r[0]+=n[i],r[1]+=n[i+1],r[2]+=n[i+2];for(i=0;i<3;i++)r[i]=r[i]/(s/4)|0;return r}},{}],118:[function(e,t,i){t.exports=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259]},{}],119:[function(e,t,i){t.exports=function(e,t){for(var i=e.data,n=0;n<i.length;n+=4)i[n]*=t,i[n+1]*=t,i[n+2]*=t;return e}},{}],120:[function(e,t,i){t.exports=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]},{}],121:[function(e,t,i){var F=e("./mul_table"),q=e("./shg_table"),B=e("./BlurStack");t.exports=function(e,t){if("object"==typeof t&&t.hasOwnProperty("radius")&&(t=t.radius),"number"!=typeof t||isNaN(t)||t<1)return e;var i,n,s,r,a,o,l,c,h,u,d,p,f,g,m,v,_,y,b,w,x=0|t,T=e.data,E=e.width,S=e.height,k=x+x+1,C=E-1,I=S-1,A=x+1,L=A*(A+1)/2,P=new B,V=P;for(s=1;s<k;s++)if(V=V.next=new B,s==A)var N=V;V.next=P;var M=null,O=null;l=o=0;var R=F[x],D=q[x];for(n=0;n<S;n++){for(g=m=v=c=h=u=0,d=A*(_=T[o]),p=A*(y=T[o+1]),f=A*(b=T[o+2]),c+=L*_,h+=L*y,u+=L*b,V=P,s=0;s<A;s++)V.r=_,V.g=y,V.b=b,V=V.next;for(s=1;s<A;s++)r=o+((C<s?C:s)<<2),c+=(V.r=_=T[r])*(w=A-s),h+=(V.g=y=T[r+1])*w,u+=(V.b=b=T[r+2])*w,g+=_,m+=y,v+=b,V=V.next;for(M=P,O=N,i=0;i<E;i++)T[o]=c*R>>D,T[o+1]=h*R>>D,T[o+2]=u*R>>D,c-=d,h-=p,u-=f,d-=M.r,p-=M.g,f-=M.b,r=l+((r=i+x+1)<C?r:C)<<2,c+=g+=M.r=T[r],h+=m+=M.g=T[r+1],u+=v+=M.b=T[r+2],M=M.next,d+=_=O.r,p+=y=O.g,f+=b=O.b,g-=_,m-=y,v-=b,O=O.next,o+=4;l+=E}for(i=0;i<E;i++){for(m=v=g=h=u=c=0,d=A*(_=T[o=i<<2]),p=A*(y=T[o+1]),f=A*(b=T[o+2]),c+=L*_,h+=L*y,u+=L*b,V=P,s=0;s<A;s++)V.r=_,V.g=y,V.b=b,V=V.next;for(a=E,s=1;s<=x;s++)o=a+i<<2,c+=(V.r=_=T[o])*(w=A-s),h+=(V.g=y=T[o+1])*w,u+=(V.b=b=T[o+2])*w,g+=_,m+=y,v+=b,V=V.next,s<I&&(a+=E);for(o=i,M=P,O=N,n=0;n<S;n++)T[r=o<<2]=c*R>>D,T[r+1]=h*R>>D,T[r+2]=u*R>>D,c-=d,h-=p,u-=f,d-=M.r,p-=M.g,f-=M.b,r=i+((r=n+A)<I?r:I)*E<<2,c+=g+=M.r=T[r],h+=m+=M.g=T[r+1],u+=v+=M.b=T[r+2],M=M.next,d+=_=O.r,p+=y=O.g,f+=b=O.b,g-=_,m-=y,v-=b,O=O.next,o+=E}return e}},{"./BlurStack":115,"./mul_table":118,"./shg_table":120}],122:[function(e,t,i){t.exports=function(e,t,i,n,s,r,a){var o,l,c,h,u=e<n?1:-1,d=Math.abs(s-t),p=Math.abs(n-e),f=i+r;if(d<1&&(o=0,l=p),f<=d&&f<=p)c=f,l=o=i;else{if(c=Math.sqrt(d*r*2+d*i*2-d*d),i<(h=d*i/f)||p<c)return;var g=(f-d)/c;l=d*g+(o=c*i/f-h*g)}return 0<a&&(1<a?a=Math.min(p-f,a):a*=p-f,o+=a,l+=a),[o*u+e,l*u+e,o,l]}},{}],123:[function(e,t,i){(function(h){var u=["boxSizing","position","objectFit"],d=["marginTop","marginBottom","marginLeft","marginRight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight"],p=d.concat(["width","height","minWidth","minHeight","maxWidth","maxHeight"],["top","bottom","left","right"]),f=/^(-?[\d\.]+)(px|em|rem)$/;t.exports=function(e,t,i){if(e instanceof HTMLElement&&(e=getComputedStyle(e)),h&&!(e instanceof CSSStyleDeclaration))throw new Error("Not a CSSStyleDeclaration nor HTMLElement");var n,s,r,a,o,l;for(t||(t={}),o=t.fontSize=parseFloat(e.fontSize),r=0,a=u.length;r<a;r++)(s=u[r])in e&&(t[s]=e[s]);var c=i?d:p;for(r=0,a=c.length;r<a;r++)t["_"+(s=c[r])]=e[s],e[s]&&(n=f.exec(e[s]))&&("px"===n[2]?t[s]=parseFloat(n[1]):"em"===n[2]?t[s]=parseFloat(n[1])*o:"rem"===n[2]?(l||(l=parseFloat(getComputedStyle(document.documentElement).fontSize)),t[s]=parseFloat(n[1])*l):(console.warn("Ignoring value",s,n[1],n[2]),t[s]=null));return t}}).call(this,!1)},{}],124:[function(e,t,i){t.exports=function(e,t,i,n,s){return n*(t/=s)*t+i}},{}],125:[function(e,t,i){t.exports=function(e,t,i,n){return-i*(e/=n)*(e-2)+t}},{}],126:[function(e,t,i){t.exports=function(e,t,i,n){return i*e/n+t}},{}],127:[function(e,t,i){t.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","paused","ratechange","resize","volumechange"]},{}],128:[function(e,t,i){t.exports=function(e,t,i){2==arguments.length&&(i=t);var n={width:e.width+2*t,height:e.height+2*i};return 0<=n.width?(n.left=e.left-t,n.right=n.left+n.width,n.x=n.left):(n.right=e.right+t,n.left=e.right-n.width,n.y=n.right),0<=n.height?(n.top=e.top-i,n.bottom=n.top+n.height,n.y=n.top):(n.bottom=e.bottom+i,n.top=e.bottom-n.height,n.y=n.bottom),n}},{}],129:[function(e,t,i){var r=[""].concat(e("./prefixes")),a=r.map(function(e){return""===e?e:e.charAt(0).toUpperCase()+e.substr(1)}),n={},s={};n.transitionend=function(){var e,t=document.body.style,i={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd"};for(e in i)if(e in t)return i[e];return null},t.exports=function(e){return s.hasOwnProperty(e)||(s[e]=n.hasOwnProperty(e)?n[e]():function(e,t,i){var n=/^[A-Z]/.test(e)?a:r;t||(t=document);for(var s=0;s<n.length;s++){if(i&&n[s]+i in t)return n[s]+e;if("on"+n[s]+e in t)return n[s]+e}return null}.apply(null,arguments),null===s[e]?console.warn("Event '%s' not found",e):s[e]),s[e]}},{"./prefixes":132}],130:[function(e,t,i){var r=e("./prefixes"),a=r.length,n={};t.exports=function(e,t){return n[e]||(n[e]=function(e,t){var i,n;if(e in t)return e;n=e[0].toUpperCase()+e.slice(1);for(var s=0;s<a;s++)if((i=r[s]+n)in t)return i;return console.error("Property '%s' not found",e),null}(e,t||document.body.style))}},{"./prefixes":132}],131:[function(e,t,i){var s=e("./prefixes"),r=s.length,n={};t.exports=function(e,t){return n[e]||(n[e]=function(e,t){var i;if(e in t)return e;for(var n=0;n<r;n++)if((i="-"+s[n]+"-"+e)in t)return i;return console.warn("CSS style '%s' not found",e),null}(e,t||document.body.style))}},{"./prefixes":132}],132:[function(e,t,i){t.exports=["webkit","moz","ms","o"]},{}],133:[function(e,t,i){t.exports=function(e,n){return 0<e.length&&(e.forEach(function(e,t,i){e.reject(n),i[t]=null}),e.length=0),e}},{}],134:[function(e,t,i){t.exports=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,i){e.resolve(n),i[t]=null}),e.length=0),e}},{}],135:[function(e,t,i){t.exports=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}},{}],136:[function(e,t,i){t.exports=function(e){return e.replace(/<[^>]+>/g,"")}},{}],137:[function(e,t,i){var s=e("hammerjs");function n(){var e=s.Pan.apply(this,arguments);return this.thresholdOffsetX=null,this.thresholdOffsetY=null,this.thresholdOffset=null,e}s.inherit(n,s.Pan,{emit:function(e){var t,i=this.options.threshold,n=e.direction;return this.state==s.STATE_BEGAN&&(this.thresholdOffsetX=n&s.DIRECTION_HORIZONTAL?n&s.DIRECTION_LEFT?i:-i:0,this.thresholdOffsetY=n&s.DIRECTION_VERTICAL?n&s.DIRECTION_UP?i:-i:0),e.thresholdOffsetX=this.thresholdOffsetX,e.thresholdOffsetY=this.thresholdOffsetY,e.thresholdDeltaX=e.deltaX+this.thresholdOffsetX,e.thresholdDeltaY=e.deltaY+this.thresholdOffsetY,this.pX=e.deltaX,this.pY=e.deltaY,(n=(t=n)==s.DIRECTION_DOWN?"down":t==s.DIRECTION_UP?"up":t==s.DIRECTION_LEFT?"left":t==s.DIRECTION_RIGHT?"right":"")&&this.manager.emit(this.options.event+n,e),s.Recognizer.prototype.emit.apply(this,arguments)}}),t.exports=n},{hammerjs:"hammerjs"}],138:[function(e,t,i){t.exports={video_crop_px:"0",transform_type:"3d",transitions:{ease:"ease-in-out",duration_ms:"350",delay_interval_ms:"34",min_delay_ms:"34"},breakpoints:{landscape:"'(orientation: landscape)'",portrait:"'(orientation: portrait)'","xsmall-stretch":"'not screen and (min-width: 460px), not screen and (min-height: 420px)'","small-stretch":"'not screen and (min-width: 704px), not screen and (min-height: 540px)'",default:"'only screen and (min-width: 704px) and (min-height: 540px)'","medium-wide":"'only screen and (min-width: 1024px) and (min-height: 540px)'","large-wide":"'only screen and (min-width: 1224px) and (min-height: 704px)'","xlarge-wide":"'only screen and (min-width: 1824px) and (min-height: 1024px)'"},default_colors:{color:"hsl(47, 5%, 15%)","background-color":"hsl(47, 5%, 95%)","link-color":"hsl(10, 80%, 50%)"},temp:{collapse_offset:"360"},_ignore:{transitions:{ease:"cubic-bezier(0.42, 0.0, 0.58, 1.0)",duration_ms:"400",delay_interval_ms:"134",min_delay_ms:"34"},default_colors:{"--link-color":"hsl(10, 80%, 50%)","--alt-background-color":"unset"},units:{hu_px:"20",vu_px:"12"},breakpoints:{mobile:"'not screen and (min-width: 704px), not screen and (min-height: 540px)'",unsupported:"'not screen and (min-width: 704px)'",unquoted:"only screen and (min-width: 1824px)",unquoted_neg:"not screen and (min-width: 704px)",quoted_combined:"'not screen and (min-width: 704px), not screen and (min-height: 540px)'",array:["only screen and (min-width: 704px)","not screen and (min-width: 704px)","not screen and (min-height: 540px)"]}}}},{}],"Backbone.Mutators":[function(t,s,r){!function(i,n,e){"use strict";"object"==typeof r?s.exports=n(t("underscore"),t("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(e,t){return e=void 0===e?i._:e,t=void 0===t?i.Backbone:t,i.returnExportsGlobal=n(e,t,i)}):i.returnExportsGlobal=n(i._,i.Backbone)}(this,function(a,e,t,o){"use strict";e=e===o?t.Backbone:e,a=a===o?t._:a;var i=function(){},n=e.Model.prototype.get,l=e.Model.prototype.set,c=e.Model.prototype.toJSON;return i.prototype.mutators={},i.prototype.get=function(e){var t=this.mutators!==o;return!0===t&&!0===a.isFunction(this.mutators[e])?this.mutators[e].call(this):!0===t&&!0===a.isObject(this.mutators[e])&&!0===a.isFunction(this.mutators[e].get)?this.mutators[e].get.call(this):n.call(this,e)},i.prototype.set=function(e,t,n){var i=this.mutators!==o,s=null,r=null;return s=l.call(this,e,t,n),a.isObject(e)||null===e?(r=e,n=t):(r={})[e]=t,!0===i&&!0===a.isObject(this.mutators[e])&&(!0===a.isFunction(this.mutators[e].set)?s=this.mutators[e].set.call(this,e,r[e],n,a.bind(l,this)):a.isFunction(this.mutators[e])&&(s=this.mutators[e].call(this,e,r[e],n,a.bind(l,this)))),!0===i&&a.isObject(r)&&a.each(r,a.bind(function(e,t){if(!0===a.isObject(this.mutators[t])){var i=this.mutators[t];a.isFunction(i.set)&&(i=i.set),a.isFunction(i)&&((n===o||!0===a.isObject(n)&&!0!==n.silent&&n.mutators!==o&&!0!==n.mutators.silent)&&this.trigger("mutators:set:"+t),i.call(this,t,e,n,a.bind(l,this)))}},this)),s},i.prototype.toJSON=function(i){var n,s,r=c.call(this);return a.each(this.mutators,a.bind(function(e,t){!0===a.isObject(this.mutators[t])&&a.isFunction(this.mutators[t].get)?(n=this.isSaving?this.isSaving(i,e,t):a.has(i||{},"emulateHTTP"),s=this.mutators[t].transient,n&&s||(r[t]=a.bind(this.mutators[t].get,this)())):a.isFunction(this.mutators[t])&&(r[t]=a.bind(this.mutators[t],this)())},this)),r},i.prototype.escape=function(e){var t=this.get(e);return a.escape(null==t?"":""+t)},a.extend(e.Model.prototype,i.prototype),e.Mutators=i})},{backbone:"backbone",underscore:"underscore"}],"backbone.babysitter":[function(s,r,a){!function(e,i){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,t){return i(e,t)});else if(void 0!==a){var t=s("backbone"),n=s("underscore");r.exports=i(t,n)}else i(e.Backbone,e._)}(this,function(e,t){"use strict";var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,n){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),n.each(e,this.add,this)};n.extend(i.prototype,{add:function(e,t){var i=e.cid;return(this._views[i]=e).model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return n.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],n.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,n.tail(arguments))},apply:function(t,i){n.each(this._views,function(e){n.isFunction(e[t])&&e[t].apply(e,i||[])})},_updateLength:function(){this.length=n.size(this._views)}});return n.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"],function(t){i.prototype[t]=function(){var e=[n.values(this._views)].concat(n.toArray(arguments));return n[t].apply(n,e)}}),i}(0,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer})},{backbone:"backbone",underscore:"underscore"}],"backbone.native":[function(e,g,m){(function(){"use strict";var l=/^([^.]+)?(?:\.([^.]+))?$/,c=Element.prototype.matchesSelector||null;c||["webkit","moz","o","ms"].forEach(function(e){var t=Element.prototype[e+"MatchesSelector"];t&&(c=t)});var i="backboneNativeKey"+Math.random(),n=1,s={},r=[];function h(e){e[i]||(e[i]=0===r.length?++n:r.pop());var t=e[i];return s[t]||(s[t]=[])}function o(e){var t=e[i];s[t]&&(s[t]=null,e[i]=null,r.push(t))}function a(n,e,s,t){"function"==typeof s&&(t=s,s=null);var i=l.exec(e);e=i[1]||null;var r=i[2]||null;if(e){var a=t,o=t;a=s?function(e){for(var t=e.target;t&&t!==n;t=t.parentElement)if(c.call(t,s)){var i=o.call(t,e,t);return!1===i&&(e.stopPropagation(),e.preventDefault()),i}}:function(e){var t=o.call(n,e,n);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},n.addEventListener(e,a,!1),h(n).push({eventName:e,callback:t,handler:a,namespace:r,selector:s})}}function u(t,i,n,s){"function"==typeof n&&(s=n,n=null);var e=l.exec(i||"");i=e[1];var r=e[2],a=h(t)||[];i||r||n||s?(a.filter(function(e){return!(r&&e.namespace!==r||i&&e.eventName!==i||s&&e.callback!==s||n&&e.selector!==n)}).forEach(function(e){t.removeEventListener(e.eventName,e.handler,!1),a.splice(a.indexOf(e),1)}),0===a.length&&o(t)):(a.forEach(function(e){t.removeEventListener(e.eventName,e.handler,!1)}),o(t))}function d(e,t){if(t=t||document,!(this instanceof d))return new d(e,t);if(e)if("string"==typeof e)if(/^\s*</.test(e)){var i=document.createElement("div");i.innerHTML=e,this[0]=i.firstChild,i.removeChild(i.firstChild),this.length=1}else this[0]=t.querySelector(e),this.length=1;else this[0]=e,this.length=1;else this.length=0}if(d.prototype={hide:null,appendTo:null,find:null,attr:function(t){return Object.keys(t).forEach(function(e){switch(e){case"html":this[0].innerHTML=t[e];break;case"text":this[0].textContent=t[e];break;case"class":this[0].className=t[e];break;default:this[0].setAttribute(e,t[e])}},this),this},html:function(e){return this[0].innerHTML=e,this},remove:function(){var e=this[0];return e.parentElement&&e.parentElement.removeChild(e),function e(t){u(t);for(var i=0,n=t.childNodes.length;i<n;i++)t.childNodes[i].nodeType!==Node.TEXT_NODE&&e(t.childNodes[i])}(e),this},on:function(e,t,i){return a(this[0],e,t,i),this},off:function(e,t,i){return u(this[0],e,t,i),this},bind:function(e,t){return this.on(e,t)},unbind:function(e,t){return this.off(e,t)},delegate:function(e,t,i){return this.on(t,e,i)},undelegate:function(e,t,i){return this.off(t,e,i)}},d.ajax=function(i){var e=(i=i||{}).type||"GET",t=i.url,n=void 0===i.processData||!!i.processData,s=i.data;if(n&&"object"==typeof s){var r=Object.keys(s).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(s[e])});s=r.join("&")}!s||"GET"!==e&&"HEAD"!==e||(t+=(-1===t.indexOf("?")?"?":"&")+s,s=void 0);var a=new XMLHttpRequest;return a.open(e,t,!0),i.contentType&&a.setRequestHeader("Content-Type",i.contentType),i.beforeSend&&i.beforeSend(a),a.onload=function(){var t=!1,e=a.responseText;if("json"===i.dataType)try{e=JSON.parse(e)}catch(e){t=!0}!t&&200<=a.status&&a.status<300?i.success&&i.success(e,a.statusText,a):i.error&&i.error(a)}.bind(this),a.onerror=a.onabort=function(){i.error&&i.error(a)},a.send(s),a},d.on=a,d.off=u,void 0!==m)return g.exports=d;var t=this,p=t.Backbone?t.Backbone.Native:null,f=t.$;t.Backbone&&(t.Backbone.Native=d),(t.$=d).noConflict=function(e){return t.$=f,e&&(t.Backbone.Native=p),d},t.Backbone&&(t.Backbone.setDomLibrary?t.Backbone.setDomLibrary(d):t.Backbone.$=d)}).call(this)},{}],backbone:[function(t,e,i){!function(n,s){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,t,i){n.Backbone=s(n,i,e,t)});else if(void 0!==i){var e=t("underscore");s(n,i,e)}else n.Backbone=s(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(this,function(e,o,x,t){var i=e.Backbone,n=[],s=n.slice;o.VERSION="1.1.2",o.$=t,o.noConflict=function(){return e.Backbone=i,this},o.emulateHTTP=!1,o.emulateJSON=!1;var r=o.Events={on:function(e,t,i){return u(this,"on",e,[t,i])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this})),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var n=this,s=x.once(function(){n.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},off:function(e,t,i){var n,s,r,a,o,l,c,h;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(o=0,l=(a=e?[e]:x.keys(this._events)).length;o<l;o++)if(e=a[o],r=this._events[e]){if(this._events[e]=n=[],t||i)for(c=0,h=r.length;c<h;c++)s=r[c],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&n.push(s);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&a(i,t),n&&a(n,arguments),this},stopListening:function(e,t,i){var n=this._listeningTo;if(!n)return this;var s=!t&&!i;for(var r in i||"object"!=typeof t||(i=this),e&&((n={})[e._listenId]=e),n)(e=n[r]).off(t,i,this),(s||x.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,u=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)e[t].apply(e,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),a=0,o=r.length;a<o;a++)e[t].apply(e,[r[a]].concat(n));return!1}return!0},a=function(e,t){var i,n=-1,s=e.length,r=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++n<s;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=e[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=e[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=e[n]).callback.apply(i.ctx,t);return}};x.each({listenTo:"on",listenToOnce:"once"},function(s,e){r[e]=function(e,t,i){var n=this._listeningTo||(this._listeningTo={});return i||"object"!=typeof t||(i=this),(n[e._listenId||(e._listenId=x.uniqueId("l"))]=e)[s](t,i,this),this}}),r.bind=r.on,r.unbind=r.off,x.extend(o,r);var T=o.Model=function(e,t){var i=e||{};t||(t={}),this.cid=x.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=x.defaults({},i,x.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};x.extend(T.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return x.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return x.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,s,r,a,o,l,c,h;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;for(n in r=i.unset,o=i.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=x.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]),s)t=s[n],x.isEqual(h[n],t)||a.push(n),x.isEqual(c[n],t)?delete this.changed[n]:this.changed[n]=t,r?delete h[n]:h[n]=t;if(!o){a.length&&(this._pending=i);for(var u=0,d=a.length;u<d;u++)this.trigger("change:"+a[u],this,h[a[u]],i)}if(l)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,x.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,x.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!x.isEmpty(this.changed):x.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&x.clone(this.changed);var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in e)x.isEqual(n[s],t=e[s])||((i||(i={}))[s]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?x.clone(t):{}).parse&&(t.parse=!0);var i=this,n=t.success;return t.success=function(e){if(!i.set(i.parse(e,t),t))return!1;n&&n(i,e,t),i.trigger("sync",i,e,t)},V(this,t),this.sync("read",this,t)},save:function(e,t,i){var n,s,r,a=this.attributes;if(null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,i=x.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=x.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var o=this,l=i.success;return i.success=function(e){o.attributes=a;var t=o.parse(e,i);if(i.wait&&(t=x.extend(n||{},t)),x.isObject(t)&&!o.set(t,i))return!1;l&&l(o,e,i),o.trigger("sync",o,e,i)},V(this,i),"patch"===(s=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=n),r=this.sync(s,this,i),n&&i.wait&&(this.attributes=a),r},destroy:function(t){t=t?x.clone(t):{};var i=this,n=t.success,s=function(){i.trigger("destroy",i,i.collection,t)};if(t.success=function(e){(t.wait||i.isNew())&&s(),n&&n(i,e,t),i.isNew()||i.trigger("sync",i,e,t)},this.isNew())return t.success(),!1;V(this,t);var e=this.sync("delete",this,t);return t.wait||s(),e},url:function(){var e=x.result(this,"urlRoot")||x.result(this.collection,"url")||P();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},x.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=x.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,x.extend(t,{validationError:i})),!1)}});x.each(["keys","values","pairs","invert","pick","omit"],function(t){T.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),x[t].apply(x,e)}});var c=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,x.extend({silent:!0},t))},E={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1};x.extend(c.prototype,r,{model:T,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,x.extend({merge:!1},t,h))},remove:function(e,t){var i,n,s,r,a=!x.isArray(e);for(t||(t={}),i=0,n=(e=a?[e]:x.clone(e)).length;i<n;i++)(r=e[i]=this.get(e[i]))&&(delete this._byId[r.id],delete this._byId[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,t.silent||(t.index=s,r.trigger("remove",r,this,t)),this._removeReference(r,t));return a?e[0]:e},set:function(e,t){(t=x.defaults({},t,E)).parse&&(e=this.parse(e,t));var i,n,s,r,a,o,l,c=!x.isArray(e);e=c?e?[e]:[]:x.clone(e);var h=t.at,u=this.model,d=this.comparator&&null==h&&!1!==t.sort,p=x.isString(this.comparator)?this.comparator:null,f=[],g=[],m={},v=t.add,_=t.merge,y=t.remove,b=!(d||!v||!y)&&[];for(i=0,n=e.length;i<n;i++){if(s=(a=e[i]||{})instanceof T?r=a:a[u.prototype.idAttribute||"id"],o=this.get(s))y&&(m[o.cid]=!0),_&&(a=a===r?r.attributes:a,t.parse&&(a=o.parse(a,t)),o.set(a,t),d&&!l&&o.hasChanged(p)&&(l=!0)),e[i]=o;else if(v){if(!(r=e[i]=this._prepareModel(a,t)))continue;f.push(r),this._addReference(r,t)}r=o||r,!b||!r.isNew()&&m[r.id]||b.push(r),m[r.id]=!0}if(y){for(i=0,n=this.length;i<n;++i)m[(r=this.models[i]).cid]||g.push(r);g.length&&this.remove(g,t)}if(f.length||b&&b.length)if(d&&(l=!0),this.length+=f.length,null!=h)for(i=0,n=f.length;i<n;i++)this.models.splice(h+i,0,f[i]);else{b&&(this.models.length=0);var w=b||f;for(i=0,n=w.length;i<n;i++)this.models.push(w[i])}if(l&&this.sort({silent:!0}),!t.silent){for(i=0,n=f.length;i<n;i++)(r=f[i]).trigger("add",r,this,t);(l||b&&b.length)&&this.trigger("sort",this,t)}return c?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,x.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,x.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,x.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(i,e){return x.isEmpty(i)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var t in i)if(i[t]!==e.get(t))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),x.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(x.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return x.invoke(this.models,"get",e)},fetch:function(i){void 0===(i=i?x.clone(i):{}).parse&&(i.parse=!0);var n=i.success,s=this;return i.success=function(e){var t=i.reset?"reset":"set";s[t](e,i),n&&n(s,e,i),s.trigger("sync",s,e,i)},V(this,i),this.sync("read",this,i)},create:function(e,i){if(i=i?x.clone(i):{},!(e=this._prepareModel(e,i)))return!1;i.wait||this.add(e,i);var n=this,s=i.success;return i.success=function(e,t){i.wait&&n.add(e,i),s&&s(e,t,i)},e.save(null,i),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof T)return e;var i=new(((t=t?x.clone(t):{}).collection=this).model)(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){null!=(this._byId[e.cid]=e).id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});x.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(t){c.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),x[t].apply(x,e)}});x.each(["groupBy","countBy","sortBy","indexBy"],function(n){c.prototype[n]=function(t,e){var i=x.isFunction(t)?t:function(e){return e.get(t)};return x[n](this.models,i,e)}});var d=o.View=function(e){this.cid=x.uniqueId("view"),e||(e={}),x.extend(this,x.pick(e,f)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},p=/^(\S+)\s*(.*)$/,f=["model","collection","el","id","attributes","className","tagName","events"];x.extend(d.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=x.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(x.isFunction(i)||(i=this[e[t]]),i){var n=t.match(p),s=n[1],r=n[2];i=x.bind(i,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,i):this.$el.on(s,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"),!1);else{var e=x.extend({},x.result(this,"attributes"));this.id&&(e.id=x.result(this,"id")),this.className&&(e.class=x.result(this,"className"));var t=o.$("<"+x.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}}}),o.sync=function(e,t,i){var n=m[e];x.defaults(i||(i={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var s={type:n,dataType:"json"};if(i.url||(s.url=x.result(t,"url")||P()),null!=i.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||t.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){s.type="POST",i.emulateJSON&&(s.data._method=n);var r=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",n),r)return r.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&g&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=o.ajax(x.extend(s,i));return t.trigger("request",t,a,i),a};var g=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),m={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var v=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(v.prototype,r,{initialize:function(){},route:function(i,n,s){x.isRegExp(i)||(i=this._routeToRegExp(i)),x.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return o.history.route(i,function(e){var t=r._extractParameters(i,e);r.execute(s,t),r.trigger.apply(r,["route:"+n].concat(t)),r.trigger("route",n,t),o.history.trigger("route",r,n,t)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var e,t=x.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(_,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/?]+)"}).replace(b,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return x.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var S=o.History=function(){this.handlers=[],x.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,C=/^\/+|\/+$/g,I=/msie [\w.]+/,A=/\/$/,L=/#.*$/;S.started=!1,x.extend(S.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(A,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(k,"")},start:function(e){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=x.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),i=document.documentMode,n=I.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(C,"/"),n&&this._wantsHashChange){var s=o.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(t)}this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(k,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),S.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),x.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!S.started)return!1;t&&!0!==t||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(L,""),this.fragment!==e){if(""===(this.fragment=e)&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),o.history=new S;T.extend=c.extend=v.extend=d.extend=S.extend=function(e,t){var i,n=this;i=e&&x.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},x.extend(i,n,t);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,e&&x.extend(i.prototype,e),i.__super__=n.prototype,i};var P=function(){throw new Error('A "url" property or function must be specified')},V=function(t,i){var n=i.error;i.error=function(e){n&&n(t,e,i),t.trigger("error",t,e,i)}};return o})},{underscore:"underscore"}],color:[function(e,t,i){var c=e("color-convert"),n=e("color-string"),s=function(e){if(e instanceof s)return e;if(!(this instanceof s))return new s(e);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof e)if(t=n.getRgba(e))this.setValues("rgb",t);else if(t=n.getHsla(e))this.setValues("hsl",t);else{if(!(t=n.getHwb(e)))throw new Error('Unable to parse color from string "'+e+'"');this.setValues("hwb",t)}else if("object"==typeof e){var t;if(void 0!==(t=e).r||void 0!==t.red)this.setValues("rgb",t);else if(void 0!==t.l||void 0!==t.lightness)this.setValues("hsl",t);else if(void 0!==t.v||void 0!==t.value)this.setValues("hsv",t);else if(void 0!==t.w||void 0!==t.whiteness)this.setValues("hwb",t);else{if(void 0===t.c&&void 0===t.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(e));this.setValues("cmyk",t)}}};s.prototype={rgb:function(e){return this.setSpace("rgb",arguments)},hsl:function(e){return this.setSpace("hsl",arguments)},hsv:function(e){return this.setSpace("hsv",arguments)},hwb:function(e){return this.setSpace("hwb",arguments)},cmyk:function(e){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){return this.values.rgb.concat([this.values.alpha])},hslaArray:function(){return this.values.hsl.concat([this.values.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return n.hexString(this.values.rgb)},rgbString:function(){return n.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return n.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return n.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return n.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return n.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return n.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return n.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var n=e[i]/255;t[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return i<t?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return 7.1<=t?"AAA":4.5<=t?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){return this.values.hsl[2]+=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},darken:function(e){return this.values.hsl[2]-=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},saturate:function(e){return this.values.hsl[1]+=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},desaturate:function(e){return this.values.hsl[1]-=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},whiten:function(e){return this.values.hwb[1]+=this.values.hwb[1]*e,this.setValues("hwb",this.values.hwb),this},blacken:function(e){return this.values.hwb[2]+=this.values.hwb[2]*e,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){return this.setValues("alpha",this.values.alpha-this.values.alpha*e),this},opaquer:function(e){return this.setValues("alpha",this.values.alpha+this.values.alpha*e),this},rotate:function(e){var t=this.values.hsl[0];return t=(t=(t+e)%360)<0?360+t:t,this.values.hsl[0]=t,this.setValues("hsl",this.values.hsl),this},mix:function(e,t){var i=e,n=void 0!==t?t:.5,s=2*n-1,r=this.alpha()-i.alpha(),a=((s*r==-1?s:(s+r)/(1+s*r))+1)/2,o=1-a;return this.rgb(a*this.red()+o*i.red(),a*this.green()+o*i.green(),a*this.blue()+o*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){return new s(this.rgb())}},s.prototype.getValues=function(e){for(var t={},i=0;i<e.length;i++)t[e.charAt(i)]=this.values[e][i];return 1!=this.values.alpha&&(t.a=this.values.alpha),t},s.prototype.setValues=function(e,t){var i={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},n={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},s=1;if("alpha"==e)s=t;else if(t.length)this.values[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(var r=0;r<e.length;r++)this.values[e][r]=t[e.charAt(r)];s=t.a}else if(void 0!==t[i[e][0]]){var a=i[e];for(r=0;r<e.length;r++)this.values[e][r]=t[a[r]];s=t.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==s?s:this.values.alpha)),"alpha"!=e){for(r=0;r<e.length;r++){var o=Math.max(0,Math.min(n[e][r],this.values[e][r]));this.values[e][r]=Math.round(o)}for(var l in i){l!=e&&(this.values[l]=c[e][l](this.values[e]));for(r=0;r<l.length;r++){o=Math.max(0,Math.min(n[l][r],this.values[l][r]));this.values[l][r]=Math.round(o)}}return!0}},s.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},s.prototype.setChannel=function(e,t,i){return void 0===i?this.values[e][t]:(this.values[e][t]=i,this.setValues(e,this.values[e]),this)},t.exports=s},{"color-convert":2,"color-string":3}],"fullscreen-polyfill":[function(e,t,i){!function(s){"use strict";var t,e,i={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},n=i.w3;for(e in i)if(i[e].enabled in s){t=i[e];break}function r(e,t,i){var n=s.createEvent("Event");n.initEvent(e,!0,!1),i.type,t.dispatchEvent(n)}n.enabled in s||!t||(s.addEventListener(t.events.change,function(e){s[n.enabled]=s[t.enabled],s[n.element]=s[t.element],r(n.events.change,e.target,e)},!1),s.addEventListener(t.events.error,function(e){r(n.events.error,e.target,e)},!1),s[n.enabled]=s[t.enabled],s[n.element]=s[t.element],s[n.exit]=s[t.exit],Element.prototype[n.request]=function(){return this[t.request].apply(this,arguments)})}(document)},{}],hammerjs:[function(e,We,t){!function(r,o,e,g){"use strict";var a,l=["","webkit","Moz","MS","ms","o"],t=o.createElement("div"),i="function",c=Math.round,m=Math.abs,v=Date.now;function h(e,t,i){return setTimeout(_(e,i),t)}function n(e,t,i){return!!Array.isArray(e)&&(u(e,i[t],i),!0)}function u(e,t,i){var n;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==g)for(n=0;n<e.length;)t.call(i,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e)}function s(n,e,t){var s="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=r.console&&(r.console.warn||r.console.log);return i&&i.call(r.console,s,t),n.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===g||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==g&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}:Object.assign;var d=s(function(e,t,i){for(var n=Object.keys(t),s=0;s<n.length;)(!i||i&&e[n[s]]===g)&&(e[n[s]]=t[n[s]]),s++;return e},"extend","Use `assign`."),p=s(function(e,t){return d(e,t,!0)},"merge","Use `assign`.");function f(e,t,i){var n,s=t.prototype;(n=e.prototype=Object.create(s)).constructor=e,n._super=s,i&&a(n,i)}function _(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return typeof e==i?e.apply(t&&t[0]||g,t):e}function b(e,t){return e===g?t:e}function w(t,e,i){u(S(e),function(e){t.addEventListener(e,i,!1)})}function x(t,e,i){u(S(e),function(e){t.removeEventListener(e,i,!1)})}function T(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function E(e,t){return-1<e.indexOf(t)}function S(e){return e.trim().split(/\s+/g)}function k(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function I(e,i,t){for(var n=[],s=[],r=0;r<e.length;){var a=i?e[r][i]:e[r];k(s,a)<0&&n.push(e[r]),s[r]=a,r++}return t&&(n=i?n.sort(function(e,t){return e[i]>t[i]}):n.sort()),n}function A(e,t){for(var i,n,s=t[0].toUpperCase()+t.slice(1),r=0;r<l.length;){if((n=(i=l[r])?i+s:t)in e)return n;r++}return g}var L=1;function P(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var V="ontouchstart"in r,N=A(r,"PointerEvent")!==g,M=V&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O="touch",R=25,D=1,F=4,q=8,B=1,H=2,j=4,z=8,W=16,G=H|j,U=z|W,Y=G|U,X=["x","y"],$=["clientX","clientY"];function K(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&i.handler(e)},this.init()}function Q(e,t,i){var n=i.pointers.length,s=i.changedPointers.length,r=t&D&&n-s==0,a=t&(F|q)&&n-s==0;i.isFirst=!!r,i.isFinal=!!a,r&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,n=t.pointers,s=n.length;i.firstInput||(i.firstInput=Z(t));1<s&&!i.firstMultiple?i.firstMultiple=Z(t):1===s&&(i.firstMultiple=!1);var r=i.firstInput,a=i.firstMultiple,o=a?a.center:r.center,l=t.center=J(n);t.timeStamp=v(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=ne(o,l),t.distance=ie(o,l),function(e,t){var i=t.center,n=e.offsetDelta||{},s=e.prevDelta||{},r=e.prevInput||{};t.eventType!==D&&r.eventType!==F||(s=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y});t.deltaX=s.x+(i.x-n.x),t.deltaY=s.y+(i.y-n.y)}(i,t),t.offsetDirection=te(t.deltaX,t.deltaY);var c=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=m(c.x)>m(c.y)?c.x:c.y,t.scale=a?(d=a.pointers,p=n,ie(p[0],p[1],$)/ie(d[0],d[1],$)):1,t.rotation=a?(h=a.pointers,u=n,ne(u[1],u[0],$)+ne(h[1],h[0],$)):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,n,s,r,a=e.lastInterval||t,o=t.timeStamp-a.timeStamp;if(t.eventType!=q&&(R<o||a.velocity===g)){var l=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,h=ee(o,l,c);n=h.x,s=h.y,i=m(h.x)>m(h.y)?h.x:h.y,r=te(l,c),e.lastInterval=t}else i=a.velocity,n=a.velocityX,s=a.velocityY,r=a.direction;t.velocity=i,t.velocityX=n,t.velocityY=s,t.direction=r}(i,t);var h,u;var d,p;var f=e.element;T(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function Z(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:c(e.pointers[i].clientX),clientY:c(e.pointers[i].clientY)},i++;return{timeStamp:v(),pointers:t,center:J(t),deltaX:e.deltaX,deltaY:e.deltaY}}function J(e){var t=e.length;if(1===t)return{x:c(e[0].clientX),y:c(e[0].clientY)};for(var i=0,n=0,s=0;s<t;)i+=e[s].clientX,n+=e[s].clientY,s++;return{x:c(i/t),y:c(n/t)}}function ee(e,t,i){return{x:t/e||0,y:i/e||0}}function te(e,t){return e===t?B:m(e)>=m(t)?e<0?H:j:t<0?z:W}function ie(e,t,i){i||(i=X);var n=t[i[0]]-e[i[0]],s=t[i[1]]-e[i[1]];return Math.sqrt(n*n+s*s)}function ne(e,t,i){i||(i=X);var n=t[i[0]]-e[i[0]],s=t[i[1]]-e[i[1]];return 180*Math.atan2(s,n)/Math.PI}K.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(P(this.element),this.evWin,this.domHandler)}};var se={mousedown:D,mousemove:2,mouseup:F},re="mousedown",ae="mousemove mouseup";function oe(){this.evEl=re,this.evWin=ae,this.pressed=!1,K.apply(this,arguments)}f(oe,K,{handler:function(e){var t=se[e.type];t&D&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=F),this.pressed&&(t&F&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var le={pointerdown:D,pointermove:2,pointerup:F,pointercancel:q,pointerout:q},ce={2:O,3:"pen",4:"mouse",5:"kinect"},he="pointerdown",ue="pointermove pointerup pointercancel";function de(){this.evEl=he,this.evWin=ue,K.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(he="MSPointerDown",ue="MSPointerMove MSPointerUp MSPointerCancel"),f(de,K,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),s=le[n],r=ce[e.pointerType]||e.pointerType,a=r==O,o=k(t,e.pointerId,"pointerId");s&D&&(0===e.button||a)?o<0&&(t.push(e),o=t.length-1):s&(F|q)&&(i=!0),o<0||(t[o]=e,this.callback(this.manager,s,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),i&&t.splice(o,1))}});var pe={touchstart:D,touchmove:2,touchend:F,touchcancel:q};function fe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,K.apply(this,arguments)}f(fe,K,{handler:function(e){var t=pe[e.type];if(t===D&&(this.started=!0),this.started){var i=function(e,t){var i=C(e.touches),n=C(e.changedTouches);t&(F|q)&&(i=I(i.concat(n),"identifier",!0));return[i,n]}.call(this,e,t);t&(F|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:O,srcEvent:e})}}});var ge={touchstart:D,touchmove:2,touchend:F,touchcancel:q},me="touchstart touchmove touchend touchcancel";function ve(){this.evTarget=me,this.targetIds={},K.apply(this,arguments)}f(ve,K,{handler:function(e){var t=ge[e.type],i=function(e,t){var i=C(e.touches),n=this.targetIds;if(t&(2|D)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,r,a=C(e.changedTouches),o=[],l=this.target;if(r=i.filter(function(e){return T(e.target,l)}),t===D)for(s=0;s<r.length;)n[r[s].identifier]=!0,s++;s=0;for(;s<a.length;)n[a[s].identifier]&&o.push(a[s]),t&(F|q)&&delete n[a[s].identifier],s++;if(!o.length)return;return[I(r.concat(o),"identifier",!0),o]}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:O,srcEvent:e})}});var _e=2500;function ye(){K.apply(this,arguments);var e=_(this.handler,this);this.touch=new ve(this.manager,e),this.mouse=new oe(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function be(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(i);-1<e&&n.splice(e,1)},_e)}}f(ye,K,{handler:function(e,t,i){var n=i.pointerType==O,s="mouse"==i.pointerType;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&D?(this.primaryTouch=t.changedPointers[0].identifier,be.call(this,t)):e&(F|q)&&be.call(this,t)}).call(this,t,i);else if(s&&function(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],r=Math.abs(t-s.x),a=Math.abs(i-s.y);if(r<=25&&a<=25)return!0}return!1}.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var we=A(t.style,"touchAction"),xe=we!==g,Te="manipulation",Ee="none",Se="pan-x",ke="pan-y",Ce=function(){if(!xe)return!1;var t={},i=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!i||r.CSS.supports("touch-action",e)}),t}();function Ie(e,t){this.manager=e,this.set(t)}Ie.prototype={set:function(e){"compute"==e&&(e=this.compute()),xe&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[we]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(E(e,Ee))return Ee;var t=E(e,Se),i=E(e,ke);if(t&&i)return Ee;if(t||i)return t?Se:ke;if(E(e,Te))return Te;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,s=E(n,Ee)&&!Ce.none,r=E(n,ke)&&!Ce[ke],a=E(n,Se)&&!Ce[Se];if(s){var o=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(o&&l&&c)return}if(!a||!r)return s||r&&i&G||a&&i&U?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ae=1;function Le(e){this.options=a({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=b(this.options.enable,!0),this.state=Ae,this.simultaneous={},this.requireFail=[]}function Pe(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ve(e){return e==W?"down":e==z?"up":e==H?"left":e==j?"right":""}function Ne(e,t){var i=t.manager;return i?i.get(e):e}function Me(){Le.apply(this,arguments)}function Oe(){Me.apply(this,arguments),this.pX=null,this.pY=null}function Re(){Me.apply(this,arguments)}function De(){Le.apply(this,arguments),this._timer=null,this._input=null}function Fe(){Me.apply(this,arguments)}function qe(){Me.apply(this,arguments)}function Be(){Le.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function He(e,t){return(t=t||{}).recognizers=b(t.recognizers,He.defaults.preset),new je(e,t)}Le.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ne(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=Ne(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=Ne(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=Ne(e,this);var t=k(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var i=this,e=this.state;function n(e){i.manager.emit(e,t)}e<8&&n(i.options.event+Pe(e)),n(i.options.event),t.additionalEvent&&n(t.additionalEvent),8<=e&&n(i.options.event+Pe(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ae)))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ae),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},f(Me,Le,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,s=this.attrTest(e);return n&&(i&q||!s)?16|t:n||s?i&F?8|t:2&t?4|t:2:32}}),f(Oe,Me,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var e=this.options.direction,t=[];return e&G&&t.push(ke),e&U&&t.push(Se),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,s=e.direction,r=e.deltaX,a=e.deltaY;return s&t.direction||(t.direction&G?(s=0===r?B:r<0?H:j,i=r!=this.pX,n=Math.abs(e.deltaX)):(s=0===a?B:a<0?z:W,i=a!=this.pY,n=Math.abs(e.deltaY))),e.direction=s,i&&n>t.threshold&&s&t.direction},attrTest:function(e){return Me.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ve(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(Re,Me,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(De,Le,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,s=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(F|q)&&!s)this.reset();else if(e.eventType&D)this.reset(),this._timer=h(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&F)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&F?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),f(Fe,Me,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ee]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),f(qe,Me,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:G|U,pointers:1},getTouchAction:function(){return Oe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(G|U)?t=e.overallVelocity:i&G?t=e.overallVelocityX:i&U&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&m(t)>this.options.velocity&&e.eventType&F},emit:function(e){var t=Ve(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(Be,Le,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Te]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,s=e.deltaTime<t.time;if(this.reset(),e.eventType&D&&0===this.count)return this.failTimeout();if(n&&s&&i){if(e.eventType!=F)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||ie(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&r?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),He.VERSION="2.0.7",He.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Fe,{enable:!1}],[Re,{enable:!1},["rotate"]],[qe,{direction:G}],[Oe,{direction:G},["swipe"]],[Be],[Be,{event:"doubletap",taps:2},["tap"]],[De]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function je(e,t){var i;this.options=a({},He.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((i=this).options.inputClass||(N?de:M?ve:V?ye:oe))(i,Q),this.touchAction=new Ie(this,this.options.touchAction),ze(this,!0),u(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ze(i,n){var s,r=i.element;r.style&&(u(i.options.cssProps,function(e,t){s=A(r.style,t),n?(i.oldCssProps[s]=r.style[s],r.style[s]=e):r.style[s]=i.oldCssProps[s]||""}),n||(i.oldCssProps={}))}je.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var i;this.touchAction.preventDefaults(e);var n=this.recognizers,s=t.curRecognizer;(!s||s&&8&s.state)&&(s=t.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===t.stopped||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(e),!s&&14&i.state&&(s=t.curRecognizer=i),r++}},get:function(e){if(e instanceof Le)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(n(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=k(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==g&&t!==g){var i=this.handlers;return u(S(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==g){var i=this.handlers;return u(S(e),function(e){t?i[e]&&i[e].splice(k(i[e],t),1):delete i[e]}),this}},emit:function(e,t){var i,n,s;this.options.domEvents&&(i=e,n=t,(s=o.createEvent("Event")).initEvent(i,!0,!0),(s.gesture=n).target.dispatchEvent(s));var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<r.length;)r[a](t),a++}},destroy:function(){this.element&&ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(He,{INPUT_START:D,INPUT_MOVE:2,INPUT_END:F,INPUT_CANCEL:q,STATE_POSSIBLE:Ae,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:B,DIRECTION_LEFT:H,DIRECTION_RIGHT:j,DIRECTION_UP:z,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:G,DIRECTION_VERTICAL:U,DIRECTION_ALL:Y,Manager:je,Input:K,TouchAction:Ie,TouchInput:ve,MouseInput:oe,PointerEventInput:de,TouchMouseInput:ye,SingleTouchInput:fe,Recognizer:Le,AttrRecognizer:Me,Tap:Be,Pan:Oe,Swipe:qe,Pinch:Re,Rotate:Fe,Press:De,on:w,off:x,each:u,merge:p,extend:d,assign:a,inherit:f,bindFn:_,prefixed:A}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=He,"function"==typeof define&&define.amd?define(function(){return He}):void 0!==We&&We.exports?We.exports=He:r.Hammer=He}(window,document)},{}],"math-sign-polyfill":[function(e,t,i){Math.sign||(Math.sign=function(e){return(0<e)-(e<0)||+e})},{}],setimmediate:[function(e,t,i){(function(f,e){!function(i,n){"use strict";if(!i.setImmediate){var s,r,t,a,e,o=1,l={},c=!1,h=i.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(i);u=u&&u.setTimeout?u:i,"[object process]"==={}.toString.call(i.process)?s=function(e){f.nextTick(function(){p(e)})}:!function(){if(i.postMessage&&!i.importScripts){var e=!0,t=i.onmessage;return i.onmessage=function(){e=!1},i.postMessage("","*"),i.onmessage=t,e}}()?i.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){p(e.data)},s=function(e){t.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,s=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):s=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",e=function(e){e.source===i&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},i.addEventListener?i.addEventListener("message",e,!1):i.attachEvent("onmessage",e),s=function(e){i.postMessage(a+e,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[o]=n,s(o),o++},u.clearImmediate=d}function d(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:26}],underscore:[function(e,j,z){(function(){var e=this,t=e._,n=Array.prototype,a=Object.prototype,i=Function.prototype,s=n.push,l=n.slice,u=a.toString,r=a.hasOwnProperty,o=Array.isArray,c=Object.keys,h=i.bind,d=Object.create,p=function(){},f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};void 0!==z?(void 0!==j&&j.exports&&(z=j.exports=f),z._=f):e._=f,f.VERSION="1.8.3";var g=function(s,r,e){if(void 0===r)return s;switch(null==e?3:e){case 1:return function(e){return s.call(r,e)};case 2:return function(e,t){return s.call(r,e,t)};case 3:return function(e,t,i){return s.call(r,e,t,i)};case 4:return function(e,t,i,n){return s.call(r,e,t,i,n)}}return function(){return s.apply(r,arguments)}},m=function(e,t,i){return null==e?f.identity:f.isFunction(e)?g(e,t,i):f.isObject(e)?f.matcher(e):f.property(e)};f.iteratee=function(e,t){return m(e,t,1/0)};var v=function(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var i=1;i<t;i++)for(var n=arguments[i],s=l(n),r=s.length,a=0;a<r;a++){var o=s[a];c&&void 0!==e[o]||(e[o]=n[o])}return e}},_=function(e){if(!f.isObject(e))return{};if(d)return d(e);p.prototype=e;var t=new p;return p.prototype=null,t},y=function(t){return function(e){return null==e?void 0:e[t]}},b=Math.pow(2,53)-1,w=y("length"),x=function(e){var t=w(e);return"number"==typeof t&&0<=t&&t<=b};function T(o){return function(e,t,i,n){t=g(t,n,4);var s=!x(e)&&f.keys(e),r=(s||e).length,a=0<o?0:r-1;return arguments.length<3&&(i=e[s?s[a]:a],a+=o),function(e,t,i,n,s,r){for(;0<=s&&s<r;s+=o){var a=n?n[s]:s;i=t(i,e[a],a,e)}return i}(e,t,i,s,a,r)}}f.each=f.forEach=function(e,t,i){var n,s;if(t=g(t,i),x(e))for(n=0,s=e.length;n<s;n++)t(e[n],n,e);else{var r=f.keys(e);for(n=0,s=r.length;n<s;n++)t(e[r[n]],r[n],e)}return e},f.map=f.collect=function(e,t,i){t=m(t,i);for(var n=!x(e)&&f.keys(e),s=(n||e).length,r=Array(s),a=0;a<s;a++){var o=n?n[a]:a;r[a]=t(e[o],o,e)}return r},f.reduce=f.foldl=f.inject=T(1),f.reduceRight=f.foldr=T(-1),f.find=f.detect=function(e,t,i){var n;if(void 0!==(n=x(e)?f.findIndex(e,t,i):f.findKey(e,t,i))&&-1!==n)return e[n]},f.filter=f.select=function(e,n,t){var s=[];return n=m(n,t),f.each(e,function(e,t,i){n(e,t,i)&&s.push(e)}),s},f.reject=function(e,t,i){return f.filter(e,f.negate(m(t)),i)},f.every=f.all=function(e,t,i){t=m(t,i);for(var n=!x(e)&&f.keys(e),s=(n||e).length,r=0;r<s;r++){var a=n?n[r]:r;if(!t(e[a],a,e))return!1}return!0},f.some=f.any=function(e,t,i){t=m(t,i);for(var n=!x(e)&&f.keys(e),s=(n||e).length,r=0;r<s;r++){var a=n?n[r]:r;if(t(e[a],a,e))return!0}return!1},f.contains=f.includes=f.include=function(e,t,i,n){return x(e)||(e=f.values(e)),("number"!=typeof i||n)&&(i=0),0<=f.indexOf(e,t,i)},f.invoke=function(e,i){var n=l.call(arguments,2),s=f.isFunction(i);return f.map(e,function(e){var t=s?i:e[i];return null==t?t:t.apply(e,n)})},f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matcher(t))},f.findWhere=function(e,t){return f.find(e,f.matcher(t))},f.max=function(e,n,t){var i,s,r=-1/0,a=-1/0;if(null==n&&null!=e)for(var o=0,l=(e=x(e)?e:f.values(e)).length;o<l;o++)i=e[o],r<i&&(r=i);else n=m(n,t),f.each(e,function(e,t,i){s=n(e,t,i),(a<s||s===-1/0&&r===-1/0)&&(r=e,a=s)});return r},f.min=function(e,n,t){var i,s,r=1/0,a=1/0;if(null==n&&null!=e)for(var o=0,l=(e=x(e)?e:f.values(e)).length;o<l;o++)(i=e[o])<r&&(r=i);else n=m(n,t),f.each(e,function(e,t,i){((s=n(e,t,i))<a||s===1/0&&r===1/0)&&(r=e,a=s)});return r},f.shuffle=function(e){for(var t,i=x(e)?e:f.values(e),n=i.length,s=Array(n),r=0;r<n;r++)(t=f.random(0,r))!==r&&(s[r]=s[t]),s[t]=i[r];return s},f.sample=function(e,t,i){return null==t||i?(x(e)||(e=f.values(e)),e[f.random(e.length-1)]):f.shuffle(e).slice(0,Math.max(0,t))},f.sortBy=function(e,n,t){return n=m(n,t),f.pluck(f.map(e,function(e,t,i){return{value:e,index:t,criteria:n(e,t,i)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(n<i||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")};var E=function(a){return function(n,s,e){var r={};return s=m(s,e),f.each(n,function(e,t){var i=s(e,t,n);a(r,e,i)}),r}};f.groupBy=E(function(e,t,i){f.has(e,i)?e[i].push(t):e[i]=[t]}),f.indexBy=E(function(e,t,i){e[i]=t}),f.countBy=E(function(e,t,i){f.has(e,i)?e[i]++:e[i]=1}),f.toArray=function(e){return e?f.isArray(e)?l.call(e):x(e)?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:x(e)?e.length:f.keys(e).length},f.partition=function(e,n,t){n=m(n,t);var s=[],r=[];return f.each(e,function(e,t,i){(n(e,t,i)?s:r).push(e)}),[s,r]},f.first=f.head=f.take=function(e,t,i){if(null!=e)return null==t||i?e[0]:f.initial(e,e.length-t)},f.initial=function(e,t,i){return l.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},f.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:f.rest(e,Math.max(0,e.length-t))},f.rest=f.tail=f.drop=function(e,t,i){return l.call(e,null==t||i?1:t)},f.compact=function(e){return f.filter(e,f.identity)};var S=function(e,t,i,n){for(var s=[],r=0,a=n||0,o=w(e);a<o;a++){var l=e[a];if(x(l)&&(f.isArray(l)||f.isArguments(l))){t||(l=S(l,t,i));var c=0,h=l.length;for(s.length+=h;c<h;)s[r++]=l[c++]}else i||(s[r++]=l)}return s};function k(r){return function(e,t,i){t=m(t,i);for(var n=w(e),s=0<r?0:n-1;0<=s&&s<n;s+=r)if(t(e[s],s,e))return s;return-1}}function C(r,a,o){return function(e,t,i){var n=0,s=w(e);if("number"==typeof i)0<r?n=0<=i?i:Math.max(i+s,n):s=0<=i?Math.min(i+1,s):i+s+1;else if(o&&i&&s)return e[i=o(e,t)]===t?i:-1;if(t!=t)return 0<=(i=a(l.call(e,n,s),f.isNaN))?i+n:-1;for(i=0<r?n:s-1;0<=i&&i<s;i+=r)if(e[i]===t)return i;return-1}}f.flatten=function(e,t){return S(e,t,!1)},f.without=function(e){return f.difference(e,l.call(arguments,1))},f.uniq=f.unique=function(e,t,i,n){f.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=m(i,n));for(var s=[],r=[],a=0,o=w(e);a<o;a++){var l=e[a],c=i?i(l,a,e):l;t?(a&&r===c||s.push(l),r=c):i?f.contains(r,c)||(r.push(c),s.push(l)):f.contains(s,l)||s.push(l)}return s},f.union=function(){return f.uniq(S(arguments,!0,!0))},f.intersection=function(e){for(var t=[],i=arguments.length,n=0,s=w(e);n<s;n++){var r=e[n];if(!f.contains(t,r)){for(var a=1;a<i&&f.contains(arguments[a],r);a++);a===i&&t.push(r)}}return t},f.difference=function(e){var t=S(arguments,!0,!0,1);return f.filter(e,function(e){return!f.contains(t,e)})},f.zip=function(){return f.unzip(arguments)},f.unzip=function(e){for(var t=e&&f.max(e,w).length||0,i=Array(t),n=0;n<t;n++)i[n]=f.pluck(e,n);return i},f.object=function(e,t){for(var i={},n=0,s=w(e);n<s;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},f.findIndex=k(1),f.findLastIndex=k(-1),f.sortedIndex=function(e,t,i,n){for(var s=(i=m(i,n,1))(t),r=0,a=w(e);r<a;){var o=Math.floor((r+a)/2);i(e[o])<s?r=o+1:a=o}return r},f.indexOf=C(1,f.findIndex,f.sortedIndex),f.lastIndexOf=C(-1,f.findLastIndex),f.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=Array(n),r=0;r<n;r++,e+=i)s[r]=e;return s};var I=function(e,t,i,n,s){if(!(n instanceof t))return e.apply(i,s);var r=_(e.prototype),a=e.apply(r,s);return f.isObject(a)?a:r};f.bind=function(e,t){if(h&&e.bind===h)return h.apply(e,l.call(arguments,1));if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");var i=l.call(arguments,2),n=function(){return I(e,n,t,this,i.concat(l.call(arguments)))};return n},f.partial=function(s){var r=l.call(arguments,1),a=function(){for(var e=0,t=r.length,i=Array(t),n=0;n<t;n++)i[n]=r[n]===f?arguments[e++]:r[n];for(;e<arguments.length;)i.push(arguments[e++]);return I(s,a,this,this,i)};return a},f.bindAll=function(e){var t,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)e[i=arguments[t]]=f.bind(e[i],e);return e},f.memoize=function(n,s){var r=function(e){var t=r.cache,i=""+(s?s.apply(this,arguments):e);return f.has(t,i)||(t[i]=n.apply(this,arguments)),t[i]};return r.cache={},r},f.delay=function(e,t){var i=l.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},f.defer=f.partial(f.delay,f,1),f.throttle=function(i,n,s){var r,a,o,l=null,c=0;s||(s={});var h=function(){c=!1===s.leading?0:f.now(),l=null,o=i.apply(r,a),l||(r=a=null)};return function(){var e=f.now();c||!1!==s.leading||(c=e);var t=n-(e-c);return r=this,a=arguments,t<=0||n<t?(l&&(clearTimeout(l),l=null),c=e,o=i.apply(r,a),l||(r=a=null)):l||!1===s.trailing||(l=setTimeout(h,t)),o}},f.debounce=function(t,i,n){var s,r,a,o,l,c=function(){var e=f.now()-o;e<i&&0<=e?s=setTimeout(c,i-e):(s=null,n||(l=t.apply(a,r),s||(a=r=null)))};return function(){a=this,r=arguments,o=f.now();var e=n&&!s;return s||(s=setTimeout(c,i)),e&&(l=t.apply(a,r),a=r=null),l}},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var i=arguments,n=i.length-1;return function(){for(var e=n,t=i[n].apply(this,arguments);e--;)t=i[e].call(this,t);return t}},f.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},f.before=function(e,t){var i;return function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},f.once=f.partial(f.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function P(e,t){var i=L.length,n=e.constructor,s=f.isFunction(n)&&n.prototype||a,r="constructor";for(f.has(e,r)&&!f.contains(t,r)&&t.push(r);i--;)(r=L[i])in e&&e[r]!==s[r]&&!f.contains(t,r)&&t.push(r)}f.keys=function(e){if(!f.isObject(e))return[];if(c)return c(e);var t=[];for(var i in e)f.has(e,i)&&t.push(i);return A&&P(e,t),t},f.allKeys=function(e){if(!f.isObject(e))return[];var t=[];for(var i in e)t.push(i);return A&&P(e,t),t},f.values=function(e){for(var t=f.keys(e),i=t.length,n=Array(i),s=0;s<i;s++)n[s]=e[t[s]];return n},f.mapObject=function(e,t,i){t=m(t,i);for(var n,s=f.keys(e),r=s.length,a={},o=0;o<r;o++)a[n=s[o]]=t(e[n],n,e);return a},f.pairs=function(e){for(var t=f.keys(e),i=t.length,n=Array(i),s=0;s<i;s++)n[s]=[t[s],e[t[s]]];return n},f.invert=function(e){for(var t={},i=f.keys(e),n=0,s=i.length;n<s;n++)t[e[i[n]]]=i[n];return t},f.functions=f.methods=function(e){var t=[];for(var i in e)f.isFunction(e[i])&&t.push(i);return t.sort()},f.extend=v(f.allKeys),f.extendOwn=f.assign=v(f.keys),f.findKey=function(e,t,i){t=m(t,i);for(var n,s=f.keys(e),r=0,a=s.length;r<a;r++)if(t(e[n=s[r]],n,e))return n},f.pick=function(e,t,i){var n,s,r={},a=e;if(null==a)return r;f.isFunction(t)?(s=f.allKeys(a),n=g(t,i)):(s=S(arguments,!1,!1,1),n=function(e,t,i){return t in i},a=Object(a));for(var o=0,l=s.length;o<l;o++){var c=s[o],h=a[c];n(h,c,a)&&(r[c]=h)}return r},f.omit=function(e,t,i){if(f.isFunction(t))t=f.negate(t);else{var n=f.map(S(arguments,!1,!1,1),String);t=function(e,t){return!f.contains(n,t)}}return f.pick(e,t,i)},f.defaults=v(f.allKeys,!0),f.create=function(e,t){var i=_(e);return t&&f.extendOwn(i,t),i},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e},f.isMatch=function(e,t){var i=f.keys(t),n=i.length;if(null==e)return!n;for(var s=Object(e),r=0;r<n;r++){var a=i[r];if(t[a]!==s[a]||!(a in s))return!1}return!0};var V=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var s=u.call(e);if(s!==u.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var r="[object Array]"===s;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,o=t.constructor;if(a!==o&&!(f.isFunction(a)&&a instanceof a&&f.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),r){if((l=e.length)!==t.length)return!1;for(;l--;)if(!V(e[l],t[l],i,n))return!1}else{var c,h=f.keys(e);if(l=h.length,f.keys(t).length!==l)return!1;for(;l--;)if(c=h[l],!f.has(t,c)||!V(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};f.isEqual=function(e,t){return V(e,t)},f.isEmpty=function(e){return null==e||(x(e)&&(f.isArray(e)||f.isString(e)||f.isArguments(e))?0===e.length:0===f.keys(e).length)},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=o||function(e){return"[object Array]"===u.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){f["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return f.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&e!==+e},f.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){return null!=e&&r.call(e,t)},f.noConflict=function(){return e._=t,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=y,f.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},f.matcher=f.matches=function(t){return t=f.extendOwn({},t),function(e){return f.isMatch(e,t)}},f.times=function(e,t,i){var n=Array(Math.max(0,e));t=g(t,i,1);for(var s=0;s<e;s++)n[s]=t(s);return n},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=f.invert(N),O=function(t){var i=function(e){return t[e]},e="(?:"+f.keys(t).join("|")+")",n=RegExp(e),s=RegExp(e,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(s,i):e}};f.escape=O(N),f.unescape=O(M),f.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),f.isFunction(n)?n.call(e):n};var R=0;f.uniqueId=function(e){var t=++R+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,B=function(e){return"\\"+F[e]};f.template=function(r,e,t){!e&&t&&(e=t),e=f.defaults({},e,f.templateSettings);var i=RegExp([(e.escape||D).source,(e.interpolate||D).source,(e.evaluate||D).source].join("|")+"|$","g"),a=0,o="__p+='";r.replace(i,function(e,t,i,n,s){return o+=r.slice(a,s).replace(q,B),a=s+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":n&&(o+="';\n"+n+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var n=new Function(e.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return n.call(this,e,f)},l=e.variable||"obj";return s.source="function("+l+"){\n"+o+"}",s},f.chain=function(e){var t=f(e);return t._chain=!0,t};var H=function(e,t){return e._chain?f(t).chain():t};f.mixin=function(i){f.each(f.functions(i),function(e){var t=f[e]=i[e];f.prototype[e]=function(){var e=[this._wrapped];return s.apply(e,arguments),H(this,t.apply(f,e))}})},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=n[t];f.prototype[t]=function(){var e=this._wrapped;return i.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],H(this,e)}}),f.each(["concat","join","slice"],function(e){var t=n[e];f.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}).call(this)},{}],webfontloader:[function(e,te,t){!function(){function n(e,t,i){return e.call.apply(e.bind,arguments)}function s(t,i,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(i,e)}}return function(){return t.apply(i,arguments)}}function f(e,t,i){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:s).apply(null,arguments)}var o=Date.now||function(){return+new Date};function t(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var l=!!window.FontFace;function c(e,t,i,n){if(t=e.c.createElement(t),i)for(var s in i)i.hasOwnProperty(s)&&("style"==s?t.style.cssText=i[s]:t.setAttribute(s,i[s]));return n&&t.appendChild(e.c.createTextNode(n)),t}function h(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),s=0;s<t.length;s+=1){for(var r=!1,a=0;a<n.length;a+=1)if(t[s]===n[a]){r=!0;break}r||n.push(t[s])}for(t=[],s=0;s<n.length;s+=1){for(r=!1,a=0;a<i.length;a+=1)if(n[s]===i[a]){r=!0;break}r||t.push(n[s])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function r(e,t){for(var i=e.className.split(/\s+/),n=0,s=i.length;n<s;n++)if(i[n]==t)return!0;return!1}function u(e,t,i){function n(){a&&s&&(a(r),a=null)}t=c(e,"link",{rel:"stylesheet",href:t,media:"all"});var s=!1,r=null,a=i||null;l?(t.onload=function(){s=!0,n()},t.onerror=function(){s=!0,r=Error("Stylesheet failed to load"),n()}):setTimeout(function(){s=!0,n()},0),h(e,"head",t)}function d(e,t,i,n){var s=e.c.getElementsByTagName("head")[0];if(s){var r=c(e,"script",{src:t}),a=!1;return r.onload=r.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&s.removeChild(r))},s.appendChild(r),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),r}return null}function p(){this.a=0,this.c=null}function m(e){return e.a++,function(){e.a--,a(e)}}function v(e,t){e.c=t,a(e)}function a(e){0==e.a&&e.c&&(e.c(),e.c=null)}function _(e){this.a=e||"-"}function y(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function b(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var n=e[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function w(e){return e.a+e.f}function x(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function T(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new _("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function E(e){if(e.g){var t=r(e.f,e.a.c("wf","active")),i=[],n=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),g(e.f,i,n)}S(e,"inactive")}function S(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,w(i)):e.h[t]())}function k(){this.c={}}function C(e,t){this.c=e,this.f=t,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function I(e){h(e.c,"body",e.a)}function A(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(e.c)+";font-style:"+x(e)+";font-weight:"+e.f+"00;"}function L(e,t,i,n,s,r){this.g=e,this.j=t,this.a=n,this.c=i,this.f=s||3e3,this.h=r||void 0}function P(e,t,i,n,s,r,a){this.v=e,this.B=t,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=s||3e3,this.u=r||null,this.m=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.m=new C(this.c,this.s),e=A(e=new y(this.a.c+",serif",w(this.a))),this.g.a.style.cssText=e,e=A(e=new y(this.a.c+",sans-serif",w(this.a))),this.h.a.style.cssText=e,e=A(e=new y("serif",w(this.a))),this.j.a.style.cssText=e,e=A(e=new y("sans-serif",w(this.a))),this.m.a.style.cssText=e,I(this.g),I(this.h),I(this.j),I(this.m)}_.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},L.prototype.start=function(){var s=this.c.o.document,r=this,a=o(),e=new Promise(function(i,n){!function t(){var e;o()-a>=r.f?n():s.fonts.load((e=r.a,x(e)+" "+e.f+"00 300px "+b(e.c)),r.h).then(function(e){1<=e.length?i():setTimeout(t,25)},function(){n()})}()}),i=null,t=new Promise(function(e,t){i=setTimeout(t,r.f)});Promise.race([t,e]).then(function(){i&&(clearTimeout(i),i=null),r.g(r.a)},function(){r.j(r.a)})};var V={D:"serif",C:"sans-serif"},N=null;function M(){if(null===N){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return N}function O(e,t,i){for(var n in V)if(V.hasOwnProperty(n)&&t===e.f[V[n]]&&i===e.f[V[n]])return!0;return!1}function R(e){var t,i=e.g.a.offsetWidth,n=e.h.a.offsetWidth;(t=i===e.f.serif&&n===e.f["sans-serif"])||(t=M()&&O(e,i,n)),t?o()-e.A>=e.w?M()&&O(e,i,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?D(e,e.v):D(e,e.B):setTimeout(f(function(){R(this)},e),50):D(e,e.v)}function D(e,t){setTimeout(f(function(){i(this.g.a),i(this.h.a),i(this.j.a),i(this.m.a),t(this.a)},e),0)}function F(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}P.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=o(),R(this)};var q=null;function B(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&g(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),S(e,"active")):E(e.a))}function e(e){this.j=e,this.a=new k,this.h=0,this.f=this.g=!0}function H(e,t){this.c=e,this.a=t}function j(e,t){this.c=e,this.a=t}function z(e,t){this.c=e||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=t||""}F.prototype.g=function(e){var t=this.a;t.g&&g(t.f,[t.a.c("wf",e.c,w(e).toString(),"active")],[t.a.c("wf",e.c,w(e).toString(),"loading"),t.a.c("wf",e.c,w(e).toString(),"inactive")]),S(t,"fontactive",e),this.m=!0,B(this)},F.prototype.h=function(e){var t=this.a;if(t.g){var i=r(t.f,t.a.c("wf",e.c,w(e).toString(),"active")),n=[],s=[t.a.c("wf",e.c,w(e).toString(),"loading")];i||n.push(t.a.c("wf",e.c,w(e).toString(),"inactive")),g(t.f,n,s)}S(t,"fontinactive",e),B(this)},e.prototype.load=function(e){this.c=new t(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(s,e,t){var i=[],n=t.timeout;r=e,r.g&&g(r.f,[r.a.c("wf","loading")]),S(r,"loading");var r;var i=function(e,t,i){var n,s=[];for(n in t)if(t.hasOwnProperty(n)){var r=e.c[n];r&&s.push(r(t[n],i))}return s}(s.a,t,s.c),a=new F(s.c,e,n);for(s.h=i.length,e=0,t=i.length;e<t;e++)i[e].load(function(e,t,i){var n,c,h,u,d,p;c=a,h=e,u=t,d=i,p=0==--(n=s).h,(n.f||n.g)&&setTimeout(function(){var e=d||null,t=u||{};if(0===h.length&&p)E(c.a);else{c.f+=h.length,p&&(c.j=p);var i,n=[];for(i=0;i<h.length;i++){var s=h[i],r=t[s.c],a=c.a,o=s;if(a.g&&g(a.f,[a.a.c("wf",o.c,w(o).toString(),"loading")]),S(a,"fontloading",o),(a=null)===q)if(window.FontFace){var o=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),l=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);q=o?42<parseInt(o[1],10):!l}else q=!1;a=q?new L(f(c.g,c),f(c.h,c),c.c,s,c.s,r):new P(f(c.g,c),f(c.h,c),c.c,s,c.s,e,r),n.push(a)}for(i=0;i<n.length;i++)n[i].start()}},0)})}(this,new T(this.c,e),e)},H.prototype.load=function(a){var t=this,o=t.a.projectId,e=t.a.version;if(o){var l=t.c.o;d(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+o+".js"+(e?"?v="+e:""),function(e){e?a([]):(l["__MonotypeConfiguration__"+o]=function(){return t.a},function e(){if(l["__mti_fntLst"+o]){var t,i=l["__mti_fntLst"+o](),n=[];if(i)for(var s=0;s<i.length;s++){var r=i[s].fontfamily;null!=i[s].fontStyle&&null!=i[s].fontWeight?(t=i[s].fontStyle+i[s].fontWeight,n.push(new y(r,t))):n.push(new y(r))}a(n)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+o}else a([])},j.prototype.load=function(e){var t,i,n=this.a.urls||[],s=this.a.families||[],r=this.a.testStrings||{},a=new p;for(t=0,i=n.length;t<i;t++)u(this.c,n[t],m(a));var o=[];for(t=0,i=s.length;t<i;t++)if((n=s[t].split(":"))[1])for(var l=n[1].split(","),c=0;c<l.length;c+=1)o.push(new y(n[0],l[c]));else o.push(new y(n[0]));v(a,function(){e(o,r)})};function W(e){this.f=e,this.a=[],this.c={}}var G={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},U={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Y={i:"i",italic:"i",n:"n",normal:"n"},X=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function $(e,t){this.c=e,this.a=t}var K={Arimo:!0,Cousine:!0,Tinos:!0};function Q(e,t){this.c=e,this.a=t}function Z(e,t){this.c=e,this.f=t,this.a=[]}$.prototype.load=function(e){var t=new p,i=this.c,n=new z(this.a.api,this.a.text),s=this.a.families;!function(e,t){for(var i=t.length,n=0;n<i;n++){var s=t[n].split(":");3==s.length&&e.f.push(s.pop());var r="";2==s.length&&""!=s[1]&&(r=":"),e.a.push(s.join(r))}}(n,s);var r=new W(s);!function(e){for(var t=e.f.length,i=0;i<t;i++){var n=e.f[i].split(":"),s=n[0].replace(/\+/g," "),r=["n4"];if(2<=n.length){var a;if(a=[],o=n[1])for(var o,l=(o=o.split(",")).length,c=0;c<l;c++){var h;if((h=o[c]).match(/^[\w-]+$/))if(null==(d=X.exec(h.toLowerCase())))h="";else{if(h=null==(h=d[2])||""==h?"n":Y[h],null==(d=d[1])||""==d)d="4";else var u=U[d],d=u||(isNaN(d)?"4":d.substr(0,1));h=[h,d].join("")}else h="";h&&a.push(h)}0<a.length&&(r=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=G[n[0]])&&(e.c[s]=n))}for(e.c[s]||(n=G[s])&&(e.c[s]=n),n=0;n<r.length;n+=1)e.a.push(new y(s,r[n]))}}(r),u(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],n=0;n<t;n++)i.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),m(t)),v(t,function(){e(r.a,r.c,K)})},Q.prototype.load=function(a){var e=this.a.id,o=this.c.o;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)a([]);else if(o.Typekit&&o.Typekit.config&&o.Typekit.config.fn){e=o.Typekit.config.fn;for(var t=[],i=0;i<e.length;i+=2)for(var n=e[i],s=e[i+1],r=0;r<s.length;r++)t.push(new y(n,s[r]));try{o.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}a(t)}},2e3):a([])},Z.prototype.load=function(c){var e,t=this.f.id,i=this.c.o,h=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(e,t){for(var i=0,n=t.fonts.length;i<n;++i){var s=t.fonts[i];h.a.push(new y(s.name,(r="font-weight:"+s.weight+";font-style:"+s.style,l=o=a=void 0,a=4,o="n",l=null,r&&((l=r.match(/(normal|oblique|italic)/i))&&l[1]&&(o=l[1].substr(0,1).toLowerCase()),(l=r.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?a=7:/[1-9]00/.test(l[1])&&(a=parseInt(l[1].substr(0,1),10)))),o+a)))}var r,a,o,l;c(h.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(e){e&&c([])})):c([])};var J=new e(window);J.a.c.custom=function(e,t){return new j(t,e)},J.a.c.fontdeck=function(e,t){return new Z(t,e)},J.a.c.monotype=function(e,t){return new H(t,e)},J.a.c.typekit=function(e,t){return new Q(t,e)},J.a.c.google=function(e,t){return new $(t,e)};var ee={load:f(J.load,J)};"function"==typeof define&&define.amd?define(function(){return ee}):void 0!==te&&te.exports?te.exports=ee:(window.WebFont=ee,window.WebFontConfig&&J.load(window.WebFontConfig))}()},{}]},{},[37,"fullscreen-polyfill","math-sign-polyfill"]);