require=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/conversions.js":[function(require,module,exports){
var cssKeywords=require("color-name"),reverseKeywords={};for(var key in cssKeywords)cssKeywords.hasOwnProperty(key)&&(reverseKeywords[cssKeywords[key]]=key);var convert=module.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var model in convert)if(convert.hasOwnProperty(model)){if(!("channels"in convert[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert[model]))throw new Error("missing channel labels property: "+model);if(convert[model].labels.length!==convert[model].channels)throw new Error("channel and label counts mismatch: "+model);var channels=convert[model].channels,labels=convert[model].labels;delete convert[model].channels,delete convert[model].labels,Object.defineProperty(convert[model],"channels",{value:channels}),Object.defineProperty(convert[model],"labels",{value:labels})}function comparativeDistance(r,n){return Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2)+Math.pow(r[2]-n[2],2)}convert.rgb.hsl=function(r){var n,e,t=r[0]/255,a=r[1]/255,o=r[2]/255,c=Math.min(t,a,o),h=Math.max(t,a,o),s=h-c;return h===c?n=0:t===h?n=(a-o)/s:a===h?n=2+(o-t)/s:o===h&&(n=4+(t-a)/s),(n=Math.min(60*n,360))<0&&(n+=360),e=(c+h)/2,[n,100*(h===c?0:e<=.5?s/(h+c):s/(2-h-c)),100*e]},convert.rgb.hsv=function(r){var n,e,t=r[0],a=r[1],o=r[2],c=Math.min(t,a,o),h=Math.max(t,a,o),s=h-c;return e=0===h?0:s/h*1e3/10,h===c?n=0:t===h?n=(a-o)/s:a===h?n=2+(o-t)/s:o===h&&(n=4+(t-a)/s),(n=Math.min(60*n,360))<0&&(n+=360),[n,e,h/255*1e3/10]},convert.rgb.hwb=function(r){var n=r[0],e=r[1],t=r[2];return[convert.rgb.hsl(r)[0],100*(1/255*Math.min(n,Math.min(e,t))),100*(t=1-1/255*Math.max(n,Math.max(e,t)))]},convert.rgb.cmyk=function(r){var n,e=r[0]/255,t=r[1]/255,a=r[2]/255;return[100*((1-e-(n=Math.min(1-e,1-t,1-a)))/(1-n)||0),100*((1-t-n)/(1-n)||0),100*((1-a-n)/(1-n)||0),100*n]},convert.rgb.keyword=function(r){var n=reverseKeywords[r];if(n)return n;var e,t=1/0;for(var a in cssKeywords)if(cssKeywords.hasOwnProperty(a)){var o=comparativeDistance(r,cssKeywords[a]);o<t&&(t=o,e=a)}return e},convert.keyword.rgb=function(r){return cssKeywords[r]},convert.rgb.xyz=function(r){var n=r[0]/255,e=r[1]/255,t=r[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.1805*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)),100*(.2126*n+.7152*e+.0722*t),100*(.0193*n+.1192*e+.9505*t)]},convert.rgb.lab=function(r){var n=convert.rgb.xyz(r),e=n[0],t=n[1],a=n[2];return t/=100,a/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(t=t>.008856?Math.pow(t,1/3):7.787*t+16/116)-16,500*(e-t),200*(t-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},convert.hsl.rgb=function(r){var n,e,t,a,o,c=r[0]/360,h=r[1]/100,s=r[2]/100;if(0===h)return[o=255*s,o,o];n=2*s-(e=s<.5?s*(1+h):s+h-s*h),a=[0,0,0];for(var l=0;l<3;l++)(t=c+1/3*-(l-1))<0&&t++,t>1&&t--,o=6*t<1?n+6*(e-n)*t:2*t<1?e:3*t<2?n+(e-n)*(2/3-t)*6:n,a[l]=255*o;return a},convert.hsl.hsv=function(r){var n=r[0],e=r[1]/100,t=r[2]/100,a=e,o=Math.max(t,.01);return e*=(t*=2)<=1?t:2-t,a*=o<=1?o:2-o,[n,100*(0===t?2*a/(o+a):2*e/(t+e)),100*((t+e)/2)]},convert.hsv.rgb=function(r){var n=r[0]/60,e=r[1]/100,t=r[2]/100,a=Math.floor(n)%6,o=n-Math.floor(n),c=255*t*(1-e),h=255*t*(1-e*o),s=255*t*(1-e*(1-o));switch(t*=255,a){case 0:return[t,s,c];case 1:return[h,t,c];case 2:return[c,t,s];case 3:return[c,h,t];case 4:return[s,c,t];case 5:return[t,c,h]}},convert.hsv.hsl=function(r){var n,e,t,a=r[0],o=r[1]/100,c=r[2]/100,h=Math.max(c,.01);return t=(2-o)*c,e=o*h,[a,100*(e=(e/=(n=(2-o)*h)<=1?n:2-n)||0),100*(t/=2)]},convert.hwb.rgb=function(r){var n,e,t,a,o,c,h,s=r[0]/360,l=r[1]/100,v=r[2]/100,u=l+v;switch(u>1&&(l/=u,v/=u),t=6*s-(n=Math.floor(6*s)),0!=(1&n)&&(t=1-t),a=l+t*((e=1-v)-l),n){default:case 6:case 0:o=e,c=a,h=l;break;case 1:o=a,c=e,h=l;break;case 2:o=l,c=e,h=a;break;case 3:o=l,c=a,h=e;break;case 4:o=a,c=l,h=e;break;case 5:o=e,c=l,h=a}return[255*o,255*c,255*h]},convert.cmyk.rgb=function(r){var n=r[0]/100,e=r[1]/100,t=r[2]/100,a=r[3]/100;return[255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,t*(1-a)+a))]},convert.xyz.rgb=function(r){var n,e,t,a=r[0]/100,o=r[1]/100,c=r[2]/100;return e=-.9689*a+1.8758*o+.0415*c,t=.0557*a+-.204*o+1.057*c,n=(n=3.2406*a+-1.5372*o+-.4986*c)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,[255*(n=Math.min(Math.max(0,n),1)),255*(e=Math.min(Math.max(0,e),1)),255*(t=Math.min(Math.max(0,t),1))]},convert.xyz.lab=function(r){var n=r[0],e=r[1],t=r[2];return e/=100,t/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(e=e>.008856?Math.pow(e,1/3):7.787*e+16/116)-16,500*(n-e),200*(e-(t=t>.008856?Math.pow(t,1/3):7.787*t+16/116))]},convert.lab.xyz=function(r){var n,e,t,a=r[0];n=r[1]/500+(e=(a+16)/116),t=e-r[2]/200;var o=Math.pow(e,3),c=Math.pow(n,3),h=Math.pow(t,3);return e=o>.008856?o:(e-16/116)/7.787,n=c>.008856?c:(n-16/116)/7.787,t=h>.008856?h:(t-16/116)/7.787,[n*=95.047,e*=100,t*=108.883]},convert.lab.lch=function(r){var n,e=r[0],t=r[1],a=r[2];return(n=360*Math.atan2(a,t)/2/Math.PI)<0&&(n+=360),[e,Math.sqrt(t*t+a*a),n]},convert.lch.lab=function(r){var n,e=r[0],t=r[1];return n=r[2]/360*2*Math.PI,[e,t*Math.cos(n),t*Math.sin(n)]},convert.rgb.ansi16=function(r){var n=r[0],e=r[1],t=r[2],a=1 in arguments?arguments[1]:convert.rgb.hsv(r)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(t/255)<<2|Math.round(e/255)<<1|Math.round(n/255));return 2===a&&(o+=60),o},convert.hsv.ansi16=function(r){return convert.rgb.ansi16(convert.hsv.rgb(r),r[2])},convert.rgb.ansi256=function(r){var n=r[0],e=r[1],t=r[2];return n===e&&e===t?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(e/255*5)+Math.round(t/255*5)},convert.ansi16.rgb=function(r){var n=r%10;if(0===n||7===n)return r>50&&(n+=3.5),[n=n/10.5*255,n,n];var e=.5*(1+~~(r>50));return[(1&n)*e*255,(n>>1&1)*e*255,(n>>2&1)*e*255]},convert.ansi256.rgb=function(r){if(r>=232){var n=10*(r-232)+8;return[n,n,n]}var e;return r-=16,[Math.floor(r/36)/5*255,Math.floor((e=r%36)/6)/5*255,e%6/5*255]},convert.rgb.hex=function(r){var n=(((255&Math.round(r[0]))<<16)+((255&Math.round(r[1]))<<8)+(255&Math.round(r[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},convert.hex.rgb=function(r){var n=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var e=n[0];3===n[0].length&&(e=e.split("").map(function(r){return r+r}).join(""));var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},convert.rgb.hcg=function(r){var n,e=r[0]/255,t=r[1]/255,a=r[2]/255,o=Math.max(Math.max(e,t),a),c=Math.min(Math.min(e,t),a),h=o-c;return n=h<=0?0:o===e?(t-a)/h%6:o===t?2+(a-e)/h:4+(e-t)/h+4,n/=6,[360*(n%=1),100*h,100*(h<1?c/(1-h):0)]},convert.hsl.hcg=function(r){var n=r[1]/100,e=r[2]/100,t=1,a=0;return(t=e<.5?2*n*e:2*n*(1-e))<1&&(a=(e-.5*t)/(1-t)),[r[0],100*t,100*a]},convert.hsv.hcg=function(r){var n=r[1]/100,e=r[2]/100,t=n*e,a=0;return t<1&&(a=(e-t)/(1-t)),[r[0],100*t,100*a]},convert.hcg.rgb=function(r){var n=r[0]/360,e=r[1]/100,t=r[2]/100;if(0===e)return[255*t,255*t,255*t];var a,o=[0,0,0],c=n%1*6,h=c%1,s=1-h;switch(Math.floor(c)){case 0:o[0]=1,o[1]=h,o[2]=0;break;case 1:o[0]=s,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=h;break;case 3:o[0]=0,o[1]=s,o[2]=1;break;case 4:o[0]=h,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=s}return a=(1-e)*t,[255*(e*o[0]+a),255*(e*o[1]+a),255*(e*o[2]+a)]},convert.hcg.hsv=function(r){var n=r[1]/100,e=n+r[2]/100*(1-n),t=0;return e>0&&(t=n/e),[r[0],100*t,100*e]},convert.hcg.hsl=function(r){var n=r[1]/100,e=r[2]/100*(1-n)+.5*n,t=0;return e>0&&e<.5?t=n/(2*e):e>=.5&&e<1&&(t=n/(2*(1-e))),[r[0],100*t,100*e]},convert.hcg.hwb=function(r){var n=r[1]/100,e=n+r[2]/100*(1-n);return[r[0],100*(e-n),100*(1-e)]},convert.hwb.hcg=function(r){var n=r[1]/100,e=1-r[2]/100,t=e-n,a=0;return t<1&&(a=(e-t)/(1-t)),[r[0],100*t,100*a]},convert.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]},convert.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]},convert.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]},convert.gray.hsl=convert.gray.hsv=function(r){return[0,0,r[0]]},convert.gray.hwb=function(r){return[0,100,r[0]]},convert.gray.cmyk=function(r){return[0,0,0,r[0]]},convert.gray.lab=function(r){return[r[0],0,0]},convert.gray.hex=function(r){var n=255&Math.round(r[0]/100*255),e=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(e.length)+e},convert.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]};

},{"color-name":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-name/index.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/index.js":[function(require,module,exports){
var conversions=require("./conversions"),route=require("./route"),convert={},models=Object.keys(conversions);function wrapRaw(e){var n=function(n){return null==n?n:(arguments.length>1&&(n=Array.prototype.slice.call(arguments)),e(n))};return"conversion"in e&&(n.conversion=e.conversion),n}function wrapRounded(e){var n=function(n){if(null==n)return n;arguments.length>1&&(n=Array.prototype.slice.call(arguments));var r=e(n);if("object"==typeof r)for(var o=r.length,t=0;t<o;t++)r[t]=Math.round(r[t]);return r};return"conversion"in e&&(n.conversion=e.conversion),n}models.forEach(function(e){convert[e]={},Object.defineProperty(convert[e],"channels",{value:conversions[e].channels}),Object.defineProperty(convert[e],"labels",{value:conversions[e].labels});var n=route(e);Object.keys(n).forEach(function(r){var o=n[r];convert[e][r]=wrapRounded(o),convert[e][r].raw=wrapRaw(o)})}),module.exports=convert;

},{"./conversions":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/conversions.js","./route":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/route.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/route.js":[function(require,module,exports){
var conversions=require("./conversions");function buildGraph(){for(var n={},r=Object.keys(conversions),e=r.length,t=0;t<e;t++)n[r[t]]={distance:-1,parent:null};return n}function deriveBFS(n){var r=buildGraph(),e=[n];for(r[n].distance=0;e.length;)for(var t=e.pop(),o=Object.keys(conversions[t]),i=o.length,a=0;a<i;a++){var s=o[a],c=r[s];-1===c.distance&&(c.distance=r[t].distance+1,c.parent=t,e.unshift(s))}return r}function link(n,r){return function(e){return r(n(e))}}function wrapConversion(n,r){for(var e=[r[n].parent,n],t=conversions[r[n].parent][n],o=r[n].parent;r[o].parent;)e.unshift(r[o].parent),t=link(conversions[r[o].parent][o],t),o=r[o].parent;return t.conversion=e,t}module.exports=function(n){for(var r=deriveBFS(n),e={},t=Object.keys(r),o=t.length,i=0;i<o;i++){var a=t[i];null!==r[a].parent&&(e[a]=wrapConversion(a,r))}return e};

},{"./conversions":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/conversions.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-name/index.js":[function(require,module,exports){
"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-string/index.js":[function(require,module,exports){
var colorNames=require("color-name"),swizzle=require("simple-swizzle"),reverseNames={};for(var name in colorNames)colorNames.hasOwnProperty(name)&&(reverseNames[colorNames[name]]=name);var cs=module.exports={to:{},get:{}};function clamp(r,e,a){return Math.min(Math.max(e,r),a)}function hexDouble(r){var e=r.toString(16).toUpperCase();return e.length<2?"0"+e:e}cs.get=function(r){var e,a;switch(r.substring(0,3).toLowerCase()){case"hsl":e=cs.get.hsl(r),a="hsl";break;case"hwb":e=cs.get.hwb(r),a="hwb";break;default:e=cs.get.rgb(r),a="rgb"}return e?{model:a,value:e}:null},cs.get.rgb=function(r){if(!r)return null;var e,a,s,t=[0,0,0,1];if(e=r.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(s=e[2],e=e[1],a=0;a<3;a++){var n=2*a;t[a]=parseInt(e.slice(n,n+2),16)}s&&(t[3]=Math.round(parseInt(s,16)/255*100)/100)}else if(e=r.match(/^#([a-f0-9]{3,4})$/i)){for(s=(e=e[1])[3],a=0;a<3;a++)t[a]=parseInt(e[a]+e[a],16);s&&(t[3]=Math.round(parseInt(s+s,16)/255*100)/100)}else if(e=r.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(a=0;a<3;a++)t[a]=parseInt(e[a+1],0);e[4]&&(t[3]=parseFloat(e[4]))}else{if(!(e=r.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=r.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(t=colorNames[e[1]])?(t[3]=1,t):null:null;for(a=0;a<3;a++)t[a]=Math.round(2.55*parseFloat(e[a+1]));e[4]&&(t[3]=parseFloat(e[4]))}for(a=0;a<3;a++)t[a]=clamp(t[a],0,255);return t[3]=clamp(t[3],0,1),t},cs.get.hsl=function(r){if(!r)return null;var e=r.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,clamp(parseFloat(e[2]),0,100),clamp(parseFloat(e[3]),0,100),clamp(isNaN(a)?1:a,0,1)]}return null},cs.get.hwb=function(r){if(!r)return null;var e=r.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var a=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,clamp(parseFloat(e[2]),0,100),clamp(parseFloat(e[3]),0,100),clamp(isNaN(a)?1:a,0,1)]}return null},cs.to.hex=function(){var r=swizzle(arguments);return"#"+hexDouble(r[0])+hexDouble(r[1])+hexDouble(r[2])+(r[3]<1?hexDouble(Math.round(255*r[3])):"")},cs.to.rgb=function(){var r=swizzle(arguments);return r.length<4||1===r[3]?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"},cs.to.rgb.percent=function(){var r=swizzle(arguments),e=Math.round(r[0]/255*100),a=Math.round(r[1]/255*100),s=Math.round(r[2]/255*100);return r.length<4||1===r[3]?"rgb("+e+"%, "+a+"%, "+s+"%)":"rgba("+e+"%, "+a+"%, "+s+"%, "+r[3]+")"},cs.to.hsl=function(){var r=swizzle(arguments);return r.length<4||1===r[3]?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"},cs.to.hwb=function(){var r=swizzle(arguments),e="";return r.length>=4&&1!==r[3]&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"},cs.to.keyword=function(r){return reverseNames[r.slice(0,3)]};

},{"color-name":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-name/index.js","simple-swizzle":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/simple-swizzle/index.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/es6-promise/dist/es6-promise.js":[function(require,module,exports){
(function (process,global){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,n=void 0,o=void 0,i=function(t,e){h[r]=t,h[r+1]=e,2===(r+=2)&&(o?o(v):m())};var s="undefined"!=typeof window?window:void 0,u=s||{},c=u.MutationObserver||u.WebKitMutationObserver,a="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(v,1)}}var h=new Array(1e3);function v(){for(var t=0;t<r;t+=2){(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0}r=0}var p,d,_,y,m=void 0;function b(t,e){var r=this,n=new this.constructor(A);void 0===n[g]&&K(n);var o=r._state;if(o){var s=arguments[o-1];i(function(){return q(o,n,s,r._result)})}else Y(r,n,t,e);return n}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return x(e,t),e}a?m=function(){return process.nextTick(v)}:c?(d=0,_=new c(v),y=document.createTextNode(""),_.observe(y,{characterData:!0}),m=function(){y.data=d=++d%2}):f?((p=new MessageChannel).port1.onmessage=v,m=function(){return p.port2.postMessage(0)}):m=void 0===s&&"function"==typeof require?function(){try{var t=Function("return this")().require("vertx");return void 0!==(n=t.runOnLoop||t.runOnContext)?function(){n(v)}:l()}catch(t){return l()}}():l();var g=Math.random().toString(36).substring(2);function A(){}var j=void 0,S=1,E=2,T={error:null};function M(t){try{return t.then}catch(t){return T.error=t,T}}function P(e,r,n){r.constructor===e.constructor&&n===b&&r.constructor.resolve===w?function(t,e){e._state===S?O(t,e._result):e._state===E?F(t,e._result):Y(e,void 0,function(e){return x(t,e)},function(e){return F(t,e)})}(e,r):n===T?(F(e,T.error),T.error=null):void 0===n?O(e,r):t(n)?function(t,e,r){i(function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?x(t,r):O(t,r))},function(e){n||(n=!0,F(t,e))},t._label);!n&&o&&(n=!0,F(t,o))},t)}(e,r,n):O(e,r)}function x(t,e){var r,n;t===e?F(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?O(t,e):P(t,e,M(e)))}function C(t){t._onerror&&t._onerror(t._result),k(t)}function O(t,e){t._state===j&&(t._result=e,t._state=S,0!==t._subscribers.length&&i(k,t))}function F(t,e){t._state===j&&(t._state=E,t._result=e,i(C,t))}function Y(t,e,r,n){var o=t._subscribers,s=o.length;t._onerror=null,o[s]=e,o[s+S]=r,o[s+E]=n,0===s&&t._state&&i(k,t)}function k(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?q(r,n,o,i):o(i);t._subscribers.length=0}}function q(e,r,n,o){var i=t(n),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(t){return T.error=t,T}}(n,o))===T?(a=!0,u=s.error,s.error=null):c=!0,r===s)return void F(r,new TypeError("A promises callback cannot return that same promise."))}else s=o,c=!0;r._state!==j||(i&&c?x(r,s):a?F(r,u):e===S?O(r,s):e===E&&F(r,s))}var D=0;function K(t){t[g]=D++,t._state=void 0,t._result=void 0,t._subscribers=[]}var L=function(){function t(t,r){this._instanceConstructor=t,this.promise=new t(A),this.promise[g]||K(this.promise),e(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&O(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===j&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===w){var o=M(t);if(o===b&&t._state!==j)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===N){var i=new r(A);P(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===j&&(this._remaining--,t===E?F(n,r):this._result[e]=r),0===this._remaining&&O(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;Y(t,void 0,function(t){return r._settledAt(S,e,t)},function(t){return r._settledAt(E,e,t)})},t}();var N=function(){function e(t){this[g]=D++,this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){x(t,e)},function(e){F(t,e)})}catch(e){F(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return N.prototype.then=b,N.all=function(t){return new L(this,t).promise},N.race=function(t){var r=this;return e(t)?new r(function(e,n){for(var o=t.length,i=0;i<o;i++)r.resolve(t[i]).then(e,n)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},N.resolve=w,N.reject=function(t){var e=new this(A);return F(e,t),e},N._setScheduler=function(t){o=t},N._setAsap=function(t){i=t},N._asap=i,N.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=N},N.Promise=N,N});

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/process/browser.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars.runtime.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}exports.__esModule=!0;var _handlebarsBase=require("./handlebars/base"),base=_interopRequireWildcard(_handlebarsBase),_handlebarsSafeString=require("./handlebars/safe-string"),_handlebarsSafeString2=_interopRequireDefault(_handlebarsSafeString),_handlebarsException=require("./handlebars/exception"),_handlebarsException2=_interopRequireDefault(_handlebarsException),_handlebarsUtils=require("./handlebars/utils"),Utils=_interopRequireWildcard(_handlebarsUtils),_handlebarsRuntime=require("./handlebars/runtime"),runtime=_interopRequireWildcard(_handlebarsRuntime),_handlebarsNoConflict=require("./handlebars/no-conflict"),_handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict);function create(){var e=new base.HandlebarsEnvironment;return Utils.extend(e,base),e.SafeString=_handlebarsSafeString2.default,e.Exception=_handlebarsException2.default,e.Utils=Utils,e.escapeExpression=Utils.escapeExpression,e.VM=runtime,e.template=function(r){return runtime.template(r,e)},e}var inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.default=inst,exports.default=inst,module.exports=exports.default;

},{"./handlebars/base":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/base.js","./handlebars/exception":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/exception.js","./handlebars/no-conflict":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/no-conflict.js","./handlebars/runtime":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/runtime.js","./handlebars/safe-string":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/safe-string.js","./handlebars/utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/base.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=require("./utils"),_exception=require("./exception"),_exception2=_interopRequireDefault(_exception),_helpers=require("./helpers"),_decorators=require("./decorators"),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),VERSION="4.0.12";exports.VERSION=VERSION;var COMPILER_REVISION=7;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=REVISION_CHANGES;var objectType="[object Object]";function HandlebarsEnvironment(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},_helpers.registerDefaultHelpers(this),_decorators.registerDefaultDecorators(this)}HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2.default,log:_logger2.default.log,registerHelper:function(e,t){if(_utils.toString.call(e)===objectType){if(t)throw new _exception2.default("Arg not supported with multiple helpers");_utils.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(_utils.toString.call(e)===objectType)_utils.extend(this.partials,e);else{if(void 0===t)throw new _exception2.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(_utils.toString.call(e)===objectType){if(t)throw new _exception2.default("Arg not supported with multiple decorators");_utils.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var log=_logger2.default.log;exports.log=log,exports.createFrame=_utils.createFrame,exports.logger=_logger2.default;

},{"./decorators":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/decorators.js","./exception":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/exception.js","./helpers":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers.js","./logger":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/logger.js","./utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/decorators.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline=require("./decorators/inline"),_decoratorsInline2=_interopRequireDefault(_decoratorsInline);function registerDefaultDecorators(e){_decoratorsInline2.default(e)}

},{"./decorators/inline":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _utils=require("../utils");exports.default=function(r){r.registerDecorator("inline",function(r,t,a,e){var s=r;return t.partials||(t.partials={},s=function(e,s){var i=a.partials;a.partials=_utils.extend({},i,t.partials);var l=r(e,s);return a.partials=i,l}),t.partials[e.args[0]]=e.fn,s})},module.exports=exports.default;

},{"../utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/exception.js":[function(require,module,exports){
"use strict";exports.__esModule=!0;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(r,e){var t=e&&e.loc,o=void 0,c=void 0;t&&(r+=" - "+(o=t.start.line)+":"+(c=t.start.column));for(var s=Error.prototype.constructor.call(this,r),i=0;i<errorProps.length;i++)this[errorProps[i]]=s[errorProps[i]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{t&&(this.lineNumber=o,Object.defineProperty?Object.defineProperty(this,"column",{value:c,enumerable:!0}):this.column=c)}catch(r){}}Exception.prototype=new Error,exports.default=Exception,module.exports=exports.default;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.registerDefaultHelpers=registerDefaultHelpers;var _helpersBlockHelperMissing=require("./helpers/block-helper-missing"),_helpersBlockHelperMissing2=_interopRequireDefault(_helpersBlockHelperMissing),_helpersEach=require("./helpers/each"),_helpersEach2=_interopRequireDefault(_helpersEach),_helpersHelperMissing=require("./helpers/helper-missing"),_helpersHelperMissing2=_interopRequireDefault(_helpersHelperMissing),_helpersIf=require("./helpers/if"),_helpersIf2=_interopRequireDefault(_helpersIf),_helpersLog=require("./helpers/log"),_helpersLog2=_interopRequireDefault(_helpersLog),_helpersLookup=require("./helpers/lookup"),_helpersLookup2=_interopRequireDefault(_helpersLookup),_helpersWith=require("./helpers/with"),_helpersWith2=_interopRequireDefault(_helpersWith);function registerDefaultHelpers(e){_helpersBlockHelperMissing2.default(e),_helpersEach2.default(e),_helpersHelperMissing2.default(e),_helpersIf2.default(e),_helpersLog2.default(e),_helpersLookup2.default(e),_helpersWith2.default(e)}

},{"./helpers/block-helper-missing":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js","./helpers/each":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/each.js","./helpers/helper-missing":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js","./helpers/if":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/if.js","./helpers/log":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/log.js","./helpers/lookup":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js","./helpers/with":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/with.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _utils=require("../utils");exports.default=function(t){t.registerHelper("blockHelperMissing",function(e,r){var i=r.inverse,s=r.fn;if(!0===e)return s(this);if(!1===e||null==e)return i(this);if(_utils.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):i(this);if(r.data&&r.ids){var a=_utils.createFrame(r.data);a.contextPath=_utils.appendContextPath(r.data.contextPath,r.name),r={data:a}}return s(e,r)})},module.exports=exports.default;

},{"../utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/each.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _utils=require("../utils"),_exception=require("../exception"),_exception2=_interopRequireDefault(_exception);exports.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new _exception2.default("Must pass iterator to #each");var i=t.fn,r=t.inverse,a=0,o="",n=void 0,s=void 0;function u(t,r,a){n&&(n.key=t,n.index=r,n.first=0===r,n.last=!!a,s&&(n.contextPath=s+t)),o+=i(e[t],{data:n,blockParams:_utils.blockParams([e[t],t],[s+t,null])})}if(t.data&&t.ids&&(s=_utils.appendContextPath(t.data.contextPath,t.ids[0])+"."),_utils.isFunction(e)&&(e=e.call(this)),t.data&&(n=_utils.createFrame(t.data)),e&&"object"==typeof e)if(_utils.isArray(e))for(var l=e.length;a<l;a++)a in e&&u(a,a,a===e.length-1);else{var d=void 0;for(var c in e)e.hasOwnProperty(c)&&(void 0!==d&&u(d,a-1),d=c,a++);void 0!==d&&u(d,a-1,!0)}return 0===a&&(o=r(this)),o})},module.exports=exports.default;

},{"../exception":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/exception.js","../utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _exception=require("../exception"),_exception2=_interopRequireDefault(_exception);exports.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new _exception2.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},module.exports=exports.default;

},{"../exception":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/exception.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/if.js":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _utils=require("../utils");exports.default=function(e){e.registerHelper("if",function(e,s){return _utils.isFunction(e)&&(e=e.call(this)),!s.hash.includeZero&&!e||_utils.isEmpty(e)?s.inverse(this):s.fn(this)}),e.registerHelper("unless",function(s,t){return e.helpers.if.call(this,s,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},module.exports=exports.default;

},{"../utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/log.js":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(e){e.registerHelper("log",function(){for(var l=[void 0],t=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)l.push(arguments[a]);var o=1;null!=t.hash.level?o=t.hash.level:t.data&&null!=t.data.level&&(o=t.data.level),l[0]=o,e.log.apply(e,l)})},module.exports=exports.default;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},module.exports=exports.default;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/helpers/with.js":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _utils=require("../utils");exports.default=function(t){t.registerHelper("with",function(t,e){_utils.isFunction(t)&&(t=t.call(this));var a=e.fn;if(_utils.isEmpty(t))return e.inverse(this);var s=e.data;return e.data&&e.ids&&((s=_utils.createFrame(e.data)).contextPath=_utils.appendContextPath(e.data.contextPath,e.ids[0])),a(t,{data:s,blockParams:_utils.blockParams([t],[s&&s.contextPath])})})},module.exports=exports.default;

},{"../utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/logger.js":[function(require,module,exports){
"use strict";exports.__esModule=!0;var _utils=require("./utils"),logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var o=_utils.indexOf(logger.methodMap,e.toLowerCase());e=o>=0?o:parseInt(e,10)}return e},log:function(e){if(e=logger.lookupLevel(e),"undefined"!=typeof console&&logger.lookupLevel(logger.level)<=e){var o=logger.methodMap[e];console[o]||(o="log");for(var l=arguments.length,r=Array(l>1?l-1:0),t=1;t<l;t++)r[t-1]=arguments[t];console[o].apply(console,r)}}};exports.default=logger,module.exports=exports.default;

},{"./utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/no-conflict.js":[function(require,module,exports){
(function (global){
"use strict";exports.__esModule=!0,exports.default=function(e){var o="undefined"!=typeof global?global:window,n=o.Handlebars;e.noConflict=function(){return o.Handlebars===e&&(o.Handlebars=n),e}},module.exports=exports.default;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/runtime.js":[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}exports.__esModule=!0,exports.checkRevision=checkRevision,exports.template=template,exports.wrapProgram=wrapProgram,exports.resolvePartial=resolvePartial,exports.invokePartial=invokePartial,exports.noop=noop;var _utils=require("./utils"),Utils=_interopRequireWildcard(_utils),_exception=require("./exception"),_exception2=_interopRequireDefault(_exception),_base=require("./base");function checkRevision(e){var t=e&&e[0]||1,r=_base.COMPILER_REVISION;if(t!==r){if(t<r){var a=_base.REVISION_CHANGES[r],n=_base.REVISION_CHANGES[t];throw new _exception2.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+n+").")}throw new _exception2.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function template(e,t){if(!t)throw new _exception2.default("No environment passed to template");if(!e||!e.main)throw new _exception2.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r={strict:function(e,t){if(!(t in e))throw new _exception2.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,a=0;a<r;a++)if(e[a]&&null!=e[a][t])return e[a][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:Utils.escapeExpression,invokePartial:function(r,a,n){n.hash&&(a=Utils.extend({},a,n.hash),n.ids&&(n.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,a,n);var o=t.VM.invokePartial.call(this,r,a,n);if(null==o&&t.compile&&(n.partials[n.name]=t.compile(r,e.compilerOptions,t),o=n.partials[n.name](a,n)),null!=o){if(n.indent){for(var i=o.split("\n"),l=0,s=i.length;l<s&&(i[l]||l+1!==s);l++)i[l]=n.indent+i[l];o=i.join("\n")}return o}throw new _exception2.default("The partial "+n.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,a,n){var o=this.programs[e],i=this.fn(e);return t||n||a||r?o=wrapProgram(this,e,i,t,r,a,n):o||(o=this.programs[e]=wrapProgram(this,e,i)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=Utils.extend({},t,e)),r},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function a(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=n.data;a._setup(n),!n.partial&&e.useData&&(o=initData(t,o));var i=void 0,l=e.useBlockParams?[]:void 0;function s(t){return""+e.main(r,t,r.helpers,r.partials,o,l,i)}return e.useDepths&&(i=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(s=executeDecorators(e.main,s,r,n.depths||[],o,l))(t,n)}return a.isTop=!0,a._setup=function(a){a.partial?(r.helpers=a.helpers,r.partials=a.partials,r.decorators=a.decorators):(r.helpers=r.merge(a.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(a.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=r.merge(a.decorators,t.decorators)))},a._child=function(t,a,n,o){if(e.useBlockParams&&!n)throw new _exception2.default("must pass block params");if(e.useDepths&&!o)throw new _exception2.default("must pass parent depths");return wrapProgram(r,t,e[t],a,0,n,o)},a}function wrapProgram(e,t,r,a,n,o,i){function l(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=i;return!i||t==i[0]||t===e.nullContext&&null===i[0]||(l=[t].concat(i)),r(e,t,e.helpers,e.partials,n.data||a,o&&[n.blockParams].concat(o),l)}return(l=executeDecorators(r,l,e,i,a,o)).program=t,l.depth=i?i.length:0,l.blockParams=n||0,l}function resolvePartial(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e}function invokePartial(e,t,r){var a=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var n=void 0;if(r.fn&&r.fn!==noop&&function(){r.data=_base.createFrame(r.data);var e=r.fn;n=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=_base.createFrame(r.data),r.data["partial-block"]=a,e(t,r)},e.partials&&(r.partials=Utils.extend({},r.partials,e.partials))}(),void 0===e&&n&&(e=n),void 0===e)throw new _exception2.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)}function noop(){return""}function initData(e,t){return t&&"root"in t||((t=t?_base.createFrame(t):{}).root=e),t}function executeDecorators(e,t,r,a,n,o){if(e.decorator){var i={};t=e.decorator(t,i,r,a&&a[0],n,o,a),Utils.extend(t,i)}return t}

},{"./base":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/base.js","./exception":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/exception.js","./utils":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/safe-string.js":[function(require,module,exports){
"use strict";function SafeString(t){this.string=t}exports.__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},exports.default=SafeString,module.exports=exports.default;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars/utils.js":[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.extend=extend,exports.indexOf=indexOf,exports.escapeExpression=escapeExpression,exports.isEmpty=isEmpty,exports.createFrame=createFrame,exports.blockParams=blockParams,exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/;function escapeChar(t){return escape[t]}function extend(t){for(var r=1;r<arguments.length;r++)for(var e in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],e)&&(t[e]=arguments[r][e]);return t}var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function(t){return"function"==typeof t};isFunction(/x/)&&(exports.isFunction=isFunction=function(t){return"function"==typeof t&&"[object Function]"===toString.call(t)}),exports.isFunction=isFunction;var isArray=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===toString.call(t)};function indexOf(t,r){for(var e=0,n=t.length;e<n;e++)if(t[e]===r)return e;return-1}function escapeExpression(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return possible.test(t)?t.replace(badChars,escapeChar):t}function isEmpty(t){return!t&&0!==t||!(!isArray(t)||0!==t.length)}function createFrame(t){var r=extend({},t);return r._parent=t,r}function blockParams(t,r){return t.path=r,t}function appendContextPath(t,r){return(t?t+".":"")+r}exports.isArray=isArray;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/runtime.js":[function(require,module,exports){
module.exports=require("./dist/cjs/handlebars.runtime").default;

},{"./dist/cjs/handlebars.runtime":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/dist/cjs/handlebars.runtime.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/process/browser.js":[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/simple-swizzle/index.js":[function(require,module,exports){
"use strict";var isArrayish=require("is-arrayish"),concat=Array.prototype.concat,slice=Array.prototype.slice,swizzle=module.exports=function(r){for(var e=[],i=0,t=r.length;i<t;i++){var s=r[i];isArrayish(s)?e=concat.call(e,slice.call(s)):e.push(s)}return e};swizzle.wrap=function(r){return function(){return r(swizzle(arguments))}};

},{"is-arrayish":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/simple-swizzle/node_modules/is-arrayish/index.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/simple-swizzle/node_modules/is-arrayish/index.js":[function(require,module,exports){
module.exports=function(r){return!(!r||"string"==typeof r)&&(r instanceof Array||Array.isArray(r)||r.length>=0&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name))};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/dasherize.js":[function(require,module,exports){
var trim=require("./trim");module.exports=function(r){return trim(r).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()};

},{"./trim":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/trim.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/defaultToWhiteSpace.js":[function(require,module,exports){
var escapeRegExp=require("./escapeRegExp");module.exports=function(e){return null==e?"\\s":e.source?e.source:"["+escapeRegExp(e)+"]"};

},{"./escapeRegExp":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/escapeRegExp.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/escapeRegExp.js":[function(require,module,exports){
var makeString=require("./makeString");module.exports=function(e){return makeString(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};

},{"./makeString":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/makeString.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/makeString.js":[function(require,module,exports){
module.exports=function(n){return null==n?"":""+n};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/strRepeat.js":[function(require,module,exports){
module.exports=function(r,e){if(e<1)return"";for(var n="";e>0;)1&e&&(n+=r),e>>=1,r+=r;return n};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/lpad.js":[function(require,module,exports){
var pad=require("./pad");module.exports=function(r,e,a){return pad(r,e,a)};

},{"./pad":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/pad.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/pad.js":[function(require,module,exports){
var makeString=require("./helper/makeString"),strRepeat=require("./helper/strRepeat");module.exports=function(e,t,r,a){e=makeString(e),t=~~t;var h=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",a){case"right":return h=t-e.length,e+strRepeat(r,h);case"both":return h=t-e.length,strRepeat(r,Math.ceil(h/2))+e+strRepeat(r,Math.floor(h/2));default:return h=t-e.length,strRepeat(r,h)+e}};

},{"./helper/makeString":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/makeString.js","./helper/strRepeat":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/strRepeat.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/trim.js":[function(require,module,exports){
var makeString=require("./helper/makeString"),defaultToWhiteSpace=require("./helper/defaultToWhiteSpace"),nativeTrim=String.prototype.trim;module.exports=function(e,r){return e=makeString(e),!r&&nativeTrim?nativeTrim.call(e):(r=defaultToWhiteSpace(r),e.replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))};

},{"./helper/defaultToWhiteSpace":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/defaultToWhiteSpace.js","./helper/makeString":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/helper/makeString.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/App.js":[function(require,module,exports){
(function (GIT_REV,_){
"use strict";"Portfolio App started GIT:".concat(GIT_REV),require("setimmediate"),require("es6-promise/auto"),require("classlist-polyfill"),require("raf-polyfill"),require("matches-polyfill"),require("fullscreen-polyfill"),require("math-sign-polyfill"),require("mutation-observer"),require("backbone").$=require("backbone.native"),require("backbone.babysitter"),require("Backbone.Mutators"),require("hammerjs"),window.addEventListener("load",function(e){e.target,e.type;try{require("app/model/helper/bootstrap")(window.bootstrap)}catch(e){var r=document.querySelector(".app");throw r.classList.remove("app-initial"),r.classList.add("app-error"),new Error("bootstrap data error ("+e.message+")",e.fileName,e.lineNumber)}finally{delete window.bootstrap}require("app/view/template/_helpers"),require("app/view/helper/createColorStyleSheet").call();var t=require("app/view/AppView"),i=require("webfontloader"),a={async:!1,groupName:"",classes:!1,loading:function(){this.groupName},active:function(){this.groupName},inactive:function(){console.warn("WebFont:%s:inactive",this.groupName)},fontactive:function(e,r){this.groupName},fontinactive:function(e,r){console.warn("WebFont:%s:fontinactive '%s' (%s)",this.groupName,e,r)}};i.load(_.defaults({async:!1,groupName:"required",custom:{families:["FranklinGothicFS:n4,n6","FolioFigures:n4"],testStrings:{FolioFigures:"hms"}},active:function(){return t.getInstance()},inactive:function(){return t.getInstance()}},a)),i.load(_.defaults({},a))});

}).call(this,'65e3bc7',require("underscore"))

},{"Backbone.Mutators":"Backbone.Mutators","app/model/helper/bootstrap":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/helper/bootstrap.js","app/view/AppView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/AppView.js","app/view/helper/createColorStyleSheet":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/helper/createColorStyleSheet.js","app/view/template/_helpers":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/_helpers.js","backbone":"backbone","backbone.babysitter":"backbone.babysitter","backbone.native":"backbone.native","classlist-polyfill":"classlist-polyfill","es6-promise/auto":"es6-promise/auto","fullscreen-polyfill":"fullscreen-polyfill","hammerjs":"hammerjs","matches-polyfill":"matches-polyfill","math-sign-polyfill":"math-sign-polyfill","mutation-observer":"mutation-observer","raf-polyfill":"raf-polyfill","setimmediate":"setimmediate","underscore":"underscore","webfontloader":"webfontloader"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Controller.js":[function(require,module,exports){
(function (_){
"use strict";var Backbone=require("backbone"),articles=require("app/model/collection/ArticleCollection"),bundles=require("app/model/collection/BundleCollection"),Controller=Backbone.Router.extend({initialize:function(e){this.route(/(.*)/,"notfound",this.toNotFound),this.route(/^([a-z][a-z0-9\-]*)\/?$/,"article-item",this.toArticleItem),this.route(/^(?:bundles)?\/?$/,"root",this.toRoot),this.route(/^bundles\/([^\/]+)(?:\/(\d+)?)?\/?$/,"media-item",this.toMediaItem)},selectMedia:function(e){this._goToLocation(e.get("bundle"),e)},selectBundle:function(e){e.attr("@no-desc")?this._goToLocation(e,e.get("media").at(0),{replace:!0,trigger:!0}):this._goToLocation(e)},deselectMedia:function(){this._goToLocation(bundles.selected)},deselectBundle:function(){this._goToLocation()},selectArticle:function(e){this.navigate(e.get("handle"),{trigger:!0})},deselectArticle:function(){this.navigate("",{trigger:!0})},_getLocation:function(e,t){var i,n=[];return e&&(n.push("bundles"),n.push(e.get("handle")),t&&(i=e.get("media").indexOf(t))>=0&&n.push(i)),n.join("/")},_goToLocation:function(e,t,i){this.navigate(this._getLocation(e,t),_.defaults(i||{},{trigger:!0}))},toRoot:function(){this.trigger("change:before"),bundles.selected&&bundles.deselect(),articles.deselect(),this.trigger("change:after")},toNotFound:function(e){},toBundleItem:function(e){var t=bundles.findWhere({handle:e});if(!t)throw new Error("No bundle found with handle '".concat(e,"'"));this._changeSelection(t)},toMediaItem:function(e,t){var i=bundles.findWhere({handle:e});if(!i)throw new Error("No bundle found with handle '".concat(e,"'"));var n=i.get("media").at(t||0);if(!n)throw new Error("No media found at index ".concat(t," in bundle '").concat(e,"'"));this._changeSelection(i,n)},toArticleItem:function(e){var t=articles.findWhere({handle:e});if(!t)throw new Error("No article found with handle '".concat(e,"'"));this.trigger("change:before",t),bundles.deselect(),articles.select(t),this.trigger("change:after",t)},_changeSelection:function(e,t){var i,n;void 0===e&&(e=null),void 0===t&&(t=null),n=(i=bundles.selected)?i.get("media").selected:null,i&&i.cid,e&&e.cid,n&&n.cid,t&&t.cid,(articles.selected||i!==e||n!==t)&&(this.trigger("change:before",e,t),e&&e.get("media").select(t),bundles.select(e),articles.deselect(),this.trigger("change:after",e,t))}});module.exports=new Controller;

}).call(this,require("underscore"))

},{"app/model/collection/ArticleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/ArticleCollection.js","app/model/collection/BundleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js","backbone":"backbone","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js":[function(require,module,exports){
(function (_){
"use strict";module.exports=function(){var e,a,t,s={},r=require("../../../sass/variables.json");for(a in s.VPAN_DRAG=.95,s.HPAN_OUT_DRAG=.4,s.VPAN_OUT_DRAG=.1,s.PAN_THRESHOLD=15,s.COLLAPSE_THRESHOLD=75,s.COLLAPSE_OFFSET=parseInt(r.temp.collapse_offset),s.VIDEO_CROP_PX=parseInt(r.video_crop_px),s.BREAKPOINTS={},r.breakpoints)e=r.breakpoints[a],e=(e=Array.isArray(e)?e.join(", "):e).replace(/[\'\"]/g,""),(e=window.matchMedia(e)).className=a,s.BREAKPOINTS[a]=e;s.DEFAULT_COLORS=_.clone(r.default_colors),s.APP_ROOT=window.approot,s.MEDIA_DIR=window.mediadir,delete window.approot,delete window.mediadir,s.FONT_METRICS={FranklinGothicFS:{unitsPerEm:1e3,ascent:827,descent:-173},ITCFranklinGothicStd:{unitsPerEm:1e3,ascent:686,descent:-314},FolioFigures:{unitsPerEm:1024,ascent:939,descent:-256}},s.PAUSE_CHAR=String.fromCharCode(9208),s.PLAY_CHAR=String.fromCharCode(9205),s.STOP_CHAR=String.fromCharCode(9209),"3d"==r.transform_type?s.TRANSLATE_TEMPLATE=function(e,a){return"translate3d("+e+"px, "+a+"px, 0px)"}:s.TRANSLATE_TEMPLATE=function(e,a){return"translate("+e+"px, "+a+"px)"},s.TRANSLATE_TEMPLATE=function(e,a){return"translate("+e+"px, "+a+"px)"};var n=s.TRANSITION_EASE=r.transitions.ease,i=s.TRANSITION_DURATION=parseFloat(r.transitions.duration_ms),o=s.TRANSITION_DELAY_INTERVAL=parseFloat(r.transitions.delay_interval_ms),T=s.TRANSITION_MIN_DELAY=parseFloat(r.transitions.min_delay_ms),d=s.TRANSITION_DELAY=s.TRANSITION_DURATION+s.TRANSITION_DELAY_INTERVAL;(e={}).tx=function(e,a,t){_.isNumber(e)||(e=1),_.isNumber(a)||(a=-1),_.isString(t)||(t=n);var s={};return a<0?(s.duration=i*e+o*(e-1),s.delay=0):(s.duration=i*e+o*(e-1)-T,s.delay=d*a-T),s.easeing=t,0},e.NONE={delay:0,duration:0,easing:"step-start"},e.NOW={delay:0,duration:i,easing:n},e.UNSET=_.defaults({cssText:""},e.NONE);var A=_.defaults({duration:i-T},e.NOW);for(a in e.FIRST=_.defaults({delay:0*d+T},A),e.BETWEEN=_.defaults({delay:1*d+T},A),e.LAST=_.defaults({delay:2*d+T},A),e.AFTER=_.defaults({delay:2*d+T},A),e.BETWEEN_EARLY=_.defaults({delay:1*d+T-60},A),e.BETWEEN_LATE=_.defaults({delay:1*d+T+60},A),e.FIRST_LATE=_.defaults({delay:.5*d+T},A),e.LAST_EARLY=_.defaults({delay:1.5*d+T},A),e)_.isFunction(e[a])||((t=e[a]).name=a,t.className="tx-"+a.replace("_","-").toLowerCase(),t.hasOwnProperty("cssText")||(t.cssText=t.duration/1e3+"s "+t.easing+" "+t.delay/1e3+"s"),t.name,t.cssText);return s.transitions=e,s}();

}).call(this,require("underscore"))

},{"../../../sass/variables.json":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/sass/variables.json","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/AppState.js":[function(require,module,exports){
"use strict";var BaseModel=require("backbone").Model;module.exports=BaseModel.extend({defaults:{routeName:"initial",fromRouteName:"",page:"",article:null,bundle:null,media:null,withArticle:!1,withBundle:!1,withMedia:!1,collapsed:!1},getters:["page","routeName","fromRouteName","article","bundle","media","withArticle","withBundle","withMedia","collapsed"],initialize:function(){var e={silent:!1};this.listenTo(this,"change",function(i){this.hasChanged("routeName")&&this.set("fromRouteName",this.previous("routeName"),e),this.hasChanged("article")&&this.set("withArticle",this.has("article"),e),this.hasChanged("bundle")&&this.set("withBundle",this.has("bundle"),e),this.hasChanged("media")&&this.set("withMedia",this.has("media"),e)}),this.listenTo(this,"change:routeName",function(e){this.cid}),this.listenTo(this,"change:article",function(e){this.cid}),this.listenTo(this,"change:bundle",function(e){this.cid}),this.listenTo(this,"change:media",function(e){this.cid})},hasAnyPrevious:function(e){return null!=this.previous(e)},hasAnyChanged:function(e){return this.hasChanged(e)&&this.has(e)!=this.hasAnyPrevious(e)}});

},{"backbone":"backbone"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js":[function(require,module,exports){
(function (_){
"use strict";var BaseModel=require("app/model/BaseModel"),parseSymAttrs=function(t){return t.replace(/(\,|\;)/g,function(t){return","==t?";":","})},toAttrsHash=function(t,e){if(_.isString(e)){var r=e.indexOf(":");r>0?t[e.substring(0,r)]=parseSymAttrs(e.substring(r+1)):t[e]=e}return t};module.exports=BaseModel.extend({_domPrefix:"_",defaults:{get attrs(){return{}}},getters:["domid"],mutators:{domid:function(){return this.hasOwnProperty("_domId")||(this._domId=this._domPrefix+this.id),this._domId},attrs:{set:function(t,e,r,i){Array.isArray(e)&&(e=e.reduce(toAttrsHash,{})),_.isObject(e)||(console.error("%s::attrs value not an object or string array",this.cid,e),e={}),i(t,e,r)}}},attr:function(t){return this.attrs()[t]},attrs:function(){return this.get("attrs")},toString:function(){return this.get("domid")},getDistanceToSelected:function(){return this.collection&&this.collection.selectedIndex>0?this.collection.indexOf(this)-this.collection.selectedIndex:-1},getIndex:function(){return this.collection?this.collection.indexOf(this):-1}});

}).call(this,require("underscore"))

},{"app/model/BaseModel":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseModel.js","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseModel.js":[function(require,module,exports){
(function (_){
"use strict";var Backbone=require("backbone"),BaseModelProto={},BaseModel={extend:function(e,t){var o,r;for(r in e)e.hasOwnProperty(r)&&_.isObject(e[r])&&(e[r]=_.defaults(e[r],this.prototype[r]));return o=Backbone.Model.extend.apply(this,arguments),Array.isArray(o.prototype.getters)&&o.prototype.getters.forEach(function(e){Object.defineProperty(o.prototype,e,{enumerable:!0,get:function(){return this.get(e)}})}),o}};module.exports=Backbone.Model.extend.call(Backbone.Model,BaseModelProto,BaseModel);

}).call(this,require("underscore"))

},{"backbone":"backbone","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/SelectableCollection.js":[function(require,module,exports){
(function (_){
"use strict";var Backbone=require("backbone"),SelectableCollection=Backbone.Collection.extend({initialize:function(e,t){t=_.defaults({},t,{initialSelection:"none",silentInitial:!0}),this.initialSelection=t.initialSelection,this.initialOptions={silent:t.silentInitial}},reset:function(e,t){this.deselect(this.initialOptions),Backbone.Collection.prototype.reset.apply(this,arguments),"first"===this.initialSelection&&this.length&&this.select(this.at(0),this.initialOptions)},select:function(e,t){if(void 0===e&&(e=null),this.selected!==e){var i=!(t&&t.silent),n=this.selected;this.lastSelected=this.selected,this.lastSelectedIndex=this.selectedIndex,this.selected=e,this.selectedIndex=this.indexOf(e),n?(_.isFunction(n.deselect)?n.deselect(t):i&&(n.selected=void 0,n.trigger("deselected",e,n)),i&&this.trigger("deselect:one",n)):i&&this.trigger("deselect:none",null),e?(_.isFunction(e.select)?e.select(t):i&&(e.selected=!0,e.trigger("selected",e,n)),i&&this.trigger("select:one",e)):i&&this.trigger("select:none",null)}},deselect:function(e){this.select(null,e)},selectAt:function(e,t){(0>e||e>=this.length)&&new RangeError("index is out of bounds"),this.select(this.at(e),t)},distance:function(e,t){var i,n;if(!e)return NaN;if(-1==(i=this.indexOf(e)))return NaN;if(1==arguments.length)n=this.selectedIndex;else{if(!t)return NaN;if(-1==(n=this.indexOf(t)))return NaN}return Math.abs(n-i)},hasFollowing:function(e){return e||(e=this.selected),this.indexOf(e)<this.length-1},following:function(e){return e||(e=this.selected),this.hasFollowing(e)?this.at(this.indexOf(e)+1):null},followingOrFirst:function(e){return e||(e=this.selected),this.at((this.indexOf(e)+1)%this.length)},hasPreceding:function(e){return e||(e=this.selected),this.indexOf(e)>0},preceding:function(e){return e||(e=this.selected),this.hasPreceding(e)?this.at(this.indexOf(e)-1):null},precedingOrLast:function(e){e||(e=this.selected);var t=this.indexOf(e)-1;return this.at(t>-1?t:this.length-1)}});module.exports=SelectableCollection;

}).call(this,require("underscore"))

},{"backbone":"backbone","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/ArticleCollection.js":[function(require,module,exports){
"use strict";var SelectableCollection=require("app/model/SelectableCollection"),ArticleItem=require("app/model/item/ArticleItem"),ArticleCollection=SelectableCollection.extend({model:ArticleItem});module.exports=new ArticleCollection;

},{"app/model/SelectableCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/SelectableCollection.js","app/model/item/ArticleItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/ArticleItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js":[function(require,module,exports){
"use strict";var SelectableCollection=require("app/model/SelectableCollection"),BundleItem=require("app/model/item/BundleItem"),BundleCollection=SelectableCollection.extend({model:BundleItem,comparator:function(e,l){var t=e.get("completed"),o=l.get("completed");return t>o?-1:t<o?1:0},url:"/json/bundles/"});module.exports=new BundleCollection;

},{"app/model/SelectableCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/SelectableCollection.js","app/model/item/BundleItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/BundleItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/KeywordCollection.js":[function(require,module,exports){
"use strict";var SelectableCollection=require("app/model/SelectableCollection"),KeywordItem=require("app/model/item/KeywordItem"),KeywordCollection=SelectableCollection.extend({model:KeywordItem});module.exports=new KeywordCollection;

},{"app/model/SelectableCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/SelectableCollection.js","app/model/item/KeywordItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/KeywordItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/TypeCollection.js":[function(require,module,exports){
"use strict";var Backbone=require("backbone"),TypeItem=require("app/model/item/TypeItem"),TypeCollection=Backbone.Collection.extend({model:TypeItem});module.exports=new TypeCollection;

},{"app/model/item/TypeItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/TypeItem.js","backbone":"backbone"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/helper/bootstrap.js":[function(require,module,exports){
(function (_){
"use strict";module.exports=function(e){require("app/control/Globals").APP_NAME=e.params["website-name"];var l=require("app/model/collection/TypeCollection"),o=require("app/model/collection/KeywordCollection"),t=require("app/model/collection/BundleCollection"),i=require("app/model/collection/ArticleCollection"),r=e["articles-all"],d=e["types-all"],s=e["keywords-all"],c=e["bundles-all"],a=e["media-all"],n=_.groupBy(a,"bId");c.forEach(function(e,l,o){e.tIds=[],e.media=n[e.id],s.forEach(function(o,t,i){0===l&&(o.bIds=[]),-1!=e.kIds.indexOf(o.id)&&(o.bIds.push(e.id),-1==e.tIds.indexOf(o.tId)&&e.tIds.push(o.tId))})}),i.reset(r),l.reset(d),o.reset(s),t.reset(c)};

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/collection/ArticleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/ArticleCollection.js","app/model/collection/BundleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js","app/model/collection/KeywordCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/KeywordCollection.js","app/model/collection/TypeCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/TypeCollection.js","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/ArticleItem.js":[function(require,module,exports){
"use strict";var BaseItem=require("app/model/BaseItem");module.exports=BaseItem.extend({_domPrefix:"a",defaults:{name:"",handle:"",text:""}});

},{"app/model/BaseItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/BundleItem.js":[function(require,module,exports){
(function (_){
"use strict";var Color=require("color"),BaseItem=require("app/model/BaseItem"),MediaItem=require("app/model/item/MediaItem"),SelectableCollection=require("app/model/SelectableCollection"),Globals=require("app/control/Globals"),stripTags=require("utils/strings/stripTags"),attrsDefault=_.defaults({"has-colors":"defaults"},Globals.DEFAULT_COLORS),MediaCollection=SelectableCollection.extend({model:MediaItem,comparator:"o"});module.exports=BaseItem.extend({_domPrefix:"b",defaults:{name:"",handle:"",desc:"",completed:0,get kIds(){return[]}},getters:["name","media"],mutators:{text:function(){return stripTags(this.get("desc"))},media:{transient:!0,set:function(t,e,o,r){Array.isArray(e)&&(e.forEach(function(t){t.bundle=this},this),e=new MediaCollection(e)),r(t,e,o)}}},initialize:function(t,e){this.colors={fgColor:new Color(this.attr("color")),bgColor:new Color(this.attr("background-color")),lnColor:new Color(this.attr("link-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},attrs:function(){return this._attrs||(this._attrs=_.defaults({},this.get("attrs"),attrsDefault))}});

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/BaseItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js","app/model/SelectableCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/SelectableCollection.js","app/model/item/MediaItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/MediaItem.js","color":"color","underscore":"underscore","utils/strings/stripTags":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/strings/stripTags.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/KeywordItem.js":[function(require,module,exports){
"use strict";var BaseItem=require("app/model/BaseItem");module.exports=BaseItem.extend({_domPrefix:"k",defaults:{name:"",handle:"",tId:-1}});

},{"app/model/BaseItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/MediaItem.js":[function(require,module,exports){
(function (_){
"use strict";var Color=require("color"),BaseItem=require("app/model/BaseItem"),SourceItem=require("app/model/item/SourceItem"),SelectableCollection=require("app/model/SelectableCollection"),Globals=require("app/control/Globals"),stripTags=require("utils/strings/stripTags"),urlTemplates={original:_.template(Globals.MEDIA_DIR+"/<%= src %>"),"constrain-width":_.template(Globals.APP_ROOT+"image/1/<%= width %>/0/uploads/<%= src %>"),"constrain-height":_.template(Globals.APP_ROOT+"image/1/0/<%= height %>/uploads/<%= src %>"),"debug-bandwidth":_.template(Globals.MEDIA_DIR.replace(/(https?\:\/\/[^\/]+)/,"$1/slow/<%= kbps %>")+"/<%= src %>")},SourceCollection=SelectableCollection.extend({model:SourceItem});module.exports=BaseItem.extend({_domPrefix:"m",defaults:{name:"<p><em>Untitled</em></p>",sub:"",o:0,bId:-1,srcIdx:0,get srcset(){return[]},get sources(){return new SourceCollection}},getters:["name","bundle","source","sources"],mutators:{handle:function(){return this.get("src")},text:function(){return this.hasOwnProperty("_text")||(this._text=_.unescape(stripTags(this.get("name")))),this._text},attrs:{set:function(t,e,s,r){this._attrs=null,BaseItem.prototype.mutators.attrs.set.apply(this,arguments),this._updateSources()}},srcset:{set:function(t,e,s,r){r(t,e,s),this.get("sources").reset(e,s),this._updateSources()}},source:{transient:!0,get:function(){return this.get("sources").at(this.get("srcIdx"))}}},initialize:function(){this._updateColors(),this.listenTo(this,"change:attrs change:bundle",function(){this._attrs=null})},attrs:function(){return this._attrs||(this._attrs=_.defaults({},this.get("bundle").attrs(),this.get("attrs")))},_updateColors:function(){this.colors={fgColor:new Color(this.attr("color")),bgColor:new Color(this.attr("background-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},_updateSources:function(){var t={kbps:this.attr("@debug-bandwidth")},e=urlTemplates[t.kbps?"debug-bandwidth":"original"];this.get("sources").forEach(function(s){t.src=s.get("src"),s.set("original",e(t))})}});

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/BaseItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js","app/model/SelectableCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/SelectableCollection.js","app/model/item/SourceItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/SourceItem.js","color":"color","underscore":"underscore","utils/strings/stripTags":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/strings/stripTags.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/SourceItem.js":[function(require,module,exports){
"use strict";var BaseItem=require("app/model/BaseItem"),noCacheSuffix="?"+Date.now();module.exports=BaseItem.extend({defaults:{src:null,mime:null,w:null,h:null},getters:["src","original"],mutators:{src:{set:function(e,t,s,l){l(e,t,s)}}}});

},{"app/model/BaseItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/TypeItem.js":[function(require,module,exports){
"use strict";var BaseItem=require("app/model/BaseItem");module.exports=BaseItem.extend({_domPrefix:"t",defaults:{name:"",handle:""}});

},{"app/model/BaseItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/BaseItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/AppView.js":[function(require,module,exports){
(function (GTAG_ENABLED,_){
"use strict";var Backbone=require("backbone"),stripTags=require("utils/strings/stripTags"),Globals=require("app/control/Globals"),controller=require("app/control/Controller"),AppState=require("app/model/AppState"),bundles=require("app/model/collection/BundleCollection"),articles=require("app/model/collection/ArticleCollection"),View=require("app/view/base/View"),NavigationView=require("app/view/NavigationView"),ContentView=require("app/view/ContentView"),TouchManager=require("app/view/base/TouchManager");module.exports=View.extend({cidPrefix:"app",el:"html",className:"app",model:AppState,events:{visibilitychange:function(e){this.cid,e.type},fullscreenchange:function(e){this.cid,e.type,document.fullscreenElement,document.fullscreen},dragstart:function(e){"IMG"!=e.target.nodeName&&"A"!=e.target.nodeName||e.defaultPrevented||e.preventDefault()}},properties:{container:{get:function(){return this._container||(this._container=document.getElementById("container"))}},navigation:{get:function(){return this._navigation||(this._navigation=document.getElementById("navigation"))}},content:{get:function(){return this._content||(this._content=document.getElementById("content"))}}},initialize:function(e){var t,i,n,o=this;this.breakpointEl=this.el,n=this.content,t=i=TouchManager.init(n),this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize,!1),this.listenTo(controller,"route",this._onRoute),this.listenTo(this.model,"change",this._onModelChange),this.navigationView=new NavigationView({el:this.navigation,model:this.model,vpan:t,hpan:i}),this.contentView=new ContentView({el:this.content,model:this.model,vpan:t,hpan:i});var s={capture:!1,passive:!1},a=function(e){!e.defaultPrevented&&o.el.scrollHeight-1<=o.el.clientHeight&&e.preventDefault()},l=function e(t){o.el.removeEventListener("touchmove",a,s),o.el.removeEventListener("touchend",e,s),o.el.removeEventListener("touchcancel",e,s)};this.el.addEventListener("touchstart",function(e){o.el.addEventListener("touchmove",a,s),o.el.addEventListener("touchend",l,s),o.el.addEventListener("touchcancel",l,s)},{passive:!0});this.listenTo(this.navigationView,"view:collapsed:measured",function(e){o.setImmediate(function(){o.requestAnimationFrame(function(){o.el.scrollHeight-1<=o.el.clientHeight?o.el.style.overflowY="hidden":o.el.style.overflowY="",o.el.scrollTop=1})})}),GTAG_ENABLED,window.GTAG_ID,window.ga,this.listenToOnce(controller,"route",this._appStart),Backbone.history.start({pushState:!1,hashChange:!0})},_appStart:function(e,t){this.cid,t.join(),this.skipTransitions=!0,this.el.classList.add("skip-transitions"),window.ga&&window.GTAG_ID&&window.ga("create",window.GTAG_ID,"auto"),this.requestRender(View.MODEL_INVALID|View.SIZE_INVALID).requestChildrenRender(View.MODEL_INVALID|View.SIZE_INVALID).listenToOnce(this,"view:render:after",function(e,t){this.requestAnimationFrame(function(){this.cid,this.skipTransitions=!1,this.el.classList.remove("skip-transitions"),this.el.classList.remove("app-initial")})})},_onRoute:function(e,t){this.cid,this.model.get("routeName");var i={routeName:e,bundle:null,media:null,article:null,page:Backbone.history.getFragment().replace(/^(?!\/)/,"/")};switch(e){case"media-item":i.bundle=bundles.selected,i.media=i.bundle.media.selected,i.collapsed=!0;break;case"bundle-item":i.bundle=bundles.selected,i.collapsed=!0;break;case"article-item":i.article=articles.selected,i.collapsed=!0;break;case"bundle-list":case"notfound":case"root":default:i.collapsed=!1}this.model.set(i)},_onModelChange:function(){this.requestRender(View.MODEL_INVALID)},_onResize:function(e){this.cid,this.skipTransitions=!0,this.el.classList.add("skip-transitions"),this.requestRender(View.SIZE_INVALID).once("view:render:after",function(e,t){this.requestAnimationFrame(function(){e.cid,e.skipTransitions=!1,e.el.classList.remove("skip-transitions"),this.el.scrollTop=1})}),null===document.fullscreenElement&&this.renderNow()},renderFrame:function(e,t){this.cid,View.flagsToString(t),t&View.MODEL_INVALID&&this.renderModelChange(t),t&View.SIZE_INVALID&&_.each(Globals.BREAKPOINTS,function(e,t){this.toggle(t,e.matches)},this.breakpointEl.classList),this.requestChildrenRender(t,!0)},renderModelChange:function(){var e=this.el.classList,t=null,i=!1,n=[];n.push(Globals.APP_NAME),this.model.get("bundle")?(n.push(stripTags(this.model.get("bundle").get("name"))),this.model.get("media")&&n.push(stripTags(this.model.get("media").get("name")))):this.model.get("article")&&n.push(stripTags(this.model.get("article").get("name"))),n=_.unescape(n.join(" / ")),document.title=n,window.ga&&window.GTAG_ID&&window.ga("send",{hitType:"pageview",page:this.model.get("page"),title:n}),this.model.hasChanged("routeName")&&((t=this.model.previous("fromRouteName"))&&e.remove("from-route-"+t),e.add("from-route-"+this.model.get("fromRouteName")),(t=this.model.previous("routeName"))&&e.remove("route-"+t),e.add("route-"+this.model.get("routeName"))),["article","bundle","media"].forEach(function(n){var o=this.model.get(n);this.model.hasChanged(n)&&((t=this.model.previous(n))&&e.remove(t.get("domid")),o&&e.add(o.get("domid"))),e.toggle("with-"+n,!!o),e.toggle("without-"+n,!o),i|=o&&o.colors&&o.colors.hasDarkBg}.bind(this)),e.toggle("color-dark",i)}},{getInstance:function(){return window.app instanceof this||(window.app=new this({model:new AppState})),window.app}});

}).call(this,true,require("underscore"))

},{"app/control/Controller":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Controller.js","app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/AppState":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/AppState.js","app/model/collection/ArticleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/ArticleCollection.js","app/model/collection/BundleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js","app/view/ContentView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/ContentView.js","app/view/NavigationView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/NavigationView.js","app/view/base/TouchManager":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/TouchManager.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","backbone":"backbone","underscore":"underscore","utils/strings/stripTags":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/strings/stripTags.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/ContentView.js":[function(require,module,exports){
(function (_){
"use strict";var Globals=require("app/control/Globals"),TransformHelper=require("utils/TransformHelper"),controller=require("app/control/Controller"),bundles=require("app/model/collection/BundleCollection"),articles=require("app/model/collection/ArticleCollection"),View=require("app/view/base/View"),ArticleView=require("app/view/component/ArticleView"),CollectionStack=require("app/view/component/CollectionStack"),SelectableListView=require("app/view/component/SelectableListView"),DotNavigationRenderer=require("app/view/render/DotNavigationRenderer"),Carousel=require("app/view/component/Carousel"),CarouselRenderer=require("app/view/render/CarouselRenderer"),ImageRenderer=require("app/view/render/ImageRenderer"),VideoRenderer=require("app/view/render/VideoRenderer"),SequenceRenderer=require("app/view/render/SequenceRenderer"),carouselEmptyTemplate=require("./template/Carousel.EmptyRenderer.Bundle.hbs"),mediaStackTemplate=require("./template/CollectionStack.Media.hbs"),transformProp=View.prefixedProperty("transform"),transitionProp=View.prefixedProperty("transition"),tx=Globals.transitions;module.exports=View.extend({cidPrefix:"contentView",className:"container-expanded",events:{"transitionend .adding-child":"_onAddedTransitionEnd","transitionend .removing-child":"_onRemovedTransitionEnd"},initialize:function(e){_.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal","_onCollapsedEvent"),this.transforms=new TransformHelper,this.vpan=e.vpan||new Error("no vpan"),this.hpan=e.hpan||new Error("no hpan"),this.listenTo(this.model,"change",this._onModelChange),this.skipTransitions=!0,this.itemViews=[]},renderFrame:function(e,t){var i=this.model.get("collapsed"),n=t&View.MODEL_INVALID&&this.model.hasChanged("collapsed"),s=t&View.MODEL_INVALID&&(this.model.hasChanged("bundle")||this.model.hasChanged("article")),r=!!(t&View.SIZE_INVALID),a=!!(t&(View.MODEL_INVALID|View.SIZE_INVALID|View.LAYOUT_INVALID));if(a=a||this._transformsChanged||this.skipTransitions,s&&(this.removeChildren(),bundles.selected?this.createChildren(bundles.selected):articles.selected&&this.createChildren(articles.selected)),n&&(this.el.classList.toggle("container-collapsed",i),this.el.classList.toggle("container-expanded",!i)),r&&this.transforms.clearAllCaptures(),a){var o;if(this.el.classList.remove("container-changing"),this.skipTransitions)this.transforms.stopAllTransitions(),this.el.classList.remove("container-changed"),s||n&&this._setChildrenEnabled(i);else if(!s)if(n)this.el.classList.add("container-changed"),i?(o=function(){this._setChildrenEnabled(!0),this.el.classList.remove("container-changed")},this.transforms.runAllTransitions(tx.LAST)):(o=function(){this.el.classList.remove("container-changed")},this._setChildrenEnabled(!1),this.transforms.runAllTransitions(tx.FIRST)),o=o.bind(this),this.transforms.whenAllTransitionsEnd().then(o,o);else this.transforms.items.forEach(function(e){e.hasOffset&&e.runTransition(tx.NOW)});s||this.transforms.clearAllOffsets(),this.transforms.validate()}r&&this.itemViews.forEach(function(e){e.skipTransitions=this.skipTransitions,e.requestRender(View.SIZE_INVALID).renderNow()},this),this.skipTransitions=this._transformsChanged=!1},_setChildrenEnabled:function(e){this.itemViews.forEach(function(t){t.setEnabled(e)})},_onCollapsedEvent:function(e){this.cid,e.type,e.target,e.defaultPrevented||!this.model.has("bundle")||this.model.get("collapsed")||this.enabled||(e.preventDefault(),this.setImmediate(function(){this.model.set("collapsed",!0)}))},_onModelChange:function(){this.model.hasAnyChanged("bundle")&&(this.model.has("bundle")?this.vpan.on("vpanstart",this._onVPanStart):this.vpan.off("vpanstart",this._onVPanStart)),this.requestRender(View.MODEL_INVALID)},_collapsedOffsetY:Globals.COLLAPSE_OFFSET,_onVPanStart:function(e){this.vpan.on("vpanmove",this._onVPanMove),this.vpan.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopAllTransitions(),this.transforms.clearAllCaptures(),this.el.classList.add("container-changing"),this._onVPanMove(e)},_onVPanMove:function(e){var t=this.model.get("collapsed"),i=e.deltaY,n=this._collapsedOffsetY,s=t?i>0:i<0,r=t?Globals.VPAN_DRAG:1-Globals.VPAN_DRAG;i=Math.abs(i),i*=r,n*=r,s?i>n&&(i=(i-n)*Globals.VPAN_OUT_DRAG+n):i=-i*Globals.VPAN_OUT_DRAG,i*=t?1:-1,this.transforms.offsetAll(0,i),this.transforms.validate()},_onVPanFinal:function(e){this.vpan.off("vpanmove",this._onVPanMove),this.vpan.off("vpanend vpancancel",this._onVPanFinal),this._onVPanMove(e),this.setImmediate(function(){this._transformsChanged=!0,this.requestRender()})},createChildren:function(e){var t;e.__proto__.constructor===bundles.model?(t=this.createMediaCaptionStack(e),this.itemViews.push(t),this.transforms.add(t.el),t=this.createMediaCarousel(e),this.itemViews.push(t),this.transforms.add(t.el),t=this.createMediaDotNavigation(e),this.itemViews.push(t)):e.__proto__.constructor===articles.model&&(t=this.createArticleView(e),this.itemViews.push(t)),this.itemViews.forEach(function(e){this.skipTransitions||(e.el.classList.add("adding-child"),e.el.style.opacity=0),this.el.appendChild(e.el),e.render()},this),this.skipTransitions||this.requestAnimationFrame(function(){this.cid,this.itemViews.forEach(function(e){this.skipTransitions||(e.el.style[transitionProp]="opacity "+tx.LAST.cssText),e.el.style.removeProperty("opacity")},this)})},removeChildren:function(){this.itemViews.forEach(function(e,t,i){if(this.transforms.remove(e.el),this.skipTransitions)e.remove();else{var n=window.getComputedStyle(e.el);"0"==n.opacity||"hidden"==n.visibility?(this.cid,e.cid,e.remove()):(e.el.classList.add("removing-child"),n[transformProp]&&(e.el.style[transformProp]=n[transformProp]),e.el.style[transitionProp]="opacity "+tx.FIRST.cssText,e.el.style.opacity=0)}i[t]=null},this),this.itemViews.length=0},_onAddedTransitionEnd:function(e){if(e.target.cid&&this.childViews.hasOwnProperty(e.target.cid)){this.cid,e.target.cid,e.propertyName,e.type;var t=this.childViews[e.target.cid];t.el.classList.remove("adding-child"),t.el.style.removeProperty(transitionProp)}},_onRemovedTransitionEnd:function(e){if(e.target.cid&&this.childViews.hasOwnProperty(e.target.cid)){this.cid,e.target.cid,e.propertyName,e.type;var t=this.childViews[e.target.cid];t.el.classList.remove("removing-child"),t.remove()}},createMediaCarousel:function(e){var t=CarouselRenderer.extend({className:"carousel-item empty-item",model:e,template:carouselEmptyTemplate}),i=new Carousel({className:"media-carousel "+e.get("domid"),collection:e.get("media"),rendererFunction:function(e,i,n){if(-1===i)return t;switch(e.attr("@renderer")){case"video":return VideoRenderer;case"sequence":return SequenceRenderer;case"image":default:return ImageRenderer}},requireSelection:!!e.attr("@no-desc"),touch:this.hpan});return controller.listenTo(i,{"view:select:one":function(e){i.cid,e.cid,controller.selectMedia(e)},"view:select:none":controller.deselectMedia}),i.listenTo(e,"deselected",function(){this.stopListening(this.collection),controller.stopListening(this)}),i},createMediaCaptionStack:function(e){var t=new CollectionStack({className:"media-caption-stack",collection:e.get("media"),template:mediaStackTemplate});return t.listenTo(e,"deselected",function(){this.stopListening(this.collection)}),t},createMediaDotNavigation:function(e){var t=new SelectableListView({className:"media-dotnav dots-fontface color-fg05",collection:e.get("media"),renderer:DotNavigationRenderer});return controller.listenTo(t,{"view:select:one":controller.selectMedia,"view:select:none":controller.deselectMedia}),t.listenTo(e,"deselected",function(){this.stopListening(this.collection),controller.stopListening(this)}),t},createArticleView:function(e){return new ArticleView({model:e})}});

}).call(this,require("underscore"))

},{"./template/Carousel.EmptyRenderer.Bundle.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/Carousel.EmptyRenderer.Bundle.hbs","./template/CollectionStack.Media.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/CollectionStack.Media.hbs","app/control/Controller":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Controller.js","app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/collection/ArticleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/ArticleCollection.js","app/model/collection/BundleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","app/view/component/ArticleView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/ArticleView.js","app/view/component/Carousel":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/Carousel.js","app/view/component/CollectionStack":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CollectionStack.js","app/view/component/SelectableListView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/SelectableListView.js","app/view/render/CarouselRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/CarouselRenderer.js","app/view/render/DotNavigationRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DotNavigationRenderer.js","app/view/render/ImageRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ImageRenderer.js","app/view/render/SequenceRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/SequenceRenderer.js","app/view/render/VideoRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/VideoRenderer.js","underscore":"underscore","utils/TransformHelper":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/TransformHelper.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/NavigationView.js":[function(require,module,exports){
(function (_){
"use strict";var Hammer=require("hammerjs"),Globals=require("app/control/Globals"),TransformHelper=require("utils/TransformHelper"),controller=require("app/control/Controller"),types=require("app/model/collection/TypeCollection"),keywords=require("app/model/collection/KeywordCollection"),bundles=require("app/model/collection/BundleCollection"),articles=require("app/model/collection/ArticleCollection"),View=require("app/view/base/View"),FilterableListView=require("app/view/component/FilterableListView"),GroupingListView=require("app/view/component/GroupingListView"),GraphView=require("app/view/component/GraphView"),ArticleButton=require("app/view/component/ArticleButton"),tx=Globals.transitions,txNow=_.clone(tx.NOW);txNow.easing="ease",module.exports=View.extend({cidPrefix:"navigationView",className:"navigation container-expanded",initialize:function(e){_.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal"),_.bindAll(this,"_onHPanStart","_onHPanMove","_onHPanFinal"),_.bindAll(this,"_onNavigationClick"),this.itemViews=[],this.transforms=new TransformHelper,this.vpan=e.vpan||new Error("no vpan"),this.hpan=e.hpan||new Error("no hpan"),this.listenTo(this.model,"change",this._onModelChange),this.listenTo(keywords,"select:one select:none",this._onKeywordSelect),this.vpanGroup=this.el.querySelector("#vpan-group"),this.keywordList=this.createKeywordList(),this.bundleList=this.createBundleList(),this.itemViews.push(this.keywordList),this.itemViews.push(this.bundleList),this.graph=this.createGraphView(this.bundleList,this.keywordList,this.vpanGroup),this.sitename=this.createSitenameButton(),this.about=this.createAboutButton(),this.hGroupings=this.keywordList.el.querySelectorAll(".list-group .label"),this.transforms.add(this.vpanGroup,this.bundleList.wrapper,this.keywordList.wrapper,this.bundleList.el,this.keywordList.el,this.hGroupings,this.sitename.wrapper,this.about.wrapper,this.sitename.el,this.about.el,this.graph.el)},renderFrame:function(e,t){t&View.MODEL_INVALID&&(this.model.hasChanged("collapsed")&&(this.el.classList.toggle("container-collapsed",this.model.get("collapsed")),this.el.classList.toggle("container-expanded",!this.model.get("collapsed"))),(this.model.hasChanged("collapsed")||this.model.hasChanged("withBundle"))&&this.el.classList.add("container-changing"),this.model.hasChanged("routeName")&&(this.bundleList.requestRender(View.SIZE_INVALID|View.LAYOUT_INVALID),this.keywordList.requestRender(View.SIZE_INVALID|View.LAYOUT_INVALID))),(this.skipTransitions||t&View.ALL_INVALID)&&(this.skipTransitions?(this.transforms.stopAllTransitions(),this.transforms.validate(),this.transforms.clearAllOffsets()):this.renderTransitions(t),this.transforms.validate());var i,s=function(e){var t=Math.max(this.bundleList.metrics.height,this.keywordList.metrics.height);return this.model.get("collapsed")?(this.el.style.height="",this.graph.el.style.height=""):(this.el.style.height=t+"px",this.graph.el.style.height=t+"px"),this.graph.requestRender(View.SIZE_INVALID|View.LAYOUT_INVALID),this.cid,this.model.get("collapsed"),this.trigger("view:collapsed:measured",this),e}.bind(this),n=function(e){return this.graph.enabled=!this.model.get("collapsed"),this.graph.valueTo("a2b",0,0),this.model.get("collapsed")||this.graph.valueTo("a2b",1,Globals.TRANSITION_DURATION),e}.bind(this),a=function(e){return this.cid,View.flagsToString(t),this.el.classList.remove("container-changing"),this.trigger("view:collapsed:end",this),e}.bind(this);i=Promise.all([this.bundleList.whenCollapseChangeEnds(),this.keywordList.whenCollapseChangeEnds()]).then(s),t&View.MODEL_INVALID&&this.model.hasChanged("collapsed")&&(i=i.then(n)),i.then(this.transforms.whenAllTransitionsEnd()).then(a,function(e){console.error(e)}).catch(function(e){console.warn("%s::renderFrame promise rejected",this.cid)}.bind(this)),this.itemViews.forEach(function(e){this.skipTransitions&&(e.skipTransitions=!0),t&View.SIZE_INVALID&&e.requestRender(View.SIZE_INVALID),e.renderNow()},this),this.requestAnimationFrame(function(){this.skipTransitions=!1})},renderTransitions:function(e){var t,i=e&View.MODEL_INVALID,s=this.model.get("fromRouteName"),n=this.model.get("routeName"),a=i&&this.model.hasChanged("routeName"),o=this.model.has("bundle"),l=i&&this.model.hasAnyChanged("bundle"),r=i&&this.model.hasChanged("bundle"),h=this.model.has("media"),d=i&&this.model.hasAnyChanged("media"),c=i&&this.model.hasAnyChanged("article"),p=this.model.get("collapsed"),u=i&&this.model.hasChanged("collapsed");(t=this.transforms.get(this.vpanGroup))&&t.hasOffset&&(t.runTransition(u?tx.BETWEEN:tx.NOW),t.clearOffset()),Globals.BREAKPOINTS["medium-wide"].matches||Globals.BREAKPOINTS["medium-wide-stretch"].matches?(t=this.transforms.get(this.keywordList.wrapper),u&&!c?l?d&&t.runTransition(o?tx.LAST:tx.FIRST):h&&t.runTransition(p?tx.LAST:tx.FIRST):!l&&d&&t.runTransition(r?tx.BETWEEN:txNow),t.hasOffset&&t.clearOffset(),u^c&&(this.transforms.runTransition(p?tx.LAST:tx.FIRST,this.sitename.el,this.about.el,this.bundleList.wrapper),this.transforms.runTransition(p?tx.LAST:tx.FIRST,this.hGroupings)),!a||"root"!=s&&"root"!=n||this.transforms.runTransition(tx.BETWEEN,this.sitename.wrapper,this.about.wrapper)):Globals.BREAKPOINTS["small-stretch"].matches?u^c&&this.transforms.runTransition(p?tx.FIRST:tx.LAST,this.sitename.el,this.about.el):l&&this.transforms.runTransition(tx.BETWEEN,this.sitename.el,this.about.el)},_onModelChange:function(){this.requestRender(View.MODEL_INVALID),this.model.hasChanged("collapsed")&&(this.model.get("collapsed")&&keywords.deselect(),this.keywordList.collapsed=this.model.get("collapsed"),this.bundleList.collapsed=this.model.get("collapsed")),this.model.hasChanged("bundle")&&(this.bundleList.selectedItem=this.model.get("bundle"),this.keywordList.refreshFilter()),this.model.hasChanged("withBundle")&&(this.model.get("withBundle")?(this.el.addEventListener(View.CLICK_EVENT,this._onNavigationClick),this.vpan.on("vpanstart",this._onVPanStart),this.hpan.on("hpanstart",this._onHPanStart)):(this.el.removeEventListener(View.CLICK_EVENT,this._onNavigationClick),this.vpan.off("vpanstart",this._onVPanStart),this.hpan.off("hpanstart",this._onHPanStart),keywords.deselect()))},_onKeywordSelect:function(e){!this.model.get("collapsed")&&this.graph&&this.listenToOnce(this.bundleList,"view:render:after",function(e,t){this.graph.valueTo("b2a",0,0),this.graph.valueTo("b2a",1,Globals.TRANSITION_DURATION)}),this.bundleList.refreshFilter()},_onNavigationClick:function(e){this.cid,e.type,e.defaultPrevented,e.defaultPrevented||(e.preventDefault(),this.model.has("bundle")&&this.model.set("collapsed",!this.model.get("collapsed")))},_setCollapsed:function(e){e!==this.model.get("collapsed")&&this.setImmediate(function(){this.model.set("collapsed",e)})},_onHPanStart:function(e){this.transforms.get(this.keywordList.wrapper).stopTransition().clearOffset().validate(),(Globals.BREAKPOINTS["medium-wide"].matches||Globals.BREAKPOINTS["medium-wide-stretch"].matches)&&"bundleItem"===this.model.get("routeName")&&this.model.get("bundle").get("media").selectedIndex<=0&&this.model.get("collapsed")&&(this.transforms.get(this.keywordList.wrapper).clearCapture(),this._onHPanMove(e),this.hpan.on("hpanmove",this._onHPanMove),this.hpan.on("hpanend hpancancel",this._onHPanFinal))},_onHPanMove:function(e){var t=e.deltaX;this.model.has("media")?t*=e.offsetDirection&Hammer.DIRECTION_LEFT?0:720/920:t*=e.offsetDirection&Hammer.DIRECTION_LEFT?720/920:Globals.HPAN_OUT_DRAG,this.transforms.offset(t,null,this.keywordList.wrapper),this.transforms.validate()},_onHPanFinal:function(e){this.hpan.off("hpanmove",this._onHPanMove),this.hpan.off("hpanend hpancancel",this._onHPanFinal);var t=this.transforms.get(this.keywordList.wrapper);this._renderFlags&View.MODEL_INVALID||!t.hasOffset||(0!=t.offsetX&&t.runTransition(tx.NOW),t.clearOffset().validate())},_collapsedOffsetY:Globals.COLLAPSE_OFFSET,_onVPanStart:function(e){this.vpan.on("vpanmove",this._onVPanMove),this.vpan.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopTransition(this.vpanGroup),this.transforms.clearCapture(this.vpanGroup)},_onVPanMove:function(e){var t=this._computeVPanDelta(e.deltaY);this.transforms.offset(0,t,this.vpanGroup),this.transforms.validate()},_onVPanFinal:function(e){this.vpan.off("vpanmove",this._onVPanMove),this.vpan.off("vpanend vpancancel",this._onVPanFinal),this.setImmediate(function(){this.willCollapsedChange(e)&&this.model.set("collapsed",!this.model.get("collapsed")),this.requestRender(View.LAYOUT_INVALID)})},willCollapsedChange:function(e){return"vpanend"==e.type&&(this.model.get("collapsed")?e.deltaY>Globals.COLLAPSE_THRESHOLD:e.deltaY<-Globals.COLLAPSE_THRESHOLD)},_computeVPanDelta:function(e){var t=this.model.get("collapsed"),i=this._collapsedOffsetY,s=t?e>0:e<0,n=t?1-Globals.VPAN_DRAG:Globals.VPAN_DRAG;return e=Math.abs(e),e*=n,i*=n,s?e>i&&(e=(e-i)*Globals.VPAN_OUT_DRAG+i):e=-e*Globals.VPAN_OUT_DRAG,e*=t?.5:-1},createSitenameButton:function(){var e=new View({el:"#site-name",events:{"click a":function(e){e.defaultPrevented||e.preventDefault(),this.trigger("view:click")}}});return e.wrapper=e.el.parentElement,this.listenTo(e,"view:click",this._onSitenameClick),e},_onSitenameClick:function(){switch(this.model.get("routeName")){case"media-item":case"bundle-item":controller.deselectBundle();break;case"article-item":controller.deselectArticle()}},createArticleButton:function(e){var t=new ArticleButton({el:".article-button[data-handle='about']",model:e}).render();return t.wrapper=t.el.parentElement,this.listenTo(t,"view:click",this._onArticleClick),t},_onArticleClick:function(e){switch(this.model.get("routeName")){case"article-item":controller.deselectArticle();break;case"root":default:controller.selectArticle(e)}},createAboutButton:function(){return this.createArticleButton(articles.findWhere({handle:"about"}))},createBundleList:function(e){var t=new FilterableListView({el:"#bundle-list",collection:bundles,collapsed:!1,filterFn:function(e,t,i){return!!keywords.selected&&-1!==e.get("kIds").indexOf(keywords.selected.id)}});return t.wrapper=t.el.parentElement,this.listenTo(t,"view:select:one view:select:none",function(e){this.setImmediate(function(){controller.selectBundle(e)})}),this.listenTo(t,"view:select:same",this._onBundleListSame),t},_onBundleListSame:function(e){this.model.set("collapsed",!this.model.get("collapsed"))},createKeywordList:function(e){var t=new GroupingListView({el:"#keyword-list",collection:keywords,collapsed:!1,filterFn:function(e,t,i){return!!bundles.selected&&-1!==bundles.selected.get("kIds").indexOf(e.id)},groupingFn:function(e,t,i){return types.get(e.get("tId"))}});return t.wrapper=t.el.parentElement,t.listenTo(keywords,"select:one select:none",function(e){t.selectedItem=e}),this.listenTo(t,"view:select:one view:select:none",this._onKeywordListChange),t},_onKeywordListChange:function(e){this.model.get("collapsed")||keywords.select(e)},createGraphView:function(e,t,i){var s=new GraphView({id:"nav-graph",listA:e,listB:t,model:this.model,useOpaque:!1});return i||(i=this.el),i.insertBefore(s.el,i.firstElementChild),s}});

}).call(this,require("underscore"))

},{"app/control/Controller":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Controller.js","app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/collection/ArticleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/ArticleCollection.js","app/model/collection/BundleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js","app/model/collection/KeywordCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/KeywordCollection.js","app/model/collection/TypeCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/TypeCollection.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","app/view/component/ArticleButton":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/ArticleButton.js","app/view/component/FilterableListView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/FilterableListView.js","app/view/component/GraphView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/GraphView.js","app/view/component/GroupingListView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/GroupingListView.js","hammerjs":"hammerjs","underscore":"underscore","utils/TransformHelper":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/TransformHelper.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/CallbackQueue.js":[function(require,module,exports){
"use strict";var PriorityQueue=function(t){this._offset=0|t,this._items=[],this._priorities=[],this._numItems=0};PriorityQueue.prototype=Object.create({enqueue:function(t,i){var e=this._items.length;return this._items[e]=t,this._priorities[e]={priority:0|i,index:e},this._numItems++,this._offset+e},contains:function(t){return 0<=(t-=this.offset)&&t<this._items.length},skip:function(t){var i,e;if(!(0>(i=t-this._offset)||i>=this._items.length))return null!==(e=this._items[i])&&(this._items[i]=null,this._numItems--),e},indexes:function(){var t=this._priorities.concat();return t.sort(function(t,i){return t.priority>i.priority?1:t.priority<i.priority?-1:0}),t.forEach(function(t,i,e){e[i]=t.index},this),t},items:function(){var t=this._priorities.concat();return t.sort(function(t,i){return t.priority>i.priority?1:t.priority<i.priority?-1:0}),t.forEach(function(t,i,e){e[i]=this._items[t.index]},this),t},_empty:function(t){this._offset=t,this._items.length=0,this._priorities.length=0,this._numItems=0}},{offset:{get:function(){return this._offset}},length:{get:function(){return this._items.length}},numItems:{get:function(){return this._numItems}}});var CallbackQueue=function(t,i){this._nextQueue=new PriorityQueue(0),this._currQueue=null,this._running=!1,this._runId=-1,this._requestFn=t,this._cancelFn=i,this._runQueue=this._runQueue.bind(this)};CallbackQueue.prototype=Object.create({_runQueue:function(){if(this._running)throw new Error("wtf!!!");var t,i;this._currQueue=this._nextQueue,this._nextQueue=new PriorityQueue(this._currQueue.offset+this._currQueue.length),this._runId=-1,this._running=!0;var e=this._currQueue.indexes(),n=this._currQueue._items;for(t=0;t<e.length;t++)null!==(i=n[e[t]])&&i.apply(null,arguments);this._running=!1,this._currQueue=null,this._nextQueue.numItems>0&&(this._runId=this._requestFn.call(null,this._runQueue))},request:function(t,i){return this._running||-1!==this._runId||(this._runId=this._requestFn.call(null,this._runQueue)),this._nextQueue.enqueue(t,i)},cancel:function(t){var i;return this._running?i=this._currQueue.skip(t)||this._nextQueue.skip(t):(i=this._nextQueue.skip(t),-1!==this._runId&&0===this._nextQueue.numItems&&(this._cancelFn.call(null,this._runId),this._runId=-1)),i}},{running:{get:function(){return this._running}}}),module.exports=CallbackQueue;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/CanvasView.js":[function(require,module,exports){
(function (_){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var View=require("app/view/base/View"),Globals=require("app/control/Globals"),Interpolator=require("app/view/base/Interpolator"),getBoxEdgeStyles=require("utils/css/getBoxEdgeStyles"),MIN_CANVAS_RATIO=1,CanvasView=View.extend({cidPrefix:"canvasView",tagName:"canvas",className:"canvas-view",properties:{paused:{get:function(){return this._paused},set:function(t){t=!!t,this._interpolator.paused!==t&&(this._interpolator.paused=t,t||this.requestRender())}},context:{get:function(){return this._ctx}},interpolator:{get:function(){return this._interpolator}},canvasRatio:{get:function(){return this._canvasRatio}}},defaults:{values:{value:0},maxValues:{value:1},paused:!1,useOpaque:!1},initialize:function(t){(t=_.defaults(t||{},this.defaults)).values=_.defaults(t.values||{},this.defaults.values),t.maxValues=_.defaults(t.maxValues||{},this.defaults.maxValues),this._interpolator=new Interpolator(t.values,t.maxValues),this._interpolator.paused=t.paused,this._useOpaque=t.useOpaque,this._options=_.pick(t,"color","backgroundColor");this._ctx=this.el.getContext("2d",{});var e=MIN_CANVAS_RATIO,i=this._ctx.webkitBackingStorePixelRatio||1;window.devicePixelRatio!==i&&(e=window.devicePixelRatio/i,e=Math.max(e,MIN_CANVAS_RATIO)),this._canvasRatio=e,this.listenTo(this,"view:attached",function(){this.requestRender(View.SIZE_INVALID|View.LAYOUT_INVALID).renderNow()})},_updateCanvas:function(){var t=getComputedStyle(this.el);if(this._canvasWidth=this.el.scrollWidth,this._canvasHeight=this.el.scrollHeight,"border-box"===t.boxSizing){var e=getBoxEdgeStyles(t);this._canvasWidth-=e.paddingLeft+e.paddingRight+e.borderLeftWidth+e.borderRightWidth,this._canvasHeight-=e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth}this._canvasWidth*=this._canvasRatio,this._canvasHeight*=this._canvasRatio,this.measureCanvas(this._canvasWidth,this._canvasHeight,t),this.el.width=this._canvasWidth,this.el.height=this._canvasHeight,this._color=this._options.color||t.color||Globals.DEFAULT_COLORS.color,this._backgroundColor=this._options.backgroundColor||t.backgroundColor||Globals.DEFAULT_COLORS["background-color"],this._useOpaque&&this._opaqueProp&&(this.el[this._opaqueProp]=!0),this._fontSize=parseFloat(t.fontSize)*this._canvasRatio,this._fontFamily=t.fontFamily,this._ctx.restore(),this._ctx.font=[t.fontWeight,t.fontStyle,this._fontSize+"px/1",t.fontFamily].join(" "),this._ctx.textAlign="left",this._ctx.lineCap="butt",this._ctx.lineJoin="miter",this._ctx.strokeStyle=this._color,this._ctx.fillStyle=this._color,this.updateCanvas(this._ctx,t),this._ctx.save()},measureCanvas:function(t,e,i){},updateCanvas:function(t,e){},_getFontMetrics:function(t){var e,i,a,s=t.length;for(e in Globals.FONT_METRICS)-1!==(i=t.indexOf(e))&&i<s&&(s=i,a=Globals.FONT_METRICS[e]);return a||{unitsPerEm:1024,ascent:939,descent:-256}},_clearCanvas:function(){4==arguments.length?this._clearCanvasRect.apply(this,arguments):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._clearCanvasRect(0,0,this.el.width,this.el.height),this._ctx.restore())},_clearCanvasRect:function(t,e,i,a){this._ctx.clearRect(t,e,i,a),this._useOpaque&&(this._ctx.save(),this._ctx.fillStyle=this._backgroundColor,this._ctx.fillRect(t,e,i,a),this._ctx.restore())},_setStyle:function(t){CanvasView.setStyle(this._ctx,t)},render:function(){return this.attached?this.renderNow():this},renderFrame:function(t,e){if(!this.attached)return e;e&View.SIZE_INVALID&&this._updateCanvas(),this._interpolator.valuesChanged&&(e|=View.LAYOUT_INVALID,this._interpolator.interpolate(t)),e&(View.LAYOUT_INVALID|View.SIZE_INVALID)&&(this.redraw(this._ctx,this._interpolator,e),this._interpolator.valuesChanged&&this.requestRender())},getTargetValue:function(t){return this._interpolator.getTargetValue(t)},getRenderedValue:function(t){return this._interpolator.getRenderedValue(t)},valueTo:function(t,e,i){this._interpolator.valueTo(t,e,i),this.requestRender(View.MODEL_INVALID|View.LAYOUT_INVALID)},redraw:function(t,e,i){}},{setStyle:function(t,e){if("object"==_typeof(e))for(var i in e)switch(_typeof(t[i])){case"undefined":break;case"function":Array.isArray(e[i])?t[i].apply(t,e[i]):t[i].call(t,e[i]);break;default:t[i]=e[i]}}});module.exports=CanvasView;

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/base/Interpolator":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/Interpolator.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","underscore":"underscore","utils/css/getBoxEdgeStyles":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/css/getBoxEdgeStyles.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/Interpolator.js":[function(require,module,exports){
(function (_){
"use strict";var linear=require("utils/ease/fn/linear"),Interpolator=function(e,t,a){for(var r in this._tstamp=0,this._renderableKeys=[],this._renderedKeys=[],this._paused=!1,this._pausedChanging=!1,this._maxValues=_.isObject(t)?_.extend({},t):{},this._easeFn=_.isObject(a)?_.extend({},a):{},this._valueData={},e)_.isNumber(this._maxValues[r])||(this._maxValues[r]=null),_.isFunction(this._easeFn[r])||(this._easeFn[r]=linear),this._valueData[r]=this._initValue(e[r],0,this._maxValues[r]),this._renderableKeys.push(r)};Interpolator.prototype=Object.create({isAtTarget:function(e){return-1===this._renderableKeys.indexOf(e)},getCurrentValue:function(e){return this._valueData[e]._renderedValue||this._valueData[e]._value},getTargetValue:function(e){return this._valueData[e]._value},getStartValue:function(e){return this._valueData[e]._startValue},getRenderedValue:function(e){return this._valueData[e]._renderedValue},getOption:function(e,t){return"max"===t?this._maxValues[e]:"ease"===t?this._easeFn[e]:void 0},valueTo:function(e,t,a,r){var i,n=this._valueData[e];return _.isFunction(r)&&(this._easeFn[e]=r),(i=Array.isArray(n)?t.reduce(function(t,r,i){return n[i]?(n[i]=this._initNumber(r,a,this._maxValues[e]),!0):this._setValue(n[i],r,a)||t}.bind(this),i):this._setValue(n,t,a))&&(-1!==this._renderableKeys.indexOf(e)||this._renderableKeys.push(e)),this},updateValue:function(e){var t=this._renderableKeys.indexOf(e);return-1===t||this._interpolateKey(e)||this._renderableKeys.splice(t,1),this},_initValue:function(e,t,a){return Array.isArray(e)?e.map(function(e){return this._initNumber(e,t,a)},this):this._initNumber(e,t,a)},_initNumber:function(e,t,a){var r={};return r._value=e,r._startValue=e,r._valueDelta=0,r._duration=t||0,r._startTime=NaN,r._elapsedTime=NaN,r._lastRenderedValue=null,r._renderedValue=r._startValue,r._maxVal=a,r},_setValue:function(e,t,a){return e._value!==t&&(e._startValue=e._value,e._valueDelta=t-e._value,e._value=t,e._duration=a||0,e._startTime=NaN,e._elapsedTime=NaN,!0)},_tstamp:0,interpolate:function(e){if(this._tstamp=e,this.valuesChanged){this._pausedChanging&&(this._renderableKeys.forEach(function(t){var a=this._valueData[t];isNaN(a._elapsedTime)||(a._startTime=e-a._elapsedTime)},this),this._pausedChanging=!1);var t=this._renderableKeys;this._renderableKeys=t.filter(function(t){return this._interpolateValue(e,this._valueData[t],this._easeFn[t])},this),this._renderedKeys=t}return this},_interpolateKey:function(e){return this._interpolateValue(this._tstamp,this._valueData[e],this._easeFn[e])},_interpolateValue:function(e,t,a){return Array.isArray(t)?t.reduce(function(t,r,i,n){return this._interpolateNumber(e,r,a)||t}.bind(this),!1):this._interpolateNumber(e,t,a)},_interpolateNumber:function(e,t,a){isNaN(t._startTime)&&(t._startTime=e),t._lastRenderedValue=t._renderedValue;var r=Math.max(0,e-t._startTime);return r<t._duration?(t._maxVal&&t._valueDelta<0?t._renderedValue=a(r,t._startValue,t._valueDelta+t._maxVal,t._duration)-t._maxVal:t._renderedValue=a(r,t._startValue,t._valueDelta,t._duration),t._elapsedTime=r,!0):(t._renderedValue=t._value,t._elapsedTime=NaN,t._startTime=NaN,!1)}},{paused:{get:function(){return this._paused},set:function(e){e=!!e,this._paused!==e&&(this._paused=e,this._pausedChanging=!0)}},valuesChanged:{get:function(){return!this._paused&&this._renderableKeys.length>0}},renderableKeys:{get:function(){return this._renderableKeys}},renderedKeys:{get:function(){return this._renderedKeys}},keys:{get:function(){return Object.keys(this._valueData)}}}),module.exports=Interpolator;

}).call(this,require("underscore"))

},{"underscore":"underscore","utils/ease/fn/linear":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/linear.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/PrefixedEvents.js":[function(require,module,exports){
"use strict";var prefixedEvent=require("utils/prefixedEvent"),eventMap={transitionend:prefixedEvent("transitionend"),fullscreenchange:prefixedEvent("fullscreenchange",document),fullscreenerror:prefixedEvent("fullscreenerror",document),visibilitychange:prefixedEvent("visibilitychange",document,"hidden")},eventNum=0;for(var eventName in eventMap)eventName===eventMap[eventName]?delete eventMap[eventName]:(Object.defineProperty(eventMap,eventName,{value:eventMap[eventName],enumerable:!0}),Object.defineProperty(eventMap,eventNum,{value:eventName,enumerable:!1}),eventNum++);Object.defineProperty(eventMap,"length",{value:eventNum}),module.exports=eventMap;

},{"utils/prefixedEvent":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedEvent.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/TouchManager.js":[function(require,module,exports){
"use strict";var Globals=require("app/control/Globals"),Hammer=require("hammerjs"),Pan=require("utils/touch/SmoothPanRecognizer");function createInstance(e){var n=new Hammer.Manager(e),a=new Pan({event:"hpan",direction:Hammer.DIRECTION_HORIZONTAL,threshold:Globals.PAN_THRESHOLD});return n.add(a),n}var logPanEvent,logEvent,PANEND_THRES_MS=300,PANEND_THRES_PX=25,UP_EVENT=window.hasOwnProperty("onpointerup")?"pointerup":"mouseup",touchHandlers={},captureHandlers={},bubblingHandlers={},lastTimeStamp=NaN,panSessionOpened=!1,saveTimeStamp=function(e){panSessionOpened=!e.isFinal,e.isFinal&&(lastTimeStamp=e.srcEvent.timeStamp)},stopEventAfterPan=function(e){e.timeStamp-lastTimeStamp<PANEND_THRES_MS&&(e.preventDefault(),e.stopPropagation()),lastTimeStamp=NaN};function addHandlers(){var e,n=instance.element;for(e in touchHandlers)touchHandlers.hasOwnProperty(e)&&instance.on(e,touchHandlers[e]);for(e in captureHandlers)captureHandlers.hasOwnProperty(e)&&n.addEventListener(e,captureHandlers[e],!0);for(e in bubblingHandlers)bubblingHandlers.hasOwnProperty(e)&&n.addEventListener(e,bubblingHandlers[e],!1)}function removeHandlers(){var e,n=instance.element;for(e in captureHandlers)captureHandlers.hasOwnProperty(e)&&n.removeEventListener(e,captureHandlers[e],!0);for(e in bubblingHandlers)captureHandlers.hasOwnProperty(e)&&n.removeEventListener(e,bubblingHandlers[e],!0)}touchHandlers["hpanstart hpanend hpancancel"]=saveTimeStamp,captureHandlers.click=stopEventAfterPan;var instance=null,TouchManager={init:function(e){return null===instance?(instance=createInstance(e),addHandlers()):instance.element!==e&&console.warn("TouchManager already initialized with another element"),instance},destroy:function(){null!==instance?(removeHandlers(),instance.destroy(),instance=null):console.warn("no instance to destroy")},getInstance:function(){return null===instance&&console.error("TouchManager has not been initialized"),instance}};module.exports=TouchManager;

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","hammerjs":"hammerjs","utils/touch/SmoothPanRecognizer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/touch/SmoothPanRecognizer.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js":[function(require,module,exports){
(function (_){
"use strict";require("setimmediate");var Backbone=require("backbone"),_cidSeed=1,_viewsByCid={};function addChildViews(e){for(var t,i=e.querySelectorAll("*[data-cid]"),n=0,r=i.length;n<r;n++)(t=View.findByElement(i.item(n)))&&(t.attached||t._elementAttached())}function removeChildViews(e){for(var t,i=e.querySelectorAll("*[data-cid]"),n=0,r=i.length;n<r;n++)(t=View.findByElement(i.item(n)))&&(t.attached?(t.cid,t._elementDetached()):console.warn("View::[detached (parent)] %s (ignored)",t.cid))}var observer=new MutationObserver(function(e){var t,i,n,r,s,a,d;for(t=0,i=e.length;t<i;t++)if("childList"==(n=e[t]).type){for(r=0,s=n.addedNodes.length;r<s;r++)a=n.addedNodes.item(r),(d=View.findByElement(a))&&(d.attached||d._elementAttached()),a instanceof HTMLElement&&addChildViews(a);for(r=0,s=n.removedNodes.length;r<s;r++)a=n.removedNodes.item(r),(d=View.findByElement(a))&&(d.attached?(d.cid,d.attached,d._elementDetached()):console.warn("View::[detached (childList)] %s (ignored)",d.cid,d.attached)),a instanceof HTMLElement&&removeChildViews(a)}else"attributes"==n.type&&(d=View.findByElement(n.target))&&(d.attached||d._elementAttached())});observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["data-cid"]});var _now=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date),renderQueue=new(require("app/view/base/CallbackQueue"))(function(e){return window.requestAnimationFrame(e)},function(e){return window.cancelAnimationFrame(e)}),modelQueue=new(require("app/view/base/CallbackQueue"))(function(e){return window.setImmediate(function(){e.call(null,_now())})},function(e){return window.clearImmediate(e)}),PrefixedEvents=require("app/view/base/PrefixedEvents"),applyEventPrefixes=function(e){var t,i;for(t in e)i=t.match(/^\w+/i)[0],PrefixedEvents.hasOwnProperty(i)&&(e[t.replace(i,PrefixedEvents[i])]=e[t],delete e[t]);return e},getViewDepth=function(e){return e?e.attached?null===e.parentView?0:e.parentView.viewDepth+1:NaN:null};function logAttachInfo(e,t,i){-1!=["log","info","warn","error"].indexOf(i)&&(i="log"),console[i].call(console,"%s::%s [parent:%s %s %s depth:%s]",e.cid,t,e.parentView&&e.parentView.cid,e.attached?"attached":"detached",e._viewPhase,e.viewDepth)}var View={NONE_INVALID:0,ALL_INVALID:-1>>>1,CHILDREN_INVALID:1,MODEL_INVALID:2,STYLES_INVALID:4,SIZE_INVALID:8,LAYOUT_INVALID:16,CLICK_EVENT:"click",ViewError:require("app/view/base/ViewError"),prefixedProperty:require("utils/prefixedProperty"),prefixedStyleName:require("utils/prefixedStyleName"),prefixedEvent:require("utils/prefixedEvent"),whenViewIsAttached:require("app/view/promise/whenViewIsAttached"),whenViewIsRendered:require("app/view/promise/whenViewIsRendered"),findByElement:function(e){return _viewsByCid[e.cid]?_viewsByCid[e.cid]:null},findByDescendant:function(e){do{if(_viewsByCid[e.cid])return _viewsByCid[e.cid]}while(e=e.parentElement||e.parentNode);return null},extend:function(e,t){return PrefixedEvents.length&&e.events&&(_.isFunction(e.events)?e.events=_.wrap(e.events,function(e){return applyEventPrefixes(e.apply(this))}):_.isObject(e.events)&&(e.events=applyEventPrefixes(e.events))),e.properties&&this.prototype.properties&&_.defaults(e.properties,this.prototype.properties),Backbone.View.extend.apply(this,arguments)},_flagsToStrings:["-"],flagsToString:function(e){var t=View._flagsToStrings[0|e];return t||(t=[],e&View.CHILDREN_INVALID&&t.push("children"),e&View.MODEL_INVALID&&t.push("model"),e&View.STYLES_INVALID&&t.push("styles"),e&View.SIZE_INVALID&&t.push("size"),e&View.LAYOUT_INVALID&&t.push("layout"),View._flagsToStrings[e]=t=t.join(" ")),t}};Object.defineProperty(View,"instances",{value:_viewsByCid,enumerable:!0});var ViewProto={cidPrefix:"view",_attached:!1,_parentView:null,_viewDepth:null,_viewPhase:"initializing",_renderQueueId:-1,_renderFlags:0,_enabled:null,properties:{cid:{get:function(){return this._cid||(this._cid=this.cidPrefix+_cidSeed++)},set:function(e){}},attached:{get:function(){return this._attached}},parentView:{get:function(){return this._parentView}},viewDepth:{get:function(){return this._getViewDepth()}},invalidated:{get:function(){return-1!==this._renderQueueId}},enabled:{get:function(){return this._enabled},set:function(e){this.setEnabled(e)}},renderFlags:{get:function(){return this._renderFlags}}},$:Backbone.$,constructor:function(e){this.transform={},this.childViews={},this._applyRender=this._applyRender.bind(this),this.properties&&Object.defineProperties(this,this.properties),e&&e.className&&this.className&&(e.className+=" "+_.result(this,"className")),e&&e.parentView&&this._setParentView(e.parentView,!0),Backbone.View.apply(this,arguments),this._viewPhase="initialized",null!==this.parentView&&this.trigger("view:parentChange",this.parentView,null),this.attached&&this.trigger("view:attached",this)},remove:function(){return"disposing"==this._viewPhase&&logAttachInfo(this,"remove","warn"),this._viewPhase="disposing",this._cancelRender(),this.$el.remove(),this._attached=!1,this.trigger("view:removed",this),this._setParentView(null),this.stopListening(),this.invalidated&&(console.warn("%s::remove invalidated after remove()",this.cid),this._cancelRender()),delete _viewsByCid[this.cid],this._viewPhase="disposed",this},_elementAttached:function(){this._attached=!0,this._viewDepth=null,this.setEnabled(!0),this._setParentView(View.findByDescendant(this.el.parentElement)),"initialized"==this._viewPhase?this.trigger("view:attached",this):"replacing"==this._viewPhase&&(this._viewPhase="initialized",this.trigger("view:replaced",this))},_elementDetached:function(){this.attached&&"disposing"!=this._viewPhase&&"disposed"!=this._viewPhase||logAttachInfo(this,"_elementDetached","error"),this._attached=!1,this._viewDepth=null,this.setEnabled(!1),"disposing"==this._viewPhase&&"disposed"!=this._viewPhase||this.remove()},_setParentView:function(e,t){void 0===e&&(console.warn("$s::_setParentView invalid value '%s'",this.cid,e),e=null);var i=this._parentView;this._parentView=e,this._viewDepth=null,e!==i&&(null!==i&&this.cid in i.childViews&&delete i.childViews[this.cid],null!==e&&(e.childViews[this.cid]=this),t||this.trigger("view:parentChange",this,e,i))},whenAttached:function(){return View.whenViewIsAttached(this)},_getViewDepth:function(){return null===this._viewDepth&&(this._viewDepth=getViewDepth(this)),this._viewDepth},setElement:function(e,t){if(this.el?(this.el!==e&&this.el.parentElement&&(this.attached&&(this._viewPhase="replacing"),this.el.parentElement.replaceChild(e,this.el)),Backbone.View.prototype.setElement.apply(this,arguments),this.className&&_.result(this,"className").split(" ").forEach(function(e){this.el.classList.add(e)},this)):Backbone.View.prototype.setElement.apply(this,arguments),void 0===this.el)throw new Error("Backbone view has no element");return _viewsByCid[this.cid]=this,this.el.cid=this.cid,this.el.setAttribute("data-cid",this.cid),this.model&&this.el.setAttribute("data-mcid",this.model.cid),this},addListeners:function(e,t,i,n){_.isObject(n)||(n=!!n),"string"==typeof t&&(t=t.split(" "));for(var r=0;r<t.length;r++)e.addEventListener(t[r],i,n);return this},removeListeners:function(e,t,i,n){_.isObject(n)||(n=!!n),"string"==typeof t&&(t=t.split(" "));for(var r=0;r<t.length;r++)e.removeEventListener(t[r],i,n);return this},listenToElement:function(e,t,i){e=Backbone.$(e),"string"==typeof t&&(t=t.split(" "));for(var n=0;n<t.length;n++)this.listenTo(e,t[n],i)},stopListeningToElement:function(e,t,i){e=Backbone.$(e),"string"==typeof t&&(t=t.split(" "));for(var n=0;n<t.length;n++)this.stopListening(e,t[n],i)},listenToElementOnce:function(e,t,i,n){var r,s,a;return _.isObject(n)||(n=!!n),r=function(){a.off("view:remove",r),e.removeEventListener(t,s,n)},s=function(e){r(),i.call(a,e)},(a=this).on("view:remove",r),e.addEventListener(t,s,n),this},requestAnimationFrame:function(e,t,i){return renderQueue.request(e.bind(i||this),t)},cancelAnimationFrame:function(e){return renderQueue.cancel(e)},setImmediate:function(e,t,i){return modelQueue.request(e.bind(i||this),t)},clearImmediate:function(e){return modelQueue.cancel(e)},_traceRenderStatus:function(){return[-1!=this._renderQueueId?"async id:"+this._renderQueueId:"sync",View.flagsToString(this._renderFlags),this.attached?"attached":"detached",(this.skipTransitions?"skip":"run")+"-tx"].join(", ")},_applyRender:function(e){var t=this._renderFlags;this.trigger("view:render:before",this,t),this._renderFlags=0,this._renderQueueId=-1,this._renderFlags|=this.renderFrame(e,t),this.trigger("view:render:after",this,t),0!=this._renderFlags&&console.warn("%s::_applyRender [returned] phase: %s flags: %s (%s)",this.cid,this._viewPhase,View.flagsToString(this._renderFlags),this._renderFlags)},_cancelRender:function(){var e,t;-1!=this._renderQueueId&&(e=this._renderQueueId,this._renderQueueId=-1,void 0===(t=renderQueue.cancel(e))?console.warn("%s::_cancelRender [id:%i] not found",this.cid,e):null===t&&console.warn("%s::_cancelRender [id:%i] already cancelled",this.cid,e))},_requestRender:function(){renderQueue.running&&this._cancelRender(),-1==this._renderQueueId&&(this._renderQueueId=renderQueue.request(this._applyRender,isNaN(this.viewDepth)?Number.MAX_VALUE:this.viewDepth))},invalidate:function(e){return void 0!==e&&(this._renderFlags|=e),this},requestRender:function(e){return this.invalidate(e),this._requestRender(),this},renderFrame:function(e,t){return View.NONE_INVALID},renderNow:function(e){return-1!=this._renderQueueId&&(this._cancelRender(),e=!0),e&&this._applyRender(_now()),this},whenRendered:function(){return View.whenViewIsRendered(this)},requestChildrenRender:function(e,t,i){var n,r;for(n in this.childViews)(r=this.childViews[n]).skipTransitions=r.skipTransitions||this.skipTransitions,r.requestRender(e),t&&r.renderNow(i);return this},render:function(){return this.renderNow(!0)},setEnabled:function(e){this._enabled!=e&&(this._enabled=!!e,this._enabled?this.delegateEvents():this.undelegateEvents())}};module.exports=Backbone.View.extend(ViewProto,View);

}).call(this,require("underscore"))

},{"app/view/base/CallbackQueue":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/CallbackQueue.js","app/view/base/PrefixedEvents":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/PrefixedEvents.js","app/view/base/ViewError":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/ViewError.js","app/view/promise/whenViewIsAttached":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenViewIsAttached.js","app/view/promise/whenViewIsRendered":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenViewIsRendered.js","backbone":"backbone","setimmediate":"setimmediate","underscore":"underscore","utils/prefixedEvent":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedEvent.js","utils/prefixedProperty":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedProperty.js","utils/prefixedStyleName":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedStyleName.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/ViewError.js":[function(require,module,exports){
"use strict";function ViewError(r,e){this.view=r,this.err=e,this.message=e.message}ViewError.prototype=Object.create(Error.prototype),ViewError.prototype.constructor=ViewError,ViewError.prototype.name="ViewError",module.exports=ViewError;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/ArticleButton.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(a,l,e,n,s){var t,r,u=null!=l?l:a.nullContext||{},o=e.helperMissing,i=a.escapeExpression;return'<a href="'+i((e.global||l&&l.global||o).call(u,"APP_ROOT",{name:"global",hash:{},data:s}))+"#"+i("function"==typeof(r=null!=(r=e.handle||(null!=l?l.handle:l))?r:o)?r.call(u,{name:"handle",hash:{},data:s}):r)+'"><span class="label">'+(null!=(t="function"==typeof(r=null!=(r=e.name||(null!=l?l.name:l))?r:o)?r.call(u,{name:"name",hash:{},data:s}):r)?t:"")+"</span></a>\n"},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/ArticleButton.js":[function(require,module,exports){
"use strict";var View=require("app/view/base/View"),viewTemplate=require("./ArticleButton.hbs"),ArticleButton=View.extend({cidPrefix:"articleButton",tagName:"h2",className:"article-button",template:viewTemplate,events:{"click a":function(e){e.defaultPrevented||e.preventDefault(),this.trigger("view:click",this.model)}},renderFrame:function(e,t){this.el.innerHTML=this.template(this.model.toJSON())}});module.exports=ArticleButton;

},{"./ArticleButton.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/ArticleButton.hbs","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/ArticleView.js":[function(require,module,exports){
"use strict";var View=require("app/view/base/View"),RECAPTCHA_KEYS={"canillas.name":"6LcaPHwUAAAAAAfzEnqRchIx8jY1YkUEpuswJDHx"},RECAPTCHA_URL=function(e){return"https://www.google.com/recaptcha/api.js?render=".concat(RECAPTCHA_KEYS[e])},ArticleView=View.extend({cidPrefix:"articleView",tagName:"article",className:"article-view mdown",initialize:function(e){},renderFrame:function(e,i){this.el.innerHTML=this.model.get("text")}});module.exports=ArticleView;

},{"app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CanvasProgressMeter.js":[function(require,module,exports){
(function (_){
"use strict";var CanvasView=require("app/view/base/CanvasView"),PI2=2*Math.PI,BASE_ROTATION=.75,GAP_ARC=PI2/48,easeIn=require("utils/ease/fn/easeInQuad"),easeOut=require("utils/ease/fn/easeOutQuad"),LOOP_OFFSET=1.833333,STEP_MS=400,ARC_DEFAULTS={amount:{lineWidth:.75,radiusOffset:0},available:{lineWidth:.75,inverse:"not-available"},"not-available":{lineWidth:.8,lineDash:[.3,.7],lineDashOffset:0},indeterminate:{lineWidth:2,lineDash:[.3,1.7],lineDashOffset:0}};module.exports=CanvasView.extend({cidPrefix:"canvasProgressMeter",className:"progress-meter canvas-progress-meter",defaultKey:"amount",defaults:{values:{amount:0,available:0,_loop:0,_stalled_arc:0,_stalled_loop:0},maxValues:{amount:1,available:1,_stalled_loop:1},useOpaque:!0,labelFn:function(e,t){return e/t*100|0}},properties:{stalled:{get:function(){return!1},set:function(e){}}},_setStalled:function(e){this._stalled!==e&&(this._stalled=e,this.requestRender(CanvasView.MODEL_INVALID|CanvasView.LAYOUT_INVALID))},initialize:function(e){CanvasView.prototype.initialize.apply(this,arguments),this._labelFn=e.labelFn,this._stalled=!!e.stalled,this._valueStyles={},this._canvasSize=null,this._canvasOrigin=null},_needsLoop:!1,valueTo:function(e,t,a){"amount"===e&&t<this.interpolator.getCurrentValue("amount")&&(this._needsLoop=!0),CanvasView.prototype.valueTo.apply(this,arguments)},measureCanvas:function(e,t,a){this._canvasHeight=this._canvasWidth=Math.min(e,t)},updateCanvas:function(){var e;for(var t in ARC_DEFAULTS)(e=_.defaults({},ARC_DEFAULTS[t])).lineWidth*=this._canvasRatio,e.radius=(this._canvasWidth-e.lineWidth)/2,e.radiusOffset&&(e.radius+=e.radiusOffset*this._canvasRatio),_.isArray(e.lineDash)?(e.lineDash=e.lineDash.map(function(e,t,a){return e*this.radius*GAP_ARC},e),e.lineDashLength=e.lineDash.reduce(function(e,t,a,s){return e+t},0),e.lineDashArc=e.lineDash[0]*GAP_ARC):e.lineDashArc=0,this._valueStyles[t]=e;var a=this._getFontMetrics(this._fontFamily);this._baselineShift=a?(a.ascent+a.descent)/a.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._ctx.restore(),this._ctx.setTransform(1,0,0,1,this._canvasWidth/2,this._canvasHeight/2),this._ctx.save()},redraw:function(e,t,a){var s,i,l,n;this._clearCanvas(-this._canvasWidth/2,-this._canvasHeight/2,this._canvasWidth,this._canvasHeight),i=t._valueData.amount,this.drawLabel(this._labelFn(i._renderedValue,i._maxVal)),e.save(),this._needsLoop&&(this._needsLoop=!1,t.valueTo("_loop",1,0),t.valueTo("_loop",0,750),t.updateValue("_loop")),n=t.getCurrentValue("_loop"),e.rotate(PI2*(BASE_ROTATION+(1-n)));var r=0;s=this._valueStyles.amount,(l=n+i._renderedValue/i._maxVal)>0&&(r=this.drawArc(l,GAP_ARC,PI2-GAP_ARC,r,s),this.drawEndCap(r,s),r+=2*GAP_ARC),s=this._valueStyles.available;var h=(i=t._valueData.available).length||1,_=PI2/h,o=GAP_ARC+(_%GAP_ARC-s.lineDashArc)/2;if(Array.isArray(i))for(var u=0;u<h;u++)l=i[u]._renderedValue/(i[u]._maxVal/h),this.drawArc(l,u*_+o,(u+1)*_-o,r,s);else l=i._renderedValue/i._maxVal,this.drawArc(l,o,PI2-o,r,s);this._stalled?0===t.getTargetValue("_stalled_arc")&&t.valueTo("_stalled_arc",1,1*STEP_MS,easeIn).updateValue("_stalled_arc"):1===t.getTargetValue("_stalled_arc")&&t.valueTo("_stalled_arc",0,1*STEP_MS,easeOut).updateValue("_stalled_arc");var d=t.getRenderedValue("_stalled_arc");d>0&&!t.paused&&t.isAtTarget("_stalled_loop")&&t.valueTo("_stalled_loop",0,0).valueTo("_stalled_loop",1,2*STEP_MS).updateValue("_stalled_loop");var c=t.getRenderedValue("_stalled_loop");if(d>0){var v=d*(2*(c<.5?c%.5:.5-c%.5))*.25+.125*d+1e-4,p=c+LOOP_OFFSET;e.save(),e.lineWidth=10*this._canvasRatio,e.globalAlpha=1,e.globalCompositeOperation="destination-out",e.strokeColor="red",e.beginPath(),e.arc(0,0,this._canvasWidth/2,(1-v+p)*PI2,(v+p)*PI2,!1),e.stroke(),e.restore()}e.restore()},drawArc:function(e,t,a,s,i){var l,n,r,h,_,o;return s||(s=0),(r=t+(l=a-t)*e)>(n=Math.max(t,s))&&(this._ctx.save(),this.applyValueStyle(i),this._ctx.beginPath(),this._ctx.arc(0,0,i.radius,r,n,!0),this._ctx.stroke(),this._ctx.restore()),void 0!==i.inverse&&(h=this._valueStyles[i.inverse],(o=r+l*(1-e))>(_=Math.max(r,s))&&(this._ctx.save(),this.applyValueStyle(h),this._ctx.beginPath(),this._ctx.arc(0,0,h.radius,o,_,!0),this._ctx.stroke(),this._ctx.restore())),r},applyValueStyle:function(e){this._ctx.lineWidth=e.lineWidth,_.isArray(e.lineDash)&&this._ctx.setLineDash(e.lineDash),_.isNumber(e.lineDashOffset)&&(this._ctx.lineDashOffset=e.lineDashOffset)},drawNotch:function(e,t,a){var s,i,l,n;s=Math.cos(e),i=Math.sin(e),l=a.radius,n=a.radius-t,this._ctx.save(),this.applyValueStyle(a),this._ctx.lineCap="square",this._ctx.beginPath(),this._ctx.moveTo(l*s,l*i),this._ctx.lineTo(n*s,n*i),this._ctx.stroke(),this._ctx.restore()},drawEndCap:function(e,t){var a=t.radius;this._ctx.save(),this._ctx.lineWidth=t.lineWidth,this._ctx.rotate(e-2*GAP_ARC),this._ctx.beginPath(),this._ctx.arc(0,0,a,.5*GAP_ARC,2*GAP_ARC,!1),this._ctx.lineTo(a-GAP_ARC*a,0),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()},drawLabel:function(e){this._labelText!==e&&(this._labelText=e,this._labelWidth=this._ctx.measureText(e).width),this._ctx.fillText(e,-.5*this._labelWidth,this._baselineShift,this._labelWidth)}});

}).call(this,require("underscore"))

},{"app/view/base/CanvasView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/CanvasView.js","underscore":"underscore","utils/ease/fn/easeInQuad":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/easeInQuad.js","utils/ease/fn/easeOutQuad":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/easeOutQuad.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/Carousel.js":[function(require,module,exports){
(function (_){
"use strict";var Container=require("backbone.babysitter"),Hammer=require("hammerjs"),Pan=require("utils/touch/SmoothPanRecognizer"),Tap=Hammer.Tap,Globals=require("app/control/Globals"),View=require("app/view/base/View"),CarouselRenderer=require("app/view/render/CarouselRenderer"),prefixedProperty=require("utils/prefixedProperty"),prefixedStyleName=require("utils/prefixedStyleName"),transformStyleName=prefixedStyleName("transform"),transformProperty=prefixedProperty("transform"),translateTemplate=Globals.TRANSLATE_TEMPLATE,MAX_SELECT_THRESHOLD=20,VERTICAL=Hammer.DIRECTION_VERTICAL,HORIZONTAL=Hammer.DIRECTION_HORIZONTAL,dirToStr=function(e){return e===Hammer.DIRECTION_NONE?"NONE":e===Hammer.DIRECTION_LEFT?"LEFT":e===Hammer.DIRECTION_RIGHT?"RIGHT":e===Hammer.DIRECTION_UP?"UP":e===Hammer.DIRECTION_DOWN?"DOWN":e===Hammer.DIRECTION_HORIZONTAL?"HOR":e===Hammer.DIRECTION_VERTICAL?"VER":e===Hammer.DIRECTION_ALL?"ALL":"UNREC"},isValidTouchManager=function(e,t){try{return e.get("hpan").options.direction==t}catch(e){return!1}},createTouchManager=function(e,t,i){var s=new Hammer.Manager(e),r=new Pan({event:"hpan",threshold:Globals.THRESHOLD,direction:Hammer.DIRECTION_HORIZONTAL}),n=new Tap({threshold:Globals.THRESHOLD-1,interval:50,time:200});return n.recognizeWith(r),s.add([r,n]),s},Carousel={ANIMATED:!1,IMMEDIATE:!0,DIRECTION_VERTICAL:VERTICAL,DIRECTION_HORIZONTAL:HORIZONTAL,defaults:{selectOnScrollEnd:!1,requireSelection:!1,direction:HORIZONTAL,selectThreshold:20,rendererFunction:function(){var e=CarouselRenderer.extend({className:"carousel-item default-renderer"}),t=CarouselRenderer.extend({className:"carousel-item empty-renderer"});return function(i,s,r){return-1===s?t:e}}()}};Carousel.validOptions=_.keys(Carousel.defaults);var CarouselProto={cidPrefix:"carousel",tagName:"div",className:"carousel skip-transitions",properties:{scrolling:{get:function(){return this._scrolling}},selectedItem:{get:function(){return this._selectedView.model},set:function(e){e?this._onSelectOne(e):this._onSelectNone()}}},events:{"transitionend .carousel-item.selected":"_onScrollTransitionEnd","click .carousel-item:not(.selected)":"_onClick"},initialize:function(e){_.bindAll(this,"_onPointerEvent","_onClick"),this.itemViews=new Container,this.metrics={},_.extend(this,_.defaults(_.pick(e,Carousel.validOptions),Carousel.defaults)),this._precedingDir=(Hammer.DIRECTION_LEFT|Hammer.DIRECTION_UP)&this.direction,this._followingDir=(Hammer.DIRECTION_RIGHT|Hammer.DIRECTION_DOWN)&this.direction,isValidTouchManager(e.touch,this.direction)?this.touch=e.touch:(console.warn("%s::initialize creating Hammer instance",this.cid),this.touch=createTouchManager(this.el,this.direction),this.listenTo(this,"view:removed",function(){this.touch.destroy()})),this.setEnabled(!0),this.skipTransitions=!0,this._renderFlags=View.CHILDREN_INVALID,this.listenTo(this,"view:attached",function(){this.skipTransitions=!0,this.requestRender(View.SIZE_INVALID|View.LAYOUT_INVALID)}),this.listenTo(this.collection,{reset:this._onReset,"select:one":this._onSelectOne,"select:none":this._onSelectNone,"deselect:one":this._onDeselectAny,"deselect:none":this._onDeselectAny})},remove:function(){return this._togglePointerEvents(!1),this.removeChildren(),View.prototype.remove.apply(this,arguments),this},dirProp:function(e,t){return this.direction&HORIZONTAL?e:t},renderFrame:function(e,t){t&View.CHILDREN_INVALID&&(this._createChildren(),t&=~View.CHILDREN_INVALID),this.attached?(t&View.SIZE_INVALID&&this._measure(),t&(View.LAYOUT_INVALID|View.SIZE_INVALID)&&this._scrollBy(this._delta,this.skipTransitions)):t&&this.listenToOnce(this,"view:attached",function(){this.requestRender(t)})},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this._togglePointerEvents(e),this.setImmediate(this._renderEnabled))},_renderEnabled:function(){this.el.classList.toggle("disabled",!this.enabled),this.itemViews.each(function(e){e.setEnabled(this.enabled)},this)},_createChildren:function(){var e,t,i,s;this.removeChildren(),this.collection.length&&(s={enabled:this.enabled},e=document.createDocumentFragment(),this.requireSelection||(t=this.rendererFunction(null,-1,this.collection),i=new t(s),this.itemViews.add(i),e.appendChild(i.el),this.emptyView=i),this.collection.each(function(r,n,o){s.model=r,t=this.rendererFunction(r,n,o),i=new t(s),this.itemViews.add(i),e.appendChild(i.el)},this),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this.el.appendChild(e))},removeChildren:function(){this.itemViews.each(this.removeItemView,this),this.emptyView=void 0},removeItemView:function(e){return this.itemViews.remove(e),e.remove(),e},_measure:function(){var e,t,i,s,r=0,n=0,o=0,a=0;i=s=this.emptyView||this.itemViews.first(),this.itemViews.each(function(e){e.render()}),this.itemViews.each(function(t){(e=this.measureItemView(t)).pos=r,r+=e.outer,e.posInner=n,n+=e.inner,t!==this.emptyView&&(e.across>o&&(o=e.across,s=t),e.outer>a&&(a=e.outer,i=t))},this),(t=this.metrics[this.cid]||(this.metrics[this.cid]={})).outer=this.el[this.dirProp("offsetWidth","offsetHeight")],t.before=i.el[this.dirProp("offsetLeft","offsetTop")],t.inner=i.el[this.dirProp("offsetWidth","offsetHeight")],t.after=t.outer-(t.inner+t.before),t.across=o,this._tapAcrossBefore=s.el[this.dirProp("offsetTop","offsetLeft")],this._tapAcrossAfter=this._tapAcrossBefore+o,this._tapBefore=t.before+this._tapGrow,this._tapAfter=t.before+t.inner-this._tapGrow,this.selectThreshold=Math.min(MAX_SELECT_THRESHOLD,.1*t.outer)},measureItemView:function(e){var t,i;return i=e.el,(t=this.metrics[e.cid]||(this.metrics[e.cid]={})).outer=i[this.dirProp("offsetWidth","offsetHeight")],t.across=i[this.dirProp("offsetHeight","offsetWidth")],e.metrics?(t.before=e.metrics[this.dirProp("marginLeft","marginTop")],t.outer+=t.before,t.outer+=e.metrics[this.dirProp("marginRight","marginBottom")],t.inner=e.metrics.content[this.dirProp("width","height")],t.before+=e.metrics.content[this.dirProp("x","y")],t.after=t.outer-(t.inner+t.before)):(console.warn("%s::measureItemView view '%s' has no metrics",this.cid,e.cid),t.inner=t.outer,t.after=t.before=0),t},_delta:0,_scrolling:!1,_setScrolling:function(e){this._scrolling!=e&&(this._scrolling=e,this.el.classList.toggle("scrolling",e),this.trigger(e?"view:scrollstart":"view:scrollend"))},scrollBy:function(e,t){this._delta=e||0,this.skipTransitions=!!t,this.requestRender(View.LAYOUT_INVALID)},_scrollBy:function(e,t){var i,s,r;i=this.metrics[(this._scrollCandidateView||this._selectedView).cid],this.itemViews.each(function(t){s=this.metrics[t.cid],r=Math.floor(this._getScrollOffset(e,s,i)),t.metrics.translateX=this.direction&HORIZONTAL?r:0,t.metrics.translateY=this.direction&HORIZONTAL?0:r,t.metrics._transform=translateTemplate(t.metrics.translateX,t.metrics.translateY),t.el.style[transformProperty]=t.metrics._transform},this),this.el.classList.toggle("skip-transitions",t),this.selectFromView()},_getScrollOffset:function(e,t,i){var s,r=0;return(s=t.pos-i.pos+e)<0?Math.abs(s)<i.outer?r+=-t.after/i.outer*s:r+=t.after:0<=s&&(Math.abs(s)<i.outer?r-=t.before/i.outer*s:r-=t.before),s+r},_onScrollTransitionEnd:function(e){e.propertyName===transformStyleName&&this.scrolling&&(this.cid,e.target.cid,this._setScrolling(!1))},_togglePointerEvents:function(e){this._pointerEventsEnabled!=e&&(this._pointerEventsEnabled=e,e?(this.touch.on("hpanstart hpanmove hpanend hpancancel",this._onPointerEvent),this.el.addEventListener(View.CLICK_EVENT,this._onClick,!0)):(this.touch.off("hpanstart hpanmove hpanend hpancancel",this._onPointerEvent),this.el.removeEventListener(View.CLICK_EVENT,this._onClick,!0)))},_onPointerEvent:function(e){if("pointercancel"!==e.srcEvent.type)switch(this.cid,e.type,e.srcEvent.type,dirToStr(e.offsetDirection),dirToStr(e.direction),dirToStr(this.direction),dirToStr(e.direction|this.direction),e.srcEvent.defaultPrevented,e.type){case"hpanstart":return this._onPanStart(e);case"hpanmove":return this._onPanMove(e);case"hpanend":case"hpancancel":return this._onPanFinal(e)}},getViewAtPanDir:function(e){return e&this._followingDir?this._precedingView:this._followingView},_onPanStart:function(e){this.selectFromView(),this.el.classList.add("panning"),this._setScrolling(!0)},_onPanMove:function(e){var t=this.direction&HORIZONTAL?e.deltaX:e.deltaY,i=this.getViewAtPanDir(e.offsetDirection),s=this._panCandidateView;s!==i&&(s&&s.el.classList.remove("candidate"),i&&i.el.classList.add("candidate"),this._panCandidateView=i),void 0===s&&(t*=Globals.HPAN_OUT_DRAG),-1!==this._renderRafId?(this.scrollBy(t,Carousel.IMMEDIATE),this.renderNow()):this._scrollBy(t,Carousel.IMMEDIATE)},_onPanFinal:function(e){var t,i=this.direction&HORIZONTAL?e.deltaX:e.deltaY;"hpanend"==e.type&&e.direction^e.offsetDirection^this.direction&&Math.abs(i)>this.selectThreshold&&(t=this.getViewAtPanDir(e.offsetDirection)),this._scrollCandidateView=t||void 0,this._panCandidateView&&this._panCandidateView!==t&&this._panCandidateView.el.classList.remove("candidate"),this._panCandidateView=void 0,this.el.classList.remove("panning"),this.cid,e.type,Math.abs(i),this.selectThreshold,dirToStr(e.direction),dirToStr(e.offsetDirection),dirToStr(this.direction),dirToStr(e.direction^e.offsetDirection^this.direction),t&&(t.cid,t.model.cid),this.scrollBy(0,Carousel.ANIMATED),this.selectFromView()},_tapGrow:10,getViewAtTapPos:function(e,t){if(this._tapAcrossBefore<t&&t<this._tapAcrossAfter){if(e<this._tapBefore)return this._precedingView;if(e>this._tapAfter)return this._followingView}},_onClick:function(e){this.cid,e.type,e.defaultPrevented,this._onTap(e)},_onTap:function(e){if(!e.defaultPrevented){var t,i=View.findByDescendant(e.target);do{if(this._selectedView===i){t=null;break}if(this===i.parentView){t=i;break}if(this===i){var s,r,n;s=this.el.getBoundingClientRect(),r=("tap"===e.type?e.center.x:e.clientX)-s.left,n=("tap"===e.type?e.center.y:e.clientY)-s.top,t=this.getViewAtTapPos(this.dirProp(r,n),this.dirProp(n,r));break}}while(i=i.parentView);t&&(e.preventDefault(),this._scrollCandidateView=t,this._setScrolling(!0),this.scrollBy(0,Carousel.ANIMATED),this.triggerSelectionEvents(t,!0))}},triggerSelectionEvents:function(e,t){void 0===e||this._internalSelection||(this._internalSelection=!!t,e===this.emptyView?this.trigger("view:select:none"):this.trigger("view:select:one",e.model),this._internalSelection=!1)},selectFromView:function(){this._scrollCandidateView&&this.triggerSelectionEvents(this._scrollCandidateView,!0)},adjustToSelection:function(){var e,t=this.collection.selectedIndex;this.requireSelection?(-1==t&&t++,this._selectedView=(e=this.collection.at(t))&&this.itemViews.findByModel(e),this._precedingView=(e=this.collection.at(t-1))&&this.itemViews.findByModel(e),this._followingView=(e=this.collection.at(t+1))&&this.itemViews.findByModel(e)):(this._selectedView=(e=this.collection.at(t))?this.itemViews.findByModel(e):this.emptyView,this._precedingView=e&&((e=this.collection.at(t-1))?this.itemViews.findByModel(e):this.emptyView),this._followingView=(e=this.collection.at(t+1))&&this.itemViews.findByModel(e))},_onSelectOne:function(e){e!==this._selectedView.model&&this._onSelectAny(e)},_onSelectNone:function(){(this.requireSelection?this.itemViews.first():this.emptyView)!==this._selectedView&&this._onSelectAny()},_onSelectAny:function(e){this._selectedView.el.classList.remove("selected"),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this._scrollCandidateView&&(this._scrollCandidateView.el.classList.remove("candidate"),this._scrollCandidateView=void 0),this._internalSelection||(this._setScrolling(!0),this.scrollBy(0,Carousel.ANIMATED))},_onReset:function(){this.requestRender(View.CHILDREN_INVALID|View.MODEL_INVALID)}};module.exports=Carousel=View.extend(CarouselProto,Carousel);

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","app/view/render/CarouselRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/CarouselRenderer.js","backbone.babysitter":"backbone.babysitter","hammerjs":"hammerjs","underscore":"underscore","utils/prefixedProperty":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedProperty.js","utils/prefixedStyleName":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedStyleName.js","utils/touch/SmoothPanRecognizer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/touch/SmoothPanRecognizer.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CollectionStack.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(e,l,n,a,r){var i;return e.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=l?l.id:l))?i:n.helperMissing)?i.call(null!=l?l:e.nullContext||{},{name:"id",hash:{},data:r}):i)},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CollectionStack.js":[function(require,module,exports){
"use strict";var View=require("app/view/base/View"),viewTemplate=require("./CollectionStack.hbs");module.exports=View.extend({cidPrefix:"stack",tagName:"div",className:"stack",template:viewTemplate,events:{transitionend:function(t){this._renderContent()}},initialize:function(t){this._enabled=!0,this._skipTransitions=!0,this._contentInvalid=!0,t.template&&(this.template=t.template),this.content=document.createElement("div"),this.content.className="stack-item",this.el.appendChild(this.content),this.listenTo(this.collection,"select:one select:none",this._onSelectChange)},setEnabled:function(t){this._enabled!==t&&(this._enabled=t,this.el.classList.toggle("disabled",!this._enabled))},_onSelectChange:function(t){if(this._renderedItem===this.collection.selected)throw new Error("change event received but item is identical");this._renderedItem=this.collection.selected,this._contentInvalid=!0,this.render()},render:function(){return this._skipTransitions?(this._skipTransitions=!1,this.el.classList.add("skip-transitions"),this.setImmediate(function(){this.el.classList.remove("skip-transitions")}),this._contentInvalid&&this._renderContent()):this._contentInvalid&&this.content.classList.remove("current"),this},_renderContent:function(){if(this._contentInvalid){this._contentInvalid=!1;var t=this.collection.selected;this.content.innerHTML=t?this.template(t.toJSON()):"",this.content.classList.add("current")}}});

},{"./CollectionStack.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CollectionStack.hbs","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/FilterableListView.js":[function(require,module,exports){
(function (_){
"use strict";var Container=require("backbone.babysitter"),View=require("app/view/base/View"),ClickableRenderer=require("app/view/render/ClickableRenderer"),prefixedProperty=require("utils/prefixedProperty"),getBoxEdgeStyles=require("utils/css/getBoxEdgeStyles"),diff=require("utils/array/difference"),resolveAll=require("utils/promise/resolveAll"),rejectAll=require("utils/promise/rejectAll"),translateCssValue=require("app/control/Globals").TRANSLATE_TEMPLATE,transformProp=prefixedProperty("transform"),FilterableListView=View.extend({cidPrefix:"filterableList",tagName:"ul",className:"list selectable filterable",defaults:{collapsed:!0,filterFn:function(){return!0},renderer:ClickableRenderer.extend({cidPrefix:"listItem",className:"list-item list-node"})},properties:{collapsed:{get:function(){return this._collapsed},set:function(e){this._setCollapsed(e)}},selectedItem:{get:function(){return this._selectedItem},set:function(e){this._setSelection(e)}},filteredItems:{get:function(){return this._filteredItems}},metrics:{get:function(){return this._metrics}}},events:{"transitionend .list-node":function(e){e.propertyName==transformProp&&e.target.parentElement===this.el&&this._changedPosNum--,this._collapsedChanging&&0==this._changedPosNum&&(this.cid,e.type,e.propertyName,this._collapsePromises.length,this._collapsedChanging=!1,this.el.classList.remove("collapsed-changing"),resolveAll(this._collapsePromises,this))}},initialize:function(e){this._filteredItems=[],this._filteredIncoming=[],this._filteredOutgoing=[],this._metrics={},this._itemMetrics=[],this._collapsePromises=[],this.itemViews=new Container,_.defaults(e,this.defaults),this.renderer=e.renderer,this._filterFn=e.filterFn,this.collection.each(this.createItemView,this),this._setSelection(this.collection.selected),this._setCollapsed(e.collapsed),this.refreshFilter(),this.listenTo(this.collection,"reset",function(){throw this._allItems=null,new Error("not implemented")}),this.cid,this.attached,this.once("view:attached",function(e){e.cid,e.attached,e.skipTransitions=!0,e.el.classList.add("skip-transitions"),e.setImmediate(function(){e.renderNow()})})},_getAllItems:function(){return this._allItems||(this._allItems=this.collection.slice())},_whenCollapseChangeEnds:function(){if(this._collapsedChanged){var e=this;return new Promise(function(t,i){e.on("view:render:after",t)})}return Promise.resolve(this)},whenCollapseChangeEnds:function(){var e,t;return this._collapsedChanging||this._collapsedChanged?(e={},t=new Promise(function(t,i){e.resolve=t,e.reject=i}),this._collapsePromises.push(e)):t=Promise.resolve(this),t},renderFrame:function(e,t){if(this._collapsedChanging&&(console.warn("%s::renderFrame collapsed tx interrupted",this.cid),this._collapsedChanging=!1,this.el.classList.remove("collapsed-changing"),rejectAll(this._collapsePromises,this)),this.skipTransitions&&(this.el.classList.add("skip-transitions"),this.setImmediate(function(){this.skipTransitions=!1,this.el.classList.remove("skip-transitions")})),this._collapsedChanged&&(this._collapsedChanged=!1,t|=View.SIZE_INVALID,this.el.classList.toggle("collapsed",this._collapsed),this.skipTransitions?(this._collapsedChanging=!1,this.once("view:render:after",function(e){this._changedPosNum=0,resolveAll(e._collapsePromises,e)})):(this._collapsedChanging=!0,this.el.classList.add("collapsed-changing")),this.cid,this._collapsePromises.length,this._collapsedChanging),this._selectionChanged&&(this._selectionChanged=!1,t|=View.LAYOUT_INVALID,this.renderSelection(this.collection.selected,this.collection.lastSelected)),this._filterChanged){this._filterChanged=!1,t|=View.LAYOUT_INVALID;this.filteredItems;this.computeFilter(),this.applyFilter()}t&View.SIZE_INVALID&&this.measure(),t&(View.LAYOUT_INVALID|View.SIZE_INVALID)&&this.renderLayout()},measure:function(){this._metrics=getBoxEdgeStyles(this.el,this._metrics),this.itemViews.forEach(function(e){e._metrics||(e._metrics={}),e._metrics.offsetTop=e.el.offsetTop,e._metrics.offsetHeight=e.el.offsetHeight,e._metrics.offsetLeft=e.el.offsetLeft,e._metrics.offsetWidth=e.el.offsetWidth,!this._collapsed&&e.label?(e._metrics.textLeft=e.label.offsetLeft,e._metrics.textWidth=e.label.offsetWidth):(e._metrics.textLeft=e._metrics.offsetLeft,e._metrics.textWidth=e._metrics.offsetWidth)},this)},renderLayout:function(){var e,t,i,s;e=this._metrics.paddingLeft,t=this._metrics.paddingTop,this._changedPosNum=0;for(var l=0,r=this.el.children.length;l<r;l++){var n=this.itemViews.findByCid(this.el.children[l].cid);i=n.transform.tx,s=n.transform.ty,(this.collection.selected&&!n.model.selected||n.el.classList.contains("excluded"))&&this._collapsed?(n.transform.tx=e,n.transform.ty=t):(0==n._metrics.offsetHeight&&(t-=n._metrics.offsetTop),n.transform.tx=e,n.transform.ty=t,t+=n._metrics.offsetHeight+n._metrics.offsetTop),n.el.style[transformProp]=translateCssValue(n.transform.tx,n.transform.ty),n.transform.tx==i&&n.transform.ty==s||this._changedPosNum++}this._metrics.height=Math.max(0,t+this._metrics.paddingBottom),this.el.style.height=this._metrics.height+"px"},createItemView:function(e,t){var i=new this.renderer({model:e,el:this.el.querySelector('.list-item[data-id="'+e.id+'"]')});return this.listenTo(i,"renderer:click",this._onRendererClick),this.itemViews.add(i),i},_onRendererClick:function(e,t){this._collapsedChanging||this._collapsed&&e.get("excluded")||(this.collection.selected!==e?this.trigger("view:select:one",e):t.altKey?this.trigger("view:select:none"):this.trigger("view:select:same",e))},_collapsed:void 0,_setCollapsed:function(e){e!==this._collapsed&&(this._collapsed=e,this._collapsedChanged=!0,this.requestRender())},_selectedItem:void 0,_setSelection:function(e){e!==this._selectedItem&&(this._selectedItem=e,this._selectionChanged=!0,this.requestRender(View.MODEL_INVALID))},renderSelection:function(e,t){t&&this.itemViews.findByModel(t).el.classList.remove("selected"),e&&this.itemViews.findByModel(e).el.classList.add("selected"),this.el.classList.toggle("has-selected",null!==this.selectedItem)},refreshFilter:function(){this._filterFn&&(this._filterChanged=!0,this.requestRender(View.MODEL_INVALID))},computeFilter:function(){var e,t,i,s;this._filteredIncoming.length=0,this._filteredOutgoing.length=0,e=this._filterFn?this.collection.filter(this._filterFn,this):this._getAllItems(),t=this._filteredItems,i=!(!e||!e.length),s=!(!t||!t.length),i&&diff(s?t:this._getAllItems(),e,this._filteredIncoming),s&&diff(i?e:this._getAllItems(),t,this._filteredOutgoing),this._filteredItems=e},applyFilter:function(){this._filteredIncoming.forEach(function(e){this.itemViews.findByModel(e).el.classList.add("excluded"),e.set("excluded",!0)},this),this._filteredOutgoing.forEach(function(e){this.itemViews.findByModel(e).el.classList.remove("excluded"),e.set("excluded",!1)},this),this.el.classList.toggle("has-excluded",this.filteredItems.length>0)}});module.exports=FilterableListView;

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","app/view/render/ClickableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ClickableRenderer.js","backbone.babysitter":"backbone.babysitter","underscore":"underscore","utils/array/difference":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/array/difference.js","utils/css/getBoxEdgeStyles":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/css/getBoxEdgeStyles.js","utils/prefixedProperty":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedProperty.js","utils/promise/rejectAll":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/promise/rejectAll.js","utils/promise/resolveAll":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/promise/resolveAll.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/GraphView.js":[function(require,module,exports){
(function (_){
"use strict";var _dStyles,applyFn,debouncedLog,Color=require("color"),CanvasView=require("app/view/base/CanvasView"),Globals=require("app/control/Globals"),calcArcHConnector=require("utils/canvas/calcArcHConnector"),CanvasHelper=require("utils/canvas/CanvasHelper"),inflateRect=require("utils/geom/inflateRect"),styleBase={lineCap:"butt",lineWidth:.75,lineDashOffset:0,setLineDash:[[]]},paramsBase={radiusBase:1.25,radiusIncrement:.21,outlineWidth:3,arrowSize:.4},getRectDirX=function(t,e){return t.right<e.left?1:e.right<t.left?-1:0},GraphView=CanvasView.extend({cidPrefix:"graph",tagName:"canvas",className:"graph",defaultKey:"a2b",defaults:{values:{a2b:0,b2a:0},maxValues:{a2b:1,b2a:1}},initialize:function(t){CanvasView.prototype.initialize.apply(this,arguments),this._listA=t.listA,this._listB=t.listB,this._a2b={srcView:t.listA,destView:t.listB,s:_.defaults({lineWidth:.7},styleBase,paramsBase),p:_.defaults({},paramsBase),strokeStyleFn:function(t,e,i){return Color(i).mix(e,.1).hex()}},this._b2a={srcView:t.listB,destView:t.listA,s:_.defaults({lineWidth:.7},styleBase,paramsBase),p:_.defaults({},paramsBase),strokeStyleFn:function(t,e,i){return Color(t).mix(e,.4).hex()}}},measureCanvas:function(t,e,i){this.cid,i.height,this.el.offsetHeight,this.el.scrollHeight,this.el.clientHeight},updateCanvas:function(){this._updateMetrics(),this._updateStyles()},_updateStyles:function(){var t,e,i;this.model.has("bundle")?(t=this.model.get("bundle"),i=Color(t.colors.lnColor),e=Color(t.colors.bgColor)):(e=Color(Globals.DEFAULT_COLORS["background-color"]),i=Color(Globals.DEFAULT_COLORS["link-color"])),this._a2b.s.strokeStyle=this._a2b.s.fillStyle=this._a2b.strokeStyleFn(this._color,e,i),this._b2a.s.strokeStyle=this._b2a.s.fillStyle=this._b2a.strokeStyleFn(this._color,e,i)},_setStyle:function(t){"string"==typeof t&&(t=this._styleData[t]),CanvasView.setStyle(this._ctx,t)},_updateMetrics:function(){var t,e,i,s,a,n,o,r;for(this._rootFontSize=parseFloat(getComputedStyle(document.documentElement).fontSize),t=this.el.getBoundingClientRect(),this._ctx.setTransform(this._canvasRatio,0,0,this._canvasRatio,-(t.left+window.pageXOffset)*this._canvasRatio-.5,-(t.top+window.pageYOffset)*this._canvasRatio-.5),a=this._a2b.srcView.el.getBoundingClientRect(),n=this._a2b.destView.el.getBoundingClientRect(),this._a2b.qx=getRectDirX(a,n),s=this._listA.el.querySelectorAll(".label"),o=a.left+window.pageXOffset,e=0,i=s.length;e<i;e++)o=Math.max(o,s[e].getBoundingClientRect().right+window.pageXOffset);for(this._a2b.xMin=o,s=this._listB.el.querySelectorAll(".label"),r=n.left+window.pageXOffset,e=0,i=s.length;e<i;e++)r=Math.min(r,s[e].getBoundingClientRect().left+window.pageXOffset);this._a2b.destMinX=r,this._b2a.qx=-this._a2b.qx,this._b2a.xMin=this._a2b.destMinX,this._b2a.destMinX=this._a2b.xMin},redraw:function(t,e,i){this._clearCanvas(0,0,this._canvasWidth,this._canvasHeight),t.save(),this._redraw_fromElements(t,e,i),t.restore()},_redraw_fromElements:function(t,e,i){var s,a;i&(CanvasView.SIZE_INVALID|CanvasView.MODEL_INVALID)&&(this.cid,e.valuesChanged,CanvasView.flagsToString(i),this._a2b.connectorsOut=this._a2b.connectors,this._b2a.connectorsOut=this._b2a.connectors,this._b2a.connectors=this._computeConnectors(this._b2a),this._a2b.connectors=this._computeConnectors(this._a2b),this._labelOverlays=this._computeLabelOverlays(this._listB)),s=e.getRenderedValue("b2a")/e.getOption("b2a","max"),a=e.getRenderedValue("a2b")/e.getOption("a2b","max"),this._drawConnectors(this._b2a.connectors,this._b2a.s,s,1),this._drawConnectors(this._b2a.connectorsOut,this._b2a.s,1-s,1),this._drawConnectors(this._a2b.connectors,this._a2b.s,a,2),this._drawLabelOverlays(this._labelOverlays)},_computeLabelOverlays:function(t){var e,i,s,a={rects:[]},n=t.el.querySelectorAll(".list-group .label span");for(e=0,i=n.length;e<i;e++)(s=_.clone(n[e].getBoundingClientRect())).top+=window.pageYOffset,s.left+=window.pageXOffset,a.rects[e]=s;return a},_drawLabelOverlays:function(t){this._ctx.save(),this._ctx.globalAlpha=.85,this._ctx.globalCompositeOperation="destination-out",t.rects.forEach(function(t){this._ctx.fillRect(t.left,t.top,t.width,t.height)},this),this._ctx.restore()},_computeConnectors:function(t){var e,i,s=t.xMin,a=t.destMinX,n=t.qx;e=this._roundTo(t.s.radiusBase*this._rootFontSize,.5),i=this._roundTo(t.s.radiusIncrement*this._rootFontSize,.5);var o,r,l,c,h,d,_,f=[];if(t.srcView.collection.selected&&t.destView.filteredItems){var u=t.srcView.itemViews.findByModel(t.srcView.collection.selected).label.getBoundingClientRect();for(c=u.left,h=u.top+u.height/2,n>0&&(c+=u.width),c+=window.pageXOffset,h+=window.pageYOffset,_=t.destView.filteredItems,l=t.destView.filteredItems.length,o=0;o<l;o++)r={},u=t.destView.itemViews.findByModel(_[o]).label.getBoundingClientRect(),r.x2=u.left,r.y2=u.top+u.height/2,n<0&&(r.x2+=u.width),r.x2+=window.pageXOffset,r.y2+=window.pageYOffset,r.x1=c,r.y1=h,r.qx=n,f[o]=r;f.sort(function(t,e){return t.y2-e.y2});var w,g=0,x=l*i*.5;for(o=0;o<l;o++)w=(o-(l-1)/2)*i,(r=f[o]).cy1=r.y1+w,r.cy2=r.y2,r.r0=Math.abs(w),r.cx0=r.x1+(x-r.r0)*n,r.di=r.cy1-r.y2>0?o:l-(o+1),g=Math.max(g,r.di);var b=(Math.abs(a-s)-(x+g*i))/2;for(e=Math.max(0,Math.min(e,b)),o=0;o<l;o++)(r=f[o]).r1=r.di*i+e,r.r2=e,r.cx1=s+x*n,r.cx2=a-(g-r.di)*i*n,(d=calcArcHConnector(r.cx1,r.cy1,r.r1,r.cx2,r.cy2,r.r2,.7))?(r.tx1=d[0],r.tx2=d[1]):(r.tx1=r.cx1,r.tx2=r.cx2),r.length=Math.abs(r.x1-r.x2)+Math.abs(r.cy1-r.cy2);f.sort(function(t,e){return t.di-e.di}),f.si=g,f.qx=n,f.sMin=s,f.dMin=a}return f},_drawConnectors:function(t,e,i,s){var a,n,o,r,l,c,h;if(t&&t.length&&i){if(n=t.length,r=e.lineWidth+e.outlineWidth,c=(l=e.arrowSize*this._rootFontSize)+(r-e.lineWidth),h=Math.PI*s,this._setStyle(e),e.outlineWidth){for(this._ctx.save(),this._ctx.globalCompositeOperation="destination-out",this._ctx.lineWidth=r,a=0;a<n;a++)o=t[a],i<1&&(this._ctx.lineDashOffset=o.length*(1+i),this._ctx.setLineDash([o.length,o.length])),this._drawConnector(o,a,t),1==i&&this._drawArrowhead(o.x2,o.y2,c,s*h);this._ctx.restore()}for(a=0;a<n;a++)o=t[a],i<1&&(this._ctx.lineDashOffset=o.length*(1+i),this._ctx.setLineDash([o.length,o.length])),this._drawConnector(o,a,t),1==i&&this._drawArrowhead(o.x2,o.y2,l,s*h)}},_drawArrowhead:function(t,e,i,s){CanvasHelper.arrowhead2(this._ctx,t,e,i,s),this._ctx.stroke()},_drawArrowhead2:function(t,e,i,s){CanvasHelper.arrowhead(this._ctx,t,e,i,s),this._ctx.fill()},_drawConnector:function(t,e,i){this._ctx.beginPath(),this._ctx.moveTo(t.x2,t.cy2),this._ctx.arcTo(t.tx2,t.cy2,t.tx1,t.cy1,t.r2),this._ctx.arcTo(t.tx1,t.cy1,t.cx1,t.cy1,t.r1),this._ctx.arcTo(t.cx0,t.cy1,t.cx0,t.y1,t.r0),this._ctx.stroke()},_roundTo:function(t,e){return e>1&&(e=1/e),Math.round(t/e)*e}});module.exports=GraphView;

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/base/CanvasView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/CanvasView.js","color":"color","underscore":"underscore","utils/canvas/CanvasHelper":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/CanvasHelper.js","utils/canvas/calcArcHConnector":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/calcArcHConnector.js","utils/geom/inflateRect":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/geom/inflateRect.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/GroupingListView.js":[function(require,module,exports){
(function (_){
"use strict";var FilterableListView=require("app/view/component/FilterableListView"),ClickableRenderer=require("app/view/render/ClickableRenderer"),LabelRenderer=require("app/view/render/LabelRenderer"),GroupingListView=FilterableListView.extend({cidPrefix:"groupingList",tagName:"dl",className:"grouped",_groupingFn:null,defaults:_.defaults({renderer:ClickableRenderer.extend({cidPrefix:"groupingListItem",tagName:"dl",className:"list-item list-node"}),groupingRenderer:LabelRenderer.extend({cidPrefix:"groupingListGroup",tagName:"dt",className:"list-group list-node"}),groupingFn:null},FilterableListView.prototype.defaults),properties:{groups:{get:function(){return this._groups}},filteredGroups:{get:function(){return this._filteredGroups}}},initialize:function(e){FilterableListView.prototype.initialize.apply(this,arguments),this._groups=[],this._filteredGroups=[],this._changedFilteredGroups=[],this._groupsByItemCid={},this._groupingFn=e.groupingFn,this.groupingRenderer=e.groupingRenderer,this._computeGroups(),this._groupingFn&&this._groups.forEach(this.createGroupingView,this)},_computeGroups:function(){this._groups.length=0,this._groupingFn?this.collection.forEach(function(e){var i,t;(t=this._groupingFn.apply(null,arguments))&&-1==(i=this._groups.indexOf(t))&&(i=this._groups.length,this._groups[i]=t),this._groupsByItemCid[e.cid]=t},this):this.collection.forEach(function(e){this._groupsByItemCid[e.cid]=null},this)},createGroupingView:function(e){var i=new this.groupingRenderer({model:e,el:this.el.querySelector('.list-group[data-id="'+e.id+'"]')});return this.itemViews.add(i),i},computeFilter:function(){FilterableListView.prototype.computeFilter.apply(this,arguments),this._groupingFn&&(0==this._filteredItems.length?this._filteredGroups=this._groups.concat():this._filteredGroups=_.uniq(this._filteredItems.map(function(e){return this._groupsByItemCid[e.cid]},this)))},applyFilter:function(){FilterableListView.prototype.applyFilter.apply(this,arguments),this._groups.forEach(function(e){this.itemViews.findByModel(e).el.classList.toggle("excluded",-1==this._filteredGroups.indexOf(e))},this)}});module.exports=GroupingListView;

}).call(this,require("underscore"))

},{"app/view/component/FilterableListView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/FilterableListView.js","app/view/render/ClickableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ClickableRenderer.js","app/view/render/LabelRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/LabelRenderer.js","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/PlayToggleSymbol.js":[function(require,module,exports){
(function (_){
"use strict";var CanvasView=require("app/view/base/CanvasView"),Color=require("color"),stackBlurRGB=require("utils/canvas/bitmap/stackBlurRGB"),getAverageRGB=require("utils/canvas/bitmap/getAverageRGB"),multiply=require("utils/canvas/bitmap/multiply"),desaturate=require("utils/canvas/bitmap/desaturate"),roundRect=require("utils/canvas/CanvasHelper").roundRect,easeIn=require("utils/ease/fn/easeInQuad"),easeOut=require("utils/ease/fn/easeOutQuad"),PI2=2*Math.PI,LOOP_OFFSET=1.833333,INTEP_MS=require("app/control/Globals").TRANSITION_DURATION,FILTER_REFRESH_THRESHOLD=.5,FILTER_SCALE=1.5,FILTER_RADIUS=30,FILTER_MULTIPLY=.1,PlayToggleSymbol={PLAY:"playing",PAUSE:"paused",WAITING:"waiting",ENDED:"ended"};module.exports=CanvasView.extend({cidPrefix:"playToggleSymbol",className:"play-toggle",defaults:{values:{_loop:0,_arc:0},maxValues:{_loop:1},color:"rgba(255,255,255,1.0)",backgroundColor:"rgba(0,0,0,0.25)",paused:!0,symbolName:""},properties:{symbolName:{get:function(){return this._symbolName},set:function(e){this._setSymbolName(e)}}},initialize:function(e){CanvasView.prototype.initialize.apply(this,arguments),this._options=_.extend(this._options,_.pick(e,"symbolName","borderRadius","borderWidth")),this.symbolName=this._options.symbolName},measureCanvas:function(e,a,t){this._canvasHeight=this._canvasWidth=Math.min(e,a)},updateCanvas:function(e,a){var t=this._getFontMetrics(this._fontFamily);this._baselineShift=t?(t.ascent+t.descent)/t.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._canvasOffsetX=this._canvasOffsetY=this._canvasWidth/2,this._radius=this._canvasWidth/2*Math.SQRT1_2*Math.SQRT1_2*Math.SQRT1_2,this._side=this._radius,this._ctx.setTransform(1,0,0,1,this._canvasOffsetX,this._canvasOffsetY),this._ctx.lineWidth=this._radius*(1-Math.SQRT1_2),this._ctx.shadowColor="rgba(0,0,0,0.75)",this._ctx.shadowBlur=1,this._ctx.shadowOffsetX=2,this._ctx.shadowOffsetY=2,this._isImageDataInvalid=!0},_symbolName:"",_setSymbolName:function(e){this._symbolName!==e&&(this._lastSymbolName=this._symbolName,this._symbolName=e,this.refreshImageSource(),this.requestRender(CanvasView.LAYOUT_INVALID),this.attached?this.parentView.cid:this.cid,this._symbolName,this._lastSymbolName,this.paused)},_imageSource:null,setImageSource:function(e){this._imageSource!==e&&(this._imageSource=e,this._isImageDataInvalid=!0,this.requestRender(CanvasView.SIZE_INVALID))},_imageDataTC:null,refreshImageSource:function(e){!this._isImageDataInvalid&&this._imageSource instanceof HTMLVideoElement&&(_.isNumber(e)||(e=FILTER_REFRESH_THRESHOLD),e<Math.abs(this._imageDataTC-this._imageSource.currentTime)&&(this._isImageDataInvalid=!0,this.requestRender(CanvasView.SIZE_INVALID)))},_imageData:null,_updateImageData:function(){if(null===this._imageSource)return this._imageData=null,void(this._imageDataTC=null);var e,a,t,i,s,h;a=this._imageSource.getBoundingClientRect(),i=this.el.getBoundingClientRect(),this._imageSource instanceof HTMLVideoElement?(e=this._imageSource.videoWidth/a.width,s=this._imageSource.currentTime):(e=this._imageSource.naturalWidth/a.width,s=0),t=e*FILTER_SCALE,this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.drawImage(this._imageSource,(i.left-a.left)*e+i.width/2*e-i.width/2*t,(i.top-a.top)*e+i.height/2*e-i.height/2*t,i.width*t,i.height*t,0,0,this.el.width,this.el.height),h=this._ctx.getImageData(0,0,this.el.width,this.el.height),this._ctx.clearRect(0,0,this.el.width,this.el.height),this._ctx.restore(),this._color="black",h=multiply(h,1+FILTER_MULTIPLY),h=stackBlurRGB(h,FILTER_RADIUS),this._imageData=h,this._imageDataTC=s},redraw:function(e,a,t){this._clearCanvas(),"waiting"===this._symbolName?0===a.getTargetValue("_arc")&&a.valueTo("_arc",1,0*INTEP_MS,easeIn).updateValue("_arc"):1===a.getTargetValue("_arc")&&a.valueTo("_arc",0,0*INTEP_MS,easeOut).updateValue("_arc");var i=a.getRenderedValue("_arc");i>0&&!a.paused&&a.isAtTarget("_loop")&&a.valueTo("_loop",0,0).valueTo("_loop",1,2*INTEP_MS).updateValue("_loop");var s=a.getRenderedValue("_loop");if(i>0){var h=i*(2*(s<.5?s%.5:.5-s%.5))*.25+.125*i+1e-4,l=s+LOOP_OFFSET;e.beginPath(),e.arc(0,0,this._radius,(1-h+l)*PI2,(h+l)*PI2,!1),e.stroke()}switch(this._symbolName){case"replay":case"ended":case"play":this.drawPlay(e,this._side),e.fill();break;case"pause":this.drawPause(e,this._side),e.fill();break;case"waiting":switch(this._lastSymbolName){case"replay":case"ended":case"play":this.drawPlay(e,(1-i)*this._side),e.fill();break;case"pause":this.drawPause(e,(1-i)*this._side),e.fill()}}},drawPlay:function(e,a){var t=(1-Math.SQRT1_2)*a;e.beginPath(),e.moveTo(t+a,0),e.lineTo(t-a,-a),e.lineTo(t-a,a),e.closePath()},drawPause:function(e,a){var t=.75*a,i=2*a;e.beginPath(),e.rect(-a,-a,t,i),e.rect(a-t,-a,t,i),e.closePath()},drawLabel:function(e){var a=this._ctx.measureText(e).width;this._ctx.fillText(e,-.5*a,this._baselineShift,a)}},PlayToggleSymbol);

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/base/CanvasView":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/CanvasView.js","color":"color","underscore":"underscore","utils/canvas/CanvasHelper":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/CanvasHelper.js","utils/canvas/bitmap/desaturate":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/desaturate.js","utils/canvas/bitmap/getAverageRGB":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/getAverageRGB.js","utils/canvas/bitmap/multiply":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/multiply.js","utils/canvas/bitmap/stackBlurRGB":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/stackBlurRGB.js","utils/ease/fn/easeInQuad":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/easeInQuad.js","utils/ease/fn/easeOutQuad":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/easeOutQuad.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/SelectableListView.js":[function(require,module,exports){
"use strict";var View=require("app/view/base/View"),Container=require("backbone.babysitter"),DefaultSelectableRenderer=require("app/view/render/DefaultSelectableRenderer"),ClickableRenderer=require("app/view/render/ClickableRenderer"),SelectableListView=View.extend({cidPrefix:"selectableList",tagName:"ul",className:"list selectable",renderer:DefaultSelectableRenderer,initialize:function(e){this._enabled=!0,this._childrenInvalid=!0,e.renderer&&(this.renderer=e.renderer),this.showEmpty=!!e.showEmpty,this.itemViews=new Container,this.listenTo(this.collection,"add remove reset",this._onCollectionChange)},remove:function(){return this.removeChildren(),View.prototype.remove.apply(this,arguments),this},_onCollectionChange:function(e){this._childrenInvalid=!0,this.render()},render:function(){return this._childrenInvalid&&(this._childrenInvalid=!1,this.createChildren()),this},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this.el.classList.toggle("disabled",!this._enabled))},createChildren:function(){var e,i;this.removeChildren(),this.el.innerHTML="",this.collection.length&&(e=document.createDocumentFragment(),this.showEmpty&&(i=this.createEmptyView(),e.appendChild(i.render().el)),this.collection.each(function(t,n,r){i=this.createItemView(t,n),e.appendChild(i.render().el)},this),this.el.appendChild(e))},createItemView:function(e,i){var t=new this.renderer({model:e});return this.itemViews.add(t),this.listenTo(t,"renderer:click",this.onItemViewClick),t},removeChildren:function(){this.itemViews.each(this.removeItemView,this)},removeItemView:function(e){return this.stopListening(e),this.itemViews.remove(e),e.remove(),e},onItemViewClick:function(e){this.collection.selected!==e&&this._enabled&&this.trigger("view:select:one",e)},createEmptyView:function(){var e=new SelectableListView.EmptyRenderer({model:this.collection});return this.itemViews.add(e),this.listenTo(e,"renderer:click",function(){this._enabled&&this.trigger("view:select:none")}),e}},{EmptyRenderer:ClickableRenderer.extend({tagName:"li",className:"list-item empty-item",initialize:function(e){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML='<a href="#clear"><b> </b></a>',this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",-1===this.model.selectedIndex)}})});module.exports=SelectableListView;

},{"app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","app/view/render/ClickableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ClickableRenderer.js","app/view/render/DefaultSelectableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DefaultSelectableRenderer.js","backbone.babysitter":"backbone.babysitter"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/helper/createColorStyleSheet.js":[function(require,module,exports){
(function (_){
"use strict";var Color=require("color"),Globals=require("app/control/Globals"),bundles=require("app/model/collection/BundleCollection");function insertCSSRule(o,r,e){var l="";for(var t in e)l+=t+":"+e[t]+";";o.insertRule(r+"{"+l+"}",o.cssRules.length)}function selfAndDescendant(o,r){return o+" "+r+", "+o+r}var rootStyles=["color","background","background-color"];function initRootStyles(o,r,e,l,t,s,n){var i,c,u,a;insertCSSRule(o,r,i=_.pick(e,rootStyles)),(i={}).color=s.rgb().string(),insertCSSRule(o,r+" a",i),insertCSSRule(o,r+" .color-ln",i),(i={}).color=Color(l).mix(t,.5).rgb().string(),i["border-color"]=Color(l).mix(t,.3).rgb().string(),insertCSSRule(o,r+" .color-fg05",i),u=l.rgb().string(),a=t.rgb().string(),c=r+" .color-reverse",insertCSSRule(o,r+" .color-fg",i={color:u}),insertCSSRule(o,r+" .color-bg",i={"background-color":a}),i={color:a},insertCSSRule(o,selfAndDescendant(c,".color-fg"),i),i={"background-color":u},insertCSSRule(o,selfAndDescendant(c,".color-bg"),i),insertCSSRule(o,r+" .color-stroke",i={stroke:u}),insertCSSRule(o,r+" .color-fill",i={fill:a}),i={stroke:a},insertCSSRule(o,selfAndDescendant(c,".color-stroke"),i),i={fill:u},insertCSSRule(o,selfAndDescendant(c,".color-fill"),i)}var carouselStyles=["box-shadow","border","border-radius"];function initCarouselStyles(o,r,e,l,t,s,n){var i=_.pick(e,carouselStyles);insertCSSRule(o,r+" .media-item .content",i),(i={})["background-color"]=Color(t).mix(l,.05).rgb().string(),insertCSSRule(o,r+" .media-item .color-bg09",i),(i={}).color=t.rgb().string(),i["background-color"]=Color(t).mix(l,.05).rgb().string(),"border-radius"in e&&(i["border-radius"]=e["border-radius"]),insertCSSRule(o,r+" .media-item .placeholder",i),(i={})["background-color"]=t.rgb().string(),insertCSSRule(o,r+" .image-item img",i),insertCSSRule(o,r+" .sequence-item .sequence-step",i),(i={})["text-decoration-color"]=Color(l).mix(t,.7).rgb().string(),insertCSSRule(o,r+" .empty-item A",i)}module.exports=function(){var o,r,e,l,t;o=Globals.DEFAULT_COLORS,r=new Color(Globals.DEFAULT_COLORS.color),e=new Color(Globals.DEFAULT_COLORS["background-color"]),l=new Color(Globals.DEFAULT_COLORS["link-color"]),t=r.luminosity()>e.luminosity();var s=document.createElement("style");s.id="colors",s.type="text/css",document.head.appendChild(s),initRootStyles(s.sheet,".app",o,r,e,l,t),initCarouselStyles(s.sheet,".carousel",o,r,e,l,t),bundles.each(function(n){o=n.attrs(),r=n.colors.fgColor,e=n.colors.bgColor,l=n.colors.lnColor,t=n.colors.hasDarkBg,initRootStyles(s.sheet,".app."+n.get("domid"),o,r,e,l,t),initCarouselStyles(s.sheet,".carousel."+n.get("domid"),o,r,e,l,t)})};

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/model/collection/BundleCollection":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/collection/BundleCollection.js","color":"color","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/_loadImageAsObjectURL.js":[function(require,module,exports){
"use strict";window.XMLHttpRequest&&window.URL&&window.Blob?module.exports=function(o,e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",o,!0),r.responseType="blob";var s=function(e){var t=new Error((e.target.status>0?"http_"+r.statusText.replace(/\s/g,"_"):e.type+"_event").toUpperCase());return t.logMessage="_loadImageAsObjectURL::"+e.type+" [reject]",t.infoCode=e.target.status,t.infoSrc=o,t.logEvent=e,t};e&&(r.onprogress=function(o){e(o.loaded/o.total,r)}),r.onload=function(o){200==r.status?t(URL.createObjectURL(r.response)):n(s(o))},r.onabort=function(o){t(void 0)},r.onerror=function(o){n(s(o))},r.ontimeout=r.onerror,r.onloadend=function(o){r.onabort=r.ontimeout=r.onerror=void 0,r.onload=r.onloadend=void 0,e&&(r.onprogress=void 0)},r.send()})}:module.exports=function(o,e){return Promise.resolve(o)};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/_whenImageLoads.js":[function(require,module,exports){
"use strict";module.exports=function(e,r){return new Promise(function(n,o){if(e instanceof window.HTMLImageElement)if(e.complete&&(e.src.length>0||r))n(e);else{var t={load:function(r){a(),n(e)},error:function(r){var n=new Error("Loading failed ("+r.type+" event)");n.infoCode=-1,n.infoSrc=e.src,n.logEvent=r,n.logMessage="_whenImageLoads::"+r.type+" [reject]",a(),o(n)}};t.abort=t.error;var a=function(){for(var r in t)t.hasOwnProperty(r)&&e.removeEventListener(r,t[r],!1)};for(var i in t)t.hasOwnProperty(i)&&e.addEventListener(i,t[i],!1)}else o("Error: not an HTMLImageElement")})};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenDefaultImageLoads.js":[function(require,module,exports){
(function (_){
"use strict";var _whenImageLoads=require("app/view/promise/_whenImageLoads"),_loadImageAsObjectURL=require("app/view/promise/_loadImageAsObjectURL");module.exports=function(e){return new Promise(function(t,a){var n=e.model.get("source");if(n.has("prefetched"))e.defaultImage.src=n.get("prefetched"),_whenImageLoads(e.defaultImage).then(function(a){t(e)});else{e.mediaState="pending";var r=n.get("original"),o=function(t,a){e.updateMediaProgress(t,r)};o=_.throttle(o,100,{leading:!0,trailing:!1}),_loadImageAsObjectURL(r,o).then(function(t){return/^blob\:.*/.test(t)&&n.set("prefetched",t),e.defaultImage.src=t,e.defaultImage}).then(_whenImageLoads).then(function(a){e.on("view:removed",function(){var e=n.get("prefetched");e&&/^blob\:/.test(e)&&(n.unset("prefetched",{silent:!0}),URL.revokeObjectURL(e))}),t(e)},function(e){a(e)})}})};

}).call(this,require("underscore"))

},{"app/view/promise/_loadImageAsObjectURL":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/_loadImageAsObjectURL.js","app/view/promise/_whenImageLoads":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/_whenImageLoads.js","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenScrollingEnds.js":[function(require,module,exports){
"use strict";var ViewError=require("app/view/base/ViewError"),whenViewIsAttached=require("app/view/promise/whenViewIsAttached");function whenScrollingEnds(e){return new Promise(function(r,n){var i=e.parentView;if(null===i)console.error("%s::whenScrollingEnds [%s] (sync)",e.cid,"rejected",e.attached),n(new ViewError(e,new Error("whenScrollingEnds: view has no parent")));else if(i.scrolling){var o=function(){i.off("view:scrollend",w),i.off("view:remove",s)},w=function(){o(),r(e)},s=function(){o(),n(new ViewError(e,new Error("whenScrollingEnds: view was removed")))};i.on("view:scrollend",w),i.on("view:remove",s)}else r(e)})}module.exports=function(e){return Promise.resolve(e).then(whenViewIsAttached).then(whenScrollingEnds)};

},{"app/view/base/ViewError":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/ViewError.js","app/view/promise/whenViewIsAttached":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenViewIsAttached.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenSelectionDistanceIs.js":[function(require,module,exports){
"use strict";var ViewError=require("app/view/base/ViewError");module.exports=function(e,n){return new Promise(function(o,r){var i=e.model,t=i.collection,c=function(e){return Math.abs(t.indexOf(i)-t.selectedIndex)<=n};if(c())o(e);else{var s=function(){t.off("select:one select:none",f),e.off("view:removed",w)},f=function(n){c()&&(s(),o(e))},w=function(e){s(),r(new ViewError(e,new Error("whenSelectionDistanceIs: view was removed")))};t.on("select:one select:none",f),e.on("view:removed",w)}})};

},{"app/view/base/ViewError":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/ViewError.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenSelectionIsContiguous.js":[function(require,module,exports){
"use strict";var whenSelectionDistanceIs=require("app/view/promise/whenSelectionDistanceIs");module.exports=function(e){return whenSelectionDistanceIs(e,1)};

},{"app/view/promise/whenSelectionDistanceIs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenSelectionDistanceIs.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenViewIsAttached.js":[function(require,module,exports){
"use strict";module.exports=function(t){return new Promise(function(e,n){t.attached?e(t):t.on("view:attached",function(t){e(t)})})};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenViewIsRendered.js":[function(require,module,exports){
"use strict";module.exports=function(e){return new Promise(function(n,t){e.invalidated?e.once("view:render:after",function(e,t){n(e)}):n(e)})};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/CarouselRenderer.js":[function(require,module,exports){
(function (_){
"use strict";var View=require("app/view/base/View"),getBoxEdgeStyles=require("utils/css/getBoxEdgeStyles"),CarouselRenderer=View.extend({cidPrefix:"carouselRenderer",tagName:"div",className:"carousel-item",template:_.template('<div class="content sizing"><%= name %></div>'),properties:{content:{get:function(){return this._content||(this._content=this.el.querySelector(".content"))}},sizing:{get:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))}}},initialize:function(t){if(void 0!==this.model.attr("@classname"))for(var e=this.model.attr("@classname").split(" "),i=0;i<e.length;i++)this.el.classList.add(e[i]);t.parentView&&(this.parentView=t.parentView),this.metrics={},this.metrics.content={},this.createChildren(),this.setEnabled(!!t.enabled)},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},getSizingEl:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))},getContentEl:function(){return this._content||(this._content=this.el.querySelector(".content"))},measure:function(){var t=this.getSizingEl();return this.metrics=getBoxEdgeStyles(this.el,this.metrics),this.metrics.content=getBoxEdgeStyles(this.getContentEl(),this.metrics.content),t.style.maxWidth="",t.style.maxHeight="",this.metrics.content.x=t.offsetLeft+t.clientLeft,this.metrics.content.y=t.offsetTop+t.clientTop,this.metrics.content.width=t.clientWidth,this.metrics.content.height=t.clientHeight,this},render:function(){return this.measure(),this},getSelectionDistance:function(){return Math.abs(this.model.collection.indexOf(this.model)-this.model.collection.selectedIndex)}});module.exports=CarouselRenderer;

}).call(this,require("underscore"))

},{"app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","underscore":"underscore","utils/css/getBoxEdgeStyles":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/css/getBoxEdgeStyles.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ClickableRenderer.js":[function(require,module,exports){
"use strict";var LabelRenderer=require("app/view/render/LabelRenderer"),ClickableRenderer=LabelRenderer.extend({cidPrefix:"clickableRenderer",events:{"click .label":function(e){e.defaultPrevented||(e.preventDefault(),this.trigger("renderer:click",this.model,e))},"click a":function(e){e.defaultPrevented||e.preventDefault()}}});module.exports=ClickableRenderer;

},{"app/view/render/LabelRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/LabelRenderer.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DefaultSelectableRenderer.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(a,e,l,n,s){var r,t,i=null!=e?e:a.nullContext||{},u=l.helperMissing;return'<a href="#'+a.escapeExpression("function"==typeof(t=null!=(t=l.domid||(null!=e?e.domid:e))?t:u)?t.call(i,{name:"domid",hash:{},data:s}):t)+'"><span class="label">'+(null!=(r="function"==typeof(t=null!=(t=l.name||(null!=e?e.name:e))?t:u)?t.call(i,{name:"name",hash:{},data:s}):t)?r:"")+"</span></a>"},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DefaultSelectableRenderer.js":[function(require,module,exports){
"use strict";var ClickableRenderer=require("app/view/render/ClickableRenderer"),DefaultSelectableRenderer=ClickableRenderer.extend({tagName:"li",className:"list-item",template:require("./DefaultSelectableRenderer.hbs"),initialize:function(e){this.listenTo(this.model,"selected deselected",this._renderClassList),this._renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this._renderClassList(),this},_renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});module.exports=DefaultSelectableRenderer;

},{"./DefaultSelectableRenderer.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DefaultSelectableRenderer.hbs","app/view/render/ClickableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ClickableRenderer.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DotNavigationRenderer.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(a,e,l,n,s){var r,t=null!=e?e:a.nullContext||{},i=l.helperMissing,m=a.escapeExpression;return'<span class="label">'+m("function"==typeof(r=null!=(r=l.name||(null!=e?e.name:e))?r:i)?r.call(t,{name:"name",hash:{},data:s}):r)+'</span><a href="#'+m("function"==typeof(r=null!=(r=l.domid||(null!=e?e.domid:e))?r:i)?r.call(t,{name:"domid",hash:{},data:s}):r)+'"><b> </b></a>'},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DotNavigationRenderer.js":[function(require,module,exports){
"use strict";var View=require("app/view/base/View"),viewTemplate=require("./DotNavigationRenderer.hbs"),DotNavigationRenderer=View.extend({cidPrefix:"dotRenderer",tagName:"li",className:"list-item",template:viewTemplate,events:{click:function(e){e.defaultPrevented||(e.preventDefault(),this.trigger("renderer:click",this.model,e))},"click a":function(e){e.defaultPrevented||e.preventDefault()}},initialize:function(e){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});module.exports=DotNavigationRenderer;

},{"./DotNavigationRenderer.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/DotNavigationRenderer.hbs","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ImageRenderer.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(e,l,n,a,t){var i,s=null!=l?l:e.nullContext||{},r=n.helperMissing,d=e.escapeExpression;return'<div class="placeholder sizing"></div>\n<img class="content media-border default" alt="'+d("function"==typeof(i=null!=(i=n.text||(null!=l?l.text:l))?i:r)?i.call(s,{name:"text",hash:{},data:t}):i)+'" longdesc="#desc_m'+d("function"==typeof(i=null!=(i=n.id||(null!=l?l.id:l))?i:r)?i.call(s,{name:"id",hash:{},data:t}):i)+'" />\n'},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ImageRenderer.js":[function(require,module,exports){
"use strict";var MediaRenderer=require("./MediaRenderer"),viewTemplate=require("./ImageRenderer.hbs"),ImageRenderer=MediaRenderer.extend({cidPrefix:"imageRenderer",className:MediaRenderer.prototype.className+" image-item",template:viewTemplate,initialize:function(e){MediaRenderer.prototype.initialize.apply(this,arguments)},createChildren:function(){MediaRenderer.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder")},render:function(){MediaRenderer.prototype.render.apply(this,arguments);var e=this.getDefaultImage();this.metrics.media.width&&e.setAttribute("width",this.metrics.media.width),this.metrics.media.height&&e.setAttribute("height",this.metrics.media.height);var t=this.getContentEl();return t.style.left=this.metrics.content.x+"px",t.style.top=this.metrics.content.y+"px",this},initializeAsync:function(){return MediaRenderer.prototype.initializeAsync.apply(this,arguments)}});module.exports=ImageRenderer;

},{"./ImageRenderer.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/ImageRenderer.hbs","./MediaRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/MediaRenderer.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/LabelRenderer.js":[function(require,module,exports){
"use strict";var View=require("app/view/base/View"),LabelRenderer=View.extend({cidPrefix:"labelRenderer",properties:{label:{get:function(){return this._label||(this._label=this.el.querySelector(".label"))}}}});module.exports=LabelRenderer;

},{"app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/MediaRenderer.js":[function(require,module,exports){
(function (_){
"use strict";var lpad=require("underscore.string/lpad"),MediaItem=require("app/model/item/MediaItem"),CarouselRenderer=require("app/view/render/CarouselRenderer"),MediaRenderer=CarouselRenderer.extend({cidPrefix:"mediaRenderer",className:CarouselRenderer.prototype.className+" media-item",model:MediaItem,properties:{defaultImage:{get:function(){return this._defaultImage||(this._defaultImage=this.el.querySelector("img.default"))}},mediaState:{get:function(){return this._mediaState},set:function(e){this._setMediaState(e)}}},initialize:function(e){CarouselRenderer.prototype.initialize.apply(this,arguments),this.metrics.media={},this.mediaState="idle",this.initializeAsync().then(this.whenInitialized).catch(this.whenInitializeError.bind(this))},initializeAsync:function(){return Promise.resolve(this).then(MediaRenderer.whenSelectionIsContiguous).then(MediaRenderer.whenScrollingEnds).then(MediaRenderer.whenDefaultImageLoads)},whenInitialized:function(e){return e.mediaState="ready",e.placeholder.removeAttribute("data-progress"),e},whenInitializeError:function(e){e instanceof CarouselRenderer.ViewError||(e instanceof Error&&console.error(e.stack),this.placeholder.removeAttribute("data-progress"),this.mediaState="error")},updateMediaProgress:function(e,t){_.isNumber(e)&&this.placeholder.setAttribute("data-progress",lpad(Math.floor(100*e),2,"0"))},getDefaultImage:function(){return this.defaultImage},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},measure:function(){var e,t,i,r,s,n,a,d,o,h,m,c;return CarouselRenderer.prototype.measure.apply(this,arguments),s=(c=this.metrics.content).x,n=c.y,i=c.width,r=c.height,i-=h=c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth,r-=m=c.paddingTop+c.paddingBottom+c.borderTopWidth+c.borderBottomWidth,e=this.model.get("source").get("w"),t=this.model.get("source").get("h"),e<i&&t<r?(o=1,a=e,d=t,this.metrics.fitDirection="both"):i/r<e/t?(o=(a=i)/e,d=Math.round(o*t),this.metrics.fitDirection="width"):(o=(d=r)/t,a=Math.round(o*e),this.metrics.fitDirection="height"),this.metrics.content.x=s,this.metrics.content.y=n,this.metrics.content.width=a+h,this.metrics.content.height=d+m,this.metrics.media.x=s+c.paddingLeft+c.borderLeftWidth,this.metrics.media.y=n+c.paddingTop+c.borderTopWidth,this.metrics.media.width=a,this.metrics.media.height=d,this.metrics.media.scale=o,this},render:function(){this.measure();var e=this.getSizingEl();return e.style.maxWidth=this.metrics.content.width+"px",e.style.maxHeight=this.metrics.content.height+"px",this.el.setAttribute("data-fit-dir",this.metrics.fitDirection),this},_mediaStateEnum:["idle","pending","ready","error"],_setMediaState:function(e){if(-1===this._mediaStateEnum.indexOf(e))throw new Error("Argument "+e+" invalid. Must be one of: "+this._mediaStateEnum.join(", "));this._mediaState!==e&&(this._mediaState&&this.el.classList.remove(this._mediaState),this.el.classList.add(e),this._mediaState=e,this.trigger("media:"+e))}},{LOG_TO_SCREEN:!0,whenSelectionDistanceIs:require("app/view/promise/whenSelectionDistanceIs"),whenSelectionIsContiguous:require("app/view/promise/whenSelectionIsContiguous"),whenScrollingEnds:require("app/view/promise/whenScrollingEnds"),whenDefaultImageLoads:require("app/view/promise/whenDefaultImageLoads")});module.exports=MediaRenderer;

}).call(this,require("underscore"))

},{"app/model/item/MediaItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/model/item/MediaItem.js","app/view/promise/whenDefaultImageLoads":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenDefaultImageLoads.js","app/view/promise/whenScrollingEnds":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenScrollingEnds.js","app/view/promise/whenSelectionDistanceIs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenSelectionDistanceIs.js","app/view/promise/whenSelectionIsContiguous":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/whenSelectionIsContiguous.js","app/view/render/CarouselRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/CarouselRenderer.js","underscore":"underscore","underscore.string/lpad":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/lpad.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/PlayableRenderer.js":[function(require,module,exports){
(function (_){
"use strict";var MediaRenderer=require("app/view/render/MediaRenderer"),prefixedProperty=require("utils/prefixedProperty"),prefixedEvent=require("utils/prefixedEvent"),visibilityStateProp=prefixedProperty("visibilityState",document),visibilityChangeEvent=prefixedEvent("visibilitychange",document,"hidden"),PlayableRenderer=MediaRenderer.extend({cidPrefix:"playableRenderer",className:MediaRenderer.prototype.className+" playable-item",properties:{mediaPaused:{get:function(){return this._isMediaPaused()}},mediaWaiting:{get:function(){return this._isMediaWaiting()}},playbackRequested:{get:function(){return this._playbackRequested},set:function(e){this._setPlaybackRequested(e)}},overlay:{get:function(){return this._overlay||(this._overlay=this.el.querySelector(".overlay"))}},playToggleHitarea:{get:function(){return this._playToggleHitarea||(this._playToggleHitarea=this.el.querySelector(".play-toggle-hitarea"))}}},initialize:function(e){this._playToggleSymbol={},_.bindAll(this,"_onPlaybackToggle","_onVisibilityChange"),MediaRenderer.prototype.initialize.apply(this,arguments),this._setPlaybackRequested(this._playbackRequested)},setEnabled:function(e){MediaRenderer.prototype.setEnabled.apply(this,arguments),this._validatePlayback()},listenToSelection:function(){if("initialized"!=this._viewPhase)throw new Error(this.cid+"::listenToSelection called while "+this._viewPhase);this.listenTo(this.model,"selected",this._onModelSelected),this.listenTo(this.model,"deselected",this._onModelDeselected),this.model.selected&&this._onModelSelected()},_onModelSelected:function(){this.cid,this._playbackRequested,this._toggleEvent,this.listenTo(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,this.parentView,null),this._playToggleSymbol.paused=!this.enabled,this._listenWhileSelected(),this._validatePlayback()},_onModelDeselected:function(){this.cid,this._playbackRequested,this._toggleEvent,this.stopListening(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,null,this.parentView),this._playToggleSymbol.paused=!0,this._stopListeningWhileSelected(),this._validatePlayback(!1)},_onParentChange:function(e,t,i){i&&this.stopListening(i,"view:scrollstart view:scrollend",this._onScrollChange),t&&this.listenTo(t,"view:scrollstart view:scrollend",this._onScrollChange)},_onScrollChange:function(){if(null===this.parentView)throw new Error(this.cid+"::_onScrollChange parentView is null");this._validatePlayback()},_onVisibilityChange:function(e){this._validatePlayback()},_listenWhileSelected:function(){this.listenTo(this,"view:removed",this._stopListeningWhileSelected),document.addEventListener(visibilityChangeEvent,this._onVisibilityChange,!1),this.playToggleHitarea.addEventListener(this._toggleEvent,this._onPlaybackToggle,!1)},_stopListeningWhileSelected:function(){this.stopListening(this,"view:removed",this._stopListeningWhileSelected),document.removeEventListener(visibilityChangeEvent,this._onVisibilityChange,!1),this.playToggleHitarea.removeEventListener(this._toggleEvent,this._onPlaybackToggle,!1)},_toggleEvent:MediaRenderer.CLICK_EVENT,_onPlaybackToggle:function(e){!this.enabled||e.defaultPrevented||e.button||(e.preventDefault(),this.playbackRequested=!this.playbackRequested)},_playbackCount:0,_playbackRequested:null,_setPlaybackRequested:function(e){this._playbackRequested=e;var t=this.content.classList;t.toggle("playing",!0===e),t.toggle("paused",!1===e),t.toggle("requested",!0===e||!1===e),this._renderPlaybackState(),this._validatePlayback()},_togglePlayback:function(e){_.isBoolean(e)&&e!==this._isMediaPaused()||((e=this._isMediaPaused())?this._playMedia():this._pauseMedia())},_canResumePlayback:function(){return!(!(this.enabled&&this.model.selected&&this.playbackRequested&&"ready"===this.mediaState&&this.attached&&null!==this.parentView)||this.parentView.scrolling||"hidden"==document[visibilityStateProp])},_validatePlayback:function(e){0===arguments.length||e?this._togglePlayback(this._canResumePlayback()):this._togglePlayback(!1),this._playToggleSymbol.paused=!(this.attached&&this.enabled&&this.model.selected)},_renderPlaybackState:function(){if(this.attached){this.progressMeter&&(this.progressMeter.stalled=this._isMediaWaiting());var e=!this.parentView.scrolling&&this._isMediaWaiting();this.playbackRequested?e?this._setPlayToggleSymbol("waiting"):this._setPlayToggleSymbol("play"):this.content.classList.contains("started")?this._setPlayToggleSymbol("pause"):this._setPlayToggleSymbol("play");var t=this.content.classList;t.toggle("playing",this.playbackRequested),t.toggle("paused",!this.playbackRequested),t.toggle("waiting",e)}},_setPlayToggleSymbol:function(e){this._playToggleSymbol.symbolName=e,"ready"===this.mediaState&&this._playToggleSymbol.renderNow()},_isWaiting:!1,_isMediaWaiting:function(){return this._isWaiting},_toggleWaiting:function(e){0===arguments.length&&(e=!this._isWaiting),this._isWaiting!==e&&(this._isWaiting=e,this._renderPlaybackState())},_isMediaPaused:function(){return console.warn("%s::_isMediaPaused Not implemented",this.cid),!0},_playMedia:function(){console.warn("%s::_playMedia Not implemented",this.cid)},_pauseMedia:function(){console.warn("%s::_pauseMedia Not implemented",this.cid)},updateOverlay:function(e,t,i){}});window.ga&&(PlayableRenderer=function(e){var t=require("underscore.string/dasherize");return e.extend({initialize:function(){var t=e.prototype.initialize.apply(this,arguments);return this._gaEventSuffix=this.playbackRequested?"-autoplay":"",t},_onPlaybackToggle:function(i){var a=e.prototype._onPlaybackToggle.apply(this,arguments);return window.ga?window.ga("send",{hitType:"event",eventCategory:t(this.cidPrefix),eventAction:(this.playbackRequested?"play":"pause")+this._gaEventSuffix,eventLabel:this.model.get("text")}):console.warn("%s::_onPlaybackToggle window.ga is %s",this.cid,window.ga),a}})}(PlayableRenderer)),module.exports=PlayableRenderer;

}).call(this,require("underscore"))

},{"app/view/render/MediaRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/MediaRenderer.js","underscore":"underscore","underscore.string/dasherize":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/underscore.string/dasherize.js","utils/prefixedEvent":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedEvent.js","utils/prefixedProperty":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedProperty.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/SequenceRenderer.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,s,a){var l,i=null!=t?t:e.nullContext||{},c=n.helperMissing,d=e.escapeExpression;return'<div class="placeholder sizing"></div>\n<div class="content">\n\t<div class="media-border content-size"></div>\n\t<div class="controls content-size">\n\t\t<canvas class="progress-meter"></canvas>\n\t</div>\n\t<div class="sequence media-size">\n\t\t<img class="sequence-step current default" alt="'+d("function"==typeof(l=null!=(l=n.text||(null!=t?t.text:t))?l:c)?l.call(i,{name:"text",hash:{},data:a}):l)+'" longdesc="#desc_m'+d("function"==typeof(l=null!=(l=n.id||(null!=t?t.id:t))?l:c)?l.call(i,{name:"id",hash:{},data:a}):l)+'" />\n\t</div>\n\t<div class="overlay media-size play-toggle-hitarea">\n\t\t<canvas class="play-toggle"/>\n\t</div>\n</div>\n'},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/SequenceRenderer.js":[function(require,module,exports){
(function (_){
"use strict";var Container=require("backbone.babysitter"),View=require("app/view/base/View"),PlayableRenderer=require("app/view/render/PlayableRenderer"),Globals=require("app/control/Globals"),ProgressMeter=require("app/view/component/CanvasProgressMeter"),PlayToggleSymbol=require("app/view/component/PlayToggleSymbol"),Timer=require("utils/Timer"),_whenImageLoads=require("app/view/promise/_whenImageLoads"),_loadImageAsObjectURL=require("app/view/promise/_loadImageAsObjectURL"),errorTemplate=require("../template/ErrorBlock.hbs"),MIN_STEP_INTERVAL=2*Globals.TRANSITION_DURATION+Globals.TRANSITION_DELAY_INTERVAL,DEFAULT_STEP_INTERVAL=6*Globals.TRANSITION_DURATION+Globals.TRANSITION_DELAY_INTERVAL,PrefetechedSourceRenderer=View.extend({cidPrefix:"sequenceStepRenderer",className:"sequence-step",tagName:"img",properties:{ready:{get:function(){return this._ready}}},initialize:function(e){!this.el.hasAttribute("alt")&&this.el.setAttribute("alt",this.model.get("src")),this.model.has("prefetched")?this._renderPrefetched():this.listenTo(this.model,"change:prefetched",this._renderPrefetched),this.listenTo(this.model,"selected deselected",this._renderSelection),this._renderSelection()},_renderSelection:function(){this.el.classList.toggle("current",!!this.model.selected)},_renderPrefetched:function(){var e=this.model.get("prefetched");e!==this.el.src&&(this.el.src=e),_whenImageLoads(this.el).then(function(e){this.requestAnimationFrame(function(e){this._setReady(!0)})}.bind(this),function(e){throw e instanceof Error||(e=new Error("cannot load prefetched url")),e}.bind(this))},_ready:!1,_setReady:function(e){this._ready!==e&&(this._ready=!!e,this.trigger("renderer:ready",this))},render:function(){return this.cid,this}}),SourceErrorRenderer=View.extend({className:"sequence-step error",cidPrefix:"sourceErrorRenderer",template:errorTemplate,ready:!0,initialize:function(e){this.listenTo(this.model,"selected deselected",function(){this.el.classList.toggle("current",!!this.model.selected)})},render:function(){return this.el.classList.toggle("current",!!this.model.selected),this.el.innerHTML=this.template(this.model.get("error")),this}}),SequenceStepRenderer=PrefetechedSourceRenderer,SequenceRenderer=PlayableRenderer.extend({cidPrefix:"sequenceRenderer",className:PlayableRenderer.prototype.className+" sequence-item",template:require("./SequenceRenderer.hbs"),initialize:function(e){this.sources=this.model.get("sources"),PlayableRenderer.prototype.initialize.apply(this,arguments)},createChildren:function(){PlayableRenderer.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.sequence=this.content.querySelector(".sequence");var e,t=this.model.attrs();e=_.pick(t,"box-shadow","border","border-radius"),_.extend(this.content.querySelector(".media-border").style,e),e=_.pick(t,"border-radius"),_.extend(this.sequence.style,e),_.extend(this.placeholder.style,e),this.sources.select(this.model.get("source")),this.itemViews=new Container,this.itemViews.add(new SequenceStepRenderer({el:this.getDefaultImage(),model:this.model.get("source")}))},render:function(){var e,t,r,s,i;PlayableRenderer.prototype.render.apply(this,arguments);var n,o,a=this.content;for(s=this.metrics.media.width+"px",i=this.metrics.media.height+"px",e=this.el.querySelectorAll(".media-size"),r=0;r<e.length;r++)(t=e.item(r)).style.width=s,t.style.height=i;return a.style.width=s,a.style.height=i,n=this.metrics.content.x+"px",o=this.metrics.content.y+"px",a.style.left=n,a.style.top=o,(t=this.el.querySelector(".controls")).style.width=this.metrics.content.width+"px",t.style.height=this.metrics.content.height+"px",this},initializePlayable:function(){this.content.classList.add("started"),PlayableRenderer.whenSelectionDistanceIs(this,0).then(this._preloadAllItems,function(e){return e instanceof View.ViewError?void 0:e}),this._sequenceInterval=Math.max(parseInt(this.model.attr("@sequence-interval")),MIN_STEP_INTERVAL)||DEFAULT_STEP_INTERVAL,this.timer=new Timer,this.listenTo(this,"view:removed",function(){this.timer.stop(),this.stopListening(this.timer)}),this.listenTo(this.timer,{start:this._onTimerStart,resume:this._onTimerResume,pause:this._onTimerPause,end:this._onTimerEnd}),this._playToggleSymbol=new PlayToggleSymbol(_.extend({el:this.el.querySelector(".play-toggle")},this._playToggleSymbol||{})),this._sourceProgressByIdx=this.sources.map(function(){return 0}),this._sourceProgressByIdx[0]=1,this.progressMeter=new ProgressMeter({el:this.el.querySelector(".progress-meter"),color:this.model.attr("color"),values:{available:this._sourceProgressByIdx.concat()},maxValues:{amount:this.sources.length,available:this.sources.length},labelFn:function(){return!1===this.playbackRequested?Globals.PAUSE_CHAR:this.sources.selectedIndex+1+"/"+this.sources.length}.bind(this)})},initializeAsync:function(){return PlayableRenderer.prototype.initializeAsync.apply(this,arguments).then(function(e){return e.whenAttached()}).then(function(e){return e.initializePlayable(),e.listenToSelection(),e})},whenInitialized:function(e){var t=PlayableRenderer.prototype.whenInitialized.apply(this,arguments);return e._validatePlayback(),t},_preloadAllItems:function(e){return e.once("view:remove",function(){var t={silent:!0};e.sources.forEach(function(e,r,s){var i=e.get("prefetched");i&&(e.set("progress",0,t),e.unset("prefetched",t),/^blob\:/.test(i)&&URL.revokeObjectURL(i))})}),e.sources.reduce(function(e,t,r,s){return e.then(function(e){if("disposed"===e._viewPhase)return e;if(t.has("prefetched"))return e._updateItemProgress(1,r),e;var s=function(t,s){e._updateItemProgress(s,r)};return e.listenTo(t,"change:progress",s),e.once("view:remove",function(e){e.stopListening(t,"change:progress",s)}),e.cid,t.get("original"),t.get("mime"),_loadImageAsObjectURL(t.get("original"),function(r,s){"disposed"===e._viewPhase?s.abort():t.set("progress",r)}).then(function(r){return t.set({progress:r?1:0,prefetched:r}),e},function(r){return t.set({progress:0,error:r}),e})})},Promise.resolve(e))},_updateItemProgress:function(e,t){this._sourceProgressByIdx[t]=e,this.progressMeter&&this.progressMeter.valueTo("available",this._sourceProgressByIdx,300)},_playbackRequested:!0,_paused:!0,_isMediaPaused:function(){return this._paused},_playMedia:function(){this._paused&&(this._paused=!1,this._isMediaWaiting()||(this.timer.status===Timer.PAUSED?this.timer.start():this.timer.start(this._sequenceInterval)))},_pauseMedia:function(){this._paused||(this._paused=!0,this.timer.status===Timer.STARTED&&this.timer.pause())},_onTimerStart:function(e){var t;t=-1===this.sources.selectedIndex?this.model.get("source"):this.sources.followingOrFirst(),this.sources.select(t),this.progressMeter.valueTo("amount",this.sources.selectedIndex+1,e),this.content.classList.toggle("playback-error",t.has("error"))},_onTimerResume:function(e){this.progressMeter.valueTo("amount",this.sources.selectedIndex+1,e)},_onTimerPause:function(e){this.progressMeter.valueTo("amount",this.progressMeter.getRenderedValue("amount"),0)},_onTimerEnd:function(){var e,t,r=function(e){return this.setImmediate(function(){this.mediaPaused||this.timer.start(this._sequenceInterval)}),e}.bind(this);e=this.sources.followingOrFirst(),t=this._getItemView(e),e.has("error")?r():e.has("prefetched")?_whenImageLoads(t.el).then(r,r):(this._toggleWaiting(!0),this.listenToOnce(e,"change:prefetched change:error",function(e){this._toggleWaiting(!1),_whenImageLoads(t.el).then(r,r)}))},_getItemView:function(e){var t=this.itemViews.findByModel(e);return t||(t=new(e.has("error")?SourceErrorRenderer:SequenceStepRenderer)({model:e}),this.itemViews.add(t),this.sequence.appendChild(t.render().el)),t}});module.exports=SequenceRenderer;

}).call(this,require("underscore"))

},{"../template/ErrorBlock.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/ErrorBlock.hbs","./SequenceRenderer.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/SequenceRenderer.hbs","app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/base/View":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/base/View.js","app/view/component/CanvasProgressMeter":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CanvasProgressMeter.js","app/view/component/PlayToggleSymbol":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/PlayToggleSymbol.js","app/view/promise/_loadImageAsObjectURL":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/_loadImageAsObjectURL.js","app/view/promise/_whenImageLoads":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/promise/_whenImageLoads.js","app/view/render/PlayableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/PlayableRenderer.js","backbone.babysitter":"backbone.babysitter","underscore":"underscore","utils/Timer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/Timer.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/VideoRenderer.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime"),partial$0=require("../template/svg/FullscreenSymbol.hbs");HandlebarsCompiler.registerPartial("../template/svg/FullscreenSymbol.hbs",partial$0),module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(e,t,a,l,s){var n,i;return'<div class="placeholder sizing"></div>\n<div class="content media-border">\n\t<div class="controls content-size">\n\t\t<canvas class="progress-meter"></canvas>\n\t</div>\n\t<div class="crop-box media-size">\n\t\t<video width="240" height="180" muted playsinline></video>\n\t\t<img class="poster default" alt="'+e.escapeExpression("function"==typeof(i=null!=(i=a.text||(null!=t?t.text:t))?i:a.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:s}):i)+'" width="240" height="180" />\n\t</div>\n\t<div class="overlay media-size play-toggle-hitarea">\n\t\t\t<canvas class="play-toggle"></canvas>\n\t\t<a class="fullscreen-toggle" href="javascript:(void 0)">\n'+(null!=(n=e.invokePartial(l["../template/svg/FullscreenSymbol.hbs"],t,{name:"../template/svg/FullscreenSymbol.hbs",data:s,indent:"\t\t\t",helpers:a,partials:l,decorators:e.decorators}))?n:"")+"\t\t</a>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0});

},{"../template/svg/FullscreenSymbol.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/svg/FullscreenSymbol.hbs","hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/VideoRenderer.js":[function(require,module,exports){
(function (_){
"use strict";var Globals=require("app/control/Globals"),PlayableRenderer=require("app/view/render/PlayableRenderer"),ProgressMeter=require("app/view/component/CanvasProgressMeter"),PlayToggleSymbol=require("app/view/component/PlayToggleSymbol"),prefixedEvent=require("utils/prefixedEvent"),fullscreenChangeEvent=prefixedEvent("fullscreenchange",document),formatTimecode=function(e){return isNaN(e)?"":e>=3600?(e/3600|0)+"H":e>=60?(e/60|0)+"M":(0|e)+"S"},VIDEO_CROP_PX=Globals.VIDEO_CROP_PX,SYNC_TIMEOUT_MS=1200,SYNC_THRESHOLD_MS=100,VideoRenderer=PlayableRenderer.extend({cidPrefix:"videoRenderer",className:PlayableRenderer.prototype.className+" video-item",template:require("./VideoRenderer.hbs"),properties:{fullscreenToggle:{get:function(){return this._fullscreenToggle||(this._fullscreenToggle=this.el.querySelector(".fullscreen-toggle"))}}},initialize:function(e){PlayableRenderer.prototype.initialize.apply(this,arguments),_.bindAll(this,"_updatePlaybackState","_updateCurrTimeValue","_updateBufferedValue","_onMediaError","_onMediaEnded","_onFullscreenChange","_onFullscreenToggle"),_.bindAll(this,"_playbackTimeoutFn_playing","_playbackTimeoutFn_waiting")},createChildren:function(){PlayableRenderer.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.video=this.content.querySelector("video"),this.video.setAttribute("preload","none"),this.video.controlList&&this.video.controlList.add("nodownload"),this.video.loop=void 0!==this.model.attr("@video-loop"),this.video.src=this.findPlayableSource(this.video)},measure:function(){PlayableRenderer.prototype.measure.apply(this,arguments),this.metrics.media.height+=2*VIDEO_CROP_PX,this.metrics.content.height+=2*VIDEO_CROP_PX},render:function(){var e,t,i,a,r;PlayableRenderer.prototype.render.apply(this,arguments);var n,s,o=this.defaultImage,l=this.content;for(a=this.metrics.media.width+"px",r=this.metrics.media.height+"px",e=this.el.querySelectorAll(".media-size"),i=0;i<e.length;i++)(t=e.item(i)).style.width=a,t.style.height=r;return l.style.width=a,l.style.height=this.metrics.media.height+VIDEO_CROP_PX+"px",n=this.metrics.content.x+"px",s=this.metrics.content.y+"px",l.style.left=n,l.style.top=s,(t=this.el.querySelector(".controls")).style.width=this.metrics.content.width+"px",t.style.height=this.metrics.content.height+"px",this.video.setAttribute("width",this.metrics.media.width),this.video.setAttribute("height",this.metrics.media.height-2*VIDEO_CROP_PX),o.setAttribute("width",this.metrics.media.width),o.setAttribute("height",this.metrics.media.height-2*VIDEO_CROP_PX),this},initializeAsync:function(){return Promise.resolve(this).then(PlayableRenderer.whenSelectionIsContiguous).then(PlayableRenderer.whenScrollingEnds).then(PlayableRenderer.whenViewIsAttached).then(function(e){return Promise.all([PlayableRenderer.whenDefaultImageLoads(e),e.whenVideoHasMetadata(e)]).then(function(){return e})}).then(function(e){return e.initializePlayable(),e.listenToSelection(),e})},initializePlayable:function(){PlayableRenderer.whenSelectionDistanceIs(this,0).then(function(e){return e.video.setAttribute("preload","auto"),e.video.preload="auto",e}).catch(function(e){e instanceof PlayableRenderer.ViewError?(e.view.cid,e.message):console.warn(e)}),this._playToggleSymbol=new PlayToggleSymbol(_.extend({el:this.el.querySelector(".play-toggle")},this._playToggleSymbol||{})),this.progressMeter=new ProgressMeter({el:this.el.querySelector(".progress-meter"),color:this.model.attr("color"),maxValues:{amount:this.video.duration,available:this.video.duration},labelFn:function(e,t){return!this._started||this.video.ended||isNaN(e)?formatTimecode(t):this.playbackRequested?formatTimecode(t-e):Globals.PAUSE_CHAR}.bind(this)}),this._renderPlaybackState(),this.addMediaListeners()},whenVideoHasMetadata:function(e){return new Promise(function(t,i){var a=e.video,r={loadedmetadata:function(i){i&&l(),t(e)},abort:function(t){t&&l(),i(new PlayableRenderer.ViewError(e,new Error("whenVideoHasMetadata: view was removed")))},error:function(e){var t;e&&l(),a.error?(t=new Error(_.invert(MediaError)[a.error.code])).infoCode=a.error.code:t=new Error("Unspecified error"),t.infoSrc=a.src,t.logMessage="whenVideoHasMetadata: "+t.name+" "+t.infoSrc,t.logEvent=e,i(t)}};if(a.error)r.error();else if(a.readyState>=HTMLMediaElement.HAVE_METADATA)r.loadedmetadata();else{var n=a.querySelectorAll("source"),s=n.length>0?n.item(n.length-1):a,o=s===a,l=function(){for(var e in s.removeEventListener("error",r.error,o),r)"error"!==e&&r.hasOwnProperty(e)&&a.removeEventListener(e,r[e],!1)};for(var d in s.addEventListener("error",r.error,o),r)"error"!==d&&r.hasOwnProperty(d)&&a.addEventListener(d,r[d],!1);a.setAttribute("preload","metadata"),a.preload="metadata"}})},findPlayableSource:function(e){var t=this.model.get("sources").find(function(t){return/^video\//.test(t.get("mime"))&&""!=e.canPlayType(t.get("mime"))});return t?t.get("original"):""},_playbackRequested:!1,_isMediaPaused:function(){return this.video.paused},_playMedia:function(){this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&0==this.video.seekable.length?(console.warn(this.cid,"WTF! got video data, but cannot seek, calling load()"),_.isFunction(this.video.load)&&this.video.load()):this.video.ended&&(this.video.currentTime=this.video.seekable.start(0)),this.video.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA?(this.video.networkState==HTMLMediaElement.NETWORK_IDLE&&this.video.load(),this._toggleWaiting(!0)):this.video.play()},_pauseMedia:function(){this.video.pause()},_listenWhileSelected:function(){PlayableRenderer.prototype._listenWhileSelected.apply(this,arguments),this.fullscreenToggle.addEventListener(this._toggleEvent,this._onFullscreenToggle,!1)},_stopListeningWhileSelected:function(){PlayableRenderer.prototype._stopListeningWhileSelected.apply(this,arguments),this.fullscreenToggle.removeEventListener(this._toggleEvent,this._onFullscreenToggle,!1)},addMediaListeners:function(){this.addListeners(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.addListeners(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.addListeners(this.video,this.updateCurrTimeEvents,this._updateCurrTimeValue),this.video.addEventListener("ended",this._onMediaEnded,!1),this.video.addEventListener("error",this._onMediaError,!0),this.on("view:removed",this.removeMediaListeners,this)},removeMediaListeners:function(){this.off("view:removed",this.removeMediaListeners,this),this.removeListeners(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.removeListeners(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.removeListeners(this.video,this.updateCurrTimeEvents,this._updateCurrTimeValue),this.video.removeEventListener("ended",this._onMediaEnded,!1),this.video.removeEventListener("error",this._onMediaError,!0)},_onMediaError:function(e){this.removeMediaListeners(),this.removeSelectionListeners(),this._started=!1,this.content.classList.remove("started"),this.mediaState="error",this.playbackRequested=!1,this._exitFullscreen()},_onMediaEnded:function(e){this.playbackRequested=!1,this._exitFullscreen()},_exitFullscreen:function(){this.video.webkitDisplayingFullscreen&&this.video.webkitExitFullscreen(),document.fullscreenElement===this.video&&this.video.exitFullscreen()},updateCurrTimeEvents:"playing waiting pause timeupdate seeked",_updateCurrTimeValue:function(e){this.video.played.length&&this.content.classList.add("started"),this.progressMeter&&this.progressMeter.valueTo("amount",this.video.currentTime,0)},updatePlaybackEvents:"timeupdate playing pause waiting canplaythrough seeked",_isPlaybackWaiting:!1,_playbackStartTS:-1,_playbackStartTC:-1,_updatePlaybackState:function(e){if(window.clearTimeout(this._playbackTimeoutID),this._playbackTimeoutID=-1,this.playbackRequested)switch("timeupdate"!==e.type&&(this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime),e.type){case"timeupdate":SYNC_THRESHOLD_MS<Math.abs(e.timeStamp-this._playbackStartTS-1e3*(this.video.currentTime-this._playbackStartTC))?(this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_waiting,SYNC_TIMEOUT_MS),this._toggleWaiting(!0)):(this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,SYNC_TIMEOUT_MS),this._toggleWaiting(!1));break;case"playing":this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,SYNC_TIMEOUT_MS),this._toggleWaiting(!1);break;case"pause":this._toggleWaiting(this.playbackRequested);break;case"canplaythrough":this._toggleWaiting(!1),this._validatePlayback();break;case"waiting":this.video.seeking||(this.video.readyState<HTMLMediaElement.HAVE_ENOUGH_DATA&&this.video.pause(),this._toggleWaiting(!0));break;default:this._toggleWaiting(!1)}else this._toggleWaiting(!1)},_playbackTimeoutID:-1,_playbackTimeoutFn_playing:function(){this._playbackTimeoutID=-1,this._toggleWaiting(!0)},_playbackTimeoutFn_waiting:function(){SYNC_THRESHOLD_MS<1e3*(this.video.currentTime-this._playbackStartTC)?this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_waiting,SYNC_TIMEOUT_MS):(this._playbackStartTS+=SYNC_TIMEOUT_MS,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,SYNC_TIMEOUT_MS),this._toggleWaiting(!1))},_renderPlaybackState:function(){this.content.classList.toggle("ended",this.video.ended),PlayableRenderer.prototype._renderPlaybackState.apply(this,arguments)},_setPlayToggleSymbol:function(e){return PlayableRenderer.prototype._setPlayToggleSymbol.call(this,this.video.ended?"ended":e)},updateBufferedEvents:"progress canplay canplaythrough play playing",_updateBufferedValue:function(e){var t=this.video.buffered;t.length>0&&(this._bufferedValue=t.end(t.length-1),this.progressMeter&&this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&this.progressMeter.valueTo("available",this._bufferedValue,300))},_onFullscreenToggle:function(e){if(!e.defaultPrevented&&!e.button&&this.model.selected){e.preventDefault();try{document.hasOwnProperty("fullscreenElement")&&document.fullscreenElement!==this.video?(document.addEventListener(fullscreenChangeEvent,this._onFullscreenChange,!1),this.video.requestFullscreen()):this.video.webkitSupportsFullscreen&&!this.video.webkitDisplayingFullscreen&&(this.video.addEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.webkitEnterFullScreen())}catch(e){this.video.controls=!1,console.error(e)}}},_onFullscreenChange:function(e){switch(e.type){case fullscreenChangeEvent:var t=document.fullscreenElement===this.video;this.video.controls=t,t||document.removeEventListener(fullscreenChangeEvent,this._onFullscreenChange,!1);break;case"webkitbeginfullscreen":this.video.controls=!0,this.video.removeEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.addEventListener("webkitendfullscreen",this._onFullscreenChange,!1);break;case"webkitendfullscreen":this.video.removeEventListener("webkitendfullscreen",this._onFullscreenChange,!1),this.video.controls=!1}}});module.exports=VideoRenderer;

}).call(this,require("underscore"))

},{"./VideoRenderer.hbs":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/VideoRenderer.hbs","app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","app/view/component/CanvasProgressMeter":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/CanvasProgressMeter.js","app/view/component/PlayToggleSymbol":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/component/PlayToggleSymbol.js","app/view/render/PlayableRenderer":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/render/PlayableRenderer.js","underscore":"underscore","utils/prefixedEvent":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedEvent.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/Carousel.EmptyRenderer.Bundle.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(e,n,l,a,i){var s,t,d=null!=n?n:e.nullContext||{},r=l.helperMissing;return'<div id="desc_b'+e.escapeExpression("function"==typeof(t=null!=(t=l.id||(null!=n?n.id:n))?t:r)?t.call(d,{name:"id",hash:{},data:i}):t)+'" class="content sizing mdown">'+(null!=(s="function"==typeof(t=null!=(t=l.desc||(null!=n?n.desc:n))?t:r)?t.call(d,{name:"desc",hash:{},data:i}):t)?s:"")+"</div>\n"},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/CollectionStack.Media.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(n,l,e,a,u){var i,s,t=null!=l?l:n.nullContext||{},r=e.helperMissing;return'<div id="desc_m'+n.escapeExpression("function"==typeof(s=null!=(s=e.id||(null!=l?l.id:l))?s:r)?s.call(t,{name:"id",hash:{},data:u}):s)+'" class="content sizing"><p>'+(null!=(i="function"==typeof(s=null!=(s=e.name||(null!=l?l.name:l))?s:r)?s.call(t,{name:"name",hash:{},data:u}):s)?i:"")+"</p>"+(null!=(i="function"==typeof(s=null!=(s=e.sub||(null!=l?l.sub:l))?s:r)?s.call(t,{name:"sub",hash:{},data:u}):s)?i:"")+"</div>\n"},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/ErrorBlock.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({1:function(e,n,l,a,r){var o;return"\t\t<p><code>"+e.escapeExpression("function"==typeof(o=null!=(o=l.infoSrc||(null!=n?n.infoSrc:n))?o:l.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"infoSrc",hash:{},data:r}):o)+"</code></p>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,l,a,r){var o,s,t=null!=n?n:e.nullContext||{},i=l.helperMissing,c=e.escapeExpression;return'<div class="error-title color-fg color-reverse">'+c("function"==typeof(s=null!=(s=l.name||(null!=n?n.name:n))?s:i)?s.call(t,{name:"name",hash:{},data:r}):s)+'</div>\n<div class="error-message color-fg">\n\t<p><strong>'+c("function"==typeof(s=null!=(s=l.name||(null!=n?n.name:n))?s:i)?s.call(t,{name:"name",hash:{},data:r}):s)+"</strong> <code>"+c("function"==typeof(s=null!=(s=l.message||(null!=n?n.message:n))?s:i)?s.call(t,{name:"message",hash:{},data:r}):s)+"</code></p>\n"+(null!=(o=l.if.call(t,null!=n?n.infoSrc:n,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?o:"")+"</div>\n"},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/_helpers.js":[function(require,module,exports){
"use strict";var Handlebars=require("hbsfy/runtime"),Color=require("color"),Globals=require("app/control/Globals"),helpers={add:function(r,n){return r+n},subtract:function(r,n){return r-n},divide:function(r,n){return r/n},multiply:function(r,n){return r*n},floor:function(r){return Math.floor(r)},ceil:function(r){return Math.ceil(r)},round:function(r){return Math.round(r)},global:function(r){return Globals[r]},is:function(r,n,e){return r===n?e.fn(this):e.inverse(this)},isnot:function(r,n,e){return r!==n?e.fn(this):e.inverse(this)},isany:function(r){var n=0,e=arguments.length-2,t=arguments[e+1];do{if(r===arguments[++n])return t.fn(this)}while(n<e);return t.inverse(this)},contains:function(r,n,e){return-1!==r.indexOf(n)?e.fn(this):e.inverse(this)},ignore:function(){return""},mix:function(r,n,e){return new Color(r).mix(new Color(n),e).rgb().string()},lighten:function(r,n){return new Color(r).lighten(n).rgb().string()},darken:function(r,n){return new Color(r).darken(n).rgb().string()}};for(var helper in helpers)helpers.hasOwnProperty(helper)&&Handlebars.registerHelper(helper,helpers[helper]);

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","color":"color","hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/view/template/svg/FullscreenSymbol.hbs":[function(require,module,exports){
"use strict";var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(e,s,t,l,r){return'<svg class="fullscreen-symbol" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="-21 -21 42 42">\n\t<path id="fullscreen-shadow" d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="bg-color-stroke" style="fill:none" vector-effect="non-scaling-stroke" transform="translate(2 2)"/>\n\t<path id="fullscreen-path" d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="color-stroke" style="fill:none" vector-effect="non-scaling-stroke" />\n</svg>\n'},useData:!0});

},{"hbsfy/runtime":"hbsfy/runtime"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/Timer.js":[function(require,module,exports){
(function (_){
"use strict";var Events=require("backbone").Events,idSeed=0,Timer=function(t){this._id=idSeed++,this._duration=0,this._status="initialized",this._start=0};_.extend(Timer.prototype,Events,{start:function(t){if(!_.isNumber(t)&&!this._duration)return this;if(this._timeout&&"started"===this._status)return this;var e="stopped"===this._status?"start":"resume";return this._duration=t||this._duration,this._timeout=window.setTimeout(end.bind(this),this._duration),this._start=_now(),this._status="started",this.trigger(e,this.getDuration()),this},pause:function(){return"started"!==this._status?this:(this._duration-=_now()-this._start,clear.call(this,!1),this._status="paused",this.trigger("pause",this.getDuration()),this)},stop:function(){return/started|paused/.test(this._status)?(clear.call(this,!0),this._status="stopped",this.trigger("stop"),this):this},getDuration:function(){return"started"===this._status?this._duration-(_now()-this._start):"paused"===this._status?this._duration:0},getStatus:function(){return this._status}});var _now=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date);function end(){clear.call(this),this._status="stopped",this.trigger("end")}function clear(t){window.clearTimeout(this._timeout),!0===t&&(this._duration=0)}Object.defineProperties(Timer.prototype,{duration:{enumerable:!0,get:function(){return this.getDuration()}},status:{enumerable:!0,get:function(){return this.getStatus()}}}),Object.defineProperties(Timer,{STOPPED:{enumerable:!0,value:"stopped"},STARTED:{enumerable:!0,value:"started"},PAUSED:{enumerable:!0,value:"paused"}}),module.exports=Timer;

}).call(this,require("underscore"))

},{"backbone":"backbone","underscore":"underscore"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/TransformHelper.js":[function(require,module,exports){
"use strict";var TransformItem=require("./TransformItem"),idSeed=0,cidSeed=100,slice=Array.prototype.slice;function TransformHelper(){this.id=idSeed++,this._items=[],this._itemsById={}}TransformHelper.prototype=Object.create({_get:function(t){return this.has(t)?this._itemsById[t.eid]:this._add(t)},_add:function(t){var i,e;return e=t.eid||t.cid||"elt"+cidSeed++,i=new TransformItem(t,e),this._itemsById[e]=i,this._items.push(i),i},_remove:function(t){if(this.has(t)){var i=this._itemsById[t.eid];this._items.splice(this._items.indexOf(i),1),i.destroy(),delete this._itemsById[t.eid]}},_invoke:function(t,i,e){var n,s,r,o,h,l,a,f=null;for(void 0!==e?f=slice.call(i,0,e):e=0,n=e,s=i.length,a=[];n<s;++n)if((h=i[n]).length)for(r=0,o=h.length;r<o;++r)l=this._get(h[r]),a.push(l[t].apply(l,f));else l=this._get(h),a.push(l[t].apply(l,f));return a},has:function(t){return t.eid&&void 0!==this._itemsById[t.eid]},getItems:function(){var t,i,e,n=[];for(t=0;t<arguments.length;++t)if((e=arguments[t]).length)for(i=0;i<e.length;++i)n.push(this._get(e[i]));else n.push(this._get(e));return n},get:function(t){return this._get(t)},add:function(){var t,i,e;for(t=0;t<arguments.length;++t)if((e=arguments[t]).length)for(i=0;i<e.length;++i)this._get(e[i]);else this._get(e)},remove:function(){var t,i,e;for(t=0;t<arguments.length;++t)if((e=arguments[t]).length)for(i=0;i<e.length;++i)this._remove(e[i]);else this._remove(e)},hasOffset:function(t){return this.has(t)?this._itemsById[t.eid].hasOffset:void 0},capture:function(){this._invoke("capture",arguments)},captureAll:function(){for(var t=0,i=this._items.length;t<i;t++)this._items[t].capture()},clearCapture:function(){this._invoke("clearCapture",arguments)},clearAllCaptures:function(){for(var t=0,i=this._items.length;t<i;t++)this._items[t].clearCapture()},offset:function(t,i){this._invoke("offset",arguments,2)},offsetAll:function(t,i){for(var e=0,n=this._items.length;e<n;e++)this._items[e].offset(t,i)},clearOffset:function(){this._invoke("clearOffset",arguments)},clearAllOffsets:function(){for(var t=0,i=this._items.length;t<i;t++)this._items[t].clearOffset()},runTransition:function(t){this._invoke("runTransition",arguments,1)},runAllTransitions:function(t){for(var i=0,e=this._items.length;i<e;i++)this._items[i].runTransition(t)},clearTransition:function(){this._invoke("clearTransition",arguments)},clearAllTransitions:function(){for(var t=0,i=this._items.length;t<i;t++)this._items[t].clearTransition()},stopTransition:function(){this._invoke("stopTransition",arguments)},stopAllTransitions:function(){for(var t=0,i=this._items.length;t<i;t++)this._items[t].stopTransition()},whenTransitionEnds:function(){var t=this._invoke("whenTransitionEnds",arguments);return 0!=t.length?Promise.all(t):Promise.resolve(null)},whenAllTransitionsEnd:function(){return 0!=this._items.length?Promise.all(this._items.map(function(t){return t.whenTransitionEnds()})):Promise.resolve(null)},promise:function(){return 0==arguments.length?this.whenAllTransitionsEnd():this.whenTransitionEnds.call(this,arguments)},validate:function(){for(var t=0,i=this._items.length;t<i;t++)this._items[t].validate()}},{items:{get:function(){return this._items}}}),module.exports=TransformHelper;

},{"./TransformItem":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/TransformItem.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/TransformItem.js":[function(require,module,exports){
(function (_){
"use strict";var prefixedProperty=require("utils/prefixedProperty"),prefixedStyleName=require("utils/prefixedStyleName"),prefixedEvent=require("utils/prefixedEvent"),transitionEnd=prefixedEvent("transitionend"),NO_TRANSITION_VALUE="none 0s step-start 0s",UNSET_TRANSITION={name:"unset",className:"tx-unset",property:"none",easing:"ease",delay:0,duration:0,cssText:"unset"},translateTemplate=function(t){return function(i){return t(i._renderedX,i._renderedY)}}(require("app/control/Globals").TRANSLATE_TEMPLATE),transitionTemplate=function(t){return t.property+" "+t.duration/1e3+"s "+t.easing+" "+t.delay/1e3+"s"},propDefaults={opacity:"1",visibility:"visible",transform:"matrix(1, 0, 0, 1, 0, 0)",transformStyle:"",transition:""},propKeys=Object.keys(propDefaults),propNames=propKeys.reduce(function(t,i){return t[i]=prefixedProperty(i),t},{}),styleNames=function(t){return propKeys.map(t).reduce(function(t,i){return t[i]=prefixedStyleName(i),t},{})}(require("utils/strings/camelToDashed")),resolveAll=function(t,i){return 0!=t.length&&(t.forEach(function(t,s,e){t.resolve(i),e[s]=null}),t.length=0),t},rejectAll=function(t,i){return 0!=t.length&&(t.forEach(function(t,s,e){t.reject(i),e[s]=null}),t.length=0),t},TransformItem=function(t,i){this.el=t,this.id=i,this.el.eid=i,this._onTransitionEnd=this._onTransitionEnd.bind(this),this.el.addEventListener(transitionEnd,this._onTransitionEnd,!1),this._captureInvalid=!1,this._capturedChanged=!1,this._capturedX=null,this._capturedY=null,this._currCapture={},this._lastCapture={},this._hasOffset=!1,this._offsetInvalid=!1,this._offsetX=null,this._offsetY=null,this._renderedX=null,this._renderedY=null,this._hasTransition=!1,this._transitionInvalid=!1,this._transitionRunning=!1,this._transition=_.extend({},UNSET_TRANSITION),this._promises=[],this._pendingPromises=[]};TransformItem.prototype=Object.create({destroy:function(){this.el.removeEventListener(transitionEnd,this._onTransitionEnd,!1),resolveAll(this._pendingPromises,this),resolveAll(this._promises,this)},capture:function(t){return t&&this.clearCapture(),this._validateCapture(),this},clearCapture:function(){return this._captureInvalid=!0,this},offset:function(t,i){return this._hasOffset=!0,this._offsetInvalid=!0,this._offsetX=t||0,this._offsetY=i||0,this},clearOffset:function(){return this._hasOffset&&(this._hasOffset=!1,this._offsetInvalid=!0,this._offsetX=null,this._offsetY=null),this},runTransition:function(t){if(!t)return this.clearTransition();var i=this._transitionValue,s=this._transition.name;return this._transition.property=styleNames.transform,this._transition=_.extend(this._transition,t),this._transitionValue=transitionTemplate(this._transition),this._transitionInvalid&&console.warn("tx[%s]::runTransition set over (%s:'%s' => %s:'%s')",this.id,s,i,this._transition.name,this._transitionValue),this._hasTransition=!0,this._transitionInvalid=!0,this},clearTransition:function(){return this._transition=_.extend(this._transition,UNSET_TRANSITION),this._transitionValue=NO_TRANSITION_VALUE,this._hasTransition=!1,this._transitionInvalid=!0,this},stopTransition:function(){return this._transition=_.extend(this._transition,UNSET_TRANSITION),this._transitionValue=NO_TRANSITION_VALUE,this._hasTransition=!1,this._transitionInvalid=!0,this},whenTransitionEnds:function(){var t,i;return this._transitionInvalid||this._transitionRunning?(t={},i=new Promise(function(i,s){t.resolve=i,t.reject=s}),(this._transitionInvalid?this._pendingPromises:this._promises).push(t)):i=Promise.resolve(this),i},validate:function(){if(this._ignoreEvent=!0,this._captureInvalid){var t=null!==this._renderedX?this._renderedX:this._capturedX,i=null!==this._renderedY?this._renderedY:this._capturedY;this._validateCapture(),this._validateOffset();var s=null!==this._renderedX?this._renderedX:this._capturedX,e=null!==this._renderedY?this._renderedY:this._capturedY;t===s&&i===e&&(this._hasTransition&&console.warn("tx[%s]::validate unchanged: last:[%i,%i] curr:[%i,%i]",this.el.id||this.id,t,i,s,e),this.clearTransition()),this._validateTransition()}else this._validateTransition(),this._validateOffset();return this._ignoreEvent=!1,this._capturedChanged=!1,this},_validateCapture:function(){if(this._captureInvalid){var t,i,s=null;if(this._hasOffset&&!this._offsetInvalid&&(""===(s=this._getCSSProp("transform"))&&console.error('tx[%s]::_capture valid offset (%i,$i) but transformValue=""',this.id,this._offsetX,this._offsetY),this._removeCSSProp("transform")),this._lastCapture=this._currCapture,this._currCapture=this._getComputedCSSProps(),this._currCapture.transform!==this._lastCapture.transform)(i=this._currCapture.transform.match(/(matrix|matrix3d)\(([^\)]+)\)/))?(t=i[2].split(","),"matrix"===i[1]?(this._capturedX=parseFloat(t[4]),this._capturedY=parseFloat(t[5])):(this._capturedX=parseFloat(t[12]),this._capturedY=parseFloat(t[13]))):(this._capturedX=0,this._capturedY=0),this._capturedChanged=!0;null!==s&&(this.id,this._setCSSProp("transform",s)),this._captureInvalid=!1}},_validateOffset:function(){if(this._offsetInvalid)if(this._offsetInvalid=!1,this._hasOffset){var t=this._offsetX+this._capturedX,i=this._offsetY+this._capturedY;t===this._renderedX&&i===this._renderedY||(this._renderedX=t,this._renderedY=i,this._setCSSProp("transform",translateTemplate(this)))}else this._renderedX=null,this._renderedY=null,this._removeCSSProp("transform")},_validateTransition:function(){if(this._transitionInvalid){this._transitionInvalid=!1;var t=this._promises;this._promises=this._pendingPromises,this._pendingPromises=resolveAll(t,this),this._transitionRunning=this._hasTransition,this._setCSSProp("transition",this._transitionValue),this._hasTransition||resolveAll(this._promises,this)}},_onTransitionEnd:function(t){this._ignoreEvent||this._transitionRunning&&this.el===t.target&&this._transition.property==t.propertyName&&(this._hasTransition=!1,this._transitionRunning=!1,this._removeCSSProp("transition"),resolveAll(this._promises,this))},_getCSSProp:function(t){return this.el.style[propNames[t]]},_setCSSProp:function(t,i){"transition"===t&&i==NO_TRANSITION_VALUE&&(i=""),null==i||""===i?this._removeCSSProp(t):this.el.style[propNames[t]]=i},_removeCSSProp:function(t){this.el.style[propNames[t]]=""},_getComputedCSSProps:function(){var t={},i=window.getComputedStyle(this.el);for(var s in propNames)t[s]=i[propNames[s]];return t}},{transition:{get:function(){return this._transition}},hasTransition:{get:function(){return this._hasTransition}},capturedChanged:{get:function(){return this._capturedChanged}},capturedX:{get:function(){return this._capturedX}},capturedY:{get:function(){return this._capturedY}},hasOffset:{get:function(){return this._hasOffset}},offsetX:{get:function(){return this._offsetX}},offsetY:{get:function(){return this._offsetY}}}),module.exports=TransformItem;

}).call(this,require("underscore"))

},{"app/control/Globals":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/control/Globals.js","underscore":"underscore","utils/prefixedEvent":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedEvent.js","utils/prefixedProperty":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedProperty.js","utils/prefixedStyleName":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedStyleName.js","utils/strings/camelToDashed":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/strings/camelToDashed.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/array/difference.js":[function(require,module,exports){
"use strict";module.exports=function(e,u,n){return e.reduce(function(e,n,r,t){return-1==u.indexOf(n)&&e.push(n),e},void 0!==n?n:[])};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/CanvasHelper.js":[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var PI2=2*Math.PI,splice=Array.prototype.splice,_mod=function(e,t){return(e%t+t)%t},setStyle=function(e,t){if("object"==_typeof(t))for(var o in t)switch(_typeof(e[o])){case"undefined":break;case"function":Array.isArray(t[o])?e[o].apply(e,t[o]):e[o].call(e,t[o]);break;default:e[o]=t[o]}},_drawShape=function(e,t,o){o.save(),t&&setStyle(o,t),e.apply(null,splice.call(arguments,2)),"strokeStyle"in t&&o.stroke(),"fillStyle"in t&&o.fill(),o.restore()};module.exports={setStyle:setStyle,vGuide:function(e,t){e.beginPath(),e.moveTo(t,0),e.lineTo(t,e.canvas.height)},drawVGuide:function(e,t,o){_drawShape(this.vGuide,t,e,o)},hGuide:function(e,t){e.beginPath(),e.moveTo(0,t),e.lineTo(e.canvas.width,t)},drawHGuide:function(e,t,o){_drawShape(this.hGuide,t,e,o)},crosshair:function(e,t,o,a){e.save(),e.translate(t,o),e.rotate(Math.PI/4),e.beginPath(),e.moveTo(0,-a),e.lineTo(0,a),e.moveTo(-a,0),e.lineTo(a,0),e.restore()},drawCrosshair:function(e,t,o,a,r){_drawShape(this.crosshair,t,e,o,a,r)},circle:function(e,t,o,a){e.beginPath(),e.arc(t,o,a,0,PI2)},drawCircle:function(e,t,o,a,r){_drawShape(this.circle,t,e,o,a,r)},square:function(e,t,o,a){a=2*Math.floor(a/2),e.beginPath(),e.rect(t-a,o-a,2*a,2*a)},drawSquare:function(e,t,o,a,r){_drawShape(this.square,t,e,o,a,r)},arrowhead:function(e,t,o,a,r){e.save(),e.translate(t,o),e.rotate(_mod(r,PI2)),e.translate(.5*a,0),e.beginPath(),e.moveTo(0,0),e.lineTo(-a*Math.SQRT2,a*Math.SQRT1_2),e.arcTo(0,0,-a*Math.SQRT2,-a*Math.SQRT1_2,a),e.lineTo(0,0),e.closePath(),e.restore()},drawArrowhead:function(e,t,o,a,r,n){_drawShape(this.arrowhead,t,e,o,a,r,n)},arrowhead2:function(e,t,o,a,r){e.save(),e.translate(t,o),e.rotate(_mod(r,PI2)),e.beginPath(),e.moveTo(-a,a*Math.SQRT1_2),e.lineTo(0,0),e.lineTo(-a,-a*Math.SQRT1_2),e.restore()},drawArrowhead2:function(e,t,o,a,r,n){_drawShape(this.arrowhead,t,e,o,a,r,n)},rect:function(e,t,o,a,r){"object"===_typeof(t)&&(r=t.height,a=t.width,o=t.top,t=t.left),e.beginPath(),e.rect(t,o,a,r)},drawRect:function(e,t,o,a,r,n){_drawShape(this.rect,t,e,o,a,r,n)},roundRect:function(e,t,o,a,r,n){a<2*n&&(n=a/2),r<2*n&&(n=r/2),e.beginPath(),e.moveTo(t+n,o),e.arcTo(t+a,o,t+a,o+r,n),e.arcTo(t+a,o+r,t,o+r,n),e.arcTo(t,o+r,t,o,n),e.arcTo(t,o,t+a,o,n),e.closePath()},drawRoundRect:function(e,t,o,a,r,n,i){_drawShape(this.roundRect,t,e,o,a,n,i)},quadRoundRect:function(e,t,o,a,r,n){e.beginPath(),e.moveTo(t,o+n),e.quadraticCurveTo(t,o,t+n,o),e.lineTo(t+a-n,o),e.quadraticCurveTo(t+a,o,t+a,o+n),e.lineTo(t+a,o+r-n),e.quadraticCurveTo(t+a,o+r,t+a-n,o+r),e.lineTo(t+n,o+r),e.quadraticCurveTo(t,o+r,t,o+r-n),e.closePath()},drawQuadRoundRect:function(e,t,o,a,r,n,i){_drawShape(this.quadRoundRect,t,e,o,a,n,i)}};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/BlurStack.js":[function(require,module,exports){
"use strict";module.exports=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/desaturate.js":[function(require,module,exports){
"use strict";module.exports=function(t,n){var r,e,o,a,u,h,d=t.data;if(1===arguments.length)for(u=0,h=d.length;u<h;u+=4)d[u]=(299*d[u]+587*d[u+1]+144*d[u+2])/1e3;else if(2===arguments.length){if(0>=n>1)return console.warn("argument out of range (1-0)",n),t;for(u=0,h=d.length;u<h;u+=4)r=d[u],e=d[u+1],o=d[u+2],0===(a=Math.max(r,e,o))?(d[u]=Math.round(255*n),d[u+1]=Math.round(255*n),d[u+2]=Math.round(255*n)):(a=255*n/a,d[u]=Math.round(r*a),d[u+1]=Math.round(e*a),d[u+2]=Math.round(o*a))}return t};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/getAverageRGB.js":[function(require,module,exports){
"use strict";module.exports=function(r,t){var e,o=r.data,n=o.length,u=[0,0,0];for(e=0;e<n;e+=4)u[0]+=o[e],u[1]+=o[e+1],u[2]+=o[e+2];for(e=0;e<3;e++)u[e]=u[e]/(n/4)|0;return u};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/mul_table.js":[function(require,module,exports){
"use strict";module.exports=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/multiply.js":[function(require,module,exports){
"use strict";module.exports=function(t,r){for(var e=t.data,n=0;n<e.length;n+=4)e[n]*=r,e[n+1]*=r,e[n+2]*=r;return t};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/shg_table.js":[function(require,module,exports){
"use strict";module.exports=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/stackBlurRGB.js":[function(require,module,exports){
"use strict";function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var mul_table=require("./mul_table"),shg_table=require("./shg_table"),BlurStack=require("./BlurStack");module.exports=function(r,t){if("object"===_typeof(t)&&t.hasOwnProperty("radius")&&(t=t.radius),"number"!=typeof t||isNaN(t)||1>t)return r;var e,o,n,u,f,b,l,a,i,y,c,g,p,s,m,x,S,_,h,d,v=0|t,k=r.data,w=r.width,B=r.height,q=v+v+1,N=w-1,j=B-1,O=v+1,P=O*(O+1)/2,z=new BlurStack,A=z;for(n=1;n<q;n++)if(A=A.next=new BlurStack,n==O)var C=A;A.next=z;var D=null,E=null;l=b=0;var F=mul_table[v],G=shg_table[v];for(o=0;o<B;o++){for(s=m=x=a=i=y=0,c=O*(S=k[b]),g=O*(_=k[b+1]),p=O*(h=k[b+2]),a+=P*S,i+=P*_,y+=P*h,A=z,n=0;n<O;n++)A.r=S,A.g=_,A.b=h,A=A.next;for(n=1;n<O;n++)u=b+((N<n?N:n)<<2),a+=(A.r=S=k[u])*(d=O-n),i+=(A.g=_=k[u+1])*d,y+=(A.b=h=k[u+2])*d,s+=S,m+=_,x+=h,A=A.next;for(D=z,E=C,e=0;e<w;e++)k[b]=a*F>>G,k[b+1]=i*F>>G,k[b+2]=y*F>>G,a-=c,i-=g,y-=p,c-=D.r,g-=D.g,p-=D.b,u=l+((u=e+v+1)<N?u:N)<<2,a+=s+=D.r=k[u],i+=m+=D.g=k[u+1],y+=x+=D.b=k[u+2],D=D.next,c+=S=E.r,g+=_=E.g,p+=h=E.b,s-=S,m-=_,x-=h,E=E.next,b+=4;l+=w}for(e=0;e<w;e++){for(m=x=s=i=y=a=0,c=O*(S=k[b=e<<2]),g=O*(_=k[b+1]),p=O*(h=k[b+2]),a+=P*S,i+=P*_,y+=P*h,A=z,n=0;n<O;n++)A.r=S,A.g=_,A.b=h,A=A.next;for(f=w,n=1;n<=v;n++)b=f+e<<2,a+=(A.r=S=k[b])*(d=O-n),i+=(A.g=_=k[b+1])*d,y+=(A.b=h=k[b+2])*d,s+=S,m+=_,x+=h,A=A.next,n<j&&(f+=w);for(b=e,D=z,E=C,o=0;o<B;o++)k[u=b<<2]=a*F>>G,k[u+1]=i*F>>G,k[u+2]=y*F>>G,a-=c,i-=g,y-=p,c-=D.r,g-=D.g,p-=D.b,u=e+((u=o+O)<j?u:j)*w<<2,a+=s+=D.r=k[u],i+=m+=D.g=k[u+1],y+=x+=D.b=k[u+2],D=D.next,c+=S=E.r,g+=_=E.g,p+=h=E.b,s-=S,m-=_,x-=h,E=E.next,b+=w}return r};

},{"./BlurStack":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/BlurStack.js","./mul_table":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/mul_table.js","./shg_table":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/bitmap/shg_table.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/canvas/calcArcHConnector.js":[function(require,module,exports){
"use strict";module.exports=function(t,r,a,e,s,i,n){var u,h,M,f,o=e>t?1:-1,b=Math.abs(s-r),c=Math.abs(e-t),l=a+i;if(b<1&&(u=0,h=c),b>=l&&c>=l)M=l,u=a,h=a;else{if(M=Math.sqrt(b*i*2+b*a*2-b*b),a<(f=b*a/l)||M>c)return;var m=(l-b)/M;h=b*m+(u=M*a/l-f*m)}return n>0&&(n>1?n=Math.min(c-l,n):n*=c-l,u+=n,h+=n),[u*o+t,h*o+t,u,h]};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/css/getBoxEdgeStyles.js":[function(require,module,exports){
"use strict";var CSS_BOX_PROPS=["boxSizing","position","objectFit"],CSS_EDGE_PROPS=["marginTop","marginBottom","marginLeft","marginRight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight"],CSS_POS_PROPS=["top","bottom","left","right"],CSS_SIZE_PROPS=["width","height","minWidth","minHeight","maxWidth","maxHeight"],CSS_ALL_PROPS=CSS_EDGE_PROPS.concat(CSS_SIZE_PROPS,CSS_POS_PROPS),cssDimensionRE=/^(-?[\d\.]+)(px|em|rem)$/;module.exports=function(t,e,S){var o,i,n,r,a,P;for(t instanceof HTMLElement&&(t=getComputedStyle(t)),e||(e={}),a=e.fontSize=parseFloat(t.fontSize),n=0,r=CSS_BOX_PROPS.length;n<r;n++)(i=CSS_BOX_PROPS[n])in t&&(e[i]=t[i]);var d=S?CSS_EDGE_PROPS:CSS_ALL_PROPS;for(n=0,r=d.length;n<r;n++)e["_"+(i=d[n])]=t[i],t[i]&&(o=cssDimensionRE.exec(t[i]))&&("px"===o[2]?e[i]=parseFloat(o[1]):"em"===o[2]?e[i]=parseFloat(o[1])*a:"rem"===o[2]?(P||(P=parseFloat(getComputedStyle(document.documentElement).fontSize)),e[i]=parseFloat(o[1])*P):(console.warn("Ignoring value",i,o[1],o[2]),e[i]=null));return e};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/easeInQuad.js":[function(require,module,exports){
"use strict";module.exports=function(t,e,r,u,n){return u*(e/=n)*e+r};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/easeOutQuad.js":[function(require,module,exports){
"use strict";module.exports=function(t,e,r,u){return-r*(t/=u)*(t-2)+e};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/ease/fn/linear.js":[function(require,module,exports){
"use strict";var linear=function(r,e,n,t){return n*r/t+e};module.exports=linear;

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/geom/inflateRect.js":[function(require,module,exports){
"use strict";module.exports=function(t,h,o){2==arguments.length&&(o=h);var i={width:t.width+2*h,height:t.height+2*o};return i.width>=0?(i.left=t.left-h,i.right=i.left+i.width,i.x=i.left):(i.right=t.right+h,i.left=t.right-i.width,i.y=i.right),i.height>=0?(i.top=t.top-o,i.bottom=i.top+i.height,i.y=i.top):(i.bottom=t.bottom+o,i.top=t.bottom-i.height,i.y=i.bottom),i};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedEvent.js":[function(require,module,exports){
"use strict";var lcPrefixes=[""].concat(require("./prefixes")),ucPrefixes=lcPrefixes.map(function(n){return""===n?n:n.charAt(0).toUpperCase()+n.substr(1)}),_solvers={},_cache={},_prefixedEvent=function(n,e,r){var t=/^[A-Z]/.test(n)?ucPrefixes:lcPrefixes;e||(e=document);for(var i=0;i<t.length;i++){if(r&&t[i]+r in e)return t[i]+n;if("on"+t[i]+n in e)return t[i]+n}return null};_solvers.transitionend=function(){var n,e=document.body.style,r={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd"};for(n in r)if(n in e)return r[n];return null},module.exports=function(n){return _cache.hasOwnProperty(n)||(_cache[n]=_solvers.hasOwnProperty(n)?_solvers[n]():_prefixedEvent.apply(null,arguments),null===_cache[n]?console.warn("Event '%s' not found",n):_cache[n]),_cache[n]};

},{"./prefixes":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixes.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedProperty.js":[function(require,module,exports){
"use strict";var prefixes=require("./prefixes"),_prefixNum=prefixes.length,_cache={},_prefixedProperty=function(e,r){var i,t;if(e in r)return e;t=e[0].toUpperCase()+e.slice(1);for(var n=0;n<_prefixNum;n++)if((i=prefixes[n]+t)in r)return i;return console.error("Property '%s' not found",e),null};module.exports=function(e,r){return _cache[e]||(_cache[e]=_prefixedProperty(e,r||document.body.style))};

},{"./prefixes":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixes.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixedStyleName.js":[function(require,module,exports){
"use strict";var prefixes=require("./prefixes"),_prefixNum=prefixes.length,_cache={},_prefixedStyleName=function(e,r){var n;if(e in r)return e;for(var i=0;i<_prefixNum;i++)if((n="-"+prefixes[i]+"-"+e)in r)return n;return console.warn("CSS style '%s' not found",e),null};module.exports=function(e,r){return _cache[e]||(_cache[e]=_prefixedStyleName(e,r||document.body.style))};

},{"./prefixes":"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixes.js"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/prefixes.js":[function(require,module,exports){
"use strict";module.exports=["webkit","moz","ms","o"];

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/promise/rejectAll.js":[function(require,module,exports){
"use strict";module.exports=function(t,e){return t.length>0&&(t.forEach(function(t,n,r){t.reject(e),r[n]=null}),t.length=0),t};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/promise/resolveAll.js":[function(require,module,exports){
"use strict";module.exports=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,l){e.resolve(n),l[t]=null}),e.length=0),e};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/strings/camelToDashed.js":[function(require,module,exports){
"use strict";module.exports=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/strings/stripTags.js":[function(require,module,exports){
"use strict";module.exports=function(e){return e.replace(/<[^>]+>/g,"")};

},{}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/utils/touch/SmoothPanRecognizer.js":[function(require,module,exports){
"use strict";var Hammer=require("hammerjs");function dirStr(t){return t==Hammer.DIRECTION_DOWN?"down":t==Hammer.DIRECTION_UP?"up":t==Hammer.DIRECTION_LEFT?"left":t==Hammer.DIRECTION_RIGHT?"right":""}function SmoothPan(){var t=Hammer.Pan.apply(this,arguments);return this.thresholdOffsetX=null,this.thresholdOffsetY=null,this.thresholdOffset=null,t}Hammer.inherit(SmoothPan,Hammer.Pan,{emit:function(t){var e=this.options.threshold,r=t.direction;return this.state==Hammer.STATE_BEGAN&&(this.thresholdOffsetX=r&Hammer.DIRECTION_HORIZONTAL?r&Hammer.DIRECTION_LEFT?e:-e:0,this.thresholdOffsetY=r&Hammer.DIRECTION_VERTICAL?r&Hammer.DIRECTION_UP?e:-e:0),t.thresholdOffsetX=this.thresholdOffsetX,t.thresholdOffsetY=this.thresholdOffsetY,t.thresholdDeltaX=t.deltaX+this.thresholdOffsetX,t.thresholdDeltaY=t.deltaY+this.thresholdOffsetY,this.pX=t.deltaX,this.pY=t.deltaY,(r=dirStr(r))&&this.manager.emit(this.options.event+r,t),Hammer.Recognizer.prototype.emit.apply(this,arguments)}}),module.exports=SmoothPan;

},{"hammerjs":"hammerjs"}],"/Users/pablo/Work/projects/folio/folio-workspace-assets/src/sass/variables.json":[function(require,module,exports){
module.exports={
	"video_crop_px": "0",
	"transform_type": "3d",
	"transitions": {
		"ease": "ease-in-out",
		"duration_ms": "350",
		"delay_interval_ms": "34",
		"min_delay_ms": "34"
	},
	"breakpoints": {
		"landscape": "'(orientation: landscape)'",
		"portrait": "'(orientation: portrait)'",
		"xsmall-stretch": "'not screen and (min-width: 460px), not screen and (min-height: 420px)'",
		"small-stretch": "'not screen and (min-width: 704px), not screen and (min-height: 540px)'",
		"default":"'only screen and (min-width: 704px) and (min-height: 540px)'",
		"medium-wide": "'only screen and (min-width: 1024px) and (max-width: 1223px) and (min-height: 420px)'",
		"medium-wide-stretch": "'only screen and (min-width: 1224px) and (min-height: 420px)'"
	},
	"default_colors": {
		"color": "hsl(47, 5%, 15%)",
		"background-color": "hsl(47, 5%, 95%)",
		"link-color": "hsl(10, 80%, 50%)"
	},
	"temp": {
		"collapse_offset": "360"
	},
	"_ignore": {
		"transitions": {
			"ease": "cubic-bezier(0.42, 0.0, 0.58, 1.0)",
			"duration_ms": "400",
			"delay_interval_ms": "134",
			"min_delay_ms": "34"
		},
		"default_colors": {
			"--link-color": "hsl(10, 80%, 50%)",
			"--alt-background-color": "unset"
		},
		"units": {
			"hu_px": "20",
			"vu_px": "12"
		},
		"breakpoints": {
			"medium-wide-stretch": "'only screen and (min-width: 1024px) and (min-height: 420px)'",
			"large-wide": "'only screen and (min-width: 1824px) and (min-height: 1024px)'",
			"mobile": "'not screen and (min-width: 704px), not screen and (min-height: 540px)'",
			"unsupported": "'not screen and (min-width: 704px)'",
			"unquoted": "only screen and (min-width: 1824px)",
			"unquoted_neg": "not screen and (min-width: 704px)",
			"quoted_combined": "'not screen and (min-width: 704px), not screen and (min-height: 540px)'",
			"array": [
				"only screen and (min-width: 704px)",
				"not screen and (min-width: 704px)",
				"not screen and (min-height: 540px)"
			]
		}
	}
}

},{}],"Backbone.Mutators":[function(require,module,exports){
!function(t,s,i){"use strict";"object"==typeof exports?module.exports=s(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(i,o){return i=void 0===i?t._:i,o=void 0===o?t.Backbone:o,t.returnExportsGlobal=s(i,o,t)}):t.returnExportsGlobal=s(t._,t.Backbone)}(this,function(t,s,i,o){"use strict";s=s===o?i.Backbone:s,t=t===o?i._:t;var e=function(){},r=s.Model.prototype.get,n=s.Model.prototype.set,u=s.Model.prototype.toJSON;return e.prototype.mutators={},e.prototype.get=function(s){var i=this.mutators!==o;return!0===i&&!0===t.isFunction(this.mutators[s])?this.mutators[s].call(this):!0===i&&!0===t.isObject(this.mutators[s])&&!0===t.isFunction(this.mutators[s].get)?this.mutators[s].get.call(this):r.call(this,s)},e.prototype.set=function(s,i,e){var r=this.mutators!==o,u=null,a=null;return u=n.call(this,s,i,e),t.isObject(s)||null===s?(a=s,e=i):(a={})[s]=i,!0===r&&!0===t.isObject(this.mutators[s])&&(!0===t.isFunction(this.mutators[s].set)?u=this.mutators[s].set.call(this,s,a[s],e,t.bind(n,this)):t.isFunction(this.mutators[s])&&(u=this.mutators[s].call(this,s,a[s],e,t.bind(n,this)))),!0===r&&t.isObject(a)&&t.each(a,t.bind(function(s,i){if(!0===t.isObject(this.mutators[i])){var r=this.mutators[i];t.isFunction(r.set)&&(r=r.set),t.isFunction(r)&&((e===o||!0===t.isObject(e)&&!0!==e.silent&&e.mutators!==o&&!0!==e.mutators.silent)&&this.trigger("mutators:set:"+i),r.call(this,i,s,e,t.bind(n,this)))}},this)),u},e.prototype.toJSON=function(s){var i,o,e=u.call(this);return t.each(this.mutators,t.bind(function(r,n){!0===t.isObject(this.mutators[n])&&t.isFunction(this.mutators[n].get)?(i=this.isSaving?this.isSaving(s,r,n):t.has(s||{},"emulateHTTP"),o=this.mutators[n].transient,i&&o||(e[n]=t.bind(this.mutators[n].get,this)())):t.isFunction(this.mutators[n])&&(e[n]=t.bind(this.mutators[n],this)())},this)),e},e.prototype.escape=function(s){var i=this.get(s);return t.escape(null==i?"":""+i)},t.extend(s.Model.prototype,e.prototype),s.Mutators=e,e});

},{"backbone":"backbone","underscore":"underscore"}],"backbone.babysitter":[function(require,module,exports){
!function(i,e){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,t){return e(i,t)});else if("undefined"!=typeof exports){var t=require("backbone"),n=require("underscore");module.exports=e(t,n)}else e(i.Backbone,i._)}(this,function(i,e){"use strict";var t=i.ChildViewContainer;return i.ChildViewContainer=function(i,e){var t=function(i){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(i,this.add,this)};e.extend(t.prototype,{add:function(i,e){var t=i.cid;return this._views[t]=i,i.model&&(this._indexByModel[i.model.cid]=t),e&&(this._indexByCustom[e]=t),this._updateLength(),this},findByModel:function(i){return this.findByModelCid(i.cid)},findByModelCid:function(i){var e=this._indexByModel[i];return this.findByCid(e)},findByCustom:function(i){var e=this._indexByCustom[i];return this.findByCid(e)},findByIndex:function(i){return e.values(this._views)[i]},findByCid:function(i){return this._views[i]},remove:function(i){var t=i.cid;return i.model&&delete this._indexByModel[i.model.cid],e.any(this._indexByCustom,function(i,e){if(i===t)return delete this._indexByCustom[e],!0},this),delete this._views[t],this._updateLength(),this},call:function(i){this.apply(i,e.tail(arguments))},apply:function(i,t){e.each(this._views,function(n){e.isFunction(n[i])&&n[i].apply(n,t||[])})},_updateLength:function(){this.length=e.size(this._views)}});return e.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"],function(i){t.prototype[i]=function(){var t=[e.values(this._views)].concat(e.toArray(arguments));return e[i].apply(e,t)}}),t}(0,e),i.ChildViewContainer.VERSION="0.1.11",i.ChildViewContainer.noConflict=function(){return i.ChildViewContainer=t,this},i.ChildViewContainer});

},{"backbone":"backbone","underscore":"underscore"}],"backbone.native":[function(require,module,exports){
(function(){"use strict";var e=/^([^.]+)?(?:\.([^.]+))?$/,t=Element.prototype.matchesSelector||null;t||["webkit","moz","o","ms"].forEach(function(e){var n=Element.prototype[e+"MatchesSelector"];n&&(t=n)});var n="backboneNativeKey"+Math.random(),r=1,o={},i=[];function a(e){e[n]||(e[n]=0===i.length?++r:i.pop());var t=e[n];return o[t]||(o[t]=[])}function s(e){var t=e[n];o[t]&&(o[t]=null,e[n]=null,i.push(t))}function c(n,r,o,i){"function"==typeof o&&(i=o,o=null);var s=e.exec(r);r=s[1]||null;var c=s[2]||null;if(r){var u=i,l=i;u=o?function(e){for(var r=e.target;r&&r!==n;r=r.parentElement)if(t.call(r,o)){var i=l.call(r,e,r);return!1===i&&(e.stopPropagation(),e.preventDefault()),i}}:function(e){var t=l.call(n,e,n);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},n.addEventListener(r,u,!1),a(n).push({eventName:r,callback:i,handler:u,namespace:c,selector:o})}}function u(t,n,r,o){"function"==typeof r&&(o=r,r=null);var i=e.exec(n||"");n=i[1];var c=i[2],u=a(t)||[];n||c||r||o?(u.filter(function(e){return!(c&&e.namespace!==c||n&&e.eventName!==n||o&&e.callback!==o||r&&e.selector!==r)}).forEach(function(e){t.removeEventListener(e.eventName,e.handler,!1),u.splice(u.indexOf(e),1)}),0===u.length&&s(t)):(u.forEach(function(e){t.removeEventListener(e.eventName,e.handler,!1)}),s(t))}function l(e,t){if(t=t||document,!(this instanceof l))return new l(e,t);if(e)if("string"==typeof e)if(/^\s*</.test(e)){var n=document.createElement("div");n.innerHTML=e,this[0]=n.firstChild,n.removeChild(n.firstChild),this.length=1}else this[0]=t.querySelector(e),this.length=1;else this[0]=e,this.length=1;else this.length=0}if(l.prototype={hide:null,appendTo:null,find:null,attr:function(e){return Object.keys(e).forEach(function(t){switch(t){case"html":this[0].innerHTML=e[t];break;case"text":this[0].textContent=e[t];break;case"class":this[0].className=e[t];break;default:this[0].setAttribute(t,e[t])}},this),this},html:function(e){return this[0].innerHTML=e,this},remove:function(){var e=this[0];return e.parentElement&&e.parentElement.removeChild(e),function e(t){u(t);for(var n=0,r=t.childNodes.length;n<r;n++)t.childNodes[n].nodeType!==Node.TEXT_NODE&&e(t.childNodes[n])}(e),this},on:function(e,t,n){return c(this[0],e,t,n),this},off:function(e,t,n){return u(this[0],e,t,n),this},bind:function(e,t){return this.on(e,t)},unbind:function(e,t){return this.off(e,t)},delegate:function(e,t,n){return this.on(t,e,n)},undelegate:function(e,t,n){return this.off(t,e,n)}},l.ajax=function(e){var t=(e=e||{}).type||"GET",n=e.url,r=void 0===e.processData||!!e.processData,o=e.data;if(r&&"object"==typeof o){var i=Object.keys(o).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])});o=i.join("&")}!o||"GET"!==t&&"HEAD"!==t||(n+=(-1===n.indexOf("?")?"?":"&")+o,o=void 0);var a=new XMLHttpRequest;return a.open(t,n,!0),e.contentType&&a.setRequestHeader("Content-Type",e.contentType),e.beforeSend&&e.beforeSend(a),a.onload=function(){var t=!1,n=a.responseText;if("json"===e.dataType)try{n=JSON.parse(n)}catch(e){t=!0}!t&&a.status>=200&&a.status<300?e.success&&e.success(n,a.statusText,a):e.error&&e.error(a)}.bind(this),a.onerror=a.onabort=function(){e.error&&e.error(a)},a.send(o),a},l.on=c,l.off=u,"undefined"!=typeof exports)return module.exports=l;var f=this,h=f.Backbone?f.Backbone.Native:null,d=f.$;f.Backbone&&(f.Backbone.Native=l),f.$=l,l.noConflict=function(e){return f.$=d,e&&(f.Backbone.Native=h),l},f.Backbone&&(f.Backbone.setDomLibrary?f.Backbone.setDomLibrary(l):f.Backbone.$=l)}).call(this);

},{}],"backbone":[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=r.slice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(h=0,u=(o=t?[t]:i.keys(this._events)).length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;l<d;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;for(var a in n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t),s)(t=s[a]).off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};i.each({listenTo:"on",listenToOnce:"once"},function(t,e){o[e]=function(e,n,s){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=i.uniqueId("l"))]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var l=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(l.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,c,u,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;for(s in a=n.unset,h=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;d<f;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(c)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?i.clone(t):{}).parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;n&&n(e,i,t),e.trigger("sync",e,i,t)},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,c=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);if(n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n))return!1;c&&c(h,t,n),h.trigger("sync",h,t,n)},R(this,n),"patch"===(r=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||N();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});i.each(["keys","values","pairs","invert","pick","omit"],function(t){l.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var d=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},f={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1};i.extend(d.prototype,o,{model:l,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,p))},remove:function(t,e){var n,s,r,a,o=!i.isArray(t);for(e||(e={}),n=0,s=(t=o?[t]:i.clone(t)).length;n<s;n++)(a=t[n]=this.get(t[n]))&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a,e));return o?t[0]:t},set:function(t,e){(e=i.defaults({},e,f)).parse&&(t=this.parse(t,e));var n,s,r,a,o,h,c,u=!i.isArray(t);t=u?t?[t]:[]:i.clone(t);var d=e.at,p=this.model,g=this.comparator&&null==d&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(g||!b||!x)&&[];for(n=0,s=t.length;n<s;n++){if(r=(o=t[n]||{})instanceof l?a=o:o[p.prototype.idAttribute||"id"],h=this.get(r))x&&(_[h.cid]=!0),w&&(o=o===a?a.attributes:o,e.parse&&(o=h.parse(o,e)),h.set(o,e),g&&!c&&h.hasChanged(v)&&(c=!0)),t[n]=h;else if(b){if(!(a=t[n]=this._prepareModel(o,e)))continue;m.push(a),this._addReference(a,e)}a=h||a,!E||!a.isNew()&&_[a.id]||E.push(a),_[a.id]=!0}if(x){for(n=0,s=this.length;n<s;++n)_[(a=this.models[n]).cid]||y.push(a);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(g&&(c=!0),this.length+=m.length,null!=d)for(n=0,s=m.length;n<s;n++)this.models.splice(d+n,0,m[n]);else{E&&(this.models.length=0);var k=E||m;for(n=0,s=k.length;n<s;n++)this.models.push(k[n])}if(c&&this.sort({silent:!0}),!e.silent){for(n=0,s=m.length;n<s;n++)(a=m[n]).trigger("add",a,this,e);(c||E&&E.length)&&this.trigger("sort",this,e)}return u?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){void 0===(t=t?i.clone(t):{}).parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof l)return t;(e=e?i.clone(e):{}).collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});i.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});i.each(["groupBy","countBy","sortBy","indexBy"],function(t){d.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var g=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,m)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},v=/^(\S+)\s*(.*)$/,m=["model","collection","el","id","attributes","className","tagName","events"];i.extend(g.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(v),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=_[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||N()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&y&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),_={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var b=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},w=/\((.*?)\)/g,x=/(\(\?)?:\w+/g,E=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(b.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(k,"\\$&").replace(w,"(?:$1)?").replace(x,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var T=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,H=/msie [\w.]+/,A=/\/$/,I=/#.*$/;T.started=!1,i.extend(T.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(A,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace($,"")},start:function(t){if(T.started)throw new Error("Backbone.history has already been started");T.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=H.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(S,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace($,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),T.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!T.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new T;l.extend=d.extend=b.extend=g.extend=T.extend=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};var N=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});

},{"underscore":"underscore"}],"classlist-polyfill":[function(require,module,exports){
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){"use strict";if("Element"in t){var e=t.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},o=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,e)},c=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],s=0,r=n.length;s<r;s++)this.push(n[s]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},a=c.prototype=[],l=function(){return new c(this)};if(r.prototype=Error.prototype,a.item=function(t){return this[t]||null},a.contains=function(t){return-1!==o(this,t+="")},a.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do{t=e[n]+"",-1===o(this,t)&&(this.push(t),s=!0)}while(++n<i);s&&this._updateClassName()},a.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do{for(t=n[i]+"",e=o(this,t);-1!==e;)this.splice(e,1),r=!0,e=o(this,t)}while(++i<s);r&&this._updateClassName()},a.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},a.toString=function(){return this.join(" ")},n.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",u)}catch(t){void 0!==t.number&&-2146823252!==t.number||(u.enumerable=!1,n.defineProperty(e,"classList",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",l)}}(window.self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}());

},{}],"color":[function(require,module,exports){
"use strict";var colorString=require("color-string"),convert=require("color-convert"),_slice=[].slice,skippedModels=["keyword","gray","hex"],hashedModelKeys={};Object.keys(convert).forEach(function(r){hashedModelKeys[_slice.call(convert[r].labels).sort().join("")]=r});var limiters={};function Color(r,t){if(!(this instanceof Color))return new Color(r,t);if(t&&t in skippedModels&&(t=null),t&&!(t in convert))throw new Error("Unknown model: "+t);var o,e;if(r)if(r instanceof Color)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if("string"==typeof r){var n=colorString.get(r);if(null===n)throw new Error("Unable to parse color from string: "+r);this.model=n.model,e=convert[this.model].channels,this.color=n.value.slice(0,e),this.valpha="number"==typeof n.value[e]?n.value[e]:1}else if(r.length){this.model=t||"rgb",e=convert[this.model].channels;var a=_slice.call(r,0,e);this.color=zeroArray(a,e),this.valpha="number"==typeof r[e]?r[e]:1}else if("number"==typeof r)r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,255&r],this.valpha=1;else{this.valpha=1;var l=Object.keys(r);"alpha"in r&&(l.splice(l.indexOf("alpha"),1),this.valpha="number"==typeof r.alpha?r.alpha:0);var i=l.sort().join("");if(!(i in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=hashedModelKeys[i];var s=convert[this.model].labels,h=[];for(o=0;o<s.length;o++)h.push(r[s[o]]);this.color=zeroArray(h)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(limiters[this.model])for(e=convert[this.model].channels,o=0;o<e;o++){var c=limiters[this.model][o];c&&(this.color[o]=c(this.color[o]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function roundTo(r,t){return Number(r.toFixed(t))}function roundToPlace(r){return function(t){return roundTo(t,r)}}function getset(r,t,o){return(r=Array.isArray(r)?r:[r]).forEach(function(r){(limiters[r]||(limiters[r]=[]))[t]=o}),r=r[0],function(e){var n;return arguments.length?(o&&(e=o(e)),(n=this[r]()).color[t]=e,n):(n=this[r]().color[t],o&&(n=o(n)),n)}}function maxfn(r){return function(t){return Math.max(0,Math.min(r,t))}}function assertArray(r){return Array.isArray(r)?r:[r]}function zeroArray(r,t){for(var o=0;o<t;o++)"number"!=typeof r[o]&&(r[o]=0);return r}Color.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var t=this.model in colorString.to?this:this.rgb(),o=1===(t=t.round("number"==typeof r?r:1)).valpha?t.color:t.color.concat(this.valpha);return colorString.to[t.model](o)},percentString:function(r){var t=this.rgb().round("number"==typeof r?r:1),o=1===t.valpha?t.color:t.color.concat(this.valpha);return colorString.to.rgb.percent(o)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},t=convert[this.model].channels,o=convert[this.model].labels,e=0;e<t;e++)r[o[e]]=this.color[e];return 1!==this.valpha&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,1!==this.valpha&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,1!==this.valpha&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new Color(this.color.map(roundToPlace(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new Color(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(100)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(100)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword:function(r){return arguments.length?new Color(r):convert[this.model].keyword(this.color)},hex:function(r){return arguments.length?new Color(r):colorString.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(255&r[0])<<16|(255&r[1])<<8|255&r[2]},luminosity:function(){for(var r=this.rgb().color,t=[],o=0;o<r.length;o++){var e=r[o]/255;t[o]=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(r){var t=this.luminosity(),o=r.luminosity();return t>o?(t+.05)/(o+.05):(o+.05)/(t+.05)},level:function(r){var t=this.contrast(r);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var r=this.rgb().color;return(299*r[0]+587*r[1]+114*r[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),t=0;t<3;t++)r.color[t]=255-r.color[t];return r},lighten:function(r){var t=this.hsl();return t.color[2]+=t.color[2]*r,t},darken:function(r){var t=this.hsl();return t.color[2]-=t.color[2]*r,t},saturate:function(r){var t=this.hsl();return t.color[1]+=t.color[1]*r,t},desaturate:function(r){var t=this.hsl();return t.color[1]-=t.color[1]*r,t},whiten:function(r){var t=this.hwb();return t.color[1]+=t.color[1]*r,t},blacken:function(r){var t=this.hwb();return t.color[2]+=t.color[2]*r,t},grayscale:function(){var r=this.rgb().color,t=.3*r[0]+.59*r[1]+.11*r[2];return Color.rgb(t,t,t)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var t=this.hsl(),o=t.color[0];return o=(o=(o+r)%360)<0?360+o:o,t.color[0]=o,t},mix:function(r,t){var o=r.rgb(),e=this.rgb(),n=void 0===t?.5:t,a=2*n-1,l=o.alpha()-e.alpha(),i=((a*l==-1?a:(a+l)/(1+a*l))+1)/2,s=1-i;return Color.rgb(i*o.red()+s*e.red(),i*o.green()+s*e.green(),i*o.blue()+s*e.blue(),o.alpha()*n+e.alpha()*(1-n))}},Object.keys(convert).forEach(function(r){if(-1===skippedModels.indexOf(r)){var t=convert[r].channels;Color.prototype[r]=function(){if(this.model===r)return new Color(this);if(arguments.length)return new Color(arguments,r);var o="number"==typeof arguments[t]?t:this.valpha;return new Color(assertArray(convert[this.model][r].raw(this.color)).concat(o),r)},Color[r]=function(o){return"number"==typeof o&&(o=zeroArray(_slice.call(arguments),t)),new Color(o,r)}}}),module.exports=Color;

},{"color-convert":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-convert/index.js","color-string":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/color-string/index.js"}],"es6-promise/auto":[function(require,module,exports){
"use strict";module.exports=require("./").polyfill();

},{"./":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/es6-promise/dist/es6-promise.js"}],"fullscreen-polyfill":[function(require,module,exports){
"use strict";!function(e){var n,l,r={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},t=r.w3;for(l in r)if(r[l].enabled in e){n=r[l];break}function s(n,l,r){var t=e.createEvent("Event");t.initEvent(n,!0,!1),r.type,l.dispatchEvent(t)}t.enabled in e||!n||(e.addEventListener(n.events.change,function(l){e[t.enabled]=e[n.enabled],e[t.element]=e[n.element],s(t.events.change,l.target,l)},!1),e.addEventListener(n.events.error,function(e){s(t.events.error,e.target,e)},!1),e[t.enabled]=e[n.enabled],e[t.element]=e[n.element],e[t.exit]=e[n.exit],Element.prototype[t.request]=function(){return this[n.request].apply(this,arguments)})}(document);

},{}],"hammerjs":[function(require,module,exports){
!function(t,e,i,n){"use strict";var r,s=["","webkit","Moz","MS","ms","o"],o=e.createElement("div"),a="function",h=Math.round,u=Math.abs,c=Date.now;function l(t,e,i){return setTimeout(T(t,i),e)}function p(t,e,i){return!!Array.isArray(t)&&(f(t,i[e],i),!0)}function f(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function d(e,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,r,n),e.apply(this,arguments)}}r="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==n&&null!==r)for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])}return e}:Object.assign;var v=d(function(t,e,i){for(var r=Object.keys(e),s=0;s<r.length;)(!i||i&&t[r[s]]===n)&&(t[r[s]]=e[r[s]]),s++;return t},"extend","Use `assign`."),m=d(function(t,e){return v(t,e,!0)},"merge","Use `assign`.");function g(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&r(n,i)}function T(t,e){return function(){return t.apply(e,arguments)}}function y(t,e){return typeof t==a?t.apply(e&&e[0]||n,e):t}function E(t,e){return t===n?e:t}function I(t,e,i){f(S(e),function(e){t.addEventListener(e,i,!1)})}function A(t,e,i){f(S(e),function(e){t.removeEventListener(e,i,!1)})}function _(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function S(t){return t.trim().split(/\s+/g)}function b(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function D(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];b(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function x(t,e){for(var i,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((r=(i=s[a])?i+o:e)in t)return r;a++}return n}var w=1;function O(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}var R="ontouchstart"in t,M=x(t,"PointerEvent")!==n,z=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N=25,X=1,Y=2,F=4,W=8,q=1,k=2,H=4,L=8,U=16,V=k|H,j=L|U,G=V|j,Z=["x","y"],B=["clientX","clientY"];function $(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&i.handler(e)},this.init()}function J(t,e,i){var r=i.pointers.length,s=i.changedPointers.length,o=e&X&&r-s==0,a=e&(F|W)&&r-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,s=r.length;i.firstInput||(i.firstInput=K(e));s>1&&!i.firstMultiple?i.firstMultiple=K(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,l=e.center=Q(r);e.timeStamp=c(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=nt(h,l),e.distance=it(h,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==X&&s.eventType!==F||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=et(e.deltaX,e.deltaY);var p=tt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=u(p.x)>u(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,d=r,it(d[0],d[1],B)/it(f[0],f[1],B)):1,e.rotation=a?function(t,e){return nt(e[1],e[0],B)+nt(t[1],t[0],B)}(a.pointers,r):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,r,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=W&&(h>N||a.velocity===n)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=tt(h,c,l);r=p.x,s=p.y,i=u(p.x)>u(p.y)?p.x:p.y,o=et(c,l),t.lastInterval=e}else i=a.velocity,r=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=r,e.velocityY=s,e.direction=o}(i,e);var f,d;var v=t.element;_(e.srcEvent.target,v)&&(v=e.srcEvent.target);e.target=v}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function K(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:h(t.pointers[i].clientX),clientY:h(t.pointers[i].clientY)},i++;return{timeStamp:c(),pointers:e,center:Q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Q(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:h(i/e),y:h(n/e)}}function tt(t,e,i){return{x:e/t||0,y:i/t||0}}function et(t,e){return t===e?q:u(t)>=u(e)?t<0?k:H:e<0?L:U}function it(t,e,i){i||(i=Z);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function nt(t,e,i){i||(i=Z);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}$.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(O(this.element),this.evWin,this.domHandler)}};var rt={mousedown:X,mousemove:Y,mouseup:F},st="mousedown",ot="mousemove mouseup";function at(){this.evEl=st,this.evWin=ot,this.pressed=!1,$.apply(this,arguments)}g(at,$,{handler:function(t){var e=rt[t.type];e&X&&0===t.button&&(this.pressed=!0),e&Y&&1!==t.which&&(e=F),this.pressed&&(e&F&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ht={pointerdown:X,pointermove:Y,pointerup:F,pointercancel:W,pointerout:W},ut={2:"touch",3:"pen",4:"mouse",5:"kinect"},ct="pointerdown",lt="pointermove pointerup pointercancel";function pt(){this.evEl=ct,this.evWin=lt,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(ct="MSPointerDown",lt="MSPointerMove MSPointerUp MSPointerCancel"),g(pt,$,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ht[n],s=ut[t.pointerType]||t.pointerType,o="touch"==s,a=b(e,t.pointerId,"pointerId");r&X&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(F|W)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var ft={touchstart:X,touchmove:Y,touchend:F,touchcancel:W},dt="touchstart",vt="touchstart touchmove touchend touchcancel";function mt(){this.evTarget=dt,this.evWin=vt,this.started=!1,$.apply(this,arguments)}g(mt,$,{handler:function(t){var e=ft[t.type];if(e===X&&(this.started=!0),this.started){var i=function(t,e){var i=P(t.touches),n=P(t.changedTouches);e&(F|W)&&(i=D(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(F|W)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var gt={touchstart:X,touchmove:Y,touchend:F,touchcancel:W},Tt="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=Tt,this.targetIds={},$.apply(this,arguments)}g(yt,$,{handler:function(t){var e=gt[t.type],i=function(t,e){var i=P(t.touches),n=this.targetIds;if(e&(X|Y)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=P(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return _(t.target,h)}),e===X)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(F|W)&&delete n[o[r].identifier],r++;if(!a.length)return;return[D(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var Et=2500,It=25;function At(){$.apply(this,arguments);var t=T(this.handler,this);this.touch=new yt(this.manager,t),this.mouse=new at(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function _t(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},Et)}}g(At,$,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&X?(this.primaryTouch=e.changedPointers[0].identifier,_t.call(this,e)):t&(F|W)&&_t.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=It&&o<=It)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=x(o.style,"touchAction"),St=Ct!==n,bt="auto",Pt="manipulation",Dt="none",xt="pan-x",wt="pan-y",Ot=function(){if(!St)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}();function Rt(t,e){this.manager=t,this.set(e)}Rt.prototype={set:function(t){"compute"==t&&(t=this.compute()),St&&this.manager.element.style&&Ot[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(C(t,Dt))return Dt;var e=C(t,xt),i=C(t,wt);if(e&&i)return Dt;if(e||i)return e?xt:wt;if(C(t,Pt))return Pt;return bt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=C(n,Dt)&&!Ot[Dt],s=C(n,wt)&&!Ot[wt],o=C(n,xt)&&!Ot[xt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&V||o&&i&j?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Mt=1,zt=2,Nt=4,Xt=8,Yt=Xt,Ft=16;function Wt(t){this.options=r({},this.defaults,t||{}),this.id=w++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Mt,this.simultaneous={},this.requireFail=[]}function qt(t){return t&Ft?"cancel":t&Xt?"end":t&Nt?"move":t&zt?"start":""}function kt(t){return t==U?"down":t==L?"up":t==k?"left":t==H?"right":""}function Ht(t,e){var i=e.manager;return i?i.get(t):t}function Lt(){Wt.apply(this,arguments)}function Ut(){Lt.apply(this,arguments),this.pX=null,this.pY=null}function Vt(){Lt.apply(this,arguments)}function jt(){Wt.apply(this,arguments),this._timer=null,this._input=null}function Gt(){Lt.apply(this,arguments)}function Zt(){Lt.apply(this,arguments)}function Bt(){Wt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $t(t,e){return(e=e||{}).recognizers=E(e.recognizers,$t.defaults.preset),new Jt(t,e)}Wt.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(p(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ht(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return p(t,"dropRecognizeWith",this)?this:(t=Ht(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(p(t,"requireFailure",this))return this;var e=this.requireFail;return-1===b(e,t=Ht(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(p(t,"dropRequireFailure",this))return this;t=Ht(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Xt&&n(e.options.event+qt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Xt&&n(e.options.event+qt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Mt)))return!1;t++}return!0},recognize:function(t){var e=r({},t);if(!y(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Yt|Ft|32)&&(this.state=Mt),this.state=this.process(e),this.state&(zt|Nt|Xt|Ft)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},g(Lt,Wt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(zt|Nt),r=this.attrTest(t);return n&&(i&W||!r)?e|Ft:n||r?i&F?e|Xt:e&zt?e|Nt:zt:32}}),g(Ut,Lt,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var t=this.options.direction,e=[];return t&V&&e.push(wt),t&j&&e.push(xt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&V?(r=0===s?q:s<0?k:H,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?q:o<0?L:U,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Lt.prototype.attrTest.call(this,t)&&(this.state&zt||!(this.state&zt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=kt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),g(Vt,Lt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Dt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&zt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),g(jt,Wt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(F|W)&&!r)this.reset();else if(t.eventType&X)this.reset(),this._timer=l(function(){this.state=Yt,this.tryEmit()},e.time,this);else if(t.eventType&F)return Yt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Yt&&(t&&t.eventType&F?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),g(Gt,Lt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Dt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&zt)}}),g(Zt,Lt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:V|j,pointers:1},getTouchAction:function(){return Ut.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(V|j)?e=t.overallVelocity:i&V?e=t.overallVelocityX:i&j&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&t.eventType&F},emit:function(t){var e=kt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),g(Bt,Wt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&X&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=F)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||it(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=Yt,this.tryEmit()},e.interval,this),zt):Yt}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Yt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$t.VERSION="2.0.7",$t.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Gt,{enable:!1}],[Vt,{enable:!1},["rotate"]],[Zt,{direction:V}],[Ut,{direction:V},["swipe"]],[Bt],[Bt,{event:"doubletap",taps:2},["tap"]],[jt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Jt(t,e){var i;this.options=r({},$t.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(M?pt:z?yt:R?At:at))(i,J),this.touchAction=new Rt(this,this.options.touchAction),Kt(this,!0),f(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Kt(t,e){var i,n=t.element;n.style&&(f(t.options.cssProps,function(r,s){i=x(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Jt.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Yt)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(zt|Nt|Xt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Wt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(p(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(p(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=b(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return f(S(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==n){var i=this.handlers;return f(S(t),function(t){e?i[t]&&i[t].splice(b(i[t],e),1):delete i[t]}),this}},emit:function(t,i){this.options.domEvents&&function(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}(t,i);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](i),r++}},destroy:function(){this.element&&Kt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r($t,{INPUT_START:X,INPUT_MOVE:Y,INPUT_END:F,INPUT_CANCEL:W,STATE_POSSIBLE:Mt,STATE_BEGAN:zt,STATE_CHANGED:Nt,STATE_ENDED:Xt,STATE_RECOGNIZED:Yt,STATE_CANCELLED:Ft,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:k,DIRECTION_RIGHT:H,DIRECTION_UP:L,DIRECTION_DOWN:U,DIRECTION_HORIZONTAL:V,DIRECTION_VERTICAL:j,DIRECTION_ALL:G,Manager:Jt,Input:$,TouchAction:Rt,TouchInput:yt,MouseInput:at,PointerEventInput:pt,TouchMouseInput:At,SingleTouchInput:mt,Recognizer:Wt,AttrRecognizer:Lt,Tap:Bt,Pan:Ut,Swipe:Zt,Pinch:Vt,Rotate:Gt,Press:jt,on:I,off:A,each:f,merge:m,extend:v,assign:r,inherit:g,bindFn:T,prefixed:x}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=$t,"function"==typeof define&&define.amd?define(function(){return $t}):"undefined"!=typeof module&&module.exports?module.exports=$t:t.Hammer=$t}(window,document);

},{}],"hbsfy/runtime":[function(require,module,exports){
module.exports=require("handlebars/runtime").default;

},{"handlebars/runtime":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/handlebars/runtime.js"}],"matches-polyfill":[function(require,module,exports){
"use strict";!function(t){var e=["ms","moz","webkit","o"],o=-1;for(o=0;o<e.length&&!t.matches;++o)t.matches=t[e[o]+"MatchesSelector"];t.matches||console.warn("No native Element.prototype.matches found"),t.matches||(t.matches=function(t){for(var e=(this.parentNode||this.document).querySelectorAll(t),o=-1;e[++o]&&e[o]!=this;);return!!e[o]})}(window.Element.prototype);

},{}],"math-sign-polyfill":[function(require,module,exports){
"use strict";Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t});

},{}],"mutation-observer":[function(require,module,exports){
var MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,WeakMap=window.WeakMap;if(void 0===WeakMap){var defineProperty=Object.defineProperty,counter=Date.now()%1e9;(WeakMap=function(){this.name="__st"+(1e9*Math.random()>>>0)+counter+++"__"}).prototype={set:function(e,t){var r=e[this.name];return r&&r[0]===e?r[1]=t:defineProperty(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];if(!t)return!1;var r=t[0]===e;return t[0]=t[1]=void 0,r},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}var registrationsTable=new WeakMap,setImmediate=window.msSetImmediate;if(!setImmediate){var setImmediateQueue=[],sentinel=String(Math.random());window.addEventListener("message",function(e){if(e.data===sentinel){var t=setImmediateQueue;setImmediateQueue=[],t.forEach(function(e){e()})}}),setImmediate=function(e){setImmediateQueue.push(e),window.postMessage(sentinel,"*")}}var isScheduled=!1,scheduledObservers=[];function scheduleCallback(e){scheduledObservers.push(e),isScheduled||(isScheduled=!0,setImmediate(dispatchCallbacks))}function wrapIfNeeded(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function dispatchCallbacks(){isScheduled=!1;var e=scheduledObservers;scheduledObservers=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var r=e.takeRecords();removeTransientObserversFor(e),r.length&&(e.callback_(r,e),t=!0)}),t&&dispatchCallbacks()}function removeTransientObserversFor(e){e.nodes_.forEach(function(t){var r=registrationsTable.get(t);r&&r.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function forEachAncestorAndObserverEnqueueRecord(e,t){for(var r=e;r;r=r.parentNode){var i=registrationsTable.get(r);if(i)for(var a=0;a<i.length;a++){var n=i[a],s=n.options;if(r===e||s.subtree){var o=t(s);o&&n.enqueue(o)}}}}var currentRecord,recordWithOldValue,uidCounter=0;function JsMutationObserver(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++uidCounter}function MutationRecord(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function copyMutationRecord(e){var t=new MutationRecord(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function getRecord(e,t){return currentRecord=new MutationRecord(e,t)}function getRecordWithOldValue(e){return recordWithOldValue||((recordWithOldValue=copyMutationRecord(currentRecord)).oldValue=e,recordWithOldValue)}function clearRecords(){currentRecord=recordWithOldValue=void 0}function recordRepresentsCurrentMutation(e){return e===recordWithOldValue||e===currentRecord}function selectRecord(e,t){return e===t?e:recordWithOldValue&&recordRepresentsCurrentMutation(e)?recordWithOldValue:null}function Registration(e,t,r){this.observer=e,this.target=t,this.options=r,this.transientObservedNodes=[]}JsMutationObserver.prototype={observe:function(e,t){if(e=wrapIfNeeded(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r,i=registrationsTable.get(e);i||registrationsTable.set(e,i=[]);for(var a=0;a<i.length;a++)if(i[a].observer===this){(r=i[a]).removeListeners(),r.options=t;break}r||(r=new Registration(this,e,t),i.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=registrationsTable.get(e),r=0;r<t.length;r++){var i=t[r];if(i.observer===this){i.removeListeners(),t.splice(r,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},Registration.prototype={enqueue:function(e){var t=this.observer.records_,r=t.length;if(t.length>0){var i=selectRecord(t[r-1],e);if(i)return void(t[r-1]=i)}else scheduleCallback(this.observer);t[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=registrationsTable.get(e);t||registrationsTable.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=registrationsTable.get(e),r=0;r<t.length;r++)if(t[r]===this){t.splice(r,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,r=e.relatedNode.namespaceURI,i=e.target;(n=new getRecord("attributes",i)).attributeName=t,n.attributeNamespace=r;var a=null;"undefined"!=typeof MutationEvent&&e.attrChange===MutationEvent.ADDITION||(a=e.prevValue),forEachAncestorAndObserverEnqueueRecord(i,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(r)))return e.attributeOldValue?getRecordWithOldValue(a):n});break;case"DOMCharacterDataModified":var n=getRecord("characterData",i=e.target);a=e.prevValue;forEachAncestorAndObserverEnqueueRecord(i,function(e){if(e.characterData)return e.characterDataOldValue?getRecordWithOldValue(a):n});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":i=e.relatedNode;var s,o,d=e.target;"DOMNodeInserted"===e.type?(s=[d],o=[]):(s=[],o=[d]);var u=d.previousSibling,c=d.nextSibling;(n=getRecord("childList",i)).addedNodes=s,n.removedNodes=o,n.previousSibling=u,n.nextSibling=c,forEachAncestorAndObserverEnqueueRecord(i,function(e){if(e.childList)return n})}clearRecords()}},MutationObserver||(MutationObserver=JsMutationObserver),module.exports=MutationObserver;

},{}],"raf-polyfill":[function(require,module,exports){
"use strict";!function(){var n,i=["ms","moz","webkit","o"],e=-1;for(e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||console.warn("No native window.requestAnimationFrame found"),window.requestAnimationFrame||(n=0,window.requestAnimationFrame=function(i,e){var o=(new Date).getTime(),a=Math.max(0,16-(o-n)),t=window.setTimeout(function(){i(o+a)},a);return n=o+a,t}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){window.clearTimeout(n)})}();

},{}],"setimmediate":[function(require,module,exports){
(function (process,global){
!function(e,t){"use strict";if(!e.setImmediate){var n,a,s,o,c,i=1,r={},f=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick(function(){g(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){g(e.data)},n=function(e){s.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(a=l.documentElement,n=function(e){var t=l.createElement("script");t.onreadystatechange=function(){g(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(g,0,e)}:(o="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&g(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),n=function(t){e.postMessage(o+t,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var s={callback:e,args:t};return r[i]=s,n(i),i++},u.clearImmediate=d}function d(e){delete r[e]}function g(e){if(f)setTimeout(g,0,e);else{var n=r[e];if(n){f=!0;try{!function(e){var n=e.callback,a=e.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(t,a)}}(n)}finally{d(e),f=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":"/Users/pablo/Work/projects/folio/folio-workspace-assets/node_modules/process/browser.js"}],"underscore":[function(require,module,exports){
(function(){var n=this,r=n._,t=Array.prototype,e=Object.prototype,u=Function.prototype,i=t.push,o=t.slice,a=e.toString,c=e.hasOwnProperty,f=Array.isArray,l=Object.keys,s=u.bind,p=Object.create,h=function(){},v=function(n){return n instanceof v?n:this instanceof v?void(this._wrapped=n):new v(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=v),exports._=v):n._=v,v.VERSION="1.8.3";var y=function(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,i){return n.call(r,t,e,u,i)}}return function(){return n.apply(r,arguments)}},d=function(n,r,t){return null==n?v.identity:v.isFunction(n)?y(n,r,t):v.isObject(n)?v.matcher(n):v.property(n)};v.iteratee=function(n,r){return d(n,r,1/0)};var g=function(n,r){return function(t){var e=arguments.length;if(e<2||null==t)return t;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var f=o[c];r&&void 0!==t[f]||(t[f]=i[f])}return t}},m=function(n){if(!v.isObject(n))return{};if(p)return p(n);h.prototype=n;var r=new h;return h.prototype=null,r},b=function(n){return function(r){return null==r?void 0:r[n]}},x=Math.pow(2,53)-1,_=b("length"),j=function(n){var r=_(n);return"number"==typeof r&&r>=0&&r<=x};function w(n){return function(r,t,e,u){t=y(t,u,4);var i=!j(r)&&v.keys(r),o=(i||r).length,a=n>0?0:o-1;return arguments.length<3&&(e=r[i?i[a]:a],a+=n),function(r,t,e,u,i,o){for(;i>=0&&i<o;i+=n){var a=u?u[i]:i;e=t(e,r[a],a,r)}return e}(r,t,e,i,a,o)}}v.each=v.forEach=function(n,r,t){var e,u;if(r=y(r,t),j(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var i=v.keys(n);for(e=0,u=i.length;e<u;e++)r(n[i[e]],i[e],n)}return n},v.map=v.collect=function(n,r,t){r=d(r,t);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i},v.reduce=v.foldl=v.inject=w(1),v.reduceRight=v.foldr=w(-1),v.find=v.detect=function(n,r,t){var e;if(void 0!==(e=j(n)?v.findIndex(n,r,t):v.findKey(n,r,t))&&-1!==e)return n[e]},v.filter=v.select=function(n,r,t){var e=[];return r=d(r,t),v.each(n,function(n,t,u){r(n,t,u)&&e.push(n)}),e},v.reject=function(n,r,t){return v.filter(n,v.negate(d(r)),t)},v.every=v.all=function(n,r,t){r=d(r,t);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},v.some=v.any=function(n,r,t){r=d(r,t);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},v.contains=v.includes=v.include=function(n,r,t,e){return j(n)||(n=v.values(n)),("number"!=typeof t||e)&&(t=0),v.indexOf(n,r,t)>=0},v.invoke=function(n,r){var t=o.call(arguments,2),e=v.isFunction(r);return v.map(n,function(n){var u=e?r:n[r];return null==u?u:u.apply(n,t)})},v.pluck=function(n,r){return v.map(n,v.property(r))},v.where=function(n,r){return v.filter(n,v.matcher(r))},v.findWhere=function(n,r){return v.find(n,v.matcher(r))},v.max=function(n,r,t){var e,u,i=-1/0,o=-1/0;if(null==r&&null!=n)for(var a=0,c=(n=j(n)?n:v.values(n)).length;a<c;a++)(e=n[a])>i&&(i=e);else r=d(r,t),v.each(n,function(n,t,e){((u=r(n,t,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},v.min=function(n,r,t){var e,u,i=1/0,o=1/0;if(null==r&&null!=n)for(var a=0,c=(n=j(n)?n:v.values(n)).length;a<c;a++)(e=n[a])<i&&(i=e);else r=d(r,t),v.each(n,function(n,t,e){((u=r(n,t,e))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},v.shuffle=function(n){for(var r,t=j(n)?n:v.values(n),e=t.length,u=Array(e),i=0;i<e;i++)(r=v.random(0,i))!==i&&(u[i]=u[r]),u[r]=t[i];return u},v.sample=function(n,r,t){return null==r||t?(j(n)||(n=v.values(n)),n[v.random(n.length-1)]):v.shuffle(n).slice(0,Math.max(0,r))},v.sortBy=function(n,r,t){return r=d(r,t),v.pluck(v.map(n,function(n,t,e){return{value:n,index:t,criteria:r(n,t,e)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")};var A=function(n){return function(r,t,e){var u={};return t=d(t,e),v.each(r,function(e,i){var o=t(e,i,r);n(u,e,o)}),u}};v.groupBy=A(function(n,r,t){v.has(n,t)?n[t].push(r):n[t]=[r]}),v.indexBy=A(function(n,r,t){n[t]=r}),v.countBy=A(function(n,r,t){v.has(n,t)?n[t]++:n[t]=1}),v.toArray=function(n){return n?v.isArray(n)?o.call(n):j(n)?v.map(n,v.identity):v.values(n):[]},v.size=function(n){return null==n?0:j(n)?n.length:v.keys(n).length},v.partition=function(n,r,t){r=d(r,t);var e=[],u=[];return v.each(n,function(n,t,i){(r(n,t,i)?e:u).push(n)}),[e,u]},v.first=v.head=v.take=function(n,r,t){if(null!=n)return null==r||t?n[0]:v.initial(n,n.length-r)},v.initial=function(n,r,t){return o.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},v.last=function(n,r,t){if(null!=n)return null==r||t?n[n.length-1]:v.rest(n,Math.max(0,n.length-r))},v.rest=v.tail=v.drop=function(n,r,t){return o.call(n,null==r||t?1:r)},v.compact=function(n){return v.filter(n,v.identity)};var O=function(n,r,t,e){for(var u=[],i=0,o=e||0,a=_(n);o<a;o++){var c=n[o];if(j(c)&&(v.isArray(c)||v.isArguments(c))){r||(c=O(c,r,t));var f=0,l=c.length;for(u.length+=l;f<l;)u[i++]=c[f++]}else t||(u[i++]=c)}return u};function k(n){return function(r,t,e){t=d(t,e);for(var u=_(r),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(t(r[i],i,r))return i;return-1}}function F(n,r,t){return function(e,u,i){var a=0,c=_(e);if("number"==typeof i)n>0?a=i>=0?i:Math.max(i+c,a):c=i>=0?Math.min(i+1,c):i+c+1;else if(t&&i&&c)return e[i=t(e,u)]===u?i:-1;if(u!=u)return(i=r(o.call(e,a,c),v.isNaN))>=0?i+a:-1;for(i=n>0?a:c-1;i>=0&&i<c;i+=n)if(e[i]===u)return i;return-1}}v.flatten=function(n,r){return O(n,r,!1)},v.without=function(n){return v.difference(n,o.call(arguments,1))},v.uniq=v.unique=function(n,r,t,e){v.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=d(t,e));for(var u=[],i=[],o=0,a=_(n);o<a;o++){var c=n[o],f=t?t(c,o,n):c;r?(o&&i===f||u.push(c),i=f):t?v.contains(i,f)||(i.push(f),u.push(c)):v.contains(u,c)||u.push(c)}return u},v.union=function(){return v.uniq(O(arguments,!0,!0))},v.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=_(n);e<u;e++){var i=n[e];if(!v.contains(r,i)){for(var o=1;o<t&&v.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},v.difference=function(n){var r=O(arguments,!0,!0,1);return v.filter(n,function(n){return!v.contains(r,n)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(n){for(var r=n&&v.max(n,_).length||0,t=Array(r),e=0;e<r;e++)t[e]=v.pluck(n,e);return t},v.object=function(n,r){for(var t={},e=0,u=_(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},v.findIndex=k(1),v.findLastIndex=k(-1),v.sortedIndex=function(n,r,t,e){for(var u=(t=d(t,e,1))(r),i=0,o=_(n);i<o;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i},v.indexOf=F(1,v.findIndex,v.sortedIndex),v.lastIndexOf=F(-1,v.findLastIndex),v.range=function(n,r,t){null==r&&(r=n||0,n=0),t=t||1;for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;i<e;i++,n+=t)u[i]=n;return u};var S=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=m(n.prototype),o=n.apply(i,u);return v.isObject(o)?o:i};v.bind=function(n,r){if(s&&n.bind===s)return s.apply(n,o.call(arguments,1));if(!v.isFunction(n))throw new TypeError("Bind must be called on a function");var t=o.call(arguments,2),e=function(){return S(n,e,r,this,t.concat(o.call(arguments)))};return e},v.partial=function(n){var r=o.call(arguments,1),t=function(){for(var e=0,u=r.length,i=Array(u),o=0;o<u;o++)i[o]=r[o]===v?arguments[e++]:r[o];for(;e<arguments.length;)i.push(arguments[e++]);return S(n,t,this,this,i)};return t},v.bindAll=function(n){var r,t,e=arguments.length;if(e<=1)throw new Error("bindAll must be passed function names");for(r=1;r<e;r++)n[t=arguments[r]]=v.bind(n[t],n);return n},v.memoize=function(n,r){var t=function(e){var u=t.cache,i=""+(r?r.apply(this,arguments):e);return v.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return t.cache={},t},v.delay=function(n,r){var t=o.call(arguments,2);return setTimeout(function(){return n.apply(null,t)},r)},v.defer=v.partial(v.delay,v,1),v.throttle=function(n,r,t){var e,u,i,o=null,a=0;t||(t={});var c=function(){a=!1===t.leading?0:v.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=v.now();a||!1!==t.leading||(a=f);var l=r-(f-a);return e=this,u=arguments,l<=0||l>r?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||!1===t.trailing||(o=setTimeout(c,l)),i}},v.debounce=function(n,r,t){var e,u,i,o,a,c=function(){var f=v.now()-o;f<r&&f>=0?e=setTimeout(c,r-f):(e=null,t||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=v.now();var f=t&&!e;return e||(e=setTimeout(c,r)),f&&(a=n.apply(i,u),i=u=null),a}},v.wrap=function(n,r){return v.partial(r,n)},v.negate=function(n){return function(){return!n.apply(this,arguments)}},v.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},v.after=function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},v.before=function(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}},v.once=v.partial(v.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function I(n,r){var t=M.length,u=n.constructor,i=v.isFunction(u)&&u.prototype||e,o="constructor";for(v.has(n,o)&&!v.contains(r,o)&&r.push(o);t--;)(o=M[t])in n&&n[o]!==i[o]&&!v.contains(r,o)&&r.push(o)}v.keys=function(n){if(!v.isObject(n))return[];if(l)return l(n);var r=[];for(var t in n)v.has(n,t)&&r.push(t);return E&&I(n,r),r},v.allKeys=function(n){if(!v.isObject(n))return[];var r=[];for(var t in n)r.push(t);return E&&I(n,r),r},v.values=function(n){for(var r=v.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e},v.mapObject=function(n,r,t){r=d(r,t);for(var e,u=v.keys(n),i=u.length,o={},a=0;a<i;a++)o[e=u[a]]=r(n[e],e,n);return o},v.pairs=function(n){for(var r=v.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},v.invert=function(n){for(var r={},t=v.keys(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r},v.functions=v.methods=function(n){var r=[];for(var t in n)v.isFunction(n[t])&&r.push(t);return r.sort()},v.extend=g(v.allKeys),v.extendOwn=v.assign=g(v.keys),v.findKey=function(n,r,t){r=d(r,t);for(var e,u=v.keys(n),i=0,o=u.length;i<o;i++)if(r(n[e=u[i]],e,n))return e},v.pick=function(n,r,t){var e,u,i={},o=n;if(null==o)return i;v.isFunction(r)?(u=v.allKeys(o),e=y(r,t)):(u=O(arguments,!1,!1,1),e=function(n,r,t){return r in t},o=Object(o));for(var a=0,c=u.length;a<c;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},v.omit=function(n,r,t){if(v.isFunction(r))r=v.negate(r);else{var e=v.map(O(arguments,!1,!1,1),String);r=function(n,r){return!v.contains(e,r)}}return v.pick(n,r,t)},v.defaults=g(v.allKeys,!0),v.create=function(n,r){var t=m(n);return r&&v.extendOwn(t,r),t},v.clone=function(n){return v.isObject(n)?v.isArray(n)?n.slice():v.extend({},n):n},v.tap=function(n,r){return r(n),n},v.isMatch=function(n,r){var t=v.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return n===r;n instanceof v&&(n=n._wrapped),r instanceof v&&(r=r._wrapped);var u=a.call(n);if(u!==a.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof r)return!1;var o=n.constructor,c=r.constructor;if(o!==c&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(c)&&c instanceof c)&&"constructor"in n&&"constructor"in r)return!1}e=e||[];for(var f=(t=t||[]).length;f--;)if(t[f]===n)return e[f]===r;if(t.push(n),e.push(r),i){if((f=n.length)!==r.length)return!1;for(;f--;)if(!N(n[f],r[f],t,e))return!1}else{var l,s=v.keys(n);if(f=s.length,v.keys(r).length!==f)return!1;for(;f--;)if(l=s[f],!v.has(r,l)||!N(n[l],r[l],t,e))return!1}return t.pop(),e.pop(),!0};v.isEqual=function(n,r){return N(n,r)},v.isEmpty=function(n){return null==n||(j(n)&&(v.isArray(n)||v.isString(n)||v.isArguments(n))?0===n.length:0===v.keys(n).length)},v.isElement=function(n){return!(!n||1!==n.nodeType)},v.isArray=f||function(n){return"[object Array]"===a.call(n)},v.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){v["is"+n]=function(r){return a.call(r)==="[object "+n+"]"}}),v.isArguments(arguments)||(v.isArguments=function(n){return v.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(n){return"function"==typeof n||!1}),v.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},v.isNaN=function(n){return v.isNumber(n)&&n!==+n},v.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===a.call(n)},v.isNull=function(n){return null===n},v.isUndefined=function(n){return void 0===n},v.has=function(n,r){return null!=n&&c.call(n,r)},v.noConflict=function(){return n._=r,this},v.identity=function(n){return n},v.constant=function(n){return function(){return n}},v.noop=function(){},v.property=b,v.propertyOf=function(n){return null==n?function(){}:function(r){return n[r]}},v.matcher=v.matches=function(n){return n=v.extendOwn({},n),function(r){return v.isMatch(r,n)}},v.times=function(n,r,t){var e=Array(Math.max(0,n));r=y(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},v.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},v.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=v.invert(B),R=function(n){var r=function(r){return n[r]},t="(?:"+v.keys(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}};v.escape=R(B),v.unescape=R(T),v.result=function(n,r,t){var e=null==n?void 0:n[r];return void 0===e&&(e=t),v.isFunction(e)?e.call(n):e};var q=0;v.uniqueId=function(n){var r=++q+"";return n?n+r:r},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};v.template=function(n,r,t){!r&&t&&(r=t),r=v.defaults({},r,v.templateSettings);var e=RegExp([(r.escape||K).source,(r.interpolate||K).source,(r.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(r,t,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+r.length,t?i+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),r}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(r.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,v)},c=r.variable||"obj";return a.source="function("+c+"){\n"+i+"}",a},v.chain=function(n){var r=v(n);return r._chain=!0,r};var P=function(n,r){return n._chain?v(r).chain():r};v.mixin=function(n){v.each(v.functions(n),function(r){var t=v[r]=n[r];v.prototype[r]=function(){var n=[this._wrapped];return i.apply(n,arguments),P(this,t.apply(v,n))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=t[n];v.prototype[n]=function(){var t=this._wrapped;return r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],P(this,t)}}),v.each(["concat","join","slice"],function(n){var r=t[n];v.prototype[n]=function(){return P(this,r.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}).call(this);

},{}],"webfontloader":[function(require,module,exports){
!function(){function t(t,n,i){return t.call.apply(t.bind,arguments)}function n(t,n,i){if(!t)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,e),t.apply(n,i)}}return function(){return t.apply(n,arguments)}}function i(e,o,a){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:n).apply(null,arguments)}var e=Date.now||function(){return+new Date};function o(t,n){this.a=t,this.o=n||t,this.c=this.o.document}var a=!!window.FontFace;function s(t,n,i,e){if(n=t.c.createElement(n),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?n.style.cssText=i[o]:n.setAttribute(o,i[o]));return e&&n.appendChild(t.c.createTextNode(e)),n}function r(t,n,i){(t=t.c.getElementsByTagName(n)[0])||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,n,i){n=n||[],i=i||[];for(var e=t.className.split(/\s+/),o=0;o<n.length;o+=1){for(var a=!1,s=0;s<e.length;s+=1)if(n[o]===e[s]){a=!0;break}a||e.push(n[o])}for(n=[],o=0;o<e.length;o+=1){for(a=!1,s=0;s<i.length;s+=1)if(e[o]===i[s]){a=!0;break}a||n.push(e[o])}t.className=n.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function h(t,n){for(var i=t.className.split(/\s+/),e=0,o=i.length;e<o;e++)if(i[e]==n)return!0;return!1}function l(t,n,i){function e(){h&&o&&f&&(h(c),h=null)}n=s(t,"link",{rel:"stylesheet",href:n,media:"all"});var o=!1,f=!0,c=null,h=i||null;a?(n.onload=function(){o=!0,e()},n.onerror=function(){o=!0,c=Error("Stylesheet failed to load"),e()}):setTimeout(function(){o=!0,e()},0),r(t,"head",n)}function u(t,n,i,e){var o=t.c.getElementsByTagName("head")[0];if(o){var a=s(t,"script",{src:n}),r=!1;return a.onload=a.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&o.removeChild(a))},o.appendChild(a),setTimeout(function(){r||(r=!0,i&&i(Error("Script load timeout")))},e||5e3),a}return null}function p(){this.a=0,this.c=null}function d(t){return t.a++,function(){t.a--,v(t)}}function g(t,n){t.c=n,v(t)}function v(t){0==t.a&&t.c&&(t.c(),t.c=null)}function w(t){this.a=t||"-"}function m(t,n){this.c=t,this.f=4,this.a="n";var i=(n||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function y(t){var n=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var e=t[i].replace(/['"]/g,"");-1!=e.indexOf(" ")||/^\d/.test(e)?n.push("'"+e+"'"):n.push(e)}return n.join(",")}function b(t){return t.a+t.f}function x(t){var n="normal";return"o"===t.a?n="oblique":"i"===t.a&&(n="italic"),n}function j(t){var n=4,i="n",e=null;return t&&((e=t.match(/(normal|oblique|italic)/i))&&e[1]&&(i=e[1].substr(0,1).toLowerCase()),(e=t.match(/([1-9]00|normal|bold)/i))&&e[1]&&(/bold/i.test(e[1])?n=7:/[1-9]00/.test(e[1])&&(n=parseInt(e[1].substr(0,1),10)))),i+n}function _(t,n){this.c=t,this.f=t.o.document.documentElement,this.h=n,this.a=new w("-"),this.j=!1!==n.events,this.g=!1!==n.classes}function k(t){if(t.g){var n=h(t.f,t.a.c("wf","active")),i=[],e=[t.a.c("wf","loading")];n||i.push(t.a.c("wf","inactive")),c(t.f,i,e)}T(t,"inactive")}function T(t,n,i){t.j&&t.h[n]&&(i?t.h[n](i.c,b(i)):t.h[n]())}function S(){this.c={}}function C(t,n){this.c=t,this.f=n,this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function A(t){r(t.c,"body",t.a)}function N(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+y(t.c)+";font-style:"+x(t)+";font-weight:"+t.f+"00;"}function E(t,n,i,e,o,a){this.g=t,this.j=n,this.a=e,this.c=i,this.f=o||3e3,this.h=a||void 0}function W(t,n,i,e,o,a,s){this.v=t,this.B=n,this.c=i,this.a=e,this.s=s||"BESbswy",this.f={},this.w=o||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.m=new C(this.c,this.s),t=N(t=new m(this.a.c+",serif",b(this.a))),this.g.a.style.cssText=t,t=N(t=new m(this.a.c+",sans-serif",b(this.a))),this.h.a.style.cssText=t,t=N(t=new m("serif",b(this.a))),this.j.a.style.cssText=t,t=N(t=new m("sans-serif",b(this.a))),this.m.a.style.cssText=t,A(this.g),A(this.h),A(this.j),A(this.m)}w.prototype.c=function(t){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return n.join(this.a)},E.prototype.start=function(){var t=this.c.o.document,n=this,i=e(),o=new Promise(function(o,a){!function s(){e()-i>=n.f?a():t.fonts.load(function(t){return x(t)+" "+t.f+"00 300px "+y(t.c)}(n.a),n.h).then(function(t){1<=t.length?o():setTimeout(s,25)},function(){a()})}()}),a=null,s=new Promise(function(t,i){a=setTimeout(i,n.f)});Promise.race([s,o]).then(function(){a&&(clearTimeout(a),a=null),n.g(n.a)},function(){n.j(n.a)})};var F={D:"serif",C:"sans-serif"},I=null;function O(){if(null===I){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);I=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return I}function P(t,n,i){for(var e in F)if(F.hasOwnProperty(e)&&n===t.f[F[e]]&&i===t.f[F[e]])return!0;return!1}function B(t){var n,o=t.g.a.offsetWidth,a=t.h.a.offsetWidth;(n=o===t.f.serif&&a===t.f["sans-serif"])||(n=O()&&P(t,o,a)),n?e()-t.A>=t.w?O()&&P(t,o,a)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?L(t,t.v):L(t,t.B):function(t){setTimeout(i(function(){B(this)},t),50)}(t):L(t,t.v)}function L(t,n){setTimeout(i(function(){f(this.g.a),f(this.h.a),f(this.j.a),f(this.m.a),n(this.a)},t),0)}function D(t,n,i){this.c=t,this.a=n,this.f=0,this.m=this.j=!1,this.s=i}W.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=e(),B(this)};var $=null;function q(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&c(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),T(t,"active")):k(t.a))}function H(t){this.j=t,this.a=new S,this.h=0,this.f=this.g=!0}function M(t,n,e,o,a){var s=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=a||null,r=o||{};if(0===e.length&&s)k(n.a);else{n.f+=e.length,s&&(n.j=s);var f,h=[];for(f=0;f<e.length;f++){var l=e[f],u=r[l.c],p=n.a,d=l;if(p.g&&c(p.f,[p.a.c("wf",d.c,b(d).toString(),"loading")]),T(p,"fontloading",d),p=null,null===$)if(window.FontFace){d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);$=d?42<parseInt(d[1],10):!g}else $=!1;p=$?new E(i(n.g,n),i(n.h,n),n.c,l,n.s,u):new W(i(n.g,n),i(n.h,n),n.c,l,n.s,t,u),h.push(p)}for(f=0;f<h.length;f++)h[f].start()}},0)}function z(t,n){this.c=t,this.a=n}function G(t,n){this.c=t,this.a=n}function K(t,n){this.c=t||R,this.a=[],this.f=[],this.g=n||""}D.prototype.g=function(t){var n=this.a;n.g&&c(n.f,[n.a.c("wf",t.c,b(t).toString(),"active")],[n.a.c("wf",t.c,b(t).toString(),"loading"),n.a.c("wf",t.c,b(t).toString(),"inactive")]),T(n,"fontactive",t),this.m=!0,q(this)},D.prototype.h=function(t){var n=this.a;if(n.g){var i=h(n.f,n.a.c("wf",t.c,b(t).toString(),"active")),e=[],o=[n.a.c("wf",t.c,b(t).toString(),"loading")];i||e.push(n.a.c("wf",t.c,b(t).toString(),"inactive")),c(n.f,e,o)}T(n,"fontinactive",t),q(this)},H.prototype.load=function(t){this.c=new o(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,n,i){var e=[],o=i.timeout;!function(t){t.g&&c(t.f,[t.a.c("wf","loading")]),T(t,"loading")}(n);var e=function(t,n,i){var e,o=[];for(e in n)if(n.hasOwnProperty(e)){var a=t.c[e];a&&o.push(a(n[e],i))}return o}(t.a,i,t.c),a=new D(t.c,n,o);for(t.h=e.length,n=0,i=e.length;n<i;n++)e[n].load(function(n,i,e){M(t,a,n,i,e)})}(this,new _(this.c,t),t)},z.prototype.load=function(t){var n=this,i=n.a.projectId,e=n.a.version;if(i){var o=n.c.o;u(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(e?"?v="+e:""),function(e){e?t([]):(o["__MonotypeConfiguration__"+i]=function(){return n.a},function n(){if(o["__mti_fntLst"+i]){var e,a=o["__mti_fntLst"+i](),s=[];if(a)for(var r=0;r<a.length;r++){var f=a[r].fontfamily;null!=a[r].fontStyle&&null!=a[r].fontWeight?(e=a[r].fontStyle+a[r].fontWeight,s.push(new m(f,e))):s.push(new m(f))}t(s)}else setTimeout(function(){n()},50)}())}).id="__MonotypeAPIScript__"+i}else t([])},G.prototype.load=function(t){var n,i,e=this.a.urls||[],o=this.a.families||[],a=this.a.testStrings||{},s=new p;for(n=0,i=e.length;n<i;n++)l(this.c,e[n],d(s));var r=[];for(n=0,i=o.length;n<i;n++)if((e=o[n].split(":"))[1])for(var f=e[1].split(","),c=0;c<f.length;c+=1)r.push(new m(e[0],f[c]));else r.push(new m(e[0]));g(s,function(){t(r,a)})};var R="https://fonts.googleapis.com/css";function U(t){this.f=t,this.a=[],this.c={}}var V={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},Q=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Y(t,n){this.c=t,this.a=n}var Z={Arimo:!0,Cousine:!0,Tinos:!0};function tt(t,n){this.c=t,this.a=n}function nt(t,n){this.c=t,this.f=n,this.a=[]}Y.prototype.load=function(t){var n=new p,i=this.c,e=new K(this.a.api,this.a.text),o=this.a.families;!function(t,n){for(var i=n.length,e=0;e<i;e++){var o=n[e].split(":");3==o.length&&t.f.push(o.pop());var a="";2==o.length&&""!=o[1]&&(a=":"),t.a.push(o.join(a))}}(e,o);var a=new U(o);!function(t){for(var n=t.f.length,i=0;i<n;i++){var e=t.f[i].split(":"),o=e[0].replace(/\+/g," "),a=["n4"];if(2<=e.length){var s;if(s=[],r=e[1])for(var r,f=(r=r.split(",")).length,c=0;c<f;c++){var h;if((h=r[c]).match(/^[\w-]+$/))if(null==(u=Q.exec(h.toLowerCase())))h="";else{if(h=null==(h=u[2])||""==h?"n":J[h],null==(u=u[1])||""==u)u="4";else var l=X[u],u=l||(isNaN(u)?"4":u.substr(0,1));h=[h,u].join("")}else h="";h&&s.push(h)}0<s.length&&(a=s),3==e.length&&(s=[],0<(e=(e=e[2])?e.split(","):s).length&&(e=V[e[0]])&&(t.c[o]=e))}for(t.c[o]||(e=V[o])&&(t.c[o]=e),e=0;e<a.length;e+=1)t.a.push(new m(o,a[e]))}}(a),l(i,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var n=t.a.length,i=[],e=0;e<n;e++)i.push(t.a[e].replace(/ /g,"+"));return n=t.c+"?family="+i.join("%7C"),0<t.f.length&&(n+="&subset="+t.f.join(",")),0<t.g.length&&(n+="&text="+encodeURIComponent(t.g)),n}(e),d(n)),g(n,function(){t(a.a,a.c,Z)})},tt.prototype.load=function(t){var n=this.a.id,i=this.c.o;n?u(this.c,(this.a.api||"https://use.typekit.net")+"/"+n+".js",function(n){if(n)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){n=i.Typekit.config.fn;for(var e=[],o=0;o<n.length;o+=2)for(var a=n[o],s=n[o+1],r=0;r<s.length;r++)e.push(new m(a,s[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(e)}},2e3):t([])},nt.prototype.load=function(t){var n=this.f.id,i=this.c.o,e=this;n?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[n]=function(n,i){for(var o=0,a=i.fonts.length;o<a;++o){var s=i.fonts[o];e.a.push(new m(s.name,j("font-weight:"+s.weight+";font-style:"+s.style)))}t(e.a)},u(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+n+".js",function(n){n&&t([])})):t([])};var it=new H(window);it.a.c.custom=function(t,n){return new G(n,t)},it.a.c.fontdeck=function(t,n){return new nt(n,t)},it.a.c.monotype=function(t,n){return new z(n,t)},it.a.c.typekit=function(t,n){return new tt(n,t)},it.a.c.google=function(t,n){return new Y(n,t)};var et={load:i(it.load,it)};"function"==typeof define&&define.amd?define(function(){return et}):"undefined"!=typeof module&&module.exports?module.exports=et:(window.WebFont=et,window.WebFontConfig&&it.load(window.WebFontConfig))}();

},{}]},{},["matches-polyfill","raf-polyfill","fullscreen-polyfill","math-sign-polyfill","/Users/pablo/Work/projects/folio/folio-workspace-assets/src/js/app/App.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvY29sb3ItY29udmVydC9jb252ZXJzaW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9jb2xvci1jb252ZXJ0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2NvbG9yLWNvbnZlcnQvcm91dGUuanMiLCJub2RlX21vZHVsZXMvY29sb3ItbmFtZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jb2xvci1zdHJpbmcvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMucnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvYmFzZS5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvZGVjb3JhdG9ycy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvZGVjb3JhdG9ycy9pbmxpbmUuanMiLCJub2RlX21vZHVsZXMvaGFuZGxlYmFycy9kaXN0L2Nqcy9oYW5kbGViYXJzL2V4Y2VwdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvaGVscGVycy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvaGVscGVycy9ibG9jay1oZWxwZXItbWlzc2luZy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvaGVscGVycy9lYWNoLmpzIiwibm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy9oZWxwZXJzL2hlbHBlci1taXNzaW5nLmpzIiwibm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy9oZWxwZXJzL2lmLmpzIiwibm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy9oZWxwZXJzL2xvZy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvaGVscGVycy9sb29rdXAuanMiLCJub2RlX21vZHVsZXMvaGFuZGxlYmFycy9kaXN0L2Nqcy9oYW5kbGViYXJzL2hlbHBlcnMvd2l0aC5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvbG9nZ2VyLmpzIiwibm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy9uby1jb25mbGljdC5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL2Rpc3QvY2pzL2hhbmRsZWJhcnMvc2FmZS1zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvaGFuZGxlYmFycy9kaXN0L2Nqcy9oYW5kbGViYXJzL3V0aWxzLmpzIiwibm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvc2ltcGxlLXN3aXp6bGUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc2ltcGxlLXN3aXp6bGUvbm9kZV9tb2R1bGVzL2lzLWFycmF5aXNoL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2Rhc2hlcml6ZS5qcyIsIm5vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9oZWxwZXIvZGVmYXVsdFRvV2hpdGVTcGFjZS5qcyIsIm5vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9oZWxwZXIvZXNjYXBlUmVnRXhwLmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2hlbHBlci9tYWtlU3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUuc3RyaW5nL2hlbHBlci9zdHJSZXBlYXQuanMiLCJub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvbHBhZC5qcyIsIm5vZGVfbW9kdWxlcy91bmRlcnNjb3JlLnN0cmluZy9wYWQuanMiLCJub2RlX21vZHVsZXMvdW5kZXJzY29yZS5zdHJpbmcvdHJpbS5qcyIsInNyYy9qcy9hcHAvQXBwLmpzIiwic3JjL2pzL2FwcC9jb250cm9sL0NvbnRyb2xsZXIuanMiLCJzcmMvanMvYXBwL2NvbnRyb2wvR2xvYmFscy5qcyIsInNyYy9qcy9hcHAvbW9kZWwvQXBwU3RhdGUuanMiLCJzcmMvanMvYXBwL21vZGVsL0Jhc2VJdGVtLmpzIiwic3JjL2pzL2FwcC9tb2RlbC9CYXNlTW9kZWwuanMiLCJzcmMvanMvYXBwL21vZGVsL1NlbGVjdGFibGVDb2xsZWN0aW9uLmpzIiwic3JjL2pzL2FwcC9tb2RlbC9jb2xsZWN0aW9uL0FydGljbGVDb2xsZWN0aW9uLmpzIiwic3JjL2pzL2FwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb24uanMiLCJzcmMvanMvYXBwL21vZGVsL2NvbGxlY3Rpb24vS2V5d29yZENvbGxlY3Rpb24uanMiLCJzcmMvanMvYXBwL21vZGVsL2NvbGxlY3Rpb24vVHlwZUNvbGxlY3Rpb24uanMiLCJzcmMvanMvYXBwL21vZGVsL2hlbHBlci9ib290c3RyYXAuanMiLCJzcmMvanMvYXBwL21vZGVsL2l0ZW0vQXJ0aWNsZUl0ZW0uanMiLCJzcmMvanMvYXBwL21vZGVsL2l0ZW0vQnVuZGxlSXRlbS5qcyIsInNyYy9qcy9hcHAvbW9kZWwvaXRlbS9LZXl3b3JkSXRlbS5qcyIsInNyYy9qcy9hcHAvbW9kZWwvaXRlbS9NZWRpYUl0ZW0uanMiLCJzcmMvanMvYXBwL21vZGVsL2l0ZW0vU291cmNlSXRlbS5qcyIsInNyYy9qcy9hcHAvbW9kZWwvaXRlbS9UeXBlSXRlbS5qcyIsInNyYy9qcy9hcHAvdmlldy9BcHBWaWV3LmpzIiwic3JjL2pzL2FwcC92aWV3L0NvbnRlbnRWaWV3LmpzIiwic3JjL2pzL2FwcC92aWV3L05hdmlnYXRpb25WaWV3LmpzIiwic3JjL2pzL2FwcC92aWV3L2Jhc2UvQ2FsbGJhY2tRdWV1ZS5qcyIsInNyYy9qcy9hcHAvdmlldy9iYXNlL0NhbnZhc1ZpZXcuanMiLCJzcmMvanMvYXBwL3ZpZXcvYmFzZS9JbnRlcnBvbGF0b3IuanMiLCJzcmMvanMvYXBwL3ZpZXcvYmFzZS9QcmVmaXhlZEV2ZW50cy5qcyIsInNyYy9qcy9hcHAvdmlldy9iYXNlL1RvdWNoTWFuYWdlci5qcyIsInNyYy9qcy9hcHAvdmlldy9iYXNlL1ZpZXcuanMiLCJzcmMvanMvYXBwL3ZpZXcvYmFzZS9WaWV3RXJyb3IuanMiLCJzcmMvanMvYXBwL3ZpZXcvY29tcG9uZW50L0FydGljbGVCdXR0b24uaGJzIiwic3JjL2pzL2FwcC92aWV3L2NvbXBvbmVudC9BcnRpY2xlQnV0dG9uLmpzIiwic3JjL2pzL2FwcC92aWV3L2NvbXBvbmVudC9BcnRpY2xlVmlldy5qcyIsInNyYy9qcy9hcHAvdmlldy9jb21wb25lbnQvQ2FudmFzUHJvZ3Jlc3NNZXRlci5qcyIsInNyYy9qcy9hcHAvdmlldy9jb21wb25lbnQvQ2Fyb3VzZWwuanMiLCJzcmMvanMvYXBwL3ZpZXcvY29tcG9uZW50L0NvbGxlY3Rpb25TdGFjay5oYnMiLCJzcmMvanMvYXBwL3ZpZXcvY29tcG9uZW50L0NvbGxlY3Rpb25TdGFjay5qcyIsInNyYy9qcy9hcHAvdmlldy9jb21wb25lbnQvRmlsdGVyYWJsZUxpc3RWaWV3LmpzIiwic3JjL2pzL2FwcC92aWV3L2NvbXBvbmVudC9HcmFwaFZpZXcuanMiLCJzcmMvanMvYXBwL3ZpZXcvY29tcG9uZW50L0dyb3VwaW5nTGlzdFZpZXcuanMiLCJzcmMvanMvYXBwL3ZpZXcvY29tcG9uZW50L1BsYXlUb2dnbGVTeW1ib2wuanMiLCJzcmMvanMvYXBwL3ZpZXcvY29tcG9uZW50L1NlbGVjdGFibGVMaXN0Vmlldy5qcyIsInNyYy9qcy9hcHAvdmlldy9oZWxwZXIvY3JlYXRlQ29sb3JTdHlsZVNoZWV0LmpzIiwic3JjL2pzL2FwcC92aWV3L3Byb21pc2UvX2xvYWRJbWFnZUFzT2JqZWN0VVJMLmpzIiwic3JjL2pzL2FwcC92aWV3L3Byb21pc2UvX3doZW5JbWFnZUxvYWRzLmpzIiwic3JjL2pzL2FwcC92aWV3L3Byb21pc2Uvd2hlbkRlZmF1bHRJbWFnZUxvYWRzLmpzIiwic3JjL2pzL2FwcC92aWV3L3Byb21pc2Uvd2hlblNjcm9sbGluZ0VuZHMuanMiLCJzcmMvanMvYXBwL3ZpZXcvcHJvbWlzZS93aGVuU2VsZWN0aW9uRGlzdGFuY2VJcy5qcyIsInNyYy9qcy9hcHAvdmlldy9wcm9taXNlL3doZW5TZWxlY3Rpb25Jc0NvbnRpZ3VvdXMuanMiLCJzcmMvanMvYXBwL3ZpZXcvcHJvbWlzZS93aGVuVmlld0lzQXR0YWNoZWQuanMiLCJzcmMvanMvYXBwL3ZpZXcvcHJvbWlzZS93aGVuVmlld0lzUmVuZGVyZWQuanMiLCJzcmMvanMvYXBwL3ZpZXcvcmVuZGVyL0Nhcm91c2VsUmVuZGVyZXIuanMiLCJzcmMvanMvYXBwL3ZpZXcvcmVuZGVyL0NsaWNrYWJsZVJlbmRlcmVyLmpzIiwic3JjL2pzL2FwcC92aWV3L3JlbmRlci9EZWZhdWx0U2VsZWN0YWJsZVJlbmRlcmVyLmhicyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvRGVmYXVsdFNlbGVjdGFibGVSZW5kZXJlci5qcyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvRG90TmF2aWdhdGlvblJlbmRlcmVyLmhicyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvRG90TmF2aWdhdGlvblJlbmRlcmVyLmpzIiwic3JjL2pzL2FwcC92aWV3L3JlbmRlci9JbWFnZVJlbmRlcmVyLmhicyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvSW1hZ2VSZW5kZXJlci5qcyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvTGFiZWxSZW5kZXJlci5qcyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvTWVkaWFSZW5kZXJlci5qcyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvUGxheWFibGVSZW5kZXJlci5qcyIsInNyYy9qcy9hcHAvdmlldy9yZW5kZXIvU2VxdWVuY2VSZW5kZXJlci5oYnMiLCJzcmMvanMvYXBwL3ZpZXcvcmVuZGVyL1NlcXVlbmNlUmVuZGVyZXIuanMiLCJzcmMvanMvYXBwL3ZpZXcvcmVuZGVyL1ZpZGVvUmVuZGVyZXIuaGJzIiwic3JjL2pzL2FwcC92aWV3L3JlbmRlci9WaWRlb1JlbmRlcmVyLmpzIiwic3JjL2pzL2FwcC92aWV3L3RlbXBsYXRlL0Nhcm91c2VsLkVtcHR5UmVuZGVyZXIuQnVuZGxlLmhicyIsInNyYy9qcy9hcHAvdmlldy90ZW1wbGF0ZS9Db2xsZWN0aW9uU3RhY2suTWVkaWEuaGJzIiwic3JjL2pzL2FwcC92aWV3L3RlbXBsYXRlL0Vycm9yQmxvY2suaGJzIiwic3JjL2pzL2FwcC92aWV3L3RlbXBsYXRlL19oZWxwZXJzLmpzIiwic3JjL2pzL2FwcC92aWV3L3RlbXBsYXRlL3N2Zy9GdWxsc2NyZWVuU3ltYm9sLmhicyIsInNyYy9qcy91dGlscy9UaW1lci5qcyIsInNyYy9qcy91dGlscy9UcmFuc2Zvcm1IZWxwZXIuanMiLCJzcmMvanMvdXRpbHMvVHJhbnNmb3JtSXRlbS5qcyIsInNyYy9qcy91dGlscy9hcnJheS9kaWZmZXJlbmNlLmpzIiwic3JjL2pzL3V0aWxzL2NhbnZhcy9DYW52YXNIZWxwZXIuanMiLCJzcmMvanMvdXRpbHMvY2FudmFzL2JpdG1hcC9CbHVyU3RhY2suanMiLCJzcmMvanMvdXRpbHMvY2FudmFzL2JpdG1hcC9kZXNhdHVyYXRlLmpzIiwic3JjL2pzL3V0aWxzL2NhbnZhcy9iaXRtYXAvZ2V0QXZlcmFnZVJHQi5qcyIsInNyYy9qcy91dGlscy9jYW52YXMvYml0bWFwL211bF90YWJsZS5qcyIsInNyYy9qcy91dGlscy9jYW52YXMvYml0bWFwL211bHRpcGx5LmpzIiwic3JjL2pzL3V0aWxzL2NhbnZhcy9iaXRtYXAvc2hnX3RhYmxlLmpzIiwic3JjL2pzL3V0aWxzL2NhbnZhcy9iaXRtYXAvc3RhY2tCbHVyUkdCLmpzIiwic3JjL2pzL3V0aWxzL2NhbnZhcy9jYWxjQXJjSENvbm5lY3Rvci5qcyIsInNyYy9qcy91dGlscy9jc3MvZ2V0Qm94RWRnZVN0eWxlcy5qcyIsInNyYy9qcy91dGlscy9lYXNlL2ZuL2Vhc2VJblF1YWQuanMiLCJzcmMvanMvdXRpbHMvZWFzZS9mbi9lYXNlT3V0UXVhZC5qcyIsInNyYy9qcy91dGlscy9lYXNlL2ZuL2xpbmVhci5qcyIsInNyYy9qcy91dGlscy9nZW9tL2luZmxhdGVSZWN0LmpzIiwic3JjL2pzL3V0aWxzL3ByZWZpeGVkRXZlbnQuanMiLCJzcmMvanMvdXRpbHMvcHJlZml4ZWRQcm9wZXJ0eS5qcyIsInNyYy9qcy91dGlscy9wcmVmaXhlZFN0eWxlTmFtZS5qcyIsInNyYy9qcy91dGlscy9wcmVmaXhlcy5qcyIsInNyYy9qcy91dGlscy9wcm9taXNlL3JlamVjdEFsbC5qcyIsInNyYy9qcy91dGlscy9wcm9taXNlL3Jlc29sdmVBbGwuanMiLCJzcmMvanMvdXRpbHMvc3RyaW5ncy9jYW1lbFRvRGFzaGVkLmpzIiwic3JjL2pzL3V0aWxzL3N0cmluZ3Mvc3RyaXBUYWdzLmpzIiwic3JjL2pzL3V0aWxzL3RvdWNoL1Ntb290aFBhblJlY29nbml6ZXIuanMiLCJzcmMvc2Fzcy92YXJpYWJsZXMuanNvbiIsImJhY2tib25lLm11dGF0b3JzLmpzIiwiYmFja2JvbmUuYmFieXNpdHRlci5qcyIsImJhY2tib25lLm5hdGl2ZS5qcyIsImJhY2tib25lLmpzIiwiaW5kZXguanMiLCJlczYtcHJvbWlzZS9hdXRvLmpzIiwic3JjL2pzL3NoaW1zL2Z1bGxzY3JlZW4uanMiLCJoYW1tZXIuanMiLCJoYnNmeS9ydW50aW1lLmpzIiwic3JjL2pzL3NoaW1zL21hdGNoZXNTZWxlY3Rvci5qcyIsInNyYy9qcy9zaGltcy9tYXRoLXNpZ24tcG9seWZpbGwuanMiLCJzcmMvanMvc2hpbXMvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIiwibm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ1bmRlcnNjb3JlLmpzIiwid2ViZm9udGxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0NBLElBQUksWUFBYyxRQUFRLGNBTXRCLGdCQUFrQixHQUN0QixJQUFLLElBQUksT0FBTyxZQUNYLFlBQVksZUFBZSxPQUM5QixnQkFBZ0IsWUFBWSxNQUFRLEtBSXRDLElBQUksUUFBVSxPQUFPLFFBQVUsQ0FDOUIsSUFBSyxDQUFDLFNBQVUsRUFBRyxPQUFRLE9BQzNCLElBQUssQ0FBQyxTQUFVLEVBQUcsT0FBUSxPQUMzQixJQUFLLENBQUMsU0FBVSxFQUFHLE9BQVEsT0FDM0IsSUFBSyxDQUFDLFNBQVUsRUFBRyxPQUFRLE9BQzNCLEtBQU0sQ0FBQyxTQUFVLEVBQUcsT0FBUSxRQUM1QixJQUFLLENBQUMsU0FBVSxFQUFHLE9BQVEsT0FDM0IsSUFBSyxDQUFDLFNBQVUsRUFBRyxPQUFRLE9BQzNCLElBQUssQ0FBQyxTQUFVLEVBQUcsT0FBUSxPQUMzQixJQUFLLENBQUMsU0FBVSxFQUFHLE9BQVEsQ0FBQyxRQUM1QixRQUFTLENBQUMsU0FBVSxFQUFHLE9BQVEsQ0FBQyxZQUNoQyxPQUFRLENBQUMsU0FBVSxFQUFHLE9BQVEsQ0FBQyxXQUMvQixRQUFTLENBQUMsU0FBVSxFQUFHLE9BQVEsQ0FBQyxZQUNoQyxJQUFLLENBQUMsU0FBVSxFQUFHLE9BQVEsQ0FBQyxJQUFLLElBQUssTUFDdEMsTUFBTyxDQUFDLFNBQVUsRUFBRyxPQUFRLENBQUMsTUFBTyxNQUFPLFFBQzVDLEtBQU0sQ0FBQyxTQUFVLEVBQUcsT0FBUSxDQUFDLFVBSTlCLElBQUssSUFBSSxTQUFTLFFBQ2pCLEdBQUksUUFBUSxlQUFlLE9BQVEsQ0FDbEMsS0FBTSxhQUFjLFFBQVEsUUFDM0IsTUFBTSxJQUFJLE1BQU0sOEJBQWdDLE9BR2pELEtBQU0sV0FBWSxRQUFRLFFBQ3pCLE1BQU0sSUFBSSxNQUFNLG9DQUFzQyxPQUd2RCxHQUFJLFFBQVEs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QUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQzNFLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSzs7O0FDMUR4RSxhQUNBLE9BQU8sUUFBVSxTQUFTLEVBQVEsR0FFakMsSUFEQSxJQUFJLEVBQUksRUFBTyxLQUNOLEVBQUksRUFBRyxFQUFJLEVBQUUsT0FBUSxHQUFLLEVBQ2xDLEVBQUUsSUFBTSxFQUNSLEVBQUUsRUFBSSxJQUFNLEVBQ1osRUFBRSxFQUFJLElBQU0sRUFFYixPQUFPOzs7QUNSUixhQTBDQSxPQUFPLFFBQVUsQ0FDZixFQUFHLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUMzRCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUM1RCxHQUFJLEdBQUksR0FBSSxHQUFJ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RSxLQUFLLFFBQVEsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLFVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLEVBQUUsR0FBRyxPQUFjLEVBQUUsRUFBRyxTQUFTLEVBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsU0FBUyxnQkFBZ0IsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEtBQUssR0FBRSxJQUFLLEVBQUUsT0FBTyxLQUFLLEdBQUUsSUFBSyxFQUFFLFFBQTBFLFNBQVMsRUFBRSxHQUFHLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssV0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssWUFBWSxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLGFBQWEsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxZQUFZLFNBQVMsRUFBRSxFQUFFLEVBQUUsR0FBTSxFQUFFLEdBQUcsRUFBRSxFQUFFLEtBQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFTLEVBQUUsRUFBRSxNQUFNLFNBQVMsSUFBSyxLQUFLLEVBQUUsR0FBZ0gsU0FBUyxFQUFFLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLGNBQWMsUUFBUSxLQUFLLEdBQUcsU0FBUyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsU0FBUyxFQUFFLEdBQUcsTUFBTSw0TEFBNEwsRUFBRSxFQUFFLEdBQUcsZUFBbUIsRUFBRSxHQUFHLGdCQUFpQixFQUFFLEVBQUUsTUFBWSxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFF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QUUsSUFBSSxPQUFNLEVBQUcsT0FBTSxFQUFHLFNBQVMsRUFBRSxHQUFHLElBQTRDLEVBQXhDLEVBQUUsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLEVBQUUsRUFBRSxFQUFFLGFBQWUsRUFBRSxJQUFJLEVBQUUsRUFBRSxPQUFPLElBQUksRUFBRSxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxLQUFLLEVBQUcsRUFBRSxFQUFFLEtBQUssT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLGVBQWUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFrQixTQUFZLEdBQUcsV0FBVyxFQUFFLFdBQVcsRUFBRSxPQUFPLEdBQUcsSUFBbEUsQ0FBRyxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQTBELFNBQVMsRUFBRSxFQUFFLEdBQUcsV0FBVyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssSUFBSSxHQUFHLEdBQUksU0FBUyxFQUFFLEVBQUUsRUFBRSxHQUFHLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEdBQUUsRUFBRyxLQUFLLEVBQUUsRUFEblEsRUFBRSxVQUFVLE1BQU0sV0FBVyxLQUFLLEVBQUUsTUFBTSxLQUFLLEVBQUUsRUFBRSxZQUFZLEtBQUssRUFBRSxjQUFjLEtBQUssRUFBRSxFQUFFLFlBQVksS0FBSyxFQUFFLElBQUksRUFBRSxPQUMrSSxJQUFJLEVBQUUsS0FDL1QsU0FBUyxFQUFHLEdBQUcsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBRyxFQUFFLEVBQUUsR0FBSSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxXQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxXQUFXLEVBQUUsRUFBRSxFQUFFLEtBQUssY0FBYyxFQUFFLEVBQUUsV0FBVyxFQUFFLEVBQUUsSUFBSyxTQUFTLEVBQUcsR0FBRyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFHLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEdBQUUsRUFDMWMsU0FBUyxFQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxXQUFXLFdBQVcsSUFBSSxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQVMsR0FBRyxHQUFHLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFLEdBQUcsRUFBRSxPQUFPLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSSxFQUFFLEVBQUUsR0FBRyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBc0YsR0FBcEYsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLFdBQVcsYUFBYSxFQUFFLEVBQUUsY0FBYyxHQUFHLEVBQUUsS0FBUSxPQUFPLEVBQUUsR0FBRyxPQUFPLFNBQVMsQ0FBSyxFQUFFLHdCQUF3QixLQUFLLE9BQU8sVUFBVSxXQUFwRCxJQUErRCxFQUFHLDhCQUE4QixLQUFLLE9BQU8sVUFBVSxZQUFZLFFBQVEsS0FBSyxPQUFPLFVBQVUsUUFDamYsRUFBRSxFQUFFLEdBQUcsU0FBUyxFQUFFLEdBQUcsS0FBSSxPQUFjLEdBQUUsRUFBSyxFQUFGLEVBQUksSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBSyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEdBQUcsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sSUFBSSxFQUFFLEdBQUcsVUFBVSxHQUF5SyxTQUFTLEVBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUU5UyxTQUFTLEVBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUF1VixTQUFTLEVBQUcsRUFBRSxHQUFLLEtBQUssRUFBUCxHQUFrQixFQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEdBTHVELEVBQUUsVUFBVSxFQUFFLFNBQVMsR0FBRyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxXQUFXLFdBQVcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsV0FBVyxXQUFXLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxXQUFXLGNBQWMsRUFBRSxFQUFFLGFBQWEsR0FBRyxLQUFLLEdBQUUsRUFBRyxFQUFHLE9BQ254QixFQUFFLFVBQVUsRUFBRSxTQUFTLEdBQUcsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsV0FBVyxXQUFXLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLFdBQVcsWUFBWSxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsV0FBVyxhQUFhLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsZUFBZSxHQUFHLEVBQUcsT0FBMk4sRUFBRyxVQUFVLEtBQUssU0FBUyxHQUFHLEtBQUssRUFBRSxJQUFJLEVBQUcsS0FBSyxFQUFFLEVBQUUsU0FBUyxLQUFLLEdBQUcsS0FBSyxHQUFFLElBQUssRUFBRSxPQUFPLEtBQUssR0FBRSxJQUFLLEVBQUUsUUFFclksU0FBWSxFQUFFLEVBQUUsR0FBRyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsU0FMd0wsU0FBWSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssYUFBYSxFQUFFLEVBQUUsV0FLdk8sQ0FBRyxHQUFHLElBQUksRUFMMGQsU0FBWSxFQUFFLEVBQUUsR0FBRyxJQUFTLEVBQUwsRUFBRSxHQUFLLElBQUksS0FBSyxFQUFFLEdBQUcsRUFBRSxlQUFlLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsSUFBSSxPQUFPLEVBS2xrQixDQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFvQixJQUFqQixFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsS0FBSyxTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUY2TyxDQUFHLEtBQUssSUFBSSxFQUFHLEtBQUssRUFBRSxHQUFHLElBR3ZsQixFQUFHLFVBQVUsS0FBSyxTQUFTLEdBQWtTLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsUUFBUSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEdBQUcsRUFBRSxFQUFFLEtBQUssZ0NBQWdDLElBQUksRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksU0FBUyxHQUFHLEVBQUUsRUFBRSxLQUFLLEVBQUUsNEJBQzdkLEdBQUcsV0FBVyxPQUFPLEVBQUUsR0FETyxTQUFTLElBQUksR0FBRyxFQUFFLGVBQWUsR0FBRyxDQUFDLElBQWlDLEVBQTdCLEVBQUUsRUFBRSxlQUFlLEtBQUssRUFBRSxHQUFLLEdBQUcsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUFHLFdBQVcsTUFBUSxFQUFFLEdBQUcsV0FBVyxNQUFRLEVBQUUsR0FBRyxZQUFZLEVBQUUsRUFBRSxHQUFHLFVBQVUsRUFBRSxHQUFHLFdBQVcsRUFBRSxLQUFLLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLElBQUksRUFBRSxJQUFJLEVBQUUsUUFBUSxXQUFXLFdBQVcsS0FBSyxJQUMvUixNQUFPLEdBQUcsd0JBQXdCLE9BQU8sRUFBRSxLQUF3QyxFQUFHLFVBQVUsS0FBSyxTQUFTLEdBQUcsSUFBSSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxHQUFHLEVBQUUsS0FBSyxFQUFFLFVBQVUsR0FBRyxFQUFFLEtBQUssRUFBRSxhQUFhLEdBQUcsRUFBRSxJQUFJLEVBQU0sSUFBSixFQUFFLEVBQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxJQUFJLEVBQUUsR0FBTyxJQUFKLEVBQUUsRUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxJQUFHLEVBQUUsRUFBRSxHQUFHLE1BQU0sTUFBTyxHQUFHLElBQUksSUFBSSxFQUFFLEVBQUUsR0FBRyxNQUFNLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEdBQUcsRUFBRSxFQUFFLEtBQUssSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxLQUFLLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLE1BQTZFLElBQUksRUFBRyxtQ0FDek4sU0FBUyxFQUFHLEdBQUcsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQ2hXLElBQUksRUFBRyxDQUFDLE1BQU0sVUFBVSxZQUFZLFFBQWlDLFNBQVMsTUFBcUIsTUFBTSxNQUFxQixNQUFNLE1BQXFCLFFBQVEsT0FBc0IsRUFBRyxDQUFDLEtBQUssSUFBSSxXQUFXLElBQUksY0FBYyxJQUFJLFdBQVcsSUFBSSxjQUFjLElBQUksTUFBTSxJQUFJLFFBQVEsSUFBSSxLQUFLLElBQUksT0FBTyxJQUFJLFlBQVksSUFBSSxTQUFTLElBQUksWUFBWSxJQUFJLFNBQVMsSUFBSSxLQUFLLElBQUksYUFBYSxJQUFJLFVBQVUsSUFBSSxhQUFhLElBQUksVUFBVSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRyxDQUFDLEVBQUUsSUFBSSxPQUFPLElBQUksRUFBRSxJQUFJLE9BQU8sS0FDMWYsRUFBRywrSUFFcUgsU0FBUyxFQUFHLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUcsQ0FBQyxPQUFNLEVBQUcsU0FBUSxFQUFHLE9BQU0sR0FBd0wsU0FBUyxHQUFHLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBb1osU0FBUyxHQUFHLEVBQUUsR0FBRyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBbnBCLEVBQUcsVUFBVSxLQUFLLFNBQVMsR0FBRyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFHLEtBQUssRUFBRSxJQUFJLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFVBTHFSLFNBQVksRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUFHLE1BQU0sS0FBSyxHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sSUFBSSxFQUFFLEdBQUcsR0FBRyxFQUFFLFFBQVEsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxLQUsxYSxDQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsSUFBSSxFQUFHLElBRDVULFNBQVksR0FBRyxJQUFJLElBQUksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsTUFBTSxLQUFLLEVBQUUsRUFBRSxHQUFHLFFBQVEsTUFBTSxLQUFLLEVBQUUsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQWtCLEdBQUwsRUFBRSxHQUFULEVBQUUsRUFBRSxHQUFhLElBQUksSUFBSSxFQUFlLEdBQWYsRUFBRSxFQUFFLE1BQU0sTUFBUyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBUyxJQUFQLEVBQUUsRUFBRSxJQUFRLE1BQU0sWUFBNEMsR0FBRyxPQUE5QixFQUFFLEVBQUcsS0FBSyxFQUFFLGdCQUEwQixFQUFFLE9BQU8sQ0FBMEMsR0FBbEMsRUFBRSxPQUFULEVBQUUsRUFBRSxLQUFjLElBQUksRUFBRSxJQUFJLEVBQUcsR0FBYSxPQUFWLEVBQUUsRUFBRSxLQUFlLElBQUksRUFBRSxFQUFFLFNBQVMsSUFBSSxFQUFFLEVBQUcsR0FBRyxFQUFFLElBQUksTUFBTSxHQUFHLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEtBQUssU0FBVSxFQUFFLEdBQUcsR0FBRyxFQUFFLEtBQUssR0FBRyxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsR0FBRyxFQUFFLFNBQWdCLEVBQUUsR0FDbGUsR0FEcWUsR0FBWixFQUFFLEVBQUUsSUFBWSxFQUFFLE1BQU0sS0FDbmYsR0FBTSxTQUFTLEVBQUUsRUFBRyxFQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUcsSUFBa0MsSUFBOUIsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFHLE1BQU0sRUFBRSxFQUFFLEdBQUcsR0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUUsRUFBRSxLQUFLLElBQUksRUFBRSxFQUFFLEVBQUUsTUFBOE0sQ0FBRyxHQUFHLEVBQUUsRUFKdlUsU0FBWSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsT0FBTyxNQUFNLE1BQU0scUJBQXFCLElBQUksR0FBRyxFQUFFLEVBQUUsUUFBUSxRQUFRLE9BQU8sRUFBRSxFQUFFLElBQUksSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxHQUFHLFFBQVEsS0FBSyxNQUFxSSxPQUEvSCxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsS0FBSyxPQUFPLEVBQUUsRUFBRSxFQUFFLFNBQVMsR0FBRyxXQUFXLEVBQUUsRUFBRSxLQUFLLE1BQU0sRUFBRSxFQUFFLEVBQUUsU0FBUyxHQUFHLFNBQVMsbUJBQW1CLEVBQUUsSUFBVyxFQUlxQixDQUFHLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUEwQyxHQUFHLFVBQVUsS0FBSyxTQUFTLEdBQUcsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssR0FBRyxLQUFLLEVBQUUsS0FBSywyQkFBMkIsSUFBSSxFQUFFLE1BQU0sU0FBUyxHQUFHLEdBQUcsRUFBRSxFQUFFLFNBQVMsR0FBRyxFQUFFLFNBQVMsRUFBRSxRQUFRLFFBQVEsRUFBRSxRQUFRLE9BQU8sR0FBRyxDQUFDLEVBQUUsRUFBRSxRQUFRLE9BQU8sR0FBRyxJQUFJLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxHQUFHLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLElBQUksRUFBRSxLQUFLLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsUUFBTyxFQUFHLFNBQVEsRUFBRyxPQUFNLElBQUssTUFBTSxJQUFJLEVBQUUsS0FBSyxLQUFLLEVBQUUsS0FBa0QsR0FBRyxVQUFVLEtBQUssU0FBUyxHQUFHLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxHQUFHLEVBQUUsNEJBQTRCLEVBQUUsMEJBQTBCLElBQUksRUFBRSwwQkFBMEIsR0FBRyxTQUFTLEVBQUUsR0FBRyxJQUFJLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxNQUFNLEdBQUcsRUFBRSxFQUFFLEtBQUssSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFHLGVBQWUsRUFBRSxPQUFPLGVBQWUsRUFBRSxTQUFTLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxHQUFHLEtBQUssRUFBRSxLQUFLLG9DQWRycUMsU0FBWSxHQUFHLE9BQU8sRUFBRSxFQUFFLFNBQVMsVUFBVSxFQUFFLEVBQUUsU0FBUyxTQWMrb0MsQ0FBRyxLQUFLLEdBQUcsSUFBSSxFQUFFLE1BQU0sU0FBUyxHQUFHLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSyxJQUFJLEdBQUUsSUFBSSxFQUFHLFFBQVEsR0FBRSxFQUFFLEVBQUUsT0FBTyxTQUFTLEVBQUUsR0FBRyxPQUFPLElBQUksRUFBRyxFQUFFLElBQUksR0FBRSxFQUFFLEVBQUUsU0FBUyxTQUFTLEVBQUUsR0FBRyxPQUFPLElBQUksR0FBRyxFQUFFLElBQUksR0FBRSxFQUFFLEVBQUUsU0FBUyxTQUFTLEVBQUUsR0FBRyxPQUFPLElBQUksRUFBRyxFQUFFLElBQUksR0FBRSxFQUFFLEVBQUUsUUFBUSxTQUFTLEVBQUUsR0FBRyxPQUFPLElBQUksR0FBRyxFQUFFLElBQUksR0FBRSxFQUFFLEVBQUUsT0FBTyxTQUFTLEVBQUUsR0FBRyxPQUFPLElBQUksRUFBRyxFQUFFLElBQUksSUFBSSxHQUFFLENBQUMsS0FBSyxFQUFFLEdBQUUsS0FBSyxLQUFJLG1CQUFvQixRQUFRLE9BQU8sSUFBSSxPQUFPLFdBQVcsT0FBTyxLQUFJLG9CQUFxQixRQUFRLE9BQU8sUUFBUSxPQUFPLFFBQVEsSUFBRyxPQUFPLFFBQVEsR0FBRSxPQUFPLGVBQWUsR0FBRSxLQUFLLE9BQU8sZ0JBaEJ0b0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKiBNSVQgbGljZW5zZSAqL1xudmFyIGNzc0tleXdvcmRzID0gcmVxdWlyZSgnY29sb3ItbmFtZScpO1xuXG4vLyBOT1RFOiBjb252ZXJzaW9ucyBzaG91bGQgb25seSByZXR1cm4gcHJpbWl0aXZlIHZhbHVlcyAoaS5lLiBhcnJheXMsIG9yXG4vLyAgICAgICB2YWx1ZXMgdGhhdCBnaXZlIGNvcnJlY3QgYHR5cGVvZmAgcmVzdWx0cykuXG4vLyAgICAgICBkbyBub3QgdXNlIGJveCB2YWx1ZXMgdHlwZXMgKGkuZS4gTnVtYmVyKCksIFN0cmluZygpLCBldGMuKVxuXG52YXIgcmV2ZXJzZUtleXdvcmRzID0ge307XG5mb3IgKHZhciBrZXkgaW4gY3NzS2V5d29yZHMpIHtcblx0aWYgKGNzc0tleXdvcmRzLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRyZXZlcnNlS2V5d29yZHNbY3NzS2V5d29yZHNba2V5XV0gPSBrZXk7XG5cdH1cbn1cblxudmFyIGNvbnZlcnQgPSBtb2R1bGUuZXhwb3J0cyA9IHtcblx0cmdiOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ3JnYid9LFxuXHRoc2w6IHtjaGFubmVsczogMywgbGFiZWxzOiAnaHNsJ30sXG5cdGhzdjoge2NoYW5uZWxzOiAzLCBsYWJlbHM6ICdoc3YnfSxcblx0aHdiOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ2h3Yid9LFxuXHRjbXlrOiB7Y2hhbm5lbHM6IDQsIGxhYmVsczogJ2NteWsnfSxcblx0eHl6OiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ3h5eid9LFxuXHRsYWI6IHtjaGFubmVsczogMywgbGFiZWxzOiAnbGFiJ30sXG5cdGxjaDoge2NoYW5uZWxzOiAzLCBsYWJlbHM6ICdsY2gnfSxcblx0aGV4OiB7Y2hhbm5lbHM6IDEsIGxhYmVsczogWydoZXgnXX0sXG5cdGtleXdvcmQ6IHtjaGFubmVsczogMSwgbGFiZWxzOiBbJ2tleXdvcmQnXX0sXG5cdGFuc2kxNjoge2NoYW5uZWxzOiAxLCBsYWJlbHM6IFsnYW5zaTE2J119LFxuXHRhbnNpMjU2OiB7Y2hhbm5lbHM6IDEsIGxhYmVsczogWydhbnNpMjU2J119LFxuXHRoY2c6IHtjaGFubmVsczogMywgbGFiZWxzOiBbJ2gnLCAnYycsICdnJ119LFxuXHRhcHBsZToge2NoYW5uZWxzOiAzLCBsYWJlbHM6IFsncjE2JywgJ2cxNicsICdiMTYnXX0sXG5cdGdyYXk6IHtjaGFubmVsczogMSwgbGFiZWxzOiBbJ2dyYXknXX1cbn07XG5cbi8vIGhpZGUgLmNoYW5uZWxzIGFuZCAubGFiZWxzIHByb3BlcnRpZXNcbmZvciAodmFyIG1vZGVsIGluIGNvbnZlcnQpIHtcblx0aWYgKGNvbnZlcnQuaGFzT3duUHJvcGVydHkobW9kZWwpKSB7XG5cdFx0aWYgKCEoJ2NoYW5uZWxzJyBpbiBjb252ZXJ0W21vZGVsXSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignbWlzc2luZyBjaGFubmVscyBwcm9wZXJ0eTogJyArIG1vZGVsKTtcblx0XHR9XG5cblx0XHRpZiAoISgnbGFiZWxzJyBpbiBjb252ZXJ0W21vZGVsXSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignbWlzc2luZyBjaGFubmVsIGxhYmVscyBwcm9wZXJ0eTogJyArIG1vZGVsKTtcblx0XHR9XG5cblx0XHRpZiAoY29udmVydFttb2RlbF0ubGFiZWxzLmxlbmd0aCAhPT0gY29udmVydFttb2RlbF0uY2hhbm5lbHMpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignY2hhbm5lbCBhbmQgbGFiZWwgY291bnRzIG1pc21hdGNoOiAnICsgbW9kZWwpO1xuXHRcdH1cblxuXHRcdHZhciBjaGFubmVscyA9IGNvbnZlcnRbbW9kZWxdLmNoYW5uZWxzO1xuXHRcdHZhciBsYWJlbHMgPSBjb252ZXJ0W21vZGVsXS5sYWJlbHM7XG5cdFx0ZGVsZXRlIGNvbnZlcnRbbW9kZWxdLmNoYW5uZWxzO1xuXHRcdGRlbGV0ZSBjb252ZXJ0W21vZGVsXS5sYWJlbHM7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnZlcnRbbW9kZWxdLCAnY2hhbm5lbHMnLCB7dmFsdWU6IGNoYW5uZWxzfSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnZlcnRbbW9kZWxdLCAnbGFiZWxzJywge3ZhbHVlOiBsYWJlbHN9KTtcblx0fVxufVxuXG5jb252ZXJ0LnJnYi5oc2wgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHZhciByID0gcmdiWzBdIC8gMjU1O1xuXHR2YXIgZyA9IHJnYlsxXSAvIDI1NTtcblx0dmFyIGIgPSByZ2JbMl0gLyAyNTU7XG5cdHZhciBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcblx0dmFyIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpO1xuXHR2YXIgZGVsdGEgPSBtYXggLSBtaW47XG5cdHZhciBoO1xuXHR2YXIgcztcblx0dmFyIGw7XG5cblx0aWYgKG1heCA9PT0gbWluKSB7XG5cdFx0aCA9IDA7XG5cdH0gZWxzZSBpZiAociA9PT0gbWF4KSB7XG5cdFx0aCA9IChnIC0gYikgLyBkZWx0YTtcblx0fSBlbHNlIGlmIChnID09PSBtYXgpIHtcblx0XHRoID0gMiArIChiIC0gcikgLyBkZWx0YTtcblx0fSBlbHNlIGlmIChiID09PSBtYXgpIHtcblx0XHRoID0gNCArIChyIC0gZykgLyBkZWx0YTtcblx0fVxuXG5cdGggPSBNYXRoLm1pbihoICogNjAsIDM2MCk7XG5cblx0aWYgKGggPCAwKSB7XG5cdFx0aCArPSAzNjA7XG5cdH1cblxuXHRsID0gKG1pbiArIG1heCkgLyAyO1xuXG5cdGlmIChtYXggPT09IG1pbikge1xuXHRcdHMgPSAwO1xuXHR9IGVsc2UgaWYgKGwgPD0gMC41KSB7XG5cdFx0cyA9IGRlbHRhIC8gKG1heCArIG1pbik7XG5cdH0gZWxzZSB7XG5cdFx0cyA9IGRlbHRhIC8gKDIgLSBtYXggLSBtaW4pO1xuXHR9XG5cblx0cmV0dXJuIFtoLCBzICogMTAwLCBsICogMTAwXTtcbn07XG5cbmNvbnZlcnQucmdiLmhzdiA9IGZ1bmN0aW9uIChyZ2IpIHtcblx0dmFyIHIgPSByZ2JbMF07XG5cdHZhciBnID0gcmdiWzFdO1xuXHR2YXIgYiA9IHJnYlsyXTtcblx0dmFyIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpO1xuXHR2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG5cdHZhciBkZWx0YSA9IG1heCAtIG1pbjtcblx0dmFyIGg7XG5cdHZhciBzO1xuXHR2YXIgdjtcblxuXHRpZiAobWF4ID09PSAwKSB7XG5cdFx0cyA9IDA7XG5cdH0gZWxzZSB7XG5cdFx0cyA9IChkZWx0YSAvIG1heCAqIDEwMDApIC8gMTA7XG5cdH1cblxuXHRpZiAobWF4ID09PSBtaW4pIHtcblx0XHRoID0gMDtcblx0fSBlbHNlIGlmIChyID09PSBtYXgpIHtcblx0XHRoID0gKGcgLSBiKSAvIGRlbHRhO1xuXHR9IGVsc2UgaWYgKGcgPT09IG1heCkge1xuXHRcdGggPSAyICsgKGIgLSByKSAvIGRlbHRhO1xuXHR9IGVsc2UgaWYgKGIgPT09IG1heCkge1xuXHRcdGggPSA0ICsgKHIgLSBnKSAvIGRlbHRhO1xuXHR9XG5cblx0aCA9IE1hdGgubWluKGggKiA2MCwgMzYwKTtcblxuXHRpZiAoaCA8IDApIHtcblx0XHRoICs9IDM2MDtcblx0fVxuXG5cdHYgPSAoKG1heCAvIDI1NSkgKiAxMDAwKSAvIDEwO1xuXG5cdHJldHVybiBbaCwgcywgdl07XG59O1xuXG5jb252ZXJ0LnJnYi5od2IgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHZhciByID0gcmdiWzBdO1xuXHR2YXIgZyA9IHJnYlsxXTtcblx0dmFyIGIgPSByZ2JbMl07XG5cdHZhciBoID0gY29udmVydC5yZ2IuaHNsKHJnYilbMF07XG5cdHZhciB3ID0gMSAvIDI1NSAqIE1hdGgubWluKHIsIE1hdGgubWluKGcsIGIpKTtcblxuXHRiID0gMSAtIDEgLyAyNTUgKiBNYXRoLm1heChyLCBNYXRoLm1heChnLCBiKSk7XG5cblx0cmV0dXJuIFtoLCB3ICogMTAwLCBiICogMTAwXTtcbn07XG5cbmNvbnZlcnQucmdiLmNteWsgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHZhciByID0gcmdiWzBdIC8gMjU1O1xuXHR2YXIgZyA9IHJnYlsxXSAvIDI1NTtcblx0dmFyIGIgPSByZ2JbMl0gLyAyNTU7XG5cdHZhciBjO1xuXHR2YXIgbTtcblx0dmFyIHk7XG5cdHZhciBrO1xuXG5cdGsgPSBNYXRoLm1pbigxIC0gciwgMSAtIGcsIDEgLSBiKTtcblx0YyA9ICgxIC0gciAtIGspIC8gKDEgLSBrKSB8fCAwO1xuXHRtID0gKDEgLSBnIC0gaykgLyAoMSAtIGspIHx8IDA7XG5cdHkgPSAoMSAtIGIgLSBrKSAvICgxIC0gaykgfHwgMDtcblxuXHRyZXR1cm4gW2MgKiAxMDAsIG0gKiAxMDAsIHkgKiAxMDAsIGsgKiAxMDBdO1xufTtcblxuLyoqXG4gKiBTZWUgaHR0cHM6Ly9lbi5tLndpa2lwZWRpYS5vcmcvd2lraS9FdWNsaWRlYW5fZGlzdGFuY2UjU3F1YXJlZF9FdWNsaWRlYW5fZGlzdGFuY2VcbiAqICovXG5mdW5jdGlvbiBjb21wYXJhdGl2ZURpc3RhbmNlKHgsIHkpIHtcblx0cmV0dXJuIChcblx0XHRNYXRoLnBvdyh4WzBdIC0geVswXSwgMikgK1xuXHRcdE1hdGgucG93KHhbMV0gLSB5WzFdLCAyKSArXG5cdFx0TWF0aC5wb3coeFsyXSAtIHlbMl0sIDIpXG5cdCk7XG59XG5cbmNvbnZlcnQucmdiLmtleXdvcmQgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHZhciByZXZlcnNlZCA9IHJldmVyc2VLZXl3b3Jkc1tyZ2JdO1xuXHRpZiAocmV2ZXJzZWQpIHtcblx0XHRyZXR1cm4gcmV2ZXJzZWQ7XG5cdH1cblxuXHR2YXIgY3VycmVudENsb3Nlc3REaXN0YW5jZSA9IEluZmluaXR5O1xuXHR2YXIgY3VycmVudENsb3Nlc3RLZXl3b3JkO1xuXG5cdGZvciAodmFyIGtleXdvcmQgaW4gY3NzS2V5d29yZHMpIHtcblx0XHRpZiAoY3NzS2V5d29yZHMuaGFzT3duUHJvcGVydHkoa2V5d29yZCkpIHtcblx0XHRcdHZhciB2YWx1ZSA9IGNzc0tleXdvcmRzW2tleXdvcmRdO1xuXG5cdFx0XHQvLyBDb21wdXRlIGNvbXBhcmF0aXZlIGRpc3RhbmNlXG5cdFx0XHR2YXIgZGlzdGFuY2UgPSBjb21wYXJhdGl2ZURpc3RhbmNlKHJnYiwgdmFsdWUpO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBpdHMgbGVzcywgaWYgc28gc2V0IGFzIGNsb3Nlc3Rcblx0XHRcdGlmIChkaXN0YW5jZSA8IGN1cnJlbnRDbG9zZXN0RGlzdGFuY2UpIHtcblx0XHRcdFx0Y3VycmVudENsb3Nlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuXHRcdFx0XHRjdXJyZW50Q2xvc2VzdEtleXdvcmQgPSBrZXl3b3JkO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBjdXJyZW50Q2xvc2VzdEtleXdvcmQ7XG59O1xuXG5jb252ZXJ0LmtleXdvcmQucmdiID0gZnVuY3Rpb24gKGtleXdvcmQpIHtcblx0cmV0dXJuIGNzc0tleXdvcmRzW2tleXdvcmRdO1xufTtcblxuY29udmVydC5yZ2IueHl6ID0gZnVuY3Rpb24gKHJnYikge1xuXHR2YXIgciA9IHJnYlswXSAvIDI1NTtcblx0dmFyIGcgPSByZ2JbMV0gLyAyNTU7XG5cdHZhciBiID0gcmdiWzJdIC8gMjU1O1xuXG5cdC8vIGFzc3VtZSBzUkdCXG5cdHIgPSByID4gMC4wNDA0NSA/IE1hdGgucG93KCgociArIDAuMDU1KSAvIDEuMDU1KSwgMi40KSA6IChyIC8gMTIuOTIpO1xuXHRnID0gZyA+IDAuMDQwNDUgPyBNYXRoLnBvdygoKGcgKyAwLjA1NSkgLyAxLjA1NSksIDIuNCkgOiAoZyAvIDEyLjkyKTtcblx0YiA9IGIgPiAwLjA0MDQ1ID8gTWF0aC5wb3coKChiICsgMC4wNTUpIC8gMS4wNTUpLCAyLjQpIDogKGIgLyAxMi45Mik7XG5cblx0dmFyIHggPSAociAqIDAuNDEyNCkgKyAoZyAqIDAuMzU3NikgKyAoYiAqIDAuMTgwNSk7XG5cdHZhciB5ID0gKHIgKiAwLjIxMjYpICsgKGcgKiAwLjcxNTIpICsgKGIgKiAwLjA3MjIpO1xuXHR2YXIgeiA9IChyICogMC4wMTkzKSArIChnICogMC4xMTkyKSArIChiICogMC45NTA1KTtcblxuXHRyZXR1cm4gW3ggKiAxMDAsIHkgKiAxMDAsIHogKiAxMDBdO1xufTtcblxuY29udmVydC5yZ2IubGFiID0gZnVuY3Rpb24gKHJnYikge1xuXHR2YXIgeHl6ID0gY29udmVydC5yZ2IueHl6KHJnYik7XG5cdHZhciB4ID0geHl6WzBdO1xuXHR2YXIgeSA9IHh5elsxXTtcblx0dmFyIHogPSB4eXpbMl07XG5cdHZhciBsO1xuXHR2YXIgYTtcblx0dmFyIGI7XG5cblx0eCAvPSA5NS4wNDc7XG5cdHkgLz0gMTAwO1xuXHR6IC89IDEwOC44ODM7XG5cblx0eCA9IHggPiAwLjAwODg1NiA/IE1hdGgucG93KHgsIDEgLyAzKSA6ICg3Ljc4NyAqIHgpICsgKDE2IC8gMTE2KTtcblx0eSA9IHkgPiAwLjAwODg1NiA/IE1hdGgucG93KHksIDEgLyAzKSA6ICg3Ljc4NyAqIHkpICsgKDE2IC8gMTE2KTtcblx0eiA9IHogPiAwLjAwODg1NiA/IE1hdGgucG93KHosIDEgLyAzKSA6ICg3Ljc4NyAqIHopICsgKDE2IC8gMTE2KTtcblxuXHRsID0gKDExNiAqIHkpIC0gMTY7XG5cdGEgPSA1MDAgKiAoeCAtIHkpO1xuXHRiID0gMjAwICogKHkgLSB6KTtcblxuXHRyZXR1cm4gW2wsIGEsIGJdO1xufTtcblxuY29udmVydC5oc2wucmdiID0gZnVuY3Rpb24gKGhzbCkge1xuXHR2YXIgaCA9IGhzbFswXSAvIDM2MDtcblx0dmFyIHMgPSBoc2xbMV0gLyAxMDA7XG5cdHZhciBsID0gaHNsWzJdIC8gMTAwO1xuXHR2YXIgdDE7XG5cdHZhciB0Mjtcblx0dmFyIHQzO1xuXHR2YXIgcmdiO1xuXHR2YXIgdmFsO1xuXG5cdGlmIChzID09PSAwKSB7XG5cdFx0dmFsID0gbCAqIDI1NTtcblx0XHRyZXR1cm4gW3ZhbCwgdmFsLCB2YWxdO1xuXHR9XG5cblx0aWYgKGwgPCAwLjUpIHtcblx0XHR0MiA9IGwgKiAoMSArIHMpO1xuXHR9IGVsc2Uge1xuXHRcdHQyID0gbCArIHMgLSBsICogcztcblx0fVxuXG5cdHQxID0gMiAqIGwgLSB0MjtcblxuXHRyZ2IgPSBbMCwgMCwgMF07XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cdFx0dDMgPSBoICsgMSAvIDMgKiAtKGkgLSAxKTtcblx0XHRpZiAodDMgPCAwKSB7XG5cdFx0XHR0MysrO1xuXHRcdH1cblx0XHRpZiAodDMgPiAxKSB7XG5cdFx0XHR0My0tO1xuXHRcdH1cblxuXHRcdGlmICg2ICogdDMgPCAxKSB7XG5cdFx0XHR2YWwgPSB0MSArICh0MiAtIHQxKSAqIDYgKiB0Mztcblx0XHR9IGVsc2UgaWYgKDIgKiB0MyA8IDEpIHtcblx0XHRcdHZhbCA9IHQyO1xuXHRcdH0gZWxzZSBpZiAoMyAqIHQzIDwgMikge1xuXHRcdFx0dmFsID0gdDEgKyAodDIgLSB0MSkgKiAoMiAvIDMgLSB0MykgKiA2O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YWwgPSB0MTtcblx0XHR9XG5cblx0XHRyZ2JbaV0gPSB2YWwgKiAyNTU7XG5cdH1cblxuXHRyZXR1cm4gcmdiO1xufTtcblxuY29udmVydC5oc2wuaHN2ID0gZnVuY3Rpb24gKGhzbCkge1xuXHR2YXIgaCA9IGhzbFswXTtcblx0dmFyIHMgPSBoc2xbMV0gLyAxMDA7XG5cdHZhciBsID0gaHNsWzJdIC8gMTAwO1xuXHR2YXIgc21pbiA9IHM7XG5cdHZhciBsbWluID0gTWF0aC5tYXgobCwgMC4wMSk7XG5cdHZhciBzdjtcblx0dmFyIHY7XG5cblx0bCAqPSAyO1xuXHRzICo9IChsIDw9IDEpID8gbCA6IDIgLSBsO1xuXHRzbWluICo9IGxtaW4gPD0gMSA/IGxtaW4gOiAyIC0gbG1pbjtcblx0diA9IChsICsgcykgLyAyO1xuXHRzdiA9IGwgPT09IDAgPyAoMiAqIHNtaW4pIC8gKGxtaW4gKyBzbWluKSA6ICgyICogcykgLyAobCArIHMpO1xuXG5cdHJldHVybiBbaCwgc3YgKiAxMDAsIHYgKiAxMDBdO1xufTtcblxuY29udmVydC5oc3YucmdiID0gZnVuY3Rpb24gKGhzdikge1xuXHR2YXIgaCA9IGhzdlswXSAvIDYwO1xuXHR2YXIgcyA9IGhzdlsxXSAvIDEwMDtcblx0dmFyIHYgPSBoc3ZbMl0gLyAxMDA7XG5cdHZhciBoaSA9IE1hdGguZmxvb3IoaCkgJSA2O1xuXG5cdHZhciBmID0gaCAtIE1hdGguZmxvb3IoaCk7XG5cdHZhciBwID0gMjU1ICogdiAqICgxIC0gcyk7XG5cdHZhciBxID0gMjU1ICogdiAqICgxIC0gKHMgKiBmKSk7XG5cdHZhciB0ID0gMjU1ICogdiAqICgxIC0gKHMgKiAoMSAtIGYpKSk7XG5cdHYgKj0gMjU1O1xuXG5cdHN3aXRjaCAoaGkpIHtcblx0XHRjYXNlIDA6XG5cdFx0XHRyZXR1cm4gW3YsIHQsIHBdO1xuXHRcdGNhc2UgMTpcblx0XHRcdHJldHVybiBbcSwgdiwgcF07XG5cdFx0Y2FzZSAyOlxuXHRcdFx0cmV0dXJuIFtwLCB2LCB0XTtcblx0XHRjYXNlIDM6XG5cdFx0XHRyZXR1cm4gW3AsIHEsIHZdO1xuXHRcdGNhc2UgNDpcblx0XHRcdHJldHVybiBbdCwgcCwgdl07XG5cdFx0Y2FzZSA1OlxuXHRcdFx0cmV0dXJuIFt2LCBwLCBxXTtcblx0fVxufTtcblxuY29udmVydC5oc3YuaHNsID0gZnVuY3Rpb24gKGhzdikge1xuXHR2YXIgaCA9IGhzdlswXTtcblx0dmFyIHMgPSBoc3ZbMV0gLyAxMDA7XG5cdHZhciB2ID0gaHN2WzJdIC8gMTAwO1xuXHR2YXIgdm1pbiA9IE1hdGgubWF4KHYsIDAuMDEpO1xuXHR2YXIgbG1pbjtcblx0dmFyIHNsO1xuXHR2YXIgbDtcblxuXHRsID0gKDIgLSBzKSAqIHY7XG5cdGxtaW4gPSAoMiAtIHMpICogdm1pbjtcblx0c2wgPSBzICogdm1pbjtcblx0c2wgLz0gKGxtaW4gPD0gMSkgPyBsbWluIDogMiAtIGxtaW47XG5cdHNsID0gc2wgfHwgMDtcblx0bCAvPSAyO1xuXG5cdHJldHVybiBbaCwgc2wgKiAxMDAsIGwgKiAxMDBdO1xufTtcblxuLy8gaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLWNvbG9yLyNod2ItdG8tcmdiXG5jb252ZXJ0Lmh3Yi5yZ2IgPSBmdW5jdGlvbiAoaHdiKSB7XG5cdHZhciBoID0gaHdiWzBdIC8gMzYwO1xuXHR2YXIgd2ggPSBod2JbMV0gLyAxMDA7XG5cdHZhciBibCA9IGh3YlsyXSAvIDEwMDtcblx0dmFyIHJhdGlvID0gd2ggKyBibDtcblx0dmFyIGk7XG5cdHZhciB2O1xuXHR2YXIgZjtcblx0dmFyIG47XG5cblx0Ly8gd2ggKyBibCBjYW50IGJlID4gMVxuXHRpZiAocmF0aW8gPiAxKSB7XG5cdFx0d2ggLz0gcmF0aW87XG5cdFx0YmwgLz0gcmF0aW87XG5cdH1cblxuXHRpID0gTWF0aC5mbG9vcig2ICogaCk7XG5cdHYgPSAxIC0gYmw7XG5cdGYgPSA2ICogaCAtIGk7XG5cblx0aWYgKChpICYgMHgwMSkgIT09IDApIHtcblx0XHRmID0gMSAtIGY7XG5cdH1cblxuXHRuID0gd2ggKyBmICogKHYgLSB3aCk7IC8vIGxpbmVhciBpbnRlcnBvbGF0aW9uXG5cblx0dmFyIHI7XG5cdHZhciBnO1xuXHR2YXIgYjtcblx0c3dpdGNoIChpKSB7XG5cdFx0ZGVmYXVsdDpcblx0XHRjYXNlIDY6XG5cdFx0Y2FzZSAwOiByID0gdjsgZyA9IG47IGIgPSB3aDsgYnJlYWs7XG5cdFx0Y2FzZSAxOiByID0gbjsgZyA9IHY7IGIgPSB3aDsgYnJlYWs7XG5cdFx0Y2FzZSAyOiByID0gd2g7IGcgPSB2OyBiID0gbjsgYnJlYWs7XG5cdFx0Y2FzZSAzOiByID0gd2g7IGcgPSBuOyBiID0gdjsgYnJlYWs7XG5cdFx0Y2FzZSA0OiByID0gbjsgZyA9IHdoOyBiID0gdjsgYnJlYWs7XG5cdFx0Y2FzZSA1OiByID0gdjsgZyA9IHdoOyBiID0gbjsgYnJlYWs7XG5cdH1cblxuXHRyZXR1cm4gW3IgKiAyNTUsIGcgKiAyNTUsIGIgKiAyNTVdO1xufTtcblxuY29udmVydC5jbXlrLnJnYiA9IGZ1bmN0aW9uIChjbXlrKSB7XG5cdHZhciBjID0gY215a1swXSAvIDEwMDtcblx0dmFyIG0gPSBjbXlrWzFdIC8gMTAwO1xuXHR2YXIgeSA9IGNteWtbMl0gLyAxMDA7XG5cdHZhciBrID0gY215a1szXSAvIDEwMDtcblx0dmFyIHI7XG5cdHZhciBnO1xuXHR2YXIgYjtcblxuXHRyID0gMSAtIE1hdGgubWluKDEsIGMgKiAoMSAtIGspICsgayk7XG5cdGcgPSAxIC0gTWF0aC5taW4oMSwgbSAqICgxIC0gaykgKyBrKTtcblx0YiA9IDEgLSBNYXRoLm1pbigxLCB5ICogKDEgLSBrKSArIGspO1xuXG5cdHJldHVybiBbciAqIDI1NSwgZyAqIDI1NSwgYiAqIDI1NV07XG59O1xuXG5jb252ZXJ0Lnh5ei5yZ2IgPSBmdW5jdGlvbiAoeHl6KSB7XG5cdHZhciB4ID0geHl6WzBdIC8gMTAwO1xuXHR2YXIgeSA9IHh5elsxXSAvIDEwMDtcblx0dmFyIHogPSB4eXpbMl0gLyAxMDA7XG5cdHZhciByO1xuXHR2YXIgZztcblx0dmFyIGI7XG5cblx0ciA9ICh4ICogMy4yNDA2KSArICh5ICogLTEuNTM3MikgKyAoeiAqIC0wLjQ5ODYpO1xuXHRnID0gKHggKiAtMC45Njg5KSArICh5ICogMS44NzU4KSArICh6ICogMC4wNDE1KTtcblx0YiA9ICh4ICogMC4wNTU3KSArICh5ICogLTAuMjA0MCkgKyAoeiAqIDEuMDU3MCk7XG5cblx0Ly8gYXNzdW1lIHNSR0Jcblx0ciA9IHIgPiAwLjAwMzEzMDhcblx0XHQ/ICgoMS4wNTUgKiBNYXRoLnBvdyhyLCAxLjAgLyAyLjQpKSAtIDAuMDU1KVxuXHRcdDogciAqIDEyLjkyO1xuXG5cdGcgPSBnID4gMC4wMDMxMzA4XG5cdFx0PyAoKDEuMDU1ICogTWF0aC5wb3coZywgMS4wIC8gMi40KSkgLSAwLjA1NSlcblx0XHQ6IGcgKiAxMi45MjtcblxuXHRiID0gYiA+IDAuMDAzMTMwOFxuXHRcdD8gKCgxLjA1NSAqIE1hdGgucG93KGIsIDEuMCAvIDIuNCkpIC0gMC4wNTUpXG5cdFx0OiBiICogMTIuOTI7XG5cblx0ciA9IE1hdGgubWluKE1hdGgubWF4KDAsIHIpLCAxKTtcblx0ZyA9IE1hdGgubWluKE1hdGgubWF4KDAsIGcpLCAxKTtcblx0YiA9IE1hdGgubWluKE1hdGgubWF4KDAsIGIpLCAxKTtcblxuXHRyZXR1cm4gW3IgKiAyNTUsIGcgKiAyNTUsIGIgKiAyNTVdO1xufTtcblxuY29udmVydC54eXoubGFiID0gZnVuY3Rpb24gKHh5eikge1xuXHR2YXIgeCA9IHh5elswXTtcblx0dmFyIHkgPSB4eXpbMV07XG5cdHZhciB6ID0geHl6WzJdO1xuXHR2YXIgbDtcblx0dmFyIGE7XG5cdHZhciBiO1xuXG5cdHggLz0gOTUuMDQ3O1xuXHR5IC89IDEwMDtcblx0eiAvPSAxMDguODgzO1xuXG5cdHggPSB4ID4gMC4wMDg4NTYgPyBNYXRoLnBvdyh4LCAxIC8gMykgOiAoNy43ODcgKiB4KSArICgxNiAvIDExNik7XG5cdHkgPSB5ID4gMC4wMDg4NTYgPyBNYXRoLnBvdyh5LCAxIC8gMykgOiAoNy43ODcgKiB5KSArICgxNiAvIDExNik7XG5cdHogPSB6ID4gMC4wMDg4NTYgPyBNYXRoLnBvdyh6LCAxIC8gMykgOiAoNy43ODcgKiB6KSArICgxNiAvIDExNik7XG5cblx0bCA9ICgxMTYgKiB5KSAtIDE2O1xuXHRhID0gNTAwICogKHggLSB5KTtcblx0YiA9IDIwMCAqICh5IC0geik7XG5cblx0cmV0dXJuIFtsLCBhLCBiXTtcbn07XG5cbmNvbnZlcnQubGFiLnh5eiA9IGZ1bmN0aW9uIChsYWIpIHtcblx0dmFyIGwgPSBsYWJbMF07XG5cdHZhciBhID0gbGFiWzFdO1xuXHR2YXIgYiA9IGxhYlsyXTtcblx0dmFyIHg7XG5cdHZhciB5O1xuXHR2YXIgejtcblxuXHR5ID0gKGwgKyAxNikgLyAxMTY7XG5cdHggPSBhIC8gNTAwICsgeTtcblx0eiA9IHkgLSBiIC8gMjAwO1xuXG5cdHZhciB5MiA9IE1hdGgucG93KHksIDMpO1xuXHR2YXIgeDIgPSBNYXRoLnBvdyh4LCAzKTtcblx0dmFyIHoyID0gTWF0aC5wb3coeiwgMyk7XG5cdHkgPSB5MiA+IDAuMDA4ODU2ID8geTIgOiAoeSAtIDE2IC8gMTE2KSAvIDcuNzg3O1xuXHR4ID0geDIgPiAwLjAwODg1NiA/IHgyIDogKHggLSAxNiAvIDExNikgLyA3Ljc4Nztcblx0eiA9IHoyID4gMC4wMDg4NTYgPyB6MiA6ICh6IC0gMTYgLyAxMTYpIC8gNy43ODc7XG5cblx0eCAqPSA5NS4wNDc7XG5cdHkgKj0gMTAwO1xuXHR6ICo9IDEwOC44ODM7XG5cblx0cmV0dXJuIFt4LCB5LCB6XTtcbn07XG5cbmNvbnZlcnQubGFiLmxjaCA9IGZ1bmN0aW9uIChsYWIpIHtcblx0dmFyIGwgPSBsYWJbMF07XG5cdHZhciBhID0gbGFiWzFdO1xuXHR2YXIgYiA9IGxhYlsyXTtcblx0dmFyIGhyO1xuXHR2YXIgaDtcblx0dmFyIGM7XG5cblx0aHIgPSBNYXRoLmF0YW4yKGIsIGEpO1xuXHRoID0gaHIgKiAzNjAgLyAyIC8gTWF0aC5QSTtcblxuXHRpZiAoaCA8IDApIHtcblx0XHRoICs9IDM2MDtcblx0fVxuXG5cdGMgPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7XG5cblx0cmV0dXJuIFtsLCBjLCBoXTtcbn07XG5cbmNvbnZlcnQubGNoLmxhYiA9IGZ1bmN0aW9uIChsY2gpIHtcblx0dmFyIGwgPSBsY2hbMF07XG5cdHZhciBjID0gbGNoWzFdO1xuXHR2YXIgaCA9IGxjaFsyXTtcblx0dmFyIGE7XG5cdHZhciBiO1xuXHR2YXIgaHI7XG5cblx0aHIgPSBoIC8gMzYwICogMiAqIE1hdGguUEk7XG5cdGEgPSBjICogTWF0aC5jb3MoaHIpO1xuXHRiID0gYyAqIE1hdGguc2luKGhyKTtcblxuXHRyZXR1cm4gW2wsIGEsIGJdO1xufTtcblxuY29udmVydC5yZ2IuYW5zaTE2ID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0dmFyIHIgPSBhcmdzWzBdO1xuXHR2YXIgZyA9IGFyZ3NbMV07XG5cdHZhciBiID0gYXJnc1syXTtcblx0dmFyIHZhbHVlID0gMSBpbiBhcmd1bWVudHMgPyBhcmd1bWVudHNbMV0gOiBjb252ZXJ0LnJnYi5oc3YoYXJncylbMl07IC8vIGhzdiAtPiBhbnNpMTYgb3B0aW1pemF0aW9uXG5cblx0dmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlIC8gNTApO1xuXG5cdGlmICh2YWx1ZSA9PT0gMCkge1xuXHRcdHJldHVybiAzMDtcblx0fVxuXG5cdHZhciBhbnNpID0gMzBcblx0XHQrICgoTWF0aC5yb3VuZChiIC8gMjU1KSA8PCAyKVxuXHRcdHwgKE1hdGgucm91bmQoZyAvIDI1NSkgPDwgMSlcblx0XHR8IE1hdGgucm91bmQociAvIDI1NSkpO1xuXG5cdGlmICh2YWx1ZSA9PT0gMikge1xuXHRcdGFuc2kgKz0gNjA7XG5cdH1cblxuXHRyZXR1cm4gYW5zaTtcbn07XG5cbmNvbnZlcnQuaHN2LmFuc2kxNiA9IGZ1bmN0aW9uIChhcmdzKSB7XG5cdC8vIG9wdGltaXphdGlvbiBoZXJlOyB3ZSBhbHJlYWR5IGtub3cgdGhlIHZhbHVlIGFuZCBkb24ndCBuZWVkIHRvIGdldFxuXHQvLyBpdCBjb252ZXJ0ZWQgZm9yIHVzLlxuXHRyZXR1cm4gY29udmVydC5yZ2IuYW5zaTE2KGNvbnZlcnQuaHN2LnJnYihhcmdzKSwgYXJnc1syXSk7XG59O1xuXG5jb252ZXJ0LnJnYi5hbnNpMjU2ID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0dmFyIHIgPSBhcmdzWzBdO1xuXHR2YXIgZyA9IGFyZ3NbMV07XG5cdHZhciBiID0gYXJnc1syXTtcblxuXHQvLyB3ZSB1c2UgdGhlIGV4dGVuZGVkIGdyZXlzY2FsZSBwYWxldHRlIGhlcmUsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZlxuXHQvLyBibGFjayBhbmQgd2hpdGUuIG5vcm1hbCBwYWxldHRlIG9ubHkgaGFzIDQgZ3JleXNjYWxlIHNoYWRlcy5cblx0aWYgKHIgPT09IGcgJiYgZyA9PT0gYikge1xuXHRcdGlmIChyIDwgOCkge1xuXHRcdFx0cmV0dXJuIDE2O1xuXHRcdH1cblxuXHRcdGlmIChyID4gMjQ4KSB7XG5cdFx0XHRyZXR1cm4gMjMxO1xuXHRcdH1cblxuXHRcdHJldHVybiBNYXRoLnJvdW5kKCgociAtIDgpIC8gMjQ3KSAqIDI0KSArIDIzMjtcblx0fVxuXG5cdHZhciBhbnNpID0gMTZcblx0XHQrICgzNiAqIE1hdGgucm91bmQociAvIDI1NSAqIDUpKVxuXHRcdCsgKDYgKiBNYXRoLnJvdW5kKGcgLyAyNTUgKiA1KSlcblx0XHQrIE1hdGgucm91bmQoYiAvIDI1NSAqIDUpO1xuXG5cdHJldHVybiBhbnNpO1xufTtcblxuY29udmVydC5hbnNpMTYucmdiID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0dmFyIGNvbG9yID0gYXJncyAlIDEwO1xuXG5cdC8vIGhhbmRsZSBncmV5c2NhbGVcblx0aWYgKGNvbG9yID09PSAwIHx8IGNvbG9yID09PSA3KSB7XG5cdFx0aWYgKGFyZ3MgPiA1MCkge1xuXHRcdFx0Y29sb3IgKz0gMy41O1xuXHRcdH1cblxuXHRcdGNvbG9yID0gY29sb3IgLyAxMC41ICogMjU1O1xuXG5cdFx0cmV0dXJuIFtjb2xvciwgY29sb3IsIGNvbG9yXTtcblx0fVxuXG5cdHZhciBtdWx0ID0gKH5+KGFyZ3MgPiA1MCkgKyAxKSAqIDAuNTtcblx0dmFyIHIgPSAoKGNvbG9yICYgMSkgKiBtdWx0KSAqIDI1NTtcblx0dmFyIGcgPSAoKChjb2xvciA+PiAxKSAmIDEpICogbXVsdCkgKiAyNTU7XG5cdHZhciBiID0gKCgoY29sb3IgPj4gMikgJiAxKSAqIG11bHQpICogMjU1O1xuXG5cdHJldHVybiBbciwgZywgYl07XG59O1xuXG5jb252ZXJ0LmFuc2kyNTYucmdiID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0Ly8gaGFuZGxlIGdyZXlzY2FsZVxuXHRpZiAoYXJncyA+PSAyMzIpIHtcblx0XHR2YXIgYyA9IChhcmdzIC0gMjMyKSAqIDEwICsgODtcblx0XHRyZXR1cm4gW2MsIGMsIGNdO1xuXHR9XG5cblx0YXJncyAtPSAxNjtcblxuXHR2YXIgcmVtO1xuXHR2YXIgciA9IE1hdGguZmxvb3IoYXJncyAvIDM2KSAvIDUgKiAyNTU7XG5cdHZhciBnID0gTWF0aC5mbG9vcigocmVtID0gYXJncyAlIDM2KSAvIDYpIC8gNSAqIDI1NTtcblx0dmFyIGIgPSAocmVtICUgNikgLyA1ICogMjU1O1xuXG5cdHJldHVybiBbciwgZywgYl07XG59O1xuXG5jb252ZXJ0LnJnYi5oZXggPSBmdW5jdGlvbiAoYXJncykge1xuXHR2YXIgaW50ZWdlciA9ICgoTWF0aC5yb3VuZChhcmdzWzBdKSAmIDB4RkYpIDw8IDE2KVxuXHRcdCsgKChNYXRoLnJvdW5kKGFyZ3NbMV0pICYgMHhGRikgPDwgOClcblx0XHQrIChNYXRoLnJvdW5kKGFyZ3NbMl0pICYgMHhGRik7XG5cblx0dmFyIHN0cmluZyA9IGludGVnZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdHJldHVybiAnMDAwMDAwJy5zdWJzdHJpbmcoc3RyaW5nLmxlbmd0aCkgKyBzdHJpbmc7XG59O1xuXG5jb252ZXJ0LmhleC5yZ2IgPSBmdW5jdGlvbiAoYXJncykge1xuXHR2YXIgbWF0Y2ggPSBhcmdzLnRvU3RyaW5nKDE2KS5tYXRjaCgvW2EtZjAtOV17Nn18W2EtZjAtOV17M30vaSk7XG5cdGlmICghbWF0Y2gpIHtcblx0XHRyZXR1cm4gWzAsIDAsIDBdO1xuXHR9XG5cblx0dmFyIGNvbG9yU3RyaW5nID0gbWF0Y2hbMF07XG5cblx0aWYgKG1hdGNoWzBdLmxlbmd0aCA9PT0gMykge1xuXHRcdGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoY2hhcikge1xuXHRcdFx0cmV0dXJuIGNoYXIgKyBjaGFyO1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0dmFyIGludGVnZXIgPSBwYXJzZUludChjb2xvclN0cmluZywgMTYpO1xuXHR2YXIgciA9IChpbnRlZ2VyID4+IDE2KSAmIDB4RkY7XG5cdHZhciBnID0gKGludGVnZXIgPj4gOCkgJiAweEZGO1xuXHR2YXIgYiA9IGludGVnZXIgJiAweEZGO1xuXG5cdHJldHVybiBbciwgZywgYl07XG59O1xuXG5jb252ZXJ0LnJnYi5oY2cgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHZhciByID0gcmdiWzBdIC8gMjU1O1xuXHR2YXIgZyA9IHJnYlsxXSAvIDI1NTtcblx0dmFyIGIgPSByZ2JbMl0gLyAyNTU7XG5cdHZhciBtYXggPSBNYXRoLm1heChNYXRoLm1heChyLCBnKSwgYik7XG5cdHZhciBtaW4gPSBNYXRoLm1pbihNYXRoLm1pbihyLCBnKSwgYik7XG5cdHZhciBjaHJvbWEgPSAobWF4IC0gbWluKTtcblx0dmFyIGdyYXlzY2FsZTtcblx0dmFyIGh1ZTtcblxuXHRpZiAoY2hyb21hIDwgMSkge1xuXHRcdGdyYXlzY2FsZSA9IG1pbiAvICgxIC0gY2hyb21hKTtcblx0fSBlbHNlIHtcblx0XHRncmF5c2NhbGUgPSAwO1xuXHR9XG5cblx0aWYgKGNocm9tYSA8PSAwKSB7XG5cdFx0aHVlID0gMDtcblx0fSBlbHNlXG5cdGlmIChtYXggPT09IHIpIHtcblx0XHRodWUgPSAoKGcgLSBiKSAvIGNocm9tYSkgJSA2O1xuXHR9IGVsc2Vcblx0aWYgKG1heCA9PT0gZykge1xuXHRcdGh1ZSA9IDIgKyAoYiAtIHIpIC8gY2hyb21hO1xuXHR9IGVsc2Uge1xuXHRcdGh1ZSA9IDQgKyAociAtIGcpIC8gY2hyb21hICsgNDtcblx0fVxuXG5cdGh1ZSAvPSA2O1xuXHRodWUgJT0gMTtcblxuXHRyZXR1cm4gW2h1ZSAqIDM2MCwgY2hyb21hICogMTAwLCBncmF5c2NhbGUgKiAxMDBdO1xufTtcblxuY29udmVydC5oc2wuaGNnID0gZnVuY3Rpb24gKGhzbCkge1xuXHR2YXIgcyA9IGhzbFsxXSAvIDEwMDtcblx0dmFyIGwgPSBoc2xbMl0gLyAxMDA7XG5cdHZhciBjID0gMTtcblx0dmFyIGYgPSAwO1xuXG5cdGlmIChsIDwgMC41KSB7XG5cdFx0YyA9IDIuMCAqIHMgKiBsO1xuXHR9IGVsc2Uge1xuXHRcdGMgPSAyLjAgKiBzICogKDEuMCAtIGwpO1xuXHR9XG5cblx0aWYgKGMgPCAxLjApIHtcblx0XHRmID0gKGwgLSAwLjUgKiBjKSAvICgxLjAgLSBjKTtcblx0fVxuXG5cdHJldHVybiBbaHNsWzBdLCBjICogMTAwLCBmICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaHN2LmhjZyA9IGZ1bmN0aW9uIChoc3YpIHtcblx0dmFyIHMgPSBoc3ZbMV0gLyAxMDA7XG5cdHZhciB2ID0gaHN2WzJdIC8gMTAwO1xuXG5cdHZhciBjID0gcyAqIHY7XG5cdHZhciBmID0gMDtcblxuXHRpZiAoYyA8IDEuMCkge1xuXHRcdGYgPSAodiAtIGMpIC8gKDEgLSBjKTtcblx0fVxuXG5cdHJldHVybiBbaHN2WzBdLCBjICogMTAwLCBmICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaGNnLnJnYiA9IGZ1bmN0aW9uIChoY2cpIHtcblx0dmFyIGggPSBoY2dbMF0gLyAzNjA7XG5cdHZhciBjID0gaGNnWzFdIC8gMTAwO1xuXHR2YXIgZyA9IGhjZ1syXSAvIDEwMDtcblxuXHRpZiAoYyA9PT0gMC4wKSB7XG5cdFx0cmV0dXJuIFtnICogMjU1LCBnICogMjU1LCBnICogMjU1XTtcblx0fVxuXG5cdHZhciBwdXJlID0gWzAsIDAsIDBdO1xuXHR2YXIgaGkgPSAoaCAlIDEpICogNjtcblx0dmFyIHYgPSBoaSAlIDE7XG5cdHZhciB3ID0gMSAtIHY7XG5cdHZhciBtZyA9IDA7XG5cblx0c3dpdGNoIChNYXRoLmZsb29yKGhpKSkge1xuXHRcdGNhc2UgMDpcblx0XHRcdHB1cmVbMF0gPSAxOyBwdXJlWzFdID0gdjsgcHVyZVsyXSA9IDA7IGJyZWFrO1xuXHRcdGNhc2UgMTpcblx0XHRcdHB1cmVbMF0gPSB3OyBwdXJlWzFdID0gMTsgcHVyZVsyXSA9IDA7IGJyZWFrO1xuXHRcdGNhc2UgMjpcblx0XHRcdHB1cmVbMF0gPSAwOyBwdXJlWzFdID0gMTsgcHVyZVsyXSA9IHY7IGJyZWFrO1xuXHRcdGNhc2UgMzpcblx0XHRcdHB1cmVbMF0gPSAwOyBwdXJlWzFdID0gdzsgcHVyZVsyXSA9IDE7IGJyZWFrO1xuXHRcdGNhc2UgNDpcblx0XHRcdHB1cmVbMF0gPSB2OyBwdXJlWzFdID0gMDsgcHVyZVsyXSA9IDE7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRwdXJlWzBdID0gMTsgcHVyZVsxXSA9IDA7IHB1cmVbMl0gPSB3O1xuXHR9XG5cblx0bWcgPSAoMS4wIC0gYykgKiBnO1xuXG5cdHJldHVybiBbXG5cdFx0KGMgKiBwdXJlWzBdICsgbWcpICogMjU1LFxuXHRcdChjICogcHVyZVsxXSArIG1nKSAqIDI1NSxcblx0XHQoYyAqIHB1cmVbMl0gKyBtZykgKiAyNTVcblx0XTtcbn07XG5cbmNvbnZlcnQuaGNnLmhzdiA9IGZ1bmN0aW9uIChoY2cpIHtcblx0dmFyIGMgPSBoY2dbMV0gLyAxMDA7XG5cdHZhciBnID0gaGNnWzJdIC8gMTAwO1xuXG5cdHZhciB2ID0gYyArIGcgKiAoMS4wIC0gYyk7XG5cdHZhciBmID0gMDtcblxuXHRpZiAodiA+IDAuMCkge1xuXHRcdGYgPSBjIC8gdjtcblx0fVxuXG5cdHJldHVybiBbaGNnWzBdLCBmICogMTAwLCB2ICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaGNnLmhzbCA9IGZ1bmN0aW9uIChoY2cpIHtcblx0dmFyIGMgPSBoY2dbMV0gLyAxMDA7XG5cdHZhciBnID0gaGNnWzJdIC8gMTAwO1xuXG5cdHZhciBsID0gZyAqICgxLjAgLSBjKSArIDAuNSAqIGM7XG5cdHZhciBzID0gMDtcblxuXHRpZiAobCA+IDAuMCAmJiBsIDwgMC41KSB7XG5cdFx0cyA9IGMgLyAoMiAqIGwpO1xuXHR9IGVsc2Vcblx0aWYgKGwgPj0gMC41ICYmIGwgPCAxLjApIHtcblx0XHRzID0gYyAvICgyICogKDEgLSBsKSk7XG5cdH1cblxuXHRyZXR1cm4gW2hjZ1swXSwgcyAqIDEwMCwgbCAqIDEwMF07XG59O1xuXG5jb252ZXJ0LmhjZy5od2IgPSBmdW5jdGlvbiAoaGNnKSB7XG5cdHZhciBjID0gaGNnWzFdIC8gMTAwO1xuXHR2YXIgZyA9IGhjZ1syXSAvIDEwMDtcblx0dmFyIHYgPSBjICsgZyAqICgxLjAgLSBjKTtcblx0cmV0dXJuIFtoY2dbMF0sICh2IC0gYykgKiAxMDAsICgxIC0gdikgKiAxMDBdO1xufTtcblxuY29udmVydC5od2IuaGNnID0gZnVuY3Rpb24gKGh3Yikge1xuXHR2YXIgdyA9IGh3YlsxXSAvIDEwMDtcblx0dmFyIGIgPSBod2JbMl0gLyAxMDA7XG5cdHZhciB2ID0gMSAtIGI7XG5cdHZhciBjID0gdiAtIHc7XG5cdHZhciBnID0gMDtcblxuXHRpZiAoYyA8IDEpIHtcblx0XHRnID0gKHYgLSBjKSAvICgxIC0gYyk7XG5cdH1cblxuXHRyZXR1cm4gW2h3YlswXSwgYyAqIDEwMCwgZyAqIDEwMF07XG59O1xuXG5jb252ZXJ0LmFwcGxlLnJnYiA9IGZ1bmN0aW9uIChhcHBsZSkge1xuXHRyZXR1cm4gWyhhcHBsZVswXSAvIDY1NTM1KSAqIDI1NSwgKGFwcGxlWzFdIC8gNjU1MzUpICogMjU1LCAoYXBwbGVbMl0gLyA2NTUzNSkgKiAyNTVdO1xufTtcblxuY29udmVydC5yZ2IuYXBwbGUgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHJldHVybiBbKHJnYlswXSAvIDI1NSkgKiA2NTUzNSwgKHJnYlsxXSAvIDI1NSkgKiA2NTUzNSwgKHJnYlsyXSAvIDI1NSkgKiA2NTUzNV07XG59O1xuXG5jb252ZXJ0LmdyYXkucmdiID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0cmV0dXJuIFthcmdzWzBdIC8gMTAwICogMjU1LCBhcmdzWzBdIC8gMTAwICogMjU1LCBhcmdzWzBdIC8gMTAwICogMjU1XTtcbn07XG5cbmNvbnZlcnQuZ3JheS5oc2wgPSBjb252ZXJ0LmdyYXkuaHN2ID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0cmV0dXJuIFswLCAwLCBhcmdzWzBdXTtcbn07XG5cbmNvbnZlcnQuZ3JheS5od2IgPSBmdW5jdGlvbiAoZ3JheSkge1xuXHRyZXR1cm4gWzAsIDEwMCwgZ3JheVswXV07XG59O1xuXG5jb252ZXJ0LmdyYXkuY215ayA9IGZ1bmN0aW9uIChncmF5KSB7XG5cdHJldHVybiBbMCwgMCwgMCwgZ3JheVswXV07XG59O1xuXG5jb252ZXJ0LmdyYXkubGFiID0gZnVuY3Rpb24gKGdyYXkpIHtcblx0cmV0dXJuIFtncmF5WzBdLCAwLCAwXTtcbn07XG5cbmNvbnZlcnQuZ3JheS5oZXggPSBmdW5jdGlvbiAoZ3JheSkge1xuXHR2YXIgdmFsID0gTWF0aC5yb3VuZChncmF5WzBdIC8gMTAwICogMjU1KSAmIDB4RkY7XG5cdHZhciBpbnRlZ2VyID0gKHZhbCA8PCAxNikgKyAodmFsIDw8IDgpICsgdmFsO1xuXG5cdHZhciBzdHJpbmcgPSBpbnRlZ2VyLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHRyZXR1cm4gJzAwMDAwMCcuc3Vic3RyaW5nKHN0cmluZy5sZW5ndGgpICsgc3RyaW5nO1xufTtcblxuY29udmVydC5yZ2IuZ3JheSA9IGZ1bmN0aW9uIChyZ2IpIHtcblx0dmFyIHZhbCA9IChyZ2JbMF0gKyByZ2JbMV0gKyByZ2JbMl0pIC8gMztcblx0cmV0dXJuIFt2YWwgLyAyNTUgKiAxMDBdO1xufTtcbiIsInZhciBjb252ZXJzaW9ucyA9IHJlcXVpcmUoJy4vY29udmVyc2lvbnMnKTtcbnZhciByb3V0ZSA9IHJlcXVpcmUoJy4vcm91dGUnKTtcblxudmFyIGNvbnZlcnQgPSB7fTtcblxudmFyIG1vZGVscyA9IE9iamVjdC5rZXlzKGNvbnZlcnNpb25zKTtcblxuZnVuY3Rpb24gd3JhcFJhdyhmbikge1xuXHR2YXIgd3JhcHBlZEZuID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0XHRpZiAoYXJncyA9PT0gdW5kZWZpbmVkIHx8IGFyZ3MgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBhcmdzO1xuXHRcdH1cblxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0YXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZuKGFyZ3MpO1xuXHR9O1xuXG5cdC8vIHByZXNlcnZlIC5jb252ZXJzaW9uIHByb3BlcnR5IGlmIHRoZXJlIGlzIG9uZVxuXHRpZiAoJ2NvbnZlcnNpb24nIGluIGZuKSB7XG5cdFx0d3JhcHBlZEZuLmNvbnZlcnNpb24gPSBmbi5jb252ZXJzaW9uO1xuXHR9XG5cblx0cmV0dXJuIHdyYXBwZWRGbjtcbn1cblxuZnVuY3Rpb24gd3JhcFJvdW5kZWQoZm4pIHtcblx0dmFyIHdyYXBwZWRGbiA9IGZ1bmN0aW9uIChhcmdzKSB7XG5cdFx0aWYgKGFyZ3MgPT09IHVuZGVmaW5lZCB8fCBhcmdzID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gYXJncztcblx0XHR9XG5cblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0XHRcdGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdHZhciByZXN1bHQgPSBmbihhcmdzKTtcblxuXHRcdC8vIHdlJ3JlIGFzc3VtaW5nIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkgaGVyZS5cblx0XHQvLyBzZWUgbm90aWNlIGluIGNvbnZlcnNpb25zLmpzOyBkb24ndCB1c2UgYm94IHR5cGVzXG5cdFx0Ly8gaW4gY29udmVyc2lvbiBmdW5jdGlvbnMuXG5cdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRmb3IgKHZhciBsZW4gPSByZXN1bHQubGVuZ3RoLCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdHJlc3VsdFtpXSA9IE1hdGgucm91bmQocmVzdWx0W2ldKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdC8vIHByZXNlcnZlIC5jb252ZXJzaW9uIHByb3BlcnR5IGlmIHRoZXJlIGlzIG9uZVxuXHRpZiAoJ2NvbnZlcnNpb24nIGluIGZuKSB7XG5cdFx0d3JhcHBlZEZuLmNvbnZlcnNpb24gPSBmbi5jb252ZXJzaW9uO1xuXHR9XG5cblx0cmV0dXJuIHdyYXBwZWRGbjtcbn1cblxubW9kZWxzLmZvckVhY2goZnVuY3Rpb24gKGZyb21Nb2RlbCkge1xuXHRjb252ZXJ0W2Zyb21Nb2RlbF0gPSB7fTtcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoY29udmVydFtmcm9tTW9kZWxdLCAnY2hhbm5lbHMnLCB7dmFsdWU6IGNvbnZlcnNpb25zW2Zyb21Nb2RlbF0uY2hhbm5lbHN9KTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnZlcnRbZnJvbU1vZGVsXSwgJ2xhYmVscycsIHt2YWx1ZTogY29udmVyc2lvbnNbZnJvbU1vZGVsXS5sYWJlbHN9KTtcblxuXHR2YXIgcm91dGVzID0gcm91dGUoZnJvbU1vZGVsKTtcblx0dmFyIHJvdXRlTW9kZWxzID0gT2JqZWN0LmtleXMocm91dGVzKTtcblxuXHRyb3V0ZU1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uICh0b01vZGVsKSB7XG5cdFx0dmFyIGZuID0gcm91dGVzW3RvTW9kZWxdO1xuXG5cdFx0Y29udmVydFtmcm9tTW9kZWxdW3RvTW9kZWxdID0gd3JhcFJvdW5kZWQoZm4pO1xuXHRcdGNvbnZlcnRbZnJvbU1vZGVsXVt0b01vZGVsXS5yYXcgPSB3cmFwUmF3KGZuKTtcblx0fSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb252ZXJ0O1xuIiwidmFyIGNvbnZlcnNpb25zID0gcmVxdWlyZSgnLi9jb252ZXJzaW9ucycpO1xuXG4vKlxuXHR0aGlzIGZ1bmN0aW9uIHJvdXRlcyBhIG1vZGVsIHRvIGFsbCBvdGhlciBtb2RlbHMuXG5cblx0YWxsIGZ1bmN0aW9ucyB0aGF0IGFyZSByb3V0ZWQgaGF2ZSBhIHByb3BlcnR5IGAuY29udmVyc2lvbmAgYXR0YWNoZWRcblx0dG8gdGhlIHJldHVybmVkIHN5bnRoZXRpYyBmdW5jdGlvbi4gVGhpcyBwcm9wZXJ0eSBpcyBhbiBhcnJheVxuXHRvZiBzdHJpbmdzLCBlYWNoIHdpdGggdGhlIHN0ZXBzIGluIGJldHdlZW4gdGhlICdmcm9tJyBhbmQgJ3RvJ1xuXHRjb2xvciBtb2RlbHMgKGluY2x1c2l2ZSkuXG5cblx0Y29udmVyc2lvbnMgdGhhdCBhcmUgbm90IHBvc3NpYmxlIHNpbXBseSBhcmUgbm90IGluY2x1ZGVkLlxuKi9cblxuZnVuY3Rpb24gYnVpbGRHcmFwaCgpIHtcblx0dmFyIGdyYXBoID0ge307XG5cdC8vIGh0dHBzOi8vanNwZXJmLmNvbS9vYmplY3Qta2V5cy12cy1mb3ItaW4td2l0aC1jbG9zdXJlLzNcblx0dmFyIG1vZGVscyA9IE9iamVjdC5rZXlzKGNvbnZlcnNpb25zKTtcblxuXHRmb3IgKHZhciBsZW4gPSBtb2RlbHMubGVuZ3RoLCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0Z3JhcGhbbW9kZWxzW2ldXSA9IHtcblx0XHRcdC8vIGh0dHA6Ly9qc3BlcmYuY29tLzEtdnMtaW5maW5pdHlcblx0XHRcdC8vIG1pY3JvLW9wdCwgYnV0IHRoaXMgaXMgc2ltcGxlLlxuXHRcdFx0ZGlzdGFuY2U6IC0xLFxuXHRcdFx0cGFyZW50OiBudWxsXG5cdFx0fTtcblx0fVxuXG5cdHJldHVybiBncmFwaDtcbn1cblxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlYWR0aC1maXJzdF9zZWFyY2hcbmZ1bmN0aW9uIGRlcml2ZUJGUyhmcm9tTW9kZWwpIHtcblx0dmFyIGdyYXBoID0gYnVpbGRHcmFwaCgpO1xuXHR2YXIgcXVldWUgPSBbZnJvbU1vZGVsXTsgLy8gdW5zaGlmdCAtPiBxdWV1ZSAtPiBwb3BcblxuXHRncmFwaFtmcm9tTW9kZWxdLmRpc3RhbmNlID0gMDtcblxuXHR3aGlsZSAocXVldWUubGVuZ3RoKSB7XG5cdFx0dmFyIGN1cnJlbnQgPSBxdWV1ZS5wb3AoKTtcblx0XHR2YXIgYWRqYWNlbnRzID0gT2JqZWN0LmtleXMoY29udmVyc2lvbnNbY3VycmVudF0pO1xuXG5cdFx0Zm9yICh2YXIgbGVuID0gYWRqYWNlbnRzLmxlbmd0aCwgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0dmFyIGFkamFjZW50ID0gYWRqYWNlbnRzW2ldO1xuXHRcdFx0dmFyIG5vZGUgPSBncmFwaFthZGphY2VudF07XG5cblx0XHRcdGlmIChub2RlLmRpc3RhbmNlID09PSAtMSkge1xuXHRcdFx0XHRub2RlLmRpc3RhbmNlID0gZ3JhcGhbY3VycmVudF0uZGlzdGFuY2UgKyAxO1xuXHRcdFx0XHRub2RlLnBhcmVudCA9IGN1cnJlbnQ7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoYWRqYWNlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBncmFwaDtcbn1cblxuZnVuY3Rpb24gbGluayhmcm9tLCB0bykge1xuXHRyZXR1cm4gZnVuY3Rpb24gKGFyZ3MpIHtcblx0XHRyZXR1cm4gdG8oZnJvbShhcmdzKSk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIHdyYXBDb252ZXJzaW9uKHRvTW9kZWwsIGdyYXBoKSB7XG5cdHZhciBwYXRoID0gW2dyYXBoW3RvTW9kZWxdLnBhcmVudCwgdG9Nb2RlbF07XG5cdHZhciBmbiA9IGNvbnZlcnNpb25zW2dyYXBoW3RvTW9kZWxdLnBhcmVudF1bdG9Nb2RlbF07XG5cblx0dmFyIGN1ciA9IGdyYXBoW3RvTW9kZWxdLnBhcmVudDtcblx0d2hpbGUgKGdyYXBoW2N1cl0ucGFyZW50KSB7XG5cdFx0cGF0aC51bnNoaWZ0KGdyYXBoW2N1cl0ucGFyZW50KTtcblx0XHRmbiA9IGxpbmsoY29udmVyc2lvbnNbZ3JhcGhbY3VyXS5wYXJlbnRdW2N1cl0sIGZuKTtcblx0XHRjdXIgPSBncmFwaFtjdXJdLnBhcmVudDtcblx0fVxuXG5cdGZuLmNvbnZlcnNpb24gPSBwYXRoO1xuXHRyZXR1cm4gZm47XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZyb21Nb2RlbCkge1xuXHR2YXIgZ3JhcGggPSBkZXJpdmVCRlMoZnJvbU1vZGVsKTtcblx0dmFyIGNvbnZlcnNpb24gPSB7fTtcblxuXHR2YXIgbW9kZWxzID0gT2JqZWN0LmtleXMoZ3JhcGgpO1xuXHRmb3IgKHZhciBsZW4gPSBtb2RlbHMubGVuZ3RoLCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0dmFyIHRvTW9kZWwgPSBtb2RlbHNbaV07XG5cdFx0dmFyIG5vZGUgPSBncmFwaFt0b01vZGVsXTtcblxuXHRcdGlmIChub2RlLnBhcmVudCA9PT0gbnVsbCkge1xuXHRcdFx0Ly8gbm8gcG9zc2libGUgY29udmVyc2lvbiwgb3IgdGhpcyBub2RlIGlzIHRoZSBzb3VyY2UgbW9kZWwuXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb252ZXJzaW9uW3RvTW9kZWxdID0gd3JhcENvbnZlcnNpb24odG9Nb2RlbCwgZ3JhcGgpO1xuXHR9XG5cblx0cmV0dXJuIGNvbnZlcnNpb247XG59O1xuXG4iLCIndXNlIHN0cmljdCdcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdFwiYWxpY2VibHVlXCI6IFsyNDAsIDI0OCwgMjU1XSxcclxuXHRcImFudGlxdWV3aGl0ZVwiOiBbMjUwLCAyMzUsIDIxNV0sXHJcblx0XCJhcXVhXCI6IFswLCAyNTUsIDI1NV0sXHJcblx0XCJhcXVhbWFyaW5lXCI6IFsxMjcsIDI1NSwgMjEyXSxcclxuXHRcImF6dXJlXCI6IFsyNDAsIDI1NSwgMjU1XSxcclxuXHRcImJlaWdlXCI6IFsyNDUsIDI0NSwgMjIwXSxcclxuXHRcImJpc3F1ZVwiOiBbMjU1LCAyMjgsIDE5Nl0sXHJcblx0XCJibGFja1wiOiBbMCwgMCwgMF0sXHJcblx0XCJibGFuY2hlZGFsbW9uZFwiOiBbMjU1LCAyMzUsIDIwNV0sXHJcblx0XCJibHVlXCI6IFswLCAwLCAyNTVdLFxyXG5cdFwiYmx1ZXZpb2xldFwiOiBbMTM4LCA0MywgMjI2XSxcclxuXHRcImJyb3duXCI6IFsxNjUsIDQyLCA0Ml0sXHJcblx0XCJidXJseXdvb2RcIjogWzIyMiwgMTg0LCAxMzVdLFxyXG5cdFwiY2FkZXRibHVlXCI6IFs5NSwgMTU4LCAxNjBdLFxyXG5cdFwiY2hhcnRyZXVzZVwiOiBbMTI3LCAyNTUsIDBdLFxyXG5cdFwiY2hvY29sYXRlXCI6IFsyMTAsIDEwNSwgMzBdLFxyXG5cdFwiY29yYWxcIjogWzI1NSwgMTI3LCA4MF0sXHJcblx0XCJjb3JuZmxvd2VyYmx1ZVwiOiBbMTAwLCAxNDksIDIzN10sXHJcblx0XCJjb3Juc2lsa1wiOiBbMjU1LCAyNDgsIDIyMF0sXHJcblx0XCJjcmltc29uXCI6IFsyMjAsIDIwLCA2MF0sXHJcblx0XCJjeWFuXCI6IFswLCAyNTUsIDI1NV0sXHJcblx0XCJkYXJrYmx1ZVwiOiBbMCwgMCwgMTM5XSxcclxuXHRcImRhcmtjeWFuXCI6IFswLCAxMzksIDEzOV0sXHJcblx0XCJkYXJrZ29sZGVucm9kXCI6IFsxODQsIDEzNCwgMTFdLFxyXG5cdFwiZGFya2dyYXlcIjogWzE2OSwgMTY5LCAxNjldLFxyXG5cdFwiZGFya2dyZWVuXCI6IFswLCAxMDAsIDBdLFxyXG5cdFwiZGFya2dyZXlcIjogWzE2OSwgMTY5LCAxNjldLFxyXG5cdFwiZGFya2toYWtpXCI6IFsxODksIDE4MywgMTA3XSxcclxuXHRcImRhcmttYWdlbnRhXCI6IFsxMzksIDAsIDEzOV0sXHJcblx0XCJkYXJrb2xpdmVncmVlblwiOiBbODUsIDEwNywgNDddLFxyXG5cdFwiZGFya29yYW5nZVwiOiBbMjU1LCAxNDAsIDBdLFxyXG5cdFwiZGFya29yY2hpZFwiOiBbMTUzLCA1MCwgMjA0XSxcclxuXHRcImRhcmtyZWRcIjogWzEzOSwgMCwgMF0sXHJcblx0XCJkYXJrc2FsbW9uXCI6IFsyMzMsIDE1MCwgMTIyXSxcclxuXHRcImRhcmtzZWFncmVlblwiOiBbMTQzLCAxODgsIDE0M10sXHJcblx0XCJkYXJrc2xhdGVibHVlXCI6IFs3MiwgNjEsIDEzOV0sXHJcblx0XCJkYXJrc2xhdGVncmF5XCI6IFs0NywgNzksIDc5XSxcclxuXHRcImRhcmtzbGF0ZWdyZXlcIjogWzQ3LCA3OSwgNzldLFxyXG5cdFwiZGFya3R1cnF1b2lzZVwiOiBbMCwgMjA2LCAyMDldLFxyXG5cdFwiZGFya3Zpb2xldFwiOiBbMTQ4LCAwLCAyMTFdLFxyXG5cdFwiZGVlcHBpbmtcIjogWzI1NSwgMjAsIDE0N10sXHJcblx0XCJkZWVwc2t5Ymx1ZVwiOiBbMCwgMTkxLCAyNTVdLFxyXG5cdFwiZGltZ3JheVwiOiBbMTA1LCAxMDUsIDEwNV0sXHJcblx0XCJkaW1ncmV5XCI6IFsxMDUsIDEwNSwgMTA1XSxcclxuXHRcImRvZGdlcmJsdWVcIjogWzMwLCAxNDQsIDI1NV0sXHJcblx0XCJmaXJlYnJpY2tcIjogWzE3OCwgMzQsIDM0XSxcclxuXHRcImZsb3JhbHdoaXRlXCI6IFsyNTUsIDI1MCwgMjQwXSxcclxuXHRcImZvcmVzdGdyZWVuXCI6IFszNCwgMTM5LCAzNF0sXHJcblx0XCJmdWNoc2lhXCI6IFsyNTUsIDAsIDI1NV0sXHJcblx0XCJnYWluc2Jvcm9cIjogWzIyMCwgMjIwLCAyMjBdLFxyXG5cdFwiZ2hvc3R3aGl0ZVwiOiBbMjQ4LCAyNDgsIDI1NV0sXHJcblx0XCJnb2xkXCI6IFsyNTUsIDIxNSwgMF0sXHJcblx0XCJnb2xkZW5yb2RcIjogWzIxOCwgMTY1LCAzMl0sXHJcblx0XCJncmF5XCI6IFsxMjgsIDEyOCwgMTI4XSxcclxuXHRcImdyZWVuXCI6IFswLCAxMjgsIDBdLFxyXG5cdFwiZ3JlZW55ZWxsb3dcIjogWzE3MywgMjU1LCA0N10sXHJcblx0XCJncmV5XCI6IFsxMjgsIDEyOCwgMTI4XSxcclxuXHRcImhvbmV5ZGV3XCI6IFsyNDAsIDI1NSwgMjQwXSxcclxuXHRcImhvdHBpbmtcIjogWzI1NSwgMTA1LCAxODBdLFxyXG5cdFwiaW5kaWFucmVkXCI6IFsyMDUsIDkyLCA5Ml0sXHJcblx0XCJpbmRpZ29cIjogWzc1LCAwLCAxMzBdLFxyXG5cdFwiaXZvcnlcIjogWzI1NSwgMjU1LCAyNDBdLFxyXG5cdFwia2hha2lcIjogWzI0MCwgMjMwLCAxNDBdLFxyXG5cdFwibGF2ZW5kZXJcIjogWzIzMCwgMjMwLCAyNTBdLFxyXG5cdFwibGF2ZW5kZXJibHVzaFwiOiBbMjU1LCAyNDAsIDI0NV0sXHJcblx0XCJsYXduZ3JlZW5cIjogWzEyNCwgMjUyLCAwXSxcclxuXHRcImxlbW9uY2hpZmZvblwiOiBbMjU1LCAyNTAsIDIwNV0sXHJcblx0XCJsaWdodGJsdWVcIjogWzE3MywgMjE2LCAyMzBdLFxyXG5cdFwibGlnaHRjb3JhbFwiOiBbMjQwLCAxMjgsIDEyOF0sXHJcblx0XCJsaWdodGN5YW5cIjogWzIyNCwgMjU1LCAyNTVdLFxyXG5cdFwibGlnaHRnb2xkZW5yb2R5ZWxsb3dcIjogWzI1MCwgMjUwLCAyMTBdLFxyXG5cdFwibGlnaHRncmF5XCI6IFsyMTEsIDIxMSwgMjExXSxcclxuXHRcImxpZ2h0Z3JlZW5cIjogWzE0NCwgMjM4LCAxNDRdLFxyXG5cdFwibGlnaHRncmV5XCI6IFsyMTEsIDIxMSwgMjExXSxcclxuXHRcImxpZ2h0cGlua1wiOiBbMjU1LCAxODIsIDE5M10sXHJcblx0XCJsaWdodHNhbG1vblwiOiBbMjU1LCAxNjAsIDEyMl0sXHJcblx0XCJsaWdodHNlYWdyZWVuXCI6IFszMiwgMTc4LCAxNzBdLFxyXG5cdFwibGlnaHRza3libHVlXCI6IFsxMzUsIDIwNiwgMjUwXSxcclxuXHRcImxpZ2h0c2xhdGVncmF5XCI6IFsxMTksIDEzNiwgMTUzXSxcclxuXHRcImxpZ2h0c2xhdGVncmV5XCI6IFsxMTksIDEzNiwgMTUzXSxcclxuXHRcImxpZ2h0c3RlZWxibHVlXCI6IFsxNzYsIDE5NiwgMjIyXSxcclxuXHRcImxpZ2h0eWVsbG93XCI6IFsyNTUsIDI1NSwgMjI0XSxcclxuXHRcImxpbWVcIjogWzAsIDI1NSwgMF0sXHJcblx0XCJsaW1lZ3JlZW5cIjogWzUwLCAyMDUsIDUwXSxcclxuXHRcImxpbmVuXCI6IFsyNTAsIDI0MCwgMjMwXSxcclxuXHRcIm1hZ2VudGFcIjogWzI1NSwgMCwgMjU1XSxcclxuXHRcIm1hcm9vblwiOiBbMTI4LCAwLCAwXSxcclxuXHRcIm1lZGl1bWFxdWFtYXJpbmVcIjogWzEwMiwgMjA1LCAxNzBdLFxyXG5cdFwibWVkaXVtYmx1ZVwiOiBbMCwgMCwgMjA1XSxcclxuXHRcIm1lZGl1bW9yY2hpZFwiOiBbMTg2LCA4NSwgMjExXSxcclxuXHRcIm1lZGl1bXB1cnBsZVwiOiBbMTQ3LCAxMTIsIDIxOV0sXHJcblx0XCJtZWRpdW1zZWFncmVlblwiOiBbNjAsIDE3OSwgMTEzXSxcclxuXHRcIm1lZGl1bXNsYXRlYmx1ZVwiOiBbMTIzLCAxMDQsIDIzOF0sXHJcblx0XCJtZWRpdW1zcHJpbmdncmVlblwiOiBbMCwgMjUwLCAxNTRdLFxyXG5cdFwibWVkaXVtdHVycXVvaXNlXCI6IFs3MiwgMjA5LCAyMDRdLFxyXG5cdFwibWVkaXVtdmlvbGV0cmVkXCI6IFsxOTksIDIxLCAxMzNdLFxyXG5cdFwibWlkbmlnaHRibHVlXCI6IFsyNSwgMjUsIDExMl0sXHJcblx0XCJtaW50Y3JlYW1cIjogWzI0NSwgMjU1LCAyNTBdLFxyXG5cdFwibWlzdHlyb3NlXCI6IFsyNTUsIDIyOCwgMjI1XSxcclxuXHRcIm1vY2Nhc2luXCI6IFsyNTUsIDIyOCwgMTgxXSxcclxuXHRcIm5hdmFqb3doaXRlXCI6IFsyNTUsIDIyMiwgMTczXSxcclxuXHRcIm5hdnlcIjogWzAsIDAsIDEyOF0sXHJcblx0XCJvbGRsYWNlXCI6IFsyNTMsIDI0NSwgMjMwXSxcclxuXHRcIm9saXZlXCI6IFsxMjgsIDEyOCwgMF0sXHJcblx0XCJvbGl2ZWRyYWJcIjogWzEwNywgMTQyLCAzNV0sXHJcblx0XCJvcmFuZ2VcIjogWzI1NSwgMTY1LCAwXSxcclxuXHRcIm9yYW5nZXJlZFwiOiBbMjU1LCA2OSwgMF0sXHJcblx0XCJvcmNoaWRcIjogWzIxOCwgMTEyLCAyMTRdLFxyXG5cdFwicGFsZWdvbGRlbnJvZFwiOiBbMjM4LCAyMzIsIDE3MF0sXHJcblx0XCJwYWxlZ3JlZW5cIjogWzE1MiwgMjUxLCAxNTJdLFxyXG5cdFwicGFsZXR1cnF1b2lzZVwiOiBbMTc1LCAyMzgsIDIzOF0sXHJcblx0XCJwYWxldmlvbGV0cmVkXCI6IFsyMTksIDExMiwgMTQ3XSxcclxuXHRcInBhcGF5YXdoaXBcIjogWzI1NSwgMjM5LCAyMTNdLFxyXG5cdFwicGVhY2hwdWZmXCI6IFsyNTUsIDIxOCwgMTg1XSxcclxuXHRcInBlcnVcIjogWzIwNSwgMTMzLCA2M10sXHJcblx0XCJwaW5rXCI6IFsyNTUsIDE5MiwgMjAzXSxcclxuXHRcInBsdW1cIjogWzIyMSwgMTYwLCAyMjFdLFxyXG5cdFwicG93ZGVyYmx1ZVwiOiBbMTc2LCAyMjQsIDIzMF0sXHJcblx0XCJwdXJwbGVcIjogWzEyOCwgMCwgMTI4XSxcclxuXHRcInJlYmVjY2FwdXJwbGVcIjogWzEwMiwgNTEsIDE1M10sXHJcblx0XCJyZWRcIjogWzI1NSwgMCwgMF0sXHJcblx0XCJyb3N5YnJvd25cIjogWzE4OCwgMTQzLCAxNDNdLFxyXG5cdFwicm95YWxibHVlXCI6IFs2NSwgMTA1LCAyMjVdLFxyXG5cdFwic2FkZGxlYnJvd25cIjogWzEzOSwgNjksIDE5XSxcclxuXHRcInNhbG1vblwiOiBbMjUwLCAxMjgsIDExNF0sXHJcblx0XCJzYW5keWJyb3duXCI6IFsyNDQsIDE2NCwgOTZdLFxyXG5cdFwic2VhZ3JlZW5cIjogWzQ2LCAxMzksIDg3XSxcclxuXHRcInNlYXNoZWxsXCI6IFsyNTUsIDI0NSwgMjM4XSxcclxuXHRcInNpZW5uYVwiOiBbMTYwLCA4MiwgNDVdLFxyXG5cdFwic2lsdmVyXCI6IFsxOTIsIDE5MiwgMTkyXSxcclxuXHRcInNreWJsdWVcIjogWzEzNSwgMjA2LCAyMzVdLFxyXG5cdFwic2xhdGVibHVlXCI6IFsxMDYsIDkwLCAyMDVdLFxyXG5cdFwic2xhdGVncmF5XCI6IFsxMTIsIDEyOCwgMTQ0XSxcclxuXHRcInNsYXRlZ3JleVwiOiBbMTEyLCAxMjgsIDE0NF0sXHJcblx0XCJzbm93XCI6IFsyNTUsIDI1MCwgMjUwXSxcclxuXHRcInNwcmluZ2dyZWVuXCI6IFswLCAyNTUsIDEyN10sXHJcblx0XCJzdGVlbGJsdWVcIjogWzcwLCAxMzAsIDE4MF0sXHJcblx0XCJ0YW5cIjogWzIxMCwgMTgwLCAxNDBdLFxyXG5cdFwidGVhbFwiOiBbMCwgMTI4LCAxMjhdLFxyXG5cdFwidGhpc3RsZVwiOiBbMjE2LCAxOTEsIDIxNl0sXHJcblx0XCJ0b21hdG9cIjogWzI1NSwgOTksIDcxXSxcclxuXHRcInR1cnF1b2lzZVwiOiBbNjQsIDIyNCwgMjA4XSxcclxuXHRcInZpb2xldFwiOiBbMjM4LCAxMzAsIDIzOF0sXHJcblx0XCJ3aGVhdFwiOiBbMjQ1LCAyMjIsIDE3OV0sXHJcblx0XCJ3aGl0ZVwiOiBbMjU1LCAyNTUsIDI1NV0sXHJcblx0XCJ3aGl0ZXNtb2tlXCI6IFsyNDUsIDI0NSwgMjQ1XSxcclxuXHRcInllbGxvd1wiOiBbMjU1LCAyNTUsIDBdLFxyXG5cdFwieWVsbG93Z3JlZW5cIjogWzE1NCwgMjA1LCA1MF1cclxufTtcclxuIiwiLyogTUlUIGxpY2Vuc2UgKi9cbnZhciBjb2xvck5hbWVzID0gcmVxdWlyZSgnY29sb3ItbmFtZScpO1xudmFyIHN3aXp6bGUgPSByZXF1aXJlKCdzaW1wbGUtc3dpenpsZScpO1xuXG52YXIgcmV2ZXJzZU5hbWVzID0ge307XG5cbi8vIGNyZWF0ZSBhIGxpc3Qgb2YgcmV2ZXJzZSBjb2xvciBuYW1lc1xuZm9yICh2YXIgbmFtZSBpbiBjb2xvck5hbWVzKSB7XG5cdGlmIChjb2xvck5hbWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdFx0cmV2ZXJzZU5hbWVzW2NvbG9yTmFtZXNbbmFtZV1dID0gbmFtZTtcblx0fVxufVxuXG52YXIgY3MgPSBtb2R1bGUuZXhwb3J0cyA9IHtcblx0dG86IHt9LFxuXHRnZXQ6IHt9XG59O1xuXG5jcy5nZXQgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG5cdHZhciBwcmVmaXggPSBzdHJpbmcuc3Vic3RyaW5nKDAsIDMpLnRvTG93ZXJDYXNlKCk7XG5cdHZhciB2YWw7XG5cdHZhciBtb2RlbDtcblx0c3dpdGNoIChwcmVmaXgpIHtcblx0XHRjYXNlICdoc2wnOlxuXHRcdFx0dmFsID0gY3MuZ2V0LmhzbChzdHJpbmcpO1xuXHRcdFx0bW9kZWwgPSAnaHNsJztcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2h3Yic6XG5cdFx0XHR2YWwgPSBjcy5nZXQuaHdiKHN0cmluZyk7XG5cdFx0XHRtb2RlbCA9ICdod2InO1xuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHZhbCA9IGNzLmdldC5yZ2Ioc3RyaW5nKTtcblx0XHRcdG1vZGVsID0gJ3JnYic7XG5cdFx0XHRicmVhaztcblx0fVxuXG5cdGlmICghdmFsKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4ge21vZGVsOiBtb2RlbCwgdmFsdWU6IHZhbH07XG59O1xuXG5jcy5nZXQucmdiID0gZnVuY3Rpb24gKHN0cmluZykge1xuXHRpZiAoIXN0cmluZykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0dmFyIGFiYnIgPSAvXiMoW2EtZjAtOV17Myw0fSkkL2k7XG5cdHZhciBoZXggPSAvXiMoW2EtZjAtOV17Nn0pKFthLWYwLTldezJ9KT8kL2k7XG5cdHZhciByZ2JhID0gL15yZ2JhP1xcKFxccyooWystXT9cXGQrKVxccyosXFxzKihbKy1dP1xcZCspXFxzKixcXHMqKFsrLV0/XFxkKylcXHMqKD86LFxccyooWystXT9bXFxkXFwuXSspXFxzKik/XFwpJC87XG5cdHZhciBwZXIgPSAvXnJnYmE/XFwoXFxzKihbKy1dP1tcXGRcXC5dKylcXCVcXHMqLFxccyooWystXT9bXFxkXFwuXSspXFwlXFxzKixcXHMqKFsrLV0/W1xcZFxcLl0rKVxcJVxccyooPzosXFxzKihbKy1dP1tcXGRcXC5dKylcXHMqKT9cXCkkLztcblx0dmFyIGtleXdvcmQgPSAvKFxcRCspLztcblxuXHR2YXIgcmdiID0gWzAsIDAsIDAsIDFdO1xuXHR2YXIgbWF0Y2g7XG5cdHZhciBpO1xuXHR2YXIgaGV4QWxwaGE7XG5cblx0aWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKGhleCkpIHtcblx0XHRoZXhBbHBoYSA9IG1hdGNoWzJdO1xuXHRcdG1hdGNoID0gbWF0Y2hbMV07XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cdFx0XHQvLyBodHRwczovL2pzcGVyZi5jb20vc2xpY2UtdnMtc3Vic3RyLXZzLXN1YnN0cmluZy1tZXRob2RzLWxvbmctc3RyaW5nLzE5XG5cdFx0XHR2YXIgaTIgPSBpICogMjtcblx0XHRcdHJnYltpXSA9IHBhcnNlSW50KG1hdGNoLnNsaWNlKGkyLCBpMiArIDIpLCAxNik7XG5cdFx0fVxuXG5cdFx0aWYgKGhleEFscGhhKSB7XG5cdFx0XHRyZ2JbM10gPSBNYXRoLnJvdW5kKChwYXJzZUludChoZXhBbHBoYSwgMTYpIC8gMjU1KSAqIDEwMCkgLyAxMDA7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKGFiYnIpKSB7XG5cdFx0bWF0Y2ggPSBtYXRjaFsxXTtcblx0XHRoZXhBbHBoYSA9IG1hdGNoWzNdO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuXHRcdFx0cmdiW2ldID0gcGFyc2VJbnQobWF0Y2hbaV0gKyBtYXRjaFtpXSwgMTYpO1xuXHRcdH1cblxuXHRcdGlmIChoZXhBbHBoYSkge1xuXHRcdFx0cmdiWzNdID0gTWF0aC5yb3VuZCgocGFyc2VJbnQoaGV4QWxwaGEgKyBoZXhBbHBoYSwgMTYpIC8gMjU1KSAqIDEwMCkgLyAxMDA7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKHJnYmEpKSB7XG5cdFx0Zm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuXHRcdFx0cmdiW2ldID0gcGFyc2VJbnQobWF0Y2hbaSArIDFdLCAwKTtcblx0XHR9XG5cblx0XHRpZiAobWF0Y2hbNF0pIHtcblx0XHRcdHJnYlszXSA9IHBhcnNlRmxvYXQobWF0Y2hbNF0pO1xuXHRcdH1cblx0fSBlbHNlIGlmIChtYXRjaCA9IHN0cmluZy5tYXRjaChwZXIpKSB7XG5cdFx0Zm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuXHRcdFx0cmdiW2ldID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KG1hdGNoW2kgKyAxXSkgKiAyLjU1KTtcblx0XHR9XG5cblx0XHRpZiAobWF0Y2hbNF0pIHtcblx0XHRcdHJnYlszXSA9IHBhcnNlRmxvYXQobWF0Y2hbNF0pO1xuXHRcdH1cblx0fSBlbHNlIGlmIChtYXRjaCA9IHN0cmluZy5tYXRjaChrZXl3b3JkKSkge1xuXHRcdGlmIChtYXRjaFsxXSA9PT0gJ3RyYW5zcGFyZW50Jykge1xuXHRcdFx0cmV0dXJuIFswLCAwLCAwLCAwXTtcblx0XHR9XG5cblx0XHRyZ2IgPSBjb2xvck5hbWVzW21hdGNoWzFdXTtcblxuXHRcdGlmICghcmdiKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRyZ2JbM10gPSAxO1xuXG5cdFx0cmV0dXJuIHJnYjtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRyZ2JbaV0gPSBjbGFtcChyZ2JbaV0sIDAsIDI1NSk7XG5cdH1cblx0cmdiWzNdID0gY2xhbXAocmdiWzNdLCAwLCAxKTtcblxuXHRyZXR1cm4gcmdiO1xufTtcblxuY3MuZ2V0LmhzbCA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcblx0aWYgKCFzdHJpbmcpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHZhciBoc2wgPSAvXmhzbGE/XFwoXFxzKihbKy1dPyg/OlxcZCpcXC4pP1xcZCspKD86ZGVnKT9cXHMqLFxccyooWystXT9bXFxkXFwuXSspJVxccyosXFxzKihbKy1dP1tcXGRcXC5dKyklXFxzKig/OixcXHMqKFsrLV0/W1xcZFxcLl0rKVxccyopP1xcKSQvO1xuXHR2YXIgbWF0Y2ggPSBzdHJpbmcubWF0Y2goaHNsKTtcblxuXHRpZiAobWF0Y2gpIHtcblx0XHR2YXIgYWxwaGEgPSBwYXJzZUZsb2F0KG1hdGNoWzRdKTtcblx0XHR2YXIgaCA9IChwYXJzZUZsb2F0KG1hdGNoWzFdKSArIDM2MCkgJSAzNjA7XG5cdFx0dmFyIHMgPSBjbGFtcChwYXJzZUZsb2F0KG1hdGNoWzJdKSwgMCwgMTAwKTtcblx0XHR2YXIgbCA9IGNsYW1wKHBhcnNlRmxvYXQobWF0Y2hbM10pLCAwLCAxMDApO1xuXHRcdHZhciBhID0gY2xhbXAoaXNOYU4oYWxwaGEpID8gMSA6IGFscGhhLCAwLCAxKTtcblxuXHRcdHJldHVybiBbaCwgcywgbCwgYV07XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbmNzLmdldC5od2IgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG5cdGlmICghc3RyaW5nKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHR2YXIgaHdiID0gL15od2JcXChcXHMqKFsrLV0/XFxkKltcXC5dP1xcZCspKD86ZGVnKT9cXHMqLFxccyooWystXT9bXFxkXFwuXSspJVxccyosXFxzKihbKy1dP1tcXGRcXC5dKyklXFxzKig/OixcXHMqKFsrLV0/W1xcZFxcLl0rKVxccyopP1xcKSQvO1xuXHR2YXIgbWF0Y2ggPSBzdHJpbmcubWF0Y2goaHdiKTtcblxuXHRpZiAobWF0Y2gpIHtcblx0XHR2YXIgYWxwaGEgPSBwYXJzZUZsb2F0KG1hdGNoWzRdKTtcblx0XHR2YXIgaCA9ICgocGFyc2VGbG9hdChtYXRjaFsxXSkgJSAzNjApICsgMzYwKSAlIDM2MDtcblx0XHR2YXIgdyA9IGNsYW1wKHBhcnNlRmxvYXQobWF0Y2hbMl0pLCAwLCAxMDApO1xuXHRcdHZhciBiID0gY2xhbXAocGFyc2VGbG9hdChtYXRjaFszXSksIDAsIDEwMCk7XG5cdFx0dmFyIGEgPSBjbGFtcChpc05hTihhbHBoYSkgPyAxIDogYWxwaGEsIDAsIDEpO1xuXHRcdHJldHVybiBbaCwgdywgYiwgYV07XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbmNzLnRvLmhleCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHJnYmEgPSBzd2l6emxlKGFyZ3VtZW50cyk7XG5cblx0cmV0dXJuIChcblx0XHQnIycgK1xuXHRcdGhleERvdWJsZShyZ2JhWzBdKSArXG5cdFx0aGV4RG91YmxlKHJnYmFbMV0pICtcblx0XHRoZXhEb3VibGUocmdiYVsyXSkgK1xuXHRcdChyZ2JhWzNdIDwgMVxuXHRcdFx0PyAoaGV4RG91YmxlKE1hdGgucm91bmQocmdiYVszXSAqIDI1NSkpKVxuXHRcdFx0OiAnJylcblx0KTtcbn07XG5cbmNzLnRvLnJnYiA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHJnYmEgPSBzd2l6emxlKGFyZ3VtZW50cyk7XG5cblx0cmV0dXJuIHJnYmEubGVuZ3RoIDwgNCB8fCByZ2JhWzNdID09PSAxXG5cdFx0PyAncmdiKCcgKyBNYXRoLnJvdW5kKHJnYmFbMF0pICsgJywgJyArIE1hdGgucm91bmQocmdiYVsxXSkgKyAnLCAnICsgTWF0aC5yb3VuZChyZ2JhWzJdKSArICcpJ1xuXHRcdDogJ3JnYmEoJyArIE1hdGgucm91bmQocmdiYVswXSkgKyAnLCAnICsgTWF0aC5yb3VuZChyZ2JhWzFdKSArICcsICcgKyBNYXRoLnJvdW5kKHJnYmFbMl0pICsgJywgJyArIHJnYmFbM10gKyAnKSc7XG59O1xuXG5jcy50by5yZ2IucGVyY2VudCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHJnYmEgPSBzd2l6emxlKGFyZ3VtZW50cyk7XG5cblx0dmFyIHIgPSBNYXRoLnJvdW5kKHJnYmFbMF0gLyAyNTUgKiAxMDApO1xuXHR2YXIgZyA9IE1hdGgucm91bmQocmdiYVsxXSAvIDI1NSAqIDEwMCk7XG5cdHZhciBiID0gTWF0aC5yb3VuZChyZ2JhWzJdIC8gMjU1ICogMTAwKTtcblxuXHRyZXR1cm4gcmdiYS5sZW5ndGggPCA0IHx8IHJnYmFbM10gPT09IDFcblx0XHQ/ICdyZ2IoJyArIHIgKyAnJSwgJyArIGcgKyAnJSwgJyArIGIgKyAnJSknXG5cdFx0OiAncmdiYSgnICsgciArICclLCAnICsgZyArICclLCAnICsgYiArICclLCAnICsgcmdiYVszXSArICcpJztcbn07XG5cbmNzLnRvLmhzbCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIGhzbGEgPSBzd2l6emxlKGFyZ3VtZW50cyk7XG5cdHJldHVybiBoc2xhLmxlbmd0aCA8IDQgfHwgaHNsYVszXSA9PT0gMVxuXHRcdD8gJ2hzbCgnICsgaHNsYVswXSArICcsICcgKyBoc2xhWzFdICsgJyUsICcgKyBoc2xhWzJdICsgJyUpJ1xuXHRcdDogJ2hzbGEoJyArIGhzbGFbMF0gKyAnLCAnICsgaHNsYVsxXSArICclLCAnICsgaHNsYVsyXSArICclLCAnICsgaHNsYVszXSArICcpJztcbn07XG5cbi8vIGh3YiBpcyBhIGJpdCBkaWZmZXJlbnQgdGhhbiByZ2IoYSkgJiBoc2woYSkgc2luY2UgdGhlcmUgaXMgbm8gYWxwaGEgc3BlY2lmaWMgc3ludGF4XG4vLyAoaHdiIGhhdmUgYWxwaGEgb3B0aW9uYWwgJiAxIGlzIGRlZmF1bHQgdmFsdWUpXG5jcy50by5od2IgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBod2JhID0gc3dpenpsZShhcmd1bWVudHMpO1xuXG5cdHZhciBhID0gJyc7XG5cdGlmIChod2JhLmxlbmd0aCA+PSA0ICYmIGh3YmFbM10gIT09IDEpIHtcblx0XHRhID0gJywgJyArIGh3YmFbM107XG5cdH1cblxuXHRyZXR1cm4gJ2h3YignICsgaHdiYVswXSArICcsICcgKyBod2JhWzFdICsgJyUsICcgKyBod2JhWzJdICsgJyUnICsgYSArICcpJztcbn07XG5cbmNzLnRvLmtleXdvcmQgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHJldHVybiByZXZlcnNlTmFtZXNbcmdiLnNsaWNlKDAsIDMpXTtcbn07XG5cbi8vIGhlbHBlcnNcbmZ1bmN0aW9uIGNsYW1wKG51bSwgbWluLCBtYXgpIHtcblx0cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG1pbiwgbnVtKSwgbWF4KTtcbn1cblxuZnVuY3Rpb24gaGV4RG91YmxlKG51bSkge1xuXHR2YXIgc3RyID0gbnVtLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHRyZXR1cm4gKHN0ci5sZW5ndGggPCAyKSA/ICcwJyArIHN0ciA6IHN0cjtcbn1cbiIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgdjQuMi41KzdmMmI1MjZkXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB4O1xuICByZXR1cm4geCAhPT0gbnVsbCAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cblxuXG52YXIgX2lzQXJyYXkgPSB2b2lkIDA7XG5pZiAoQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG59IGVsc2Uge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdm9pZCAwO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdm9pZCAwO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIG5vZGVcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xufVxuXG4vLyB2ZXJ0eFxuZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcbiAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHZlcnR4ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKS5yZXF1aXJlKCd2ZXJ0eCcpO1xuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG4gIH1cbn1cblxudmFyIHNjaGVkdWxlRmx1c2ggPSB2b2lkIDA7XG4vLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuaWYgKGlzTm9kZSkge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG59IGVsc2Uge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuXG4gIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWFrZVByb21pc2UoY2hpbGQpO1xuICB9XG5cbiAgdmFyIF9zdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cblxuICBpZiAoX3N0YXRlKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUkMShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSB7IGVycm9yOiBudWxsIH07XG5cbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4kJDEsIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuJCQxLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJDEgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlJDEpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkMSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgVFJZX0NBVENIX0VSUk9SLmVycm9yKTtcbiAgICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdm9pZCAwLFxuICAgICAgY2FsbGJhY2sgPSB2b2lkIDAsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdm9pZCAwLFxuICAgICAgZXJyb3IgPSB2b2lkIDAsXG4gICAgICBzdWNjZWVkZWQgPSB2b2lkIDAsXG4gICAgICBmYWlsZWQgPSB2b2lkIDA7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAvLyBub29wXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufVxuXG52YXIgRW51bWVyYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gICAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcbiAgICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgICB0aGlzLl9lbnVtZXJhdGUoaW5wdXQpO1xuICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICAgIH1cbiAgfVxuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiBfZW51bWVyYXRlKGlucHV0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIF9lYWNoRW50cnkoZW50cnksIGkpIHtcbiAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gICAgdmFyIHJlc29sdmUkJDEgPSBjLnJlc29sdmU7XG5cblxuICAgIGlmIChyZXNvbHZlJCQxID09PSByZXNvbHZlJDEpIHtcbiAgICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlJDEpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcbiAgICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJDEpIHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSQkMShlbnRyeSk7XG4gICAgICAgIH0pLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJDEoZW50cnkpLCBpKTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIF9zZXR0bGVkQXQoc3RhdGUsIGksIHZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cblxuICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9XG4gIH07XG5cbiAgRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIF93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSkge1xuICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBFbnVtZXJhdG9yO1xufSgpO1xuXG4vKipcbiAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcbiAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdO1xuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2VcbiAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcihcIjJcIikpO1xuICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4gIEBzdGF0aWNcbiovXG5mdW5jdGlvbiBhbGwoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IodGhpcywgZW50cmllcykucHJvbWlzZTtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXG4gIH0pO1xuICBgYGBcblxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcbiAgYGBgXG5cbiAgQG1ldGhvZCByYWNlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG4gIHByb21pc2UgdG8gc2V0dGxlLlxuKi9cbmZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShlbnRyaWVzKSkge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuXG4gIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlamVjdFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdCQxKHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cblxudmFyIFByb21pc2UkMSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICAgIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gICAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgfSk7XG4gIGBgYFxuICAgQ2hhaW5pbmdcbiAgLS0tLS0tLS1cbiAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gdXNlci5uYW1lO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgfSk7XG4gICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICB9KTtcbiAgYGBgXG4gIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICB9KTtcbiAgYGBgXG4gICBBc3NpbWlsYXRpb25cbiAgLS0tLS0tLS0tLS0tXG4gICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgfSk7XG4gIGBgYFxuICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG4gICBgYGBqc1xuICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICB9KTtcbiAgYGBgXG4gICBTaW1wbGUgRXhhbXBsZVxuICAtLS0tLS0tLS0tLS0tLVxuICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICAgYGBgamF2YXNjcmlwdFxuICBsZXQgcmVzdWx0O1xuICAgdHJ5IHtcbiAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgLy8gc3VjY2Vzc1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAgIC8vIGZhaWx1cmVcbiAgfVxuICBgYGBcbiAgIEVycmJhY2sgRXhhbXBsZVxuICAgYGBganNcbiAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgaWYgKGVycikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfVxuICB9KTtcbiAgYGBgXG4gICBQcm9taXNlIEV4YW1wbGU7XG4gICBgYGBqYXZhc2NyaXB0XG4gIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gc3VjY2Vzc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIGZhaWx1cmVcbiAgfSk7XG4gIGBgYFxuICAgQWR2YW5jZWQgRXhhbXBsZVxuICAtLS0tLS0tLS0tLS0tLVxuICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICAgYGBgamF2YXNjcmlwdFxuICBsZXQgYXV0aG9yLCBib29rcztcbiAgIHRyeSB7XG4gICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgLy8gc3VjY2Vzc1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAgIC8vIGZhaWx1cmVcbiAgfVxuICBgYGBcbiAgIEVycmJhY2sgRXhhbXBsZVxuICAgYGBganNcbiAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgIH1cbiAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG4gICB9XG4gICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBmYWlsdXJlKGVycik7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9XG4gIH0pO1xuICBgYGBcbiAgIFByb21pc2UgRXhhbXBsZTtcbiAgIGBgYGphdmFzY3JpcHRcbiAgZmluZEF1dGhvcigpLlxuICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgLy8gZm91bmQgYm9va3NcbiAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9KTtcbiAgYGBgXG4gICBAbWV0aG9kIHRoZW5cbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cbiAgLyoqXG4gIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cbiAgYGBganNcbiAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgfVxuICAvLyBzeW5jaHJvbm91c1xuICB0cnkge1xuICBmaW5kQXV0aG9yKCk7XG4gIH0gY2F0Y2gocmVhc29uKSB7XG4gIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH1cbiAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfSk7XG4gIGBgYFxuICBAbWV0aG9kIGNhdGNoXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuXG4gIFByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAgYGZpbmFsbHlgIHdpbGwgYmUgaW52b2tlZCByZWdhcmRsZXNzIG9mIHRoZSBwcm9taXNlJ3MgZmF0ZSBqdXN0IGFzIG5hdGl2ZVxuICAgIHRyeS9jYXRjaC9maW5hbGx5IGJlaGF2ZXNcbiAgXG4gICAgU3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkge1xuICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEF1dGhvcigpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmaW5kQXV0aG9yKCk7IC8vIHN1Y2NlZWQgb3IgZmFpbFxuICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gYWx3YXlzIHJ1bnNcbiAgICAgIC8vIGRvZXNuJ3QgYWZmZWN0IHRoZSByZXR1cm4gdmFsdWVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEFzeW5jaHJvbm91cyBleGFtcGxlOlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgcmV0dXJuIGZpbmRPdGhlckF1dGhlcigpO1xuICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKXtcbiAgICAgIC8vIGF1dGhvciB3YXMgZWl0aGVyIGZvdW5kLCBvciBub3RcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBmaW5hbGx5XG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG5cbiAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uIF9maW5hbGx5KGNhbGxiYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IHByb21pc2UuY29uc3RydWN0b3I7XG5cbiAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3Rvci5yZXNvbHZlKGNhbGxiYWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGNhbGxiYWNrLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgcmV0dXJuIFByb21pc2U7XG59KCk7XG5cblByb21pc2UkMS5wcm90b3R5cGUudGhlbiA9IHRoZW47XG5Qcm9taXNlJDEuYWxsID0gYWxsO1xuUHJvbWlzZSQxLnJhY2UgPSByYWNlO1xuUHJvbWlzZSQxLnJlc29sdmUgPSByZXNvbHZlJDE7XG5Qcm9taXNlJDEucmVqZWN0ID0gcmVqZWN0JDE7XG5Qcm9taXNlJDEuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblByb21pc2UkMS5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlJDEuX2FzYXAgPSBhc2FwO1xuXG4vKmdsb2JhbCBzZWxmKi9cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICB2YXIgbG9jYWwgPSB2b2lkIDA7XG5cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBnbG9iYWw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWwgPSBzZWxmO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICB9XG4gIH1cblxuICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgaWYgKFApIHtcbiAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG4gICAgfVxuXG4gICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZSQxO1xufVxuXG4vLyBTdHJhbmdlIGNvbXBhdC4uXG5Qcm9taXNlJDEucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UkMS5Qcm9taXNlID0gUHJvbWlzZSQxO1xuXG5yZXR1cm4gUHJvbWlzZSQxO1xuXG59KSkpO1xuXG5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwXG4iLCJpbXBvcnQgKiBhcyBiYXNlIGZyb20gJy4vaGFuZGxlYmFycy9iYXNlJztcblxuLy8gRWFjaCBvZiB0aGVzZSBhdWdtZW50IHRoZSBIYW5kbGViYXJzIG9iamVjdC4gTm8gbmVlZCB0byBzZXR1cCBoZXJlLlxuLy8gKFRoaXMgaXMgZG9uZSB0byBlYXNpbHkgc2hhcmUgY29kZSBiZXR3ZWVuIGNvbW1vbmpzIGFuZCBicm93c2UgZW52cylcbmltcG9ydCBTYWZlU3RyaW5nIGZyb20gJy4vaGFuZGxlYmFycy9zYWZlLXN0cmluZyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vaGFuZGxlYmFycy9leGNlcHRpb24nO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi9oYW5kbGViYXJzL3V0aWxzJztcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSAnLi9oYW5kbGViYXJzL3J1bnRpbWUnO1xuXG5pbXBvcnQgbm9Db25mbGljdCBmcm9tICcuL2hhbmRsZWJhcnMvbm8tY29uZmxpY3QnO1xuXG4vLyBGb3IgY29tcGF0aWJpbGl0eSBhbmQgdXNhZ2Ugb3V0c2lkZSBvZiBtb2R1bGUgc3lzdGVtcywgbWFrZSB0aGUgSGFuZGxlYmFycyBvYmplY3QgYSBuYW1lc3BhY2VcbmZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgbGV0IGhiID0gbmV3IGJhc2UuSGFuZGxlYmFyc0Vudmlyb25tZW50KCk7XG5cbiAgVXRpbHMuZXh0ZW5kKGhiLCBiYXNlKTtcbiAgaGIuU2FmZVN0cmluZyA9IFNhZmVTdHJpbmc7XG4gIGhiLkV4Y2VwdGlvbiA9IEV4Y2VwdGlvbjtcbiAgaGIuVXRpbHMgPSBVdGlscztcbiAgaGIuZXNjYXBlRXhwcmVzc2lvbiA9IFV0aWxzLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgaGIuVk0gPSBydW50aW1lO1xuICBoYi50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7XG4gIH07XG5cbiAgcmV0dXJuIGhiO1xufVxuXG5sZXQgaW5zdCA9IGNyZWF0ZSgpO1xuaW5zdC5jcmVhdGUgPSBjcmVhdGU7XG5cbm5vQ29uZmxpY3QoaW5zdCk7XG5cbmluc3RbJ2RlZmF1bHQnXSA9IGluc3Q7XG5cbmV4cG9ydCBkZWZhdWx0IGluc3Q7XG4iLCJpbXBvcnQge2NyZWF0ZUZyYW1lLCBleHRlbmQsIHRvU3RyaW5nfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi9leGNlcHRpb24nO1xuaW1wb3J0IHtyZWdpc3RlckRlZmF1bHRIZWxwZXJzfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHtyZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzfSBmcm9tICcuL2RlY29yYXRvcnMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuL2xvZ2dlcic7XG5cbmV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzQuMC4xMic7XG5leHBvcnQgY29uc3QgQ09NUElMRVJfUkVWSVNJT04gPSA3O1xuXG5leHBvcnQgY29uc3QgUkVWSVNJT05fQ0hBTkdFUyA9IHtcbiAgMTogJzw9IDEuMC5yYy4yJywgLy8gMS4wLnJjLjIgaXMgYWN0dWFsbHkgcmV2MiBidXQgZG9lc24ndCByZXBvcnQgaXRcbiAgMjogJz09IDEuMC4wLXJjLjMnLFxuICAzOiAnPT0gMS4wLjAtcmMuNCcsXG4gIDQ6ICc9PSAxLngueCcsXG4gIDU6ICc9PSAyLjAuMC1hbHBoYS54JyxcbiAgNjogJz49IDIuMC4wLWJldGEuMScsXG4gIDc6ICc+PSA0LjAuMCdcbn07XG5cbmNvbnN0IG9iamVjdFR5cGUgPSAnW29iamVjdCBPYmplY3RdJztcblxuZXhwb3J0IGZ1bmN0aW9uIEhhbmRsZWJhcnNFbnZpcm9ubWVudChoZWxwZXJzLCBwYXJ0aWFscywgZGVjb3JhdG9ycykge1xuICB0aGlzLmhlbHBlcnMgPSBoZWxwZXJzIHx8IHt9O1xuICB0aGlzLnBhcnRpYWxzID0gcGFydGlhbHMgfHwge307XG4gIHRoaXMuZGVjb3JhdG9ycyA9IGRlY29yYXRvcnMgfHwge307XG5cbiAgcmVnaXN0ZXJEZWZhdWx0SGVscGVycyh0aGlzKTtcbiAgcmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyh0aGlzKTtcbn1cblxuSGFuZGxlYmFyc0Vudmlyb25tZW50LnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IEhhbmRsZWJhcnNFbnZpcm9ubWVudCxcblxuICBsb2dnZXI6IGxvZ2dlcixcbiAgbG9nOiBsb2dnZXIubG9nLFxuXG4gIHJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihuYW1lLCBmbikge1xuICAgIGlmICh0b1N0cmluZy5jYWxsKG5hbWUpID09PSBvYmplY3RUeXBlKSB7XG4gICAgICBpZiAoZm4pIHsgdGhyb3cgbmV3IEV4Y2VwdGlvbignQXJnIG5vdCBzdXBwb3J0ZWQgd2l0aCBtdWx0aXBsZSBoZWxwZXJzJyk7IH1cbiAgICAgIGV4dGVuZCh0aGlzLmhlbHBlcnMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhlbHBlcnNbbmFtZV0gPSBmbjtcbiAgICB9XG4gIH0sXG4gIHVucmVnaXN0ZXJIZWxwZXI6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5oZWxwZXJzW25hbWVdO1xuICB9LFxuXG4gIHJlZ2lzdGVyUGFydGlhbDogZnVuY3Rpb24obmFtZSwgcGFydGlhbCkge1xuICAgIGlmICh0b1N0cmluZy5jYWxsKG5hbWUpID09PSBvYmplY3RUeXBlKSB7XG4gICAgICBleHRlbmQodGhpcy5wYXJ0aWFscywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgcGFydGlhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihgQXR0ZW1wdGluZyB0byByZWdpc3RlciBhIHBhcnRpYWwgY2FsbGVkIFwiJHtuYW1lfVwiIGFzIHVuZGVmaW5lZGApO1xuICAgICAgfVxuICAgICAgdGhpcy5wYXJ0aWFsc1tuYW1lXSA9IHBhcnRpYWw7XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVyUGFydGlhbDogZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLnBhcnRpYWxzW25hbWVdO1xuICB9LFxuXG4gIHJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbihuYW1lLCBmbikge1xuICAgIGlmICh0b1N0cmluZy5jYWxsKG5hbWUpID09PSBvYmplY3RUeXBlKSB7XG4gICAgICBpZiAoZm4pIHsgdGhyb3cgbmV3IEV4Y2VwdGlvbignQXJnIG5vdCBzdXBwb3J0ZWQgd2l0aCBtdWx0aXBsZSBkZWNvcmF0b3JzJyk7IH1cbiAgICAgIGV4dGVuZCh0aGlzLmRlY29yYXRvcnMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlY29yYXRvcnNbbmFtZV0gPSBmbjtcbiAgICB9XG4gIH0sXG4gIHVucmVnaXN0ZXJEZWNvcmF0b3I6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5kZWNvcmF0b3JzW25hbWVdO1xuICB9XG59O1xuXG5leHBvcnQgbGV0IGxvZyA9IGxvZ2dlci5sb2c7XG5cbmV4cG9ydCB7Y3JlYXRlRnJhbWUsIGxvZ2dlcn07XG4iLCJpbXBvcnQgcmVnaXN0ZXJJbmxpbmUgZnJvbSAnLi9kZWNvcmF0b3JzL2lubGluZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzKGluc3RhbmNlKSB7XG4gIHJlZ2lzdGVySW5saW5lKGluc3RhbmNlKTtcbn1cblxuIiwiaW1wb3J0IHtleHRlbmR9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJEZWNvcmF0b3IoJ2lubGluZScsIGZ1bmN0aW9uKGZuLCBwcm9wcywgY29udGFpbmVyLCBvcHRpb25zKSB7XG4gICAgbGV0IHJldCA9IGZuO1xuICAgIGlmICghcHJvcHMucGFydGlhbHMpIHtcbiAgICAgIHByb3BzLnBhcnRpYWxzID0ge307XG4gICAgICByZXQgPSBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYXJ0aWFscyBzdGFjayBmcmFtZSBwcmlvciB0byBleGVjLlxuICAgICAgICBsZXQgb3JpZ2luYWwgPSBjb250YWluZXIucGFydGlhbHM7XG4gICAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IGV4dGVuZCh7fSwgb3JpZ2luYWwsIHByb3BzLnBhcnRpYWxzKTtcbiAgICAgICAgbGV0IHJldCA9IGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBvcmlnaW5hbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcHJvcHMucGFydGlhbHNbb3B0aW9ucy5hcmdzWzBdXSA9IG9wdGlvbnMuZm47XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiIsIlxuY29uc3QgZXJyb3JQcm9wcyA9IFsnZGVzY3JpcHRpb24nLCAnZmlsZU5hbWUnLCAnbGluZU51bWJlcicsICdtZXNzYWdlJywgJ25hbWUnLCAnbnVtYmVyJywgJ3N0YWNrJ107XG5cbmZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlLCBub2RlKSB7XG4gIGxldCBsb2MgPSBub2RlICYmIG5vZGUubG9jLFxuICAgICAgbGluZSxcbiAgICAgIGNvbHVtbjtcbiAgaWYgKGxvYykge1xuICAgIGxpbmUgPSBsb2Muc3RhcnQubGluZTtcbiAgICBjb2x1bW4gPSBsb2Muc3RhcnQuY29sdW1uO1xuXG4gICAgbWVzc2FnZSArPSAnIC0gJyArIGxpbmUgKyAnOicgKyBjb2x1bW47XG4gIH1cblxuICBsZXQgdG1wID0gRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cbiAgLy8gVW5mb3J0dW5hdGVseSBlcnJvcnMgYXJlIG5vdCBlbnVtZXJhYmxlIGluIENocm9tZSAoYXQgbGVhc3QpLCBzbyBgZm9yIHByb3AgaW4gdG1wYCBkb2Vzbid0IHdvcmsuXG4gIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGVycm9yUHJvcHMubGVuZ3RoOyBpZHgrKykge1xuICAgIHRoaXNbZXJyb3JQcm9wc1tpZHhdXSA9IHRtcFtlcnJvclByb3BzW2lkeF1dO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXhjZXB0aW9uKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKGxvYykge1xuICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZTtcblxuICAgICAgLy8gV29yayBhcm91bmQgaXNzdWUgdW5kZXIgc2FmYXJpIHdoZXJlIHdlIGNhbid0IGRpcmVjdGx5IHNldCB0aGUgY29sdW1uIHZhbHVlXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NvbHVtbicsIHtcbiAgICAgICAgICB2YWx1ZTogY29sdW1uLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKG5vcCkge1xuICAgIC8qIElnbm9yZSBpZiB0aGUgYnJvd3NlciBpcyB2ZXJ5IHBhcnRpY3VsYXIgKi9cbiAgfVxufVxuXG5FeGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEV4Y2VwdGlvbjtcbiIsImltcG9ydCByZWdpc3RlckJsb2NrSGVscGVyTWlzc2luZyBmcm9tICcuL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcnO1xuaW1wb3J0IHJlZ2lzdGVyRWFjaCBmcm9tICcuL2hlbHBlcnMvZWFjaCc7XG5pbXBvcnQgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nIGZyb20gJy4vaGVscGVycy9oZWxwZXItbWlzc2luZyc7XG5pbXBvcnQgcmVnaXN0ZXJJZiBmcm9tICcuL2hlbHBlcnMvaWYnO1xuaW1wb3J0IHJlZ2lzdGVyTG9nIGZyb20gJy4vaGVscGVycy9sb2cnO1xuaW1wb3J0IHJlZ2lzdGVyTG9va3VwIGZyb20gJy4vaGVscGVycy9sb29rdXAnO1xuaW1wb3J0IHJlZ2lzdGVyV2l0aCBmcm9tICcuL2hlbHBlcnMvd2l0aCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckRlZmF1bHRIZWxwZXJzKGluc3RhbmNlKSB7XG4gIHJlZ2lzdGVyQmxvY2tIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJFYWNoKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJJZihpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyTG9nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJMb29rdXAoaW5zdGFuY2UpO1xuICByZWdpc3RlcldpdGgoaW5zdGFuY2UpO1xufVxuIiwiaW1wb3J0IHthcHBlbmRDb250ZXh0UGF0aCwgY3JlYXRlRnJhbWUsIGlzQXJyYXl9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2Jsb2NrSGVscGVyTWlzc2luZycsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBsZXQgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZSxcbiAgICAgICAgZm4gPSBvcHRpb25zLmZuO1xuXG4gICAgaWYgKGNvbnRleHQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmbih0aGlzKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT09IGZhbHNlIHx8IGNvbnRleHQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KGNvbnRleHQpKSB7XG4gICAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmlkcykge1xuICAgICAgICAgIG9wdGlvbnMuaWRzID0gW29wdGlvbnMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVycy5lYWNoKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgICAgICBkYXRhLmNvbnRleHRQYXRoID0gYXBwZW5kQ29udGV4dFBhdGgob3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoLCBvcHRpb25zLm5hbWUpO1xuICAgICAgICBvcHRpb25zID0ge2RhdGE6IGRhdGF9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNBcnJheSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuLi9leGNlcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm4sXG4gICAgICAgIGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICByZXQgPSAnJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgY29udGV4dFBhdGg7XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICBjb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pICsgJy4nO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGlmIChvcHRpb25zLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWNJdGVyYXRpb24oZmllbGQsIGluZGV4LCBsYXN0KSB7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmtleSA9IGZpZWxkO1xuICAgICAgICBkYXRhLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGRhdGEuZmlyc3QgPSBpbmRleCA9PT0gMDtcbiAgICAgICAgZGF0YS5sYXN0ID0gISFsYXN0O1xuXG4gICAgICAgIGlmIChjb250ZXh0UGF0aCkge1xuICAgICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBjb250ZXh0UGF0aCArIGZpZWxkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbZmllbGRdLCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhbY29udGV4dFtmaWVsZF0sIGZpZWxkXSwgW2NvbnRleHRQYXRoICsgZmllbGQsIG51bGxdKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgICBmb3IgKGxldCBqID0gY29udGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBpZiAoaSBpbiBjb250ZXh0KSB7XG4gICAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcHJpb3JLZXk7XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGNvbnRleHQpIHtcbiAgICAgICAgICBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSBydW5uaW5nIHRoZSBpdGVyYXRpb25zIG9uZSBzdGVwIG91dCBvZiBzeW5jIHNvIHdlIGNhbiBkZXRlY3RcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IGl0ZXJhdGlvbiB3aXRob3V0IGhhdmUgdG8gc2NhbiB0aGUgb2JqZWN0IHR3aWNlIGFuZCBjcmVhdGVcbiAgICAgICAgICAgIC8vIGFuIGl0ZXJtZWRpYXRlIGtleXMgYXJyYXkuXG4gICAgICAgICAgICBpZiAocHJpb3JLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmlvcktleSA9IGtleTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgcmV0ID0gaW52ZXJzZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiIsImltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbigvKiBbYXJncywgXW9wdGlvbnMgKi8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gQSBtaXNzaW5nIGZpZWxkIGluIGEge3tmb299fSBjb25zdHJ1Y3QuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTb21lb25lIGlzIGFjdHVhbGx5IHRyeWluZyB0byBjYWxsIHNvbWV0aGluZywgYmxvdyB1cC5cbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ01pc3NpbmcgaGVscGVyOiBcIicgKyBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLm5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH0pO1xufVxuIiwiaW1wb3J0IHtpc0VtcHR5LCBpc0Z1bmN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdpZicsIGZ1bmN0aW9uKGNvbmRpdGlvbmFsLCBvcHRpb25zKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oY29uZGl0aW9uYWwpKSB7IGNvbmRpdGlvbmFsID0gY29uZGl0aW9uYWwuY2FsbCh0aGlzKTsgfVxuXG4gICAgLy8gRGVmYXVsdCBiZWhhdmlvciBpcyB0byByZW5kZXIgdGhlIHBvc2l0aXZlIHBhdGggaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBhbmQgbm90IGVtcHR5LlxuICAgIC8vIFRoZSBgaW5jbHVkZVplcm9gIG9wdGlvbiBtYXkgYmUgc2V0IHRvIHRyZWF0IHRoZSBjb25kdGlvbmFsIGFzIHB1cmVseSBub3QgZW1wdHkgYmFzZWQgb24gdGhlXG4gICAgLy8gYmVoYXZpb3Igb2YgaXNFbXB0eS4gRWZmZWN0aXZlbHkgdGhpcyBkZXRlcm1pbmVzIGlmIDAgaXMgaGFuZGxlZCBieSB0aGUgcG9zaXRpdmUgcGF0aCBvciBuZWdhdGl2ZS5cbiAgICBpZiAoKCFvcHRpb25zLmhhc2guaW5jbHVkZVplcm8gJiYgIWNvbmRpdGlvbmFsKSB8fCBpc0VtcHR5KGNvbmRpdGlvbmFsKSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XG4gICAgfVxuICB9KTtcblxuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcigndW5sZXNzJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVyc1snaWYnXS5jYWxsKHRoaXMsIGNvbmRpdGlvbmFsLCB7Zm46IG9wdGlvbnMuaW52ZXJzZSwgaW52ZXJzZTogb3B0aW9ucy5mbiwgaGFzaDogb3B0aW9ucy5oYXNofSk7XG4gIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKC8qIG1lc3NhZ2UsIG9wdGlvbnMgKi8pIHtcbiAgICBsZXQgYXJncyA9IFt1bmRlZmluZWRdLFxuICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIGxldCBsZXZlbCA9IDE7XG4gICAgaWYgKG9wdGlvbnMuaGFzaC5sZXZlbCAhPSBudWxsKSB7XG4gICAgICBsZXZlbCA9IG9wdGlvbnMuaGFzaC5sZXZlbDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGEubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmRhdGEubGV2ZWw7XG4gICAgfVxuICAgIGFyZ3NbMF0gPSBsZXZlbDtcblxuICAgIGluc3RhbmNlLmxvZyguLi4gYXJncyk7XG4gIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvb2t1cCcsIGZ1bmN0aW9uKG9iaiwgZmllbGQpIHtcbiAgICByZXR1cm4gb2JqICYmIG9ialtmaWVsZF07XG4gIH0pO1xufVxuIiwiaW1wb3J0IHthcHBlbmRDb250ZXh0UGF0aCwgYmxvY2tQYXJhbXMsIGNyZWF0ZUZyYW1lLCBpc0VtcHR5LCBpc0Z1bmN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCd3aXRoJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAoIWlzRW1wdHkoY29udGV4dCkpIHtcbiAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmlkcykge1xuICAgICAgICBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBibG9ja1BhcmFtczogYmxvY2tQYXJhbXMoW2NvbnRleHRdLCBbZGF0YSAmJiBkYXRhLmNvbnRleHRQYXRoXSlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG59XG4iLCJpbXBvcnQge2luZGV4T2Z9IGZyb20gJy4vdXRpbHMnO1xuXG5sZXQgbG9nZ2VyID0ge1xuICBtZXRob2RNYXA6IFsnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10sXG4gIGxldmVsOiAnaW5mbycsXG5cbiAgLy8gTWFwcyBhIGdpdmVuIGxldmVsIHZhbHVlIHRvIHRoZSBgbWV0aG9kTWFwYCBpbmRleGVzIGFib3ZlLlxuICBsb29rdXBMZXZlbDogZnVuY3Rpb24obGV2ZWwpIHtcbiAgICBpZiAodHlwZW9mIGxldmVsID09PSAnc3RyaW5nJykge1xuICAgICAgbGV0IGxldmVsTWFwID0gaW5kZXhPZihsb2dnZXIubWV0aG9kTWFwLCBsZXZlbC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChsZXZlbE1hcCA+PSAwKSB7XG4gICAgICAgIGxldmVsID0gbGV2ZWxNYXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXZlbCA9IHBhcnNlSW50KGxldmVsLCAxMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxldmVsO1xuICB9LFxuXG4gIC8vIENhbiBiZSBvdmVycmlkZGVuIGluIHRoZSBob3N0IGVudmlyb25tZW50XG4gIGxvZzogZnVuY3Rpb24obGV2ZWwsIC4uLm1lc3NhZ2UpIHtcbiAgICBsZXZlbCA9IGxvZ2dlci5sb29rdXBMZXZlbChsZXZlbCk7XG5cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGxvZ2dlci5sb29rdXBMZXZlbChsb2dnZXIubGV2ZWwpIDw9IGxldmVsKSB7XG4gICAgICBsZXQgbWV0aG9kID0gbG9nZ2VyLm1ldGhvZE1hcFtsZXZlbF07XG4gICAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgbWV0aG9kID0gJ2xvZyc7XG4gICAgICB9XG4gICAgICBjb25zb2xlW21ldGhvZF0oLi4ubWVzc2FnZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIiwiLyogZ2xvYmFsIHdpbmRvdyAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oSGFuZGxlYmFycykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBsZXQgcm9vdCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93LFxuICAgICAgJEhhbmRsZWJhcnMgPSByb290LkhhbmRsZWJhcnM7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIEhhbmRsZWJhcnMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHtcbiAgICAgIHJvb3QuSGFuZGxlYmFycyA9ICRIYW5kbGViYXJzO1xuICAgIH1cbiAgICByZXR1cm4gSGFuZGxlYmFycztcbiAgfTtcbn1cbiIsImltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQgeyBDT01QSUxFUl9SRVZJU0lPTiwgUkVWSVNJT05fQ0hBTkdFUywgY3JlYXRlRnJhbWUgfSBmcm9tICcuL2Jhc2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tSZXZpc2lvbihjb21waWxlckluZm8pIHtcbiAgY29uc3QgY29tcGlsZXJSZXZpc2lvbiA9IGNvbXBpbGVySW5mbyAmJiBjb21waWxlckluZm9bMF0gfHwgMSxcbiAgICAgICAgY3VycmVudFJldmlzaW9uID0gQ09NUElMRVJfUkVWSVNJT047XG5cbiAgaWYgKGNvbXBpbGVyUmV2aXNpb24gIT09IGN1cnJlbnRSZXZpc2lvbikge1xuICAgIGlmIChjb21waWxlclJldmlzaW9uIDwgY3VycmVudFJldmlzaW9uKSB7XG4gICAgICBjb25zdCBydW50aW1lVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2N1cnJlbnRSZXZpc2lvbl0sXG4gICAgICAgICAgICBjb21waWxlclZlcnNpb25zID0gUkVWSVNJT05fQ0hBTkdFU1tjb21waWxlclJldmlzaW9uXTtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGFuIG9sZGVyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1cGRhdGUgeW91ciBwcmVjb21waWxlciB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBydW50aW1lVmVyc2lvbnMgKyAnKSBvciBkb3duZ3JhZGUgeW91ciBydW50aW1lIHRvIGFuIG9sZGVyIHZlcnNpb24gKCcgKyBjb21waWxlclZlcnNpb25zICsgJykuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVzZSB0aGUgZW1iZWRkZWQgdmVyc2lvbiBpbmZvIHNpbmNlIHRoZSBydW50aW1lIGRvZXNuJ3Qga25vdyBhYm91dCB0aGlzIHJldmlzaW9uIHlldFxuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYSBuZXdlciB2ZXJzaW9uIG9mIEhhbmRsZWJhcnMgdGhhbiB0aGUgY3VycmVudCBydW50aW1lLiAnICtcbiAgICAgICAgICAgICdQbGVhc2UgdXBkYXRlIHlvdXIgcnVudGltZSB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBjb21waWxlckluZm9bMV0gKyAnKS4nKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlKHRlbXBsYXRlU3BlYywgZW52KSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICghZW52KSB7XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignTm8gZW52aXJvbm1lbnQgcGFzc2VkIHRvIHRlbXBsYXRlJyk7XG4gIH1cbiAgaWYgKCF0ZW1wbGF0ZVNwZWMgfHwgIXRlbXBsYXRlU3BlYy5tYWluKSB7XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVW5rbm93biB0ZW1wbGF0ZSBvYmplY3Q6ICcgKyB0eXBlb2YgdGVtcGxhdGVTcGVjKTtcbiAgfVxuXG4gIHRlbXBsYXRlU3BlYy5tYWluLmRlY29yYXRvciA9IHRlbXBsYXRlU3BlYy5tYWluX2Q7XG5cbiAgLy8gTm90ZTogVXNpbmcgZW52LlZNIHJlZmVyZW5jZXMgcmF0aGVyIHRoYW4gbG9jYWwgdmFyIHJlZmVyZW5jZXMgdGhyb3VnaG91dCB0aGlzIHNlY3Rpb24gdG8gYWxsb3dcbiAgLy8gZm9yIGV4dGVybmFsIHVzZXJzIHRvIG92ZXJyaWRlIHRoZXNlIGFzIHBzdWVkby1zdXBwb3J0ZWQgQVBJcy5cbiAgZW52LlZNLmNoZWNrUmV2aXNpb24odGVtcGxhdGVTcGVjLmNvbXBpbGVyKTtcblxuICBmdW5jdGlvbiBpbnZva2VQYXJ0aWFsV3JhcHBlcihwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuaGFzaCkge1xuICAgICAgY29udGV4dCA9IFV0aWxzLmV4dGVuZCh7fSwgY29udGV4dCwgb3B0aW9ucy5oYXNoKTtcbiAgICAgIGlmIChvcHRpb25zLmlkcykge1xuICAgICAgICBvcHRpb25zLmlkc1swXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFydGlhbCA9IGVudi5WTS5yZXNvbHZlUGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIGxldCByZXN1bHQgPSBlbnYuVk0uaW52b2tlUGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHJlc3VsdCA9PSBudWxsICYmIGVudi5jb21waWxlKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0gPSBlbnYuY29tcGlsZShwYXJ0aWFsLCB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJPcHRpb25zLCBlbnYpO1xuICAgICAgcmVzdWx0ID0gb3B0aW9ucy5wYXJ0aWFsc1tvcHRpb25zLm5hbWVdKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIGlmIChvcHRpb25zLmluZGVudCkge1xuICAgICAgICBsZXQgbGluZXMgPSByZXN1bHQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGlmICghbGluZXNbaV0gJiYgaSArIDEgPT09IGwpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpbmVzW2ldID0gb3B0aW9ucy5pbmRlbnQgKyBsaW5lc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBsaW5lcy5qb2luKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RoZSBwYXJ0aWFsICcgKyBvcHRpb25zLm5hbWUgKyAnIGNvdWxkIG5vdCBiZSBjb21waWxlZCB3aGVuIHJ1bm5pbmcgaW4gcnVudGltZS1vbmx5IG1vZGUnKTtcbiAgICB9XG4gIH1cblxuICAvLyBKdXN0IGFkZCB3YXRlclxuICBsZXQgY29udGFpbmVyID0ge1xuICAgIHN0cmljdDogZnVuY3Rpb24ob2JqLCBuYW1lKSB7XG4gICAgICBpZiAoIShuYW1lIGluIG9iaikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignXCInICsgbmFtZSArICdcIiBub3QgZGVmaW5lZCBpbiAnICsgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmpbbmFtZV07XG4gICAgfSxcbiAgICBsb29rdXA6IGZ1bmN0aW9uKGRlcHRocywgbmFtZSkge1xuICAgICAgY29uc3QgbGVuID0gZGVwdGhzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGRlcHRoc1tpXSAmJiBkZXB0aHNbaV1bbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBkZXB0aHNbaV1bbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGxhbWJkYTogZnVuY3Rpb24oY3VycmVudCwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50ID09PSAnZnVuY3Rpb24nID8gY3VycmVudC5jYWxsKGNvbnRleHQpIDogY3VycmVudDtcbiAgICB9LFxuXG4gICAgZXNjYXBlRXhwcmVzc2lvbjogVXRpbHMuZXNjYXBlRXhwcmVzc2lvbixcbiAgICBpbnZva2VQYXJ0aWFsOiBpbnZva2VQYXJ0aWFsV3JhcHBlcixcblxuICAgIGZuOiBmdW5jdGlvbihpKSB7XG4gICAgICBsZXQgcmV0ID0gdGVtcGxhdGVTcGVjW2ldO1xuICAgICAgcmV0LmRlY29yYXRvciA9IHRlbXBsYXRlU3BlY1tpICsgJ19kJ107XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICBwcm9ncmFtczogW10sXG4gICAgcHJvZ3JhbTogZnVuY3Rpb24oaSwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgICAgbGV0IHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSxcbiAgICAgICAgICBmbiA9IHRoaXMuZm4oaSk7XG4gICAgICBpZiAoZGF0YSB8fCBkZXB0aHMgfHwgYmxvY2tQYXJhbXMgfHwgZGVjbGFyZWRCbG9ja1BhcmFtcykge1xuICAgICAgICBwcm9ncmFtV3JhcHBlciA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgICAgIH0gZWxzZSBpZiAoIXByb2dyYW1XcmFwcGVyKSB7XG4gICAgICAgIHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9ncmFtV3JhcHBlcjtcbiAgICB9LFxuXG4gICAgZGF0YTogZnVuY3Rpb24odmFsdWUsIGRlcHRoKSB7XG4gICAgICB3aGlsZSAodmFsdWUgJiYgZGVwdGgtLSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLl9wYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBtZXJnZTogZnVuY3Rpb24ocGFyYW0sIGNvbW1vbikge1xuICAgICAgbGV0IG9iaiA9IHBhcmFtIHx8IGNvbW1vbjtcblxuICAgICAgaWYgKHBhcmFtICYmIGNvbW1vbiAmJiAocGFyYW0gIT09IGNvbW1vbikpIHtcbiAgICAgICAgb2JqID0gVXRpbHMuZXh0ZW5kKHt9LCBjb21tb24sIHBhcmFtKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIC8vIEFuIGVtcHR5IG9iamVjdCB0byB1c2UgYXMgcmVwbGFjZW1lbnQgZm9yIG51bGwtY29udGV4dHNcbiAgICBudWxsQ29udGV4dDogT2JqZWN0LnNlYWwoe30pLFxuXG4gICAgbm9vcDogZW52LlZNLm5vb3AsXG4gICAgY29tcGlsZXJJbmZvOiB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJcbiAgfTtcblxuICBmdW5jdGlvbiByZXQoY29udGV4dCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG5cbiAgICByZXQuX3NldHVwKG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucy5wYXJ0aWFsICYmIHRlbXBsYXRlU3BlYy51c2VEYXRhKSB7XG4gICAgICBkYXRhID0gaW5pdERhdGEoY29udGV4dCwgZGF0YSk7XG4gICAgfVxuICAgIGxldCBkZXB0aHMsXG4gICAgICAgIGJsb2NrUGFyYW1zID0gdGVtcGxhdGVTcGVjLnVzZUJsb2NrUGFyYW1zID8gW10gOiB1bmRlZmluZWQ7XG4gICAgaWYgKHRlbXBsYXRlU3BlYy51c2VEZXB0aHMpIHtcbiAgICAgIGlmIChvcHRpb25zLmRlcHRocykge1xuICAgICAgICBkZXB0aHMgPSBjb250ZXh0ICE9IG9wdGlvbnMuZGVwdGhzWzBdID8gW2NvbnRleHRdLmNvbmNhdChvcHRpb25zLmRlcHRocykgOiBvcHRpb25zLmRlcHRocztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcHRocyA9IFtjb250ZXh0XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWluKGNvbnRleHQvKiwgb3B0aW9ucyovKSB7XG4gICAgICByZXR1cm4gJycgKyB0ZW1wbGF0ZVNwZWMubWFpbihjb250YWluZXIsIGNvbnRleHQsIGNvbnRhaW5lci5oZWxwZXJzLCBjb250YWluZXIucGFydGlhbHMsIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgIH1cbiAgICBtYWluID0gZXhlY3V0ZURlY29yYXRvcnModGVtcGxhdGVTcGVjLm1haW4sIG1haW4sIGNvbnRhaW5lciwgb3B0aW9ucy5kZXB0aHMgfHwgW10sIGRhdGEsIGJsb2NrUGFyYW1zKTtcbiAgICByZXR1cm4gbWFpbihjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxuICByZXQuaXNUb3AgPSB0cnVlO1xuXG4gIHJldC5fc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwpIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMuaGVscGVycywgZW52LmhlbHBlcnMpO1xuXG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwpIHtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMucGFydGlhbHMsIGVudi5wYXJ0aWFscyk7XG4gICAgICB9XG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwgfHwgdGVtcGxhdGVTcGVjLnVzZURlY29yYXRvcnMpIHtcbiAgICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBjb250YWluZXIubWVyZ2Uob3B0aW9ucy5kZWNvcmF0b3JzLCBlbnYuZGVjb3JhdG9ycyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gb3B0aW9ucy5oZWxwZXJzO1xuICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3B0aW9ucy5wYXJ0aWFscztcbiAgICAgIGNvbnRhaW5lci5kZWNvcmF0b3JzID0gb3B0aW9ucy5kZWNvcmF0b3JzO1xuICAgIH1cbiAgfTtcblxuICByZXQuX2NoaWxkID0gZnVuY3Rpb24oaSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgJiYgIWJsb2NrUGFyYW1zKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdtdXN0IHBhc3MgYmxvY2sgcGFyYW1zJyk7XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlRGVwdGhzICYmICFkZXB0aHMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ211c3QgcGFzcyBwYXJlbnQgZGVwdGhzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgdGVtcGxhdGVTcGVjW2ldLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgfTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHtcbiAgZnVuY3Rpb24gcHJvZyhjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgY3VycmVudERlcHRocyA9IGRlcHRocztcbiAgICBpZiAoZGVwdGhzICYmIGNvbnRleHQgIT0gZGVwdGhzWzBdICYmICEoY29udGV4dCA9PT0gY29udGFpbmVyLm51bGxDb250ZXh0ICYmIGRlcHRoc1swXSA9PT0gbnVsbCkpIHtcbiAgICAgIGN1cnJlbnREZXB0aHMgPSBbY29udGV4dF0uY29uY2F0KGRlcHRocyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZuKGNvbnRhaW5lcixcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgY29udGFpbmVyLmhlbHBlcnMsIGNvbnRhaW5lci5wYXJ0aWFscyxcbiAgICAgICAgb3B0aW9ucy5kYXRhIHx8IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zICYmIFtvcHRpb25zLmJsb2NrUGFyYW1zXS5jb25jYXQoYmxvY2tQYXJhbXMpLFxuICAgICAgICBjdXJyZW50RGVwdGhzKTtcbiAgfVxuXG4gIHByb2cgPSBleGVjdXRlRGVjb3JhdG9ycyhmbiwgcHJvZywgY29udGFpbmVyLCBkZXB0aHMsIGRhdGEsIGJsb2NrUGFyYW1zKTtcblxuICBwcm9nLnByb2dyYW0gPSBpO1xuICBwcm9nLmRlcHRoID0gZGVwdGhzID8gZGVwdGhzLmxlbmd0aCA6IDA7XG4gIHByb2cuYmxvY2tQYXJhbXMgPSBkZWNsYXJlZEJsb2NrUGFyYW1zIHx8IDA7XG4gIHJldHVybiBwcm9nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVBhcnRpYWwocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykge1xuICBpZiAoIXBhcnRpYWwpIHtcbiAgICBpZiAob3B0aW9ucy5uYW1lID09PSAnQHBhcnRpYWwtYmxvY2snKSB7XG4gICAgICBwYXJ0aWFsID0gb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnRpYWwgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV07XG4gICAgfVxuICB9IGVsc2UgaWYgKCFwYXJ0aWFsLmNhbGwgJiYgIW9wdGlvbnMubmFtZSkge1xuICAgIC8vIFRoaXMgaXMgYSBkeW5hbWljIHBhcnRpYWwgdGhhdCByZXR1cm5lZCBhIHN0cmluZ1xuICAgIG9wdGlvbnMubmFtZSA9IHBhcnRpYWw7XG4gICAgcGFydGlhbCA9IG9wdGlvbnMucGFydGlhbHNbcGFydGlhbF07XG4gIH1cbiAgcmV0dXJuIHBhcnRpYWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VQYXJ0aWFsKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgLy8gVXNlIHRoZSBjdXJyZW50IGNsb3N1cmUgY29udGV4dCB0byBzYXZlIHRoZSBwYXJ0aWFsLWJsb2NrIGlmIHRoaXMgcGFydGlhbFxuICBjb25zdCBjdXJyZW50UGFydGlhbEJsb2NrID0gb3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuZGF0YVsncGFydGlhbC1ibG9jayddO1xuICBvcHRpb25zLnBhcnRpYWwgPSB0cnVlO1xuICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICBvcHRpb25zLmRhdGEuY29udGV4dFBhdGggPSBvcHRpb25zLmlkc1swXSB8fCBvcHRpb25zLmRhdGEuY29udGV4dFBhdGg7XG4gIH1cblxuICBsZXQgcGFydGlhbEJsb2NrO1xuICBpZiAob3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBub29wKSB7XG4gICAgb3B0aW9ucy5kYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAvLyBXcmFwcGVyIGZ1bmN0aW9uIHRvIGdldCBhY2Nlc3MgdG8gY3VycmVudFBhcnRpYWxCbG9jayBmcm9tIHRoZSBjbG9zdXJlXG4gICAgbGV0IGZuID0gb3B0aW9ucy5mbjtcbiAgICBwYXJ0aWFsQmxvY2sgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXSA9IGZ1bmN0aW9uIHBhcnRpYWxCbG9ja1dyYXBwZXIoY29udGV4dCwgb3B0aW9ucyA9IHt9KSB7XG5cbiAgICAgIC8vIFJlc3RvcmUgdGhlIHBhcnRpYWwtYmxvY2sgZnJvbSB0aGUgY2xvc3VyZSBmb3IgdGhlIGV4ZWN1dGlvbiBvZiB0aGUgYmxvY2tcbiAgICAgIC8vIGkuZS4gdGhlIHBhcnQgaW5zaWRlIHRoZSBibG9jayBvZiB0aGUgcGFydGlhbCBjYWxsLlxuICAgICAgb3B0aW9ucy5kYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgIG9wdGlvbnMuZGF0YVsncGFydGlhbC1ibG9jayddID0gY3VycmVudFBhcnRpYWxCbG9jaztcbiAgICAgIHJldHVybiBmbihjb250ZXh0LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIGlmIChmbi5wYXJ0aWFscykge1xuICAgICAgb3B0aW9ucy5wYXJ0aWFscyA9IFV0aWxzLmV4dGVuZCh7fSwgb3B0aW9ucy5wYXJ0aWFscywgZm4ucGFydGlhbHMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQgJiYgcGFydGlhbEJsb2NrKSB7XG4gICAgcGFydGlhbCA9IHBhcnRpYWxCbG9jaztcbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUaGUgcGFydGlhbCAnICsgb3B0aW9ucy5uYW1lICsgJyBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgfSBlbHNlIGlmIChwYXJ0aWFsIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICByZXR1cm4gcGFydGlhbChjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgcmV0dXJuICcnOyB9XG5cbmZ1bmN0aW9uIGluaXREYXRhKGNvbnRleHQsIGRhdGEpIHtcbiAgaWYgKCFkYXRhIHx8ICEoJ3Jvb3QnIGluIGRhdGEpKSB7XG4gICAgZGF0YSA9IGRhdGEgPyBjcmVhdGVGcmFtZShkYXRhKSA6IHt9O1xuICAgIGRhdGEucm9vdCA9IGNvbnRleHQ7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpIHtcbiAgaWYgKGZuLmRlY29yYXRvcikge1xuICAgIGxldCBwcm9wcyA9IHt9O1xuICAgIHByb2cgPSBmbi5kZWNvcmF0b3IocHJvZywgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGhzICYmIGRlcHRoc1swXSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7XG4gICAgVXRpbHMuZXh0ZW5kKHByb2csIHByb3BzKTtcbiAgfVxuICByZXR1cm4gcHJvZztcbn1cbiIsIi8vIEJ1aWxkIG91dCBvdXIgYmFzaWMgU2FmZVN0cmluZyB0eXBlXG5mdW5jdGlvbiBTYWZlU3RyaW5nKHN0cmluZykge1xuICB0aGlzLnN0cmluZyA9IHN0cmluZztcbn1cblxuU2FmZVN0cmluZy5wcm90b3R5cGUudG9TdHJpbmcgPSBTYWZlU3RyaW5nLnByb3RvdHlwZS50b0hUTUwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICcnICsgdGhpcy5zdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTYWZlU3RyaW5nO1xuIiwiY29uc3QgZXNjYXBlID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgJ2AnOiAnJiN4NjA7JyxcbiAgJz0nOiAnJiN4M0Q7J1xufTtcblxuY29uc3QgYmFkQ2hhcnMgPSAvWyY8PlwiJ2A9XS9nLFxuICAgICAgcG9zc2libGUgPSAvWyY8PlwiJ2A9XS87XG5cbmZ1bmN0aW9uIGVzY2FwZUNoYXIoY2hyKSB7XG4gIHJldHVybiBlc2NhcGVbY2hyXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChvYmovKiAsIC4uLnNvdXJjZSAqLykge1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGtleSBpbiBhcmd1bWVudHNbaV0pIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXJndW1lbnRzW2ldLCBrZXkpKSB7XG4gICAgICAgIG9ialtrZXldID0gYXJndW1lbnRzW2ldW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZXhwb3J0IGxldCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8vIFNvdXJjZWQgZnJvbSBsb2Rhc2hcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXN0aWVqcy9sb2Rhc2gvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHRcbi8qIGVzbGludC1kaXNhYmxlIGZ1bmMtc3R5bGUgKi9cbmxldCBpc0Z1bmN0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn07XG4vLyBmYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmlcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pZiAoaXNGdW5jdGlvbigveC8pKSB7XG4gIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH07XG59XG5leHBvcnQge2lzRnVuY3Rpb259O1xuLyogZXNsaW50LWVuYWJsZSBmdW5jLXN0eWxlICovXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSA/IHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nIDogZmFsc2U7XG59O1xuXG4vLyBPbGRlciBJRSB2ZXJzaW9ucyBkbyBub3QgZGlyZWN0bHkgc3VwcG9ydCBpbmRleE9mIHNvIHdlIG11c3QgaW1wbGVtZW50IG91ciBvd24sIHNhZGx5LlxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlKSB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUV4cHJlc3Npb24oc3RyaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIC8vIGRvbid0IGVzY2FwZSBTYWZlU3RyaW5ncywgc2luY2UgdGhleSdyZSBhbHJlYWR5IHNhZmVcbiAgICBpZiAoc3RyaW5nICYmIHN0cmluZy50b0hUTUwpIHtcbiAgICAgIHJldHVybiBzdHJpbmcudG9IVE1MKCk7XG4gICAgfSBlbHNlIGlmIChzdHJpbmcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH0gZWxzZSBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZyArICcnO1xuICAgIH1cblxuICAgIC8vIEZvcmNlIGEgc3RyaW5nIGNvbnZlcnNpb24gYXMgdGhpcyB3aWxsIGJlIGRvbmUgYnkgdGhlIGFwcGVuZCByZWdhcmRsZXNzIGFuZFxuICAgIC8vIHRoZSByZWdleCB0ZXN0IHdpbGwgZG8gdGhpcyB0cmFuc3BhcmVudGx5IGJlaGluZCB0aGUgc2NlbmVzLCBjYXVzaW5nIGlzc3VlcyBpZlxuICAgIC8vIGFuIG9iamVjdCdzIHRvIHN0cmluZyBoYXMgZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGl0LlxuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nO1xuICB9XG5cbiAgaWYgKCFwb3NzaWJsZS50ZXN0KHN0cmluZykpIHsgcmV0dXJuIHN0cmluZzsgfVxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoYmFkQ2hhcnMsIGVzY2FwZUNoYXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFtZShvYmplY3QpIHtcbiAgbGV0IGZyYW1lID0gZXh0ZW5kKHt9LCBvYmplY3QpO1xuICBmcmFtZS5fcGFyZW50ID0gb2JqZWN0O1xuICByZXR1cm4gZnJhbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBibG9ja1BhcmFtcyhwYXJhbXMsIGlkcykge1xuICBwYXJhbXMucGF0aCA9IGlkcztcbiAgcmV0dXJuIHBhcmFtcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENvbnRleHRQYXRoKGNvbnRleHRQYXRoLCBpZCkge1xuICByZXR1cm4gKGNvbnRleHRQYXRoID8gY29udGV4dFBhdGggKyAnLicgOiAnJykgKyBpZDtcbn1cbiIsIi8vIENyZWF0ZSBhIHNpbXBsZSBwYXRoIGFsaWFzIHRvIGFsbG93IGJyb3dzZXJpZnkgdG8gcmVzb2x2ZVxuLy8gdGhlIHJ1bnRpbWUgb24gYSBzdXBwb3J0ZWQgcGF0aC5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kaXN0L2Nqcy9oYW5kbGViYXJzLnJ1bnRpbWUnKVsnZGVmYXVsdCddO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQXJyYXlpc2ggPSByZXF1aXJlKCdpcy1hcnJheWlzaCcpO1xuXG52YXIgY29uY2F0ID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdDtcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxudmFyIHN3aXp6bGUgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN3aXp6bGUoYXJncykge1xuXHR2YXIgcmVzdWx0cyA9IFtdO1xuXG5cdGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcmdzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0dmFyIGFyZyA9IGFyZ3NbaV07XG5cblx0XHRpZiAoaXNBcnJheWlzaChhcmcpKSB7XG5cdFx0XHQvLyBodHRwOi8vanNwZXJmLmNvbS9qYXZhc2NyaXB0LWFycmF5LWNvbmNhdC12cy1wdXNoLzk4XG5cdFx0XHRyZXN1bHRzID0gY29uY2F0LmNhbGwocmVzdWx0cywgc2xpY2UuY2FsbChhcmcpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0cy5wdXNoKGFyZyk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG5zd2l6emxlLndyYXAgPSBmdW5jdGlvbiAoZm4pIHtcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZm4oc3dpenpsZShhcmd1bWVudHMpKTtcblx0fTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQXJyYXlpc2gob2JqKSB7XG5cdGlmICghb2JqIHx8IHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5IHx8IEFycmF5LmlzQXJyYXkob2JqKSB8fFxuXHRcdChvYmoubGVuZ3RoID49IDAgJiYgKG9iai5zcGxpY2UgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fFxuXHRcdFx0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCAob2JqLmxlbmd0aCAtIDEpKSAmJiBvYmouY29uc3RydWN0b3IubmFtZSAhPT0gJ1N0cmluZycpKSk7XG59O1xuIiwidmFyIHRyaW0gPSByZXF1aXJlKCcuL3RyaW0nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkYXNoZXJpemUoc3RyKSB7XG4gIHJldHVybiB0cmltKHN0cikucmVwbGFjZSgvKFtBLVpdKS9nLCAnLSQxJykucmVwbGFjZSgvWy1fXFxzXSsvZywgJy0nKS50b0xvd2VyQ2FzZSgpO1xufTtcbiIsInZhciBlc2NhcGVSZWdFeHAgPSByZXF1aXJlKCcuL2VzY2FwZVJlZ0V4cCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmF1bHRUb1doaXRlU3BhY2UoY2hhcmFjdGVycykge1xuICBpZiAoY2hhcmFjdGVycyA9PSBudWxsKVxuICAgIHJldHVybiAnXFxcXHMnO1xuICBlbHNlIGlmIChjaGFyYWN0ZXJzLnNvdXJjZSlcbiAgICByZXR1cm4gY2hhcmFjdGVycy5zb3VyY2U7XG4gIGVsc2VcbiAgICByZXR1cm4gJ1snICsgZXNjYXBlUmVnRXhwKGNoYXJhY3RlcnMpICsgJ10nO1xufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9tYWtlU3RyaW5nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cikge1xuICByZXR1cm4gbWFrZVN0cmluZyhzdHIpLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbn07XG4iLCIvKipcbiAqIEVuc3VyZSBzb21lIG9iamVjdCBpcyBhIGNvZXJjZWQgdG8gYSBzdHJpbmdcbiAqKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWFrZVN0cmluZyhvYmplY3QpIHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gJyc7XG4gIHJldHVybiAnJyArIG9iamVjdDtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0clJlcGVhdChzdHIsIHF0eSl7XG4gIGlmIChxdHkgPCAxKSByZXR1cm4gJyc7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgd2hpbGUgKHF0eSA+IDApIHtcbiAgICBpZiAocXR5ICYgMSkgcmVzdWx0ICs9IHN0cjtcbiAgICBxdHkgPj49IDEsIHN0ciArPSBzdHI7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJ2YXIgcGFkID0gcmVxdWlyZSgnLi9wYWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBscGFkKHN0ciwgbGVuZ3RoLCBwYWRTdHIpIHtcbiAgcmV0dXJuIHBhZChzdHIsIGxlbmd0aCwgcGFkU3RyKTtcbn07XG4iLCJ2YXIgbWFrZVN0cmluZyA9IHJlcXVpcmUoJy4vaGVscGVyL21ha2VTdHJpbmcnKTtcbnZhciBzdHJSZXBlYXQgPSByZXF1aXJlKCcuL2hlbHBlci9zdHJSZXBlYXQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYWQoc3RyLCBsZW5ndGgsIHBhZFN0ciwgdHlwZSkge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIGxlbmd0aCA9IH5+bGVuZ3RoO1xuXG4gIHZhciBwYWRsZW4gPSAwO1xuXG4gIGlmICghcGFkU3RyKVxuICAgIHBhZFN0ciA9ICcgJztcbiAgZWxzZSBpZiAocGFkU3RyLmxlbmd0aCA+IDEpXG4gICAgcGFkU3RyID0gcGFkU3RyLmNoYXJBdCgwKTtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgY2FzZSAncmlnaHQnOlxuICAgIHBhZGxlbiA9IGxlbmd0aCAtIHN0ci5sZW5ndGg7XG4gICAgcmV0dXJuIHN0ciArIHN0clJlcGVhdChwYWRTdHIsIHBhZGxlbik7XG4gIGNhc2UgJ2JvdGgnOlxuICAgIHBhZGxlbiA9IGxlbmd0aCAtIHN0ci5sZW5ndGg7XG4gICAgcmV0dXJuIHN0clJlcGVhdChwYWRTdHIsIE1hdGguY2VpbChwYWRsZW4gLyAyKSkgKyBzdHIgKyBzdHJSZXBlYXQocGFkU3RyLCBNYXRoLmZsb29yKHBhZGxlbiAvIDIpKTtcbiAgZGVmYXVsdDogLy8gJ2xlZnQnXG4gICAgcGFkbGVuID0gbGVuZ3RoIC0gc3RyLmxlbmd0aDtcbiAgICByZXR1cm4gc3RyUmVwZWF0KHBhZFN0ciwgcGFkbGVuKSArIHN0cjtcbiAgfVxufTtcbiIsInZhciBtYWtlU3RyaW5nID0gcmVxdWlyZSgnLi9oZWxwZXIvbWFrZVN0cmluZycpO1xudmFyIGRlZmF1bHRUb1doaXRlU3BhY2UgPSByZXF1aXJlKCcuL2hlbHBlci9kZWZhdWx0VG9XaGl0ZVNwYWNlJyk7XG52YXIgbmF0aXZlVHJpbSA9IFN0cmluZy5wcm90b3R5cGUudHJpbTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmltKHN0ciwgY2hhcmFjdGVycykge1xuICBzdHIgPSBtYWtlU3RyaW5nKHN0cik7XG4gIGlmICghY2hhcmFjdGVycyAmJiBuYXRpdmVUcmltKSByZXR1cm4gbmF0aXZlVHJpbS5jYWxsKHN0cik7XG4gIGNoYXJhY3RlcnMgPSBkZWZhdWx0VG9XaGl0ZVNwYWNlKGNoYXJhY3RlcnMpO1xuICByZXR1cm4gc3RyLnJlcGxhY2UobmV3IFJlZ0V4cCgnXicgKyBjaGFyYWN0ZXJzICsgJyt8JyArIGNoYXJhY3RlcnMgKyAnKyQnLCAnZycpLCAnJyk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL0FwcFxuICovXG5cInVzZSBzdHJpY3RcIjtcblxuY29uc29sZS5pbmZvKGBQb3J0Zm9saW8gQXBwIHN0YXJ0ZWQgR0lUOiR7R0lUX1JFVn1gKTtcblxuLy8gaWYgKCFERUJVRykge1xuLy8gXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uKGV2KSB7XG4vLyBcdFx0Y29uc29sZS5lcnJvcihcIlVuY2F1Z2h0IEVycm9yXCIsIGV2KTtcbi8vIFx0fSk7XG4vLyB9XG5cbmlmIChERUJVRykge1xuXHRyZXF1aXJlKFwiTW9kZXJuaXpyXCIpO1xufVxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbnJlcXVpcmUoXCJlczYtcHJvbWlzZS9hdXRvXCIpO1xucmVxdWlyZShcImNsYXNzbGlzdC1wb2x5ZmlsbFwiKTtcbnJlcXVpcmUoXCJyYWYtcG9seWZpbGxcIik7XG5yZXF1aXJlKFwibWF0Y2hlcy1wb2x5ZmlsbFwiKTtcbnJlcXVpcmUoXCJmdWxsc2NyZWVuLXBvbHlmaWxsXCIpO1xucmVxdWlyZShcIm1hdGgtc2lnbi1wb2x5ZmlsbFwiKTtcbi8vIHJlcXVpcmUoXCJwYXRoMmQtcG9seWZpbGxcIik7XG5yZXF1aXJlKFwibXV0YXRpb24tb2JzZXJ2ZXJcIik7XG5cbnJlcXVpcmUoXCJiYWNrYm9uZVwiKS4kID0gcmVxdWlyZShcImJhY2tib25lLm5hdGl2ZVwiKTtcbnJlcXVpcmUoXCJiYWNrYm9uZS5iYWJ5c2l0dGVyXCIpO1xucmVxdWlyZShcIkJhY2tib25lLk11dGF0b3JzXCIpO1xucmVxdWlyZShcImhhbW1lcmpzXCIpO1xuXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oZXYpIHtcbi8vIFx0Y29uc29sZS5sb2coXCIlczpbZXZlbnQgJXNdXCIsIGV2LnRhcmdldCwgZXYudHlwZSk7XG4vLyB9KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGV2KSB7XG5cdGNvbnNvbGUubG9nKFwiJXM6W2V2ZW50ICVzXVwiLCBldi50YXJnZXQsIGV2LnR5cGUpO1xuXG5cdC8vIHByb2Nlc3MgYm9vdHN0cmFwIGRhdGEsIGxldCBlcnJvcnMgZ28gdXAgdGhlIHN0YWNrXG5cdHRyeSB7XG5cdFx0cmVxdWlyZShcImFwcC9tb2RlbC9oZWxwZXIvYm9vdHN0cmFwXCIpKHdpbmRvdy5ib290c3RyYXApO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHR2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFwcFwiKTtcblx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKFwiYXBwLWluaXRpYWxcIik7XG5cdFx0ZWwuY2xhc3NMaXN0LmFkZChcImFwcC1lcnJvclwiKTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJib290c3RyYXAgZGF0YSBlcnJvciAoXCIgKyBlcnIubWVzc2FnZSArIFwiKVwiLCBlcnIuZmlsZU5hbWUsIGVyci5saW5lTnVtYmVyKTtcblx0fSBmaW5hbGx5IHsgLy8gZGV0ZWxlIGdsb2JhbCB2YXJcblx0XHRkZWxldGUgd2luZG93LmJvb3RzdHJhcDtcblx0fVxuXG5cdHJlcXVpcmUoXCJhcHAvdmlldy90ZW1wbGF0ZS9faGVscGVyc1wiKTtcblxuXHQvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9oZWxwZXIvY3JlYXRlQ29sb3JTdHlsZVNoZWV0fSAqL1xuXHRyZXF1aXJlKFwiYXBwL3ZpZXcvaGVscGVyL2NyZWF0ZUNvbG9yU3R5bGVTaGVldFwiKS5jYWxsKCk7IC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L0FwcFZpZXd9ICovXG5cdHZhciBBcHBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L0FwcFZpZXdcIik7XG5cdC8vIHZhciBzdGFydEFwcCA9IEFwcFZpZXcuZ2V0SW5zdGFuY2UuYmluZChBcHBWaWV3KTtcblxuXHQvKiogQHR5cGUge21vZHVsZTp3ZWJmb250bG9hZGVyfSAqL1xuXHR2YXIgV2ViRm9udCA9IHJlcXVpcmUoXCJ3ZWJmb250bG9hZGVyXCIpO1xuXHR2YXIgbG9hZE9wdHMgPSB7XG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdyb3VwTmFtZTogXCJcIixcblx0XHRjbGFzc2VzOiBmYWxzZSxcblx0XHRsb2FkaW5nOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiV2ViRm9udDolczpsb2FkaW5nXCIsIHRoaXMuZ3JvdXBOYW1lKTtcblx0XHR9LFxuXHRcdGFjdGl2ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb25zb2xlLmluZm8oXCJXZWJGb250OiVzOmFjdGl2ZVwiLCB0aGlzLmdyb3VwTmFtZSk7XG5cdFx0fSxcblx0XHRpbmFjdGl2ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJXZWJGb250OiVzOmluYWN0aXZlXCIsIHRoaXMuZ3JvdXBOYW1lKTtcblx0XHR9LFxuXHRcdGZvbnRhY3RpdmU6IGZ1bmN0aW9uKGZhbWlseU5hbWUsIHZhcmlhbnRGdmQpIHtcblx0XHRcdGNvbnNvbGUuaW5mbyhcIldlYkZvbnQ6JXM6Zm9udGFjdGl2ZSAnJXMnICglcylcIiwgdGhpcy5ncm91cE5hbWUsIGZhbWlseU5hbWUsIHZhcmlhbnRGdmQpO1xuXHRcdH0sXG5cdFx0Zm9udGluYWN0aXZlOiBmdW5jdGlvbihmYW1pbHlOYW1lLCB2YXJpYW50RnZkKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJXZWJGb250OiVzOmZvbnRpbmFjdGl2ZSAnJXMnICglcylcIiwgdGhpcy5ncm91cE5hbWUsIGZhbWlseU5hbWUsIHZhcmlhbnRGdmQpO1xuXHRcdH0sXG5cdFx0Ly8gZm9udGxvYWRpbmc6IGZ1bmN0aW9uKGZhbWlseU5hbWUsIHZhcmlhbnREZXNjKSB7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhcIldlYkZvbnQ6OmZvbnRsb2FkaW5nXCIsIGZhbWlseU5hbWUsIEpTT04uc3RyaW5naWZ5KHZhcmlhbnREZXNjLCBudWxsLCBcIiBcIikpO1xuXHRcdC8vIH0sXG5cdH07XG5cblx0V2ViRm9udC5sb2FkKF8uZGVmYXVsdHMoe1xuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRncm91cE5hbWU6IFwicmVxdWlyZWRcIixcblx0XHRjdXN0b206IHtcblx0XHRcdGZhbWlsaWVzOiBbXG5cdFx0XHRcdFwiRnJhbmtsaW5Hb3RoaWNGUzpuNCxuNlwiLFxuXHRcdFx0XHQvLyBcIkZyYW5rbGluR290aGljRlM6aTQsaTZcIlxuXHRcdFx0XHRcIkZvbGlvRmlndXJlczpuNFwiLFxuXHRcdFx0XSxcblx0XHRcdHRlc3RTdHJpbmdzOiB7XG5cdFx0XHRcdFwiRm9saW9GaWd1cmVzXCI6IFwiaG1zXCJcblx0XHRcdH0sXG5cdFx0fSxcblx0XHRhY3RpdmU6ICgpID0+IEFwcFZpZXcuZ2V0SW5zdGFuY2UoKSxcblx0XHRpbmFjdGl2ZTogKCkgPT4gQXBwVmlldy5nZXRJbnN0YW5jZSgpLFxuXHR9LCBsb2FkT3B0cykpO1xuXG5cdFdlYkZvbnQubG9hZChfLmRlZmF1bHRzKHt9LCBsb2FkT3B0cykpO1xuXG5cdC8vIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbih0c3RhbXApIHtcblx0Ly8gXHRBcHBWaWV3LmdldEluc3RhbmNlKCk7XG5cdC8vIH0pO1xufSk7XG5cblxuLy8gaWYgKERFQlVHKSB7XG4vLyAvKiogQHR5cGUge21vZHVsZTp1bmRlcnNjb3JlfSAqL1xuLy8gdmFyIF8gPSByZXF1aXJlKFwidW5kZXJzY29yZVwiKTtcblxuLy8gdmFyIGlzRkYgPSAvRmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4vLyB2YXIgaXNJT1MgPSAvaVBhZHxpUGhvbmUvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuLypcbmlmICgvRmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0Y29uc29sZS5wcmVmaXggPSBcIiMgXCI7XG5cdHZhciBzaGlmdCA9IFtdLnNoaWZ0O1xuXHR2YXIgbG9nV3JhcEZuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJzdHJpbmdcIikgYXJndW1lbnRzWzFdID0gY29uc29sZS5wcmVmaXggKyBhcmd1bWVudHNbMV07XG5cdFx0cmV0dXJuIHNoaWZ0LmFwcGx5KGFyZ3VtZW50cykuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0fTtcblx0Y29uc29sZS5ncm91cCA9IF8ud3JhcChjb25zb2xlLmdyb3VwLCBsb2dXcmFwRm4pO1xuXHRjb25zb2xlLmxvZyA9IF8ud3JhcChjb25zb2xlLmxvZywgbG9nV3JhcEZuKTtcblx0Y29uc29sZS5pbmZvID0gXy53cmFwKGNvbnNvbGUuaW5mbywgbG9nV3JhcEZuKTtcblx0Y29uc29sZS53YXJuID0gXy53cmFwKGNvbnNvbGUud2FybiwgbG9nV3JhcEZuKTtcblx0Y29uc29sZS5lcnJvciA9IF8ud3JhcChjb25zb2xlLmVycm9yLCBsb2dXcmFwRm4pO1xufVxuKi9cbi8qXG52YXIgc2F2ZUxvZ3MgPSBmdW5jdGlvbigpIHtcblx0dmFyIGxvZ1dyYXBGbiA9IGZ1bmN0aW9uKG5hbWUsIGZuLCBtc2cpIHtcblx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoXG5cdFx0XHRkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiW1wiICsgbmFtZSArIFwiXSBcIiArIG1zZykpO1xuXHR9O1xuXHRjb25zb2xlLmdyb3VwID0gXy53cmFwKGNvbnNvbGUuZ3JvdXAsIF8ucGFydGlhbChsb2dXcmFwRm4sIFwiZ3JvdXBcIikpO1xuXHRjb25zb2xlLmxvZyA9IF8ud3JhcChjb25zb2xlLmxvZywgXy5wYXJ0aWFsKGxvZ1dyYXBGbiwgXCJsb2dcIikpO1xuXHRjb25zb2xlLmluZm8gPSBfLndyYXAoY29uc29sZS5pbmZvLCBfLnBhcnRpYWwobG9nV3JhcEZuLCBcImluZm9cIikpO1xuXHRjb25zb2xlLndhcm4gPSBfLndyYXAoY29uc29sZS53YXJuLCBfLnBhcnRpYWwobG9nV3JhcEZuLCBcIndhcm5cIikpO1xuXHRjb25zb2xlLmVycm9yID0gXy53cmFwKGNvbnNvbGUuZXJyb3IsIF8ucGFydGlhbChsb2dXcmFwRm4sIFwiZXJyb3JcIikpO1xufTtcbiovXG5cbi8vIGhhbmRsZSBlcnJvciBldmVudHMgb24gc29tZSBwbGF0Zm9ybXMgYW5kIHByb2R1Y3Rpb25cbi8qXG5pZiAoaXNJT1MpIHtcblx0Ly8gc2F2ZUxvZ3MoKTtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpLFxuXHRcdFx0ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuXHRcdFx0aHRtbCA9IFwiXCI7XG5cdFx0Xy5leHRlbmQoZWwuc3R5bGUsIHtcblx0XHRcdGZvbnRmYW1pbHk6IFwibW9ub3NwYWNlXCIsXG5cdFx0XHRkaXNwbGF5OiBcImJsb2NrXCIsXG5cdFx0XHRwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuXHRcdFx0ekluZGV4OiBcIjk5OVwiLFxuXHRcdFx0YmFja2dyb3VuZENvbG9yOiBcIndoaXRlXCIsXG5cdFx0XHRjb2xvcjogXCJibGFja1wiLFxuXHRcdFx0d2lkdGg6IFwiY2FsYygxMDAlIC0gM2VtKVwiLFxuXHRcdFx0Ym90dG9tOiBcIjBcIixcblx0XHRcdG1hcmdpbjogXCIxZW0gMS41ZW1cIixcblx0XHRcdHBhZGRpbmc6IFwiMWVtIDEuNWVtXCIsXG5cdFx0XHRvdXRsaW5lOiBcIjAuNWVtIHNvbGlkIHJlZFwiLFxuXHRcdFx0b3V0bGluZU9mZnNldDogXCIwLjVlbVwiLFxuXHRcdFx0Ym94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcblx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiLFxuXHRcdH0pO1xuXHRcdGh0bWwgKz0gXCI8cHJlPjxiPmxvY2F0aW9uOjxiPiBcIiArIHdpbmRvdy5sb2NhdGlvbiArIFwiPC9wcmU+XCI7XG5cdFx0aHRtbCArPSBcIjxwcmU+PGI+ZXZlbnQ6PGI+IFwiICsgSlNPTi5zdHJpbmdpZnkoYXJncy5zaGlmdCgpLCBudWxsLCBcIiBcIikgKyBcIjwvcHJlPlwiO1xuXHRcdGlmIChhcmdzLmxlbmd0aCkgaHRtbCArPSBcIjxwcmU+PGI+cmVzdDo8Yj4gXCIgKyBKU09OLnN0cmluZ2lmeShhcmdzLCBudWxsLCBcIiBcIikgKyBcIjwvcHJlPlwiO1xuXHRcdGVsLmlubmVySFRNTCA9IGh0bWw7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG5cdH0pO1xufSovXG4vLyB9XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvY29udHJvbC9Db250cm9sbGVyXG4gKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG5jb25zdCBCYWNrYm9uZSA9IHJlcXVpcmUoXCJiYWNrYm9uZVwiKTtcblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vVHlwZUNvbGxlY3Rpb259ICovXG4vLyB2YXIgdHlwZXMgPSByZXF1aXJlKFwiYXBwL21vZGVsL2NvbGxlY3Rpb24vVHlwZUNvbGxlY3Rpb25cIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvbn0gKi9cbi8vIHZhciBrZXl3b3JkcyA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvblwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL0FydGljbGVDb2xsZWN0aW9ufSAqL1xuY29uc3QgYXJ0aWNsZXMgPSByZXF1aXJlKFwiYXBwL21vZGVsL2NvbGxlY3Rpb24vQXJ0aWNsZUNvbGxlY3Rpb25cIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9CdW5kbGVDb2xsZWN0aW9ufSAqL1xuY29uc3QgYnVuZGxlcyA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9CdW5kbGVDb2xsZWN0aW9uXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuLyogU3RhdGljIHByaXZhdGVcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKipcbi8qIEBjb25zdHJ1Y3RvclxuLyogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9Db250cm9sbGVyfVxuLyovXG52YXIgQ29udHJvbGxlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xuXG5cdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0Ly8gcm91dGVzOiB7fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRpZiAoREVCVUcpIHtcblx0XHRcdHRoaXMuX3JvdXRlTmFtZXMgPSBbXTtcblx0XHRcdHRoaXMucm91dGUgPSBmdW5jdGlvbihyb3V0ZSwgbmFtZSwgY2FsbGJhY2spIHtcblx0XHRcdFx0dGhpcy5fcm91dGVOYW1lcy5wdXNoKF8uaXNTdHJpbmcobmFtZSkgPyBuYW1lIDogJycpO1xuXHRcdFx0XHRyZXR1cm4gQmFja2JvbmUuUm91dGVyLnByb3RvdHlwZS5yb3V0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0fTtcblx0XHRcdHRoaXMub24oXCJyb3V0ZVwiLCBmdW5jdGlvbihyb3V0ZU5hbWUsIGFyZ3MpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJjb250cm9sbGVyOltyb3V0ZV0gJXMgWyVzXVwiLCByb3V0ZU5hbWUsIGFyZ3Muam9pbigpKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qXG5cdFx0ICogUHJlZml4ZWQgYXJ0aWNsZSByZWdleHA6IC9eYXJ0aWNsZSg/OlxcLyhbXlxcL10rKSlcXC8/JC9cblx0XHQgKiBTaW5nbGUgYnVuZGxlIHJlZ2V4cDogL15idW5kbGVzKD86XFwvKFteXFwvXSspKD86XFwvKFxcZCspKT8pP1xcLz8kL1xuXHRcdCAqL1xuXHRcdHRoaXMucm91dGUoLyguKikvLFxuXHRcdFx0XCJub3Rmb3VuZFwiLCB0aGlzLnRvTm90Rm91bmQpO1xuXHRcdHRoaXMucm91dGUoL14oW2Etel1bYS16MC05XFwtXSopXFwvPyQvLFxuXHRcdFx0XCJhcnRpY2xlLWl0ZW1cIiwgdGhpcy50b0FydGljbGVJdGVtKTtcblx0XHR0aGlzLnJvdXRlKC9eKD86YnVuZGxlcyk/XFwvPyQvLFxuXHRcdFx0XCJyb290XCIsIHRoaXMudG9Sb290KTtcblx0XHQvLyB0aGlzLnJvdXRlKC9eYnVuZGxlc1xcLz8kLyxcblx0XHQvLyBcdFwiYnVuZGxlLWxpc3RcIiwgdGhpcy50b0J1bmRsZUxpc3QpO1xuXG5cdFx0Ly8gdGhpcy5yb3V0ZSgvXmJ1bmRsZXNcXC8oW15cXC9dKylcXC8/JC8sXG5cdFx0Ly8gXHRcImJ1bmRsZS1pdGVtXCIsIHRoaXMudG9CdW5kbGVJdGVtKTtcblx0XHQvLyB0aGlzLnJvdXRlKC9eYnVuZGxlc1xcLyhbXlxcL10rKVxcLyhcXGQrKVxcLz8kLyxcblx0XHQvLyBcdFwibWVkaWEtaXRlbVwiLCB0aGlzLnRvTWVkaWFJdGVtKTtcblxuXHRcdC8vIHRoaXMucm91dGUoL15idW5kbGVzKD86XFwvKFteXFwvXSspKD86XFwvKFxcZCspKT8pP1xcLz8kLyxcblx0XHQvLyBcdFwibWVkaWEtaXRlbVwiLCB0aGlzLnRvTWVkaWFJdGVtKTtcblxuXHRcdHRoaXMucm91dGUoL15idW5kbGVzXFwvKFteXFwvXSspKD86XFwvKFxcZCspPyk/XFwvPyQvLFxuXHRcdFx0XCJtZWRpYS1pdGVtXCIsIHRoaXMudG9NZWRpYUl0ZW0pO1xuXG5cdFx0aWYgKERFQlVHKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOjppbml0aWFsaXplIHJvdXRlczogJW9cIiwgXCJjb250cm9sbGVyXCIsIHRoaXMuX3JvdXRlTmFtZXMpO1xuXHRcdH1cblx0fSxcblxuXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIEpTIHRvIFVSTDogcHVibGljIGNvbW1hbmQgbWV0aG9kc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRzZWxlY3RNZWRpYTogZnVuY3Rpb24obWVkaWEpIHtcblx0XHR0aGlzLl9nb1RvTG9jYXRpb24obWVkaWEuZ2V0KFwiYnVuZGxlXCIpLCBtZWRpYSk7XG5cdH0sXG5cblx0c2VsZWN0QnVuZGxlOiBmdW5jdGlvbihidW5kbGUpIHtcblx0XHRpZiAoYnVuZGxlLmF0dHIoXCJAbm8tZGVzY1wiKSkge1xuXHRcdFx0dGhpcy5fZ29Ub0xvY2F0aW9uKGJ1bmRsZSxcblx0XHRcdFx0YnVuZGxlLmdldChcIm1lZGlhXCIpLmF0KDApLCB7XG5cdFx0XHRcdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRcdFx0XHR0cmlnZ2VyOiB0cnVlXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2dvVG9Mb2NhdGlvbihidW5kbGUpO1xuXHRcdH1cblx0fSxcblxuXHRkZXNlbGVjdE1lZGlhOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9nb1RvTG9jYXRpb24oYnVuZGxlcy5zZWxlY3RlZCk7XG5cdH0sXG5cblx0ZGVzZWxlY3RCdW5kbGU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX2dvVG9Mb2NhdGlvbigpO1xuXHR9LFxuXG5cdHNlbGVjdEFydGljbGU6IGZ1bmN0aW9uKGFydGljbGUpIHtcblx0XHR0aGlzLm5hdmlnYXRlKGFydGljbGUuZ2V0KFwiaGFuZGxlXCIpLCB7IHRyaWdnZXI6IHRydWUgfSk7XG5cdH0sXG5cblx0ZGVzZWxlY3RBcnRpY2xlOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm5hdmlnYXRlKFwiXCIsIHsgdHJpZ2dlcjogdHJ1ZSB9KTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogSlMgdG8gVVJMOiBwcml2YXRlIGhlbHBlcnNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIFVwZGF0ZSBsb2NhdGlvbiB3aGVuIG5hdmlnYXRpb24gaGFwcGVucyBpbnRlcm5hbGx5ICovXG5cdC8qX3VwZGF0ZUxvY2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYnVuZGxlLCBtZWRpYTtcblx0XHRidW5kbGUgPSBidW5kbGVzLnNlbGVjdGVkO1xuXHRcdGlmIChidW5kbGUpIHtcblx0XHRcdG1lZGlhID0gYnVuZGxlLmdldChcIm1lZGlhXCIpLnNlbGVjdGVkO1xuXHRcdH1cblx0XHR0aGlzLm5hdmlnYXRlKHRoaXMuX2dldExvY2F0aW9uKGJ1bmRsZSwgbWVkaWEpLCB7XG5cdFx0XHR0cmlnZ2VyOiBmYWxzZVxuXHRcdH0pO1xuXHR9LCovXG5cblx0X2dldExvY2F0aW9uOiBmdW5jdGlvbihidW5kbGUsIG1lZGlhKSB7XG5cdFx0dmFyIG1lZGlhSW5kZXgsIGxvY2F0aW9uID0gW107XG5cdFx0aWYgKGJ1bmRsZSkge1xuXHRcdFx0bG9jYXRpb24ucHVzaChcImJ1bmRsZXNcIik7XG5cdFx0XHRsb2NhdGlvbi5wdXNoKGJ1bmRsZS5nZXQoXCJoYW5kbGVcIikpO1xuXHRcdFx0aWYgKG1lZGlhKSB7XG5cdFx0XHRcdG1lZGlhSW5kZXggPSBidW5kbGUuZ2V0KFwibWVkaWFcIikuaW5kZXhPZihtZWRpYSk7XG5cdFx0XHRcdGlmIChtZWRpYUluZGV4ID49IDApIHtcblx0XHRcdFx0XHRsb2NhdGlvbi5wdXNoKG1lZGlhSW5kZXgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIGxvY2F0aW9uLnB1c2goXCJcIik7XG5cdFx0cmV0dXJuIGxvY2F0aW9uLmpvaW4oXCIvXCIpO1xuXHR9LFxuXG5cdF9nb1RvTG9jYXRpb246IGZ1bmN0aW9uKGJ1bmRsZSwgbWVkaWEsIG9wdHMpIHtcblx0XHR0aGlzLm5hdmlnYXRlKFxuXHRcdFx0dGhpcy5fZ2V0TG9jYXRpb24oYnVuZGxlLCBtZWRpYSksXG5cdFx0XHRfLmRlZmF1bHRzKG9wdHMgfHwge30sIHtcblx0XHRcdFx0dHJpZ2dlcjogdHJ1ZVxuXHRcdFx0fSlcblx0XHQpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIFVSTCB0byBKUzogcm91dGVyIGhhbmRsZXJzXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHRvUm9vdDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy50cmlnZ2VyKFwiY2hhbmdlOmJlZm9yZVwiKTtcblx0XHRpZiAoYnVuZGxlcy5zZWxlY3RlZCkge1xuXHRcdFx0Ly8gYnVuZGxlcy5zZWxlY3RlZC5nZXQoXCJtZWRpYVwiKS5kZXNlbGVjdCgpO1xuXHRcdFx0YnVuZGxlcy5kZXNlbGVjdCgpO1xuXHRcdH1cblx0XHQvLyBrZXl3b3Jkcy5kZXNlbGVjdCgpO1xuXHRcdGFydGljbGVzLmRlc2VsZWN0KCk7XG5cdFx0dGhpcy50cmlnZ2VyKFwiY2hhbmdlOmFmdGVyXCIpO1xuXHR9LFxuXG5cdHRvTm90Rm91bmQ6IGZ1bmN0aW9uKHNsdWcpIHtcblx0XHRjb25zb2xlLmluZm8oXCJyb3V0ZTpbKjolc11cIiwgc2x1Zyk7XG5cdH0sXG5cblx0Ly8gdG9CdW5kbGVMaXN0OiBmdW5jdGlvbigpIHtcblx0Ly8gXHR0aGlzLm5hdmlnYXRlKFwiXCIsIHtcblx0Ly8gXHRcdHRyaWdnZXI6IHRydWUsXG5cdC8vIFx0XHRyZXBsYWNlOiB0cnVlXG5cdC8vIFx0fSk7XG5cdC8vIH0sXG5cblx0dG9CdW5kbGVJdGVtOiBmdW5jdGlvbihidW5kbGVIYW5kbGUpIHtcblx0XHRsZXQgYnVuZGxlID0gYnVuZGxlcy5maW5kV2hlcmUoeyBoYW5kbGU6IGJ1bmRsZUhhbmRsZSB9KTtcblx0XHRpZiAoIWJ1bmRsZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBObyBidW5kbGUgZm91bmQgd2l0aCBoYW5kbGUgJyR7YnVuZGxlSGFuZGxlfSdgKTtcblx0XHRcdC8vIH0gZWxzZSBpZiAoYnVuZGxlLmF0dHIoXCJAbm8tZGVzY1wiKSkge1xuXHRcdFx0Ly8gdGhpcy5fY2hhbmdlU2VsZWN0aW9uKGJ1bmRsZSwgYnVuZGxlLmdldChcIm1lZGlhXCIpLmF0KDApKTtcblx0XHRcdC8vIHRoaXMubmF2aWdhdGUodGhpcy5fZ2V0TG9jYXRpb24oYnVuZGxlLCBidW5kbGUuZ2V0KFwibWVkaWFcIikuYXQoMCkpLCB7IHRyaWdnZXI6IHRydWUsIHJlcGxhY2U6IGZhbHNlIH0pO1xuXHRcdH1cblx0XHR0aGlzLl9jaGFuZ2VTZWxlY3Rpb24oYnVuZGxlKTtcblx0fSxcblxuXHR0b01lZGlhSXRlbTogZnVuY3Rpb24oYnVuZGxlSGFuZGxlLCBtZWRpYUluZGV4KSB7XG5cdFx0bGV0IGJ1bmRsZSA9IGJ1bmRsZXMuZmluZFdoZXJlKHsgaGFuZGxlOiBidW5kbGVIYW5kbGUgfSk7XG5cdFx0aWYgKCFidW5kbGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgTm8gYnVuZGxlIGZvdW5kIHdpdGggaGFuZGxlICcke2J1bmRsZUhhbmRsZX0nYCk7XG5cdFx0fVxuXHRcdGxldCBtZWRpYSA9IGJ1bmRsZS5nZXQoXCJtZWRpYVwiKS5hdChtZWRpYUluZGV4ID8gbWVkaWFJbmRleCA6IDApO1xuXHRcdGlmICghbWVkaWEpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgTm8gbWVkaWEgZm91bmQgYXQgaW5kZXggJHttZWRpYUluZGV4fSBpbiBidW5kbGUgJyR7YnVuZGxlSGFuZGxlfSdgKTtcblx0XHR9XG5cdFx0dGhpcy5fY2hhbmdlU2VsZWN0aW9uKGJ1bmRsZSwgbWVkaWEpO1xuXHR9LFxuXG5cdHRvQXJ0aWNsZUl0ZW06IGZ1bmN0aW9uKGFydGljbGVIYW5kbGUpIHtcblx0XHRsZXQgYXJ0aWNsZSA9IGFydGljbGVzLmZpbmRXaGVyZSh7IGhhbmRsZTogYXJ0aWNsZUhhbmRsZSB9KTtcblx0XHRpZiAoIWFydGljbGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgTm8gYXJ0aWNsZSBmb3VuZCB3aXRoIGhhbmRsZSAnJHthcnRpY2xlSGFuZGxlfSdgKTtcblx0XHR9XG5cdFx0dGhpcy50cmlnZ2VyKFwiY2hhbmdlOmJlZm9yZVwiLCBhcnRpY2xlKTtcblx0XHRidW5kbGVzLmRlc2VsZWN0KCk7XG5cdFx0YXJ0aWNsZXMuc2VsZWN0KGFydGljbGUpO1xuXHRcdHRoaXMudHJpZ2dlcihcImNoYW5nZTphZnRlclwiLCBhcnRpY2xlKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIFVSTCB0byBKUzogcHJpdmF0ZSBoZWxwZXJzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKlxuXHQvKiBOT1RFOiBTZWxlY3Rpb24gb3JkZXJcblx0LyogLSBBcHBseSBtZWRpYSBzZWxlY3Rpb24gdG8gKmluY29taW5nIGJ1bmRsZSosIGFzIG5vdCB0byB0cmlnZ2VyXG5cdC8qXHR1bm5lY2Nlc2FyeSBldmVudHMgb24gYW4gb3V0Z29pbmcgYnVuZGxlLiBPdXRnb2luZyBidW5kbGUgbWVkaWEgc2VsZWN0aW9uXG5cdC8qXHRyZW1haW5zIHVudG91Y2hlZC5cblx0LyogLSBBcHBseSBtZWRpYSBzZWxlY3Rpb24gKmJlZm9yZSogc2VsZWN0aW5nIHRoZSBpbmNvbWluZyBidW5kbGUuIFZpZXdzXG5cdC8qXHRub3JtYWxseSBsaXN0ZW4gdG8gdGhlIHNlbGVjdGVkIGJ1bmRsZSBvbmx5LCBzbyBpZiB0aGUgYnVuZGxlIGlzIGNoYW5naW5nLFxuXHQvKlx0dGhleSB3aWxsIG5vdCBiZSBsaXN0ZW5pbmcgdG8gbWVkaWEgc2VsZWN0aW9uIGNoYW5nZXMgeWV0LlxuXHQvKi9cblx0X2NoYW5nZVNlbGVjdGlvbjogZnVuY3Rpb24oYnVuZGxlLCBtZWRpYSkge1xuXHRcdHZhciBsYXN0QnVuZGxlLCBsYXN0TWVkaWE7XG5cdFx0aWYgKGJ1bmRsZSA9PT0gdm9pZCAwKSBidW5kbGUgPSBudWxsO1xuXHRcdGlmIChtZWRpYSA9PT0gdm9pZCAwKSBtZWRpYSA9IG51bGw7XG5cblx0XHQvLyBpZiAoYnVuZGxlICE9PSBudWxsICYmIG1lZGlhID09PSBudWxsICYmIGJ1bmRsZS5hdHRyKFwiQG5vLWRlc2NcIikpIHtcblx0XHQvLyBcdG1lZGlhID0gYnVuZGxlLmdldChcIm1lZGlhXCIpLmF0KDApO1xuXHRcdC8vIFx0dGhpcy5fZ29Ub0xvY2F0aW9uKGJ1bmRsZSwgbWVkaWEpO1xuXHRcdC8vIFx0cmV0dXJuO1xuXHRcdC8vIH1cblxuXHRcdGxhc3RCdW5kbGUgPSBidW5kbGVzLnNlbGVjdGVkO1xuXHRcdGxhc3RNZWRpYSA9IGxhc3RCdW5kbGUgPyBsYXN0QnVuZGxlLmdldChcIm1lZGlhXCIpLnNlbGVjdGVkIDogbnVsbDtcblx0XHRjb25zb2xlLmxvZyhcImNvbnRyb2xsZXI6Ol9jaGFuZ2VTZWxlY3Rpb24gYnVuZGxlOlslcyAtPiAlc10gbWVkaWE6WyVzIC0+ICVzXVwiLFxuXHRcdFx0KGxhc3RCdW5kbGUgPyBsYXN0QnVuZGxlLmNpZCA6IGxhc3RCdW5kbGUpLFxuXHRcdFx0KGJ1bmRsZSA/IGJ1bmRsZS5jaWQgOiBidW5kbGUpLFxuXHRcdFx0KGxhc3RNZWRpYSA/IGxhc3RNZWRpYS5jaWQgOiBsYXN0TWVkaWEpLFxuXHRcdFx0KG1lZGlhID8gbWVkaWEuY2lkIDogbWVkaWEpXG5cdFx0KTtcblxuXHRcdGlmICghYXJ0aWNsZXMuc2VsZWN0ZWRcblx0XHRcdCYmIChsYXN0QnVuZGxlID09PSBidW5kbGUpXG5cdFx0XHQmJiAobGFzdE1lZGlhID09PSBtZWRpYSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnRyaWdnZXIoXCJjaGFuZ2U6YmVmb3JlXCIsIGJ1bmRsZSwgbWVkaWEpO1xuXHRcdGJ1bmRsZSAmJiBidW5kbGUuZ2V0KFwibWVkaWFcIikuc2VsZWN0KG1lZGlhKTtcblx0XHRidW5kbGVzLnNlbGVjdChidW5kbGUpO1xuXHRcdGFydGljbGVzLmRlc2VsZWN0KCk7XG5cdFx0dGhpcy50cmlnZ2VyKFwiY2hhbmdlOmFmdGVyXCIsIGJ1bmRsZSwgbWVkaWEpO1xuXHR9LFxufSk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ29udHJvbGxlcigpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL2NvbnRyb2wvR2xvYmFsc1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCkge1xuXHQvLyByZXVzYWJsZSB2YXJzXG5cdHZhciBvLCBzLCBzbztcblx0Ly8gZ2xvYmFsIGhhc2hcblx0dmFyIGcgPSB7fTtcblx0Ly8gU0FTUyA8LS0+IEpTIHNoYXJlZCBoYXNoXG5cdHZhciBzYXNzID0gcmVxdWlyZShcIi4uLy4uLy4uL3Nhc3MvdmFyaWFibGVzLmpzb25cIik7XG5cblx0Ly8gSlVOSyBGSVJTVDogU29tZSBhcHAtd2lkZSBkZWZhdWx0c1xuXHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0Zy5WUEFOX0RSQUcgPSAwLjk1OyAvLyBhcyBmYWN0b3Igb2YgcG9pbnRlciBkZWx0YVxuXHRnLkhQQU5fT1VUX0RSQUcgPSAwLjQ7IC8vIGZhY3RvclxuXHRnLlZQQU5fT1VUX0RSQUcgPSAwLjE7IC8vIGZhY3RvclxuXHRnLlBBTl9USFJFU0hPTEQgPSAxNTsgLy8gcHhcblx0Zy5DT0xMQVBTRV9USFJFU0hPTEQgPSA3NTsgLy8gcHhcblx0Zy5DT0xMQVBTRV9PRkZTRVQgPSBwYXJzZUludChzYXNzLnRlbXBbXCJjb2xsYXBzZV9vZmZzZXRcIl0pO1xuXHQvLyBnLkNMSUNLX0VWRU5UID0gXCJjbGlja1wiOyAvL3dpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIm9ucG9pbnRlcnVwXCIpID8gXCJwb2ludGVydXBcIiA6IFwibW91c2V1cFwiO1xuXHRnLlZJREVPX0NST1BfUFggPSBwYXJzZUludChzYXNzW1widmlkZW9fY3JvcF9weFwiXSk7XG5cblx0Ly8gYnJlYWtwb2ludHNcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdGcuQlJFQUtQT0lOVFMgPSB7fTtcblx0Zm9yIChzIGluIHNhc3MuYnJlYWtwb2ludHMpIHtcblx0XHRvID0gc2Fzcy5icmVha3BvaW50c1tzXTtcblx0XHQvKmlmIChBcnJheS5pc0FycmF5KG8pKSB7XG5cdFx0XHRnLkJSRUFLUE9JTlRTW3NdID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe30sIHtcblx0XHRcdFx0XCJtYXRjaGVzXCI6IHtcblx0XHRcdFx0XHRnZXQ6IF8ucGFydGlhbChfLnNvbWUsIG8ubWFwKHdpbmRvdy5tYXRjaE1lZGlhKSwgXy5wcm9wZXJ0eShcIm1hdGNoZXNcIikpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwibWVkaWFcIjoge1xuXHRcdFx0XHRcdHZhbHVlOiBvLmpvaW4oXCIsIFwiKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInF1ZXJpZXNcIjoge1xuXHRcdFx0XHRcdHZhbHVlOiBvLm1hcCh3aW5kb3cubWF0Y2hNZWRpYSlcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRnLkJSRUFLUE9JTlRTW3NdID0gd2luZG93Lm1hdGNoTWVkaWEobyk7XG5cdFx0fSovXG5cdFx0byA9IEFycmF5LmlzQXJyYXkobykgPyBvLmpvaW4oXCIsIFwiKSA6IG87XG5cdFx0byA9IG8ucmVwbGFjZSgvW1xcJ1xcXCJdL2csIFwiXCIpO1xuXHRcdG8gPSB3aW5kb3cubWF0Y2hNZWRpYShvKTtcblx0XHRvLmNsYXNzTmFtZSA9IHM7XG5cdFx0Zy5CUkVBS1BPSU5UU1tzXSA9IG87XG5cdH1cblx0aWYgKERFQlVHKSB7XG5cdFx0Y29uc29sZS5ncm91cENvbGxhcHNlZChcIkJyZWFrcG9pbnRzXCIpO1xuXHRcdGZvciAocyBpbiBnLkJSRUFLUE9JTlRTKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOiAlb1wiLCBzLCBnLkJSRUFLUE9JTlRTW3NdLm1lZGlhKTtcblx0XHR9XG5cdFx0Y29uc29sZS5ncm91cEVuZCgpO1xuXHR9XG5cblx0Ly8gYmFzZSBjb2xvcnMsIGRpbWVuc2lvbnNcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdGcuREVGQVVMVF9DT0xPUlMgPSBfLmNsb25lKHNhc3MuZGVmYXVsdF9jb2xvcnMpO1xuXHQvLyBnLkhPUklaT05UQUxfU1RFUCA9IHBhcnNlRmxvYXQoc2Fzcy51bml0c1tcImh1X3B4XCJdKTtcblx0Ly8gZy5WRVJUSUNBTF9TVEVQID0gcGFyc2VGbG9hdChzYXNzLnVuaXRzW1widnVfcHhcIl0pO1xuXG5cblx0Ly8gcGF0aHMsIG5ldHdvcmtpbmdcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdC8vIHZhciB0b0Fic29sdXRlVVJMID0gKGZ1bmN0aW9uKCkge1xuXHQvLyBcdHZhciBhID0gbnVsbDtcblx0Ly8gXHRyZXR1cm4gZnVuY3Rpb24odXJsKSB7XG5cdC8vIFx0XHRhID0gYSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdC8vIFx0XHRhLmhyZWYgPSB1cmw7XG5cdC8vIFx0XHRyZXR1cm4gYS5ocmVmO1xuXHQvLyBcdH07XG5cdC8vIH0pKCk7XG5cdC8vIGcuQVBQX1JPT1QgPSB0b0Fic29sdXRlVVJMKHdpbmRvdy5hcHByb290KTtcblx0Ly8gZy5NRURJQV9ESVIgPSB0b0Fic29sdXRlVVJMKHdpbmRvdy5tZWRpYWRpcik7XG5cblx0Zy5BUFBfUk9PVCA9IHdpbmRvdy5hcHByb290O1xuXHRnLk1FRElBX0RJUiA9IHdpbmRvdy5tZWRpYWRpcjtcblxuXHRkZWxldGUgd2luZG93LmFwcHJvb3Q7XG5cdGRlbGV0ZSB3aW5kb3cubWVkaWFkaXI7XG5cblx0Ly8gaGFyZGNvZGVkIGZvbnQgZGF0YVxuXHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0Zy5GT05UX01FVFJJQ1MgPSB7XG5cdFx0XCJGcmFua2xpbkdvdGhpY0ZTXCI6IHtcblx0XHRcdFwidW5pdHNQZXJFbVwiOiAxMDAwLFxuXHRcdFx0XCJhc2NlbnRcIjogODI3LFxuXHRcdFx0XCJkZXNjZW50XCI6IC0xNzNcblx0XHR9LFxuXHRcdFwiSVRDRnJhbmtsaW5Hb3RoaWNTdGRcIjoge1xuXHRcdFx0XCJ1bml0c1BlckVtXCI6IDEwMDAsXG5cdFx0XHRcImFzY2VudFwiOiA2ODYsXG5cdFx0XHRcImRlc2NlbnRcIjogLTMxNFxuXHRcdH0sXG5cdFx0XCJGb2xpb0ZpZ3VyZXNcIjoge1xuXHRcdFx0XCJ1bml0c1BlckVtXCI6IDEwMjQsXG5cdFx0XHRcImFzY2VudFwiOiA5MzksXG5cdFx0XHRcImRlc2NlbnRcIjogLTI1NlxuXHRcdH0sXG5cdH07XG5cblx0Zy5QQVVTRV9DSEFSID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweDIzRjgpO1xuXHRnLlBMQVlfQ0hBUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgyM0Y1KTtcblx0Zy5TVE9QX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MjNGOSk7XG5cblx0Ly8gdHJhbnNsYXRlIGNvbW1vbiB0ZW1wbGF0ZVxuXHRpZiAoc2Fzcy50cmFuc2Zvcm1fdHlwZSA9PSBcIjNkXCIpIHtcblx0XHRnLlRSQU5TTEFURV9URU1QTEFURSA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0XHRcdHJldHVybiBcInRyYW5zbGF0ZTNkKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgsIDBweClcIjtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGcuVFJBTlNMQVRFX1RFTVBMQVRFID0gZnVuY3Rpb24oeCwgeSkge1xuXHRcdFx0cmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgpXCI7XG5cdFx0fTtcblx0fVxuXG5cdGcuVFJBTlNMQVRFX1RFTVBMQVRFID0gZnVuY3Rpb24oeCwgeSkge1xuXHRcdHJldHVybiBcInRyYW5zbGF0ZShcIiArIHggKyBcInB4LCBcIiArIHkgKyBcInB4KVwiO1xuXHRcdC8vIHJldHVybiBcInRyYW5zbGF0ZTNkKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHggLDBweClcIjtcblx0fTtcblx0Ly8gdGltaW5nLCBlYXNpbmdcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdHZhciBlYXNlID0gZy5UUkFOU0lUSU9OX0VBU0UgPSBzYXNzLnRyYW5zaXRpb25zW1wiZWFzZVwiXTtcblx0dmFyIGR1cmF0aW9uID0gZy5UUkFOU0lUSU9OX0RVUkFUSU9OID0gcGFyc2VGbG9hdChzYXNzLnRyYW5zaXRpb25zW1wiZHVyYXRpb25fbXNcIl0pO1xuXHR2YXIgZGVsYXlJbnRlcnZhbCA9IGcuVFJBTlNJVElPTl9ERUxBWV9JTlRFUlZBTCA9IHBhcnNlRmxvYXQoc2Fzcy50cmFuc2l0aW9uc1tcImRlbGF5X2ludGVydmFsX21zXCJdKTtcblx0dmFyIG1pbkRlbGF5ID0gZy5UUkFOU0lUSU9OX01JTl9ERUxBWSA9IHBhcnNlRmxvYXQoc2Fzcy50cmFuc2l0aW9uc1tcIm1pbl9kZWxheV9tc1wiXSk7XG5cdHZhciBkZWxheSA9IGcuVFJBTlNJVElPTl9ERUxBWSA9IGcuVFJBTlNJVElPTl9EVVJBVElPTiArIGcuVFJBTlNJVElPTl9ERUxBWV9JTlRFUlZBTDtcblxuXHQvLyBjc3MgdHJhbnNpdGlvbnNcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdG8gPSB7fTtcblxuXHQvLyBtYXRjaCB0eCgpIGluIF90cmFuc2l0aW9ucy5zY3NzXG5cdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRvLnR4ID0gZnVuY3Rpb24gdHgoZHVyYXRpb25Db3VudCwgZGVsYXlDb3VudCwgZWFzZVZhbCkge1xuXHRcdF8uaXNOdW1iZXIoZHVyYXRpb25Db3VudCkgfHwgKGR1cmF0aW9uQ291bnQgPSAxKTtcblx0XHRfLmlzTnVtYmVyKGRlbGF5Q291bnQpIHx8IChkZWxheUNvdW50ID0gLTEpO1xuXHRcdF8uaXNTdHJpbmcoZWFzZVZhbCkgfHwgKGVhc2VWYWwgPSBlYXNlKTtcblxuXHRcdHZhciBvID0ge307XG5cdFx0aWYgKGRlbGF5Q291bnQgPCAwKSB7XG5cdFx0XHRvLmR1cmF0aW9uID0gKGR1cmF0aW9uICogZHVyYXRpb25Db3VudCkgK1xuXHRcdFx0XHQoZGVsYXlJbnRlcnZhbCAqIChkdXJhdGlvbkNvdW50IC0gMSkpO1xuXHRcdFx0by5kZWxheSA9IDA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG8uZHVyYXRpb24gPSAoZHVyYXRpb24gKiBkdXJhdGlvbkNvdW50KSArXG5cdFx0XHRcdChkZWxheUludGVydmFsICogKGR1cmF0aW9uQ291bnQgLSAxKSkgLSBtaW5EZWxheTtcblx0XHRcdG8uZGVsYXkgPSAoZGVsYXkgKiBkZWxheUNvdW50KSAtIG1pbkRlbGF5O1xuXHRcdH1cblx0XHRvLmVhc2VpbmcgPSBlYXNlVmFsO1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0Ly8gdHJhbnNpdGlvbiBwcmVzZXRzXG5cdC8vIFRPRE86IGdldCByaWQgb2YgdGhpc1xuXHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblxuXHRvLk5PTkUgPSB7XG5cdFx0ZGVsYXk6IDAsXG5cdFx0ZHVyYXRpb246IDAsXG5cdFx0ZWFzaW5nOiBcInN0ZXAtc3RhcnRcIlxuXHR9O1xuXHRvLk5PVyA9IHtcblx0XHRkZWxheTogMCxcblx0XHRkdXJhdGlvbjogZHVyYXRpb24sXG5cdFx0ZWFzaW5nOiBlYXNlXG5cdH07XG5cdG8uVU5TRVQgPSBfLmRlZmF1bHRzKHtcblx0XHRjc3NUZXh0OiBcIlwiXG5cdH0sIG8uTk9ORSk7XG5cblx0dmFyIHR4QWxpZ25lZCA9IF8uZGVmYXVsdHMoe1xuXHRcdGR1cmF0aW9uOiBkdXJhdGlvbiAtIG1pbkRlbGF5XG5cdH0sIG8uTk9XKTtcblx0by5GSVJTVCA9IF8uZGVmYXVsdHMoe1xuXHRcdGRlbGF5OiBkZWxheSAqIDAuMCArIG1pbkRlbGF5XG5cdH0sIHR4QWxpZ25lZCk7XG5cdG8uQkVUV0VFTiA9IF8uZGVmYXVsdHMoe1xuXHRcdGRlbGF5OiBkZWxheSAqIDEuMCArIG1pbkRlbGF5XG5cdH0sIHR4QWxpZ25lZCk7XG5cdG8uTEFTVCA9IF8uZGVmYXVsdHMoe1xuXHRcdGRlbGF5OiBkZWxheSAqIDIuMCArIG1pbkRlbGF5XG5cdH0sIHR4QWxpZ25lZCk7XG5cdG8uQUZURVIgPSBfLmRlZmF1bHRzKHtcblx0XHRkZWxheTogZGVsYXkgKiAyLjAgKyBtaW5EZWxheVxuXHR9LCB0eEFsaWduZWQpO1xuXG5cdG8uQkVUV0VFTl9FQVJMWSA9IF8uZGVmYXVsdHMoe1xuXHRcdGRlbGF5OiBkZWxheSAqIDEuMCArIG1pbkRlbGF5IC0gNjBcblx0fSwgdHhBbGlnbmVkKTtcblx0by5CRVRXRUVOX0xBVEUgPSBfLmRlZmF1bHRzKHtcblx0XHRkZWxheTogZGVsYXkgKiAxLjAgKyBtaW5EZWxheSArIDYwXG5cdH0sIHR4QWxpZ25lZCk7XG5cblx0by5GSVJTVF9MQVRFID0gXy5kZWZhdWx0cyh7XG5cdFx0ZGVsYXk6IGRlbGF5ICogMC41ICsgbWluRGVsYXlcblx0fSwgdHhBbGlnbmVkKTtcblx0by5MQVNUX0VBUkxZID0gXy5kZWZhdWx0cyh7XG5cdFx0ZGVsYXk6IGRlbGF5ICogMS41ICsgbWluRGVsYXlcblx0fSwgdHhBbGlnbmVkKTtcblx0Ly8gby5GSVJTVF9MQVRFID0gXHRcdF8uZGVmYXVsdHMoe2RlbGF5OiB0eERlbGF5KjAuMCArIHR4TWluRGVsYXkqMn0sIHR4QWxpZ25lZCk7XG5cdC8vIG8uTEFTVF9FQVJMWSA9IFx0XHRfLmRlZmF1bHRzKHtkZWxheTogdHhEZWxheSoyLjAgKyB0eE1pbkRlbGF5KjB9LCB0eEFsaWduZWQpO1xuXHQvLyBvLkFGVEVSID0gXHRcdFx0Xy5kZWZhdWx0cyh7ZGVsYXk6IHR4RGVsYXkqMi4wICsgdHhNaW5EZWxheX0sIHR4QWxpZ25lZCk7XG5cblx0Y29uc29sZS5ncm91cENvbGxhcHNlZChcIlRyYW5zaXRpb25zXCIpO1xuXHRmb3IgKHMgaW4gbykge1xuXHRcdGlmICghXy5pc0Z1bmN0aW9uKG9bc10pKSB7XG5cdFx0XHRzbyA9IG9bc107XG5cdFx0XHRzby5uYW1lID0gcztcblx0XHRcdHNvLmNsYXNzTmFtZSA9IFwidHgtXCIgKyBzLnJlcGxhY2UoXCJfXCIsIFwiLVwiKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0aWYgKCFzby5oYXNPd25Qcm9wZXJ0eShcImNzc1RleHRcIikpIHtcblx0XHRcdFx0c28uY3NzVGV4dCA9IHNvLmR1cmF0aW9uIC8gMTAwMCArIFwicyBcIiArIHNvLmVhc2luZyArIFwiIFwiICsgc28uZGVsYXkgLyAxMDAwICsgXCJzXCI7XG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOiAlc1wiLCBzby5uYW1lLCBzby5jc3NUZXh0KTtcblx0XHR9XG5cdH1cblx0Y29uc29sZS5ncm91cEVuZCgpO1xuXHRnLnRyYW5zaXRpb25zID0gbztcblxuXHRyZXR1cm4gZztcbn0oKSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvQmFzZUl0ZW1cbiAqIEByZXF1aXJlcyBtb2R1bGU6YmFja2JvbmVcbiAqL1xuLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG5jb25zdCBCYXNlTW9kZWwgPSByZXF1aXJlKFwiYmFja2JvbmVcIikuTW9kZWw7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvQmFzZU1vZGVsfSAqL1xuLy8gdmFyIEJhc2VNb2RlbCA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvQmFzZU1vZGVsXCIpO1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTp1dGlscy9zdHJpbmdzL3N0cmlwVGFnc30gKi9cbi8vIGNvbnN0IHN0cmlwVGFncyA9IHJlcXVpcmUoXCJ1dGlscy9zdHJpbmdzL3N0cmlwVGFnc1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG4vLyBjb25zdCBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gQmFzZU1vZGVsLmV4dGVuZCh7XG5cblx0ZGVmYXVsdHM6IHtcblx0XHRyb3V0ZU5hbWU6IFwiaW5pdGlhbFwiLFxuXHRcdGZyb21Sb3V0ZU5hbWU6IFwiXCIsXG5cdFx0cGFnZTogXCJcIixcblx0XHRhcnRpY2xlOiBudWxsLFxuXHRcdGJ1bmRsZTogbnVsbCxcblx0XHRtZWRpYTogbnVsbCxcblx0XHR3aXRoQXJ0aWNsZTogZmFsc2UsXG5cdFx0d2l0aEJ1bmRsZTogZmFsc2UsXG5cdFx0d2l0aE1lZGlhOiBmYWxzZSxcblx0XHRjb2xsYXBzZWQ6IGZhbHNlXG5cdH0sXG5cblx0Z2V0dGVyczogW1xuXHRcdFwicGFnZVwiLFxuXHRcdFwicm91dGVOYW1lXCIsXG5cdFx0XCJmcm9tUm91dGVOYW1lXCIsXG5cdFx0XCJhcnRpY2xlXCIsXG5cdFx0XCJidW5kbGVcIixcblx0XHRcIm1lZGlhXCIsXG5cdFx0XCJ3aXRoQXJ0aWNsZVwiLFxuXHRcdFwid2l0aEJ1bmRsZVwiLFxuXHRcdFwid2l0aE1lZGlhXCIsXG5cdFx0XCJjb2xsYXBzZWRcIlxuXHRdLFxuXG5cdC8vIG11dGF0b3JzOiB7XG5cdC8vIFx0cm91dGVOYW1lOiB7XG5cdC8vIFx0XHRzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIG9wdHMsIHNldCkge1xuXHQvLyBcdFx0XHQvLyBTZXQgZnJvbVJvdXRlIHRvIGF2b2lkIGxvc2luZyBjdXJyZW50IFwiY2hhbmdpbmdcIiBzdGF0ZVxuXHQvLyBcdFx0XHR0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbXCJmcm9tUm91dGVOYW1lXCJdID0gdGhpcy5hdHRyaWJ1dGVzW1wiZnJvbVJvdXRlTmFtZVwiXTtcblx0Ly8gXHRcdFx0dGhpcy5jaGFuZ2VkW1wiZnJvbVJvdXRlTmFtZVwiXSA9IHRoaXMuYXR0cmlidXRlc1tcImZyb21Sb3V0ZU5hbWVcIl0gPSB0aGlzLnByZXZpb3VzKFwicm91dGVOYW1lXCIpO1xuXHQvLyBcdFx0XHQvLyBzZXQoXCJmcm9tUm91dGVOYW1lXCIsIHRoaXMucHJldmlvdXMoXCJyb3V0ZU5hbWVcIiksIHtcblx0Ly8gXHRcdFx0Ly8gXHRzaWxlbnQ6IHRydWVcblx0Ly8gXHRcdFx0Ly8gfSk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0fVxuXHQvLyB9LFxuXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoaXMubGlzdGVuVG8odGhpcywge1xuXHRcdC8vIFx0XCJjaGFuZ2U6cm91dGVOYW1lXCI6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIFx0XHR0aGlzLnNldChcImZyb21Sb3V0ZU5hbWVcIiwgdGhpcy5wcmV2aW91cyhcInJvdXRlTmFtZVwiKSk7XG5cdFx0Ly8gXHR9LFxuXHRcdC8vIFx0XCJjaGFuZ2U6YXJ0aWNsZVwiOiBmdW5jdGlvbih2YWwpIHtcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coXCIlczpbY2hhbmdlXSAlb1wiLCB0aGlzLmNpZCwgYXJndW1lbnRzKTtcblx0XHQvLyBcdFx0dGhpcy5zZXQoXCJ3aXRoQXJ0aWNsZVwiLCAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpKTtcblx0XHQvLyBcdH0sXG5cdFx0Ly8gXHRcImNoYW5nZTpidW5kbGVcIjogZnVuY3Rpb24odmFsKSB7XG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKFwiJXM6W2NoYW5nZV0gJW9cIiwgdGhpcy5jaWQsIGFyZ3VtZW50cyk7XG5cdFx0Ly8gXHRcdHRoaXMuc2V0KFwid2l0aEJ1bmRsZVwiLCAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpKTtcblx0XHQvLyBcdH0sXG5cdFx0Ly8gXHRcImNoYW5nZTptZWRpYVwiOiBmdW5jdGlvbih2YWwpIHtcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coXCIlczpbY2hhbmdlXSAlb1wiLCB0aGlzLmNpZCwgYXJndW1lbnRzKTtcblx0XHQvLyBcdFx0dGhpcy5zZXQoXCJ3aXRoTWVkaWFcIiwgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSk7XG5cdFx0Ly8gXHR9LFxuXHRcdC8vIH0pO1xuXG5cdFx0Ly8gdGhpcy5zZXQoe1xuXHRcdC8vIFx0ZnJvbVJvdXRlTmFtZTogXCJcIixcblx0XHQvLyBcdFx0d2l0aEFydGljbGU6IGZhbHNlLFxuXHRcdC8vIFx0XHR3aXRoQnVuZGxlOiBmYWxzZSxcblx0XHQvLyBcdFx0d2l0aE1lZGlhOiBmYWxzZVxuXHRcdC8vIH0pO1xuXHRcdHZhciBvcHRzID0geyBzaWxlbnQ6IGZhbHNlIH07XG5cblx0XHR0aGlzLmxpc3RlblRvKHRoaXMsIFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGF0dHJzKSB7XG5cdFx0XHQvLyB2YXIgb3B0cyA9IHsgc2lsZW50OiBmYWxzZSB9O1xuXHRcdFx0aWYgKHRoaXMuaGFzQ2hhbmdlZChcInJvdXRlTmFtZVwiKSkge1xuXHRcdFx0XHR0aGlzLnNldChcImZyb21Sb3V0ZU5hbWVcIiwgdGhpcy5wcmV2aW91cyhcInJvdXRlTmFtZVwiKSwgb3B0cyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5oYXNDaGFuZ2VkKFwiYXJ0aWNsZVwiKSkge1xuXHRcdFx0XHR0aGlzLnNldChcIndpdGhBcnRpY2xlXCIsIHRoaXMuaGFzKFwiYXJ0aWNsZVwiKSwgb3B0cyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5oYXNDaGFuZ2VkKFwiYnVuZGxlXCIpKSB7XG5cdFx0XHRcdHRoaXMuc2V0KFwid2l0aEJ1bmRsZVwiLCB0aGlzLmhhcyhcImJ1bmRsZVwiKSwgb3B0cyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5oYXNDaGFuZ2VkKFwibWVkaWFcIikpIHtcblx0XHRcdFx0dGhpcy5zZXQoXCJ3aXRoTWVkaWFcIiwgdGhpcy5oYXMoXCJtZWRpYVwiKSwgb3B0cyk7XG5cdFx0XHR9XG5cdFx0XHQvLyB0aGlzLnNldChcInBhZ2VUaXRsZVwiLCB0aGlzLl9nZXREb2N1bWVudFRpdGxlKCksIHsgc2lsZW50OiB0cnVlIH0pO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLCBcImNoYW5nZTpyb3V0ZU5hbWVcIixcblx0XHRcdGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIiVzOltjaGFuZ2U6cm91dGVOYW1lXSAlb1wiLCB0aGlzLmNpZCwgdmFsKTtcblx0XHRcdFx0Ly8gdGhpcy5zZXQoXCJmcm9tUm91dGVOYW1lXCIsIHRoaXMucHJldmlvdXMoXCJyb3V0ZU5hbWVcIikpO1xuXHRcdFx0fSk7XG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLCBcImNoYW5nZTphcnRpY2xlXCIsXG5cdFx0XHRmdW5jdGlvbih2YWwpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCIlczpbY2hhbmdlOmFydGljbGVdICVvXCIsIHRoaXMuY2lkLCB2YWwpO1xuXHRcdFx0XHQvLyB0aGlzLnNldChcIndpdGhBcnRpY2xlXCIsIF8uaXNPYmplY3QodmFsKSk7XG5cdFx0XHR9KTtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMsIFwiY2hhbmdlOmJ1bmRsZVwiLFxuXHRcdFx0ZnVuY3Rpb24odmFsKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6W2NoYW5nZTpidW5kbGVdICVvXCIsIHRoaXMuY2lkLCB2YWwpO1xuXHRcdFx0XHQvLyB0aGlzLnNldChcIndpdGhCdW5kbGVcIiwgXy5pc09iamVjdCh2YWwpKTtcblx0XHRcdH0pO1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcywgXCJjaGFuZ2U6bWVkaWFcIixcblx0XHRcdGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIiVzOltjaGFuZ2U6bWVkaWFdICVvXCIsIHRoaXMuY2lkLCB2YWwpO1xuXHRcdFx0XHQvLyB0aGlzLnNldChcIndpdGhNZWRpYVwiLCBfLmlzT2JqZWN0KHZhbCkpO1xuXHRcdFx0fSk7XG5cdH0sXG5cblx0aGFzQW55UHJldmlvdXM6IGZ1bmN0aW9uKGF0dHIpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2aW91cyhhdHRyKSAhPSBudWxsO1xuXHR9LFxuXG5cdGhhc0FueUNoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcblx0XHRyZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKGF0dHIpICYmICh0aGlzLmhhcyhhdHRyKSAhPSB0aGlzLmhhc0FueVByZXZpb3VzKGF0dHIpKTtcblx0fSxcblxuXHQvLyBfZ2V0RG9jdW1lbnRUaXRsZTogZnVuY3Rpb24oKSB7XG5cdC8vIFx0bGV0IGRvY1RpdGxlID0gW107XG5cdC8vIFx0ZG9jVGl0bGUucHVzaChHbG9iYWxzLkFQUF9OQU1FKTtcblx0Ly8gXHRpZiAodGhpcy5nZXQoXCJidW5kbGVcIikpIHtcblx0Ly8gXHRcdGRvY1RpdGxlLnB1c2goc3RyaXBUYWdzKHRoaXMuZ2V0KFwiYnVuZGxlXCIpLmdldChcIm5hbWVcIikpKTtcblx0Ly8gXHRcdGlmICh0aGlzLm1vZGVsLmdldChcIm1lZGlhXCIpKSB7XG5cdC8vIFx0XHRcdGRvY1RpdGxlLnB1c2goc3RyaXBUYWdzKHRoaXMuZ2V0KFwibWVkaWFcIikuZ2V0KFwibmFtZVwiKSkpO1xuXHQvLyBcdFx0fVxuXHQvLyBcdH0gZWxzZSBpZiAodGhpcy5nZXQoXCJhcnRpY2xlXCIpKSB7XG5cdC8vIFx0XHRkb2NUaXRsZS5wdXNoKHN0cmlwVGFncyh0aGlzLmdldChcImFydGljbGVcIikuZ2V0KFwibmFtZVwiKSkpO1xuXHQvLyBcdH1cblx0Ly8gXHRyZXR1cm4gXy51bmVzY2FwZShkb2NUaXRsZS5qb2luKFwiIC8gXCIpKTtcblx0Ly8gfVxuXG5cdC8vIGNvbnN0cnVjdG9yOiBmdW5jdGlvbigpIHtcblx0Ly8gXHRPYmplY3Qua2V5cyh0aGlzLmRlZmF1bHRzKS5mb3JFYWNoKGZ1bmN0aW9uKGdldHRlck5hbWUpIHtcblx0Ly8gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBnZXR0ZXJOYW1lLCB7XG5cdC8vIFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdC8vIFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdC8vIFx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0KGdldHRlck5hbWUpO1xuXHQvLyBcdFx0XHR9XG5cdC8vIFx0XHR9KTtcblx0Ly8gXHR9KTtcblx0Ly8gXHRCYXNlTW9kZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0Ly8gfVxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvQmFzZUl0ZW1cbiAqIEByZXF1aXJlcyBtb2R1bGU6YmFja2JvbmVcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvQmFzZU1vZGVsfSAqL1xuY29uc3QgQmFzZU1vZGVsID0gcmVxdWlyZShcImFwcC9tb2RlbC9CYXNlTW9kZWxcIik7XG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG4vLyB2YXIgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuLy8gLyoqIEB0eXBlIHttb2R1bGU6YXBwL3V0aWxzL3N0cmluZ3Mvc3RyaXBUYWdzfSAqL1xuLy8gdmFyIHN0cmlwVGFncyA9IHJlcXVpcmUoXCJ1dGlscy9zdHJpbmdzL3N0cmlwVGFnc1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9wYXJzZVN5bUF0dHJzfSAqL1xuLy92YXIgcGFyc2VTeW1BdHRycyA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvcGFyc2VTeW1BdHRyc1wiKTtcblxudmFyIHBhcnNlU3ltQXR0cnMgPSBmdW5jdGlvbihzKSB7XG5cdHJldHVybiBzLnJlcGxhY2UoLyhcXCx8XFw7KS9nLCBmdW5jdGlvbihtKSB7XG5cdFx0cmV0dXJuIChtID09IFwiLFwiKSA/IFwiO1wiIDogXCIsXCI7XG5cdH0pO1xufTtcbnZhciB0b0F0dHJzSGFzaCA9IGZ1bmN0aW9uKG9iaiwgYXR0cikge1xuXHRpZiAoXy5pc1N0cmluZyhhdHRyKSkge1xuXHRcdHZhciBpZHggPSBhdHRyLmluZGV4T2YoXCI6XCIpO1xuXHRcdGlmIChpZHggPiAwKSB7XG5cdFx0XHRvYmpbYXR0ci5zdWJzdHJpbmcoMCwgaWR4KV0gPSBwYXJzZVN5bUF0dHJzKGF0dHIuc3Vic3RyaW5nKGlkeCArIDEpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0b2JqW2F0dHJdID0gYXR0cjsgLy8gdG8gbWF0Y2ggSFRNTDU8PlhIVE1MIHZhbHVlbGVzcyBhdHRyaWJ1dGVzXG5cdFx0fVxuXHR9IC8vIGVsc2UgaWdub3JlIG5vbi1zdHJpbmcgdmFsdWVzXG5cdHJldHVybiBvYmo7XG59O1xuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL0Jhc2VJdGVtfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VNb2RlbC5leHRlbmQoe1xuXG5cdF9kb21QcmVmaXg6IFwiX1wiLFxuXG5cdC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdC8vIGF0dHJzOiBmdW5jdGlvbigpIHsgcmV0dXJuIHt9OyB9LFxuXHRcdGdldCBhdHRycygpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9LFxuXHR9LFxuXG5cdGdldHRlcnM6IFtcImRvbWlkXCJdLFxuXG5cdG11dGF0b3JzOiB7XG5cdFx0ZG9taWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCF0aGlzLmhhc093blByb3BlcnR5KFwiX2RvbUlkXCIpKVxuXHRcdFx0XHR0aGlzLl9kb21JZCA9IHRoaXMuX2RvbVByZWZpeCArIHRoaXMuaWQ7XG5cdFx0XHRyZXR1cm4gdGhpcy5fZG9tSWQ7XG5cdFx0fSxcblx0XHRhdHRyczoge1xuXHRcdFx0c2V0OiBmdW5jdGlvbihrZXksIHZhbHVlLCBvcHRpb25zLCBzZXQpIHtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5yZWR1Y2UodG9BdHRyc0hhc2gsIHt9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIV8uaXNPYmplY3QodmFsdWUpKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIiVzOjphdHRycyB2YWx1ZSBub3QgYW4gb2JqZWN0IG9yIHN0cmluZyBhcnJheVwiLCB0aGlzLmNpZCwgdmFsdWUpO1xuXHRcdFx0XHRcdHZhbHVlID0ge307XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0KGtleSwgdmFsdWUsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdH0sXG5cblx0YXR0cjogZnVuY3Rpb24oYXR0cikge1xuXHRcdHJldHVybiB0aGlzLmF0dHJzKClbYXR0cl07XG5cdH0sXG5cblx0YXR0cnM6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmdldChcImF0dHJzXCIpO1xuXHR9LFxuXG5cdHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXQoXCJkb21pZFwiKTtcblx0fSxcblxuXHRnZXREaXN0YW5jZVRvU2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLmNvbGxlY3Rpb24gJiYgdGhpcy5jb2xsZWN0aW9uLnNlbGVjdGVkSW5kZXggPiAwKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLmluZGV4T2YodGhpcykgLSB0aGlzLmNvbGxlY3Rpb24uc2VsZWN0ZWRJbmRleDtcblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXG5cdGdldEluZGV4OiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5jb2xsZWN0aW9uKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLmluZGV4T2YodGhpcyk7XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fVxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvQmFzZU1vZGVsXG4gKiBAcmVxdWlyZXMgbW9kdWxlOmJhY2tib25lXG4gKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG5jb25zdCBCYWNrYm9uZSA9IHJlcXVpcmUoXCJiYWNrYm9uZVwiKTtcblxudmFyIEJhc2VNb2RlbFByb3RvID0ge1xuXHQvLyBjb25zdHJ1Y3RvcjogZnVuY3Rpb24oKSB7XG5cdC8vIFx0aWYgKHRoaXMucHJvcGVydGllcykge1xuXHQvLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgdGhpcy5wcm9wZXJ0aWVzKTtcblx0Ly8gXHR9XG5cdC8vIFx0QmFja2JvbmUuTW9kZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0Ly8gfVxufTtcblxudmFyIEJhc2VNb2RlbCA9IHtcblx0ZXh0ZW5kOiBmdW5jdGlvbihwcm90bywgb2JqKSB7XG5cdFx0dmFyIGNvbnN0ciwgcHJvcE5hbWU7IC8vLCBwcm9wRGVmO1xuXHRcdGZvciAocHJvcE5hbWUgaW4gcHJvdG8pIHtcblx0XHRcdGlmIChwcm90by5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkgJiYgXy5pc09iamVjdChwcm90b1twcm9wTmFtZV0pKSB7IC8vKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90b1twcm9wTmFtZV0pID09PSBPYmplY3QucHJvdG90eXBlKSkge1xuXHRcdFx0XHRwcm90b1twcm9wTmFtZV0gPSBfLmRlZmF1bHRzKHByb3RvW3Byb3BOYW1lXSwgdGhpcy5wcm90b3R5cGVbcHJvcE5hbWVdKTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJCYXNlTW9kZWw6OmV4dGVuZCAnJXM6JXMnIGlzIE9iamVjdFxcbiVzXCIsIHByb3RvLl9kb21QcmVmaXgsIHByb3BOYW1lLCBKU09OLnN0cmluZ2lmeShwcm90b1twcm9wTmFtZV0pKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBpZiAoXy5pc09iamVjdChwcm90by5wcm9wZXJ0aWVzKSkge1xuXHRcdC8vIFx0aWYgKEFycmF5LmlzQXJyYXkocHJvdG8uZ2V0dGVycykpIHtcblx0XHQvLyBcdFx0cHJvdG8ucHJvcGVydGllcyA9IF8ub21pdChwcm90by5wcm9wZXJ0aWVzLCBwcm90by5nZXR0ZXJzKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9XG5cdFx0Ly8gaWYgKHByb3RvLnByb3BlcnRpZXMgJiYgdGhpcy5wcm90b3R5cGUucHJvcGVydGllcykge1xuXHRcdC8vIFx0Xy5kZWZhdWx0cyhwcm90by5wcm9wZXJ0aWVzLCB0aGlzLnByb3RvdHlwZS5wcm9wZXJ0aWVzKTtcblx0XHQvLyB9XG5cblx0XHRjb25zdHIgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdGlmIChBcnJheS5pc0FycmF5KGNvbnN0ci5wcm90b3R5cGUuZ2V0dGVycykpIHtcblx0XHRcdGNvbnN0ci5wcm90b3R5cGUuZ2V0dGVycy5mb3JFYWNoKGZ1bmN0aW9uKGdldHRlck5hbWUpIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnN0ci5wcm90b3R5cGUsIGdldHRlck5hbWUsIHtcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5nZXQoZ2V0dGVyTmFtZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBpZiAoQXJyYXkuaXNBcnJheShjb25zdHIucHJvdG90eXBlLnByb3BlcnRpZXMpKSB7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gaWYgKF8uaXNPYmplY3QocHJvdG8ucHJvcGVydGllcykpIHtcblx0XHQvLyBcdGZvciAocHJvcE5hbWUgaW4gcHJvdG8ucHJvcGVydGllcykge1xuXHRcdC8vIFx0XHRpZiAocHJvdG8ucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcblx0XHQvLyBcdFx0XHRwcm9wRGVmID0gcHJvdG8ucHJvcGVydGllc1twcm9wTmFtZV07XG5cdFx0Ly8gXHRcdFx0aWYgKF8uaXNGdW5jdGlvbihwcm9wRGVmKSkge1xuXHRcdC8vIFx0XHRcdFx0cHJvdG8ucHJvcGVydGllc1twcm9wTmFtZV0gPSB7XG5cdFx0Ly8gXHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsIGdldDogcHJvcERlZlxuXHRcdC8vIFx0XHRcdFx0fTtcblx0XHQvLyBcdFx0XHR9IGVsc2UgaWYgKF8uaXNPYmplY3QocHJvcERlZikpe1xuXHRcdC8vIFx0XHRcdFx0cHJvcERlZi5lbnVtZXJhYmxlID0gdHJ1ZTtcblx0XHQvLyBcdFx0XHR9IGVsc2Uge1xuXHRcdC8vIFx0XHRcdFx0ZGVsZXRlIHByb3RvLnByb3BlcnRpZXNbcHJvcE5hbWVdO1xuXHRcdC8vIFx0XHRcdH1cblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0fVxuXHRcdC8vIFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvdG8sIHByb3RvLnByb3BlcnRpZXMpO1xuXHRcdC8vIFx0ZGVsZXRlIHByb3RvLnByb3BlcnRpZXM7XG5cdFx0Ly8gfVxuXHRcdHJldHVybiBjb25zdHI7XG5cdH1cbn07XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9CYXNlTW9kZWx9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kLmNhbGwoQmFja2JvbmUuTW9kZWwsIEJhc2VNb2RlbFByb3RvLCBCYXNlTW9kZWwpO1xuLy8gbW9kdWxlLmV4cG9ydHMgPSBNb2RlbC5leHRlbmQoQmFzZU1vZGVsUHJvdG8sIEJhc2VNb2RlbCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvU2VsZWN0YWJsZUNvbGxlY3Rpb25cbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTpiYWNrYm9uZX0gKi9cbmNvbnN0IEJhY2tib25lID0gcmVxdWlyZShcImJhY2tib25lXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvU2VsZWN0YWJsZUNvbGxlY3Rpb259XG4gKi9cbnZhciBTZWxlY3RhYmxlQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0XHRvcHRpb25zID0gXy5kZWZhdWx0cyh7fSwgb3B0aW9ucywge1xuXHRcdFx0aW5pdGlhbFNlbGVjdGlvbjogXCJub25lXCIsXG5cdFx0XHRzaWxlbnRJbml0aWFsOiB0cnVlXG5cdFx0fSk7XG5cdFx0dGhpcy5pbml0aWFsU2VsZWN0aW9uID0gb3B0aW9ucy5pbml0aWFsU2VsZWN0aW9uO1xuXHRcdHRoaXMuaW5pdGlhbE9wdGlvbnMgPSB7XG5cdFx0XHRzaWxlbnQ6IG9wdGlvbnMuc2lsZW50SW5pdGlhbFxuXHRcdH07XG5cdH0sXG5cblx0cmVzZXQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuXHRcdHRoaXMuZGVzZWxlY3QodGhpcy5pbml0aWFsT3B0aW9ucyk7XG5cdFx0QmFja2JvbmUuQ29sbGVjdGlvbi5wcm90b3R5cGUucmVzZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRpZiAodGhpcy5pbml0aWFsU2VsZWN0aW9uID09PSBcImZpcnN0XCIgJiYgdGhpcy5sZW5ndGgpIHtcblx0XHRcdHRoaXMuc2VsZWN0KHRoaXMuYXQoMCksIHRoaXMuaW5pdGlhbE9wdGlvbnMpO1xuXHRcdH1cblx0fSxcblxuXHRzZWxlY3Q6IGZ1bmN0aW9uKG5ld01vZGVsLCBvcHRpb25zKSB7XG5cdFx0aWYgKG5ld01vZGVsID09PSB2b2lkIDApIHtcblx0XHRcdG5ld01vZGVsID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWQgPT09IG5ld01vZGVsKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHZhciB0cmlnZ2VyRXZlbnRzID0gIShvcHRpb25zICYmIG9wdGlvbnMuc2lsZW50KTtcblx0XHR2YXIgb2xkTW9kZWwgPSB0aGlzLnNlbGVjdGVkO1xuXG5cdFx0dGhpcy5sYXN0U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkO1xuXHRcdHRoaXMubGFzdFNlbGVjdGVkSW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG5cdFx0dGhpcy5zZWxlY3RlZCA9IG5ld01vZGVsO1xuXHRcdHRoaXMuc2VsZWN0ZWRJbmRleCA9IHRoaXMuaW5kZXhPZihuZXdNb2RlbCk7XG5cblx0XHRpZiAob2xkTW9kZWwpIHtcblx0XHRcdGlmIChfLmlzRnVuY3Rpb24ob2xkTW9kZWwuZGVzZWxlY3QpKSB7XG5cdFx0XHRcdG9sZE1vZGVsLmRlc2VsZWN0KG9wdGlvbnMpO1xuXHRcdFx0fSBlbHNlIGlmICh0cmlnZ2VyRXZlbnRzKSB7XG5cdFx0XHRcdG9sZE1vZGVsLnNlbGVjdGVkID0gdm9pZCAwO1xuXHRcdFx0XHRvbGRNb2RlbC50cmlnZ2VyKFwiZGVzZWxlY3RlZFwiLCBuZXdNb2RlbCwgb2xkTW9kZWwpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRyaWdnZXJFdmVudHMpIHRoaXMudHJpZ2dlcihcImRlc2VsZWN0Om9uZVwiLCBvbGRNb2RlbCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0cmlnZ2VyRXZlbnRzKSB0aGlzLnRyaWdnZXIoXCJkZXNlbGVjdDpub25lXCIsIG51bGwpO1xuXHRcdH1cblxuXHRcdGlmIChuZXdNb2RlbCkge1xuXHRcdFx0aWYgKF8uaXNGdW5jdGlvbihuZXdNb2RlbC5zZWxlY3QpKSB7XG5cdFx0XHRcdG5ld01vZGVsLnNlbGVjdChvcHRpb25zKTtcblx0XHRcdH0gZWxzZSBpZiAodHJpZ2dlckV2ZW50cykge1xuXHRcdFx0XHRuZXdNb2RlbC5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdG5ld01vZGVsLnRyaWdnZXIoXCJzZWxlY3RlZFwiLCBuZXdNb2RlbCwgb2xkTW9kZWwpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRyaWdnZXJFdmVudHMpIHRoaXMudHJpZ2dlcihcInNlbGVjdDpvbmVcIiwgbmV3TW9kZWwpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodHJpZ2dlckV2ZW50cykgdGhpcy50cmlnZ2VyKFwic2VsZWN0Om5vbmVcIiwgbnVsbCk7XG5cdFx0fVxuXHR9LFxuXG5cdGRlc2VsZWN0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dGhpcy5zZWxlY3QobnVsbCwgb3B0aW9ucyk7XG5cdH0sXG5cblx0c2VsZWN0QXQ6IGZ1bmN0aW9uKGluZGV4LCBvcHRpb25zKSB7XG5cdFx0aWYgKDAgPiBpbmRleCB8fCBpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuXHRcdFx0bmV3IFJhbmdlRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgYm91bmRzXCIpO1xuXHRcdH1cblx0XHR0aGlzLnNlbGVjdCh0aGlzLmF0KGluZGV4KSwgb3B0aW9ucyk7XG5cdH0sXG5cblx0ZGlzdGFuY2U6IGZ1bmN0aW9uKGEsIGIpIHtcblx0XHR2YXIgYUlkeCwgYklkeDtcblxuXHRcdGlmICghYSkgcmV0dXJuIE5hTjtcblx0XHRhSWR4ID0gdGhpcy5pbmRleE9mKGEpO1xuXHRcdGlmIChhSWR4ID09IC0xKSByZXR1cm4gTmFOO1xuXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuXHRcdFx0YklkeCA9IHRoaXMuc2VsZWN0ZWRJbmRleDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFiKSByZXR1cm4gTmFOO1xuXHRcdFx0YklkeCA9IHRoaXMuaW5kZXhPZihiKTtcblx0XHRcdGlmIChiSWR4ID09IC0xKSByZXR1cm4gTmFOO1xuXHRcdH1cblx0XHRyZXR1cm4gTWF0aC5hYnMoYklkeCAtIGFJZHgpO1xuXHR9LFxuXG5cdC8qIFRPRE86IE1PVkUgSU5UTyBNSVhJTiAqL1xuXG5cdC8qKiBAcmV0dXJuIGJvb2xlYW5cdC8qL1xuXHRoYXNGb2xsb3dpbmc6IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0bW9kZWwgfHwgKG1vZGVsID0gdGhpcy5zZWxlY3RlZCk7XG5cdFx0cmV0dXJuIHRoaXMuaW5kZXhPZihtb2RlbCkgPCAodGhpcy5sZW5ndGggLSAxKTtcblx0fSxcblxuXHQvKiogQHJldHVybiBuZXh0IG1vZGVsXHQqL1xuXHRmb2xsb3dpbmc6IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0bW9kZWwgfHwgKG1vZGVsID0gdGhpcy5zZWxlY3RlZCk7XG5cdFx0cmV0dXJuIHRoaXMuaGFzRm9sbG93aW5nKG1vZGVsKSA/IHRoaXMuYXQodGhpcy5pbmRleE9mKG1vZGVsKSArIDEpIDogbnVsbDtcblx0fSxcblxuXHQvKiogQHJldHVybiBuZXh0IG1vZGVsIG9yIHRoZSBiZWdpbm5pbmcgaWYgYXQgdGhlIGVuZCAqL1xuXHRmb2xsb3dpbmdPckZpcnN0OiBmdW5jdGlvbihtb2RlbCkge1xuXHRcdG1vZGVsIHx8IChtb2RlbCA9IHRoaXMuc2VsZWN0ZWQpO1xuXHRcdHJldHVybiB0aGlzLmF0KCh0aGlzLmluZGV4T2YobW9kZWwpICsgMSkgJSB0aGlzLmxlbmd0aCk7XG5cdH0sXG5cblx0LyoqIEByZXR1cm4gYm9vbGVhblx0LyovXG5cdGhhc1ByZWNlZGluZzogZnVuY3Rpb24obW9kZWwpIHtcblx0XHRtb2RlbCB8fCAobW9kZWwgPSB0aGlzLnNlbGVjdGVkKTtcblx0XHRyZXR1cm4gdGhpcy5pbmRleE9mKG1vZGVsKSA+IDA7XG5cdH0sXG5cblx0LyoqIEByZXR1cm4gdGhlIHByZXZpb3VzIG1vZGVsICovXG5cdHByZWNlZGluZzogZnVuY3Rpb24obW9kZWwpIHtcblx0XHRtb2RlbCB8fCAobW9kZWwgPSB0aGlzLnNlbGVjdGVkKTtcblx0XHRyZXR1cm4gdGhpcy5oYXNQcmVjZWRpbmcobW9kZWwpID8gdGhpcy5hdCh0aGlzLmluZGV4T2YobW9kZWwpIC0gMSkgOiBudWxsO1xuXHR9LFxuXG5cdC8qKiBAcmV0dXJuIHRoZSBwcmV2aW91cyBtb2RlbCBvciB0aGUgZW5kIGlmIGF0IHRoZSBiZWdpbm5pbmcgKi9cblx0cHJlY2VkaW5nT3JMYXN0OiBmdW5jdGlvbihtb2RlbCkge1xuXHRcdG1vZGVsIHx8IChtb2RlbCA9IHRoaXMuc2VsZWN0ZWQpO1xuXHRcdHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihtb2RlbCkgLSAxO1xuXHRcdHJldHVybiB0aGlzLmF0KGluZGV4ID4gLTEgPyBpbmRleCA6IHRoaXMubGVuZ3RoIC0gMSk7XG5cdH0sXG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbGVjdGFibGVDb2xsZWN0aW9uO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL21vZGVsL2NvbGxlY3Rpb24vQXJ0aWNsZUNvbGxlY3Rpb25cbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvU2VsZWN0YWJsZUNvbGxlY3Rpb259ICovXG5jb25zdCBTZWxlY3RhYmxlQ29sbGVjdGlvbiA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvU2VsZWN0YWJsZUNvbGxlY3Rpb25cIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL0FydGljbGVJdGVtfSAqL1xuY29uc3QgQXJ0aWNsZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL2l0ZW0vQXJ0aWNsZUl0ZW1cIik7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL0FydGljbGVDb2xsZWN0aW9ufVxuICovXG52YXIgQXJ0aWNsZUNvbGxlY3Rpb24gPSBTZWxlY3RhYmxlQ29sbGVjdGlvbi5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7QmFja2JvbmUuTW9kZWx9ICovXG5cdG1vZGVsOiBBcnRpY2xlSXRlbVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQXJ0aWNsZUNvbGxlY3Rpb24oKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb25cbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvU2VsZWN0YWJsZUNvbGxlY3Rpb259ICovXG5jb25zdCBTZWxlY3RhYmxlQ29sbGVjdGlvbiA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvU2VsZWN0YWJsZUNvbGxlY3Rpb25cIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL0J1bmRsZUl0ZW19ICovXG5jb25zdCBCdW5kbGVJdGVtID0gcmVxdWlyZShcImFwcC9tb2RlbC9pdGVtL0J1bmRsZUl0ZW1cIik7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb259XG4gKi9cbnZhciBCdW5kbGVDb2xsZWN0aW9uID0gU2VsZWN0YWJsZUNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge0JhY2tib25lLk1vZGVsfSAqL1xuXHRtb2RlbDogQnVuZGxlSXRlbSxcblxuXHQvKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuXHRjb21wYXJhdG9yOiBmdW5jdGlvbihvYSwgb2IpIHtcblx0XHR2YXIgYSA9IG9hLmdldChcImNvbXBsZXRlZFwiKTtcblx0XHR2YXIgYiA9IG9iLmdldChcImNvbXBsZXRlZFwiKTtcblx0XHRpZiAoYSA+IGIpIHtcblx0XHRcdHJldHVybiAtMTtcblx0XHR9IGVsc2UgaWYgKGEgPCBiKSB7XG5cdFx0XHRyZXR1cm4gMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKiBAdHlwZSB7U3RyaW5nfSAqL1xuXHR1cmw6IFwiL2pzb24vYnVuZGxlcy9cIixcblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IEJ1bmRsZUNvbGxlY3Rpb24oKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC9tb2RlbC9jb2xsZWN0aW9uL0tleXdvcmRDb2xsZWN0aW9uXG4gKiBAcmVxdWlyZXMgbW9kdWxlOmJhY2tib25lXG4gKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL1NlbGVjdGFibGVDb2xsZWN0aW9ufSAqL1xuY29uc3QgU2VsZWN0YWJsZUNvbGxlY3Rpb24gPSByZXF1aXJlKFwiYXBwL21vZGVsL1NlbGVjdGFibGVDb2xsZWN0aW9uXCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9LZXl3b3JkSXRlbX0gKi9cbmNvbnN0IEtleXdvcmRJdGVtID0gcmVxdWlyZShcImFwcC9tb2RlbC9pdGVtL0tleXdvcmRJdGVtXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvbn1cbiAqL1xudmFyIEtleXdvcmRDb2xsZWN0aW9uID0gU2VsZWN0YWJsZUNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge0JhY2tib25lLk1vZGVsfSAqL1xuXHRtb2RlbDogS2V5d29yZEl0ZW1cblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IEtleXdvcmRDb2xsZWN0aW9uKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvY29sbGVjdGlvbi9UeXBlQ29sbGVjdGlvblxuICogQHJlcXVpcmVzIG1vZHVsZTpiYWNrYm9uZVxuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmJhY2tib25lfSAqL1xuY29uc3QgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL1R5cGVJdGVtfSAqL1xuY29uc3QgVHlwZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL2l0ZW0vVHlwZUl0ZW1cIik7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL1R5cGVDb2xsZWN0aW9ufVxuICovXG52YXIgVHlwZUNvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtCYWNrYm9uZS5Nb2RlbH0gKi9cblx0bW9kZWw6IFR5cGVJdGVtXG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBUeXBlQ29sbGVjdGlvbigpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJvb3RzdHJhcCkge1xuXG5cdC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG5cdHZhciBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG5cblx0Ly8gR2xvYmFscy5HQV9UQUdTID0gYm9vdHN0cmFwW1wiZ2EtdGFnc1wiXTtcblx0Ly8gR2xvYmFscy5QQVJBTVMgPSBib290c3RyYXBbXCJwYXJhbXNcIl07XG5cdC8vIEdsb2JhbHMuQVBQX1JPT1QgPSBib290c3RyYXBbXCJwYXJhbXNcIl1bXCJyb290XCJdO1xuXHQvLyBHbG9iYWxzLk1FRElBX0RJUiA9IGJvb3RzdHJhcFtcInBhcmFtc1wiXVtcInVwbG9hZHNcIl07XG5cdEdsb2JhbHMuQVBQX05BTUUgPSBib290c3RyYXBbXCJwYXJhbXNcIl1bXCJ3ZWJzaXRlLW5hbWVcIl07XG5cblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vVHlwZUNvbGxlY3Rpb259ICovXG5cdHZhciB0eXBlTGlzdCA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9UeXBlQ29sbGVjdGlvblwiKTtcblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vS2V5d29yZENvbGxlY3Rpb259ICovXG5cdHZhciBrZXl3b3JkTGlzdCA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvblwiKTtcblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vQnVuZGxlQ29sbGVjdGlvbn0gKi9cblx0dmFyIGJ1bmRsZUxpc3QgPSByZXF1aXJlKFwiYXBwL21vZGVsL2NvbGxlY3Rpb24vQnVuZGxlQ29sbGVjdGlvblwiKTtcblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vQXJ0aWNsZUNvbGxlY3Rpb259ICovXG5cdHZhciBhcnRpY2xlTGlzdCA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9BcnRpY2xlQ29sbGVjdGlvblwiKTtcblxuXHQvLyBGaXgtdXBzIHRvIGJvb3RzdHJhcCBkYXRhLlxuXHR2YXIgYXJ0aWNsZXMgPSBib290c3RyYXBbXCJhcnRpY2xlcy1hbGxcIl07XG5cdHZhciB0eXBlcyA9IGJvb3RzdHJhcFtcInR5cGVzLWFsbFwiXTtcblx0dmFyIGtleXdvcmRzID0gYm9vdHN0cmFwW1wia2V5d29yZHMtYWxsXCJdO1xuXHR2YXIgYnVuZGxlcyA9IGJvb3RzdHJhcFtcImJ1bmRsZXMtYWxsXCJdO1xuXHR2YXIgbWVkaWEgPSBib290c3RyYXBbXCJtZWRpYS1hbGxcIl07XG5cblx0Ly8gQXR0YWNoIG1lZGlhIHRvIHRoZWlyIGJ1bmRsZXNcblx0dmFyIG1lZGlhQnlCdW5kbGUgPSBfLmdyb3VwQnkobWVkaWEsIFwiYklkXCIpO1xuXG5cdC8vIEZpbGwtaW4gYmFjay1yZWZlcmVuY2VzOlxuXHQvLyBDcmVhdGUgS2V5d29yZC5idW5kbGVJZHMgZnJvbSBleGlzdGluZyBCdW5kbGUua2V5d29yZElkcyxcblx0Ly8gdGhlbiBCdW5kbGUudHlwZUlkcyBmcm9tIHVuaXF1ZSBLZXl3b3JkLnR5cGVJZFxuXG5cdC8vIF8uZWFjaChidW5kbGVzLCBmdW5jdGlvbiAoYm8sIGJpLCBiYSkge1xuXHRidW5kbGVzLmZvckVhY2goZnVuY3Rpb24oYm8sIGJpLCBiYSkge1xuXHRcdGJvLnRJZHMgPSBbXTtcblx0XHRiby5tZWRpYSA9IG1lZGlhQnlCdW5kbGVbYm8uaWRdO1xuXHRcdC8vIF8uZWFjaChrZXl3b3JkcywgZnVuY3Rpb24gKGtvLCBraSwga2EpIHtcblx0XHRrZXl3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGtvLCBraSwga2EpIHtcblx0XHRcdGlmIChiaSA9PT0gMCkge1xuXHRcdFx0XHRrby5iSWRzID0gW107XG5cdFx0XHR9XG5cdFx0XHQvLyBpZiAoXy5jb250YWlucyhiby5rSWRzLCBrby5pZCkpIHtcblx0XHRcdGlmIChiby5rSWRzLmluZGV4T2Yoa28uaWQpICE9IC0xKSB7XG5cdFx0XHRcdGtvLmJJZHMucHVzaChiby5pZCk7XG5cdFx0XHRcdC8vIGlmICghXy5jb250YWlucyhiby50SWRzLCBrby50SWQpKSB7XG5cdFx0XHRcdGlmIChiby50SWRzLmluZGV4T2Yoa28udElkKSA9PSAtMSkge1xuXHRcdFx0XHRcdGJvLnRJZHMucHVzaChrby50SWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xuXG5cdC8vIEZpbGwgY29sbGVjdGlvbiBzaW5nbGV0b25zXG5cdGFydGljbGVMaXN0LnJlc2V0KGFydGljbGVzKTtcblx0dHlwZUxpc3QucmVzZXQodHlwZXMpO1xuXHRrZXl3b3JkTGlzdC5yZXNldChrZXl3b3Jkcyk7XG5cdGJ1bmRsZUxpc3QucmVzZXQoYnVuZGxlcyk7XG5cblx0Ly8gYm9vdHN0cmFwW1wicGFyYW1zXCJdID0gYm9vdHN0cmFwW1wiYXJ0aWNsZXMtYWxsXCJdID0gYm9vdHN0cmFwW1widHlwZXMtYWxsXCJdID0gYm9vdHN0cmFwW1wia2V5d29yZHMtYWxsXCJdID0gYm9vdHN0cmFwW1wiYnVuZGxlcy1hbGxcIl0gPSBib290c3RyYXBbXCJtZWRpYS1hbGxcIl0gPSBudWxsO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC9tb2RlbC9pdGVtL0FydGljbGVJdGVtXG4gKi9cblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG4vLyB2YXIgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9Tb3VyY2VJdGVtfSAqL1xuY29uc3QgQmFzZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL0Jhc2VJdGVtXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9BcnRpY2xlSXRlbX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBCYXNlSXRlbS5leHRlbmQoe1xuXG5cdF9kb21QcmVmaXg6IFwiYVwiLFxuXG5cdC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdG5hbWU6IFwiXCIsXG5cdFx0aGFuZGxlOiBcIlwiLFxuXHRcdHRleHQ6IFwiXCJcblx0fSxcblxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvaXRlbS9CdW5kbGVJdGVtXG4gKiBAcmVxdWlyZXMgbW9kdWxlOmJhY2tib25lXG4gKi9cblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG4vLyB2YXIgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7LyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbmNvbnN0IENvbG9yID0gcmVxdWlyZShcImNvbG9yXCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9Tb3VyY2VJdGVtfSAqL1xuY29uc3QgQmFzZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL0Jhc2VJdGVtXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2l0ZW0vTWVkaWFJdGVtfSAqL1xuY29uc3QgTWVkaWFJdGVtID0gcmVxdWlyZShcImFwcC9tb2RlbC9pdGVtL01lZGlhSXRlbVwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9TZWxlY3RhYmxlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IFNlbGVjdGFibGVDb2xsZWN0aW9uID0gcmVxdWlyZShcImFwcC9tb2RlbC9TZWxlY3RhYmxlQ29sbGVjdGlvblwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL2NvbnRyb2wvR2xvYmFsc30gKi9cbmNvbnN0IEdsb2JhbHMgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC91dGlscy9zdHJpbmdzL3N0cmlwVGFnc30gKi9cbmNvbnN0IHN0cmlwVGFncyA9IHJlcXVpcmUoXCJ1dGlscy9zdHJpbmdzL3N0cmlwVGFnc1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC91dGlscy9zdHJpbmdzL3BhcnNlVGFnbGlzdH0gKi9cbi8vIHZhciBwYXJzZVN5bUF0dHJzID0gcmVxdWlyZShcImFwcC9tb2RlbC9wYXJzZVN5bUF0dHJzXCIpO1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvbn0gKi9cbi8vIHZhciBrZXl3b3JkcyA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvblwiKTtcblxuLy8gR2xvYmFscy5ERUZBVUxUX0NPTE9SU1tcImNvbG9yXCJdO1xuLy8gR2xvYmFscy5ERUZBVUxUX0NPTE9SU1tcImJhY2tncm91bmQtY29sb3JcIl07XG52YXIgYXR0cnNEZWZhdWx0ID0gXy5kZWZhdWx0cyh7XG5cdFwiaGFzLWNvbG9yc1wiOiBcImRlZmF1bHRzXCJcbn0sIEdsb2JhbHMuREVGQVVMVF9DT0xPUlMpO1xuXG4vKiogQHByaXZhdGUgKi9cbnZhciBNZWRpYUNvbGxlY3Rpb24gPSBTZWxlY3RhYmxlQ29sbGVjdGlvbi5leHRlbmQoe1xuXHRtb2RlbDogTWVkaWFJdGVtLFxuXHRjb21wYXJhdG9yOiBcIm9cIlxufSk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL0J1bmRsZUl0ZW19XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gQmFzZUl0ZW0uZXh0ZW5kKHtcblxuXHRfZG9tUHJlZml4OiBcImJcIixcblxuXHQvKiogQHR5cGUge09iamVjdHxGdW5jdGlvbn0gKi9cblx0Ly8gZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuXHQvLyBcdHJldHVybiB7XG5cdC8vIFx0XHRuYW1lOiBcIlwiLFxuXHQvLyBcdFx0aGFuZGxlOiBcIlwiLFxuXHQvLyBcdFx0ZGVzYzogXCJcIixcblx0Ly8gXHRcdGNvbXBsZXRlZDogMCxcblx0Ly8gXHRcdGtJZHM6IFtdLFxuXHQvLyBcdH07XG5cdC8vIH0sXG5cdGRlZmF1bHRzOiB7XG5cdFx0bmFtZTogXCJcIixcblx0XHRoYW5kbGU6IFwiXCIsXG5cdFx0ZGVzYzogXCJcIixcblx0XHRjb21wbGV0ZWQ6IDAsXG5cdFx0Z2V0IGtJZHMoKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fSxcblx0XHQvLyBnZXQga2V5d29yZHMoKSB7IHJldHVybiBbXTsgfSxcblx0fSxcblxuXHRnZXR0ZXJzOiBbXCJuYW1lXCIsIFwibWVkaWFcIl0sXG5cblx0bXV0YXRvcnM6IHtcblx0XHR0ZXh0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBzdHJpcFRhZ3ModGhpcy5nZXQoXCJkZXNjXCIpKTtcblx0XHR9LFxuXHRcdC8vIGtJZHM6IHtcblx0XHQvLyBcdHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMsIHNldCkge1xuXHRcdC8vIFx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHQvLyBcdFx0XHRzZXQoXCJrZXl3b3Jkc1wiLCB2YWx1ZS5tYXAoZnVuY3Rpb24oaWQpIHtcblx0XHQvLyBcdFx0XHRcdHZhciBvYmogPSBrZXl3b3Jkcy5nZXQoaWQpO1xuXHRcdC8vIFx0XHRcdFx0cmV0dXJuIG9iajtcblx0XHQvLyBcdFx0XHR9LCB0aGlzKSwgb3B0aW9ucztcblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0XHRzZXQoa2V5LCB2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0Ly8gXHR9LFxuXHRcdC8vIH0sXG5cdFx0bWVkaWE6IHtcblx0XHRcdHRyYW5zaWVudDogdHJ1ZSxcblx0XHRcdHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb3B0aW9ucywgc2V0KSB7XG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRcdHZhbHVlLmZvckVhY2goZnVuY3Rpb24obykge1xuXHRcdFx0XHRcdFx0by5idW5kbGUgPSB0aGlzO1xuXHRcdFx0XHRcdH0sIHRoaXMpO1xuXHRcdFx0XHRcdHZhbHVlID0gbmV3IE1lZGlhQ29sbGVjdGlvbih2YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0KGtleSwgdmFsdWUsIG9wdGlvbnMpO1xuXHRcdFx0fSxcblx0XHR9LFxuXHR9LFxuXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG5cdFx0dGhpcy5jb2xvcnMgPSB7XG5cdFx0XHRmZ0NvbG9yOiBuZXcgQ29sb3IodGhpcy5hdHRyKFwiY29sb3JcIikpLFxuXHRcdFx0YmdDb2xvcjogbmV3IENvbG9yKHRoaXMuYXR0cihcImJhY2tncm91bmQtY29sb3JcIikpLFxuXHRcdFx0bG5Db2xvcjogbmV3IENvbG9yKHRoaXMuYXR0cihcImxpbmstY29sb3JcIikpLFxuXHRcdH07XG5cdFx0dGhpcy5jb2xvcnMuaGFzRGFya0JnID0gdGhpcy5jb2xvcnMuZmdDb2xvci5sdW1pbm9zaXR5KCkgPiB0aGlzLmNvbG9ycy5iZ0NvbG9yLmx1bWlub3NpdHkoKTtcblx0fSxcblxuXHRhdHRyczogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2F0dHJzIHx8ICh0aGlzLl9hdHRycyA9IF8uZGVmYXVsdHMoe30sIHRoaXMuZ2V0KFwiYXR0cnNcIiksIGF0dHJzRGVmYXVsdCkpO1xuXHR9LFxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvaXRlbS9LZXl3b3JkSXRlbVxuICogQHJlcXVpcmVzIG1vZHVsZTphcHAvbW9kZWwvQmFzZUl0ZW1cbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvQmFzZUl0ZW19ICovXG5jb25zdCBCYXNlSXRlbSA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvQmFzZUl0ZW1cIik7XG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL1R5cGVDb2xsZWN0aW9ufSAqL1xuLy8gdmFyIHR5cGVzID0gcmVxdWlyZShcImFwcC9tb2RlbC9jb2xsZWN0aW9uL1R5cGVDb2xsZWN0aW9uXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9LZXl3b3JkSXRlbX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBCYXNlSXRlbS5leHRlbmQoe1xuXG5cdF9kb21QcmVmaXg6IFwia1wiLFxuXG5cdC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdG5hbWU6IFwiXCIsXG5cdFx0aGFuZGxlOiBcIlwiLFxuXHRcdHRJZDogLTEsXG5cdH0sXG5cblx0Ly8gbXV0YXRvcnM6IHtcblx0Ly8gXHR0SWQ6IHtcblx0Ly8gXHRcdHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMsIHNldCkge1xuXHQvLyBcdFx0XHR2YXIgdHlwZSA9IHR5cGVzLmdldCh2YWx1ZSk7XG5cdC8vIFx0XHRcdGlmICh0eXBlKSB7XG5cdC8vIFx0XHRcdFx0dHlwZS5nZXQoXCJrZXl3b3Jkc1wiKS5wdXNoKHRoaXMpO1xuXHQvLyBcdFx0XHRcdHNldChcInR5cGVcIiwgdHlwZSwgb3B0aW9ucyk7XG5cdC8vIFx0XHRcdH1cblx0Ly8gXHRcdFx0c2V0KGtleSwgdmFsdWUsIG9wdGlvbnMpO1xuXHQvLyBcdFx0fVxuXHQvLyBcdH0sXG5cdC8vIH1cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL21vZGVsL2l0ZW0vTWVkaWFJdGVtXG4gKiBAcmVxdWlyZXMgbW9kdWxlOmJhY2tib25lXG4gKi9cblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG4vLyB2YXIgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7LyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbmNvbnN0IENvbG9yID0gcmVxdWlyZShcImNvbG9yXCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9Tb3VyY2VJdGVtfSAqL1xuY29uc3QgQmFzZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL0Jhc2VJdGVtXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2l0ZW0vU291cmNlSXRlbX0gKi9cbmNvbnN0IFNvdXJjZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL2l0ZW0vU291cmNlSXRlbVwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9TZWxlY3RhYmxlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IFNlbGVjdGFibGVDb2xsZWN0aW9uID0gcmVxdWlyZShcImFwcC9tb2RlbC9TZWxlY3RhYmxlQ29sbGVjdGlvblwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL2NvbnRyb2wvR2xvYmFsc30gKi9cbmNvbnN0IEdsb2JhbHMgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC91dGlscy9zdHJpbmdzL3N0cmlwVGFnc30gKi9cbmNvbnN0IHN0cmlwVGFncyA9IHJlcXVpcmUoXCJ1dGlscy9zdHJpbmdzL3N0cmlwVGFnc1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9wYXJzZVN5bUF0dHJzfSAqL1xuLy8gdmFyIHBhcnNlU3ltQXR0cnMgPSByZXF1aXJlKFwiYXBwL21vZGVsL3BhcnNlU3ltQXR0cnNcIik7XG5cbi8vIGNvbnNvbGUubG9nKEdsb2JhbHMuUEFSQU1TKTtcblxudmFyIHVybFRlbXBsYXRlcyA9IHtcblx0XCJvcmlnaW5hbFwiOiBfLnRlbXBsYXRlKEdsb2JhbHMuTUVESUFfRElSICsgXCIvPCU9IHNyYyAlPlwiKSxcblx0XCJjb25zdHJhaW4td2lkdGhcIjogXy50ZW1wbGF0ZShHbG9iYWxzLkFQUF9ST09UICsgXCJpbWFnZS8xLzwlPSB3aWR0aCAlPi8wL3VwbG9hZHMvPCU9IHNyYyAlPlwiKSxcblx0XCJjb25zdHJhaW4taGVpZ2h0XCI6IF8udGVtcGxhdGUoR2xvYmFscy5BUFBfUk9PVCArIFwiaW1hZ2UvMS8wLzwlPSBoZWlnaHQgJT4vdXBsb2Fkcy88JT0gc3JjICU+XCIpLFxuXHRcImRlYnVnLWJhbmR3aWR0aFwiOiBfLnRlbXBsYXRlKEdsb2JhbHMuTUVESUFfRElSLnJlcGxhY2UoLyhodHRwcz9cXDpcXC9cXC9bXlxcL10rKS8sIFwiJDEvc2xvdy88JT0ga2JwcyAlPlwiKSArIFwiLzwlPSBzcmMgJT5cIiksXG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9NZWRpYUl0ZW0uU291cmNlQ29sbGVjdGlvbn1cbiAqL1xudmFyIFNvdXJjZUNvbGxlY3Rpb24gPSBTZWxlY3RhYmxlQ29sbGVjdGlvbi5leHRlbmQoe1xuXHRtb2RlbDogU291cmNlSXRlbVxufSk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL01lZGlhSXRlbX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBCYXNlSXRlbS5leHRlbmQoe1xuXG5cdF9kb21QcmVmaXg6IFwibVwiLFxuXG5cdC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdG5hbWU6IFwiPHA+PGVtPlVudGl0bGVkPC9lbT48L3A+XCIsXG5cdFx0c3ViOiBcIlwiLFxuXHRcdG86IDAsXG5cdFx0YklkOiAtMSxcblx0XHRzcmNJZHg6IDAsXG5cdFx0Z2V0IHNyY3NldCgpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9LFxuXHRcdGdldCBzb3VyY2VzKCkge1xuXHRcdFx0cmV0dXJuIG5ldyBTb3VyY2VDb2xsZWN0aW9uKCk7XG5cdFx0fSxcblx0fSxcblxuXHRnZXR0ZXJzOiBbXCJuYW1lXCIsIFwiYnVuZGxlXCIsIFwic291cmNlXCIsIFwic291cmNlc1wiXSxcblxuXHRtdXRhdG9yczoge1xuXHRcdC8vIGRlc2M6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIFx0cmV0dXJuIHRoaXMuZ2V0KFwibmFtZVwiKTtcblx0XHQvLyB9LFxuXHRcdGhhbmRsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5nZXQoXCJzcmNcIik7XG5cdFx0fSxcblx0XHR0ZXh0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcIl90ZXh0XCIpKVxuXHRcdFx0XHR0aGlzLl90ZXh0ID0gXy51bmVzY2FwZShzdHJpcFRhZ3ModGhpcy5nZXQoXCJuYW1lXCIpKSk7XG5cdFx0XHRyZXR1cm4gdGhpcy5fdGV4dDtcblx0XHR9LFxuXHRcdGF0dHJzOiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIG9wdHMsIHNldCkge1xuXHRcdFx0XHR0aGlzLl9hdHRycyA9IG51bGw7XG5cdFx0XHRcdEJhc2VJdGVtLnByb3RvdHlwZS5tdXRhdG9ycy5hdHRycy5zZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0dGhpcy5fdXBkYXRlU291cmNlcygpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c3Jjc2V0OiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIG9wdHMsIHNldCkge1xuXHRcdFx0XHRzZXQoa2V5LCB2YWx1ZSwgb3B0cyk7XG5cdFx0XHRcdHRoaXMuZ2V0KFwic291cmNlc1wiKS5yZXNldCh2YWx1ZSwgb3B0cyk7XG5cdFx0XHRcdHRoaXMuX3VwZGF0ZVNvdXJjZXMoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNvdXJjZToge1xuXHRcdFx0dHJhbnNpZW50OiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0KFwic291cmNlc1wiKS5hdCh0aGlzLmdldChcInNyY0lkeFwiKSk7XG5cdFx0XHR9LFxuXHRcdH0sXG5cdH0sXG5cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fdXBkYXRlQ29sb3JzKCk7XG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLCBcImNoYW5nZTphdHRycyBjaGFuZ2U6YnVuZGxlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fYXR0cnMgPSBudWxsO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGF0dHJzOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5fYXR0cnMgfHwgKHRoaXMuX2F0dHJzID0gXy5kZWZhdWx0cyh7fSwgdGhpcy5nZXQoXCJidW5kbGVcIikuYXR0cnMoKSwgdGhpcy5nZXQoXCJhdHRyc1wiKSkpO1xuXHR9LFxuXG5cdF91cGRhdGVDb2xvcnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY29sb3JzID0ge1xuXHRcdFx0ZmdDb2xvcjogbmV3IENvbG9yKHRoaXMuYXR0cihcImNvbG9yXCIpKSxcblx0XHRcdGJnQ29sb3I6IG5ldyBDb2xvcih0aGlzLmF0dHIoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpKVxuXHRcdH07XG5cdFx0dGhpcy5jb2xvcnMuaGFzRGFya0JnID0gdGhpcy5jb2xvcnMuZmdDb2xvci5sdW1pbm9zaXR5KCkgPiB0aGlzLmNvbG9ycy5iZ0NvbG9yLmx1bWlub3NpdHkoKTtcblx0fSxcblxuXHRfdXBkYXRlU291cmNlczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNyY09iaiA9IHtcblx0XHRcdGticHM6IHRoaXMuYXR0cihcIkBkZWJ1Zy1iYW5kd2lkdGhcIilcblx0XHR9O1xuXHRcdHZhciBzcmNUcGwgPSB1cmxUZW1wbGF0ZXNbc3JjT2JqLmticHMgPyBcImRlYnVnLWJhbmR3aWR0aFwiIDogXCJvcmlnaW5hbFwiXTtcblx0XHR0aGlzLmdldChcInNvdXJjZXNcIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRzcmNPYmouc3JjID0gaXRlbS5nZXQoXCJzcmNcIik7XG5cdFx0XHRpdGVtLnNldChcIm9yaWdpbmFsXCIsIHNyY1RwbChzcmNPYmopKTtcblx0XHR9KTtcblx0fSxcblxuXHQvLyBfdXBkYXRlU291cmNlc0FycjogZnVuY3Rpb24oKSB7XG5cdC8vIFx0dmFyIHNyY3NldCA9IHRoaXMuZ2V0KFwic3Jjc2V0XCIpO1xuXHQvLyBcdGlmIChBcnJheS5pc0FycmF5KHNyY3NldCkpIHtcblx0Ly8gXHRcdHZhciBzcmNPYmogPSB7IGticHM6IHRoaXMuYXR0cihcIkBkZWJ1Zy1iYW5kd2lkdGhcIikgfTtcblx0Ly8gXHRcdHZhciBzcmNUcGwgPSBHbG9iYWxzLk1FRElBX1NSQ19UUExbc3JjT2JqLmticHM/IFwiZGVidWctYmFuZHdpZHRoXCIgOiBcIm9yaWdpbmFsXCJdO1xuXHQvLyBcdFx0c3Jjc2V0LmZvckVhY2goZnVuY3Rpb24obykge1xuXHQvLyBcdFx0XHRzcmNPYmouc3JjID0gby5zcmM7XG5cdC8vIFx0XHRcdG8ub3JpZ2luYWwgPSBzcmNUcGwoc3JjT2JqKTtcblx0Ly8gXHRcdH0sIHRoaXMpO1xuXHQvLyBcdH1cblx0Ly8gXHR0aGlzLmdldChcInNvdXJjZXNcIikucmVzZXQoc3Jjc2V0KTtcblx0Ly8gfSxcblxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvbW9kZWwvaXRlbS9Tb3VyY2VJdGVtXG4gKiBAcmVxdWlyZXMgbW9kdWxlOmJhY2tib25lXG4gKi9cblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG4vLyB2YXIgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9HbG9iYWxzfSAqL1xuLy8gdmFyIEdsb2JhbHMgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL1NvdXJjZUl0ZW19ICovXG5jb25zdCBCYXNlSXRlbSA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvQmFzZUl0ZW1cIik7XG5cbi8qKiBAdHlwZSB7U3RyaW5nfSAqL1xudmFyIG5vQ2FjaGVTdWZmaXggPSBcIj9cIiArIERhdGUubm93KCk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL1NvdXJjZUl0ZW19XG4gKi9cbi8vIG1vZHVsZS5leHBvcnRzID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbm1vZHVsZS5leHBvcnRzID0gQmFzZUl0ZW0uZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge09iamVjdH0gKi9cblx0ZGVmYXVsdHM6IHtcblx0XHRzcmM6IG51bGwsXG5cdFx0bWltZTogbnVsbCxcblx0XHR3OiBudWxsLFxuXHRcdGg6IG51bGwsXG5cdH0sXG5cblx0Z2V0dGVyczogW1wic3JjXCIsIFwib3JpZ2luYWxcIl0sXG5cblx0bXV0YXRvcnM6IHtcblx0XHRzcmM6IHtcblx0XHRcdHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb3B0aW9ucywgc2V0KSB7XG5cdFx0XHRcdGlmIChERUJVRykge1xuXHRcdFx0XHRcdHZhbHVlICs9IG5vQ2FjaGVTdWZmaXg7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0KGtleSwgdmFsdWUsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Ly8gb3JpZ2luYWw6IHsgXG5cdFx0Ly8gXHR0cmFuc2llbnQ6IHRydWUsXG5cdFx0Ly8gXHRnZXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBvcHRpb25zLCBzZXQpIHtcblx0XHQvLyBcdFx0cmV0dXJuIHRoaXMuYXR0cmlidXRlcy5vcmlnaW5hbCB8fCAodGhpcy5hdHRyaWJ1dGVzLm9yaWdpbmFsID0gdGhpcy5fY29tcG9zZU9yaWdpbmFsU3JjKCkpO1xuXHRcdC8vIFx0fSxcblx0XHQvLyB9LFxuXHRcdC8vIG1lZGlhOiB7XG5cdFx0Ly8gXHR0cmFuc2llbnQ6IHRydWUsXG5cdFx0Ly8gXHRnZXQ6IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBcdFx0dmFyIHJldHZhbDtcblx0XHQvLyBcdFx0aWYgKHRoaXMuX25vUmVjdXNpb24pIHtcblx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZyhcIiVzOjptZWRpYSByZXR1cm5pbmcgbnVsbFwiLCB0aGlzLmNpZCk7XG5cdFx0Ly8gXHRcdFx0cmV0dmFsID0gbnVsbDsvL3RoaXMuaWQ7XG5cdFx0Ly8gXHRcdH0gZWxzZSB7XG5cdFx0Ly8gXHRcdFx0Y29uc29sZS5sb2coXCIlczo6bWVkaWEgcmV0dXJuaW5nIE9iamVjdFwiLCB0aGlzLmNpZCk7XG5cdFx0Ly8gXHRcdFx0dGhpcy5fbm9SZWN1c2lvbiA9IHRydWU7XG5cdFx0Ly8gXHRcdFx0cmV0dmFsID0gdGhpcy5hdHRyaWJ1dGVzLm1lZGlhO1xuXHRcdC8vIFx0XHRcdHRoaXMuX25vUmVjdXNpb24gPSBmYWxzZTtcblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0XHRyZXR1cm4gcmV0dmFsO1xuXHRcdC8vIFx0fSxcblx0XHQvLyBcdHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMsIHNldCkge1xuXHRcdC8vIFx0XHRpZiAodmFsdWUgaW5zdGFuY2VvZiBCYXNlSXRlbSkge1xuXHRcdC8vIFx0XHRcdHNldChrZXksIHZhbHVlLCBvcHRpb25zKTtcblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0fSxcblx0XHQvLyB9LFxuXHR9LFxuXG5cdC8vIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHQvLyBcdGlmIChERUJVRykge1xuXHQvLyBcdFx0dmFyIGNiID0gZnVuY3Rpb24oKSB7XG5cdC8vIFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiQGRlYnVnLWJhbmR3aWR0aDpcIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5nZXQoXCJtZWRpYVwiKS5hdHRyKFwiQGRlYnVnLWJhbmR3aWR0aFwiKSkpO1xuXHQvLyBcdFx0XHRjb25zb2xlLmxvZyhcIm1lZGlhOlwiLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKSk7XG5cdC8vIFx0XHRcdC8vIGlmICgodGhpcy5nZXQoXCJtZWRpYVwiKSBpbnN0YW5jZW9mIEJhc2VJdGVtKSAmJiB0aGlzLmdldChcIm1lZGlhXCIpLmF0dHIoXCJAZGVidWctYmFuZHdpZHRoXCIpKSB7XG5cdC8vIFx0XHRcdC8vIFx0Y29uc29sZS5sb2coXCJvcmlnaW5hbFwiLCB0aGlzLmdldChcIm9yaWdpbmFsXCIpKTtcblx0Ly8gXHRcdFx0Ly8gXHRjb25zb2xlLmxvZyhcIm1lZGlhOlwiLCBKU09OLnN0cmluZ2lmeSh0aGlzLmdldChcIm1lZGlhXCIpLnRvSlNPTigpKSk7XG5cdC8vIFx0XHRcdC8vIH1cblx0Ly8gXHRcdH0uYmluZCh0aGlzKTtcblx0Ly8gXHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xuXHQvLyBcdH1cblx0Ly8gfSxcblx0Ly8gXG5cdC8vIF9jb21wb3NlT3JpZ2luYWxTcmM6IGZ1bmN0aW9uKCkge1xuXHQvLyBcdHZhciB2YWx1ZXMgPSB7IHNyYzogdGhpcy5nZXQoXCJzcmNcIikgfTtcblx0Ly8gXHRpZiAodGhpcy5oYXMoXCJtZWRpYVwiKSAmJiAodmFsdWVzLmticHMgPSB0aGlzLmdldChcIm1lZGlhXCIpLmF0dHIoXCJAZGVidWctYmFuZHdpZHRoXCIpKSkge1xuXHQvLyBcdC8vIGlmICh0aGlzLmhhcyhcIm1lZGlhXCIpICYmIHRoaXMuZ2V0KFwibWVkaWFcIikuYXR0cnMoKS5oYXNPd25Qcm9wZXJ0eShcIkBkZWJ1Zy1iYW5kd2lkdGhcIikpIHtcblx0Ly8gXHQvLyBcdHZhbHVlcy5rYnBzID0gdGhpcy5nZXQoXCJtZWRpYVwiKS5hdHRycygpW1wiQGRlYnVnLWJhbmR3aWR0aFwiXTtcblx0Ly8gXHRcdHJldHVybiBHbG9iYWxzLk1FRElBX1NSQ19UUExbXCJkZWJ1Zy1iYW5kd2lkdGhcIl0odmFsdWVzKTtcblx0Ly8gXHR9XG5cdC8vIFx0cmV0dXJuIEdsb2JhbHMuTUVESUFfU1JDX1RQTFtcIm9yaWdpbmFsXCJdKHZhbHVlcyk7XG5cdC8vIH0sXG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC9tb2RlbC9pdGVtL1R5cGVJdGVtXG4gKi9cblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmV9ICovXG4vLyB2YXIgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9Tb3VyY2VJdGVtfSAqL1xuY29uc3QgQmFzZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL0Jhc2VJdGVtXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvaXRlbS9UeXBlSXRlbX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBCYXNlSXRlbS5leHRlbmQoe1xuXG5cdF9kb21QcmVmaXg6IFwidFwiLFxuXG5cdC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdG5hbWU6IFwiXCIsXG5cdFx0aGFuZGxlOiBcIlwiLFxuXHRcdC8vIGdldCBrSWRzKCkgeyByZXR1cm4gW107IH0sXG5cdFx0Ly8gZ2V0IGtleXdvcmRzKCkgeyByZXR1cm4gW107IH0sXG5cdH0sXG5cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvQXBwVmlld1xuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmJhY2tib25lfSAqL1xuY29uc3QgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC91dGlscy9kZWJ1Zy90cmFjZUFyZ3N9ICovXG5jb25zdCBzdHJpcFRhZ3MgPSByZXF1aXJlKFwidXRpbHMvc3RyaW5ncy9zdHJpcFRhZ3NcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG5jb25zdCBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9Db250cm9sbGVyfSAqL1xuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9Db250cm9sbGVyXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL0FwcFN0YXRlfSAqL1xuY29uc3QgQXBwU3RhdGUgPSByZXF1aXJlKFwiYXBwL21vZGVsL0FwcFN0YXRlXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vQnVuZGxlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IGJ1bmRsZXMgPSByZXF1aXJlKFwiYXBwL21vZGVsL2NvbGxlY3Rpb24vQnVuZGxlQ29sbGVjdGlvblwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL0FydGljbGVDb2xsZWN0aW9ufSAqL1xuY29uc3QgYXJ0aWNsZXMgPSByZXF1aXJlKFwiYXBwL21vZGVsL2NvbGxlY3Rpb24vQXJ0aWNsZUNvbGxlY3Rpb25cIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld30gKi9cbmNvbnN0IFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3XCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvTmF2aWdhdGlvblZpZXd9ICovXG5jb25zdCBOYXZpZ2F0aW9uVmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9OYXZpZ2F0aW9uVmlld1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L0NvbnRlbnRWaWV3fSAqL1xuY29uc3QgQ29udGVudFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvQ29udGVudFZpZXdcIik7XG5cblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9Ub3VjaE1hbmFnZXJ9ICovXG5jb25zdCBUb3VjaE1hbmFnZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9Ub3VjaE1hbmFnZXJcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTpoYW1tZXJqc30gKi9cbi8vIGNvbnN0IEhhbW1lciA9IHJlcXVpcmUoXCJoYW1tZXJqc1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3RvdWNoL1Ntb290aFBhblJlY29nbml6ZXJ9ICovXG4vLyBjb25zdCBQYW4gPSByZXF1aXJlKFwidXRpbHMvdG91Y2gvU21vb3RoUGFuUmVjb2duaXplclwiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmhhbW1lcmpzLlRhcH0gKi9cbi8vIGNvbnN0IFRhcCA9IEhhbW1lci5UYXA7XG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2RlYnVnL3RyYWNlRWxlbWVudH0gKi9cbi8vIGNvbnN0IHRyYWNlRWxlbWVudCA9IHJlcXVpcmUoXCJ1dGlscy9kZWJ1Zy90cmFjZUVsZW1lbnRcIik7XG4vL1xuLy8gY29uc3QgdnBhbkxvZ0ZuID0gXy5kZWJvdW5jZShjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLCAxMDAsIGZhbHNlKTtcbi8vIGNvbnN0IGhwYW5Mb2dGbiA9IF8uZGVib3VuY2UoY29uc29sZS5sb2cuYmluZChjb25zb2xlKSwgMTAwLCBmYWxzZSk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L0FwcFZpZXd9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gVmlldy5leHRlbmQoe1xuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0Y2lkUHJlZml4OiBcImFwcFwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGVsOiBcImh0bWxcIixcblx0Ly8gLyoqIEBvdmVycmlkZSAqL1xuXHRjbGFzc05hbWU6IFwiYXBwXCIsIC8vIHdpdGhvdXQtYnVuZGxlIHdpdGhvdXQtbWVkaWEgd2l0aG91dC1hcnRpY2xlXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0bW9kZWw6IEFwcFN0YXRlLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0ZXZlbnRzOiB7XG5cdFx0XCJ2aXNpYmlsaXR5Y2hhbmdlXCI6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOlslc11cIiwgdGhpcy5jaWQsIGV2LnR5cGUpO1xuXHRcdH0sXG5cdFx0XCJmdWxsc2NyZWVuY2hhbmdlXCI6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOlslc10gZnVsbHNjcmVlbjogJW9cIiwgdGhpcy5jaWQsIGV2LnR5cGUsIChkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCAhPT0gbnVsbCksIGRvY3VtZW50LmZ1bGxzY3JlZW4pO1xuXHRcdH0sXG5cdFx0XCJkcmFnc3RhcnRcIjogZnVuY3Rpb24oZXYpIHtcblx0XHRcdGlmIChldi50YXJnZXQubm9kZU5hbWUgPT0gXCJJTUdcIiB8fCBldi50YXJnZXQubm9kZU5hbWUgPT0gXCJBXCIpIHtcblx0XHRcdFx0ZXYuZGVmYXVsdFByZXZlbnRlZCB8fCBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Ly8gXCJ0b3VjaG1vdmUgYm9keVwiOiBmdW5jdGlvbihldikge1xuXHRcdC8vIFx0ZXYuZGVmYXVsdFByZXZlbnRlZCB8fCBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdC8vIH0sXG5cdH0sXG5cblx0cHJvcGVydGllczoge1xuXHRcdGNvbnRhaW5lcjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2NvbnRhaW5lciB8fFxuXHRcdFx0XHRcdCh0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSk7XG5cdFx0XHRcdC8vICh0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5ib2R5KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG5hdmlnYXRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9uYXZpZ2F0aW9uIHx8XG5cdFx0XHRcdFx0KHRoaXMuX25hdmlnYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdmlnYXRpb25cIikpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Y29udGVudDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2NvbnRlbnQgfHxcblx0XHRcdFx0XHQodGhpcy5fY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHQvKiBlbGVtZW50cyAqL1xuXHRcdC8vIHRoaXMucm91dGVFbCA9IHRoaXMuZWw7XG5cdFx0Ly8gdGhpcy5zdGF0ZUVsID0gdGhpcy5lbFxuXHRcdHRoaXMuYnJlYWtwb2ludEVsID0gdGhpcy5lbDtcblxuXHRcdC8qIGluaXQgSGFtbWVySlMgaGFuZGxlcnMgKi9cblx0XHR2YXIgdnRvdWNoLCBodG91Y2gsIHRvdWNoRWw7XG5cdFx0Ly8gdmFyIHZwYW4sIGhwYW4sIHRhcDtcblxuXHRcdC8vIHRoaXMuX3ZwYW5FbmFibGVGbiA9IGZ1bmN0aW9uKG1jLCBldikge1xuXHRcdC8vIFx0dmFyIHJldHZhbCA9ICF0aGlzLl9oYXNPdmVyZmxvd1kodGhpcy5jb250YWluZXIpO1xuXHRcdC8vIFx0dnBhbkxvZ0ZuKFwiJXM6Ol92cGFuRW5hYmxlRm4gLT4gJW9cXG4lb1wiLCB0aGlzLmNpZCwgcmV0dmFsLCBhcmd1bWVudHMpO1xuXHRcdC8vIFx0cmV0dXJuIHJldHZhbDtcblx0XHQvLyB9LmJpbmQodGhpcyk7XG5cdFx0Ly9cblx0XHQvLyB0aGlzLl9ocGFuRW5hYmxlRm4gPSBmdW5jdGlvbihtYywgZXYpIHtcblx0XHQvLyBcdHZhciByZXR2YWwgPSB0aGlzLm1vZGVsLmdldChcIndpdGhCdW5kbGVcIikgJiYgdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0Ly8gXHRocGFuTG9nRm4oXCIlczo6X2hwYW5FbmFibGVGbiAtPiAlb1xcbiVvXCIsIHRoaXMuY2lkLCByZXR2YWwsIGFyZ3VtZW50cyk7XG5cdFx0Ly8gXHRyZXR1cm4gISFyZXR2YWw7XG5cdFx0Ly8gfS5iaW5kKHRoaXMpO1xuXG5cdFx0dG91Y2hFbCA9IHRoaXMuY29udGVudDtcblx0XHQvLyB0b3VjaEVsID0gZG9jdW1lbnQuYm9keTtcblx0XHR2dG91Y2ggPSBodG91Y2ggPSBUb3VjaE1hbmFnZXIuaW5pdCh0b3VjaEVsKTtcblxuXHRcdC8vIHZ0b3VjaC5nZXQoXCJ2cGFuXCIpLnNldCh7IGVuYWJsZTogdGhpcy5fdnBhbkVuYWJsZUZuIH0pO1xuXHRcdC8vIGh0b3VjaC5nZXQoXCJocGFuXCIpLnNldCh7IGVuYWJsZTogdGhpcy5faHBhbkVuYWJsZUZuIH0pO1xuXHRcdC8vIFx0XHR2dG91Y2guc2V0KHtcblx0XHQvLyBcdFx0XHRlbmFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIFx0XHRcdFx0Y29uc29sZS5sb2coXCJhcHAxOjpoYW1tZXJqcyBlbmFibGVcIiwgYXJndW1lbnRzKTtcblx0XHQvLyBcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdC8vIFx0XHRcdH1cblx0XHQvLyBcdFx0fSk7XG5cdFx0Ly8gaHBhbiA9IHZwYW47XG5cblx0XHQvLyB0aGlzLmVsLnN0eWxlLnRvdWNoQWN0aW9uID0gXCJub25lXCI7IC8vXCJwYW4teCBwYW4teVwiO1xuXG5cdFx0Ly8gdGFwID0gbmV3IEhhbW1lci5UYXAoKTtcblx0XHQvLyBocGFuID0gbmV3IFBhbih7XG5cdFx0Ly8gXHRldmVudDogXCJocGFuXCIsXG5cdFx0Ly8gXHRkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTFxuXHRcdC8vIH0pO1xuXHRcdC8vIGhwYW4uc2V0KHtcblx0XHQvLyBcdGVuYWJsZTogdGhpcy5faHBhbkVuYWJsZUZuXG5cdFx0Ly8gfSk7XG5cdFx0Ly8gdnBhbiA9IG5ldyBQYW4oe1xuXHRcdC8vIFx0ZXZlbnQ6IFwidnBhblwiLFxuXHRcdC8vIFx0ZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX1ZFUlRJQ0FMXG5cdFx0Ly8gfSk7XG5cdFx0Ly8gdnBhbi5zZXQoe1xuXHRcdC8vIFx0ZW5hYmxlOiB0aGlzLl92cGFuRW5hYmxlRm5cblx0XHQvLyB9KTtcblx0XHQvLyBocGFuLnJlcXVpcmVGYWlsdXJlKHZwYW4pO1xuXHRcdC8vIHZwYW4ucmVxdWlyZUZhaWx1cmUoaHBhbik7XG5cdFx0Ly8gdnRvdWNoLmFkZChbXSk7XG5cblx0XHQvLyBodG91Y2ggPSB2dG91Y2ggPSBuZXcgSGFtbWVyLk1hbmFnZXIodGhpcy5jb250ZW50KTtcblx0XHQvLyBodG91Y2guYWRkKFt0YXAsIGhwYW4sIHZwYW5dKTtcblx0XHQvLyBodG91Y2guYWRkKFtocGFuLCB2cGFuXSk7XG5cdFx0Ly8gaHRvdWNoLnNldCh7IHRvdWNoQWN0aW9uOiBcInBhbi14IHBhbi15XCIgfSk7XG5cblx0XHQvLyB2cGFuID0gbmV3IEhhbW1lcih0aGlzLm5hdmlnYXRpb24sIHtcblx0XHQvLyBcdHJlY29nbml6ZXJzOiBbXG5cdFx0Ly8gXHRcdFtQYW4sIHtcblx0XHQvLyBcdFx0XHRldmVudDogJ3ZwYW4nLFxuXHRcdC8vIFx0XHRcdHRvdWNoQWN0aW9uOiBcInBhbi15XCIsXG5cdFx0Ly8gXHRcdFx0ZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX1ZFUlRJQ0FMLFxuXHRcdC8vIFx0XHRcdGVuYWJsZTogdnBhbkVuYWJsZUZuXG5cdFx0Ly8gXHRcdH1dLFxuXHRcdC8vIFx0XVxuXHRcdC8vIH0pO1xuXHRcdC8vIGhwYW4gPSBuZXcgSGFtbWVyKHRoaXMuY29udGVudCwge1xuXHRcdC8vIFx0cmVjb2duaXplcnM6IFtcblx0XHQvLyBcdFx0W1Bhbiwge1xuXHRcdC8vIFx0XHRcdGV2ZW50OiAnaHBhbicsXG5cdFx0Ly8gXHRcdFx0dG91Y2hBY3Rpb246IFwicGFuLXhcIixcblx0XHQvLyBcdFx0XHRkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTCxcblx0XHQvLyBcdFx0XHRlbmFibGU6IGhwYW5FbmFibGVGblxuXHRcdC8vIFx0XHR9XSxcblx0XHQvLyBcdFx0W1RhcF1cblx0XHQvLyBcdF1cblx0XHQvLyB9KTtcblx0XHQvLyBocGFuLmdldChcImhwYW5cIikucmVxdWlyZUZhaWx1cmUodnBhbi5nZXQoXCJ2cGFuXCIpKTtcblxuXHRcdC8vIHRoaXMuX2FmdGVyUmVuZGVyID0gdGhpcy5fYWZ0ZXJSZW5kZXIuYmluZCh0aGlzKTtcblx0XHR0aGlzLl9vblJlc2l6ZSA9IHRoaXMuX29uUmVzaXplLmJpbmQodGhpcyk7XG5cblx0XHQvKiByZW5kZXIgb24gcmVzaXplLCBvbm9yaWVudGF0aW9uY2hhbmdlLCB2aXNpYmlsaXR5Y2hhbmdlICovXG5cdFx0Ly8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCB0aGlzLl9vblJlc2l6ZSwgZmFsc2UpO1xuXHRcdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIF8uZGVib3VuY2UodGhpcy5fb25SZXNpemUuYmluZCh0aGlzKSwgMzAsIGZhbHNlKSwgZmFsc2UpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuX29uUmVzaXplLCBmYWxzZSk7XG5cblx0XHQvLyB2YXIgaCA9IGZ1bmN0aW9uKGV2KSB7IGNvbnNvbGUubG9nKGV2LnR5cGUsIGV2KSB9O1xuXHRcdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGgsIGZhbHNlKTtcblx0XHQvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIGgsIGZhbHNlKTtcblxuXHRcdC8qIFRPRE86IHJlcGxhY2UgcmVzaXplIHcvIG1lZGlhcXVlcnkgbGlzdGVuZXJzLiBDYXZlYXQ6IHNvbWUgY29tcG9uZW50c1xuXHRcdCh2Zy4gQ2Fyb3VzZWwpIHJlcXVpcmUgdXBkYXRlIG9uIHJlc2l6ZSAqL1xuXHRcdC8vIHRoaXMuX29uQnJlYWtwb2ludENoYW5nZSA9IHRoaXMuX29uQnJlYWtwb2ludENoYW5nZS5iaW5kKHRoaXMpO1xuXHRcdC8vIE9iamVjdC5rZXlzKEdsb2JhbHMuQlJFQUtQT0lOVFMpLmZvckVhY2goZnVuY3Rpb24ocykge1xuXHRcdC8vIFx0R2xvYmFscy5CUkVBS1BPSU5UU1tzXS5hZGRMaXN0ZW5lcnModGhpcy5fb25CcmVha3BvaW50Q2hhbmdlKTtcblx0XHQvLyB9LCB0aGlzKTtcblxuXG5cdFx0LyogaW5pdGlhbGl6ZSBjb250cm9sbGVyL21vZGVsIGxpc3RlbmVycyBCRUZPUkUgdmlld3MgcmVnaXN0ZXIgdGhlaXIgb3duICovXG5cdFx0dGhpcy5saXN0ZW5Ubyhjb250cm9sbGVyLCBcInJvdXRlXCIsIHRoaXMuX29uUm91dGUpO1xuXHRcdC8vIHRoaXMubGlzdGVuVG8oY29udHJvbGxlciwgXCJjaGFuZ2U6YWZ0ZXJcIiwgdGhpcy5fYWZ0ZXJDb250cm9sbGVyQ2hhbmdlZCk7XG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCBcImNoYW5nZVwiLCB0aGlzLl9vbk1vZGVsQ2hhbmdlKTsgLyogRklYTUUgKi9cblxuXHRcdC8qIGluaXRpYWxpemUgdmlld3MgKi9cblx0XHR0aGlzLm5hdmlnYXRpb25WaWV3ID0gbmV3IE5hdmlnYXRpb25WaWV3KHtcblx0XHRcdGVsOiB0aGlzLm5hdmlnYXRpb24sXG5cdFx0XHRtb2RlbDogdGhpcy5tb2RlbCxcblx0XHRcdHZwYW46IHZ0b3VjaCxcblx0XHRcdGhwYW46IGh0b3VjaFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5jb250ZW50VmlldyA9IG5ldyBDb250ZW50Vmlldyh7XG5cdFx0XHRlbDogdGhpcy5jb250ZW50LFxuXHRcdFx0bW9kZWw6IHRoaXMubW9kZWwsXG5cdFx0XHR2cGFuOiB2dG91Y2gsXG5cdFx0XHRocGFuOiBodG91Y2gsXG5cdFx0fSk7XG5cblx0XHQvKiBUb3VjaEV2ZW50cyBmaXh1cHNcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFx0Ly8gdmFyIHRyYWNlVG91Y2hFdmVudCA9IChtc2csIHRyYWNlT2JqKSA9PiB7XG5cdFx0Ly8gXHRpZiAobXNnLmhhc093blByb3BlcnR5KFwidHlwZVwiKSkge1xuXHRcdC8vIFx0XHRtc2cgPSBtc2cudHlwZSArIFwiIDogXCIgK1xuXHRcdC8vIFx0XHRcdChtc2cuZGVmYXVsdFByZXZlbnRlZCA/IFwicHJldmVudGVkXCIgOiBcIm5vdCBwcmV2ZW50ZWRcIik7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gXHR2YXIgc3ksIHNoLCBjaDtcblx0XHQvLyBcdHN5ID0gdGhpcy5lbC5zY3JvbGxUb3A7XG5cdFx0Ly8gXHRzaCA9IHRoaXMuZWwuc2Nyb2xsSGVpZ2h0IC0gMTtcblx0XHQvLyBcdGNoID0gdGhpcy5lbC5jbGllbnRIZWlnaHQ7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhcIiVzOlslc10gXCIgK1xuXHRcdC8vIFx0XHRcInN5OlsxPiVvPj0lcyA9ICVvXSBcIiArXG5cdFx0Ly8gXHRcdFwic2g6WyVvPD0lbyA9ICVvXSBcIiArXG5cdFx0Ly8gXHRcdFwibmF2Oltjc3M6JW8gdmFsOiVvXVwiLFxuXHRcdC8vIFx0XHR0aGlzLmNpZCwgbXNnLFxuXHRcdC8vIFx0XHRzeSwgc2ggLSBjaCwgKDEgPD0gc3kgPD0gKHNoIC0gY2gpKSxcblx0XHQvLyBcdFx0c2gsIGNoLCAoc2ggPD0gY2gpLFxuXHRcdC8vIFx0XHR0aGlzLm5hdmlnYXRpb25WaWV3LmVsLnN0eWxlLmhlaWdodCxcblx0XHQvLyBcdFx0dGhpcy5uYXZpZ2F0aW9uVmlldy5lbC5zY3JvbGxIZWlnaHQsXG5cdFx0Ly8gXHRcdHRyYWNlT2JqIHx8IFwiXCJcblx0XHQvLyBcdCk7XG5cdFx0Ly8gfTtcblxuXG5cdFx0Ly8gdmFyIHNjcm9sbHRvdWNoID0gbmV3IEhhbW1lci5NYW5hZ2VyKHRoaXMuZWwpO1xuXHRcdC8vIHNjcm9sbHRvdWNoLmFkZChuZXcgSGFtbWVyLlBhbih7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCwgdGhyZXNob2xkOiAwIH0pKTtcblx0XHQvLyBzY3JvbGx0b3VjaC5vbihcInBhbm1vdmVcIiwgZnVuY3Rpb24oZXYpIHtcblx0XHQvL1xuXHRcdC8vIFx0Ly8gdmFyIHN5LCBzaCwgY2g7XG5cdFx0Ly8gXHQvLyBzeSA9IHRoaXMuZWwuc2Nyb2xsVG9wO1xuXHRcdC8vIFx0Ly8gc2ggPSB0aGlzLmVsLnNjcm9sbEhlaWdodCAtIDE7XG5cdFx0Ly8gXHQvLyBjaCA9IHRoaXMuZWwuY2xpZW50SGVpZ2h0O1xuXHRcdC8vIFx0Ly9cblx0XHQvLyBcdC8vIGlmICgoMSA+IHN5KSAmJiAoZXYuZGlyZWN0aW9uIHwgSGFtbWVyLkRJUkVDVElPTl9ET1dOKSkge1xuXHRcdC8vIFx0Ly8gXHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdC8vIFx0Ly8gXHRjb25zb2xlLmxvZyhcIiVzOltwYW5tb3ZlXSAlc1wiLCB0aGlzLmNpZCwgXCJwcmV2ZW50IGF0IHRvcFwiKTtcblx0XHQvLyBcdC8vIH0gZWxzZVxuXHRcdC8vIFx0Ly8gaWYgKChzeSA+IChzaCAtIGNoKSkgJiYgKGV2LmRpcmVjdGlvbiB8IEhhbW1lci5ESVJFQ1RJT05fVVApKSB7XG5cdFx0Ly8gXHQvLyBcdGV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Ly8gXHQvLyBcdGNvbnNvbGUubG9nKFwiJXM6W3Bhbm1vdmVdICVzXCIsIHRoaXMuY2lkLCBcInByZXZlbnQgYXQgYm90dG9tXCIpO1xuXHRcdC8vIFx0Ly8gfVxuXHRcdC8vIFx0aWYgKCh0aGlzLmVsLnNjcm9sbEhlaWdodCAtIDEpIDw9IHRoaXMuZWwuY2xpZW50SGVpZ2h0KSB7XG5cdFx0Ly8gXHRcdGV2LnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gXHQvLyB0cmFjZVRvdWNoRXZlbnQoZXYpO1xuXHRcdC8vIH0uYmluZCh0aGlzKSk7XG5cblx0XHR2YXIgdG91Y2hPcHRzID0geyBjYXB0dXJlOiBmYWxzZSwgcGFzc2l2ZTogZmFsc2UgfTtcblx0XHR2YXIgb25Ub3VjaFN0YXJ0ID0gKGV2KSA9PiB7XG5cdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgb25Ub3VjaE1vdmUsIHRvdWNoT3B0cyk7XG5cdFx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBvblRvdWNoRW5kLCB0b3VjaE9wdHMpO1xuXHRcdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIiwgb25Ub3VjaEVuZCwgdG91Y2hPcHRzKTtcblx0XHR9O1xuXHRcdHZhciBvblRvdWNoTW92ZSA9IChldikgPT4ge1xuXHRcdFx0aWYgKCFldi5kZWZhdWx0UHJldmVudGVkICYmICh0aGlzLmVsLnNjcm9sbEhlaWdodCAtIDEpIDw9IHRoaXMuZWwuY2xpZW50SGVpZ2h0KSB7XG5cdFx0XHRcdGV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0XHQvL3RyYWNlVG91Y2hFdmVudChldik7XG5cdFx0fTtcblx0XHR2YXIgb25Ub3VjaEVuZCA9IChldikgPT4ge1xuXHRcdFx0dGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG9uVG91Y2hNb3ZlLCB0b3VjaE9wdHMpO1xuXHRcdFx0dGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25Ub3VjaEVuZCwgdG91Y2hPcHRzKTtcblx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIG9uVG91Y2hFbmQsIHRvdWNoT3B0cyk7XG5cdFx0fTtcblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIG9uVG91Y2hTdGFydCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG5cdFx0dmFyIG9uTWVhc3VyZWQgPSAodmlldykgPT4ge1xuXHRcdFx0dGhpcy5zZXRJbW1lZGlhdGUoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCh0aGlzLmVsLnNjcm9sbEhlaWdodCAtIDEpIDw9IHRoaXMuZWwuY2xpZW50SGVpZ2h0KSB7XG5cdFx0XHRcdFx0XHR0aGlzLmVsLnN0eWxlLm92ZXJmbG93WSA9IFwiaGlkZGVuXCI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuZWwuc3R5bGUub3ZlcmZsb3dZID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5lbC5zY3JvbGxUb3AgPSAxO1xuXHRcdFx0XHRcdC8vdHJhY2VUb3VjaEV2ZW50KFwidmlldzpjb2xsYXBzZWQ6bWVhc3VyZWRcIik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMubmF2aWdhdGlvblZpZXcsIFwidmlldzpjb2xsYXBzZWQ6bWVhc3VyZWRcIiwgb25NZWFzdXJlZCk7XG5cblx0XHQvKiBHb29nbGUgQW5hbHl0aWNzXG5cdFx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcdC8vIGlmICh3aW5kb3cuR1RBR19JRCkge1xuXHRcdC8vIFx0Ly8gbGV0IGdhUGFnZXZpZXdEaXNhYmxlID0gLyg/Oihsb2NhbGhvc3R8XFwubG9jYWwpKSQvLnRlc3QobG9jYXRpb24uaG9zdG5hbWUpIHx8IHdpbmRvdy5HVEFHX0lEID09PSBcIlVBLTAwMDAwMDAtMFwiO1xuXHRcdC8vIFx0aWYgKHdpbmRvdy5ndGFnKSB7XG5cdFx0Ly8gXHRcdGNvbnRyb2xsZXJcblx0XHQvLyBcdFx0XHQub24oXCJyb3V0ZVwiLCAobmFtZSkgPT4ge1xuXHRcdC8vIFx0XHRcdFx0dmFyIHBhZ2UgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCk7XG5cdFx0Ly8gXHRcdFx0XHQvLyBBZGQgYSBzbGFzaCBpZiBuZWNjZXNhcnlcblx0XHQvLyBcdFx0XHRcdGlmIChwYWdlLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdFx0Ly8gXHRcdFx0XHRcdHBhZ2UgPSAnLycgKyBwYWdlO1xuXHRcdC8vIFx0XHRcdFx0fVxuXHRcdC8vIFx0XHRcdFx0Ly8gcGFnZS5yZXBsYWNlKC9eKD8hXFwvKS8sIFwiL1wiKTtcblx0XHQvLyBcdFx0XHRcdHdpbmRvdy5ndGFnKCdjb25maWcnLCB3aW5kb3cuR1RBR19JRCwge1xuXHRcdC8vIFx0XHRcdFx0XHQncGFnZV90aXRsZSc6IHBhZ2UsXG5cdFx0Ly8gXHRcdFx0XHRcdCdwYWdlX3BhdGgnOiBwYWdlXG5cdFx0Ly8gXHRcdFx0XHR9KTtcblx0XHQvLyBcdFx0XHRcdGNvbnNvbGUud2FybihcIkdUQUcgcGFnZSBzZXQgdG8gJyVzJ1wiLCBwYWdlKTtcblx0XHQvLyBcdFx0XHR9KTtcblx0XHQvLyBcdFx0Ly8gfSBlbHNlXG5cdFx0Ly8gXHRcdC8vIGlmICh3aW5kb3cuZ2EpIHtcblx0XHQvLyBcdFx0Ly8gXHRjb250cm9sbGVyXG5cdFx0Ly8gXHRcdC8vIFx0XHQub25jZShcInJvdXRlXCIsICgpID0+IHtcblx0XHQvLyBcdFx0Ly8gXHRcdFx0d2luZG93LmdhKFwiY3JlYXRlXCIsIHdpbmRvdy5HVEFHX0lELCBcImF1dG9cIik7XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdC8vIGlmIGxvY2FsaG9zdCBvciBkdW1teSBJRCwgZGlzYWJsZSBhbmFseXRpY3Ncblx0XHQvLyBcdFx0Ly8gXHRcdFx0aWYgKGdhUGFnZXZpZXdEaXNhYmxlKSB7XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdFx0d2luZG93LmdhKFwic2V0XCIsIFwic2VuZEhpdFRhc2tcIiwgbnVsbCk7XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdH1cblx0XHQvLyBcdFx0Ly8gXHRcdFx0Y29uc29sZS53YXJuKFwiR0EgZW5hYmxlZCB0YWcgJyVzJ1wiLCB3aW5kb3cuR1RBR19JRCk7XG5cdFx0Ly8gXHRcdC8vIFx0XHR9KVxuXHRcdC8vIFx0XHQvLyBcdFx0Lm9uKFwicm91dGVcIiwgKG5hbWUpID0+IHtcblx0XHQvLyBcdFx0Ly8gXHRcdFx0dmFyIHBhZ2UgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCk7XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdC8vIEFkZCBhIHNsYXNoIGlmIG5lY2Nlc2FyeVxuXHRcdC8vIFx0XHQvLyBcdFx0XHRpZiAocGFnZS5jaGFyQXQoMCkgIT09ICcvJykge1xuXHRcdC8vIFx0XHQvLyBcdFx0XHRcdHBhZ2UgPSAnLycgKyBwYWdlO1xuXHRcdC8vIFx0XHQvLyBcdFx0XHR9XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdC8vIHBhZ2UucmVwbGFjZSgvXig/IVxcLykvLCBcIi9cIik7XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdHdpbmRvdy5nYShcInNldFwiLCBcInBhZ2VcIiwgcGFnZSk7XG5cdFx0Ly8gXHRcdC8vIFx0XHRcdHdpbmRvdy5nYShcInNlbmRcIiwgXCJwYWdldmlld1wiKTtcblx0XHQvLyBcdFx0Ly9cblx0XHQvLyBcdFx0Ly8gXHRcdFx0Y29uc29sZS53YXJuKFwiR0EgcGFnZSBzZXQgdG8gJyVzJ1wiLCBwYWdlKTtcblx0XHQvLyBcdFx0Ly8gXHRcdH0pO1xuXHRcdC8vIFx0fSBlbHNlIHtcblx0XHQvLyBcdFx0Y29uc29sZS53YXJuKFwiR0EvR1RBRyBub3QgbG9hZGVkIChMSUI6ICVzLCBHQV9JRDogJXMpXCIsICEhKHdpbmRvdy5nYSB8fCB3aW5kb3cuZ3RhZyksIHdpbmRvdy5HVEFHX0lEKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9IGVsc2Uge1xuXHRcdC8vIFx0Y29uc29sZS53YXJuKFwiR0EvR1RBRyBub3QgZW5hYmxlZCAoTElCOiAlcywgR0FfSUQ6ICVzKVwiLCAhISh3aW5kb3cuZ2EgfHwgd2luZG93Lmd0YWcpLCB3aW5kb3cuR1RBR19JRCk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gaWYgKHdpbmRvdy5nYSAmJiB3aW5kb3cuR1RBR19JRCkge1xuXHRcdC8vIFx0Y29udHJvbGxlclxuXHRcdC8vIFx0XHQub25jZShcInJvdXRlXCIsICgpID0+IHtcblx0XHQvLyBcdFx0XHR3aW5kb3cuZ2EoXCJjcmVhdGVcIiwgd2luZG93LkdUQUdfSUQsIFwiYXV0b1wiKTtcblx0XHQvLyBcdFx0XHQvLyBpZiBsb2NhbGhvc3Qgb3IgZHVtbXkgSUQsIGRpc2FibGUgYW5hbHl0aWNzXG5cdFx0Ly8gXHRcdFx0aWYgKC8oPzoobG9jYWxob3N0fFxcLmxvY2FsKSkkLy50ZXN0KGxvY2F0aW9uLmhvc3RuYW1lKVxuXHRcdC8vIFx0XHRcdFx0fHwgd2luZG93LkdUQUdfSUQgPT0gXCJYWC0wMDAwMDAwLTBcIikge1xuXHRcdC8vIFx0XHRcdFx0d2luZG93LmdhKFwic2V0XCIsIFwic2VuZEhpdFRhc2tcIiwgbnVsbCk7XG5cdFx0Ly8gXHRcdFx0XHR3aW5kb3cuZ3RhZygnY29uZmlnJywgJ0dBX1RSQUNLSU5HX0lEJywgeyAnc2VuZF9wYWdlX3ZpZXcnOiBmYWxzZSB9KTtcblx0XHQvLyBcdFx0XHRcdGNvbnNvbGUud2FybihcIkdBIGRpc2FibGVkIGZvciBsb2NhbGhvc3RcIiwgd2luZG93LkdUQUdfSUQpO1xuXHRcdC8vIFx0XHRcdH1cblx0XHQvLyBcdFx0fSlcblx0XHQvLyBcdFx0Lm9uKFwicm91dGVcIiwgKG5hbWUpID0+IHtcblx0XHQvLyBcdFx0XHR2YXIgcGFnZSA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoKTtcblx0XHQvLyBcdFx0XHQvLyBBZGQgYSBzbGFzaCBpZiBuZWNjZXNhcnlcblx0XHQvLyBcdFx0XHRpZiAocGFnZS5jaGFyQXQoMCkgIT09ICcvJykge1xuXHRcdC8vIFx0XHRcdFx0cGFnZSA9ICcvJyArIHBhZ2U7XG5cdFx0Ly8gXHRcdFx0fVxuXHRcdC8vIFx0XHRcdC8vIHBhZ2UucmVwbGFjZSgvXig/IVxcLykvLCBcIi9cIik7XG5cdFx0Ly8gXHRcdFx0d2luZG93LmdhKFwic2V0XCIsIFwicGFnZVwiLCBwYWdlKTtcblx0XHQvLyBcdFx0XHR3aW5kb3cuZ2EoXCJzZW5kXCIsIFwicGFnZXZpZXdcIik7XG5cdFx0Ly9cblx0XHQvLyBcdFx0XHRjb25zb2xlLndhcm4oXCJHQSBwYWdlIHNldCB0byAnJXMnXCIsIHBhZ2UpO1xuXHRcdC8vIFx0XHR9KTtcblx0XHQvLyB9IGVsc2Uge1xuXHRcdC8vIFx0Y29uc29sZS53YXJuKFwiR0Egbm90IGVuYWJsZWQgKExJQjogJXMsIEdBX0VOQUJMRUQ6ICVzLCBHQV9JRDogJXMpXCIsICEhd2luZG93LmdhLCB3aW5kb3cuR0FfRU5BQkxFRCwgd2luZG93LkdUQUdfSUQpO1xuXHRcdC8vIH1cblx0XHQvLyBpZiAod2luZG93LmdhICYmIHdpbmRvdy5HVEFHX0lEKSB7XG5cdFx0Ly8gXHRjb250cm9sbGVyLm9uY2UoXCJyb3V0ZVwiLCAoKSA9PiB7XG5cdFx0Ly8gXHRcdHdpbmRvdy5nYShcImNyZWF0ZVwiLCB3aW5kb3cuR1RBR19JRCwgXCJhdXRvXCIpO1xuXHRcdC8vIFx0fSk7XG5cdFx0Ly8gfVxuXHRcdC8vIGNvbnNvbGUuaW5mbyhcIkdpdDogJXNcIiwgR0lUX1JFVik7XG5cdFx0Y29uc29sZS5pbmZvKFwiQW5hbHl0aWNzIEdUQUdfRU5BQkxFRDogJXMsIEdUQUdfSUQ6ICVzLCBHQV9MSUI6ICVzXCIsIEdUQUdfRU5BQkxFRCwgd2luZG93LkdUQUdfSUQsICEhd2luZG93LmdhKTtcblxuXHRcdC8qIFN0YXJ0dXAgbGlzdGVuZXIsIGFkZGVkIGxhc3QgKi9cblx0XHR0aGlzLmxpc3RlblRvT25jZShjb250cm9sbGVyLCBcInJvdXRlXCIsIHRoaXMuX2FwcFN0YXJ0KTtcblxuXHRcdC8qIHN0YXJ0IHJvdXRlciwgd2hpY2ggd2lsbCByZXF1ZXN0IGFwcHJvcGlhdGUgc3RhdGUgKi9cblx0XHRCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KHtcblx0XHRcdHB1c2hTdGF0ZTogZmFsc2UsXG5cdFx0XHRoYXNoQ2hhbmdlOiB0cnVlLFxuXHRcdH0pO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogX2FwcFN0YXJ0XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfYXBwU3RhcnQ6IGZ1bmN0aW9uKG5hbWUsIGFyZ3MpIHtcblx0XHRjb25zb2xlLmluZm8oXCIlczo6X2FwcFN0YXJ0KCVzLCAlcylcIiwgdGhpcy5jaWQsIG5hbWUsIGFyZ3Muam9pbigpKTtcblx0XHR0aGlzLnNraXBUcmFuc2l0aW9ucyA9IHRydWU7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKFwic2tpcC10cmFuc2l0aW9uc1wiKTtcblxuXHRcdGlmICh3aW5kb3cuZ2EgJiYgd2luZG93LkdUQUdfSUQpIHtcblx0XHRcdHdpbmRvdy5nYShcImNyZWF0ZVwiLCB3aW5kb3cuR1RBR19JRCwgXCJhdXRvXCIpO1xuXHRcdH1cblxuXHRcdHRoaXMucmVxdWVzdFJlbmRlcihWaWV3Lk1PREVMX0lOVkFMSUQgfCBWaWV3LlNJWkVfSU5WQUxJRClcblx0XHRcdC5yZXF1ZXN0Q2hpbGRyZW5SZW5kZXIoVmlldy5NT0RFTF9JTlZBTElEIHwgVmlldy5TSVpFX0lOVkFMSUQpXG5cdFx0XHQubGlzdGVuVG9PbmNlKHRoaXMsIFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgZnVuY3Rpb24odmlldywgZmxhZ3MpIHtcblx0XHRcdFx0Ly8gdGhpcy5zZXRJbW1lZGlhdGUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6Ol9hcHBTdGFydFt2aWV3OnJlbmRlcjphZnRlcl1bcmFmXVwiLCB0aGlzLmNpZCk7XG5cdFx0XHRcdFx0dGhpcy5za2lwVHJhbnNpdGlvbnMgPSBmYWxzZTtcblx0XHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJza2lwLXRyYW5zaXRpb25zXCIpO1xuXHRcdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImFwcC1pbml0aWFsXCIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHJvdXRlIGNoYW5nZWRcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X29uUm91dGU6IGZ1bmN0aW9uKG5hbWUsIGFyZ3MpIHtcblx0XHRjb25zb2xlLmluZm8oXCIlczo6X29uUm91dGUgJW8gLT4gJW9cIiwgdGhpcy5jaWQsIHRoaXMubW9kZWwuZ2V0KFwicm91dGVOYW1lXCIpLCBuYW1lKTtcblx0XHQvLyB2YXIgbyA9IF8uZGVmYXVsdHMoeyByb3V0ZU5hbWU6IG5hbWUgfSwgQXBwU3RhdGUucHJvdG90eXBlLmRlZmF1bHRzKTtcblx0XHR2YXIgbyA9IHtcblx0XHRcdHJvdXRlTmFtZTogbmFtZSxcblx0XHRcdGJ1bmRsZTogbnVsbCxcblx0XHRcdG1lZGlhOiBudWxsLFxuXHRcdFx0YXJ0aWNsZTogbnVsbCxcblx0XHRcdHBhZ2U6IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoKS5yZXBsYWNlKC9eKD8hXFwvKS8sIFwiL1wiKSxcblx0XHR9O1xuXHRcdHN3aXRjaCAobmFtZSkge1xuXHRcdFx0Y2FzZSBcIm1lZGlhLWl0ZW1cIjpcblx0XHRcdFx0by5idW5kbGUgPSBidW5kbGVzLnNlbGVjdGVkO1xuXHRcdFx0XHQvLyBvLndpdGhCdW5kbGUgPSB0cnVlO1xuXHRcdFx0XHRvLm1lZGlhID0gby5idW5kbGUubWVkaWEuc2VsZWN0ZWQ7XG5cdFx0XHRcdC8vIG8ud2l0aE1lZGlhID0gdHJ1ZTtcblx0XHRcdFx0by5jb2xsYXBzZWQgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJidW5kbGUtaXRlbVwiOlxuXHRcdFx0XHRvLmJ1bmRsZSA9IGJ1bmRsZXMuc2VsZWN0ZWQ7XG5cdFx0XHRcdC8vIG8ud2l0aEJ1bmRsZSA9IHRydWU7XG5cdFx0XHRcdG8uY29sbGFwc2VkID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJ0aWNsZS1pdGVtXCI6XG5cdFx0XHRcdG8uYXJ0aWNsZSA9IGFydGljbGVzLnNlbGVjdGVkO1xuXHRcdFx0XHQvLyBvLndpdGhBcnRpY2xlID0gdHJ1ZTtcblx0XHRcdFx0by5jb2xsYXBzZWQgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJidW5kbGUtbGlzdFwiOlxuXHRcdFx0Y2FzZSBcIm5vdGZvdW5kXCI6XG5cdFx0XHRjYXNlIFwicm9vdFwiOlxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0by5jb2xsYXBzZWQgPSBmYWxzZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6Ol9vblJvdXRlIGFyZ3M6ICVvXCIsIHRoaXMuY2lkLCBuYW1lLCBhcmdzKTtcblx0XHR0aGlzLm1vZGVsLnNldChvKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBtb2RlbCBjaGFuZ2VkXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9vbk1vZGVsQ2hhbmdlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoREVCVUcpIHtcblx0XHRcdGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodGhpcy5jaWQgKyBcIjo6X29uTW9kZWxDaGFuZ2VcIik7XG5cdFx0XHRjb25zb2xlLmdyb3VwQ29sbGFwc2VkKFwiY2hhbmdlc1wiKTtcblx0XHRcdE9iamVjdC5rZXlzKHRoaXMubW9kZWwuY2hhbmdlZEF0dHJpYnV0ZXMoKSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Y29uc29sZS5pbmZvKFwiJXM6Ol9vbk1vZGVsQ2hhbmdlICVzOiAlcyAtPiAlc1wiLCB0aGlzLmNpZCwga2V5LFxuXHRcdFx0XHRcdHRoaXMubW9kZWwucHJldmlvdXMoa2V5KSxcblx0XHRcdFx0XHR0aGlzLm1vZGVsLmdldChrZXkpKTtcblx0XHRcdH0sIHRoaXMpO1xuXG5cdFx0XHRbXCJBcnRpY2xlXCIsIFwiQnVuZGxlXCIsIFwiTWVkaWFcIl0uZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRcdHZhciBrZXkgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdGNvbnNvbGVbdGhpcy5oYXNDaGFuZ2VkKFwid2l0aFwiICsgbmFtZSkgPT0gdGhpcy5oYXNBbnlDaGFuZ2VkKGtleSkgPyBcImxvZ1wiIDogXCJ3YXJuXCJdLmNhbGwoY29uc29sZSwgXCIlczo6X29uTW9kZWxDaGFuZ2Ugd2l0aCVzOiAlbyB3aXRoJXNDaGFuZ2VkOiAlb1wiLCB0aGlzLmNpZCxcblx0XHRcdFx0XHRuYW1lLCB0aGlzLmhhcyhrZXkpLFxuXHRcdFx0XHRcdG5hbWUsIHRoaXMuaGFzQW55Q2hhbmdlZChrZXkpXG5cdFx0XHRcdCk7XG5cdFx0XHR9LCB0aGlzLm1vZGVsKTtcblx0XHRcdGNvbnNvbGUuZ3JvdXBFbmQoKTtcblxuXHRcdFx0dGhpcy5vbmNlKFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgZnVuY3Rpb24odmlldywgZmxhZ3MpIHtcblx0XHRcdFx0Y29uc29sZS5pbmZvKFwiJXM6Ol9vbk1vZGVsQ2hhbmdlIFt2aWV3OnJlbmRlcjphZnRlcl1cIiwgdmlldy5jaWQpO1xuXHRcdFx0XHRjb25zb2xlLmdyb3VwRW5kKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR0aGlzLnJlcXVlc3RSZW5kZXIoVmlldy5NT0RFTF9JTlZBTElEKTtcblx0XHQvLyB0aGlzLnJlcXVlc3RDaGlsZHJlblJlbmRlcihWaWV3Lk1PREVMX0lOVkFMSUQpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogcmVzaXplXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25SZXNpemU6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0Y29uc29sZS5ncm91cCh0aGlzLmNpZCArIFwiOjpfb25SZXNpemUgW2V2ZW50XVwiKTtcblx0XHR0aGlzLnNraXBUcmFuc2l0aW9ucyA9IHRydWU7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKFwic2tpcC10cmFuc2l0aW9uc1wiKTtcblxuXHRcdHRoaXMucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRClcblx0XHRcdC8vIC53aGVuUmVuZGVyZWQoKS50aGVuKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdC5vbmNlKFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgZnVuY3Rpb24odmlldywgZmxhZ3MpIHtcblx0XHRcdFx0Ly8gdGhpcy5yZXF1ZXN0Q2hpbGRyZW5SZW5kZXIoVmlldy5TSVpFX0lOVkFMSUQsIHRydWUpO1xuXHRcdFx0XHQvLyB0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5pbmZvKFwiJXM6Ol9vblJlc2l6ZSBbdmlldzpyZW5kZXI6YWZ0ZXJdW3JhZl1cIiwgdmlldy5jaWQpO1xuXHRcdFx0XHRcdHZpZXcuc2tpcFRyYW5zaXRpb25zID0gZmFsc2U7XG5cdFx0XHRcdFx0dmlldy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwic2tpcC10cmFuc2l0aW9uc1wiKTtcblx0XHRcdFx0XHR0aGlzLmVsLnNjcm9sbFRvcCA9IDE7XG5cdFx0XHRcdFx0Y29uc29sZS5ncm91cEVuZCgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSk7XG5cdFx0aWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50ID09PSBudWxsKSB0aGlzLnJlbmRlck5vdygpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogcmVuZGVyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRyZW5kZXJGcmFtZTogZnVuY3Rpb24odHN0YW1wLCBmbGFncykge1xuXHRcdGNvbnNvbGUubG9nKFwiJXM6OnJlbmRlckZyYW1lIFslc11cIiwgdGhpcy5jaWQsIFZpZXcuZmxhZ3NUb1N0cmluZyhmbGFncykpO1xuXG5cdFx0LyogbW9kZWw6IHNldCByb3V0ZSAmIG1vZGVsIGlkIGNsYXNzZXMgKi9cblx0XHRpZiAoZmxhZ3MgJiBWaWV3Lk1PREVMX0lOVkFMSUQpIHtcblx0XHRcdHRoaXMucmVuZGVyTW9kZWxDaGFuZ2UoZmxhZ3MpO1xuXHRcdH1cblxuXHRcdC8qIHNpemU6IGNoZWNrIGJyZWFrcG9pbnRzIGFuZCBzZXQgY2xhc3NlcyovXG5cdFx0aWYgKGZsYWdzICYgVmlldy5TSVpFX0lOVkFMSUQpIHtcblx0XHRcdF8uZWFjaChHbG9iYWxzLkJSRUFLUE9JTlRTLCBmdW5jdGlvbihvLCBzKSB7XG5cdFx0XHRcdHRoaXMudG9nZ2xlKHMsIG8ubWF0Y2hlcyk7XG5cdFx0XHR9LCB0aGlzLmJyZWFrcG9pbnRFbC5jbGFzc0xpc3QpO1xuXHRcdH1cblx0XHQvKiByZXF1ZXN0IGNoaWxkcmVuIHJlbmRlcjogIGFsd2F5cyByZW5kZXIgbm93ICovXG5cdFx0dGhpcy5yZXF1ZXN0Q2hpbGRyZW5SZW5kZXIoZmxhZ3MsIHRydWUpO1xuXHRcdC8qIHJlcXVlc3QgY2hpbGRyZW4gcmVuZGVyOiAgc2V0ICdub3cnIGZsYWcgaWYgc2l6ZSBpcyBpbnZhbGlkICovXG5cdFx0Ly8gdGhpcy5yZXF1ZXN0Q2hpbGRyZW5SZW5kZXIoZmxhZ3MsIGZsYWdzICYgVmlldy5TSVpFX0lOVkFMSUQpO1xuXG5cdFx0Ly8gaWYgKCh0aGlzLmVsLnNjcm9sbEhlaWdodCAtIDEpIDw9IHRoaXMuZWwuY2xpZW50SGVpZ2h0KSB7XG5cdFx0Ly8gXHR0aGlzLmVsLnNjcm9sbFRvcCA9IDE7XG5cdFx0Ly8gXHR0aGlzLmVsLnN0eWxlLm92ZXJmbG93WSA9IFwiaGlkZGVuXCI7XG5cdFx0Ly8gfSBlbHNlIHtcblx0XHQvLyBcdHRoaXMuZWwuc3R5bGUub3ZlcmZsb3dZID0gXCJcIjtcblx0XHQvLyB9XG5cdFx0Ly8gdGhpcy5uYXZpZ2F0aW9uVmlldy53aGVuUmVuZGVyZWQoKS50aGVuKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHQvLyBcdHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcIiVzOjpyZW5kZXJGcmFtZSBbcmFmXSBjc3M6JW8gdmFsOiVvXCIsXG5cdFx0Ly8gXHRcdFx0dGhpcy5jaWQsXG5cdFx0Ly8gXHRcdFx0dGhpcy5uYXZpZ2F0aW9uVmlldy5lbC5zdHlsZS5oZWlnaHQsXG5cdFx0Ly8gXHRcdFx0dGhpcy5uYXZpZ2F0aW9uVmlldy5lbC5zY3JvbGxIZWlnaHQsXG5cdFx0Ly8gXHRcdFx0dGhpcy5lbC5zY3JvbGxUb3AsXG5cdFx0Ly8gXHRcdFx0dGhpcy5lbC5zY3JvbGxIZWlnaHQgLSAxLFxuXHRcdC8vIFx0XHRcdHRoaXMuZWwuY2xpZW50SGVpZ2h0LFxuXHRcdC8vIFx0XHRcdCh0aGlzLmVsLnNjcm9sbEhlaWdodCAtIDEpIDw9IHRoaXMuZWwuY2xpZW50SGVpZ2h0LFxuXHRcdC8vIFx0XHRcdHRoaXMuZWwuc3R5bGUub3ZlcmZsb3dZXG5cdFx0Ly8gXHRcdCk7XG5cdFx0Ly8gXHR9KTtcblx0XHQvLyB9LmJpbmQodGhpcykpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogYm9keSBjbGFzc2VzIGV0Y1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0cmVuZGVyTW9kZWxDaGFuZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdGxldCBjbHMgPSB0aGlzLmVsLmNsYXNzTGlzdDtcblx0XHRsZXQgcHJldkF0dHIgPSBudWxsO1xuXHRcdGxldCBoYXNEYXJrQmcgPSBmYWxzZTtcblx0XHRsZXQgZG9jVGl0bGUgPSBbXTtcblxuXHRcdGRvY1RpdGxlLnB1c2goR2xvYmFscy5BUFBfTkFNRSk7XG5cdFx0aWYgKHRoaXMubW9kZWwuZ2V0KFwiYnVuZGxlXCIpKSB7XG5cdFx0XHRkb2NUaXRsZS5wdXNoKHN0cmlwVGFncyh0aGlzLm1vZGVsLmdldChcImJ1bmRsZVwiKS5nZXQoXCJuYW1lXCIpKSk7XG5cdFx0XHRpZiAodGhpcy5tb2RlbC5nZXQoXCJtZWRpYVwiKSkge1xuXHRcdFx0XHRkb2NUaXRsZS5wdXNoKHN0cmlwVGFncyh0aGlzLm1vZGVsLmdldChcIm1lZGlhXCIpLmdldChcIm5hbWVcIikpKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHRoaXMubW9kZWwuZ2V0KFwiYXJ0aWNsZVwiKSkge1xuXHRcdFx0ZG9jVGl0bGUucHVzaChzdHJpcFRhZ3ModGhpcy5tb2RlbC5nZXQoXCJhcnRpY2xlXCIpLmdldChcIm5hbWVcIikpKTtcblx0XHR9XG5cdFx0ZG9jVGl0bGUgPSBfLnVuZXNjYXBlKGRvY1RpdGxlLmpvaW4oXCIgLyBcIikpXG5cdFx0ZG9jdW1lbnQudGl0bGUgPSBkb2NUaXRsZTtcblxuXHRcdGlmICh3aW5kb3cuZ2EgJiYgd2luZG93LkdUQUdfSUQpIHtcblx0XHRcdHdpbmRvdy5nYSgnc2VuZCcsIHtcblx0XHRcdFx0J2hpdFR5cGUnOiAncGFnZXZpZXcnLFxuXHRcdFx0XHQncGFnZSc6IHRoaXMubW9kZWwuZ2V0KFwicGFnZVwiKSxcblx0XHRcdFx0J3RpdGxlJzogZG9jVGl0bGVcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qIFNldCByb3V0ZSBjbGFzcyAqL1xuXHRcdGlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJyb3V0ZU5hbWVcIikpIHtcblx0XHRcdHByZXZBdHRyID0gdGhpcy5tb2RlbC5wcmV2aW91cyhcImZyb21Sb3V0ZU5hbWVcIik7XG5cdFx0XHRpZiAocHJldkF0dHIpIHtcblx0XHRcdFx0Y2xzLnJlbW92ZShcImZyb20tcm91dGUtXCIgKyBwcmV2QXR0cik7XG5cdFx0XHR9XG5cdFx0XHRjbHMuYWRkKFwiZnJvbS1yb3V0ZS1cIiArIHRoaXMubW9kZWwuZ2V0KFwiZnJvbVJvdXRlTmFtZVwiKSk7XG5cblx0XHRcdHByZXZBdHRyID0gdGhpcy5tb2RlbC5wcmV2aW91cyhcInJvdXRlTmFtZVwiKTtcblx0XHRcdGlmIChwcmV2QXR0cikge1xuXHRcdFx0XHRjbHMucmVtb3ZlKFwicm91dGUtXCIgKyBwcmV2QXR0cik7XG5cdFx0XHRcdC8vIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwiZnJvbS1yb3V0ZVwiLCBwcmV2QXR0cik7XG5cdFx0XHR9XG5cdFx0XHQvLyB0aGlzLmVsLnNldEF0dHJpYnV0ZShcInRvLXJvdXRlXCIsIHRoaXMubW9kZWwuZ2V0KFwicm91dGVOYW1lXCIpKTtcblx0XHRcdGNscy5hZGQoXCJyb3V0ZS1cIiArIHRoaXMubW9kZWwuZ2V0KFwicm91dGVOYW1lXCIpKTtcblx0XHR9XG5cblx0XHQvKiBTZXQgbW9kZWwgaWQgY2xhc3NlcyBmb3IgY29sb3Igc3R5bGVzICovXG5cdFx0W1wiYXJ0aWNsZVwiLCBcImJ1bmRsZVwiLCBcIm1lZGlhXCJdLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzLm1vZGVsLmdldChwcm9wKTtcblx0XHRcdGlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQocHJvcCkpIHtcblx0XHRcdFx0cHJldkF0dHIgPSB0aGlzLm1vZGVsLnByZXZpb3VzKHByb3ApO1xuXHRcdFx0XHRpZiAocHJldkF0dHIpIHtcblx0XHRcdFx0XHRjbHMucmVtb3ZlKHByZXZBdHRyLmdldChcImRvbWlkXCIpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaXRlbSkge1xuXHRcdFx0XHRcdGNscy5hZGQoaXRlbS5nZXQoXCJkb21pZFwiKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNscy50b2dnbGUoXCJ3aXRoLVwiICsgcHJvcCwgISFpdGVtKTtcblx0XHRcdGNscy50b2dnbGUoXCJ3aXRob3V0LVwiICsgcHJvcCwgIWl0ZW0pO1xuXHRcdFx0aGFzRGFya0JnIHw9IChpdGVtICYmIGl0ZW0uY29sb3JzICYmIGl0ZW0uY29sb3JzLmhhc0RhcmtCZyk7XG5cdFx0fS5iaW5kKHRoaXMpKTtcblxuXHRcdC8qIGZsYWcgZGFyayBiYWNrZ3JvdW5kICovXG5cdFx0Y2xzLnRvZ2dsZShcImNvbG9yLWRhcmtcIiwgaGFzRGFya0JnKTtcblx0fSxcbn0sIHtcblx0Z2V0SW5zdGFuY2U6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghKHdpbmRvdy5hcHAgaW5zdGFuY2VvZiB0aGlzKSkge1xuXHRcdFx0d2luZG93LmFwcCA9IG5ldyh0aGlzKSh7XG5cdFx0XHRcdG1vZGVsOiBuZXcgQXBwU3RhdGUoKVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiB3aW5kb3cuYXBwO1xuXHR9XG59KTtcblxuaWYgKERFQlVHKSB7XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKEFwcFZpZXcpIHtcblx0XHQvKiogQHR5cGUge21vZHVsZTphcHAvZGVidWcvRGVidWdUb29sYmFyfSAqL1xuXHRcdHZhciBEZWJ1Z1Rvb2xiYXIgPSByZXF1aXJlKFwiYXBwL2RlYnVnL0RlYnVnVG9vbGJhclwiKTtcblxuXHRcdHJldHVybiBBcHBWaWV3LmV4dGVuZCh7XG5cdFx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHJldHZhbDtcblx0XHRcdFx0dmFyIHZpZXcgPSBuZXcgRGVidWdUb29sYmFyKHtcblx0XHRcdFx0XHRpZDogXCJkZWJ1Zy10b29sYmFyXCIsXG5cdFx0XHRcdFx0bW9kZWw6IHRoaXMubW9kZWxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodmlldy5yZW5kZXIoKS5lbCk7XG5cdFx0XHRcdHJldHZhbCA9IEFwcFZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0dGhpcy5fbG9nRmxhZ3NbXCJ2aWV3LnRyYWNlXCJdID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5uYXZpZ2F0aW9uVmlldy5fbG9nRmxhZ3NbXCJ2aWV3LnRyYWNlXCJdID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuIHJldHZhbDtcblx0XHRcdH0sXG5cdFx0fSlcblx0fSkobW9kdWxlLmV4cG9ydHMpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvQ29udGVudFZpZXdcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9HbG9iYWxzfSAqL1xuY29uc3QgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvVHJhbnNmb3JtSGVscGVyfSAqL1xuY29uc3QgVHJhbnNmb3JtSGVscGVyID0gcmVxdWlyZShcInV0aWxzL1RyYW5zZm9ybUhlbHBlclwiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVG91Y2hNYW5hZ2VyfSAqL1xuLy8gdmFyIFRvdWNoTWFuYWdlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL1RvdWNoTWFuYWdlclwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL2NvbnRyb2wvQ29udHJvbGxlcn0gKi9cbmNvbnN0IGNvbnRyb2xsZXIgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvQ29udHJvbGxlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb259ICovXG5jb25zdCBidW5kbGVzID0gcmVxdWlyZShcImFwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb25cIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9BcnRpY2xlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IGFydGljbGVzID0gcmVxdWlyZShcImFwcC9tb2RlbC9jb2xsZWN0aW9uL0FydGljbGVDb2xsZWN0aW9uXCIpO1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9CdW5kbGVJdGVtfSAqL1xuLy8gdmFyIEJ1bmRsZUl0ZW0gPSByZXF1aXJlKFwiYXBwL21vZGVsL2l0ZW0vQnVuZGxlSXRlbVwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3fSAqL1xuY29uc3QgVmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL1ZpZXdcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQXJ0aWNsZVZpZXd9ICovXG5jb25zdCBBcnRpY2xlVmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9jb21wb25lbnQvQXJ0aWNsZVZpZXdcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQ29sbGVjdGlvblN0YWNrfSAqL1xuY29uc3QgQ29sbGVjdGlvblN0YWNrID0gcmVxdWlyZShcImFwcC92aWV3L2NvbXBvbmVudC9Db2xsZWN0aW9uU3RhY2tcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQ29sbGVjdGlvblN0YWNrfSAqL1xuY29uc3QgU2VsZWN0YWJsZUxpc3RWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2NvbXBvbmVudC9TZWxlY3RhYmxlTGlzdFZpZXdcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9yZW5kZXIvRG90TmF2aWdhdGlvblJlbmRlcmVyfSAqL1xuY29uc3QgRG90TmF2aWdhdGlvblJlbmRlcmVyID0gcmVxdWlyZShcImFwcC92aWV3L3JlbmRlci9Eb3ROYXZpZ2F0aW9uUmVuZGVyZXJcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQ2Fyb3VzZWx9ICovXG5jb25zdCBDYXJvdXNlbCA9IHJlcXVpcmUoXCJhcHAvdmlldy9jb21wb25lbnQvQ2Fyb3VzZWxcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9DYXJvdXNlbFJlbmRlcmVyfSAqL1xuY29uc3QgQ2Fyb3VzZWxSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvQ2Fyb3VzZWxSZW5kZXJlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9JbWFnZVJlbmRlcmVyfSAqL1xuY29uc3QgSW1hZ2VSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvSW1hZ2VSZW5kZXJlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9WaWRlb1JlbmRlcmVyfSAqL1xuY29uc3QgVmlkZW9SZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvVmlkZW9SZW5kZXJlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9TZXF1ZW5jZVJlbmRlcmVyfSAqL1xuY29uc3QgU2VxdWVuY2VSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvU2VxdWVuY2VSZW5kZXJlclwiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9DYW52YXNQcm9ncmVzc01ldGVyfSAqL1xuLy8gdmFyIFByb2dyZXNzTWV0ZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvY29tcG9uZW50L0NhbnZhc1Byb2dyZXNzTWV0ZXJcIik7XG5cbi8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG5jb25zdCBjYXJvdXNlbEVtcHR5VGVtcGxhdGUgPSByZXF1aXJlKFwiLi90ZW1wbGF0ZS9DYXJvdXNlbC5FbXB0eVJlbmRlcmVyLkJ1bmRsZS5oYnNcIik7XG4vKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuY29uc3QgbWVkaWFTdGFja1RlbXBsYXRlID0gcmVxdWlyZShcIi4vdGVtcGxhdGUvQ29sbGVjdGlvblN0YWNrLk1lZGlhLmhic1wiKTtcblxuLy8gdmFyIHRyYW5zaXRpb25FbmQgPSBWaWV3LnByZWZpeGVkRXZlbnQoXCJ0cmFuc2l0aW9uZW5kXCIpO1xudmFyIHRyYW5zZm9ybVByb3AgPSBWaWV3LnByZWZpeGVkUHJvcGVydHkoXCJ0cmFuc2Zvcm1cIik7XG52YXIgdHJhbnNpdGlvblByb3AgPSBWaWV3LnByZWZpeGVkUHJvcGVydHkoXCJ0cmFuc2l0aW9uXCIpO1xuXG52YXIgdHggPSBHbG9iYWxzLnRyYW5zaXRpb25zO1xuXG5cbi8vIHZhciBjbGlja0V2ZW50ID0gd2luZG93Lmhhc093blByb3BlcnR5KFwib25wb2ludGVydXBcIikgPyBcInBvaW50ZXJ1cFwiIDogXCJtb3VzZXVwXCIsXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L0NvbnRlbnRWaWV3fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXcuZXh0ZW5kKHtcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNpZFByZWZpeDogXCJjb250ZW50Vmlld1wiLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0Y2xhc3NOYW1lOiBcImNvbnRhaW5lci1leHBhbmRlZFwiLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0ZXZlbnRzOiB7XG5cdFx0XCJ0cmFuc2l0aW9uZW5kIC5hZGRpbmctY2hpbGRcIjogXCJfb25BZGRlZFRyYW5zaXRpb25FbmRcIixcblx0XHRcInRyYW5zaXRpb25lbmQgLnJlbW92aW5nLWNoaWxkXCI6IFwiX29uUmVtb3ZlZFRyYW5zaXRpb25FbmRcIixcblx0XHQvLyBcInRyYW5zaXRpb25lbmRcIjogXCJfb25UcmFuc2l0aW9uRW5kXCIsXG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0Xy5iaW5kQWxsKHRoaXMsIFwiX29uVlBhblN0YXJ0XCIsIFwiX29uVlBhbk1vdmVcIiwgXCJfb25WUGFuRmluYWxcIiwgXCJfb25Db2xsYXBzZWRFdmVudFwiKTtcblxuXHRcdHRoaXMudHJhbnNmb3JtcyA9IG5ldyBUcmFuc2Zvcm1IZWxwZXIoKTtcblx0XHQvLyB0aGlzLnRvdWNoID0gb3B0aW9ucy50b3VjaCB8fCBuZXcgRXJyb3IoXCJubyB0b3VjaFwiKTsgLy9Ub3VjaE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblx0XHR0aGlzLnZwYW4gPSBvcHRpb25zLnZwYW4gfHwgbmV3IEVycm9yKFwibm8gdnBhblwiKTtcblx0XHR0aGlzLmhwYW4gPSBvcHRpb25zLmhwYW4gfHwgbmV3IEVycm9yKFwibm8gaHBhblwiKTtcblxuXHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJjaGFuZ2VcIiwgdGhpcy5fb25Nb2RlbENoYW5nZSk7XG5cblx0XHQvLyBkaXNjb25uZWN0IGNoaWxkcmVuIGJlZm9yZSBsYXN0IGNoYW5nZVxuXHRcdC8vIHRoaXMubGlzdGVuVG8oYnVuZGxlcywgXCJkZXNlbGVjdDpvbmVcIiwgdGhpcy5fb25EZXNlbGVjdE9uZUJ1bmRsZSk7XG5cblx0XHR0aGlzLnNraXBUcmFuc2l0aW9ucyA9IHRydWU7XG5cdFx0dGhpcy5pdGVtVmlld3MgPSBbXTtcblxuXHRcdC8vIHRoaXMucHJvZ3Jlc3NXcmFwcGVyID0gdGhpcy5jcmVhdGVQcm9ncmVzc1dyYXBwZXIoKSxcblx0XHQvLyB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMucHJvZ3Jlc3NXcmFwcGVyLmVsKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBSZW5kZXJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0cmVuZGVyRnJhbWU6IGZ1bmN0aW9uKHRzdGFtcCwgZmxhZ3MpIHtcblx0XHQvLyB2YWx1ZXNcblx0XHR2YXIgY29sbGFwc2VkID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0dmFyIGNvbGxhcHNlZENoYW5nZWQgPSAoZmxhZ3MgJiBWaWV3Lk1PREVMX0lOVkFMSUQpXG5cdFx0XHQmJiB0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJjb2xsYXBzZWRcIik7XG5cdFx0dmFyIGNoaWxkcmVuQ2hhbmdlZCA9IChmbGFncyAmIFZpZXcuTU9ERUxfSU5WQUxJRClcblx0XHRcdCYmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJidW5kbGVcIikgfHwgdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiYXJ0aWNsZVwiKSk7XG5cblx0XHQvLyBmbGFnc1xuXHRcdHZhciBzaXplQ2hhbmdlZCA9ICEhKGZsYWdzICYgVmlldy5TSVpFX0lOVkFMSUQpO1xuXHRcdHZhciB0cmFuc2Zvcm1zQ2hhbmdlZCA9ICEhKGZsYWdzICYgKFZpZXcuTU9ERUxfSU5WQUxJRCB8IFZpZXcuU0laRV9JTlZBTElEIHwgVmlldy5MQVlPVVRfSU5WQUxJRCkpO1xuXHRcdHRyYW5zZm9ybXNDaGFuZ2VkID0gdHJhbnNmb3Jtc0NoYW5nZWQgfHwgdGhpcy5fdHJhbnNmb3Jtc0NoYW5nZWQgfHwgdGhpcy5za2lwVHJhbnNpdGlvbnM7XG5cblx0XHQvLyBkZWJ1Z1xuXHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRcdC8vIGlmIChmbGFncyAmIFZpZXcuTU9ERUxfSU5WQUxJRCkge1xuXHRcdC8vIFx0Y29uc29sZS5ncm91cCh0aGlzLmNpZCArIFwiOjpyZW5kZXJGcmFtZSBtb2RlbCBjaGFuZ2VkOlwiKTtcblx0XHQvLyBcdE9iamVjdC5rZXlzKHRoaXMubW9kZWwuY2hhbmdlZCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coXCJcXHQlczogJXMgLT4gJXNcIiwga2V5LCB0aGlzLm1vZGVsLl9wcmV2aW91c0F0dHJpYnV0ZXNba2V5XSwgdGhpcy5tb2RlbC5jaGFuZ2VkW2tleV0pO1xuXHRcdC8vIFx0fSwgdGhpcyk7XG5cdFx0Ly8gXHRjb25zb2xlLmdyb3VwRW5kKCk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gbW9kZWw6Y2hpbGRyZW5cblx0XHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0XHRpZiAoY2hpbGRyZW5DaGFuZ2VkKSB7XG5cdFx0XHR0aGlzLnJlbW92ZUNoaWxkcmVuKCk7XG5cdFx0XHRpZiAoYnVuZGxlcy5zZWxlY3RlZCkge1xuXHRcdFx0XHR0aGlzLmNyZWF0ZUNoaWxkcmVuKGJ1bmRsZXMuc2VsZWN0ZWQpO1xuXHRcdFx0fSBlbHNlXG5cdFx0XHRpZiAoYXJ0aWNsZXMuc2VsZWN0ZWQpIHtcblx0XHRcdFx0dGhpcy5jcmVhdGVDaGlsZHJlbihhcnRpY2xlcy5zZWxlY3RlZCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gbW9kZWw6Y29sbGFwc2VkXG5cdFx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdFx0aWYgKGNvbGxhcHNlZENoYW5nZWQpIHtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImNvbnRhaW5lci1jb2xsYXBzZWRcIiwgY29sbGFwc2VkKTtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImNvbnRhaW5lci1leHBhbmRlZFwiLCAhY29sbGFwc2VkKTtcblx0XHR9XG5cblx0XHQvLyBzaXplXG5cdFx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdFx0aWYgKHNpemVDaGFuZ2VkKSB7XG5cdFx0XHR0aGlzLnRyYW5zZm9ybXMuY2xlYXJBbGxDYXB0dXJlcygpO1xuXHRcdH1cblxuXHRcdC8vIHRyYW5zZm9ybXNcblx0XHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0XHRpZiAodHJhbnNmb3Jtc0NoYW5nZWQpIHtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lci1jaGFuZ2luZ1wiKTtcblx0XHRcdGlmICh0aGlzLnNraXBUcmFuc2l0aW9ucykge1xuXHRcdFx0XHR0aGlzLnRyYW5zZm9ybXMuc3RvcEFsbFRyYW5zaXRpb25zKCk7XG5cdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lci1jaGFuZ2VkXCIpO1xuXHRcdFx0XHRpZiAoIWNoaWxkcmVuQ2hhbmdlZCkge1xuXHRcdFx0XHRcdC8vIHRoaXMudHJhbnNmb3Jtcy5jbGVhckFsbE9mZnNldHMoKTtcblx0XHRcdFx0XHRpZiAoY29sbGFwc2VkQ2hhbmdlZCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fc2V0Q2hpbGRyZW5FbmFibGVkKGNvbGxhcHNlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIWNoaWxkcmVuQ2hhbmdlZCkge1xuXHRcdFx0XHRcdGlmIChjb2xsYXBzZWRDaGFuZ2VkKSB7XG5cdFx0XHRcdFx0XHR2YXIgYWZ0ZXJUcmFuc2l0aW9uc0ZuO1xuXHRcdFx0XHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyLWNoYW5nZWRcIik7XG5cdFx0XHRcdFx0XHQvLyB0aGlzLnRyYW5zZm9ybXMuY2xlYXJBbGxPZmZzZXRzKCk7XG5cdFx0XHRcdFx0XHRpZiAoY29sbGFwc2VkKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGNvbnRhaW5lci1jb2xsYXBzZWQsIGVuYWJsZSBsYXN0XG5cdFx0XHRcdFx0XHRcdGFmdGVyVHJhbnNpdGlvbnNGbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX3NldENoaWxkcmVuRW5hYmxlZCh0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXItY2hhbmdlZFwiKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0dGhpcy50cmFuc2Zvcm1zLnJ1bkFsbFRyYW5zaXRpb25zKHR4LkxBU1QpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gY29udGFpbmVyLWV4cGFuZGVkLCBkaXNhYmxlIGZpcnN0XG5cdFx0XHRcdFx0XHRcdGFmdGVyVHJhbnNpdGlvbnNGbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lci1jaGFuZ2VkXCIpO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9zZXRDaGlsZHJlbkVuYWJsZWQoZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnRyYW5zZm9ybXMucnVuQWxsVHJhbnNpdGlvbnModHguRklSU1QpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YWZ0ZXJUcmFuc2l0aW9uc0ZuID0gYWZ0ZXJUcmFuc2l0aW9uc0ZuLmJpbmQodGhpcyk7XG5cdFx0XHRcdFx0XHR0aGlzLnRyYW5zZm9ybXMud2hlbkFsbFRyYW5zaXRpb25zRW5kKCkudGhlbihhZnRlclRyYW5zaXRpb25zRm4sIGFmdGVyVHJhbnNpdGlvbnNGbik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMudHJhbnNmb3Jtcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKG8pIHtcblx0XHRcdFx0XHRcdFx0aWYgKG8uaGFzT2Zmc2V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0by5ydW5UcmFuc2l0aW9uKHR4Lk5PVyk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gby5jbGVhck9mZnNldCgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICghY2hpbGRyZW5DaGFuZ2VkKSB7XG5cdFx0XHRcdHRoaXMudHJhbnNmb3Jtcy5jbGVhckFsbE9mZnNldHMoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMudHJhbnNmb3Jtcy52YWxpZGF0ZSgpO1xuXHRcdH1cblx0XHRpZiAoc2l6ZUNoYW5nZWQpIHtcblx0XHRcdHRoaXMuaXRlbVZpZXdzLmZvckVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHR2aWV3LnNraXBUcmFuc2l0aW9ucyA9IHRoaXMuc2tpcFRyYW5zaXRpb25zO1xuXHRcdFx0XHR2aWV3LnJlcXVlc3RSZW5kZXIoVmlldy5TSVpFX0lOVkFMSUQpLnJlbmRlck5vdygpO1xuXHRcdFx0fSwgdGhpcyk7XG5cdFx0XHQvKlByb21pc2UuYWxsKHRoaXMuaXRlbVZpZXdzLm1hcChmdW5jdGlvbih2aWV3KSB7XG5cdFx0XHRcdFx0dmlldy5za2lwVHJhbnNpdGlvbnMgPSB0aGlzLnNraXBUcmFuc2l0aW9ucztcblx0XHRcdFx0XHRyZXR1cm4gdmlldy5yZXF1ZXN0UmVuZGVyKFZpZXcuU0laRV9JTlZBTElEKS53aGVuUmVuZGVyZWQoKTtcblx0XHRcdFx0fSwgdGhpcykpXG5cdFx0XHRcdC50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKHZpZXdzKSB7XG5cdFx0XHRcdFx0XHR2YXIgbmggPSB0aGlzLmVsLm9mZnNldFBhcmVudC5vZmZzZXRIZWlnaHQgLSB0aGlzLmVsLm9mZnNldFRvcDtcblx0XHRcdFx0XHRcdC8vIHZhciBvaCA9IHZpZXdzLnJlZHVjZShmdW5jdGlvbihoLCB2aWV3KSB7XG5cdFx0XHRcdFx0XHQvLyBcdHJldHVybiBNYXRoLm1heChoLCB2aWV3LmVsLm9mZnNldEhlaWdodCk7XG5cdFx0XHRcdFx0XHQvLyB9LCBuaCk7XG5cdFx0XHRcdFx0XHQvLyBvaCsrO1xuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczpbd2hlblJlbmRlcmVkXSBbcmVzdWx0OiAlcyAlc10gJW9cIiwgdGhpcy5jaWQsXG5cdFx0XHRcdFx0XHQvLyBcdG5oLCBvaCwgdGhpcy5lbC5wYXJlbnQsIHZpZXdzKTtcblx0XHRcdFx0XHRcdHRoaXMuZWwuc3R5bGUubWluSGVpZ2h0ID0gbmggKyBcInB4XCI7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmlld3M7XG5cdFx0XHRcdFx0fS5iaW5kKHRoaXMpLFxuXHRcdFx0XHRcdGZ1bmN0aW9uKHJlYXNvbikge1xuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiJXM6W3doZW5SZW5kZXJlZF0gW3JlamVjdGVkXSAlb1wiLCB0aGlzLmNpZCwgcmVhc29uKTtcblx0XHRcdFx0XHRcdHJldHVybiByZWFzb247XG5cdFx0XHRcdFx0fS5iaW5kKHRoaXMpXG5cdFx0XHRcdCk7Ki9cblx0XHR9XG5cdFx0dGhpcy5za2lwVHJhbnNpdGlvbnMgPSB0aGlzLl90cmFuc2Zvcm1zQ2hhbmdlZCA9IGZhbHNlO1xuXHR9LFxuXG5cdF9zZXRDaGlsZHJlbkVuYWJsZWQ6IGZ1bmN0aW9uKGVuYWJsZWQpIHtcblx0XHQvLyBpZiAoZW5hYmxlZCkge1xuXHRcdC8vIFx0dGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fb25Db2xsYXBzZWRDbGljaywgZmFsc2UpO1xuXHRcdC8vIH0gZWxzZSB7XG5cdFx0Ly8gXHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9vbkNvbGxhcHNlZENsaWNrLCBmYWxzZSk7XG5cdFx0Ly8gfVxuXHRcdHRoaXMuaXRlbVZpZXdzLmZvckVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0dmlldy5zZXRFbmFibGVkKGVuYWJsZWQpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogQ29sbGFwc2UgVUkgZ2VzdHVyZXMvZXZlbnRzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25Db2xsYXBzZWRFdmVudDogZnVuY3Rpb24oZXYpIHtcblx0XHRjb25zb2xlLmxvZyhcIiVzOlslcyAtPiBfb25Db2xsYXBzZWRFdmVudF0gdGFyZ2V0OiAlc1wiLCB0aGlzLmNpZCwgZXYudHlwZSwgZXYudGFyZ2V0KTtcblx0XHRpZiAoIWV2LmRlZmF1bHRQcmV2ZW50ZWQgJiZcblx0XHRcdHRoaXMubW9kZWwuaGFzKFwiYnVuZGxlXCIpICYmXG5cdFx0XHQhdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikgJiZcblx0XHRcdCF0aGlzLmVuYWJsZWQpIHtcblx0XHRcdC8vIHRoaXMuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gaWYgKGV2LnR5cGUgPT0gXCJjbGlja1wiKSBldi5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gaWYgKGV2LnR5cGUgPT0gXCJjbGlja1wiKSBldi5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dGhpcy5tb2RlbC5zZXQoXCJjb2xsYXBzZWRcIiwgdHJ1ZSk7XG5cdFx0XHR9KTtcblx0XHRcdC8vIH0pO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBtb2RlbCBjaGFuZ2VkXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9vbk1vZGVsQ2hhbmdlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5tb2RlbC5oYXNBbnlDaGFuZ2VkKFwiYnVuZGxlXCIpKSB7XG5cdFx0XHRpZiAodGhpcy5tb2RlbC5oYXMoXCJidW5kbGVcIikpIHtcblx0XHRcdFx0dGhpcy52cGFuLm9uKFwidnBhbnN0YXJ0XCIsIHRoaXMuX29uVlBhblN0YXJ0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMudnBhbi5vZmYoXCJ2cGFuc3RhcnRcIiwgdGhpcy5fb25WUGFuU3RhcnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvKlxuXHRcdGlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJ3aXRoQnVuZGxlXCIpIHx8XG5cdFx0XHR0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJjb2xsYXBzZWRcIikpIHtcblx0XHRcdGlmICh0aGlzLm1vZGVsLmdldChcIndpdGhCdW5kbGVcIikgJiZcblx0XHRcdFx0IXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHRcdHRoaXMuaHBhbi5vbihcImhwYW5sZWZ0IGhwYW5yaWdodFwiLCB0aGlzLl9vbkNvbGxhcHNlZEV2ZW50KTtcblx0XHRcdFx0dGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFZpZXcuQ0xJQ0tfRVZFTlQsIHRoaXMuX29uQ29sbGFwc2VkRXZlbnQsIGZhbHNlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuaHBhbi5vZmYoXCJocGFubGVmdCBocGFucmlnaHRcIiwgdGhpcy5fb25Db2xsYXBzZWRFdmVudCk7XG5cdFx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihWaWV3LkNMSUNLX0VWRU5ULCB0aGlzLl9vbkNvbGxhcHNlZEV2ZW50LCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdCovXG5cdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKFZpZXcuTU9ERUxfSU5WQUxJRCk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBWZXJ0aWNhbCB0b3VjaC9tb3ZlIChfb25WUGFuKilcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9jb2xsYXBzZWRPZmZzZXRZOiBHbG9iYWxzLkNPTExBUFNFX09GRlNFVCxcblxuXHRfb25WUGFuU3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy52cGFuLm9uKFwidnBhbm1vdmVcIiwgdGhpcy5fb25WUGFuTW92ZSk7XG5cdFx0dGhpcy52cGFuLm9uKFwidnBhbmVuZCB2cGFuY2FuY2VsXCIsIHRoaXMuX29uVlBhbkZpbmFsKTtcblxuXHRcdHRoaXMudHJhbnNmb3Jtcy5zdG9wQWxsVHJhbnNpdGlvbnMoKTtcblx0XHQvLyB0aGlzLnRyYW5zZm9ybXMuY2xlYXJBbGxPZmZzZXRzKCk7XG5cdFx0Ly8gdGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdFx0dGhpcy50cmFuc2Zvcm1zLmNsZWFyQWxsQ2FwdHVyZXMoKTtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5lci1jaGFuZ2luZ1wiKTtcblx0XHR0aGlzLl9vblZQYW5Nb3ZlKGV2KTtcblx0fSxcblxuXHRfb25WUGFuTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHR2YXIgY29sbGFwc2VkID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0dmFyIGRlbHRhID0gZXYuZGVsdGFZOyAvL2V2LnRocmVzaG9sZERlbHRhWTtcblx0XHR2YXIgbWF4RGVsdGEgPSB0aGlzLl9jb2xsYXBzZWRPZmZzZXRZOyAvLyArIE1hdGguYWJzKGV2LnRocmVzaG9sZE9mZnNldFkpO1xuXG5cdFx0Ly8gY2hlY2sgaWYgZGlyZWN0aW9uIGlzIGFsaWduZWQgd2l0aCBjb2xsYXBzZWQvZXhwYW5kXG5cdFx0dmFyIGlzVmFsaWREaXIgPSBjb2xsYXBzZWQgPyAoZGVsdGEgPiAwKSA6IChkZWx0YSA8IDApO1xuXHRcdHZhciBtb3ZlRmFjdG9yID0gY29sbGFwc2VkID8gR2xvYmFscy5WUEFOX0RSQUcgOiAxIC0gR2xvYmFscy5WUEFOX0RSQUc7XG5cblx0XHRkZWx0YSA9IE1hdGguYWJzKGRlbHRhKTsgLy8gcmVtb3ZlIHNpZ25cblx0XHRkZWx0YSAqPSBtb3ZlRmFjdG9yO1xuXHRcdG1heERlbHRhICo9IG1vdmVGYWN0b3I7XG5cblx0XHRpZiAoaXNWYWxpZERpcikge1xuXHRcdFx0aWYgKGRlbHRhID4gbWF4RGVsdGEpIHsgLy8gb3ZlcnNob290aW5nXG5cdFx0XHRcdGRlbHRhID0gKChkZWx0YSAtIG1heERlbHRhKSAqIEdsb2JhbHMuVlBBTl9PVVRfRFJBRykgKyBtYXhEZWx0YTtcblx0XHRcdH0gZWxzZSB7IC8vIG5vIG92ZXJzaG9vdGluZ1xuXHRcdFx0XHQvLyBkZWx0YSA9IGRlbHRhO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkZWx0YSA9ICgtZGVsdGEpICogR2xvYmFscy5WUEFOX09VVF9EUkFHOyAvLyBkZWx0YSBpcyBvcHBvc2l0ZVxuXHRcdH1cblx0XHRkZWx0YSAqPSBjb2xsYXBzZWQgPyAxIDogLTE7IC8vIHJlYXBwbHkgc2lnblxuXG5cdFx0dGhpcy50cmFuc2Zvcm1zLm9mZnNldEFsbCgwLCBkZWx0YSk7XG5cdFx0dGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdH0sXG5cblx0X29uVlBhbkZpbmFsOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMudnBhbi5vZmYoXCJ2cGFubW92ZVwiLCB0aGlzLl9vblZQYW5Nb3ZlKTtcblx0XHR0aGlzLnZwYW4ub2ZmKFwidnBhbmVuZCB2cGFuY2FuY2VsXCIsIHRoaXMuX29uVlBhbkZpbmFsKTtcblxuXHRcdC8vIEZJWE1FOiBtb2RlbC5jb2xsYXBzZWQgbWF5IGhhdmUgYWxyZWFkeSBjaGFuZ2VkLCBfb25WUGFuTW92ZSB3b3VsZCBydW4gd2l0aCB3cm9uZyB2YWx1ZXM6XG5cdFx0Ly8gbW9kZWwuY29sbGFwc2VkIGlzIGNoYW5nZWQgaW4gYSBzZXRJbW1lZGlhdGUgY2FsbGJhY2sgZnJvbSBOYXZpZ2F0aW9uVmlldy5cblxuXHRcdHRoaXMuX29uVlBhbk1vdmUoZXYpO1xuXHRcdHRoaXMuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fdHJhbnNmb3Jtc0NoYW5nZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKCk7XG5cdFx0fSk7XG5cdH0sXG5cblx0Ly8gd2lsbENvbGxhcHNlZENoYW5nZTogZnVuY3Rpb24oZXYpIHtcblx0Ly8gXHR2YXIgY29sbGFwc2VkID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdC8vIFx0cmV0dXJuIGV2LnR5cGUgPT0gXCJ2cGFuZW5kXCI/IGNvbGxhcHNlZD9cblx0Ly8gXHRcdGV2LnRocmVzaG9sZERlbHRhWSA+IEdsb2JhbHMuQ09MTEFQU0VfVEhSRVNIT0xEIDpcblx0Ly8gXHRcdGV2LnRocmVzaG9sZERlbHRhWSA8IC1HbG9iYWxzLkNPTExBUFNFX1RIUkVTSE9MRCA6XG5cdC8vIFx0XHRmYWxzZTtcblx0Ly8gfSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIGNyZWF0ZS9yZW1vdmUgY2hpbGRyZW4gb24gYnVuZGxlIHNlbGVjdGlvblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIENyZWF0ZSBjaGlsZHJlbiBvbiBidW5kbGUgc2VsZWN0ICovXG5cdGNyZWF0ZUNoaWxkcmVuOiBmdW5jdGlvbihtb2RlbCkge1xuXHRcdHZhciB2aWV3O1xuXHRcdGlmIChtb2RlbC5fX3Byb3RvX18uY29uc3RydWN0b3IgPT09IGJ1bmRsZXMubW9kZWwpIHtcblx0XHRcdC8vIHdpbGwgYmUgYXR0YWNoZWQgdG8gZG9tIGluIHRoaXMgb3JkZXJcblx0XHRcdHZpZXcgPSB0aGlzLmNyZWF0ZU1lZGlhQ2FwdGlvblN0YWNrKG1vZGVsKTtcblx0XHRcdHRoaXMuaXRlbVZpZXdzLnB1c2godmlldyk7XG5cdFx0XHR0aGlzLnRyYW5zZm9ybXMuYWRkKHZpZXcuZWwpO1xuXHRcdFx0dmlldyA9IHRoaXMuY3JlYXRlTWVkaWFDYXJvdXNlbChtb2RlbCk7XG5cdFx0XHR0aGlzLml0ZW1WaWV3cy5wdXNoKHZpZXcpO1xuXHRcdFx0dGhpcy50cmFuc2Zvcm1zLmFkZCh2aWV3LmVsKTtcblx0XHRcdHZpZXcgPSB0aGlzLmNyZWF0ZU1lZGlhRG90TmF2aWdhdGlvbihtb2RlbCk7XG5cdFx0XHR0aGlzLml0ZW1WaWV3cy5wdXNoKHZpZXcpO1xuXHRcdH0gZWxzZVxuXHRcdGlmIChtb2RlbC5fX3Byb3RvX18uY29uc3RydWN0b3IgPT09IGFydGljbGVzLm1vZGVsKSB7XG5cdFx0XHR2aWV3ID0gdGhpcy5jcmVhdGVBcnRpY2xlVmlldyhtb2RlbCk7XG5cdFx0XHR0aGlzLml0ZW1WaWV3cy5wdXNoKHZpZXcpO1xuXHRcdH1cblxuXHRcdHRoaXMuaXRlbVZpZXdzLmZvckVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0aWYgKCF0aGlzLnNraXBUcmFuc2l0aW9ucykge1xuXHRcdFx0XHR2aWV3LmVsLmNsYXNzTGlzdC5hZGQoXCJhZGRpbmctY2hpbGRcIik7XG5cdFx0XHRcdHZpZXcuZWwuc3R5bGUub3BhY2l0eSA9IDA7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmVsLmFwcGVuZENoaWxkKHZpZXcuZWwpO1xuXHRcdFx0dmlldy5yZW5kZXIoKTtcblx0XHR9LCB0aGlzKTtcblxuXHRcdGlmICghdGhpcy5za2lwVHJhbnNpdGlvbnMpIHtcblx0XHRcdHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIiVzOjpjcmVhdGVDaGlsZHJlbjo6W2NhbGxiYWNrOnJlcXVlc3RBbmltYXRpb25GcmFtZV1cIiwgdGhpcy5jaWQpO1xuXHRcdFx0XHR0aGlzLml0ZW1WaWV3cy5mb3JFYWNoKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuc2tpcFRyYW5zaXRpb25zKSB7XG5cdFx0XHRcdFx0XHR2aWV3LmVsLnN0eWxlW3RyYW5zaXRpb25Qcm9wXSA9IFwib3BhY2l0eSBcIiArIHR4LkxBU1QuY3NzVGV4dDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dmlldy5lbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcIm9wYWNpdHlcIik7XG5cdFx0XHRcdH0sIHRoaXMpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdHJlbW92ZUNoaWxkcmVuOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLml0ZW1WaWV3cy5mb3JFYWNoKGZ1bmN0aW9uKHZpZXcsIGksIGFycikge1xuXHRcdFx0dGhpcy50cmFuc2Zvcm1zLnJlbW92ZSh2aWV3LmVsKTtcblx0XHRcdGlmICh0aGlzLnNraXBUcmFuc2l0aW9ucykge1xuXHRcdFx0XHR2aWV3LnJlbW92ZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIHMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh2aWV3LmVsKTtcblx0XHRcdFx0aWYgKHMub3BhY2l0eSA9PSBcIjBcIiB8fCBzLnZpc2liaWxpdHkgPT0gXCJoaWRkZW5cIikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6OnJlbW92ZUNoaWxkcmVuIFt2aWV3OiVzXSByZW1vdmVkIGltbWVkaWF0ZWx5IChpbnZpc2libGUpXCIsIHRoaXMuY2lkLCB2aWV3LmNpZCk7XG5cdFx0XHRcdFx0dmlldy5yZW1vdmUoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2aWV3LmVsLmNsYXNzTGlzdC5hZGQoXCJyZW1vdmluZy1jaGlsZFwiKTtcblx0XHRcdFx0XHRpZiAoc1t0cmFuc2Zvcm1Qcm9wXSkgdmlldy5lbC5zdHlsZVt0cmFuc2Zvcm1Qcm9wXSA9IHNbdHJhbnNmb3JtUHJvcF07XG5cdFx0XHRcdFx0dmlldy5lbC5zdHlsZVt0cmFuc2l0aW9uUHJvcF0gPSBcIm9wYWNpdHkgXCIgKyB0eC5GSVJTVC5jc3NUZXh0O1xuXHRcdFx0XHRcdHZpZXcuZWwuc3R5bGUub3BhY2l0eSA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGFycltpXSA9IG51bGw7XG5cdFx0fSwgdGhpcyk7XG5cdFx0dGhpcy5pdGVtVmlld3MubGVuZ3RoID0gMDtcblx0fSxcblxuXHRfb25BZGRlZFRyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKGV2LnRhcmdldC5jaWQgJiYgdGhpcy5jaGlsZFZpZXdzLmhhc093blByb3BlcnR5KGV2LnRhcmdldC5jaWQpKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25BZGRlZFRyYW5zaXRpb25FbmQgW3ZpZXc6JXNdIFtwcm9wOiVzXSBbZXY6JXNdXCIsIHRoaXMuY2lkLCBldi50YXJnZXQuY2lkLCBldi5wcm9wZXJ0eU5hbWUsIGV2LnR5cGUpO1xuXHRcdFx0dmFyIHZpZXcgPSB0aGlzLmNoaWxkVmlld3NbZXYudGFyZ2V0LmNpZF07XG5cdFx0XHR2aWV3LmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmctY2hpbGRcIik7XG5cdFx0XHR2aWV3LmVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KHRyYW5zaXRpb25Qcm9wKTtcblx0XHR9XG5cdH0sXG5cblx0X29uUmVtb3ZlZFRyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0aWYgKGV2LnRhcmdldC5jaWQgJiYgdGhpcy5jaGlsZFZpZXdzLmhhc093blByb3BlcnR5KGV2LnRhcmdldC5jaWQpKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25SZW1vdmVkVHJhbnNpdGlvbkVuZCBbdmlldzolc10gW3Byb3A6JXNdIFtldjolc11cIiwgdGhpcy5jaWQsIGV2LnRhcmdldC5jaWQsIGV2LnByb3BlcnR5TmFtZSwgZXYudHlwZSk7XG5cdFx0XHR2YXIgdmlldyA9IHRoaXMuY2hpbGRWaWV3c1tldi50YXJnZXQuY2lkXTtcblx0XHRcdHZpZXcuZWwuY2xhc3NMaXN0LnJlbW92ZShcInJlbW92aW5nLWNoaWxkXCIpO1xuXHRcdFx0dmlldy5yZW1vdmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gcHVyZ2VDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdC8vIFx0dmFyIGksIGVsLCBlbHMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZpbmctY2hpbGRcIik7XG5cdC8vIFx0Zm9yIChpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuXHQvLyBcdFx0ZWwgPSBlbHMuaXRlbShpKTtcblx0Ly8gXHRcdGlmIChlbC5wYXJlbnRFbGVtZW50ID09PSB0aGlzLmVsKSB7XG5cdC8vIFx0XHRcdHRyeSB7XG5cdC8vIFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIiVzOjpwdXJnZUNoaWxkcmVuXCIsIHRoaXMuY2lkLCBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNpZFwiKSk7XG5cdC8vIFx0XHRcdFx0Vmlldy5maW5kQnlFbGVtZW50KGVsKS5yZW1vdmUoKTtcblx0Ly8gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdC8vIFx0XHRcdFx0Y29uc29sZS5lcnJvcihcInM6OnB1cmdlQ2hpbGRyZW5cIiwgdGhpcy5jaWQsIFwib3JwaGFuZWQgZWxlbWVudFwiLCBlcnIpO1xuXHQvLyBcdFx0XHRcdHRoaXMuZWwucmVtb3ZlQ2hpbGQoZWwpO1xuXHQvLyBcdFx0XHR9XG5cdC8vIFx0XHR9XG5cdC8vIFx0fVxuXHQvLyB9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogQ29tcG9uZW50c1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxuXHQvKipcblx0ICogbWVkaWEtY2Fyb3VzZWxcblx0ICovXG5cdGNyZWF0ZU1lZGlhQ2Fyb3VzZWw6IGZ1bmN0aW9uKGJ1bmRsZSkge1xuXHRcdC8vIENyZWF0ZSBjYXJvdXNlbFxuXHRcdHZhciBFbXB0eVJlbmRlcmVyID0gQ2Fyb3VzZWxSZW5kZXJlci5leHRlbmQoe1xuXHRcdFx0Y2xhc3NOYW1lOiBcImNhcm91c2VsLWl0ZW0gZW1wdHktaXRlbVwiLFxuXHRcdFx0bW9kZWw6IGJ1bmRsZSxcblx0XHRcdHRlbXBsYXRlOiBjYXJvdXNlbEVtcHR5VGVtcGxhdGUsXG5cdFx0fSk7XG5cdFx0dmFyIHJlbmRlcmVyRnVuY3Rpb24gPSBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyKSB7XG5cdFx0XHRpZiAoaW5kZXggPT09IC0xKSB7XG5cdFx0XHRcdHJldHVybiBFbXB0eVJlbmRlcmVyO1xuXHRcdFx0fVxuXHRcdFx0c3dpdGNoIChpdGVtLmF0dHIoXCJAcmVuZGVyZXJcIikpIHtcblx0XHRcdFx0Y2FzZSBcInZpZGVvXCI6XG5cdFx0XHRcdFx0cmV0dXJuIFZpZGVvUmVuZGVyZXI7XG5cdFx0XHRcdGNhc2UgXCJzZXF1ZW5jZVwiOlxuXHRcdFx0XHRcdHJldHVybiBTZXF1ZW5jZVJlbmRlcmVyO1xuXHRcdFx0XHRjYXNlIFwiaW1hZ2VcIjpcblx0XHRcdFx0XHRyZXR1cm4gSW1hZ2VSZW5kZXJlcjtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRyZXR1cm4gSW1hZ2VSZW5kZXJlcjtcblx0XHRcdH1cblx0XHR9O1xuXHRcdHZhciB2aWV3ID0gbmV3IENhcm91c2VsKHtcblx0XHRcdGNsYXNzTmFtZTogXCJtZWRpYS1jYXJvdXNlbCBcIiArIGJ1bmRsZS5nZXQoXCJkb21pZFwiKSxcblx0XHRcdGNvbGxlY3Rpb246IGJ1bmRsZS5nZXQoXCJtZWRpYVwiKSxcblx0XHRcdHJlbmRlcmVyRnVuY3Rpb246IHJlbmRlcmVyRnVuY3Rpb24sXG5cdFx0XHRyZXF1aXJlU2VsZWN0aW9uOiAhIShidW5kbGUuYXR0cihcIkBuby1kZXNjXCIpKSxcblx0XHRcdC8vIGRpcmVjdGlvbjogQ2Fyb3VzZWwuRElSRUNUSU9OX0hPUklaT05UQUwsXG5cdFx0XHR0b3VjaDogdGhpcy5ocGFuLFxuXHRcdH0pO1xuXHRcdGNvbnRyb2xsZXIubGlzdGVuVG8odmlldywge1xuXHRcdFx0XCJ2aWV3OnNlbGVjdDpvbmVcIjogKG1vZGVsKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6W3ZpZXc6c2VsZWN0Om9uZV0gJXNcIiwgdmlldy5jaWQsIG1vZGVsLmNpZCk7XG5cdFx0XHRcdGNvbnRyb2xsZXIuc2VsZWN0TWVkaWEobW9kZWwpO1xuXHRcdFx0fSxcblx0XHRcdFwidmlldzpzZWxlY3Q6bm9uZVwiOiBjb250cm9sbGVyLmRlc2VsZWN0TWVkaWEsXG5cdFx0XHQvLyBcInZpZXc6cmVtb3ZlZFwiOiBjb250cm9sbGVyLnN0b3BMaXN0ZW5pbmdcblx0XHR9KTtcblx0XHR2aWV3Lmxpc3RlblRvKGJ1bmRsZSwgXCJkZXNlbGVjdGVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5zdG9wTGlzdGVuaW5nKHRoaXMuY29sbGVjdGlvbik7XG5cdFx0XHRjb250cm9sbGVyLnN0b3BMaXN0ZW5pbmcodGhpcyk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0LyoqXG5cdCAqIG1lZGlhLWNhcHRpb24tc3RhY2tcblx0ICovXG5cdGNyZWF0ZU1lZGlhQ2FwdGlvblN0YWNrOiBmdW5jdGlvbihidW5kbGUpIHtcblx0XHR2YXIgdmlldyA9IG5ldyBDb2xsZWN0aW9uU3RhY2soe1xuXHRcdFx0Y2xhc3NOYW1lOiBcIm1lZGlhLWNhcHRpb24tc3RhY2tcIixcblx0XHRcdGNvbGxlY3Rpb246IGJ1bmRsZS5nZXQoXCJtZWRpYVwiKSxcblx0XHRcdHRlbXBsYXRlOiBtZWRpYVN0YWNrVGVtcGxhdGVcblx0XHR9KTtcblx0XHR2aWV3Lmxpc3RlblRvKGJ1bmRsZSwgXCJkZXNlbGVjdGVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5zdG9wTGlzdGVuaW5nKHRoaXMuY29sbGVjdGlvbik7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0LyoqXG5cdCAqIG1lZGlhLWRvdG5hdlxuXHQgKi9cblx0Y3JlYXRlTWVkaWFEb3ROYXZpZ2F0aW9uOiBmdW5jdGlvbihidW5kbGUpIHtcblx0XHR2YXIgdmlldyA9IG5ldyBTZWxlY3RhYmxlTGlzdFZpZXcoe1xuXHRcdFx0Y2xhc3NOYW1lOiBcIm1lZGlhLWRvdG5hdiBkb3RzLWZvbnRmYWNlIGNvbG9yLWZnMDVcIixcblx0XHRcdGNvbGxlY3Rpb246IGJ1bmRsZS5nZXQoXCJtZWRpYVwiKSxcblx0XHRcdHJlbmRlcmVyOiBEb3ROYXZpZ2F0aW9uUmVuZGVyZXJcblx0XHR9KTtcblx0XHRjb250cm9sbGVyLmxpc3RlblRvKHZpZXcsIHtcblx0XHRcdFwidmlldzpzZWxlY3Q6b25lXCI6IGNvbnRyb2xsZXIuc2VsZWN0TWVkaWEsXG5cdFx0XHRcInZpZXc6c2VsZWN0Om5vbmVcIjogY29udHJvbGxlci5kZXNlbGVjdE1lZGlhLFxuXHRcdFx0Ly8gXCJ2aWV3OnJlbW92ZWRcIjogY29udHJvbGxlci5zdG9wTGlzdGVuaW5nXG5cdFx0fSk7XG5cdFx0dmlldy5saXN0ZW5UbyhidW5kbGUsIFwiZGVzZWxlY3RlZFwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLmNvbGxlY3Rpb24pO1xuXHRcdFx0Y29udHJvbGxlci5zdG9wTGlzdGVuaW5nKHRoaXMpO1xuXHRcdH0pO1xuXHRcdHJldHVybiB2aWV3O1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBAcGFyYW0gZWwge21vZHVsZTphcHAvbW9kZWwvaXRlbS9BcnRpY2xlVmlld31cblx0ICogQHJldHVybiB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld31cblx0ICovXG5cdGNyZWF0ZUFydGljbGVWaWV3OiBmdW5jdGlvbihhcnRpY2xlKSB7XG5cdFx0dmFyIHZpZXcgPSBuZXcgQXJ0aWNsZVZpZXcoe1xuXHRcdFx0bW9kZWw6IGFydGljbGUsXG5cdFx0fSk7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0Ly8gY3JlYXRlUHJvZ3Jlc3NXcmFwcGVyOiBmdW5jdGlvbigpIHtcblx0Ly8gXHQvLyB2YXIgdmlldyA9IG5ldyBQcm9ncmVzc01ldGVyKHtcblx0Ly8gXHQvLyBcdGlkOiBcIm1lZGlhLXByb2dyZXNzLXdyYXBwZXJcIixcblx0Ly8gXHQvLyBcdC8vIGNsYXNzTmFtZTogXCJjb2xvci1iZyBjb2xvci1mZzA1XCIsXG5cdC8vIFx0Ly8gXHR1c2VPcGFxdWU6IGZhbHNlLFxuXHQvLyBcdC8vIFx0bGFiZWxGbjogZnVuY3Rpb24oKSB7IHJldHVybiBcIjAlXCI7IH1cblx0Ly8gXHQvLyB9KTtcblx0Ly8gXHQvLyB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMucHJvZ3Jlc3NXcmFwcGVyLmVsKTtcblx0Ly8gXHQvLyByZXR1cm4gdmlldztcblx0Ly8gXHRyZXR1cm4gbnVsbDtcblx0Ly8gfSxcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvTmF2aWdhdGlvblZpZXdcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTpoYW1tZXJqc30gKi9cbmNvbnN0IEhhbW1lciA9IHJlcXVpcmUoXCJoYW1tZXJqc1wiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL2NvbnRyb2wvR2xvYmFsc30gKi9cbmNvbnN0IEdsb2JhbHMgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL1RyYW5zZm9ybUhlbHBlcn0gKi9cbmNvbnN0IFRyYW5zZm9ybUhlbHBlciA9IHJlcXVpcmUoXCJ1dGlscy9UcmFuc2Zvcm1IZWxwZXJcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1RvdWNoTWFuYWdlcn0gKi9cbi8vIHZhciBUb3VjaE1hbmFnZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9Ub3VjaE1hbmFnZXJcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0NvbnRyb2xsZXJ9ICovXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcImFwcC9jb250cm9sL0NvbnRyb2xsZXJcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9UeXBlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IHR5cGVzID0gcmVxdWlyZShcImFwcC9tb2RlbC9jb2xsZWN0aW9uL1R5cGVDb2xsZWN0aW9uXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vS2V5d29yZENvbGxlY3Rpb259ICovXG5jb25zdCBrZXl3b3JkcyA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvY29sbGVjdGlvbi9LZXl3b3JkQ29sbGVjdGlvblwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb259ICovXG5jb25zdCBidW5kbGVzID0gcmVxdWlyZShcImFwcC9tb2RlbC9jb2xsZWN0aW9uL0J1bmRsZUNvbGxlY3Rpb25cIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvY29sbGVjdGlvbi9BcnRpY2xlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IGFydGljbGVzID0gcmVxdWlyZShcImFwcC9tb2RlbC9jb2xsZWN0aW9uL0FydGljbGVDb2xsZWN0aW9uXCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXd9ICovXG5jb25zdCBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9GaWx0ZXJhYmxlTGlzdFZpZXd9ICovXG5jb25zdCBGaWx0ZXJhYmxlTGlzdFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvY29tcG9uZW50L0ZpbHRlcmFibGVMaXN0Vmlld1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9Hcm91cGluZ0xpc3RWaWV3fSAqL1xuY29uc3QgR3JvdXBpbmdMaXN0VmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9jb21wb25lbnQvR3JvdXBpbmdMaXN0Vmlld1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9Db2xsZWN0aW9uUGFnZXJ9ICovXG4vLyB2YXIgQ29sbGVjdGlvblBhZ2VyID0gcmVxdWlyZShcImFwcC92aWV3L2NvbXBvbmVudC9Db2xsZWN0aW9uUGFnZXJcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvR3JhcGhWaWV3fSAqL1xuY29uc3QgR3JhcGhWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2NvbXBvbmVudC9HcmFwaFZpZXdcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQXJ0aWNsZUJ1dHRvbn0gKi9cbmNvbnN0IEFydGljbGVCdXR0b24gPSByZXF1aXJlKFwiYXBwL3ZpZXcvY29tcG9uZW50L0FydGljbGVCdXR0b25cIik7XG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkUHJvcGVydHl9ICovXG4vLyB2YXIgcHJlZml4ZWRQcm9wZXJ0eSA9IHJlcXVpcmUoXCJ1dGlscy9wcmVmaXhlZFByb3BlcnR5XCIpO1xuXG4vLyB2YXIgdHJhY2VFbGVtZW50ID0gcmVxdWlyZShcInV0aWxzL2RlYnVnL3RyYWNlRWxlbWVudFwiKTtcblxudmFyIHR4ID0gR2xvYmFscy50cmFuc2l0aW9ucztcblxudmFyIHR4Tm93ID0gXy5jbG9uZSh0eC5OT1cpO1xudHhOb3cuZWFzaW5nID0gXCJlYXNlXCI7XG4vLyB2YXIgaFR4ID0gXy5jbG9uZShjb2xsYXBzZWQgPyB0eC5MQVNUIDogdHguRklSU1QpO1xuLy8gaFR4LmVhc2luZyA9IFwiZWFzZVwiO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9OYXZpZ2F0aW9uVmlld31cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBWaWV3LmV4dGVuZCh7XG5cblx0Ly8gLyoqIEBvdmVycmlkZSAqL1xuXHQvLyB0YWdOYW1lOiBcImRpdlwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNpZFByZWZpeDogXCJuYXZpZ2F0aW9uVmlld1wiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJuYXZpZ2F0aW9uIGNvbnRhaW5lci1leHBhbmRlZFwiLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdF8uYmluZEFsbCh0aGlzLCBcIl9vblZQYW5TdGFydFwiLCBcIl9vblZQYW5Nb3ZlXCIsIFwiX29uVlBhbkZpbmFsXCIpO1xuXHRcdF8uYmluZEFsbCh0aGlzLCBcIl9vbkhQYW5TdGFydFwiLCBcIl9vbkhQYW5Nb3ZlXCIsIFwiX29uSFBhbkZpbmFsXCIpO1xuXHRcdF8uYmluZEFsbCh0aGlzLCBcIl9vbk5hdmlnYXRpb25DbGlja1wiKTtcblx0XHQvLyBfLmJpbmRBbGwodGhpcywgXCJfd2hlblRyYW5zaXRpb25zRW5kXCIsIFwiX3doZW5UcmFuc2l0aW9uc0Fib3J0XCIpO1xuXHRcdC8vIF8uYmluZEFsbCh0aGlzLCBcIl93aGVuTGlzdHNSZW5kZXJlZFwiKTtcblxuXHRcdC8vIHRoaXMuX21ldHJpY3MgPSB7XG5cdFx0Ly8gXHRtaW5IZWlnaHQ6IDBcblx0XHQvLyB9O1xuXHRcdHRoaXMuaXRlbVZpZXdzID0gW107XG5cdFx0dGhpcy50cmFuc2Zvcm1zID0gbmV3IFRyYW5zZm9ybUhlbHBlcigpO1xuXHRcdC8vIHRoaXMudG91Y2ggPSBvcHRpb25zLnRvdWNoIHx8IG5ldyBFcnJvcihcIm5vIHRvdWNoXCIpOyAvL1RvdWNoTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXHRcdHRoaXMudnBhbiA9IG9wdGlvbnMudnBhbiB8fCBuZXcgRXJyb3IoXCJubyB2cGFuXCIpO1xuXHRcdHRoaXMuaHBhbiA9IG9wdGlvbnMuaHBhbiB8fCBuZXcgRXJyb3IoXCJubyBocGFuXCIpO1xuXG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCBcImNoYW5nZVwiLCB0aGlzLl9vbk1vZGVsQ2hhbmdlKTtcblx0XHR0aGlzLmxpc3RlblRvKGtleXdvcmRzLCBcInNlbGVjdDpvbmUgc2VsZWN0Om5vbmVcIiwgdGhpcy5fb25LZXl3b3JkU2VsZWN0KTtcblx0XHQvLyB0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsIFwid2l0aEJ1bmRsZTpjaGFuZ2VcIiwgdGhpcy5fb253aXRoQnVuZGxlQ2hhbmdlKTtcblxuXHRcdHRoaXMudnBhbkdyb3VwID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiI3ZwYW4tZ3JvdXBcIik7XG5cdFx0Ly8gdGhpcy5lbC5zdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiO1xuXHRcdC8vIHRoaXMuZWwuc3R5bGUud2Via2l0VXNlclNlbGVjdCA9IFwibm9uZVwiO1xuXHRcdC8vIHRoaXMuZWwuc3R5bGUud2Via2l0VXNlckRyYWcgPSBcIm5vbmVcIjtcblxuXHRcdHRoaXMua2V5d29yZExpc3QgPSB0aGlzLmNyZWF0ZUtleXdvcmRMaXN0KCk7XG5cdFx0dGhpcy5idW5kbGVMaXN0ID0gdGhpcy5jcmVhdGVCdW5kbGVMaXN0KCk7XG5cdFx0dGhpcy5pdGVtVmlld3MucHVzaCh0aGlzLmtleXdvcmRMaXN0KTtcblx0XHR0aGlzLml0ZW1WaWV3cy5wdXNoKHRoaXMuYnVuZGxlTGlzdCk7XG5cblx0XHR0aGlzLmdyYXBoID0gdGhpcy5jcmVhdGVHcmFwaFZpZXcodGhpcy5idW5kbGVMaXN0LFxuXHRcdFx0dGhpcy5rZXl3b3JkTGlzdCwgdGhpcy52cGFuR3JvdXApO1xuXG5cdFx0dGhpcy5zaXRlbmFtZSA9IHRoaXMuY3JlYXRlU2l0ZW5hbWVCdXR0b24oKTtcblx0XHR0aGlzLmFib3V0ID0gdGhpcy5jcmVhdGVBYm91dEJ1dHRvbigpO1xuXG5cdFx0LyogTk9URTogLmxpc3QtZ3JvdXAgLmxhYmVsIG1vdmVzIGhvcml6b250YWxseSAoY2YuIHNhc3MvbGF5b3V0cy8qLnNjc3MpICovXG5cdFx0dGhpcy5oR3JvdXBpbmdzID0gdGhpcy5rZXl3b3JkTGlzdC5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxpc3QtZ3JvdXAgLmxhYmVsXCIpO1xuXG5cdFx0dGhpcy50cmFuc2Zvcm1zLmFkZChcblx0XHRcdHRoaXMudnBhbkdyb3VwLFxuXHRcdFx0dGhpcy5idW5kbGVMaXN0LndyYXBwZXIsXG5cdFx0XHR0aGlzLmtleXdvcmRMaXN0LndyYXBwZXIsXG5cdFx0XHR0aGlzLmJ1bmRsZUxpc3QuZWwsXG5cdFx0XHR0aGlzLmtleXdvcmRMaXN0LmVsLFxuXHRcdFx0dGhpcy5oR3JvdXBpbmdzLFxuXHRcdFx0dGhpcy5zaXRlbmFtZS53cmFwcGVyLFxuXHRcdFx0dGhpcy5hYm91dC53cmFwcGVyLFxuXHRcdFx0dGhpcy5zaXRlbmFtZS5lbCxcblx0XHRcdHRoaXMuYWJvdXQuZWwsXG5cdFx0XHR0aGlzLmdyYXBoLmVsXG5cdFx0KTtcblx0XHQvLyB0aGlzLml0ZW1WaWV3cy5wdXNoKHRoaXMuZ3JhcGgpO1xuXHRcdC8vIHRoaXMubGlzdGVuVG8odGhpcy5ncmFwaCwge1xuXHRcdC8vIFx0XCJjYW52YXM6dXBkYXRlXCI6IHRoaXMuX29uR3JhcGhVcGRhdGUsXG5cdFx0Ly8gXHRcImNhbnZhczpyZWRyYXdcIjogdGhpcy5fb25HcmFwaFJlZHJhdyxcblx0XHQvLyB9KTtcblxuXHRcdC8qdGhpcy5saXN0ZW5Ubyh0aGlzLmdyYXBoLCBcInZpZXc6cmVuZGVyOmJlZm9yZVwiLCBmdW5jdGlvbih2aWV3LCBmbGFncykge1xuXHRcdFx0dmFyIHZtYXg7XG5cdFx0XHRpZiAoIXZpZXcuZWwuc3R5bGUuaGVpZ2h0KSB7XG5cdFx0XHRcdC8vIGlmIChmbGFncyAmIChWaWV3LlNJWkVfSU5WQUxJRCB8IFZpZXcuTU9ERUxfSU5WQUxJRCkpIHtcblx0XHRcdFx0Ly8gaWYgKCh0aGlzLmJ1bmRsZUxpc3QucmVuZGVyRmxhZ3MgfCBWaWV3LlNJWkVfSU5WQUxJRCkgfHxcblx0XHRcdFx0Ly8gXHQodGhpcy5rZXl3b3JkTGlzdC5yZW5kZXJGbGFncyB8IFZpZXcuU0laRV9JTlZBTElEKSkge1xuXHRcdFx0XHQvLyB9XG5cdFx0XHRcdHZtYXggPSBNYXRoLm1heChcblx0XHRcdFx0XHR0aGlzLmJ1bmRsZUxpc3QuX21ldHJpY3MuaGVpZ2h0LFxuXHRcdFx0XHRcdHRoaXMua2V5d29yZExpc3QuX21ldHJpY3MuaGVpZ2h0XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGlmIChfLmlzTnVtYmVyKHZtYXgpKSB7XG5cdFx0XHRcdFx0dmlldy5lbC5zdHlsZS5oZWlnaHQgPSB2bWF4ICsgXCJweFwiO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6W3ZpZXc6cmVuZGVyOmJlZm9yZV1bb25jZV06JXMgWyVzXSBoZWlnaHRzOlslaSwgJWldIChtYXggJWkpXCIsXG5cdFx0XHRcdFx0XHR0aGlzLmNpZCwgdmlldy5jaWQsIFZpZXcuZmxhZ3NUb1N0cmluZyhmbGFncyksXG5cdFx0XHRcdFx0XHR0aGlzLmJ1bmRsZUxpc3QuX21ldHJpY3MuaGVpZ2h0LFxuXHRcdFx0XHRcdFx0dGhpcy5rZXl3b3JkTGlzdC5fbWV0cmljcy5oZWlnaHQsXG5cdFx0XHRcdFx0XHR2bWF4KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pOyovXG5cdFx0Ly8gdGhpcy5saXN0ZW5Ubyh0aGlzLmJ1bmRsZUxpc3QsIFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgZnVuY3Rpb24odmlldywgZmxhZ3MpIHtcblx0XHQvLyBcdGNvbnNvbGUuaW5mbyhcIiVzOlt2aWV3OnJlbmRlcjphZnRlciAlc11cIiwgdGhpcy5jaWQsIHZpZXcuY2lkLCBWaWV3LmZsYWdzVG9TdHJpbmcoZmxhZ3MgJiBWaWV3LlNJWkVfSU5WQUxJRCkpO1xuXHRcdC8vIFx0XHRpZiAoZmxhZ3MgJiBWaWV3LlNJWkVfSU5WQUxJRCkge1xuXHRcdC8vIFx0XHRcdC8vIGNvbnNvbGUuaW5mbyhcIiVzOlslcyB2aWV3OnJlbmRlcjphZnRlcl0gYnVuZGxlTGlzdCBoZWlnaHRcIiwgdGhpcy5jaWQsIHZpZXcuY2lkLCB0aGlzLmJ1bmRsZUxpc3QuZWwuc3R5bGUuaGVpZ2h0KTtcblx0XHQvLyBcdFx0XHQvLyB0aGlzLmdyYXBoLmVsLnN0eWxlLmhlaWdodCA9IHRoaXMuYnVuZGxlTGlzdC5lbC5zdHlsZS5oZWlnaHQ7XG5cdFx0Ly8gXHRcdFx0dGhpcy5ncmFwaC5lbC5zdHlsZS5vcGFjaXR5ID0gdGhpcy5idW5kbGVMaXN0LmNvbGxhcHNlZD8gMCA6IDE7XG5cdFx0Ly8gXHRcdFx0dGhpcy5ncmFwaC5yZXF1ZXN0UmVuZGVyKFZpZXcuU0laRV9JTlZBTElEKS5yZW5kZXJOb3coKTtcblx0XHQvLyBcdC8vIFx0fVxuXHRcdC8vIH0pO1xuXHRcdC8vIHRoaXMubGlzdGVuVG8odGhpcy5idW5kbGVMaXN0LCBcInZpZXc6cmVuZGVyOmFmdGVyXCIsIHRoaXMuX29uTGlzdFJlc2l6ZSk7XG5cdFx0Ly8gdGhpcy5saXN0ZW5Ubyh0aGlzLmtleXdvcmRMaXN0LCBcInZpZXc6cmVuZGVyOmFmdGVyXCIsIHRoaXMuX29uTGlzdFJlc2l6ZSk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogUmVuZGVyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHJlbmRlckZyYW1lOiBmdW5jdGlvbih0c3RhbXAsIGZsYWdzKSB7XG5cdFx0aWYgKGZsYWdzICYgVmlldy5NT0RFTF9JTlZBTElEKSB7XG5cdFx0XHRpZiAodGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImNvbnRhaW5lci1jb2xsYXBzZWRcIiwgdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikpO1xuXHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJjb250YWluZXItZXhwYW5kZWRcIiwgIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJjb2xsYXBzZWRcIilcblx0XHRcdFx0fHwgdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwid2l0aEJ1bmRsZVwiKSkge1xuXHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXItY2hhbmdpbmdcIik7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwicm91dGVOYW1lXCIpKSB7XG5cdFx0XHRcdHRoaXMuYnVuZGxlTGlzdC5yZXF1ZXN0UmVuZGVyKFZpZXcuU0laRV9JTlZBTElEIHwgVmlldy5MQVlPVVRfSU5WQUxJRCk7XG5cdFx0XHRcdHRoaXMua2V5d29yZExpc3QucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRCB8IFZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIHRyYW5zZm9ybXNcblx0XHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0XHRpZiAodGhpcy5za2lwVHJhbnNpdGlvbnMgfHxcblx0XHRcdChmbGFncyAmIFZpZXcuQUxMX0lOVkFMSUQpKSB7XG5cdFx0XHQvLyAoZmxhZ3MgJiAoVmlldy5NT0RFTF9JTlZBTElEIHwgVmlldy5TSVpFX0lOVkFMSUQgfCBWaWV3LkxBWU9VVF9JTlZBTElEKSkpIHtcblx0XHRcdC8vIGlmICh0cmFuc2Zvcm1zQ2hhbmdlZCkge1xuXHRcdFx0aWYgKHRoaXMuc2tpcFRyYW5zaXRpb25zKSB7XG5cdFx0XHRcdHRoaXMudHJhbnNmb3Jtcy5zdG9wQWxsVHJhbnNpdGlvbnMoKTtcblx0XHRcdFx0dGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdFx0XHRcdHRoaXMudHJhbnNmb3Jtcy5jbGVhckFsbE9mZnNldHMoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyVHJhbnNpdGlvbnMoZmxhZ3MpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjpyZW5kZXJGcmFtZSAlb1wiLCB0aGlzLmNpZCxcblx0XHRcdC8vIFx0dGhpcy50cmFuc2Zvcm1zLml0ZW1zLm1hcChmdW5jdGlvbihvKSB7XG5cdFx0XHQvLyBcdFx0cmV0dXJuIHRyYWNlRWxlbWVudChvLmVsKSArIFwiOlwiICtcblx0XHRcdC8vIFx0XHRcdChvLmhhc1RyYW5zaXRpb24gPyBvLnRyYW5zaXRpb24ubmFtZSA6IFwiLVwiKTtcblx0XHRcdC8vIFx0fSkpO1xuXHRcdH1cblx0XHQvLyBpZiAodGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiY29sbGFwc2VkXCIpICYmIHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0Ly8gXHR0aGlzLmVsLnN0eWxlLmhlaWdodCA9IFwiXCI7XG5cdFx0Ly8gXHQvLyB0aGlzLmVsLnN0eWxlLm1pbkhlaWdodCA9IGh2YWwgKyBcInB4XCI7XG5cdFx0Ly8gXHR0aGlzLmdyYXBoLmVsLnN0eWxlLmhlaWdodCA9IFwiXCI7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gcHJvbWlzZSBoYW5kbGVyc1xuXHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXG5cdFx0dmFyIG1lYXN1cmVSZW5kZXJlZExpc3RzID0gZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0XHQvLyB2YXIgaHZhbCA9IHJlc3VsdC5yZWR1Y2UoZnVuY3Rpb24oYSwgbykge1xuXHRcdFx0Ly8gXHRyZXR1cm4gTWF0aC5tYXgoYSwgby5tZXRyaWNzLmhlaWdodCk7XG5cdFx0XHQvLyB9LCAwKTtcblx0XHRcdHZhciBodmFsID0gTWF0aC5tYXgoXG5cdFx0XHRcdHRoaXMuYnVuZGxlTGlzdC5tZXRyaWNzLmhlaWdodCxcblx0XHRcdFx0dGhpcy5rZXl3b3JkTGlzdC5tZXRyaWNzLmhlaWdodCk7XG5cblx0XHRcdGlmICh0aGlzLm1vZGVsLmdldChcImNvbGxhcHNlZFwiKSkge1xuXHRcdFx0XHR0aGlzLmVsLnN0eWxlLmhlaWdodCA9IFwiXCI7XG5cdFx0XHRcdC8vIHRoaXMuZWwuc3R5bGUubWluSGVpZ2h0ID0gaHZhbCArIFwicHhcIjtcblx0XHRcdFx0dGhpcy5ncmFwaC5lbC5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5lbC5zdHlsZS5oZWlnaHQgPSBodmFsICsgXCJweFwiO1xuXHRcdFx0XHQvLyB0aGlzLmVsLnN0eWxlLm1pbkhlaWdodCA9IFwiXCI7XG5cdFx0XHRcdHRoaXMuZ3JhcGguZWwuc3R5bGUuaGVpZ2h0ID0gaHZhbCArIFwicHhcIjtcblx0XHRcdH1cblx0XHRcdC8vIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikgPyBcIlwiIDogXCIxMDAlXCI7XG5cdFx0XHQvLyB0aGlzLnZwYW5Hcm91cC5zdHlsZS5oZWlnaHQgPSBodmFsO1xuXHRcdFx0dGhpcy5ncmFwaC5yZXF1ZXN0UmVuZGVyKFZpZXcuU0laRV9JTlZBTElEIHwgVmlldy5MQVlPVVRfSU5WQUxJRCk7XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOlt3aGVuTGlzdHNSZW5kZXJlZERvbmVdIGhlaWdodCBzZXQgdG8gJXNcIiwgdGhpcy5jaWQsIHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpID8gaHZhbCArIFwicHhcIiA6IFwiW25vdCBzZXRdXCIsIHJlc3VsdCk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoXCJ2aWV3OmNvbGxhcHNlZDptZWFzdXJlZFwiLCB0aGlzKTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fS5iaW5kKHRoaXMpO1xuXG5cdFx0dmFyIHRvZ2dsZUdyYXBoID0gZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0XHR0aGlzLmdyYXBoLmVuYWJsZWQgPSAhdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0XHR0aGlzLmdyYXBoLnZhbHVlVG8oXCJhMmJcIiwgMCwgMCk7XG5cdFx0XHRpZiAoIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHRcdHRoaXMuZ3JhcGgudmFsdWVUbyhcImEyYlwiLCAxLCBHbG9iYWxzLlRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LmJpbmQodGhpcyk7XG5cblx0XHR2YXIgd2hlbkNvbGxhcHNlZENoYW5nZURvbmUgPSBmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiJXM6W3doZW5Db2xsYXBzZWRDaGFuZ2VEb25lXVtmbGFnczogJXNdXCIsIHRoaXMuY2lkLCBWaWV3LmZsYWdzVG9TdHJpbmcoZmxhZ3MpLCByZXN1bHQpO1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbmVyLWNoYW5naW5nXCIpO1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzpjb2xsYXBzZWQ6ZW5kXCIsIHRoaXMpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LmJpbmQodGhpcyk7XG5cblx0XHQvLyBwcm9taXNlc1xuXHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRcdHZhciBwO1xuXHRcdC8vIHAgPSBQcm9taXNlLmFsbChbXG5cdFx0Ly8gXHRcdHRoaXMuYnVuZGxlTGlzdC53aGVuUmVuZGVyZWQoKSxcblx0XHQvLyBcdFx0dGhpcy5rZXl3b3JkTGlzdC53aGVuUmVuZGVyZWQoKSxcblx0XHQvLyBcdFx0dGhpcy5idW5kbGVMaXN0LndoZW5Db2xsYXBzZUNoYW5nZUVuZHMoKSxcblx0XHQvLyBcdFx0dGhpcy5rZXl3b3JkTGlzdC53aGVuQ29sbGFwc2VDaGFuZ2VFbmRzKCksXG5cdFx0Ly8gXHRcdHRoaXMudHJhbnNmb3Jtcy53aGVuQWxsVHJhbnNpdGlvbnNFbmQoKSxcblx0XHQvLyBcdF0pO1xuXG5cdFx0cCA9IFByb21pc2UuYWxsKFtcblx0XHRcdFx0dGhpcy5idW5kbGVMaXN0LndoZW5Db2xsYXBzZUNoYW5nZUVuZHMoKSxcblx0XHRcdFx0dGhpcy5rZXl3b3JkTGlzdC53aGVuQ29sbGFwc2VDaGFuZ2VFbmRzKCksXG5cdFx0XHRdKVxuXHRcdFx0LnRoZW4obWVhc3VyZVJlbmRlcmVkTGlzdHMpO1xuXG5cdFx0aWYgKChmbGFncyAmIFZpZXcuTU9ERUxfSU5WQUxJRCkgJiYgdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHRwID0gcC50aGVuKHRvZ2dsZUdyYXBoKTtcblx0XHR9XG5cdFx0cFxuXHRcdFx0LnRoZW4odGhpcy50cmFuc2Zvcm1zLndoZW5BbGxUcmFuc2l0aW9uc0VuZCgpKVxuXHRcdFx0LnRoZW4od2hlbkNvbGxhcHNlZENoYW5nZURvbmUsIGZ1bmN0aW9uKHJlYXNvbikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKHJlYXNvbik7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHJlYXNvbikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCIlczo6cmVuZGVyRnJhbWUgcHJvbWlzZSByZWplY3RlZFwiLCB0aGlzLmNpZCk7XG5cdFx0XHR9LmJpbmQodGhpcykpO1xuXG5cdFx0Lypcblx0XHR2YXIgd2hlbkxpc3RzUmVuZGVyZWQgPSBQcm9taXNlLmFsbChbXG5cdFx0XHR0aGlzLmJ1bmRsZUxpc3Qud2hlblJlbmRlcmVkKCksXG5cdFx0XHR0aGlzLmtleXdvcmRMaXN0LndoZW5SZW5kZXJlZCgpXG5cdFx0XSk7XG5cblx0XHR2YXIgd2hlblRyYW5zZm9ybXNFbmQgPSB0aGlzLnRyYW5zZm9ybXMucHJvbWlzZSgpO1xuXG5cdFx0d2hlbkxpc3RzUmVuZGVyZWQudGhlbihcblx0XHRcdHdoZW5MaXN0c1JlbmRlcmVkRG9uZSxcblx0XHRcdGZ1bmN0aW9uKHJlYXNvbikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCIlczpbd2hlbkxpc3RzUmVuZGVyZWRdIGZhaWxlZDogJW9cIiwgdGhpcy5jaWQsIHJlYXNvbik7XG5cdFx0XHRcdHJldHVybiByZWFzb247XG5cdFx0XHR9LmJpbmQodGhpcylcblx0XHQpO1xuXG5cdFx0UHJvbWlzZS5hbGwoW1xuXHRcdFx0d2hlbkxpc3RzUmVuZGVyZWQsXG5cdFx0XHR3aGVuVHJhbnNmb3Jtc0VuZFxuXHRcdF0pXG5cdFx0XHQudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCIlczpbd2hlbkxpc3RzUmVuZGVyZWQrd2hlblRyYW5zZm9ybXNFbmRdIFslc11cIiwgdGhpcy5jaWQsIFZpZXcuZmxhZ3NUb1N0cmluZyhmbGFncyksIHJlc3VsdCk7XG5cdFx0XHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbmVyLWNoYW5naW5nXCIpO1xuXHRcdFx0XHRcdHRoaXMuZ3JhcGgucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRCB8IFZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHRcdFx0XHR9LmJpbmQodGhpcyksXG5cdFx0XHRcdGZ1bmN0aW9uKHJlYXNvbikge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIiVzOlt3aGVuTGlzdHNSZW5kZXJlZCt3aGVuVHJhbnNmb3Jtc0VuZF0gWyVzXVwiLCB0aGlzLmNpZCwgVmlldy5mbGFnc1RvU3RyaW5nKGZsYWdzKSwgcmVhc29uKTtcblx0XHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXItY2hhbmdpbmdcIik7XG5cdFx0XHRcdFx0dGhpcy5ncmFwaC5yZXF1ZXN0UmVuZGVyKFZpZXcuU0laRV9JTlZBTElEIHwgVmlldy5MQVlPVVRfSU5WQUxJRCk7XG5cdFx0XHRcdH0uYmluZCh0aGlzKVxuXHRcdFx0KTsqL1xuXG5cblx0XHQvLyB0cmFjZSByZXN1bHQgaGFuZGxlcnNcblx0XHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0XHQvKmlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJjb2xsYXBzZWRcIikpIHtcblx0XHRcdHZhciBtc2dCYXNlID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikgPyBcImNvbGxhcHNcIiA6IFwiZXhwYW5kXCI7XG5cdFx0XHRQcm9taXNlLmFsbChbXG5cdFx0XHRcdFByb21pc2UuYWxsKFtcblx0XHRcdFx0XHRcdHRoaXMuYnVuZGxlTGlzdC53aGVuUmVuZGVyZWQoKSxcblx0XHRcdFx0XHRcdHRoaXMua2V5d29yZExpc3Qud2hlblJlbmRlcmVkKClcblx0XHRcdFx0XHRdKVxuXHRcdFx0XHRcdC50aGVuKFxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibmF2LXR4OiVzaW5nXCIsIG1zZ0Jhc2UsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0dGhpcy50cmFuc2Zvcm1zLnByb21pc2UoKVxuXHRcdFx0XSlcblx0XHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKFwibmF2LXR4OiVzZWQgW3JlamVjdGVkXVwiLCBtc2dCYXNlLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdC5maW5hbGx5KFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJuYXYtdHg6JXNlZFwiLCBtc2dCYXNlLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHR9Ki9cblxuXHRcdC8vIGdyYXBoXG5cdFx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdFx0Ly8gaWYgKChmbGFncyAmIChWaWV3LlNJWkVfSU5WQUxJRCB8IH5WaWV3Lk1PREVMX0lOVkFMSUQpKVxuXHRcdC8vIFx0LyogY29sbGFwc2VkIGhhcyBub3QgY2hhbmdlZCwgbm8gYnVuZGxlIHNlbGVjdGVkICovXG5cdFx0Ly8gXHQmJiAhdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiY29sbGFwc2VkXCIpXG5cdFx0Ly8gXHQmJiAhdGhpcy5tb2RlbC5nZXQoXCJ3aXRoQnVuZGxlXCIpKSB7XG5cdFx0Ly8gXHR0aGlzLmdyYXBoLnJlcXVlc3RSZW5kZXIoVmlldy5TSVpFX0lOVkFMSUQgfCBWaWV3LkxBWU9VVF9JTlZBTElEKTtcblx0XHQvLyBcdGlmICghdGhpcy5za2lwVHJhbnNpdGlvbnMpIHtcblx0XHQvLyBcdFx0dGhpcy5ncmFwaC5yZW5kZXJOb3coKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9XG5cdFx0Ly8gZWxzZVxuXHRcdC8vIGlmICgoZmxhZ3MgJiBWaWV3LlNJWkVfSU5WQUxJRCkgJiYgIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0Ly8gXHQvKiBOYXZpZ2F0aW9uVmlldyBoYXMgcmVzaXplZCB3aGlsZSB1bmNvbGxhcHNlZCxcblx0XHQvLyBcdGJ1dCBtb2RlbCBpcyB1bmNoYW5nZWQgKi9cblx0XHQvLyBcdHRoaXMuZ3JhcGgucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRCB8IFZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHRcdC8vIH1cblxuXG5cdFx0Ly8gY2hpbGRyZW4gbG9vcFxuXHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRcdHRoaXMuaXRlbVZpZXdzLmZvckVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0Ly8gdmlldy5za2lwVHJhbnNpdGlvbnMgPSB2aWV3LnNraXBUcmFuc2l0aW9ucyB8fCB0aGlzLnNraXBUcmFuc2l0aW9ucztcblx0XHRcdGlmICh0aGlzLnNraXBUcmFuc2l0aW9ucykge1xuXHRcdFx0XHR2aWV3LnNraXBUcmFuc2l0aW9ucyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZmxhZ3MgJiBWaWV3LlNJWkVfSU5WQUxJRCkge1xuXHRcdFx0XHR2aWV3LnJlcXVlc3RSZW5kZXIoVmlldy5TSVpFX0lOVkFMSUQpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgKCF2aWV3LnNraXBUcmFuc2l0aW9ucykge1xuXHRcdFx0dmlldy5yZW5kZXJOb3coKTtcblx0XHRcdC8vIH1cblx0XHR9LCB0aGlzKTtcblxuXHRcdHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5za2lwVHJhbnNpdGlvbnMgPSBmYWxzZTtcblx0XHR9KTtcblx0fSxcblxuXHQvKl93aGVuTGlzdHNSZW5kZXJlZDogZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0dmFyIGh2YWw7XG5cdFx0aWYgKHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHR0aGlzLmVsLnN0eWxlLmhlaWdodCA9IFwiXCI7XG5cdFx0XHQvLyB0aGlzLmdyYXBoLmVsLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBodmFsID0gcmVzdWx0LnJlZHVjZShmdW5jdGlvbihhLCBvKSB7XG5cdFx0XHQvLyBcdHJldHVybiBNYXRoLm1heChhLCBvLm1ldHJpY3MuaGVpZ2h0KTtcblx0XHRcdC8vIH0sIDApO1xuXHRcdFx0aHZhbCA9IE1hdGgubWF4KFxuXHRcdFx0XHR0aGlzLmJ1bmRsZUxpc3QubWV0cmljcy5oZWlnaHQsXG5cdFx0XHRcdHRoaXMua2V5d29yZExpc3QubWV0cmljcy5oZWlnaHQpO1xuXHRcdFx0dGhpcy5lbC5zdHlsZS5oZWlnaHQgPSBodmFsICsgXCJweFwiO1xuXHRcdFx0Ly8gdGhpcy5ncmFwaC5lbC5zdHlsZS5oZWlnaHQgPSBodmFsICsgXCJweFwiO1xuXHRcdH1cblx0XHR0aGlzLmdyYXBoLnJlcXVlc3RSZW5kZXIoVmlldy5TSVpFX0lOVkFMSUQgfCBWaWV3LkxBWU9VVF9JTlZBTElEKS5yZW5kZXJOb3coKTtcblx0XHRjb25zb2xlLmxvZyhcIiVzOltfd2hlbkxpc3RzUmVuZGVyZWRdIGhlaWdodCBzZXQgdG8gJW9weFwiLCB0aGlzLmNpZCwgaHZhbCA/IGh2YWwgOiBcIltlbXB0eV1cIiwgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gcmVzdWx0XG5cdH0sXG5cblx0X3doZW5UcmFuc2l0aW9uc0VuZDogZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0Y29uc29sZS5pbmZvKFwiJXM6Ol93aGVuVHJhbnNpdGlvbnNFbmRcIiwgdGhpcy5jaWQpO1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRhaW5lci1jaGFuZ2luZ1wiKTtcblx0XHQvLyBpZiAoIUdsb2JhbHMuQlJFQUtQT0lOVFNbXCJtZWRpdW0td2lkZVwiXS5tYXRjaGVzKVxuXHRcdC8vIFx0cmV0dXJuO1xuXHRcdC8vIGlmICghdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikpIHtcblx0XHQvLyBcdHRoaXMuZ3JhcGgucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRCB8IFZpZXcuTEFZT1VUX0lOVkFMSUQpOyAvLy5yZW5kZXJOb3coKTtcblx0XHQvLyB9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblxuXHRfd2hlblRyYW5zaXRpb25zQWJvcnQ6IGZ1bmN0aW9uKHJlYXNvbikge1xuXHRcdGNvbnNvbGUud2FybihcIiVzOjpfd2hlblRyYW5zaXRpb25zQWJvcnQgJW9cIiwgdGhpcy5jaWQsIHJlYXNvbik7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbmVyLWNoYW5naW5nXCIpO1xuXHRcdC8vIGlmICghR2xvYmFscy5CUkVBS1BPSU5UU1tcIm1lZGl1bS13aWRlXCJdLm1hdGNoZXMpXG5cdFx0Ly8gXHRyZXR1cm47XG5cdFx0Ly8gaWYgKCF0aGlzLm1vZGVsLmdldChcImNvbGxhcHNlZFwiKSkge1xuXHRcdC8vIFx0dGhpcy5ncmFwaC5yZXF1ZXN0UmVuZGVyKFZpZXcuU0laRV9JTlZBTElEIHwgVmlldy5MQVlPVVRfSU5WQUxJRCk7IC8vLnJlbmRlck5vdygpO1xuXHRcdC8vIH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LCovXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiByZW5kZXJUcmFuc2l0aW9uc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0cmVuZGVyVHJhbnNpdGlvbnM6IGZ1bmN0aW9uKGZsYWdzKSB7XG5cblx0XHR2YXIgbW9kZWxDaGFuZ2VkID0gKGZsYWdzICYgVmlldy5NT0RFTF9JTlZBTElEKTtcblxuXHRcdHZhciBmcm9tUm91dGUgPSB0aGlzLm1vZGVsLmdldChcImZyb21Sb3V0ZU5hbWVcIik7XG5cdFx0dmFyIHRvUm91dGUgPSB0aGlzLm1vZGVsLmdldChcInJvdXRlTmFtZVwiKTtcblx0XHR2YXIgcm91dGVDaGFuZ2VkID0gbW9kZWxDaGFuZ2VkICYmIHRoaXMubW9kZWwuaGFzQ2hhbmdlZChcInJvdXRlTmFtZVwiKTtcblxuXHRcdC8qIGJ1bmRsZSAqL1xuXHRcdHZhciB3aXRoQnVuZGxlID0gdGhpcy5tb2RlbC5oYXMoXCJidW5kbGVcIik7XG5cdFx0dmFyIHdpdGhCdW5kbGVDaGFuZ2VkID0gbW9kZWxDaGFuZ2VkICYmIHRoaXMubW9kZWwuaGFzQW55Q2hhbmdlZChcImJ1bmRsZVwiKTtcblx0XHR2YXIgYnVuZGxlQ2hhbmdlZCA9IG1vZGVsQ2hhbmdlZCAmJiB0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJidW5kbGVcIik7XG5cdFx0LyogbWVkaWEgKi9cblx0XHR2YXIgd2l0aE1lZGlhID0gdGhpcy5tb2RlbC5oYXMoXCJtZWRpYVwiKTtcblx0XHR2YXIgd2l0aE1lZGlhQ2hhbmdlZCA9IG1vZGVsQ2hhbmdlZCAmJiB0aGlzLm1vZGVsLmhhc0FueUNoYW5nZWQoXCJtZWRpYVwiKTtcblx0XHQvL3ZhciBtZWRpYUNoYW5nZWQgPSBtb2RlbENoYW5nZWQgJiYgdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwibWVkaWFcIik7XG5cdFx0LyogYXJ0aWNsZSAqL1xuXHRcdC8vIHZhciB3aXRoQXJ0aWNsZSA9IHRoaXMubW9kZWwuaGFzKFwiYXJ0aWNsZVwiKTtcblx0XHR2YXIgd2l0aEFydGljbGVDaGFuZ2VkID0gbW9kZWxDaGFuZ2VkICYmIHRoaXMubW9kZWwuaGFzQW55Q2hhbmdlZChcImFydGljbGVcIik7XG5cdFx0Ly92YXIgYXJ0aWNsZUNoYW5nZWQgPSBtb2RlbENoYW5nZWQgJiYgdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiYXJ0aWNsZVwiKTtcblx0XHQvKiBjb2xsYXBzZWQgKi9cblx0XHR2YXIgY29sbGFwc2VkID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0dmFyIGNvbGxhcHNlZENoYW5nZWQgPSBtb2RlbENoYW5nZWQgJiYgdGhpcy5tb2RlbC5oYXNDaGFuZ2VkKFwiY29sbGFwc2VkXCIpO1xuXG5cdFx0dmFyIHRmO1xuXHRcdC8qIHRoaXMudnBhbkdyb3VwICovXG5cdFx0dGYgPSB0aGlzLnRyYW5zZm9ybXMuZ2V0KHRoaXMudnBhbkdyb3VwKTtcblx0XHRpZiAodGYgJiYgdGYuaGFzT2Zmc2V0KSB7XG5cdFx0XHR0Zi5ydW5UcmFuc2l0aW9uKGNvbGxhcHNlZENoYW5nZWQgPyB0eC5CRVRXRUVOIDogdHguTk9XKTtcblx0XHRcdHRmLmNsZWFyT2Zmc2V0KCk7XG5cdFx0fVxuXHRcdC8qIHRoaXMuYnVuZGxlTGlzdC5lbCAqL1xuXHRcdC8vIHRmID0gdGhpcy50cmFuc2Zvcm1zLmdldCh0aGlzLmJ1bmRsZUxpc3QuZWwpO1xuXHRcdC8vIGlmICh0Zi5oYXNPZmZzZXQpIHtcblx0XHQvLyBcdHRmLnJ1blRyYW5zaXRpb24oY29sbGFwc2VkQ2hhbmdlZCA/IHR4LkJFVFdFRU4gOiB0eC5OT1cpO1xuXHRcdC8vIFx0dGYuY2xlYXJPZmZzZXQoKTtcblx0XHQvLyB9XG5cdFx0LyogdGhpcy5rZXl3b3JkTGlzdC5lbCAqL1xuXHRcdC8vIHRmID0gdGhpcy50cmFuc2Zvcm1zLmdldCh0aGlzLmtleXdvcmRMaXN0LmVsKTtcblx0XHQvLyBpZiAodGYuaGFzT2Zmc2V0KSB7XG5cdFx0Ly8gXHR0Zi5ydW5UcmFuc2l0aW9uKGNvbGxhcHNlZENoYW5nZWQgPyB0eC5CRVRXRUVOIDogdHguTk9XKTtcblx0XHQvLyBcdHRmLmNsZWFyT2Zmc2V0KCk7XG5cdFx0Ly8gfVxuXHRcdC8qIHRoaXMuZ3JhcGguZWwgKi9cblx0XHQvLyB0ZiA9IHRoaXMudHJhbnNmb3Jtcy5nZXQodGhpcy5ncmFwaC5lbCk7XG5cdFx0Ly8gaWYgKHRmICYmIHRmLmhhc09mZnNldCkge1xuXHRcdC8vIFx0dGYucnVuVHJhbnNpdGlvbihjb2xsYXBzZWRDaGFuZ2VkID8gdHguQkVUV0VFTiA6IHR4Lk5PVyk7XG5cdFx0Ly8gXHR0Zi5jbGVhck9mZnNldCgpO1xuXHRcdC8vIH1cblxuXHRcdC8qXG5cdFx0ICogTk9URTpcblx0XHQgKiBWZXJ0aWNhbDpcblx0XHQgKlx0XHRzaXRlLW5hbWUtd3JhcHBlcixcblx0XHQgKlx0XHRhcnRpY2xlLWxpc3Qtd3JhcHBlclxuXHRcdCAqIEhvcml6b250YWw6XG5cdFx0ICpcdFx0c2l0ZS1uYW1lLFxuXHRcdCAqXHRcdGFydGljbGUtYnV0dG9ucyxcblx0XHQgKlx0XHRrZXl3b3JkTGlzdC53cmFwcGVyLFxuXHRcdCAqXHRcdGJ1bmRsZUxpc3Qud3JhcHBlcixcblx0XHQgKlx0XHRoR3JvdXBpbmdzXG5cdFx0ICovXG5cdFx0aWYgKEdsb2JhbHMuQlJFQUtQT0lOVFNbXCJtZWRpdW0td2lkZVwiXS5tYXRjaGVzIHx8IEdsb2JhbHMuQlJFQUtQT0lOVFNbXCJtZWRpdW0td2lkZS1zdHJldGNoXCJdLm1hdGNoZXMpIHtcblx0XHRcdC8qIEhPUklaT05UQUw6IGtleXdvcmRMaXN0LndyYXBwZXIgKi9cblx0XHRcdHRmID0gdGhpcy50cmFuc2Zvcm1zLmdldCh0aGlzLmtleXdvcmRMaXN0LndyYXBwZXIpO1xuXHRcdFx0aWYgKGNvbGxhcHNlZENoYW5nZWQgJiYgIXdpdGhBcnRpY2xlQ2hhbmdlZCkge1xuXHRcdFx0XHQvLyBpZiAoY29sbGFwc2VkQ2hhbmdlZCkge1xuXHRcdFx0XHRpZiAod2l0aEJ1bmRsZUNoYW5nZWQpIHtcblx0XHRcdFx0XHRpZiAod2l0aE1lZGlhQ2hhbmdlZClcblx0XHRcdFx0XHRcdHRmLnJ1blRyYW5zaXRpb24od2l0aEJ1bmRsZSA/IHR4LkxBU1QgOiB0eC5GSVJTVCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKHdpdGhNZWRpYSlcblx0XHRcdFx0XHRcdHRmLnJ1blRyYW5zaXRpb24oY29sbGFwc2VkID8gdHguTEFTVCA6IHR4LkZJUlNUKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCF3aXRoQnVuZGxlQ2hhbmdlZCAmJiB3aXRoTWVkaWFDaGFuZ2VkKVxuXHRcdFx0XHRcdHRmLnJ1blRyYW5zaXRpb24oYnVuZGxlQ2hhbmdlZCA/IHR4LkJFVFdFRU4gOiB0eE5vdyk7IC8vdHguTk9XKTtcblx0XHRcdH1cblx0XHRcdGlmICh0Zi5oYXNPZmZzZXQpXG5cdFx0XHRcdHRmLmNsZWFyT2Zmc2V0KCk7XG5cblx0XHRcdC8qIEhPUklaT05UQUw6IHRoZSByZXN0ICovXG5cdFx0XHRpZiAoY29sbGFwc2VkQ2hhbmdlZCBeIHdpdGhBcnRpY2xlQ2hhbmdlZCkge1xuXHRcdFx0XHR0aGlzLnRyYW5zZm9ybXMucnVuVHJhbnNpdGlvbihjb2xsYXBzZWQgPyB0eC5MQVNUIDogdHguRklSU1QsXG5cdFx0XHRcdFx0dGhpcy5zaXRlbmFtZS5lbCwgdGhpcy5hYm91dC5lbCwgdGhpcy5idW5kbGVMaXN0LndyYXBwZXIpO1xuXHRcdFx0XHQvLyBpZiAoZnJvbVJvdXRlICE9ICdhcnRpY2xlLWl0ZW0nICYmIHRvUm91dGUgIT0gJ21lZGlhLWl0ZW0nKSB7XG5cdFx0XHRcdHRoaXMudHJhbnNmb3Jtcy5ydW5UcmFuc2l0aW9uKGNvbGxhcHNlZCA/IHR4LkxBU1QgOiB0eC5GSVJTVCwgdGhpcy5oR3JvdXBpbmdzKTtcblx0XHRcdFx0Ly8gfVxuXHRcdFx0fVxuXHRcdFx0LyogVkVSVElDQUwgKi9cblx0XHRcdGlmIChyb3V0ZUNoYW5nZWQgJiYgKGZyb21Sb3V0ZSA9PSAncm9vdCcgfHwgdG9Sb3V0ZSA9PSAncm9vdCcpKSB7XG5cdFx0XHRcdHRoaXMudHJhbnNmb3Jtcy5ydW5UcmFuc2l0aW9uKHR4LkJFVFdFRU4sXG5cdFx0XHRcdFx0dGhpcy5zaXRlbmFtZS53cmFwcGVyLCB0aGlzLmFib3V0LndyYXBwZXIpO1xuXHRcdFx0fVxuXHRcdFx0LyogdGhpcy5oR3JvdXBpbmdzICovXG5cdFx0XHQvLyBpZiAoY29sbGFwc2VkQ2hhbmdlZCBeIHdpdGhBcnRpY2xlQ2hhbmdlZCkge1xuXHRcdFx0Ly8gXHQvLyBpZiAoY29sbGFwc2VkQ2hhbmdlZCAmJiAhd2l0aEFydGljbGVDaGFuZ2VkKSB7XG5cdFx0XHQvLyBcdHRoaXMudHJhbnNmb3Jtcy5ydW5UcmFuc2l0aW9uKGNvbGxhcHNlZCA/IHR4LkxBU1QgOiB0eC5GSVJTVCwgdGhpcy5oR3JvdXBpbmdzKTtcblx0XHRcdC8vIH1cblx0XHRcdC8vIGlmIChjb2xsYXBzZWRDaGFuZ2VkKSB7XG5cdFx0XHQvLyBcdGlmICghd2l0aEFydGljbGVDaGFuZ2VkKSB7XG5cdFx0XHQvLyBcdFx0Ly8gaWYgKGZyb21Sb3V0ZSA9PSAncm9vdCcgfHwgdG9Sb3V0ZSA9PSAncm9vdCcpIHtcblx0XHRcdC8vIFx0XHR0aGlzLnRyYW5zZm9ybXMucnVuVHJhbnNpdGlvbihjb2xsYXBzZWQgPyB0eC5MQVNUIDogdHguRklSU1QsIHRoaXMuYnVuZGxlTGlzdC53cmFwcGVyKTtcblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdC8vIFx0aWYgKHdpdGhBcnRpY2xlQ2hhbmdlZCAmJiB3aXRoQnVuZGxlQ2hhbmdlZCkge1xuXHRcdFx0Ly8gXHRcdHRoaXMudHJhbnNmb3Jtcy5ydW5UcmFuc2l0aW9uKHdpdGhBcnRpY2xlID8gdHguQkVUV0VFTiA6IHR4LkxBU1QsIHRoaXMuYnVuZGxlTGlzdC53cmFwcGVyKTtcblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gfVxuXHRcdH0gZWxzZSBpZiAoR2xvYmFscy5CUkVBS1BPSU5UU1tcInNtYWxsLXN0cmV0Y2hcIl0ubWF0Y2hlcykge1xuXHRcdFx0Ly8gaWYgKGNvbGxhcHNlZENoYW5nZWQgKSB7XG5cdFx0XHRpZiAoY29sbGFwc2VkQ2hhbmdlZCBeIHdpdGhBcnRpY2xlQ2hhbmdlZCkge1xuXHRcdFx0XHR0aGlzLnRyYW5zZm9ybXMucnVuVHJhbnNpdGlvbihjb2xsYXBzZWQgPyB0eC5GSVJTVCA6IHR4LkxBU1QsXG5cdFx0XHRcdFx0dGhpcy5zaXRlbmFtZS5lbCwgdGhpcy5hYm91dC5lbCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh3aXRoQnVuZGxlQ2hhbmdlZCkge1xuXHRcdFx0XHR0aGlzLnRyYW5zZm9ybXMucnVuVHJhbnNpdGlvbih0eC5CRVRXRUVOLFxuXHRcdFx0XHRcdHRoaXMuc2l0ZW5hbWUuZWwsIHRoaXMuYWJvdXQuZWwpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyB0aGlzLnRyYW5zZm9ybXMuY2xlYXJPZmZzZXQoXG5cdFx0Ly8gXHQvLyB0aGlzLmJ1bmRsZUxpc3QuZWwsXG5cdFx0Ly8gXHQvLyB0aGlzLmtleXdvcmRMaXN0LmVsLFxuXHRcdC8vIFx0dGhpcy5idW5kbGVMaXN0LndyYXBwZXIpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIG93biBtb2RlbCBjaGFuZ2VkXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9vbk1vZGVsQ2hhbmdlOiBmdW5jdGlvbigpIHtcblx0XHQvLyBcdHRoaXMuc2V0SW1tZWRpYXRlKHRoaXMuY29tbWl0TW9kZWwpO1xuXHRcdC8vIH0sXG5cdFx0Ly9cblx0XHQvLyBjb21taXRNb2RlbDogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gdGhpcy5yZXF1ZXN0UmVuZGVyKFZpZXcuTU9ERUxfSU5WQUxJRCB8IFZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHRcdHRoaXMucmVxdWVzdFJlbmRlcihWaWV3Lk1PREVMX0lOVkFMSUQpO1xuXHRcdC8vIGtleXdvcmRzLmRlc2VsZWN0KCk7XG5cdFx0aWYgKHRoaXMubW9kZWwuaGFzQ2hhbmdlZChcImNvbGxhcHNlZFwiKSkge1xuXHRcdFx0aWYgKHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHRcdC8vIGNsZWFyIGtleXdvcmQgc2VsZWN0aW9uXG5cdFx0XHRcdGtleXdvcmRzLmRlc2VsZWN0KCk7XG5cdFx0XHR9IC8vIGVsc2Uge31cblx0XHRcdHRoaXMua2V5d29yZExpc3QuY29sbGFwc2VkID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0XHR0aGlzLmJ1bmRsZUxpc3QuY29sbGFwc2VkID0gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIik7XG5cdFx0fVxuXHRcdGlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJidW5kbGVcIikpIHtcblx0XHRcdHRoaXMuYnVuZGxlTGlzdC5zZWxlY3RlZEl0ZW0gPSB0aGlzLm1vZGVsLmdldChcImJ1bmRsZVwiKTtcblx0XHRcdHRoaXMua2V5d29yZExpc3QucmVmcmVzaEZpbHRlcigpO1xuXG5cdFx0XHQvLyBpZiAoIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpICYmIHRoaXMuZ3JhcGgpIHtcblx0XHRcdC8vIFx0dGhpcy5saXN0ZW5Ub09uY2UodGhpcy5rZXl3b3JkTGlzdCwgXCJ2aWV3OnJlbmRlcjphZnRlclwiLCBmdW5jdGlvbih2aWV3LCBmbGFncykge1xuXHRcdFx0Ly8gXHRcdGNvbnNvbGUubG9nKFwiJXM6Ol9vbkJ1bmRsZVNlbGVjdCAtPiAlczpbdmlldzpyZW5kZXI6YWZ0ZXJdIGZsYWdzOiVzXCIsIHRoaXMuY2lkLCB2aWV3LmNpZCwgVmlldy5mbGFnc1RvU3RyaW5nKGZsYWdzKSk7XG5cdFx0XHQvLyBcdFx0dGhpcy5ncmFwaC52YWx1ZVRvKCBcImEyYlwiLCAwLCAgMCk7XG5cdFx0XHQvLyBcdFx0Ly8gdGhpcy5ncmFwaC5yZW5kZXJOb3coKTtcblx0XHRcdC8vIFx0XHR0aGlzLmdyYXBoLnZhbHVlVG8oIFwiYTJiXCIsIDEsICBHbG9iYWxzLlRSQU5TSVRJT05fRFVSQVRJT04pO1xuXHRcdFx0Ly8gXHR9KTtcblx0XHRcdC8vIH1cblx0XHRcdC8vIGtleXdvcmRzLmRlc2VsZWN0KCk7XG5cdFx0XHQvLyB0aGlzLmdyYXBoICYmIHRoaXMuZ3JhcGgucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRCk7XG5cdFx0fVxuXHRcdC8vIHZhciBjbGlja0V2ID0gXCJjbGlja1wiOy8vVmlldy5DTElDS19FVkVOVFxuXHRcdGlmICh0aGlzLm1vZGVsLmhhc0NoYW5nZWQoXCJ3aXRoQnVuZGxlXCIpKSB7XG5cdFx0XHQvLyB0aGlzLmtleXdvcmRMaXN0LnJlZnJlc2hGaWx0ZXIoKVxuXHRcdFx0aWYgKHRoaXMubW9kZWwuZ2V0KFwid2l0aEJ1bmRsZVwiKSkge1xuXG5cdFx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihWaWV3LkNMSUNLX0VWRU5ULCB0aGlzLl9vbk5hdmlnYXRpb25DbGljayk7XG5cdFx0XHRcdHRoaXMudnBhbi5vbihcInZwYW5zdGFydFwiLCB0aGlzLl9vblZQYW5TdGFydCk7XG5cdFx0XHRcdHRoaXMuaHBhbi5vbihcImhwYW5zdGFydFwiLCB0aGlzLl9vbkhQYW5TdGFydCk7XG5cdFx0XHRcdC8vIHRoaXMuaHBhbi5vbihcInRhcFwiLCB0aGlzLl9vblRhcCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoVmlldy5DTElDS19FVkVOVCwgdGhpcy5fb25OYXZpZ2F0aW9uQ2xpY2spO1xuXHRcdFx0XHR0aGlzLnZwYW4ub2ZmKFwidnBhbnN0YXJ0XCIsIHRoaXMuX29uVlBhblN0YXJ0KTtcblx0XHRcdFx0dGhpcy5ocGFuLm9mZihcImhwYW5zdGFydFwiLCB0aGlzLl9vbkhQYW5TdGFydCk7XG5cdFx0XHRcdGtleXdvcmRzLmRlc2VsZWN0KCk7XG5cdFx0XHRcdC8vIHRoaXMuaHBhbi5vZmYoXCJ0YXBcIiwgdGhpcy5fb25UYXApO1xuXHRcdFx0fVxuXHRcdFx0Ly8gdGhpcy5ncmFwaC52YWx1ZVRvKClcblx0XHR9XG5cdH0sXG5cblx0Ly8gX29ud2l0aEJ1bmRsZUNoYW5nZTogZnVuY3Rpb24od2l0aEJ1bmRsZSkge1xuXHQvLyBcdGlmICh3aXRoQnVuZGxlKSB7XG5cdC8vIFx0XHR0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsIFwiY29sbGFwc2VkOmNoYW5nZVwiLCBmdW5jdGlvbihjb2xsYXBzZWQpe1xuXHQvL1xuXHQvLyBcdFx0fSk7XG5cdC8vIFx0fSBlbHNlIHtcblx0Ly8gXHRcdHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLm1vZGVsLCBcImNvbGxhcHNlZDpjaGFuZ2VcIiwgZnVuY3Rpb24oY29sbGFwc2VkKXtcblx0Ly9cblx0Ly8gXHRcdH0pO1xuXHQvLyBcdH1cblx0Ly8gfSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBrZXl3b3JkIGNvbGxlY3Rpb24gY2hhbmdlZFxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25LZXl3b3JkU2VsZWN0OiBmdW5jdGlvbihrZXl3b3JkKSB7XG5cdFx0Ly8gdXNlIGNvbGxlY3Rpb24gbGlzdGVuZXIgdG8gYXZvaWQgcmVkdW5kYW50IHJlZnJlc2hGaWx0ZXIgY2FsbHNcblx0XHRpZiAoIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpICYmIHRoaXMuZ3JhcGgpIHtcblx0XHRcdHRoaXMubGlzdGVuVG9PbmNlKHRoaXMuYnVuZGxlTGlzdCwgXCJ2aWV3OnJlbmRlcjphZnRlclwiLCBmdW5jdGlvbih2aWV3LCBmbGFncykge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjpfb25LZXl3b3JkU2VsZWN0IC0+ICVzOlt2aWV3OnJlbmRlcjphZnRlcl0gZmxhZ3M6JXNcIiwgdGhpcy5jaWQsIHZpZXcuY2lkLCBWaWV3LmZsYWdzVG9TdHJpbmcoZmxhZ3MpKTtcblx0XHRcdFx0dGhpcy5ncmFwaC52YWx1ZVRvKFwiYjJhXCIsIDAsIDApO1xuXHRcdFx0XHR0aGlzLmdyYXBoLnZhbHVlVG8oXCJiMmFcIiwgMSwgR2xvYmFscy5UUkFOU0lUSU9OX0RVUkFUSU9OKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aGlzLmJ1bmRsZUxpc3QucmVmcmVzaEZpbHRlcigpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIFVJIEV2ZW50czogYnVuZGxlTGlzdCBrZXl3b3JkTGlzdCBidXR0b25zXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9vbk5hdmlnYXRpb25DbGljazogZnVuY3Rpb24oZXYpIHtcblx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25OYXZpZ2F0aW9uQ2xpY2sgWyVzXSBkZWZhdWx0UHJldmVudGVkOiVzXCIsIHRoaXMuY2lkLCBldi50eXBlLCBldi5kZWZhdWx0UHJldmVudGVkKTtcblx0XHRpZiAoZXYuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXHRcdC8vIGlmIChldi50YXJnZXQgIT09IHRoaXMuZ3JhcGguZWwgJiYgZXYudGFyZ2V0ICE9PSB0aGlzLmVsKSByZXR1cm47XG5cblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGlmICh0aGlzLm1vZGVsLmhhcyhcImJ1bmRsZVwiKSkge1xuXHRcdFx0Ly8gdGhpcy50cmFuc2Zvcm1zLm9mZnNldCgwLCAxLCB0aGlzLmdyYXBoLmVsKTtcblx0XHRcdC8vIHRoaXMudHJhbnNmb3Jtcy52YWxpZGF0ZSgpO1xuXHRcdFx0Ly8gdGhpcy5fc2V0Q29sbGFwc2VkKCF0aGlzLm1vZGVsLmdldChcImNvbGxhcHNlZFwiKSk7XG5cdFx0XHQvLyB0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMubW9kZWwuc2V0KFwiY29sbGFwc2VkXCIsICF0aGlzLm1vZGVsLmdldChcImNvbGxhcHNlZFwiKSk7XG5cdFx0XHQvLyB9KTtcblx0XHR9XG5cdH0sXG5cblx0X3NldENvbGxhcHNlZDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRpZiAodmFsdWUgIT09IHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHQvLyB0aGlzLnRyYW5zZm9ybXMub2Zmc2V0KDAsIDEsIHRoaXMuZ3JhcGguZWwpO1xuXHRcdFx0Ly8gdGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdFx0XHR0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczo6X3NldENvbGxhcHNlZCAtPiAlcyAoc2V0SW1tZWRpYXRlKVwiLCB0aGlzLmNpZCwgdmFsdWUpO1xuXHRcdFx0XHR0aGlzLm1vZGVsLnNldChcImNvbGxhcHNlZFwiLCB2YWx1ZSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBIb3Jpem9udGFsIHRvdWNoL21vdmUgKEhhbW1lckpTKVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X29uSFBhblN0YXJ0OiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMudHJhbnNmb3Jtcy5nZXQodGhpcy5rZXl3b3JkTGlzdC53cmFwcGVyKVxuXHRcdFx0LnN0b3BUcmFuc2l0aW9uKClcblx0XHRcdC5jbGVhck9mZnNldCgpXG5cdFx0XHQudmFsaWRhdGUoKTtcblx0XHQvLyBpZiAodGhpcy5tb2RlbC5nZXQoXCJsYXlvdXROYW1lXCIpICE9IFwibGVmdC1sYXlvdXRcIlxuXHRcdC8vIFx0JiYgdGhpcy5tb2RlbC5nZXQoXCJsYXlvdXROYW1lXCIpICE9IFwiZGVmYXVsdC1sYXlvdXRcIikge1xuXHRcdC8vIFx0cmV0dXJuO1xuXHRcdC8vIH1cblx0XHRpZiAoKEdsb2JhbHMuQlJFQUtQT0lOVFNbXCJtZWRpdW0td2lkZVwiXS5tYXRjaGVzIHx8IEdsb2JhbHMuQlJFQUtQT0lOVFNbXCJtZWRpdW0td2lkZS1zdHJldGNoXCJdLm1hdGNoZXMpXG5cdFx0XHQmJiAodGhpcy5tb2RlbC5nZXQoXCJyb3V0ZU5hbWVcIikgPT09IFwiYnVuZGxlSXRlbVwiKVxuXHRcdFx0JiYgKHRoaXMubW9kZWwuZ2V0KFwiYnVuZGxlXCIpLmdldChcIm1lZGlhXCIpLnNlbGVjdGVkSW5kZXggPD0gMClcblx0XHRcdCYmIHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHR0aGlzLnRyYW5zZm9ybXMuZ2V0KHRoaXMua2V5d29yZExpc3Qud3JhcHBlcikuY2xlYXJDYXB0dXJlKCk7XG5cdFx0XHR0aGlzLl9vbkhQYW5Nb3ZlKGV2KTtcblxuXHRcdFx0dGhpcy5ocGFuLm9uKFwiaHBhbm1vdmVcIiwgdGhpcy5fb25IUGFuTW92ZSk7XG5cdFx0XHR0aGlzLmhwYW4ub24oXCJocGFuZW5kIGhwYW5jYW5jZWxcIiwgdGhpcy5fb25IUGFuRmluYWwpO1xuXHRcdH1cblx0fSxcblxuXHRfb25IUGFuTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHQvLyB2YXIgSFBBTl9EUkFHID0gMTtcblx0XHQvLyB2YXIgSFBBTl9EUkFHID0gMC43NTtcblx0XHR2YXIgSFBBTl9EUkFHID0gNzIwIC8gOTIwO1xuXHRcdHZhciBkZWx0YSA9IGV2LmRlbHRhWDsgLy9ldi50aHJlc2hvbGREZWx0YVg7XG5cdFx0Ly8gdmFyIG1lZGlhSXRlbXMgPSB0aGlzLm1vZGVsLmdldChcImJ1bmRsZVwiKS5nZXQoXCJtZWRpYVwiKTtcblxuXHRcdGlmICh0aGlzLm1vZGVsLmhhcyhcIm1lZGlhXCIpKSB7XG5cdFx0XHRkZWx0YSAqPSAoZXYub2Zmc2V0RGlyZWN0aW9uICYgSGFtbWVyLkRJUkVDVElPTl9MRUZUKSA/XG5cdFx0XHRcdDAuMCA6IEhQQU5fRFJBRztcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGVsdGEgKj0gKGV2Lm9mZnNldERpcmVjdGlvbiAmIEhhbW1lci5ESVJFQ1RJT05fTEVGVCkgP1xuXHRcdFx0XHRIUEFOX0RSQUcgOiBHbG9iYWxzLkhQQU5fT1VUX0RSQUc7XG5cdFx0fVxuXHRcdHRoaXMudHJhbnNmb3Jtcy5vZmZzZXQoZGVsdGEsIG51bGwsIHRoaXMua2V5d29yZExpc3Qud3JhcHBlcik7XG5cdFx0dGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdH0sXG5cblx0X29uSFBhbkZpbmFsOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMuaHBhbi5vZmYoXCJocGFubW92ZVwiLCB0aGlzLl9vbkhQYW5Nb3ZlKTtcblx0XHR0aGlzLmhwYW4ub2ZmKFwiaHBhbmVuZCBocGFuY2FuY2VsXCIsIHRoaXMuX29uSFBhbkZpbmFsKTtcblxuXHRcdC8qIE5PVEU6IGlmIHRoZXJlIGlzIG5vIG1vZGVsIGNoYW5nZSwgc2V0IHR4IGhlcmUuIE90aGVyd2lzZSBqdXN0IHdhaXQgZm9yIHJlbmRlciAqL1xuXHRcdHZhciBrVGYgPSB0aGlzLnRyYW5zZm9ybXMuZ2V0KHRoaXMua2V5d29yZExpc3Qud3JhcHBlcik7XG5cdFx0aWYgKCEodGhpcy5fcmVuZGVyRmxhZ3MgJiBWaWV3Lk1PREVMX0lOVkFMSUQpICYmIGtUZi5oYXNPZmZzZXQpIHtcblx0XHRcdGlmIChrVGYub2Zmc2V0WCAhPSAwKSB7XG5cdFx0XHRcdGtUZi5ydW5UcmFuc2l0aW9uKHR4Lk5PVyk7XG5cdFx0XHR9XG5cdFx0XHRrVGYuY2xlYXJPZmZzZXQoKS52YWxpZGF0ZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIFZlcnRpY2FsIHRvdWNoL21vdmUgKF9vblZQYW4qKVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X2NvbGxhcHNlZE9mZnNldFk6IEdsb2JhbHMuQ09MTEFQU0VfT0ZGU0VULFxuXG5cdF9vblZQYW5TdGFydDogZnVuY3Rpb24oZXYpIHtcblx0XHR0aGlzLnZwYW4ub24oXCJ2cGFubW92ZVwiLCB0aGlzLl9vblZQYW5Nb3ZlKTtcblx0XHR0aGlzLnZwYW4ub24oXCJ2cGFuZW5kIHZwYW5jYW5jZWxcIiwgdGhpcy5fb25WUGFuRmluYWwpO1xuXG5cblx0XHR0aGlzLnRyYW5zZm9ybXMuc3RvcFRyYW5zaXRpb24odGhpcy52cGFuR3JvdXApO1xuXHRcdHRoaXMudHJhbnNmb3Jtcy5jbGVhckNhcHR1cmUodGhpcy52cGFuR3JvdXApO1xuXHRcdC8vIHRoaXMudHJhbnNmb3Jtcy5zdG9wVHJhbnNpdGlvbih0aGlzLmJ1bmRsZUxpc3QuZWwsIHRoaXMua2V5d29yZExpc3QuZWwpOyAvLywgdGhpcy5ncmFwaC5lbCk7XG5cdFx0Ly8gLy8gdGhpcy50cmFuc2Zvcm1zLmNsZWFyT2Zmc2V0KHRoaXMuYnVuZGxlTGlzdC5lbCwgdGhpcy5rZXl3b3JkTGlzdC5lbCk7XG5cdFx0Ly8gLy8gdGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdFx0Ly8gdGhpcy50cmFuc2Zvcm1zLmNsZWFyQ2FwdHVyZSh0aGlzLmJ1bmRsZUxpc3QuZWwsIHRoaXMua2V5d29yZExpc3QuZWwpOyAvLywgdGhpcy5ncmFwaC5lbCk7XG5cdFx0Ly9cblx0XHQvLyBpZiAoIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0Ly8gXHR0aGlzLnRyYW5zZm9ybXMuc3RvcFRyYW5zaXRpb24odGhpcy5ncmFwaC5lbCk7XG5cdFx0Ly8gXHR0aGlzLnRyYW5zZm9ybXMuY2xlYXJDYXB0dXJlKHRoaXMuZ3JhcGguZWwpO1xuXHRcdC8vIH1cblx0XHQvLyAvLyB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXItY2hhbmdpbmdcIik7XG5cblx0XHQvLyB0aGlzLl9vblZQYW5Nb3ZlKGV2KTtcblx0fSxcblxuXHRfb25WUGFuTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHR2YXIgZGVsdGEgPSB0aGlzLl9jb21wdXRlVlBhbkRlbHRhKGV2LmRlbHRhWSk7IC8vZXYudGhyZXNob2xkRGVsdGFZKTtcblxuXHRcdHRoaXMudHJhbnNmb3Jtcy5vZmZzZXQoMCwgZGVsdGEsIHRoaXMudnBhbkdyb3VwKTtcblx0XHQvLyB0aGlzLnRyYW5zZm9ybXMub2Zmc2V0KDAsIGRlbHRhLFxuXHRcdC8vIFx0dGhpcy5idW5kbGVMaXN0LmVsLCB0aGlzLmtleXdvcmRMaXN0LmVsKTtcblx0XHQvLyBpZiAoIXRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0Ly8gXHR0aGlzLnRyYW5zZm9ybXMub2Zmc2V0KDAsIGRlbHRhLCB0aGlzLmdyYXBoLmVsKTtcblx0XHQvLyB9XG5cdFx0dGhpcy50cmFuc2Zvcm1zLnZhbGlkYXRlKCk7XG5cdH0sXG5cblx0X29uVlBhbkZpbmFsOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMudnBhbi5vZmYoXCJ2cGFubW92ZVwiLCB0aGlzLl9vblZQYW5Nb3ZlKTtcblx0XHR0aGlzLnZwYW4ub2ZmKFwidnBhbmVuZCB2cGFuY2FuY2VsXCIsIHRoaXMuX29uVlBhbkZpbmFsKTtcblxuXHRcdC8vIHRoaXMuX29uVlBhbk1vdmUoZXYpO1xuXHRcdC8vIHRoaXMudHJhbnNmb3Jtcy52YWxpZGF0ZSgpO1xuXG5cdFx0dGhpcy5zZXRJbW1lZGlhdGUoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyB0aGlzLnRyYW5zZm9ybXMuY2xlYXJPZmZzZXQodGhpcy5idW5kbGVMaXN0LmVsLCB0aGlzLmtleXdvcmRMaXN0LmVsLCB0aGlzLmdyYXBoLmVsKTtcblx0XHRcdGlmICh0aGlzLndpbGxDb2xsYXBzZWRDaGFuZ2UoZXYpKSB7XG5cdFx0XHRcdC8vIHRoaXMuX3NldENvbGxhcHNlZCghdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikpO1xuXHRcdFx0XHR0aGlzLm1vZGVsLnNldChcImNvbGxhcHNlZFwiLCAhdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKFZpZXcuTEFZT1VUX0lOVkFMSUQpOyAvLy5yZW5kZXJOb3coKTtcblx0XHR9KTtcblx0fSxcblxuXHR3aWxsQ29sbGFwc2VkQ2hhbmdlOiBmdW5jdGlvbihldikge1xuXHRcdHJldHVybiBldi50eXBlID09IFwidnBhbmVuZFwiID8gdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikgP1xuXHRcdFx0ZXYuZGVsdGFZID4gR2xvYmFscy5DT0xMQVBTRV9USFJFU0hPTEQgOlxuXHRcdFx0ZXYuZGVsdGFZIDwgLUdsb2JhbHMuQ09MTEFQU0VfVEhSRVNIT0xEIDpcblx0XHRcdGZhbHNlO1xuXHR9LFxuXG5cdF9jb21wdXRlVlBhbkRlbHRhOiBmdW5jdGlvbihkZWx0YSkge1xuXHRcdHZhciBjb2xsYXBzZWQgPSB0aGlzLm1vZGVsLmdldChcImNvbGxhcHNlZFwiKTtcblx0XHR2YXIgbWF4RGVsdGEgPSB0aGlzLl9jb2xsYXBzZWRPZmZzZXRZOyAvLyArIE1hdGguYWJzKGV2LnRocmVzaG9sZE9mZnNldFkpO1xuXHRcdC8vIGNoZWNrIGlmIGRpcmVjdGlvbiBpcyBhbGlnbmVkIHdpdGggY29sbGFwc2VkL2V4cGFuZFxuXHRcdHZhciBpc1ZhbGlkRGlyID0gY29sbGFwc2VkID8gKGRlbHRhID4gMCkgOiAoZGVsdGEgPCAwKTtcblx0XHR2YXIgbW92ZUZhY3RvciA9IGNvbGxhcHNlZCA/IDEgLSBHbG9iYWxzLlZQQU5fRFJBRyA6IEdsb2JhbHMuVlBBTl9EUkFHO1xuXG5cdFx0ZGVsdGEgPSBNYXRoLmFicyhkZWx0YSk7IC8vIHJlbW92ZSBzaWduXG5cdFx0ZGVsdGEgKj0gbW92ZUZhY3Rvcjtcblx0XHRtYXhEZWx0YSAqPSBtb3ZlRmFjdG9yO1xuXG5cdFx0aWYgKGlzVmFsaWREaXIpIHtcblx0XHRcdGlmIChkZWx0YSA+IG1heERlbHRhKSB7IC8vIG92ZXJzaG9vdGluZ1xuXHRcdFx0XHRkZWx0YSA9ICgoZGVsdGEgLSBtYXhEZWx0YSkgKiBHbG9iYWxzLlZQQU5fT1VUX0RSQUcpICsgbWF4RGVsdGE7XG5cdFx0XHR9IGVsc2UgeyAvLyBubyBvdmVyc2hvb3Rpbmdcblx0XHRcdFx0Ly8gZGVsdGEgPSBkZWx0YTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGVsdGEgPSAoLWRlbHRhKSAqIEdsb2JhbHMuVlBBTl9PVVRfRFJBRzsgLy8gZGVsdGEgaXMgb3Bwb3NpdGVcblx0XHR9XG5cdFx0ZGVsdGEgKj0gY29sbGFwc2VkID8gMC41IDogLTE7IC8vIHJlYXBwbHkgc2lnblxuXHRcdHJldHVybiBkZWx0YTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIENyZWF0ZSBjaGlsZHJlbiBjb21wb25lbnRzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vICNzaXRlLW5hbWVcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdGNyZWF0ZVNpdGVuYW1lQnV0dG9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IG5ldyBWaWV3KHtcblx0XHRcdGVsOiBcIiNzaXRlLW5hbWVcIixcblx0XHRcdGV2ZW50czoge1xuXHRcdFx0XHRcImNsaWNrIGFcIjogZnVuY3Rpb24oZG9tZXYpIHtcblx0XHRcdFx0XHRkb21ldi5kZWZhdWx0UHJldmVudGVkIHx8IGRvbWV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzpjbGlja1wiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHZpZXcud3JhcHBlciA9IHZpZXcuZWwucGFyZW50RWxlbWVudDtcblx0XHR0aGlzLmxpc3RlblRvKHZpZXcsIFwidmlldzpjbGlja1wiLCB0aGlzLl9vblNpdGVuYW1lQ2xpY2spO1xuXHRcdHJldHVybiB2aWV3O1xuXHR9LFxuXG5cdF9vblNpdGVuYW1lQ2xpY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHN3aXRjaCAodGhpcy5tb2RlbC5nZXQoXCJyb3V0ZU5hbWVcIikpIHtcblx0XHRcdGNhc2UgXCJtZWRpYS1pdGVtXCI6XG5cdFx0XHRjYXNlIFwiYnVuZGxlLWl0ZW1cIjpcblx0XHRcdFx0Ly8gaWYgKHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSB7XG5cdFx0XHRcdC8vIFx0dGhpcy5fc2V0Q29sbGFwc2VkKGZhbHNlKTtcblx0XHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdFx0Y29udHJvbGxlci5kZXNlbGVjdEJ1bmRsZSgpO1xuXHRcdFx0XHQvLyB9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImFydGljbGUtaXRlbVwiOlxuXHRcdFx0XHRjb250cm9sbGVyLmRlc2VsZWN0QXJ0aWNsZSgpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH0sXG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyAuYXJ0aWNsZS1idXR0b25cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdGNyZWF0ZUFydGljbGVCdXR0b246IGZ1bmN0aW9uKGFydGljbGVJdGVtKSB7XG5cdFx0dmFyIHZpZXcgPSBuZXcgQXJ0aWNsZUJ1dHRvbih7XG5cdFx0XHRlbDogXCIuYXJ0aWNsZS1idXR0b25bZGF0YS1oYW5kbGU9J2Fib3V0J11cIixcblx0XHRcdG1vZGVsOiBhcnRpY2xlSXRlbVxuXHRcdH0pLnJlbmRlcigpO1xuXHRcdHZpZXcud3JhcHBlciA9IHZpZXcuZWwucGFyZW50RWxlbWVudDtcblx0XHR0aGlzLmxpc3RlblRvKHZpZXcsIFwidmlldzpjbGlja1wiLCB0aGlzLl9vbkFydGljbGVDbGljayk7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0X29uQXJ0aWNsZUNsaWNrOiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0c3dpdGNoICh0aGlzLm1vZGVsLmdldChcInJvdXRlTmFtZVwiKSkge1xuXHRcdFx0Y2FzZSBcImFydGljbGUtaXRlbVwiOlxuXHRcdFx0XHRjb250cm9sbGVyLmRlc2VsZWN0QXJ0aWNsZSgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJyb290XCI6XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjb250cm9sbGVyLnNlbGVjdEFydGljbGUoaXRlbSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fSxcblxuXHRjcmVhdGVBYm91dEJ1dHRvbjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuY3JlYXRlQXJ0aWNsZUJ1dHRvbihhcnRpY2xlcy5maW5kV2hlcmUoeyBoYW5kbGU6IFwiYWJvdXRcIiB9KSk7XG5cdH0sXG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyAjYnVuZGxlLWxpc3Rcblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0gZWwge0hUTUxFbGVtZW50fVxuXHQgKiBAcmV0dXJuIHttb2R1bGU6YXBwL2Jhc2Uvdmlldy9jb21wb25lbnQvRmlsdGVyYWJsZUxpc3RWaWV3fVxuXHQgKi9cblx0Y3JlYXRlQnVuZGxlTGlzdDogZnVuY3Rpb24oZWwpIHtcblx0XHR2YXIgdmlldyA9IG5ldyBGaWx0ZXJhYmxlTGlzdFZpZXcoe1xuXHRcdFx0ZWw6IFwiI2J1bmRsZS1saXN0XCIsXG5cdFx0XHRjb2xsZWN0aW9uOiBidW5kbGVzLFxuXHRcdFx0Y29sbGFwc2VkOiBmYWxzZSxcblx0XHRcdGZpbHRlckZuOiBmdW5jdGlvbihidW5kbGUsIGluZGV4LCBhcnIpIHtcblx0XHRcdFx0cmV0dXJuIGtleXdvcmRzLnNlbGVjdGVkID9cblx0XHRcdFx0XHRidW5kbGUuZ2V0KFwia0lkc1wiKS5pbmRleE9mKGtleXdvcmRzLnNlbGVjdGVkLmlkKSAhPT0gLTEgOiBmYWxzZTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cdFx0dmlldy53cmFwcGVyID0gdmlldy5lbC5wYXJlbnRFbGVtZW50O1xuXHRcdHRoaXMubGlzdGVuVG8odmlldywgXCJ2aWV3OnNlbGVjdDpvbmUgdmlldzpzZWxlY3Q6bm9uZVwiLCBmdW5jdGlvbihidW5kbGUpIHtcblx0XHRcdHRoaXMuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb250cm9sbGVyLnNlbGVjdEJ1bmRsZShidW5kbGUpO1xuXHRcdFx0fSk7XG5cdFx0fSlcblx0XHR0aGlzLmxpc3RlblRvKHZpZXcsIFwidmlldzpzZWxlY3Q6c2FtZVwiLCB0aGlzLl9vbkJ1bmRsZUxpc3RTYW1lKTtcblx0XHRyZXR1cm4gdmlldztcblx0fSxcblxuXHRfb25CdW5kbGVMaXN0U2FtZTogZnVuY3Rpb24oYnVuZGxlKSB7XG5cdFx0Ly8gdGhpcy50cmFuc2Zvcm1zLm9mZnNldCgwLCAxLCB0aGlzLmdyYXBoLmVsKTtcblx0XHQvLyB0aGlzLnRyYW5zZm9ybXMudmFsaWRhdGUoKTtcblx0XHQvLyB0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1vZGVsLnNldChcImNvbGxhcHNlZFwiLCAhdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikpO1xuXHRcdC8vIH0pO1xuXHR9LFxuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gI2tleXdvcmQtbGlzdFxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0LyoqXG5cdCAqIEBwYXJhbSBlbCB7SFRNTEVsZW1lbnR9XG5cdCAqIEByZXR1cm4ge21vZHVsZTphcHAvYmFzZS92aWV3L2NvbXBvbmVudC9Hcm91cGluZ0xpc3RWaWV3fVxuXHQgKi9cblx0Y3JlYXRlS2V5d29yZExpc3Q6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0dmFyIHZpZXcgPSBuZXcgR3JvdXBpbmdMaXN0Vmlldyh7XG5cdFx0XHRlbDogXCIja2V5d29yZC1saXN0XCIsXG5cdFx0XHRjb2xsZWN0aW9uOiBrZXl3b3Jkcyxcblx0XHRcdGNvbGxhcHNlZDogZmFsc2UsXG5cdFx0XHRmaWx0ZXJGbjogZnVuY3Rpb24oaXRlbSwgaWR4LCBhcnIpIHtcblx0XHRcdFx0cmV0dXJuIGJ1bmRsZXMuc2VsZWN0ZWQgP1xuXHRcdFx0XHRcdChidW5kbGVzLnNlbGVjdGVkLmdldChcImtJZHNcIikuaW5kZXhPZihpdGVtLmlkKSAhPT0gLTEpIDogZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0Z3JvdXBpbmdGbjogZnVuY3Rpb24oaXRlbSwgaWR4LCBhcnIpIHtcblx0XHRcdFx0cmV0dXJuIHR5cGVzLmdldChpdGVtLmdldChcInRJZFwiKSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdHZpZXcud3JhcHBlciA9IHZpZXcuZWwucGFyZW50RWxlbWVudDtcblx0XHR2aWV3Lmxpc3RlblRvKGtleXdvcmRzLCBcInNlbGVjdDpvbmUgc2VsZWN0Om5vbmVcIiwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0dmlldy5zZWxlY3RlZEl0ZW0gPSBpdGVtO1xuXHRcdH0pO1xuXHRcdHRoaXMubGlzdGVuVG8odmlldywgXCJ2aWV3OnNlbGVjdDpvbmUgdmlldzpzZWxlY3Q6bm9uZVwiLCB0aGlzLl9vbktleXdvcmRMaXN0Q2hhbmdlKTtcblx0XHRyZXR1cm4gdmlldztcblx0fSxcblxuXHRfb25LZXl3b3JkTGlzdENoYW5nZTogZnVuY3Rpb24oa2V5d29yZCkge1xuXHRcdGlmICghdGhpcy5tb2RlbC5nZXQoXCJjb2xsYXBzZWRcIikpIHtcblx0XHRcdGtleXdvcmRzLnNlbGVjdChrZXl3b3JkKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyAjbmF2LWdyYXBoXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHQvKipcblx0ICogQHBhcmFtIGxpc3RBIHttb2R1bGU6YXBwL2Jhc2Uvdmlldy9jb21wb25lbnQvRmlsdGVyYWJsZUxpc3RWaWV3fVxuXHQgKiBAcGFyYW0gbGlzdEIge21vZHVsZTphcHAvYmFzZS92aWV3L2NvbXBvbmVudC9GaWx0ZXJhYmxlTGlzdFZpZXd9XG5cdCAqIEBwYXJhbSBwYXJlbnRFbCB7SFRNTEVsZW1lbnR9XG5cdCAqIEByZXR1cm4ge21vZHVsZTphcHAvYmFzZS92aWV3L2NvbXBvbmVudC9HcmFwaFZpZXd9XG5cdCAqL1xuXHRjcmVhdGVHcmFwaFZpZXc6IGZ1bmN0aW9uKGxpc3RBLCBsaXN0QiwgcGFyZW50RWwpIHtcblx0XHR2YXIgdmlldyA9IG5ldyBHcmFwaFZpZXcoe1xuXHRcdFx0aWQ6IFwibmF2LWdyYXBoXCIsXG5cdFx0XHRsaXN0QTogbGlzdEEsXG5cdFx0XHRsaXN0QjogbGlzdEIsXG5cdFx0XHRtb2RlbDogdGhpcy5tb2RlbCxcblx0XHRcdHVzZU9wYXF1ZTogZmFsc2Vcblx0XHR9KTtcblx0XHRwYXJlbnRFbCB8fCAocGFyZW50RWwgPSB0aGlzLmVsKTtcblx0XHRwYXJlbnRFbC5pbnNlcnRCZWZvcmUodmlldy5lbCwgcGFyZW50RWwuZmlyc3RFbGVtZW50Q2hpbGQpO1xuXHRcdHJldHVybiB2aWV3O1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogSG9yaXpvbnRhbCB0b3VjaC9tb3ZlIChNdXRhdGlvbk9ic2VydmVyKVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Lypcblx0X2JlZ2luVHJhbnNmb3JtT2JzZXJ2ZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCEoR2xvYmFscy5CUkVBS1BPSU5UU1tcIm1lZGl1bS13aWRlXCJdLm1hdGNoZXMgJiYgdGhpcy5tb2RlbC5nZXQoXCJidW5kbGVcIikuZ2V0KFwibWVkaWFcIikuc2VsZWN0ZWRJbmRleCA8PSAwICYmIHRoaXMubW9kZWwuZ2V0KFwiY29sbGFwc2VkXCIpKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR2YXIgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJvdXNlbCA+IC5lbXB0eS1pdGVtXCIpO1xuXHRcdGlmICh0YXJnZXQgPT09IG51bGwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLl90cmFuc2Zvcm1PYnNlcnZlcikge1xuXHRcdFx0dGhpcy5fdHJhbnNmb3JtT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLl9vblRyYW5zZm9ybU11dGF0aW9uKTtcblx0XHR9XG5cdFx0dGhpcy5fdHJhbnNmb3JtT2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXQsIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbXCJzdHlsZVwiXSB9KTtcblx0XHR0aGlzLmhwYW4ub24oXCJocGFuZW5kIGhwYW5jYW5jZWxcIiwgdGhpcy5fZW5kVHJhbnNmb3JtT2JzZXJ2ZSk7XG5cdFx0dGhpcy50cmFuc2Zvcm1zLmdldCh0aGlzLmtleXdvcmRMaXN0LndyYXBwZXIpXG5cdFx0XHQuc3RvcFRyYW5zaXRpb24oKVxuXHRcdFx0LmNsZWFyT2Zmc2V0KClcblx0XHRcdC5jbGVhckNhcHR1cmUoKVxuXHRcdFx0LnZhbGlkYXRlKCk7XG5cdH0sXG5cblx0X2VuZFRyYW5zZm9ybU9ic2VydmU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuX3RyYW5zZm9ybU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR0aGlzLmhwYW4ub2ZmKFwiaHBhbmVuZCBocGFuY2FuY2VsXCIsIHRoaXMuX2VuZFRyYW5zZm9ybU9ic2VydmUpO1xuXHRcdHRoaXMudHJhbnNmb3Jtcy5nZXQodGhpcy5rZXl3b3JkTGlzdC53cmFwcGVyKVxuXHRcdFx0LmNsZWFyT2Zmc2V0KClcblx0XHRcdC5ydW5UcmFuc2l0aW9uKHR4Lk5PVylcblx0XHRcdC52YWxpZGF0ZSgpO1xuXHR9LFxuXG5cdF9vblRyYW5zZm9ybU11dGF0aW9uOiBmdW5jdGlvbihtdXRhdGlvbnMpIHtcblx0XHR2YXIgdFZpZXcsIHRNZXRyaWNzLCB0Q3NzLCBkVHhPYmosIHBvcztcblxuXHRcdC8vIHRoaXMua2V5d29yZExpc3Qud3JhcHBlci5zdHlsZVtwcmVmaXhlZFByb3BlcnR5KFwidHJhbnNmb3JtXCIpXTtcblx0XHQvLyB0cmFuc2Zvcm0gPSBtdXRhdGlvbnNbMF0udGFyZ2V0LnN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJlZml4ZWRQcm9wZXJ0eShcInRyYW5zZm9ybVwiKSk7XG5cblx0XHR0VmlldyA9IFZpZXcuZmluZEJ5RWxlbWVudChtdXRhdGlvbnNbMF0udGFyZ2V0KTtcblx0XHRpZiAodFZpZXcpIHtcblx0XHRcdHRNZXRyaWNzID0gdFZpZXcubWV0cmljcztcblx0XHRcdGRUeE9iaiA9IHRoaXMudHJhbnNmb3Jtcy5nZXQodGhpcy5rZXl3b3JkTGlzdC53cmFwcGVyKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiJXM6Ol9vblRyYW5zZm9ybU11dGF0aW9uIFt3aXRoTWVkaWE6ICVzXSB0YXJnZXQ6ICglZlxcKyVmKSAlZiB3cmFwcGVyOiAoJWYpICVmXCIsIHRoaXMuY2lkLFxuXHRcdFx0XHR0aGlzLm1vZGVsLmhhcyhcIm1lZGlhXCIpLFxuXHRcdFx0XHR0TWV0cmljcy50cmFuc2xhdGVYLCB0TWV0cmljcy53aWR0aCwgdE1ldHJpY3MudHJhbnNsYXRlWCArIHRNZXRyaWNzLndpZHRoLFxuXHRcdFx0XHRkVHhPYmouY2FwdHVyZWRYLCB0TWV0cmljcy50cmFuc2xhdGVYIC0gZFR4T2JqLmNhcHR1cmVkWCxcblx0XHRcdFx0dE1ldHJpY3Ncblx0XHRcdCk7XG5cblx0XHRcdHRoaXMudHJhbnNmb3Jtcy5vZmZzZXQodE1ldHJpY3MudHJhbnNsYXRlWCAtIGRUeE9iai5jYXB0dXJlZFgsIHZvaWQgMCwgdGhpcy5rZXl3b3JkTGlzdC53cmFwcGVyKTtcblx0XHRcdHRoaXMudHJhbnNmb3Jtcy52YWxpZGF0ZSgpO1xuXHRcdH1cblx0fSxcblx0Ki9cbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgUHJpb3JpdHlRdWV1ZSA9IGZ1bmN0aW9uKG9mZnNldCkge1xuXHR0aGlzLl9vZmZzZXQgPSBvZmZzZXQgfCAwO1xuXHR0aGlzLl9pdGVtcyA9IFtdO1xuXHR0aGlzLl9wcmlvcml0aWVzID0gW107XG5cdHRoaXMuX251bUl0ZW1zID0gMDtcbn07XG5cblByaW9yaXR5UXVldWUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh7XG5cdGVucXVldWU6IGZ1bmN0aW9uKGl0ZW0sIHByaW9yaXR5KSB7XG5cdFx0dmFyIGkgPSB0aGlzLl9pdGVtcy5sZW5ndGg7XG5cdFx0dGhpcy5faXRlbXNbaV0gPSBpdGVtO1xuXHRcdHRoaXMuX3ByaW9yaXRpZXNbaV0gPSB7XG5cdFx0XHRwcmlvcml0eTogKHByaW9yaXR5IHwgMCksXG5cdFx0XHRpbmRleDogaVxuXHRcdH07XG5cdFx0dGhpcy5fbnVtSXRlbXMrKztcblx0XHQvLyBjb25zb2xlLmxvZyhcIkZyYW1lUXVldWU6OlJlcXVlc3RRdWV1ZTo6ZW5xdWV1ZSgpIFtudW1JdGVtczolaV0gSUQ6JWlcIiwgdGhpcy5fbnVtSXRlbXMsIHRoaXMuX29mZnNldCArIGkpO1xuXHRcdHJldHVybiB0aGlzLl9vZmZzZXQgKyBpO1xuXHR9LFxuXG5cdGNvbnRhaW5zOiBmdW5jdGlvbihpbmRleCkge1xuXHRcdGluZGV4IC09IHRoaXMub2Zmc2V0O1xuXHRcdHJldHVybiAwIDw9IGluZGV4ICYmIGluZGV4IDwgdGhpcy5faXRlbXMubGVuZ3RoO1xuXHR9LFxuXG5cdHNraXA6IGZ1bmN0aW9uKGluZGV4KSB7XG5cdFx0dmFyIGksIGl0ZW07XG5cdFx0aSA9IGluZGV4IC0gdGhpcy5fb2Zmc2V0O1xuXHRcdGlmICgwID4gaSB8fCBpID49IHRoaXMuX2l0ZW1zLmxlbmd0aCkge1xuXHRcdFx0Ly8gXHRjb25zb2xlLndhcm4oXCJGcmFtZVF1ZXVlOjpSZXF1ZXN0UXVldWU6OnNraXAoaWQ6JWkpIG91dCBvZiByYW5nZSAoJWktJWkpXCIsIGluZGV4LCB0aGlzLl9vZmZzZXQsIHRoaXMuX29mZnNldCArICh0aGlzLl9udW1JdGVtcyAtIDEpKTtcblx0XHRcdHJldHVybiB2b2lkIDA7XG5cdFx0fVxuXHRcdGl0ZW0gPSB0aGlzLl9pdGVtc1tpXTtcblx0XHRpZiAoaXRlbSAhPT0gbnVsbCkge1xuXHRcdFx0Ly8gaWYgKGl0ZW0gPSB0aGlzLl9pdGVtc1tpXSkge1xuXHRcdFx0dGhpcy5faXRlbXNbaV0gPSBudWxsO1xuXHRcdFx0dGhpcy5fbnVtSXRlbXMtLTtcblx0XHR9XG5cdFx0cmV0dXJuIGl0ZW07XG5cdH0sXG5cblx0aW5kZXhlczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGl0ZW1zID0gdGhpcy5fcHJpb3JpdGllcy5jb25jYXQoKTtcblx0XHRpdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdGlmIChhLnByaW9yaXR5ID4gYi5wcmlvcml0eSlcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHRpZiAoYS5wcmlvcml0eSA8IGIucHJpb3JpdHkpXG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH0pO1xuXHRcdGl0ZW1zLmZvckVhY2goZnVuY3Rpb24obywgaSwgYSkge1xuXHRcdFx0YVtpXSA9IG8uaW5kZXg7XG5cdFx0fSwgdGhpcyk7XG5cdFx0cmV0dXJuIGl0ZW1zO1xuXHR9LFxuXG5cdGl0ZW1zOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaXRlbXMgPSB0aGlzLl9wcmlvcml0aWVzLmNvbmNhdCgpO1xuXHRcdGl0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0aWYgKGEucHJpb3JpdHkgPiBiLnByaW9yaXR5KVxuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdGlmIChhLnByaW9yaXR5IDwgYi5wcmlvcml0eSlcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fSk7XG5cdFx0aXRlbXMuZm9yRWFjaChmdW5jdGlvbihvLCBpLCBhKSB7XG5cdFx0XHRhW2ldID0gdGhpcy5faXRlbXNbby5pbmRleF07XG5cdFx0fSwgdGhpcyk7XG5cdFx0cmV0dXJuIGl0ZW1zO1xuXHR9LFxuXG5cdF9lbXB0eTogZnVuY3Rpb24ob2Zmc2V0KSB7XG5cdFx0dGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xuXHRcdHRoaXMuX2l0ZW1zLmxlbmd0aCA9IDA7XG5cdFx0dGhpcy5fcHJpb3JpdGllcy5sZW5ndGggPSAwO1xuXHRcdHRoaXMuX251bUl0ZW1zID0gMDtcblx0fVxufSwge1xuXG5cdG9mZnNldDoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fb2Zmc2V0O1xuXHRcdH1cblx0fSxcblxuXHRsZW5ndGg6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aDtcblx0XHR9XG5cdH0sXG5cblx0bnVtSXRlbXM6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX251bUl0ZW1zO1xuXHRcdH1cblx0fSxcbn0pO1xuXG52YXIgQ2FsbGJhY2tRdWV1ZSA9IGZ1bmN0aW9uKHJlcXVlc3RGbiwgY2FuY2VsRm4pIHtcblx0dGhpcy5fbmV4dFF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUoMCk7XG5cdHRoaXMuX2N1cnJRdWV1ZSA9IG51bGw7XG5cblx0Ly8gdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuXHR0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG5cdHRoaXMuX3J1bklkID0gLTE7XG5cblx0dGhpcy5fcmVxdWVzdEZuID0gcmVxdWVzdEZuO1xuXHR0aGlzLl9jYW5jZWxGbiA9IGNhbmNlbEZuO1xuXHR0aGlzLl9ydW5RdWV1ZSA9IHRoaXMuX3J1blF1ZXVlLmJpbmQodGhpcylcbn07XG5cbkNhbGxiYWNrUXVldWUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh7XG5cdC8qKlxuXHQgKiBAcGFyYW0gdHN0YW1wIHtpbnR9XG5cdCAqL1xuXHRfcnVuUXVldWU6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl9ydW5uaW5nKSB0aHJvdyBuZXcgRXJyb3IoXCJ3dGYhISFcIik7XG5cblx0XHR0aGlzLl9jdXJyUXVldWUgPSB0aGlzLl9uZXh0UXVldWU7XG5cdFx0dGhpcy5fbmV4dFF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUodGhpcy5fY3VyclF1ZXVlLm9mZnNldCArIHRoaXMuX2N1cnJRdWV1ZS5sZW5ndGgpO1xuXG5cdFx0dGhpcy5fcnVuSWQgPSAtMTtcblx0XHR0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcblxuXHRcdHZhciBpLCBpdGVtO1xuXHRcdHZhciBpbmRleGVzID0gdGhpcy5fY3VyclF1ZXVlLmluZGV4ZXMoKTtcblx0XHR2YXIgaXRlbXMgPSB0aGlzLl9jdXJyUXVldWUuX2l0ZW1zO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpdGVtID0gaXRlbXNbaW5kZXhlc1tpXV07XG5cdFx0XHRpZiAoaXRlbSAhPT0gbnVsbCkge1xuXHRcdFx0XHRpdGVtLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gdmFyIHNlbGYgPSB0aGlzO1xuXHRcdC8vIHRoaXMuX2N1cnJRdWV1ZS5pbmRleGVzKCkuZm9yRWFjaChmdW5jdGlvbihpbmRleCkge1xuXHRcdC8vIFx0dmFyIGZuID0gc2VsZi5fY3VyclF1ZXVlLl9pdGVtc1tpbmRleF07XG5cdFx0Ly8gXHRpZiAoZm4gIT09IG51bGwpIHtcblx0XHQvLyBcdFx0Zm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9KTtcblx0XHR0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG5cdFx0dGhpcy5fY3VyclF1ZXVlID0gbnVsbDtcblxuXHRcdGlmICh0aGlzLl9uZXh0UXVldWUubnVtSXRlbXMgPiAwKSB7XG5cdFx0XHR0aGlzLl9ydW5JZCA9IHRoaXMuX3JlcXVlc3RGbi5jYWxsKG51bGwsIHRoaXMuX3J1blF1ZXVlKTtcblx0XHRcdC8vIHRoaXMuX3J1bklkID0gdGhpcy5fcmVxdWVzdEZuKHRoaXMuX3J1blF1ZXVlKTtcblx0XHR9XG5cdH0sXG5cblx0LyoqXG5cdCAqIEBwYXJhbSBmbiB7RnVuY3Rpb259XG5cdCAqIEBwYXJhbSBwcmlvcml0eSB7aW50fVxuXHQgKiBAcmV0dXJuIHtpbnR9XG5cdCAqL1xuXHRyZXF1ZXN0OiBmdW5jdGlvbihmbiwgcHJpb3JpdHkpIHtcblx0XHQvLyBpZiAoIXRoaXMuX3J1bm5pbmcgJiYgIXRoaXMuX3BlbmRpbmcpIHtcblx0XHQvLyBcdHRoaXMuX3BlbmRpbmcgPSB0cnVlO1xuXHRcdC8vIFx0Y29uc29sZS53YXJuKFwiRnJhbWVRdWV1ZTo6cmVxdWVzdCBzZXRJbW1lZGlhdGU6IHBlbmRpbmdcIik7XG5cdFx0Ly8gXHRzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKSB7XG5cdFx0Ly8gXHRcdHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcblx0XHQvLyBcdFx0aWYgKHRoaXMuX25leHRRdWV1ZS5udW1JdGVtcyA+IDApIHtcblx0XHQvLyBcdFx0XHR0aGlzLl9ydW5JZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3J1blF1ZXVlKTtcblx0XHQvLyBcdFx0XHRjb25zb2xlLndhcm4oXCJGcmFtZVF1ZXVlOjpyZXF1ZXN0IHNldEltbWVkaWF0ZTogcmFmOiVpIGZvciAlaSBpdGVtc1wiLCB0aGlzLl9ydW5JZCwgdGhpcy5fbmV4dFF1ZXVlLm51bUl0ZW1zKTtcblx0XHQvLyBcdFx0fSBlbHNlIHtcblx0XHQvLyBcdFx0XHRjb25zb2xlLndhcm4oXCJGcmFtZVF1ZXVlOjpyZXF1ZXN0IHNldEltbWVkaWF0ZTogbm8gaXRlbXNcIik7XG5cdFx0Ly8gXHRcdH1cblx0XHQvLyBcdH0pO1xuXHRcdC8vIH1cblx0XHRpZiAoIXRoaXMuX3J1bm5pbmcgJiYgdGhpcy5fcnVuSWQgPT09IC0xKSB7XG5cdFx0XHR0aGlzLl9ydW5JZCA9IHRoaXMuX3JlcXVlc3RGbi5jYWxsKG51bGwsIHRoaXMuX3J1blF1ZXVlKTtcblx0XHRcdC8vIHRoaXMuX3J1bklkID0gdGhpcy5fcmVxdWVzdEZuKHRoaXMuX3J1blF1ZXVlKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX25leHRRdWV1ZS5lbnF1ZXVlKGZuLCBwcmlvcml0eSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEBwYXJhbSBpZCB7aW50fVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbj99XG5cdCAqL1xuXHRjYW5jZWw6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0dmFyIGZuO1xuXHRcdGlmICh0aGlzLl9ydW5uaW5nKSB7XG5cdFx0XHRmbiA9IHRoaXMuX2N1cnJRdWV1ZS5za2lwKGlkKSB8fCB0aGlzLl9uZXh0UXVldWUuc2tpcChpZCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZuID0gdGhpcy5fbmV4dFF1ZXVlLnNraXAoaWQpO1xuXHRcdFx0aWYgKCh0aGlzLl9ydW5JZCAhPT0gLTEpICYmICh0aGlzLl9uZXh0UXVldWUubnVtSXRlbXMgPT09IDApKSB7XG5cdFx0XHRcdHRoaXMuX2NhbmNlbEZuLmNhbGwobnVsbCwgdGhpcy5fcnVuSWQpO1xuXHRcdFx0XHQvLyB0aGlzLl9jYW5jZWxGbih0aGlzLl9ydW5JZCk7XG5cdFx0XHRcdHRoaXMuX3J1bklkID0gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmbjtcblx0fSxcbn0sIHtcblx0cnVubmluZzoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fcnVubmluZztcblx0XHR9XG5cdH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbGxiYWNrUXVldWU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBQYXRoMkQgKi9cbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9jb21wb25lbnQvcHJvZ3Jlc3MvQ2FudmFzVmlld1xuICovXG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmNvbG9yfSAqL1xuLy8gdmFyIENvbG9yID0gcmVxdWlyZShcImNvbG9yXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3fSAqL1xuY29uc3QgVmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL1ZpZXdcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9HbG9iYWxzfSAqL1xuY29uc3QgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9JbnRlcnBvbGF0b3J9ICovXG5jb25zdCBJbnRlcnBvbGF0b3IgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9JbnRlcnBvbGF0b3JcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9jc3MvZ2V0Qm94RWRnZVN0eWxlc30gKi9cbmNvbnN0IGdldEJveEVkZ2VTdHlsZXMgPSByZXF1aXJlKFwidXRpbHMvY3NzL2dldEJveEVkZ2VTdHlsZXNcIik7XG5cbnZhciBNSU5fQ0FOVkFTX1JBVElPID0gMTsgLy8gL0ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpPyAyIDogMTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvY29tcG9uZW50L3Byb2dyZXNzL0NhbnZhc1ZpZXd9XG4gKi9cbnZhciBDYW52YXNWaWV3ID0gVmlldy5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjaWRQcmVmaXg6IFwiY2FudmFzVmlld1wiLFxuXHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0dGFnTmFtZTogXCJjYW52YXNcIixcblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNsYXNzTmFtZTogXCJjYW52YXMtdmlld1wiLFxuXG5cdHByb3BlcnRpZXM6IHtcblx0XHRwYXVzZWQ6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9wYXVzZWQ7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbihwYXVzZWQpIHtcblx0XHRcdFx0cGF1c2VkID0gISEocGF1c2VkKTtcblx0XHRcdFx0aWYgKHRoaXMuX2ludGVycG9sYXRvci5wYXVzZWQgIT09IHBhdXNlZCkge1xuXHRcdFx0XHRcdHRoaXMuX2ludGVycG9sYXRvci5wYXVzZWQgPSBwYXVzZWQ7XG5cdFx0XHRcdFx0aWYgKCFwYXVzZWQpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVxdWVzdFJlbmRlcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Y29udGV4dDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2N0eDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGludGVycG9sYXRvcjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2ludGVycG9sYXRvcjtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGNhbnZhc1JhdGlvOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fY2FudmFzUmF0aW87XG5cdFx0XHR9XG5cdFx0fSxcblx0fSxcblxuXHQvKiogQHR5cGUge09iamVjdH0gKi9cblx0ZGVmYXVsdHM6IHtcblx0XHR2YWx1ZXM6IHtcblx0XHRcdHZhbHVlOiAwXG5cdFx0fSxcblx0XHRtYXhWYWx1ZXM6IHtcblx0XHRcdHZhbHVlOiAxXG5cdFx0fSxcblx0XHRwYXVzZWQ6IGZhbHNlLFxuXHRcdHVzZU9wYXF1ZTogZmFsc2UsXG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0ICogY2hpbGRyZW4vbGF5b3V0XG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdC8vIFRPRE86IGNsZWFudXAgdGhpcyBvcHRpb25zIG1lc3Ncblx0XHRvcHRpb25zID0gXy5kZWZhdWx0cyhvcHRpb25zIHx8IHt9LCB0aGlzLmRlZmF1bHRzKTtcblx0XHRvcHRpb25zLnZhbHVlcyA9IF8uZGVmYXVsdHMob3B0aW9ucy52YWx1ZXMgfHwge30sIHRoaXMuZGVmYXVsdHMudmFsdWVzKTtcblx0XHRvcHRpb25zLm1heFZhbHVlcyA9IF8uZGVmYXVsdHMob3B0aW9ucy5tYXhWYWx1ZXMgfHwge30sIHRoaXMuZGVmYXVsdHMubWF4VmFsdWVzKTtcblxuXHRcdHRoaXMuX2ludGVycG9sYXRvciA9IG5ldyBJbnRlcnBvbGF0b3Iob3B0aW9ucy52YWx1ZXMsIG9wdGlvbnMubWF4VmFsdWVzKTtcblx0XHR0aGlzLl9pbnRlcnBvbGF0b3IucGF1c2VkID0gb3B0aW9ucy5wYXVzZWQ7XG5cblx0XHR0aGlzLl91c2VPcGFxdWUgPSBvcHRpb25zLnVzZU9wYXF1ZTtcblx0XHR0aGlzLl9vcHRpb25zID0gXy5waWNrKG9wdGlvbnMsIFwiY29sb3JcIiwgXCJiYWNrZ3JvdW5kQ29sb3JcIik7XG5cblx0XHQvLyBvcGFxdWUgYmFja2dyb3VuZFxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dmFyIGN0eE9wdHMgPSB7fTtcblx0XHQvLyBpZiAodGhpcy5fdXNlT3BhcXVlKSB7XG5cdFx0Ly8gXHR0aGlzLl9vcGFxdWVQcm9wID0gTW9kZXJuaXpyLnByZWZpeGVkKFwib3BhcXVlXCIsIHRoaXMuZWwsIGZhbHNlKTtcblx0XHQvLyBcdGlmICh0aGlzLl9vcGFxdWVQcm9wKSB7XG5cdFx0Ly8gXHRcdHRoaXMuZWxbdGhpcy5fb3BhcXVlUHJvcF0gPSB0cnVlO1xuXHRcdC8vIFx0fSBlbHNlIHtcblx0XHQvLyBcdFx0Y3R4T3B0cy5hbHBoYSA9IHRydWU7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gXHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJjb2xvci1iZ1wiKTtcblx0XHQvLyB9XG5cblx0XHQvLyBjYW52YXMnIGNvbnRleHQgaW5pdFxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dGhpcy5fY3R4ID0gdGhpcy5lbC5nZXRDb250ZXh0KFwiMmRcIiwgY3R4T3B0cyk7XG5cblx0XHQvLyBhZGp1c3QgY2FudmFzIHNpemUgdG8gcGl4ZWwgcmF0aW9cblx0XHQvLyB1cHNjYWxlIHRoZSBjYW52YXMgaWYgdGhlIHR3byByYXRpb3MgZG9uJ3QgbWF0Y2hcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHZhciByYXRpbyA9IE1JTl9DQU5WQVNfUkFUSU87XG5cdFx0dmFyIGN0eFJhdGlvID0gdGhpcy5fY3R4LndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgMTtcblx0XHRpZiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IGN0eFJhdGlvKSB7XG5cdFx0XHQvLyByYXRpbyA9IE1hdGgubWF4KHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gY3R4UmF0aW8sIE1JTl9DQU5WQVNfUkFUSU8pO1xuXHRcdFx0cmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIGN0eFJhdGlvO1xuXHRcdFx0cmF0aW8gPSBNYXRoLm1heChyYXRpbywgTUlOX0NBTlZBU19SQVRJTyk7XG5cdFx0fVxuXHRcdHRoaXMuX2NhbnZhc1JhdGlvID0gcmF0aW87XG5cdFx0Ly8gY29uc29sZS5sb2coXCIlczo6aW5pdCBjYW52YXNSYXRpbzogJWZcIiwgdGhpcy5jaWQsIHRoaXMuX2NhbnZhc1JhdGlvKTtcblxuXHRcdHRoaXMubGlzdGVuVG8odGhpcywgXCJ2aWV3OmF0dGFjaGVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gdGhpcy5pbnZhbGlkYXRlU2l6ZSgpO1xuXHRcdFx0Ly8gdGhpcy5yZW5kZXJOb3coKTtcblx0XHRcdHRoaXMucmVxdWVzdFJlbmRlcihWaWV3LlNJWkVfSU5WQUxJRCB8IFZpZXcuTEFZT1VUX0lOVkFMSUQpLnJlbmRlck5vdygpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8vIF9jb21wdXRlQ2FudmFzUmF0aW86IGZ1bmN0aW9uKCkge1xuXHQvLyBcdHZhciByYXRpbyA9IE1JTl9DQU5WQVNfUkFUSU87XG5cdC8vIFx0dmFyIGN0eFJhdGlvID0gdGhpcy5fY3R4LndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgMTtcblx0Ly8gXHRpZiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IGN0eFJhdGlvKSB7XG5cdC8vIFx0XHQvLyByYXRpbyA9IE1hdGgubWF4KHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gY3R4UmF0aW8sIE1JTl9DQU5WQVNfUkFUSU8pO1xuXHQvLyBcdFx0cmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIGN0eFJhdGlvO1xuXHQvLyBcdFx0cmF0aW8gPSBNYXRoLm1heChyYXRpbywgTUlOX0NBTlZBU19SQVRJTyk7XG5cdC8vIFx0fVxuXHQvLyBcdHRoaXMuX2NhbnZhc1JhdGlvID0gcmF0aW87XG5cdC8vIH0sXG5cblx0X3VwZGF0ZUNhbnZhczogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gYWRqdXN0IGNhbnZhcyBzaXplIHRvIHBpeGVsIHJhdGlvXG5cdFx0Ly8gdXBzY2FsZSB0aGUgY2FudmFzIGlmIHRoZSB0d28gcmF0aW9zIGRvbid0IG1hdGNoXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciBzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcblxuXHRcdC8vIHRoaXMuX2NhbnZhc1dpZHRoID0gdGhpcy5lbC5vZmZzZXRXaWR0aDtcblx0XHQvLyB0aGlzLl9jYW52YXNIZWlnaHQgPSB0aGlzLmVsLm9mZnNldEhlaWdodDtcblx0XHR0aGlzLl9jYW52YXNXaWR0aCA9IHRoaXMuZWwuc2Nyb2xsV2lkdGg7XG5cdFx0dGhpcy5fY2FudmFzSGVpZ2h0ID0gdGhpcy5lbC5zY3JvbGxIZWlnaHQ7XG5cblx0XHRpZiAocy5ib3hTaXppbmcgPT09IFwiYm9yZGVyLWJveFwiKSB7XG5cdFx0XHR2YXIgbSA9IGdldEJveEVkZ2VTdHlsZXMocyk7XG5cdFx0XHR0aGlzLl9jYW52YXNXaWR0aCAtPSBtLnBhZGRpbmdMZWZ0ICsgbS5wYWRkaW5nUmlnaHQgKyBtLmJvcmRlckxlZnRXaWR0aCArIG0uYm9yZGVyUmlnaHRXaWR0aDtcblx0XHRcdHRoaXMuX2NhbnZhc0hlaWdodCAtPSBtLnBhZGRpbmdUb3AgKyBtLnBhZGRpbmdCb3R0b20gKyBtLmJvcmRlclRvcFdpZHRoICsgbS5ib3JkZXJCb3R0b21XaWR0aDtcblx0XHR9XG5cblx0XHR0aGlzLl9jYW52YXNXaWR0aCAqPSB0aGlzLl9jYW52YXNSYXRpbztcblx0XHR0aGlzLl9jYW52YXNIZWlnaHQgKj0gdGhpcy5fY2FudmFzUmF0aW87XG5cblx0XHR0aGlzLm1lYXN1cmVDYW52YXModGhpcy5fY2FudmFzV2lkdGgsIHRoaXMuX2NhbnZhc0hlaWdodCwgcyk7XG5cdFx0dGhpcy5lbC53aWR0aCA9IHRoaXMuX2NhbnZhc1dpZHRoO1xuXHRcdHRoaXMuZWwuaGVpZ2h0ID0gdGhpcy5fY2FudmFzSGVpZ2h0O1xuXHRcdC8vIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gaCArIFwicHhcIjtcblx0XHQvLyB0aGlzLmVsLnN0eWxlLndpZHRoID0gdyArIFwicHhcIjtcblxuXHRcdC8vIGNvbG9yc1xuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dGhpcy5fY29sb3IgPSB0aGlzLl9vcHRpb25zLmNvbG9yIHx8XG5cdFx0XHRzLmNvbG9yIHx8IEdsb2JhbHMuREVGQVVMVF9DT0xPUlNbXCJjb2xvclwiXTtcblx0XHR0aGlzLl9iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9vcHRpb25zLmJhY2tncm91bmRDb2xvciB8fFxuXHRcdFx0cy5iYWNrZ3JvdW5kQ29sb3IgfHwgR2xvYmFscy5ERUZBVUxUX0NPTE9SU1tcImJhY2tncm91bmQtY29sb3JcIl07XG5cblx0XHQvLyBtb3pPcGFxdWVcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdGlmICh0aGlzLl91c2VPcGFxdWUgJiYgdGhpcy5fb3BhcXVlUHJvcCkge1xuXHRcdFx0Ly8gdGhpcy5lbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9iYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHR0aGlzLmVsW3RoaXMuX29wYXF1ZVByb3BdID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBmb250U2l6ZVxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dGhpcy5fZm9udFNpemUgPSBwYXJzZUZsb2F0KHMuZm9udFNpemUpICogdGhpcy5fY2FudmFzUmF0aW87XG5cdFx0dGhpcy5fZm9udEZhbWlseSA9IHMuZm9udEZhbWlseTtcblxuXHRcdC8vIHByZXBhcmUgY2FudmFzIGNvbnRleHRcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cblx0XHR0aGlzLl9jdHguZm9udCA9IFtzLmZvbnRXZWlnaHQsIHMuZm9udFN0eWxlLCB0aGlzLl9mb250U2l6ZSArIFwicHgvMVwiLCBzLmZvbnRGYW1pbHldLmpvaW4oXCIgXCIpO1xuXHRcdHRoaXMuX2N0eC50ZXh0QWxpZ24gPSBcImxlZnRcIjtcblx0XHR0aGlzLl9jdHgubGluZUNhcCA9IFwiYnV0dFwiO1xuXHRcdHRoaXMuX2N0eC5saW5lSm9pbiA9IFwibWl0ZXJcIjtcblx0XHR0aGlzLl9jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcjtcblx0XHR0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3I7XG5cblx0XHR0aGlzLnVwZGF0ZUNhbnZhcyh0aGlzLl9jdHgsIHMpO1xuXHRcdHRoaXMuX2N0eC5zYXZlKCk7XG5cblx0XHQvLyBjb25zb2xlLmdyb3VwKHRoaXMuY2lkK1wiOjpfdXBkYXRlQ2FudmFzXCIpO1xuXHRcdC8vIGNvbnNvbGUubG9nKFwicmF0aW86ICAgICVmIChtaW46ICVmLCBkZXZpY2U6ICVmLCBjb250ZXh0OiAlcylcIiwgdGhpcy5fY2FudmFzUmF0aW8sIE1JTl9DQU5WQVNfUkFUSU8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCB0aGlzLl9jdHgud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBcIih3ZWJraXQtb25seSlcIik7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJjb2xvcnM6ICAgZmc6ICVzIGJnOiAlc1wiLCB0aGlzLl9jb2xvciwgdGhpcy5fYmFja2dyb3VuZENvbG9yKTtcblx0XHQvLyBjb25zb2xlLmxvZyhcInN0eWxlOiAgICAlcywgJXMsIHBhZGRpbmc6ICVzICglcylcIiwgcy53aWR0aCwgcy5oZWlnaHQsIHMucGFkZGluZywgcy5ib3hTaXppbmcpO1xuXHRcdC8vIGNvbnNvbGUubG9nKFwiYm94OiAgICAgICVmIHggJWYgcHhcIiwgbS53aWR0aCwgbS5oZWlnaHQpO1xuXHRcdC8vIGNvbnNvbGUubG9nKFwibWVhc3VyZWQ6ICVmIHggJWYgcHhcIiwgdywgaCk7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJjYW52YXM6ICAgJWYgeCAlZiBweFwiLCB0aGlzLl9jYW52YXNXaWR0aCwgdGhpcy5fY2FudmFzSGVpZ2h0KTtcblx0XHQvLyBjb25zb2xlLmdyb3VwRW5kKCk7XG5cdH0sXG5cblx0bWVhc3VyZUNhbnZhczogZnVuY3Rpb24odywgaCwgcykge1xuXHRcdC8qIGFic3RyYWN0ICovXG5cdH0sXG5cblx0dXBkYXRlQ2FudmFzOiBmdW5jdGlvbihjdHgsIHMpIHtcblx0XHQvKiBhYnN0cmFjdCAqL1xuXHR9LFxuXG5cdF9nZXRGb250TWV0cmljczogZnVuY3Rpb24oc3RyKSB7XG5cdFx0dmFyIGtleSwgaWR4LCBtT2JqLCBtSWR4ID0gc3RyLmxlbmd0aDtcblx0XHRmb3IgKGtleSBpbiBHbG9iYWxzLkZPTlRfTUVUUklDUykge1xuXHRcdFx0aWR4ID0gc3RyLmluZGV4T2Yoa2V5KTtcblx0XHRcdGlmIChpZHggIT09IC0xICYmIGlkeCA8IG1JZHgpIHtcblx0XHRcdFx0bUlkeCA9IGlkeDtcblx0XHRcdFx0bU9iaiA9IEdsb2JhbHMuRk9OVF9NRVRSSUNTW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtT2JqIHx8IHtcblx0XHRcdFwidW5pdHNQZXJFbVwiOiAxMDI0LFxuXHRcdFx0XCJhc2NlbnRcIjogOTM5LFxuXHRcdFx0XCJkZXNjZW50XCI6IC0yNTZcblx0XHR9O1xuXHR9LFxuXG5cdF9jbGVhckNhbnZhczogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gNCkge1xuXHRcdFx0dGhpcy5fY2xlYXJDYW52YXNSZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2N0eC5zYXZlKCk7XG5cdFx0XHR0aGlzLl9jdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xuXHRcdFx0dGhpcy5fY2xlYXJDYW52YXNSZWN0KDAsIDAsIHRoaXMuZWwud2lkdGgsIHRoaXMuZWwuaGVpZ2h0KTtcblx0XHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9jbGVhckNhbnZhc1JlY3Q6IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcblx0XHR0aGlzLl9jdHguY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xuXHRcdGlmICh0aGlzLl91c2VPcGFxdWUpIHtcblx0XHRcdHRoaXMuX2N0eC5zYXZlKCk7XG5cdFx0XHR0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0dGhpcy5fY3R4LmZpbGxSZWN0KHgsIHksIHcsIGgpO1xuXHRcdFx0dGhpcy5fY3R4LnJlc3RvcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0X3NldFN0eWxlOiBmdW5jdGlvbihzKSB7XG5cdFx0Q2FudmFzVmlldy5zZXRTdHlsZSh0aGlzLl9jdHgsIHMpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIHJlbmRlclxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuYXR0YWNoZWQpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlbmRlck5vdygpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHJlbmRlckZyYW1lOiBmdW5jdGlvbih0c3RhbXAsIGZsYWdzKSB7XG5cdFx0aWYgKCF0aGlzLmF0dGFjaGVkKSB7XG5cdFx0XHRyZXR1cm4gZmxhZ3M7XG5cdFx0fVxuXHRcdGlmIChmbGFncyAmIFZpZXcuU0laRV9JTlZBTElEKSB7XG5cdFx0XHR0aGlzLl91cGRhdGVDYW52YXMoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX2ludGVycG9sYXRvci52YWx1ZXNDaGFuZ2VkKSB7XG5cdFx0XHRmbGFncyB8PSBWaWV3LkxBWU9VVF9JTlZBTElEO1xuXHRcdFx0dGhpcy5faW50ZXJwb2xhdG9yLmludGVycG9sYXRlKHRzdGFtcCk7XG5cdFx0fVxuXHRcdGlmIChmbGFncyAmIChWaWV3LkxBWU9VVF9JTlZBTElEIHwgVmlldy5TSVpFX0lOVkFMSUQpKSB7XG5cdFx0XHR0aGlzLnJlZHJhdyh0aGlzLl9jdHgsIHRoaXMuX2ludGVycG9sYXRvciwgZmxhZ3MpO1xuXHRcdFx0aWYgKHRoaXMuX2ludGVycG9sYXRvci52YWx1ZXNDaGFuZ2VkKSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdFJlbmRlcigpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBzZXRFbmFibGVkOiBmdW5jdGlvbihlbmFibGVkKSB7XG5cdC8vIFx0Vmlldy5wcm90b3R5cGUuc2V0RW5hYmxlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQvLyBcdGlmICh0aGlzLmF0dGFjaGVkKSB7XG5cdC8vIFx0XHRjb25zb2xlLmluZm8oXCJbJXNdICVzOjpzZXRFbmFibGVkXCIsIHRoaXMucGFyZW50Vmlldy5jaWQsIHRoaXMuY2lkLCB0aGlzLmVuYWJsZWQpO1xuXHQvLyBcdFx0Ly8gaWYgKHRoaXMuX2VuYWJsZWQgJiYgdGhpcy5faW50ZXJwb2xhdG9yLnZhbHVlc0NoYW5nZWQpIHtcblx0Ly8gXHRcdC8vIHRoaXMucmVxdWVzdFJlbmRlcigpO1xuXHQvLyBcdFx0Ly8gdGhpcy5yZXF1ZXN0UmVuZGVyKENhbnZhc1ZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHQvLyBcdFx0Ly8gfVxuXHQvLyBcdH1cblx0Ly8gfSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBwdWJsaWNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Z2V0VGFyZ2V0VmFsdWU6IGZ1bmN0aW9uKGtleSkge1xuXHRcdHJldHVybiB0aGlzLl9pbnRlcnBvbGF0b3IuZ2V0VGFyZ2V0VmFsdWUoa2V5KTtcblx0fSxcblxuXHRnZXRSZW5kZXJlZFZhbHVlOiBmdW5jdGlvbihrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5faW50ZXJwb2xhdG9yLmdldFJlbmRlcmVkVmFsdWUoa2V5KTtcblx0fSxcblxuXHR2YWx1ZVRvOiBmdW5jdGlvbihrZXksIHZhbHVlLCBkdXJhdGlvbikge1xuXHRcdHRoaXMuX2ludGVycG9sYXRvci52YWx1ZVRvKGtleSwgdmFsdWUsIGR1cmF0aW9uKTtcblx0XHR0aGlzLnJlcXVlc3RSZW5kZXIoVmlldy5NT0RFTF9JTlZBTElEIHwgVmlldy5MQVlPVVRfSU5WQUxJRCk7XG5cdH0sXG5cblx0Ly8gdXBkYXRlVmFsdWU6IGZ1bmN0aW9uKGtleSkge1xuXHQvLyBcdHJldHVybiB0aGlzLl9pbnRlcnBvbGF0b3IudXBkYXRlVmFsdWUoa2V5IHx8IHRoaXMuZGVmYXVsdEtleSk7XG5cdC8vIH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogcmVkcmF3XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHJlZHJhdzogZnVuY3Rpb24oY3R4LCBpbnRlcnAsIGZsYWdzKSB7fSxcblxufSwge1xuXHRzZXRTdHlsZTogZnVuY3Rpb24oY3R4LCBzKSB7XG5cdFx0aWYgKHR5cGVvZiBzICE9IFwib2JqZWN0XCIpIHJldHVybjtcblx0XHRmb3IgKHZhciBwIGluIHMpIHtcblx0XHRcdHN3aXRjaCAodHlwZW9mIGN0eFtwXSkge1xuXHRcdFx0XHRjYXNlIFwidW5kZWZpbmVkXCI6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOlxuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHNbcF0pKSBjdHhbcF0uYXBwbHkoY3R4LCBzW3BdKTtcblx0XHRcdFx0XHRlbHNlIGN0eFtwXS5jYWxsKGN0eCwgc1twXSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Y3R4W3BdID0gc1twXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoREVCVUcpIHtcblx0Q2FudmFzVmlldy5wcm90b3R5cGUuX2xvZ0ZsYWdzID0gXCJcIjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYW52YXNWaWV3O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvYmFzZS9JbnRlcnBvbGF0b3JcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9lYXNlL2ZuL2xpbmVhcn0gKi9cbmNvbnN0IGxpbmVhciA9IHJlcXVpcmUoXCJ1dGlscy9lYXNlL2ZuL2xpbmVhclwiKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9JbnRlcnBvbGF0b3J9XG4gKi9cbnZhciBJbnRlcnBvbGF0b3IgPSBmdW5jdGlvbih2YWx1ZXMsIG1heFZhbHVlcywgZWFzZVZhbHVlcykge1xuXHR0aGlzLl90c3RhbXAgPSAwO1xuXG5cdC8vIGdldHMgdGhyb3duIGF3YXkgYnkgZmlyc3QgaW50ZXJwb2xhdGUoKSBidXQgYXZvaWQgbnVsbCBhY2Nlc3MgZXJyb3JzXG5cdHRoaXMuX3JlbmRlcmFibGVLZXlzID0gW107XG5cdHRoaXMuX3JlbmRlcmVkS2V5cyA9IFtdO1xuXG5cdHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuXHR0aGlzLl9wYXVzZWRDaGFuZ2luZyA9IGZhbHNlO1xuXHQvL3RoaXMuX3BhdXNlZEtleXMgPSBbXTtcblxuXHR0aGlzLl9tYXhWYWx1ZXMgPSBfLmlzT2JqZWN0KG1heFZhbHVlcykgPyBfLmV4dGVuZCh7fSwgbWF4VmFsdWVzKSA6IHt9O1xuXHR0aGlzLl9lYXNlRm4gPSBfLmlzT2JqZWN0KGVhc2VWYWx1ZXMpID8gXy5leHRlbmQoe30sIGVhc2VWYWx1ZXMpIDoge307XG5cdHRoaXMuX3ZhbHVlRGF0YSA9IHt9O1xuXG5cdC8vIHZhciBrZXksIHZhbCwgbWF4VmFsLCBlYXNlRm47XG5cdGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHtcblx0XHRfLmlzTnVtYmVyKHRoaXMuX21heFZhbHVlc1trZXldKSB8fCAodGhpcy5fbWF4VmFsdWVzW2tleV0gPSBudWxsKTtcblx0XHRfLmlzRnVuY3Rpb24odGhpcy5fZWFzZUZuW2tleV0pIHx8ICh0aGlzLl9lYXNlRm5ba2V5XSA9IGxpbmVhcik7XG5cblx0XHQvLyBjcmVhdGUgdmFsdWUgb2JqZWN0IGFuZCBzdG9yZSBpdFxuXHRcdHRoaXMuX3ZhbHVlRGF0YVtrZXldID0gdGhpcy5faW5pdFZhbHVlKHZhbHVlc1trZXldLCAwLCB0aGlzLl9tYXhWYWx1ZXNba2V5XSk7XG5cblx0XHQvLyBhZGQgdG8gbmV4dCByZW5kZXIgbGlzdFxuXHRcdHRoaXMuX3JlbmRlcmFibGVLZXlzLnB1c2goa2V5KTtcblx0fVxufTtcblxuSW50ZXJwb2xhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoe1xuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHB1YmxpYyBpbnRlcmZhY2Vcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0aXNBdFRhcmdldDogZnVuY3Rpb24oa2V5KSB7XG5cdFx0cmV0dXJuIHRoaXMuX3JlbmRlcmFibGVLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTE7XG5cdH0sXG5cblx0Z2V0Q3VycmVudFZhbHVlOiBmdW5jdGlvbihrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5fdmFsdWVEYXRhW2tleV0uX3JlbmRlcmVkVmFsdWUgfHwgdGhpcy5fdmFsdWVEYXRhW2tleV0uX3ZhbHVlO1xuXHR9LFxuXG5cdGdldFRhcmdldFZhbHVlOiBmdW5jdGlvbihrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5fdmFsdWVEYXRhW2tleV0uX3ZhbHVlO1xuXHR9LFxuXG5cdGdldFN0YXJ0VmFsdWU6IGZ1bmN0aW9uKGtleSkge1xuXHRcdHJldHVybiB0aGlzLl92YWx1ZURhdGFba2V5XS5fc3RhcnRWYWx1ZTtcblx0fSxcblxuXHRnZXRSZW5kZXJlZFZhbHVlOiBmdW5jdGlvbihrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5fdmFsdWVEYXRhW2tleV0uX3JlbmRlcmVkVmFsdWU7XG5cdH0sXG5cblx0Z2V0T3B0aW9uOiBmdW5jdGlvbihrZXksIG9wdCkge1xuXHRcdGlmIChvcHQgPT09IFwibWF4XCIpIHJldHVybiB0aGlzLl9tYXhWYWx1ZXNba2V5XTtcblx0XHRpZiAob3B0ID09PSBcImVhc2VcIikgcmV0dXJuIHRoaXMuX2Vhc2VGbltrZXldO1xuXHR9LFxuXG5cdHZhbHVlVG86IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGR1cmF0aW9uLCBlYXNlKSB7XG5cdFx0dmFyIGNoYW5nZWQsIGRhdGFPYmogPSB0aGlzLl92YWx1ZURhdGFba2V5XTtcblx0XHRpZiAoXy5pc0Z1bmN0aW9uKGVhc2UpKSB7XG5cdFx0XHR0aGlzLl9lYXNlRm5ba2V5XSA9IGVhc2U7XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OnZhbHVlVG8gWyVzXVwiLCBcIltpbnRlcnBvbGF0b3JdXCIsIGtleSwgdmFsdWUpO1xuXHRcdGlmIChBcnJheS5pc0FycmF5KGRhdGFPYmopKSB7XG5cdFx0XHRjaGFuZ2VkID0gdmFsdWUucmVkdWNlKGZ1bmN0aW9uKHByZXZDaGFuZ2VkLCBpdGVtVmFsdWUsIGkpIHtcblx0XHRcdFx0aWYgKGRhdGFPYmpbaV0pIHtcblx0XHRcdFx0XHRkYXRhT2JqW2ldID0gdGhpcy5faW5pdE51bWJlcihpdGVtVmFsdWUsIGR1cmF0aW9uLCB0aGlzLl9tYXhWYWx1ZXNba2V5XSk7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuX3NldFZhbHVlKGRhdGFPYmpbaV0sIGl0ZW1WYWx1ZSwgZHVyYXRpb24pIHx8IHByZXZDaGFuZ2VkO1xuXHRcdFx0fS5iaW5kKHRoaXMpLCBjaGFuZ2VkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2hhbmdlZCA9IHRoaXMuX3NldFZhbHVlKGRhdGFPYmosIHZhbHVlLCBkdXJhdGlvbik7XG5cdFx0fVxuXHRcdGlmIChjaGFuZ2VkKSB7XG5cdFx0XHR0aGlzLl9yZW5kZXJhYmxlS2V5cy5pbmRleE9mKGtleSkgIT09IC0xIHx8IHRoaXMuX3JlbmRlcmFibGVLZXlzLnB1c2goa2V5KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dXBkYXRlVmFsdWU6IGZ1bmN0aW9uKGtleSkge1xuXHRcdC8vIENhbGwgX2ludGVycG9sYXRlS2V5IG9ubHkgaWYgbmVlZGVkLiBfaW50ZXJwb2xhdGVLZXkoKSByZXR1cm5zIGZhbHNlXG5cdFx0Ly8gb25jZSBpbnRlcnBvbGF0aW9uIGlzIGRvbmUsIGluIHdoaWNoIGNhc2UgcmVtb3ZlIGtleSBmcm9tIF9yZW5kZXJhYmxlS2V5cy5cblx0XHR2YXIga0luZGV4ID0gdGhpcy5fcmVuZGVyYWJsZUtleXMuaW5kZXhPZihrZXkpO1xuXHRcdGlmIChrSW5kZXggIT09IC0xICYmICF0aGlzLl9pbnRlcnBvbGF0ZUtleShrZXkpKSB7XG5cdFx0XHR0aGlzLl9yZW5kZXJhYmxlS2V5cy5zcGxpY2Uoa0luZGV4LCAxKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogcHJpdmF0ZTogdmFsdWVEYXRhXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9pbml0VmFsdWU6IGZ1bmN0aW9uKHZhbHVlLCBkdXJhdGlvbiwgbWF4VmFsKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUubWFwKGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5faW5pdE51bWJlcih2YWwsIGR1cmF0aW9uLCBtYXhWYWwpO1xuXHRcdFx0fSwgdGhpcyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9pbml0TnVtYmVyKHZhbHVlLCBkdXJhdGlvbiwgbWF4VmFsKTtcblx0fSxcblxuXHRfaW5pdE51bWJlcjogZnVuY3Rpb24odmFsdWUsIGR1cmF0aW9uLCBtYXhWYWwpIHtcblx0XHR2YXIgbyA9IHt9O1xuXHRcdG8uX3ZhbHVlID0gdmFsdWU7XG5cdFx0by5fc3RhcnRWYWx1ZSA9IHZhbHVlO1xuXHRcdG8uX3ZhbHVlRGVsdGEgPSAwO1xuXG5cdFx0by5fZHVyYXRpb24gPSBkdXJhdGlvbiB8fCAwO1xuXHRcdG8uX3N0YXJ0VGltZSA9IE5hTjtcblx0XHRvLl9lbGFwc2VkVGltZSA9IE5hTjtcblxuXHRcdG8uX2xhc3RSZW5kZXJlZFZhbHVlID0gbnVsbDtcblx0XHRvLl9yZW5kZXJlZFZhbHVlID0gby5fc3RhcnRWYWx1ZTtcblxuXHRcdG8uX21heFZhbCA9IG1heFZhbDtcblx0XHQvLyBpZiAobWF4VmFsICE9PSB2b2lkIDApIG8uX21heFZhbCA9IG1heFZhbDtcblx0XHQvLyBvLl9tYXhWYWwgPSB0aGlzLl9tYXhWYWx1ZXNba2V5XTtcblx0XHQvLyBvLl9tYXhWYWwgPSB0aGlzLl9tYXhWYWw7Ly8gRklYTUVcblx0XHRyZXR1cm4gbztcblx0fSxcblxuXHRfc2V0VmFsdWU6IGZ1bmN0aW9uKG8sIHZhbHVlLCBkdXJhdGlvbikge1xuXHRcdGlmIChvLl92YWx1ZSAhPT0gdmFsdWUpIHtcblx0XHRcdG8uX3N0YXJ0VmFsdWUgPSBvLl92YWx1ZTtcblx0XHRcdG8uX3ZhbHVlRGVsdGEgPSB2YWx1ZSAtIG8uX3ZhbHVlO1xuXHRcdFx0by5fdmFsdWUgPSB2YWx1ZTtcblxuXHRcdFx0by5fZHVyYXRpb24gPSBkdXJhdGlvbiB8fCAwO1xuXHRcdFx0by5fc3RhcnRUaW1lID0gTmFOO1xuXHRcdFx0by5fZWxhcHNlZFRpbWUgPSBOYU47XG5cblx0XHRcdC8vIG8uX2xhc3RSZW5kZXJlZFZhbHVlID0gby5fcmVuZGVyZWRWYWx1ZTtcblx0XHRcdC8vIG8uX3JlbmRlcmVkVmFsdWUgPSBvLl9zdGFydFZhbHVlO1xuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHByaXZhdGU6IGludGVycG9sYXRlXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF90c3RhbXA6IDAsXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbnRlcnBvbGF0ZTogZnVuY3Rpb24odHN0YW1wKSB7XG5cdFx0dGhpcy5fdHN0YW1wID0gdHN0YW1wO1xuXG5cdFx0aWYgKHRoaXMudmFsdWVzQ2hhbmdlZCkge1xuXHRcdFx0aWYgKHRoaXMuX3BhdXNlZENoYW5naW5nKSB7XG5cdFx0XHRcdHRoaXMuX3JlbmRlcmFibGVLZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdFx0dmFyIG8gPSB0aGlzLl92YWx1ZURhdGFba2V5XTtcblx0XHRcdFx0XHRpZiAoIWlzTmFOKG8uX2VsYXBzZWRUaW1lKSkge1xuXHRcdFx0XHRcdFx0by5fc3RhcnRUaW1lID0gdHN0YW1wIC0gby5fZWxhcHNlZFRpbWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB0aGlzKTtcblx0XHRcdFx0dGhpcy5fcGF1c2VkQ2hhbmdpbmcgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjaGFuZ2VkS2V5cyA9IHRoaXMuX3JlbmRlcmFibGVLZXlzO1xuXHRcdFx0dGhpcy5fcmVuZGVyYWJsZUtleXMgPSBjaGFuZ2VkS2V5cy5maWx0ZXIoZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9pbnRlcnBvbGF0ZVZhbHVlKHRzdGFtcCwgdGhpcy5fdmFsdWVEYXRhW2tleV0sIHRoaXMuX2Vhc2VGbltrZXldKTtcblx0XHRcdH0sIHRoaXMpO1xuXHRcdFx0dGhpcy5fcmVuZGVyZWRLZXlzID0gY2hhbmdlZEtleXM7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdF9pbnRlcnBvbGF0ZUtleTogZnVuY3Rpb24oa2V5KSB7XG5cdFx0cmV0dXJuIHRoaXMuX2ludGVycG9sYXRlVmFsdWUodGhpcy5fdHN0YW1wLCB0aGlzLl92YWx1ZURhdGFba2V5XSwgdGhpcy5fZWFzZUZuW2tleV0pO1xuXHR9LFxuXG5cdF9pbnRlcnBvbGF0ZVZhbHVlOiBmdW5jdGlvbih0c3RhbXAsIG8sIGZuKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkobykpIHtcblx0XHRcdHJldHVybiBvLnJlZHVjZShmdW5jdGlvbihjaGFuZ2VkLCBpdGVtLCBpbmRleCwgYXJyKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9pbnRlcnBvbGF0ZU51bWJlcih0c3RhbXAsIGl0ZW0sIGZuKSB8fCBjaGFuZ2VkO1xuXHRcdFx0fS5iaW5kKHRoaXMpLCBmYWxzZSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9pbnRlcnBvbGF0ZU51bWJlcih0c3RhbXAsIG8sIGZuKTtcblx0fSxcblxuXHRfaW50ZXJwb2xhdGVOdW1iZXI6IGZ1bmN0aW9uKHRzdGFtcCwgbywgZm4pIHtcblx0XHRpZiAoaXNOYU4oby5fc3RhcnRUaW1lKSkge1xuXHRcdFx0by5fc3RhcnRUaW1lID0gdHN0YW1wO1xuXHRcdH1cblx0XHRvLl9sYXN0UmVuZGVyZWRWYWx1ZSA9IG8uX3JlbmRlcmVkVmFsdWU7XG5cblx0XHR2YXIgZWxhcHNlZCA9IE1hdGgubWF4KDAsIHRzdGFtcCAtIG8uX3N0YXJ0VGltZSk7XG5cdFx0aWYgKGVsYXBzZWQgPCBvLl9kdXJhdGlvbikge1xuXHRcdFx0aWYgKG8uX21heFZhbCAmJiBvLl92YWx1ZURlbHRhIDwgMCkge1xuXHRcdFx0XHQvLyB1cHBlci1ib3VuZCB2YWx1ZXNcblx0XHRcdFx0by5fcmVuZGVyZWRWYWx1ZSA9IGZuKGVsYXBzZWQsIG8uX3N0YXJ0VmFsdWUsXG5cdFx0XHRcdFx0by5fdmFsdWVEZWx0YSArIG8uX21heFZhbCwgby5fZHVyYXRpb24pIC0gby5fbWF4VmFsO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gdW5ib3VuZCB2YWx1ZXNcblx0XHRcdFx0by5fcmVuZGVyZWRWYWx1ZSA9IGZuKGVsYXBzZWQsIG8uX3N0YXJ0VmFsdWUsXG5cdFx0XHRcdFx0by5fdmFsdWVEZWx0YSwgby5fZHVyYXRpb24pO1xuXHRcdFx0fVxuXHRcdFx0by5fZWxhcHNlZFRpbWUgPSBlbGFwc2VkO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdG8uX3JlbmRlcmVkVmFsdWUgPSBvLl92YWx1ZTtcblx0XHRvLl9lbGFwc2VkVGltZSA9IE5hTjtcblx0XHRvLl9zdGFydFRpbWUgPSBOYU47XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxufSwge1xuXHQvKipcblx0ICogQHR5cGUge2Jvb2xlYW59XG5cdCAqL1xuXHRwYXVzZWQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3BhdXNlZDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhbHVlID0gISEodmFsdWUpOyAvLyBDb252ZXJ0IHRvIGJvb2xlYW5cblx0XHRcdGlmICh0aGlzLl9wYXVzZWQgIT09IHZhbHVlKSB7XG5cdFx0XHRcdHRoaXMuX3BhdXNlZCA9IHZhbHVlO1xuXHRcdFx0XHR0aGlzLl9wYXVzZWRDaGFuZ2luZyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHQvKipcblx0ICogQHR5cGUge2Jvb2xlYW59IEhhcyBhbnkgdmFsdWUgYmVlbiBjaGFuZ2VkIGJ5IHZhbHVlVG8oKSBzaW5jZSBsYXN0IGludGVycG9sYXRlKClcblx0ICovXG5cdHZhbHVlc0NoYW5nZWQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICF0aGlzLl9wYXVzZWQgJiYgdGhpcy5fcmVuZGVyYWJsZUtleXMubGVuZ3RoID4gMDtcblx0XHR9XG5cdH0sXG5cdC8qKlxuXHQgKiBAdHlwZSB7YXJyYXl9IEtleXMgdGhhdCBhcmUgbm90IHlldCBhdCB0YXJnZXQgdmFsdWVcblx0ICovXG5cdHJlbmRlcmFibGVLZXlzOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9yZW5kZXJhYmxlS2V5cztcblx0XHR9XG5cdH0sXG5cdC8qKlxuXHQgKiBAdHlwZSB7YXJyYXl9IEtleXMgdGhhdCBoYXZlIGJlZW4gcmVuZGVyZWQgaW4gdGhlIGxhc3QgaW50ZXJwb2xhdGUoKVxuXHQgKi9cblx0cmVuZGVyZWRLZXlzOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9yZW5kZXJlZEtleXM7XG5cdFx0fVxuXHR9LFxuXHQvKipcblx0ICogQHR5cGUge2FycmF5fSBBbGwga2V5c1xuXHQgKi9cblx0a2V5czoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXModGhpcy5fdmFsdWVEYXRhKTtcblx0XHR9XG5cdH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcnBvbGF0b3I7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkRXZlbnR9ICovXG5jb25zdCBwcmVmaXhlZEV2ZW50ID0gcmVxdWlyZShcInV0aWxzL3ByZWZpeGVkRXZlbnRcIik7XG5cbnZhciBldmVudE1hcCA9IHtcblx0XCJ0cmFuc2l0aW9uZW5kXCI6IHByZWZpeGVkRXZlbnQoXCJ0cmFuc2l0aW9uZW5kXCIpLFxuXHRcImZ1bGxzY3JlZW5jaGFuZ2VcIjogcHJlZml4ZWRFdmVudChcImZ1bGxzY3JlZW5jaGFuZ2VcIiwgZG9jdW1lbnQpLFxuXHRcImZ1bGxzY3JlZW5lcnJvclwiOiBwcmVmaXhlZEV2ZW50KFwiZnVsbHNjcmVlbmVycm9yXCIsIGRvY3VtZW50KSxcblx0XCJ2aXNpYmlsaXR5Y2hhbmdlXCI6IHByZWZpeGVkRXZlbnQoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGRvY3VtZW50LCBcImhpZGRlblwiKVxufTtcblxudmFyIGV2ZW50TnVtID0gMDtcbmZvciAodmFyIGV2ZW50TmFtZSBpbiBldmVudE1hcCkge1xuXHRpZiAoZXZlbnROYW1lID09PSBldmVudE1hcFtldmVudE5hbWVdKSB7XG5cdFx0ZGVsZXRlIGV2ZW50TWFwW2V2ZW50TmFtZV07XG5cdH0gZWxzZSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV2ZW50TWFwLCBldmVudE5hbWUsIHtcblx0XHRcdHZhbHVlOiBldmVudE1hcFtldmVudE5hbWVdLFxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShldmVudE1hcCwgZXZlbnROdW0sIHtcblx0XHRcdHZhbHVlOiBldmVudE5hbWUsXG5cdFx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHRcdH0pO1xuXHRcdGV2ZW50TnVtKys7XG5cdH1cbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShldmVudE1hcCwgXCJsZW5ndGhcIiwge1xuXHR2YWx1ZTogZXZlbnROdW1cbn0pO1xuXG5pZiAoREVCVUcpIHtcblx0Y29uc29sZS5sb2coXCJwcmVmaXhlcyBlbmFibGVkIGZvciAlaSBldmVudHNcIiwgZXZlbnRNYXAubGVuZ3RoLCBPYmplY3Qua2V5cyhldmVudE1hcCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50TWFwO1xuXG4vLyBtb2R1bGUuZXhwb3J0cyA9IGV2ZW50TnVtID4gMD8gZXZlbnRNYXAgOiBudWxsO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvYmFzZS9Ub3VjaE1hbmFnZXJcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9HbG9iYWxzfSAqL1xuY29uc3QgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6aGFtbWVyanN9ICovXG5jb25zdCBIYW1tZXIgPSByZXF1aXJlKFwiaGFtbWVyanNcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTpoYW1tZXJqcy5UYXB9ICovXG4vLyBjb25zdCBUYXAgPSBIYW1tZXIuVGFwO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvdG91Y2gvU21vb3RoUGFuUmVjb2duaXplcn0gKi9cbmNvbnN0IFBhbiA9IHJlcXVpcmUoXCJ1dGlscy90b3VjaC9TbW9vdGhQYW5SZWNvZ25pemVyXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6aGFtbWVyanMuUGFufSAqL1xuLy8gY29uc3QgUGFuID0gSGFtbWVyLlBhbjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyogU3RhdGljIHByaXZhdGVcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyoqXG4gKiBAcGFyYW0gZWwgSFRNTEVsZW1lbnRcbiAqIEByZXR1cm4ge0hhbW1lci5NYW5hZ2VyfVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShlbCkge1xuXHRsZXQgbWFuYWdlciA9IG5ldyBIYW1tZXIuTWFuYWdlcihlbCk7XG5cdC8vIG1hbmFnZXIuc2V0KHsgZG9tZXZlbnRzOiB0cnVlIH0pO1xuXG5cdC8vIGxldCB0YXAgPSBuZXcgSGFtbWVyLlRhcCh7XG5cdC8vIFx0dGhyZXNob2xkOiBHbG9iYWxzLlBBTl9USFJFU0hPTEQgLSAxXG5cdC8vIH0pO1xuXHQvLyBtYW5hZ2VyLmFkZCh0YXApO1xuXHRsZXQgaHBhbiA9IG5ldyBQYW4oe1xuXHRcdGV2ZW50OiBcImhwYW5cIixcblx0XHRkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTCxcblx0XHR0aHJlc2hvbGQ6IEdsb2JhbHMuUEFOX1RIUkVTSE9MRCxcblx0XHQvLyB0b3VjaEFjdGlvbjogXCJwYW4teVwiLFxuXHR9KTtcblx0bWFuYWdlci5hZGQoaHBhbik7XG5cblx0Ly8gbGV0IHZwYW4gPSBuZXcgUGFuKHtcblx0Ly8gXHRldmVudDogXCJ2cGFuXCIsXG5cdC8vIFx0ZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX1ZFUlRJQ0FMLFxuXHQvLyBcdC8vIHRocmVzaG9sZDogR2xvYmFscy5QQU5fVEhSRVNIT0xELFxuXHQvLyBcdC8vIHRvdWNoQWN0aW9uOiBcInBhbi14XCIsXG5cdC8vIH0pO1xuXHQvLyBtYW5hZ2VyLmFkZCh2cGFuKTtcblx0Ly8gdnBhbi5yZXF1aXJlRmFpbHVyZShocGFuKTtcblxuXHRyZXR1cm4gbWFuYWdlcjtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogaGFtbWVyanMgZml4dXAgaGFuZGxlcnNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbmNvbnN0IFBBTkVORF9USFJFU19NUyA9IDMwMDsgLy8gbWlsbGlzZWNzXG5jb25zdCBQQU5FTkRfVEhSRVNfUFggPSAyNTsgLy8gcGl4ZWxzXG5jb25zdCBVUF9FVkVOVCA9IHdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIm9ucG9pbnRlcnVwXCIpID8gXCJwb2ludGVydXBcIiA6IFwibW91c2V1cFwiO1xuXG5sZXQgdG91Y2hIYW5kbGVycyA9IHt9O1xubGV0IGNhcHR1cmVIYW5kbGVycyA9IHt9O1xubGV0IGJ1YmJsaW5nSGFuZGxlcnMgPSB7fTtcblxuLypodHRwczovL2dpc3QuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2p0YW5nZWxkZXIvMzYxMDUyOTc2ZjA0NDIwMGVhMTcvcmF3L2Y1NGMyY2VmNzhkNTlkYTNmMzgyODZmYWQ2ODM0NzFlMWM5NzYwNzIvUHJldmVudEdob3N0Q2xpY2suanMqL1xudmFyIGxhc3RUaW1lU3RhbXAgPSBOYU47XG52YXIgcGFuU2Vzc2lvbk9wZW5lZCA9IGZhbHNlO1xuXG5sZXQgc2F2ZVRpbWVTdGFtcCA9IGZ1bmN0aW9uKGhldikge1xuXHRwYW5TZXNzaW9uT3BlbmVkID0gIWhldi5pc0ZpbmFsO1xuXHRpZiAoaGV2LmlzRmluYWwpIHtcblx0XHRsYXN0VGltZVN0YW1wID0gaGV2LnNyY0V2ZW50LnRpbWVTdGFtcDtcblx0fVxuXHRpZiAoREVCVUcpIHtcblx0XHRsb2dQYW5FdmVudChoZXYpO1xuXHR9XG59O1xuXG4vLyBsZXQgcHJldmVudFNyY0V2ZW50ID0gZnVuY3Rpb24oaGV2KSB7XG4vLyBcdC8vY29uc29sZS5sb2coaGV2LnR5cGUsIFwicHJldmVudERlZmF1bHRcIik7XG4vLyBcdGhldi5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gfTtcblxuLy8gbGV0IHByZXZlbnRXaGlsZVBhbm5pbmcgPSBmdW5jdGlvbihkb21ldikge1xuLy8gXHRwYW5TZXNzaW9uT3BlbmVkICYmIGRvbWV2LnByZXZlbnREZWZhdWx0KCk7XG4vLyB9O1xuXG4vLyBsZXQgcHJldmVudFdoaWxlTm90UGFubmluZyA9IGZ1bmN0aW9uKGRvbWV2KSB7XG4vLyBcdCFwYW5TZXNzaW9uT3BlbmVkICYmIGRvbWV2LnByZXZlbnREZWZhdWx0KCk7XG4vLyB9O1xuXG5sZXQgc3RvcEV2ZW50QWZ0ZXJQYW4gPSBmdW5jdGlvbihkb21ldikge1xuXHRpZiAoKGRvbWV2LnRpbWVTdGFtcCAtIGxhc3RUaW1lU3RhbXApIDwgUEFORU5EX1RIUkVTX01TKSB7XG5cdFx0Ly8gZG9tZXYuZGVmYXVsdFByZXZlbnRlZCB8fFxuXHRcdGRvbWV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZG9tZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cblx0aWYgKERFQlVHKSB7XG5cdFx0bG9nRXZlbnQoZG9tZXYsIChkb21ldi50aW1lU3RhbXAgLSBsYXN0VGltZVN0YW1wKS50b0ZpeGVkKDMpKTtcblx0fVxuXHRsYXN0VGltZVN0YW1wID0gTmFOO1xufTtcblxudG91Y2hIYW5kbGVyc1tcImhwYW5zdGFydCBocGFuZW5kIGhwYW5jYW5jZWxcIl0gPSBzYXZlVGltZVN0YW1wO1xuLy8gdG91Y2hIYW5kbGVyc1tcInZwYW5zdGFydCB2cGFuZW5kIHZwYW5jYW5jZWxcIl0gPSBzYXZlVGltZVN0YW1wO1xuLy8gdG91Y2hIYW5kbGVyc1tcImhwYW5tb3ZlIGhwYW5lbmQgaHBhbmNhbmNlbFwiXSA9IHByZXZlbnRTcmNFdmVudDtcbi8vIHRvdWNoSGFuZGxlcnNbXCJ2cGFubW92ZSB2cGFuZW5kIHZwYW5jYW5jZWxcIl0gPSBwcmV2ZW50U3JjRXZlbnQ7XG5cbmNhcHR1cmVIYW5kbGVyc1tcImNsaWNrXCJdID0gc3RvcEV2ZW50QWZ0ZXJQYW47XG4vLyBidWJibGluZ0hhbmRsZXJzW1wiY2xpY2tcIl0gPSBzdG9wRXZlbnRBZnRlclBhbjtcblxuLy8gdG91Y2hIYW5kbGVyc1tbXG4vLyBcdFwidnBhbnN0YXJ0XCIsIFwidnBhbmVuZFwiLCBcInZwYW5jYW5jZWxcIiwgXCJ2cGFubW92ZVwiLFxuLy8gXHRcImhwYW5zdGFydFwiLCBcImhwYW5lbmRcIiwgXCJocGFuY2FuY2VsXCIsIFwiaHBhbm1vdmVcIlxuLy8gXS5qb2luKFwiIFwiKV0gPSBsb2dIYW1tZXJFdmVudDtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyogRE9NIGV2ZW50IGhhbmRsZXJzXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxuLy8gY2FwdHVyZUhhbmRsZXJzW1VQX0VWRU5UXSA9IHByZXZlbnRXaGlsZVBhbm5pbmc7XG4vLyBjYXB0dXJlSGFuZGxlcnNbXCJ0b3VjaG1vdmVcIl0gPSBjYXB0dXJlSGFuZGxlcnNbXCJtb3VzZW1vdmVcIl0gPSBsb2dET01FdmVudDtcblxuaWYgKERFQlVHKSB7XG5cdHZhciBsb2dQYW5FdmVudCA9IGZ1bmN0aW9uKGhldikge1xuXHRcdGxvZ0V2ZW50KGhldi5zcmNFdmVudCwgYFske2hldi50eXBlfV1gKTtcblx0fTtcblx0dmFyIGxvZ0V2ZW50ID0gZnVuY3Rpb24oZG9tZXYsIG1zZykge1xuXHRcdGxldCBtc2dzID0gW107XG5cdFx0aWYgKGRvbWV2LmRlZmF1bHRQcmV2ZW50ZWQpXG5cdFx0XHRtc2dzLnB1c2goXCJwcmV2ZW50ZWRcIik7XG5cdFx0aWYgKG1zZylcblx0XHRcdG1zZ3MucHVzaChtc2cpO1xuXHRcdG1zZ3MucHVzaChgJHtwYW5TZXNzaW9uT3BlbmVkID8gXCJwYW5uaW5nXCIgOiBcInBhbiBlbmRlZFwifSAkeyhkb21ldi50aW1lU3RhbXAgLSBsYXN0VGltZVN0YW1wKS50b0ZpeGVkKDMpfWApO1xuXHRcdGNvbnNvbGUubG9nKFwiVG91Y2hNYW5hZ2VyICVzIFslc11cIixcblx0XHRcdGRvbWV2LnRpbWVTdGFtcC50b0ZpeGVkKDMpLFxuXHRcdFx0ZG9tZXYudHlwZSxcblx0XHRcdG1zZ3Muam9pbihcIiwgXCIpXG5cdFx0KTtcblx0fTtcbn1cblxuLyogZXNsaW50LWVuYWJsZSBuby11bnN1c2VkLXZhcnMgKi9cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gYWRkSGFuZGxlcnMoKSB7XG5cdGxldCBldmVudE5hbWU7XG5cdGNvbnN0IGVsID0gaW5zdGFuY2UuZWxlbWVudDtcblx0Zm9yIChldmVudE5hbWUgaW4gdG91Y2hIYW5kbGVycylcblx0XHRpZiAodG91Y2hIYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKVxuXHRcdFx0aW5zdGFuY2Uub24oZXZlbnROYW1lLCB0b3VjaEhhbmRsZXJzW2V2ZW50TmFtZV0pO1xuXHRmb3IgKGV2ZW50TmFtZSBpbiBjYXB0dXJlSGFuZGxlcnMpXG5cdFx0aWYgKGNhcHR1cmVIYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKVxuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhcHR1cmVIYW5kbGVyc1tldmVudE5hbWVdLCB0cnVlKTtcblx0Zm9yIChldmVudE5hbWUgaW4gYnViYmxpbmdIYW5kbGVycylcblx0XHRpZiAoYnViYmxpbmdIYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKVxuXHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGJ1YmJsaW5nSGFuZGxlcnNbZXZlbnROYW1lXSwgZmFsc2UpO1xuXHQvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHByZXZlbnRXaGlsZU5vdFBhbm5pbmcsIGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSGFuZGxlcnMoKSB7XG5cdGxldCBldmVudE5hbWU7XG5cdGNvbnN0IGVsID0gaW5zdGFuY2UuZWxlbWVudDtcblx0Zm9yIChldmVudE5hbWUgaW4gY2FwdHVyZUhhbmRsZXJzKVxuXHRcdGlmIChjYXB0dXJlSGFuZGxlcnMuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSlcblx0XHRcdGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYXB0dXJlSGFuZGxlcnNbZXZlbnROYW1lXSwgdHJ1ZSk7XG5cdGZvciAoZXZlbnROYW1lIGluIGJ1YmJsaW5nSGFuZGxlcnMpXG5cdFx0aWYgKGNhcHR1cmVIYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKVxuXHRcdFx0ZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGJ1YmJsaW5nSGFuZGxlcnNbZXZlbnROYW1lXSwgdHJ1ZSk7XG5cdC8vIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgcHJldmVudFdoaWxlTm90UGFubmluZywgZmFsc2UpO1xufVxuXG4vKiogQHR5cGUge0hhbW1lci5NYW5hZ2VyfSAqL1xubGV0IGluc3RhbmNlID0gbnVsbDtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyogU3RhdGljIHB1YmxpY1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5sZXQgVG91Y2hNYW5hZ2VyID0ge1xuXHRpbml0OiBmdW5jdGlvbih0YXJnZXQpIHtcblx0XHRpZiAoaW5zdGFuY2UgPT09IG51bGwpIHtcblx0XHRcdGluc3RhbmNlID0gY3JlYXRlSW5zdGFuY2UodGFyZ2V0KTtcblx0XHRcdGFkZEhhbmRsZXJzKCk7XG5cdFx0fSBlbHNlIGlmIChpbnN0YW5jZS5lbGVtZW50ICE9PSB0YXJnZXQpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIlRvdWNoTWFuYWdlciBhbHJlYWR5IGluaXRpYWxpemVkIHdpdGggYW5vdGhlciBlbGVtZW50XCIpO1xuXHRcdH1cblx0XHRyZXR1cm4gaW5zdGFuY2U7XG5cdH0sXG5cblx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKGluc3RhbmNlICE9PSBudWxsKSB7XG5cdFx0XHRyZW1vdmVIYW5kbGVycygpO1xuXHRcdFx0aW5zdGFuY2UuZGVzdHJveSgpO1xuXHRcdFx0aW5zdGFuY2UgPSBudWxsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJubyBpbnN0YW5jZSB0byBkZXN0cm95XCIpO1xuXHRcdH1cblx0fSxcblxuXHRnZXRJbnN0YW5jZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKGluc3RhbmNlID09PSBudWxsKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiVG91Y2hNYW5hZ2VyIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZFwiKTtcblx0XHR9XG5cdFx0cmV0dXJuIGluc3RhbmNlO1xuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvdWNoTWFuYWdlcjtcblxuLypcbi8vIGFsdCBzeW50YXhcbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGVsKSB7XG5cdHJldHVybiBuZXcgSGFtbWVyKGVsLCB7XG5cdFx0cmVjb2duaXplcnM6IFtcblx0XHRcdFtUYXBdLFxuXHRcdFx0W1Bhbiwge1xuXHRcdFx0XHRldmVudDogJ2hwYW4nLFxuXHRcdFx0XHRkaXJlY3Rpb246IEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTCxcblx0XHRcdFx0dGhyZXNob2xkOiBHbG9iYWxzLlRIUkVTSE9MRFxuXHRcdFx0fV0sXG5cdFx0XHRbUGFuLCB7XG5cdFx0XHRcdGV2ZW50OiAndnBhbicsXG5cdFx0XHRcdGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCxcblx0XHRcdFx0dGhyZXNob2xkOiBHbG9iYWxzLlRIUkVTSE9MRFxuXHRcdFx0fSwgWydocGFuJ11dXG5cdFx0XVxuXHR9KTtcbn1cbiovXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBIVE1MRWxlbWVudCwgTXV0YXRpb25PYnNlcnZlciAqL1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L2Jhc2UvVmlld1xuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOnNldGltbWVkaWF0ZX0gKi9cbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmJhY2tib25lfSAqL1xuY29uc3QgQmFja2JvbmUgPSByZXF1aXJlKFwiYmFja2JvbmVcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qIE11dGF0aW9uT2JzZXJ2ZXJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIF9jaWRTZWVkID0gMTtcbnZhciBfdmlld3NCeUNpZCA9IHt9O1xuXG5mdW5jdGlvbiBhZGRDaGlsZFZpZXdzKGVsKSB7XG5cdHZhciB2aWV3LCBlbHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiKltkYXRhLWNpZF1cIik7XG5cdGZvciAodmFyIGkgPSAwLCBpaSA9IGVscy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG5cdFx0dmlldyA9IFZpZXcuZmluZEJ5RWxlbWVudChlbHMuaXRlbShpKSk7XG5cdFx0aWYgKHZpZXcpIHtcblx0XHRcdGlmICghdmlldy5hdHRhY2hlZCkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIlZpZXc6OlthdHRhY2hlZCAocGFyZW50KV0gJXNcIiwgdmlldy5jaWQpO1xuXHRcdFx0XHR2aWV3Ll9lbGVtZW50QXR0YWNoZWQoKTtcblx0XHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdFx0Ly8gXHRjb25zb2xlLndhcm4oXCJWaWV3OjpbYXR0YWNoZWQgKHBhcmVudCldICVzIChpZ25vcmVkKVwiLCB2aWV3LmNpZCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkVmlld3MoZWwpIHtcblx0dmFyIHZpZXcsIGVscyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2RhdGEtY2lkXVwiKTtcblx0Zm9yICh2YXIgaSA9IDAsIGlpID0gZWxzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHR2aWV3ID0gVmlldy5maW5kQnlFbGVtZW50KGVscy5pdGVtKGkpKTtcblx0XHRpZiAodmlldykge1xuXHRcdFx0aWYgKHZpZXcuYXR0YWNoZWQpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJWaWV3OjpbZGV0YWNoZWQgKHBhcmVudCldICVzXCIsIHZpZXcuY2lkKTtcblx0XHRcdFx0dmlldy5fZWxlbWVudERldGFjaGVkKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJWaWV3OjpbZGV0YWNoZWQgKHBhcmVudCldICVzIChpZ25vcmVkKVwiLCB2aWV3LmNpZCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbnZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG1tKSB7XG5cdC8vIGNvbnNvbGUubG9nKFwiVmlldzo6bXV0YXRpb25zICVzXCIsIEpTT04uc3RyaW5naWZ5KG1tLCBudWxsLCBcIiBcIikpO1xuXHR2YXIgaSwgaWksIG07XG5cdHZhciBqLCBqaiwgZTtcblx0dmFyIHZpZXc7XG5cdGZvciAoaSA9IDAsIGlpID0gbW0ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdG0gPSBtbVtpXTtcblx0XHRpZiAobS50eXBlID09IFwiY2hpbGRMaXN0XCIpIHtcblx0XHRcdGZvciAoaiA9IDAsIGpqID0gbS5hZGRlZE5vZGVzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcblx0XHRcdFx0ZSA9IG0uYWRkZWROb2Rlcy5pdGVtKGopO1xuXHRcdFx0XHR2aWV3ID0gVmlldy5maW5kQnlFbGVtZW50KGUpO1xuXHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdGlmICghdmlldy5hdHRhY2hlZCkge1xuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJWaWV3OjpbYXR0YWNoZWQgKGNoaWxkTGlzdCldICVzXCIsIHZpZXcuY2lkKTtcblx0XHRcdFx0XHRcdHZpZXcuX2VsZW1lbnRBdHRhY2hlZCgpO1xuXHRcdFx0XHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIFx0Y29uc29sZS53YXJuKFwiVmlldzo6W2F0dGFjaGVkIChjaGlsZExpc3QpXSAlcyAoaWdub3JlZClcIiwgdmlldy5jaWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSBhZGRDaGlsZFZpZXdzKGUpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yIChqID0gMCwgamogPSBtLnJlbW92ZWROb2Rlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG5cdFx0XHRcdGUgPSBtLnJlbW92ZWROb2Rlcy5pdGVtKGopO1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIlZpZXc6OltkZXRhY2hlZCAoY2hpbGRMaXN0KV0gJXNcIiwgZS5jaWQpO1xuXHRcdFx0XHR2aWV3ID0gVmlldy5maW5kQnlFbGVtZW50KGUpO1xuXHRcdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRcdGlmICh2aWV3LmF0dGFjaGVkKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlZpZXc6OltkZXRhY2hlZCAoY2hpbGRMaXN0KV0gJXNcIiwgdmlldy5jaWQsIHZpZXcuYXR0YWNoZWQpO1xuXHRcdFx0XHRcdFx0dmlldy5fZWxlbWVudERldGFjaGVkKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUud2FybihcIlZpZXc6OltkZXRhY2hlZCAoY2hpbGRMaXN0KV0gJXMgKGlnbm9yZWQpXCIsIHZpZXcuY2lkLCB2aWV3LmF0dGFjaGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgcmVtb3ZlQ2hpbGRWaWV3cyhlKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKG0udHlwZSA9PSBcImF0dHJpYnV0ZXNcIikge1xuXHRcdFx0dmlldyA9IFZpZXcuZmluZEJ5RWxlbWVudChtLnRhcmdldCk7XG5cdFx0XHRpZiAodmlldykge1xuXHRcdFx0XHRpZiAoIXZpZXcuYXR0YWNoZWQpIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIlZpZXc6OlthdHRhY2hlZCAoYXR0cmlidXRlKV0gJXNcIiwgdmlldy5jaWQpO1xuXHRcdFx0XHRcdHZpZXcuX2VsZW1lbnRBdHRhY2hlZCgpO1xuXHRcdFx0XHRcdC8vIH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gXHRjb25zb2xlLndhcm4oXCJWaWV3OjpbYXR0YWNoZWQgKGF0dHJpYnV0ZSldICVzIChpZ25vcmVkKVwiLCB2aWV3LmNpZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIGVsc2Uge1xuXHRcdFx0Ly8gXHRjb25zb2xlLndhcm4oXCJWaWV3OjpbYXR0cmlidXRlc10gdGFyZ2V0IGhhcyBubyBjaWQgKCVzPSclcycpXCIsIG0uYXR0cmlidXRlTmFtZSwgbS50YXJnZXQuZ2V0QXR0cmlidXRlKG0uYXR0cmlidXRlTmFtZSksIG0pO1xuXHRcdFx0Ly8gfVxuXHRcdH1cblx0fVxufSk7XG5cbm9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuXHRhdHRyaWJ1dGVzOiB0cnVlLFxuXHRjaGlsZExpc3Q6IHRydWUsXG5cdHN1YnRyZWU6IHRydWUsXG5cdGF0dHJpYnV0ZUZpbHRlcjogW1wiZGF0YS1jaWRcIl1cbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiBzdGF0aWMgcHJpdmF0ZVxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgX25vdyA9IHdpbmRvdy5wZXJmb3JtYW5jZSA/XG5cdHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cuYmluZCh3aW5kb3cucGVyZm9ybWFuY2UpIDpcblx0RGF0ZS5ub3cuYmluZChEYXRlKTtcbi8vIHZhciBfbm93ID0gd2luZG93LnBlcmZvcm1hbmNlP1xuLy8gXHRmdW5jdGlvbigpIHsgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTsgfTpcbi8vIFx0ZnVuY3Rpb24oKSB7IHJldHVybiBEYXRlLm5vdygpOyB9O1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL3JlbmRlclF1ZXVlfSAqL1xuLy8gdmFyIHJlbmRlclF1ZXVlID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvcmVuZGVyUXVldWVcIik7XG4vL1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9DYWxsYmFja1F1ZXVlfSAqL1xudmFyIHJlbmRlclF1ZXVlID0gKGZ1bmN0aW9uKENhbGxiYWNrUXVldWUpIHtcblx0cmV0dXJuIG5ldyBDYWxsYmFja1F1ZXVlKFxuXHRcdGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdFx0XHRyZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG5cdFx0fSxcblx0XHRmdW5jdGlvbihpZCkge1xuXHRcdFx0cmV0dXJuIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG5cdFx0fVxuXHQpO1xufSkocmVxdWlyZShcImFwcC92aWV3L2Jhc2UvQ2FsbGJhY2tRdWV1ZVwiKSk7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvQ2FsbGJhY2tRdWV1ZX0gKi9cbnZhciBtb2RlbFF1ZXVlID0gKGZ1bmN0aW9uKENhbGxiYWNrUXVldWUpIHtcblx0cmV0dXJuIG5ldyBDYWxsYmFja1F1ZXVlKFxuXHRcdGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdFx0XHRyZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2FsbGJhY2suY2FsbChudWxsLCBfbm93KCkpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRmdW5jdGlvbihpZCkge1xuXHRcdFx0cmV0dXJuIHdpbmRvdy5jbGVhckltbWVkaWF0ZShpZCk7XG5cdFx0fVxuXHQpO1xufSkocmVxdWlyZShcImFwcC92aWV3L2Jhc2UvQ2FsbGJhY2tRdWV1ZVwiKSk7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvUHJlZml4ZWRFdmVudHN9ICovXG5jb25zdCBQcmVmaXhlZEV2ZW50cyA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL1ByZWZpeGVkRXZlbnRzXCIpO1xuXG52YXIgYXBwbHlFdmVudFByZWZpeGVzID0gZnVuY3Rpb24oZXZlbnRzKSB7XG5cdHZhciBzZWxlY3RvciwgdW5wcmVmaXhlZDtcblx0Zm9yIChzZWxlY3RvciBpbiBldmVudHMpIHtcblx0XHR1bnByZWZpeGVkID0gc2VsZWN0b3IubWF0Y2goL15cXHcrL2kpWzBdO1xuXHRcdGlmIChQcmVmaXhlZEV2ZW50cy5oYXNPd25Qcm9wZXJ0eSh1bnByZWZpeGVkKSkge1xuXHRcdFx0ZXZlbnRzW3NlbGVjdG9yLnJlcGxhY2UodW5wcmVmaXhlZCwgUHJlZml4ZWRFdmVudHNbdW5wcmVmaXhlZF0pXSA9IGV2ZW50c1tzZWxlY3Rvcl07XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcImFwcGx5RXZlbnRQcmVmaXhlc1wiLCB1bnByZWZpeGVkLCBwcmVmaXhlZEV2ZW50c1t1bnByZWZpeGVkXSk7XG5cdFx0XHRkZWxldGUgZXZlbnRzW3NlbGVjdG9yXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGV2ZW50cztcbn07XG5cbnZhciBnZXRWaWV3RGVwdGggPSBmdW5jdGlvbih2aWV3KSB7XG5cdGlmICghdmlldykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmICghdmlldy5hdHRhY2hlZCkge1xuXHRcdHJldHVybiBOYU47XG5cdH1cblx0aWYgKHZpZXcucGFyZW50VmlldyA9PT0gbnVsbCkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cdHJldHVybiB2aWV3LnBhcmVudFZpZXcudmlld0RlcHRoICsgMTtcbn07XG5cbmZ1bmN0aW9uIGxvZ0F0dGFjaEluZm8odmlldywgbmFtZSwgbGV2ZWwpIHtcblx0aWYgKFtcImxvZ1wiLCBcImluZm9cIiwgXCJ3YXJuXCIsIFwiZXJyb3JcIl0uaW5kZXhPZihsZXZlbCkgIT0gLTEpIHtcblx0XHRsZXZlbCA9IFwibG9nXCI7XG5cdH1cblx0Y29uc29sZVtsZXZlbF0uY2FsbChjb25zb2xlLCBcIiVzOjolcyBbcGFyZW50OiVzICVzICVzIGRlcHRoOiVzXVwiLCB2aWV3LmNpZCwgbmFtZSwgdmlldy5wYXJlbnRWaWV3ICYmIHZpZXcucGFyZW50Vmlldy5jaWQsIHZpZXcuYXR0YWNoZWQgPyBcImF0dGFjaGVkXCIgOiBcImRldGFjaGVkXCIsIHZpZXcuX3ZpZXdQaGFzZSwgdmlldy52aWV3RGVwdGgpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiBzdGF0aWMgcHVibGljXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxudmFyIFZpZXcgPSB7XG5cblx0LyoqIEBjb25zdCAqL1xuXHROT05FX0lOVkFMSUQ6IDAsXG5cdC8qKiBAY29uc3QgKi9cblx0QUxMX0lOVkFMSUQ6IH4wID4+PiAxLFxuXG5cdC8qKiBAY29uc3QgKi9cblx0Q0hJTERSRU5fSU5WQUxJRDogMSxcblx0LyoqIEBjb25zdCAqL1xuXHRNT0RFTF9JTlZBTElEOiAyLFxuXHQvKiogQGNvbnN0ICovXG5cdFNUWUxFU19JTlZBTElEOiA0LFxuXHQvKiogQGNvbnN0ICovXG5cdFNJWkVfSU5WQUxJRDogOCxcblx0LyoqIEBjb25zdCAqL1xuXHRMQVlPVVRfSU5WQUxJRDogMTYsXG5cblx0LyoqIEBjb25zdCAqL1xuXHRDTElDS19FVkVOVDogXCJjbGlja1wiLCAvL3dpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIm9ucG9pbnRlcnVwXCIpID8gXCJwb2ludGVydXBcIiA6IFwibW91c2V1cFwiLFxuXG5cdC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld0Vycm9yfSAqL1xuXHRWaWV3RXJyb3I6IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL1ZpZXdFcnJvclwiKSxcblxuXHQvKiogQHR5cGUge21vZHVsZTp1dGlscy9wcmVmaXhlZFByb3BlcnR5fSAqL1xuXHRwcmVmaXhlZFByb3BlcnR5OiByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRQcm9wZXJ0eVwiKSxcblxuXHQvKiogQHR5cGUge21vZHVsZTp1dGlscy9wcmVmaXhlZFN0eWxlTmFtZX0gKi9cblx0cHJlZml4ZWRTdHlsZU5hbWU6IHJlcXVpcmUoXCJ1dGlscy9wcmVmaXhlZFN0eWxlTmFtZVwiKSxcblxuXHQvKiogQHR5cGUge21vZHVsZTp1dGlscy9wcmVmaXhlZEV2ZW50fSAqL1xuXHRwcmVmaXhlZEV2ZW50OiByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRFdmVudFwiKSxcblxuXHQvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9wcm9taXNlL3doZW5WaWV3SXNBdHRhY2hlZH0gKi9cblx0d2hlblZpZXdJc0F0dGFjaGVkOiByZXF1aXJlKFwiYXBwL3ZpZXcvcHJvbWlzZS93aGVuVmlld0lzQXR0YWNoZWRcIiksXG5cblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcHJvbWlzZS93aGVuVmlld0lzUmVuZGVyZWR9ICovXG5cdHdoZW5WaWV3SXNSZW5kZXJlZDogcmVxdWlyZShcImFwcC92aWV3L3Byb21pc2Uvd2hlblZpZXdJc1JlbmRlcmVkXCIpLFxuXG5cdC8qKlxuXHQvKiBAcGFyYW0gZWwge0hUTUxFbGVtZW50fVxuXHQvKiBAcmV0dXJuIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3fVxuXHQvKi9cblx0ZmluZEJ5RWxlbWVudDogZnVuY3Rpb24oZWwpIHtcblx0XHRpZiAoX3ZpZXdzQnlDaWRbZWwuY2lkXSkge1xuXHRcdFx0cmV0dXJuIF92aWV3c0J5Q2lkW2VsLmNpZF07XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXG5cdC8qKlxuXHQvKiBAcGFyYW0gZWwge0hUTUxFbGVtZW50fVxuXHQvKiBAcmV0dXJuIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3fVxuXHQvKi9cblx0ZmluZEJ5RGVzY2VuZGFudDogZnVuY3Rpb24oZWwpIHtcblx0XHRkbyB7XG5cdFx0XHRpZiAoX3ZpZXdzQnlDaWRbZWwuY2lkXSkge1xuXHRcdFx0XHRyZXR1cm4gX3ZpZXdzQnlDaWRbZWwuY2lkXTtcblx0XHRcdH1cblx0XHR9IHdoaWxlICgoZWwgPSBlbC5wYXJlbnRFbGVtZW50IHx8IGVsLnBhcmVudE5vZGUpKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGV4dGVuZDogZnVuY3Rpb24ocHJvdG8sIG9iaikge1xuXHRcdGlmIChQcmVmaXhlZEV2ZW50cy5sZW5ndGggJiYgcHJvdG8uZXZlbnRzKSB7XG5cdFx0XHRpZiAoXy5pc0Z1bmN0aW9uKHByb3RvLmV2ZW50cykpIHtcblx0XHRcdFx0cHJvdG8uZXZlbnRzID0gXy53cmFwKHByb3RvLmV2ZW50cywgZnVuY3Rpb24oZm4pIHtcblx0XHRcdFx0XHRyZXR1cm4gYXBwbHlFdmVudFByZWZpeGVzKGZuLmFwcGx5KHRoaXMpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Vcblx0XHRcdGlmIChfLmlzT2JqZWN0KHByb3RvLmV2ZW50cykpIHtcblx0XHRcdFx0cHJvdG8uZXZlbnRzID0gYXBwbHlFdmVudFByZWZpeGVzKHByb3RvLmV2ZW50cyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChwcm90by5wcm9wZXJ0aWVzICYmIHRoaXMucHJvdG90eXBlLnByb3BlcnRpZXMpIHtcblx0XHRcdF8uZGVmYXVsdHMocHJvdG8ucHJvcGVydGllcywgdGhpcy5wcm90b3R5cGUucHJvcGVydGllcyk7XG5cdFx0fVxuXHRcdHJldHVybiBCYWNrYm9uZS5WaWV3LmV4dGVuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9LFxuXG5cdF9mbGFnc1RvU3RyaW5nczogW1wiLVwiXSxcblxuXHRmbGFnc1RvU3RyaW5nOiBmdW5jdGlvbihmbGFncykge1xuXHRcdHZhciBzID0gVmlldy5fZmxhZ3NUb1N0cmluZ3NbZmxhZ3MgfCAwXTtcblx0XHRpZiAoIXMpIHtcblx0XHRcdHMgPSBbXTtcblx0XHRcdGlmIChmbGFncyAmIFZpZXcuQ0hJTERSRU5fSU5WQUxJRCkgcy5wdXNoKFwiY2hpbGRyZW5cIik7XG5cdFx0XHRpZiAoZmxhZ3MgJiBWaWV3Lk1PREVMX0lOVkFMSUQpIHMucHVzaChcIm1vZGVsXCIpO1xuXHRcdFx0aWYgKGZsYWdzICYgVmlldy5TVFlMRVNfSU5WQUxJRCkgcy5wdXNoKFwic3R5bGVzXCIpO1xuXHRcdFx0aWYgKGZsYWdzICYgVmlldy5TSVpFX0lOVkFMSUQpIHMucHVzaChcInNpemVcIik7XG5cdFx0XHRpZiAoZmxhZ3MgJiBWaWV3LkxBWU9VVF9JTlZBTElEKSBzLnB1c2goXCJsYXlvdXRcIik7XG5cdFx0XHRWaWV3Ll9mbGFnc1RvU3RyaW5nc1tmbGFnc10gPSBzID0gcy5qb2luKFwiIFwiKTtcblx0XHR9XG5cdFx0cmV0dXJuIHM7XG5cdFx0Ly8gcmV0dXJuIChmbGFncyB8IDApLnRvU3RyaW5nKDIpO1xuXHR9LFxufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXcsIFwiaW5zdGFuY2VzXCIsIHtcblx0dmFsdWU6IF92aWV3c0J5Q2lkLFxuXHRlbnVtZXJhYmxlOiB0cnVlXG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyogcHJvdG90eXBlXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIG1vZHVsZS5leHBvcnRzID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xudmFyIFZpZXdQcm90byA9IHtcblxuXHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0Y2lkUHJlZml4OiBcInZpZXdcIixcblx0LyoqIEB0eXBlIHtCb29sZWFufSAqL1xuXHRfYXR0YWNoZWQ6IGZhbHNlLFxuXHQvKiogQHR5cGUge0hUTUxFbGVtZW50fG51bGx9ICovXG5cdF9wYXJlbnRWaWV3OiBudWxsLFxuXHQvKiogQHR5cGUge2ludHxudWxsfSAqL1xuXHRfdmlld0RlcHRoOiBudWxsLFxuXHQvKiogQHR5cGUge3N0cmluZ30gaW5pdGlhbGl6aW5nID4gaW5pdGlhbGl6ZWQgPiBkaXNwb3NpbmcgPiBkaXNwb3NlZCAqL1xuXHRfdmlld1BoYXNlOiBcImluaXRpYWxpemluZ1wiLFxuXHQvKiogQHR5cGUge2ludH0gKi9cblx0X3JlbmRlclF1ZXVlSWQ6IC0xLFxuXHQvKiogQHR5cGUge2ludH0gKi9cblx0X3JlbmRlckZsYWdzOiAwLFxuXHQvKiogQHR5cGUge0Jvb2xlYW59ICovXG5cdF9lbmFibGVkOiBudWxsLFxuXG5cdC8qKiBAdHlwZSB7b2JqZWN0fSAqL1xuXHRwcm9wZXJ0aWVzOiB7XG5cdFx0Y2lkOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fY2lkIHx8ICh0aGlzLl9jaWQgPSB0aGlzLmNpZFByZWZpeCArIF9jaWRTZWVkKyspO1xuXHRcdFx0fSxcblx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdFx0Ly8gaWdub3JlZFxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YXR0YWNoZWQ6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9hdHRhY2hlZDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHBhcmVudFZpZXc6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9wYXJlbnRWaWV3O1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0dmlld0RlcHRoOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fZ2V0Vmlld0RlcHRoKCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRpbnZhbGlkYXRlZDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3JlbmRlclF1ZXVlSWQgIT09IC0xO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ZW5hYmxlZDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbihlbmFibGVkKSB7XG5cdFx0XHRcdHRoaXMuc2V0RW5hYmxlZChlbmFibGVkKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHJlbmRlckZsYWdzOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fcmVuZGVyRmxhZ3M7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdCQ6IEJhY2tib25lLiQsXG5cblx0LyoqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld31cblx0ICovXG5cdGNvbnN0cnVjdG9yOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dGhpcy50cmFuc2Zvcm0gPSB7fTtcblx0XHR0aGlzLmNoaWxkVmlld3MgPSB7fTtcblx0XHR0aGlzLl9hcHBseVJlbmRlciA9IHRoaXMuX2FwcGx5UmVuZGVyLmJpbmQodGhpcyk7XG5cblx0XHRpZiAodGhpcy5wcm9wZXJ0aWVzKSB7XG5cdFx0XHQvLyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCBnZXRQcm90b3R5cGVDaGFpblZhbHVlKHRoaXMsIFwicHJvcGVydGllc1wiLCBCYWNrYm9uZS5WaWV3KSk7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB0aGlzLnByb3BlcnRpZXMpO1xuXHRcdH1cblx0XHRpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNsYXNzTmFtZSAmJiB0aGlzLmNsYXNzTmFtZSkge1xuXHRcdFx0b3B0aW9ucy5jbGFzc05hbWUgKz0gXCIgXCIgKyBfLnJlc3VsdCh0aGlzLCBcImNsYXNzTmFtZVwiKTtcblx0XHR9XG5cdFx0aWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXJlbnRWaWV3KSB7XG5cdFx0XHR0aGlzLl9zZXRQYXJlbnRWaWV3KG9wdGlvbnMucGFyZW50VmlldywgdHJ1ZSk7XG5cdFx0fVxuXHRcdEJhY2tib25lLlZpZXcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OmluaXRpYWxpemUgdmlld1BoYXNlOlslcyA9PiBpbml0aWFsaXplZF1cIiwgdGhpcy5jaWQsIHRoaXMuX3ZpZXdQaGFzZSk7XG5cdFx0dGhpcy5fdmlld1BoYXNlID0gXCJpbml0aWFsaXplZFwiO1xuXG5cdFx0aWYgKHRoaXMucGFyZW50VmlldyAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzpwYXJlbnRDaGFuZ2VcIiwgdGhpcy5wYXJlbnRWaWV3LCBudWxsKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuYXR0YWNoZWQpIHtcblx0XHRcdHRoaXMudHJpZ2dlcihcInZpZXc6YXR0YWNoZWRcIiwgdGhpcyk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogcmVtb3ZlXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuX3ZpZXdQaGFzZSA9PSBcImRpc3Bvc2luZ1wiKSB7XG5cdFx0XHRsb2dBdHRhY2hJbmZvKHRoaXMsIFwicmVtb3ZlXCIsIFwid2FyblwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gbG9nQXR0YWNoSW5mbyh0aGlzLCBcInJlbW92ZVwiLCBcImxvZ1wiKTtcblx0XHR9XG5cblx0XHQvLyBiZWZvcmUgcmVtb3ZhbFxuXHRcdHRoaXMuX3ZpZXdQaGFzZSA9IFwiZGlzcG9zaW5nXCI7XG5cdFx0dGhpcy5fY2FuY2VsUmVuZGVyKCk7XG5cblx0XHQvLyBjYWxsIEJhY2tib25lIGltcGxcblx0XHQvLyBCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdC8vIE5PVEU6IGZyb20gQmFja2JvbmUgaW1wbFxuXHRcdHRoaXMuJGVsLnJlbW92ZSgpOyAvLyBmcm9tIEJhY2tib25lIGltcGxcblxuXHRcdHRoaXMuX2F0dGFjaGVkID0gZmFsc2U7XG5cdFx0dGhpcy50cmlnZ2VyKFwidmlldzpyZW1vdmVkXCIsIHRoaXMpO1xuXG5cdFx0Ly8gcmVtb3ZlIHBhcmVudC9jaGlsZCByZWZlcmVuY2VzXG5cdFx0dGhpcy5fc2V0UGFyZW50VmlldyhudWxsKTtcblxuXHRcdC8vIE5PVEU6IGZyb20gQmFja2JvbmUgaW1wbC4gTm8gbW9yZSBldmVudHMgYWZ0ZXIgdGhpc1xuXHRcdHRoaXMuc3RvcExpc3RlbmluZygpO1xuXG5cdFx0Ly8gY2hlY2sgZm9yIGludmFsaWRhdGlvbnMgdGhhdCBtYXkgaGF2ZSBiZWVuIHRyaWdnZXJlZCBieSBcInZpZXc6cmVtb3ZlZFwiXG5cdFx0aWYgKHRoaXMuaW52YWxpZGF0ZWQpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIiVzOjpyZW1vdmUgaW52YWxpZGF0ZWQgYWZ0ZXIgcmVtb3ZlKClcIiwgdGhpcy5jaWQpO1xuXHRcdFx0dGhpcy5fY2FuY2VsUmVuZGVyKCk7XG5cdFx0fVxuXHRcdC8vIC8vIGNoZWNrIGZvciBjaGlsZHJlbiBzdGlsbCBoZXJlXG5cdFx0Ly8gdmFyIGNjaWRzID0gT2JqZWN0LmtleXModGhpcy5jaGlsZFZpZXdzKTtcblx0XHQvLyBpZiAoY2NpZHMubGVuZ3RoKSB7XG5cdFx0Ly8gXHRjb25zb2xlLndhcm4oXCIlczo6cmVtb3ZlICVpIGNoaWxkcmVuIG5vdCByZW1vdmVkIFslc11cIiwgdGhpcy5jaWQsIGNjaWRzLmxlbmd0aCwgY2NpZHMuam9pbihcIiwgXCIpLCB0aGlzLmNoaWxkVmlld3MpO1xuXHRcdC8vIH1cblx0XHQvLyAvLyByZW1vdmUgY2hpbGRWaWV3c1xuXHRcdC8vIGZvciAodmFyIGNpZCBpbiB0aGlzLmNoaWxkVmlld3MpIHtcblx0XHQvLyBcdHRoaXMuY2hpbGRWaWV3c1tjaWRdLnJlbW92ZSgpO1xuXHRcdC8vIH1cblx0XHQvLyBjbGVhciByZWZlcmVuY2UgaW4gdmlldyBtYXBcblx0XHRkZWxldGUgX3ZpZXdzQnlDaWRbdGhpcy5jaWRdO1xuXHRcdC8vIGRlbGV0ZSB0aGlzLmVsLmNpZDtcblx0XHQvLyB1cGRhdGUgcGhhc2Vcblx0XHR0aGlzLl92aWV3UGhhc2UgPSBcImRpc3Bvc2VkXCI7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBfZWxlbWVudEF0dGFjaGVkIF9lbGVtZW50RGV0YWNoZWRcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9lbGVtZW50QXR0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoaXMuX2FkZFRvUGFyZW50VmlldygpO1xuXHRcdHRoaXMuX2F0dGFjaGVkID0gdHJ1ZTtcblx0XHR0aGlzLl92aWV3RGVwdGggPSBudWxsO1xuXHRcdHRoaXMuc2V0RW5hYmxlZCh0cnVlKTtcblx0XHR0aGlzLl9zZXRQYXJlbnRWaWV3KFZpZXcuZmluZEJ5RGVzY2VuZGFudCh0aGlzLmVsLnBhcmVudEVsZW1lbnQpKTtcblxuXHRcdC8vIGlmICh0aGlzLnBhcmVudFZpZXcpIHtcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiW2F0dGFjaF0gWyVpXSAlcyA+ICVzOjpfZWxlbWVudEF0dGFjaGVkXCIsIHRoaXMudmlld0RlcHRoLCB0aGlzLnBhcmVudFZpZXcuY2lkLCB0aGlzLmNpZCk7XG5cdFx0Ly8gfSBlbHNlIHtcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiW2F0dGFjaF0gWyVpXSAlczo6X2VsZW1lbnRBdHRhY2hlZFwiLCB0aGlzLnZpZXdEZXB0aCwgdGhpcy5jaWQpO1xuXHRcdC8vIH1cblxuXHRcdC8vIGlmICh0aGlzLl92aWV3UGhhc2UgPT0gXCJpbml0aWFsaXppbmdcIikge1xuXHRcdC8vIFx0Ly8gdGhpcy50cmlnZ2VyKFwidmlldzphdHRhY2hlZFwiLCB0aGlzKTtcblx0XHQvLyB9IGVsc2Vcblx0XHRpZiAodGhpcy5fdmlld1BoYXNlID09IFwiaW5pdGlhbGl6ZWRcIikge1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzphdHRhY2hlZFwiLCB0aGlzKTtcblx0XHR9IGVsc2Vcblx0XHRpZiAodGhpcy5fdmlld1BoYXNlID09IFwicmVwbGFjaW5nXCIpIHtcblx0XHRcdHRoaXMuX3ZpZXdQaGFzZSA9IFwiaW5pdGlhbGl6ZWRcIjtcblx0XHRcdHRoaXMudHJpZ2dlcihcInZpZXc6cmVwbGFjZWRcIiwgdGhpcyk7XG5cdFx0fVxuXHR9LFxuXG5cdF9lbGVtZW50RGV0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghdGhpcy5hdHRhY2hlZCB8fCAodGhpcy5fdmlld1BoYXNlID09IFwiZGlzcG9zaW5nXCIpIHx8ICh0aGlzLl92aWV3UGhhc2UgPT0gXCJkaXNwb3NlZFwiKSkge1xuXHRcdFx0bG9nQXR0YWNoSW5mbyh0aGlzLCBcIl9lbGVtZW50RGV0YWNoZWRcIiwgXCJlcnJvclwiKTtcblx0XHRcdC8vIH0gZWxzZSB7XG5cdFx0XHQvLyBcdGxvZ0F0dGFjaEluZm8odGhpcywgXCJfZWxlbWVudERldGFjaGVkXCIsIFwibG9nXCIpO1xuXHRcdH1cblx0XHR0aGlzLl9hdHRhY2hlZCA9IGZhbHNlO1xuXHRcdHRoaXMuX3ZpZXdEZXB0aCA9IG51bGw7XG5cdFx0dGhpcy5zZXRFbmFibGVkKGZhbHNlKTtcblxuXHRcdGlmICh0aGlzLl92aWV3UGhhc2UgIT0gXCJkaXNwb3NpbmdcIiB8fCB0aGlzLl92aWV3UGhhc2UgPT0gXCJkaXNwb3NlZFwiKSB7XG5cdFx0XHR0aGlzLnJlbW92ZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIHBhcmVudFZpZXdcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9zZXRQYXJlbnRWaWV3OiBmdW5jdGlvbihuZXdQYXJlbnQsIHNpbGVudCkge1xuXHRcdGlmIChuZXdQYXJlbnQgPT09IHZvaWQgMCkge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiJHM6Ol9zZXRQYXJlbnRWaWV3IGludmFsaWQgdmFsdWUgJyVzJ1wiLCB0aGlzLmNpZCwgbmV3UGFyZW50KTtcblx0XHRcdG5ld1BhcmVudCA9IG51bGw7XG5cdFx0fVxuXHRcdHZhciBvbGRQYXJlbnQgPSB0aGlzLl9wYXJlbnRWaWV3O1xuXHRcdHRoaXMuX3BhcmVudFZpZXcgPSBuZXdQYXJlbnQ7XG5cblx0XHQvLyBmb3JjZSB1cGRhdGUgb2YgX3ZpZXdEZXB0aFxuXHRcdHRoaXMuX3ZpZXdEZXB0aCA9IG51bGw7IC8vZ2V0Vmlld0RlcHRoKHRoaXMpO1xuXG5cdFx0Ly8gc2tpcCB0aGUgcmVzdCBpZiBhcmcgaXMgdGhlIHNhbWVcblx0XHRpZiAobmV3UGFyZW50ID09PSBvbGRQYXJlbnQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKG9sZFBhcmVudCAhPT0gbnVsbCkge1xuXHRcdFx0aWYgKHRoaXMuY2lkIGluIG9sZFBhcmVudC5jaGlsZFZpZXdzKSB7XG5cdFx0XHRcdGRlbGV0ZSBvbGRQYXJlbnQuY2hpbGRWaWV3c1t0aGlzLmNpZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChuZXdQYXJlbnQgIT09IG51bGwpIHtcblx0XHRcdG5ld1BhcmVudC5jaGlsZFZpZXdzW3RoaXMuY2lkXSA9IHRoaXM7XG5cdFx0fVxuXHRcdGlmICghc2lsZW50KVxuXHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzpwYXJlbnRDaGFuZ2VcIiwgdGhpcywgbmV3UGFyZW50LCBvbGRQYXJlbnQpO1xuXHR9LFxuXG5cdHdoZW5BdHRhY2hlZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIFZpZXcud2hlblZpZXdJc0F0dGFjaGVkKHRoaXMpO1xuXHR9LFxuXG5cdF9nZXRWaWV3RGVwdGg6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl92aWV3RGVwdGggPT09IG51bGwpIHtcblx0XHRcdHRoaXMuX3ZpZXdEZXB0aCA9IGdldFZpZXdEZXB0aCh0aGlzKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX3ZpZXdEZXB0aDtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIEJhY2tib25lLlZpZXcgb3ZlcnJpZGVzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIGRlbGVnYXRlKSB7XG5cdFx0Ly8gc2V0RWxlbWVudCBhbHdheXMgaW5pdGlhbGl6ZXMgdGhpcy5lbCwgc28gY2hlY2sgaXQgdG8gYmUgbm9uLW51bGwgYmVmb3JlIGNhbGxpbmcgc3VwZXJcblx0XHRpZiAodGhpcy5lbCkge1xuXHRcdFx0aWYgKHRoaXMuZWwgIT09IGVsZW1lbnQgJiYgdGhpcy5lbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdC8vIEVsZW1lbnQgaXMgYmVpbmcgcmVwbGFjZWRcblx0XHRcdFx0aWYgKHRoaXMuYXR0YWNoZWQpIHtcblx0XHRcdFx0XHQvLyBTaW5jZSBvbGQgZWxlbWVudCBpcyBhdHRhY2hlZCB0byBkb2N1bWVudCB0cmVlLCBfZWxlbWVudEF0dGFjaGVkIHdpbGwgYmVcblx0XHRcdFx0XHQvLyB0cmlnZ2VyZWQgYnkgcmVwbGFjZUNoaWxkOiBzZXQgX3ZpZXdQaGFzZSA9IFwicmVwbGFjaW5nXCIgdG8gZmxhZyB0aGlzXG5cdFx0XHRcdFx0Ly8gY2hhbmdlIGFuZCB0cmlnZ2VyICd2aWV3OnJlcGxhY2VkJyBpbnN0ZWFkIG9mICd2aWV3OmFkZGVkJy5cblx0XHRcdFx0XHR0aGlzLl92aWV3UGhhc2UgPSBcInJlcGxhY2luZ1wiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZWwucGFyZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQoZWxlbWVudCwgdGhpcy5lbCk7XG5cdFx0XHR9XG5cdFx0XHRCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS5zZXRFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHQvLyBNZXJnZSBjbGFzc2VzIHNwZWNpZmllZCBieSB0aGlzIHZpZXcgd2l0aCB0aGUgb25lcyBhbHJlYWR5IGluIHRoZSBlbGVtZW50LFxuXHRcdFx0Ly8gYXMgYmFja2JvbmUgd2lsbCBub3Q6XG5cdFx0XHRpZiAodGhpcy5jbGFzc05hbWUpIHtcblx0XHRcdFx0Xy5yZXN1bHQodGhpcywgXCJjbGFzc05hbWVcIikuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZChpdGVtKTtcblx0XHRcdFx0fSwgdGhpcyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdEJhY2tib25lLlZpZXcucHJvdG90eXBlLnNldEVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5lbCA9PT0gdm9pZCAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJCYWNrYm9uZSB2aWV3IGhhcyBubyBlbGVtZW50XCIpO1xuXHRcdH1cblx0XHRfdmlld3NCeUNpZFt0aGlzLmNpZF0gPSB0aGlzO1xuXHRcdHRoaXMuZWwuY2lkID0gdGhpcy5jaWQ7XG5cdFx0dGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNpZFwiLCB0aGlzLmNpZCk7XG5cdFx0aWYgKHRoaXMubW9kZWwpIHtcblx0XHRcdHRoaXMuZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1tY2lkXCIsIHRoaXMubW9kZWwuY2lkKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogZXZlbnQgaGVscGVyc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRhZGRMaXN0ZW5lcnM6IGZ1bmN0aW9uKHRhcmdldCwgZXZlbnRzLCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG5cdFx0aWYgKCFfLmlzT2JqZWN0KHVzZUNhcHR1cmUpKSB1c2VDYXB0dXJlID0gISF1c2VDYXB0dXJlO1xuXHRcdGlmICh0eXBlb2YgZXZlbnRzID09PSBcInN0cmluZ1wiKSB7IGV2ZW50cyA9IGV2ZW50cy5zcGxpdChcIiBcIik7IH1cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzW2ldLCBoYW5kbGVyLCB1c2VDYXB0dXJlKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cmVtb3ZlTGlzdGVuZXJzOiBmdW5jdGlvbih0YXJnZXQsIGV2ZW50cywgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuXHRcdGlmICghXy5pc09iamVjdCh1c2VDYXB0dXJlKSkgdXNlQ2FwdHVyZSA9ICEhdXNlQ2FwdHVyZTtcblx0XHRpZiAodHlwZW9mIGV2ZW50cyA9PT0gXCJzdHJpbmdcIikgeyBldmVudHMgPSBldmVudHMuc3BsaXQoXCIgXCIpOyB9XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50c1tpXSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGxpc3RlblRvRWxlbWVudDogZnVuY3Rpb24odGFyZ2V0LCBldmVudHMsIGhhbmRsZXIpIHtcblx0XHR0YXJnZXQgPSBCYWNrYm9uZS4kKHRhcmdldCk7XG5cdFx0aWYgKHR5cGVvZiBldmVudHMgPT09IFwic3RyaW5nXCIpIHsgZXZlbnRzID0gZXZlbnRzLnNwbGl0KFwiIFwiKTsgfVxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLmxpc3RlblRvKHRhcmdldCwgZXZlbnRzW2ldLCBoYW5kbGVyKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BMaXN0ZW5pbmdUb0VsZW1lbnQ6IGZ1bmN0aW9uKHRhcmdldCwgZXZlbnRzLCBoYW5kbGVyKSB7XG5cdFx0dGFyZ2V0ID0gQmFja2JvbmUuJCh0YXJnZXQpO1xuXHRcdGlmICh0eXBlb2YgZXZlbnRzID09PSBcInN0cmluZ1wiKSB7IGV2ZW50cyA9IGV2ZW50cy5zcGxpdChcIiBcIik7IH1cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5zdG9wTGlzdGVuaW5nKHRhcmdldCwgZXZlbnRzW2ldLCBoYW5kbGVyKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gbGlzdGVuVG9FbGVtZW50T25jZTogZnVuY3Rpb24odGFyZ2V0LCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuXHQvLyBcdHRoaXMubGlzdGVuVG9PbmNlKHRoaXMuJCh0YXJnZXQpLCBldmVudCwgaGFuZGxlcik7XG5cdC8vIH0sXG5cdC8vIHN0b3BMaXN0ZW5Ub0VsZW1lbnQ6IGZ1bmN0aW9uKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcblx0Ly8gXHR0aGlzLnN0b3BMaXN0ZW5pbmcoQmFja2JvbmUuJCh0YXJnZXQpLCBldmVudCwgaGFuZGxlcik7XG5cdC8vIH0sXG5cblx0bGlzdGVuVG9FbGVtZW50T25jZTogZnVuY3Rpb24odGFyZ2V0LCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuXHRcdGlmICghXy5pc09iamVjdCh1c2VDYXB0dXJlKSkgdXNlQ2FwdHVyZSA9ICEhdXNlQ2FwdHVyZTtcblx0XHR2YXIgY2xlYW51cCwgd3JhcHBlciwgY3R4O1xuXHRcdGN0eCA9IHRoaXM7XG5cdFx0Y2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y3R4Lm9mZihcInZpZXc6cmVtb3ZlXCIsIGNsZWFudXApO1xuXHRcdFx0dGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIHdyYXBwZXIsIHVzZUNhcHR1cmUpO1xuXHRcdH07XG5cdFx0d3JhcHBlciA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRjbGVhbnVwKCk7XG5cdFx0XHRoYW5kbGVyLmNhbGwoY3R4LCBldik7XG5cdFx0fTtcblx0XHRjdHgub24oXCJ2aWV3OnJlbW92ZVwiLCBjbGVhbnVwKTtcblx0XHR0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgd3JhcHBlciwgdXNlQ2FwdHVyZSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHJlcXVlc3RBbmltYXRpb25GcmFtZTogZnVuY3Rpb24oY2FsbGJhY2ssIHByaW9yaXR5LCBjdHgpIHtcblx0XHRyZXR1cm4gcmVuZGVyUXVldWUucmVxdWVzdChjYWxsYmFjay5iaW5kKGN0eCB8fCB0aGlzKSwgcHJpb3JpdHkpO1xuXHR9LFxuXG5cdGNhbmNlbEFuaW1hdGlvbkZyYW1lOiBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiByZW5kZXJRdWV1ZS5jYW5jZWwoaWQpO1xuXHR9LFxuXG5cdHNldEltbWVkaWF0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIHByaW9yaXR5LCBjdHgpIHtcblx0XHRyZXR1cm4gbW9kZWxRdWV1ZS5yZXF1ZXN0KGNhbGxiYWNrLmJpbmQoY3R4IHx8IHRoaXMpLCBwcmlvcml0eSk7XG5cdH0sXG5cblx0Y2xlYXJJbW1lZGlhdGU6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0cmV0dXJuIG1vZGVsUXVldWUuY2FuY2VsKGlkKTtcblx0XHQvLyByZXR1cm4gd2luZG93LmNsZWFySW1tZWRpYXRlKGlkKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIGRlZmVycmVkIHJlbmRlcjogcHJpdmF0ZSBtZXRob2RzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfdHJhY2VSZW5kZXJTdGF0dXM6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHQodGhpcy5fcmVuZGVyUXVldWVJZCAhPSAtMSA/IFwiYXN5bmMgaWQ6XCIgKyB0aGlzLl9yZW5kZXJRdWV1ZUlkIDogXCJzeW5jXCIpLFxuXHRcdFx0Vmlldy5mbGFnc1RvU3RyaW5nKHRoaXMuX3JlbmRlckZsYWdzKSxcblx0XHRcdCh0aGlzLmF0dGFjaGVkID8gXCJhdHRhY2hlZFwiIDogXCJkZXRhY2hlZFwiKSxcblx0XHRcdCh0aGlzLnNraXBUcmFuc2l0aW9ucyA/IFwic2tpcFwiIDogXCJydW5cIikgKyBcIi10eFwiXG5cdFx0XS5qb2luKFwiLCBcIik7XG5cdH0sXG5cblx0LyoqIEBwcml2YXRlICovXG5cdF9hcHBseVJlbmRlcjogZnVuY3Rpb24odHN0YW1wKSB7XG5cdFx0aWYgKERFQlVHKSB7XG5cdFx0XHRpZiAodGhpcy5fbG9nRmxhZ3NbXCJ2aWV3LnJlbmRlclwiXSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIiVzOjpfYXBwbHlSZW5kZXIgWyVzXVwiLFxuXHRcdFx0XHRcdHRoaXMuY2lkLCB0aGlzLl90cmFjZVJlbmRlclN0YXR1cygpLFxuXHRcdFx0XHRcdHRoaXMuX2xvZ0ZsYWdzW1widmlldy50cmFjZVwiXSA/XG5cdFx0XHRcdFx0dGhpcy5fbG9nUmVuZGVyQ2FsbGVycy5qb2luKFwiXFxuXCIpIDogXCJcIik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9sb2dSZW5kZXJDYWxsZXJzLmxlbmd0aCA9IDA7XG5cdFx0fVxuXG5cdFx0dmFyIGZsYWdzID0gdGhpcy5fcmVuZGVyRmxhZ3M7XG5cdFx0dGhpcy50cmlnZ2VyKFwidmlldzpyZW5kZXI6YmVmb3JlXCIsIHRoaXMsIGZsYWdzKTtcblx0XHR0aGlzLl9yZW5kZXJGbGFncyA9IDA7XG5cdFx0dGhpcy5fcmVuZGVyUXVldWVJZCA9IC0xO1xuXHRcdHRoaXMuX3JlbmRlckZsYWdzIHw9IHRoaXMucmVuZGVyRnJhbWUodHN0YW1wLCBmbGFncyk7XG5cdFx0dGhpcy50cmlnZ2VyKFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgdGhpcywgZmxhZ3MpO1xuXG5cdFx0aWYgKHRoaXMuX3JlbmRlckZsYWdzICE9IDApIHtcblx0XHRcdGNvbnNvbGUud2FybihcIiVzOjpfYXBwbHlSZW5kZXIgW3JldHVybmVkXSBwaGFzZTogJXMgZmxhZ3M6ICVzICglcylcIiwgdGhpcy5jaWQsIHRoaXMuX3ZpZXdQaGFzZSwgVmlldy5mbGFnc1RvU3RyaW5nKHRoaXMuX3JlbmRlckZsYWdzKSwgdGhpcy5fcmVuZGVyRmxhZ3MpO1xuXHRcdH1cblx0fSxcblxuXHRfY2FuY2VsUmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5fcmVuZGVyUXVldWVJZCAhPSAtMSkge1xuXHRcdFx0dmFyIGNhbmNlbElkLCBjYW5jZWxGbjtcblxuXHRcdFx0Y2FuY2VsSWQgPSB0aGlzLl9yZW5kZXJRdWV1ZUlkO1xuXHRcdFx0dGhpcy5fcmVuZGVyUXVldWVJZCA9IC0xO1xuXHRcdFx0Y2FuY2VsRm4gPSByZW5kZXJRdWV1ZS5jYW5jZWwoY2FuY2VsSWQpO1xuXG5cdFx0XHRpZiAoY2FuY2VsRm4gPT09IHZvaWQgMCkge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCIlczo6X2NhbmNlbFJlbmRlciBbaWQ6JWldIG5vdCBmb3VuZFwiLCB0aGlzLmNpZCwgY2FuY2VsSWQpO1xuXHRcdFx0fSBlbHNlIGlmIChjYW5jZWxGbiA9PT0gbnVsbCkge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCIlczo6X2NhbmNlbFJlbmRlciBbaWQ6JWldIGFscmVhZHkgY2FuY2VsbGVkXCIsIHRoaXMuY2lkLCBjYW5jZWxJZCk7XG5cdFx0XHRcdC8vIH0gZWxzZSB7XG5cdFx0XHRcdC8vIFx0aWYgKHRoaXMuX2xvZ0ZsYWdzW1widmlldy5yZW5kZXJcIl0gJiYgIXJlbmRlclF1ZXVlLnJ1bm5pbmcpXG5cdFx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcIiVzOjpfY2FuY2VsUmVuZGVyIElEOiVpIGNhbmNlbGxlZFwiLCB0aGlzLmNpZCwgY2FuY2VsSWQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRfcmVxdWVzdFJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHJlbmRlclF1ZXVlLnJ1bm5pbmcpIHtcblx0XHRcdHRoaXMuX2NhbmNlbFJlbmRlcigpO1xuXHRcdFx0Ly8gaWYgKERFQlVHKSB7XG5cdFx0XHQvLyBcdGlmICh0aGlzLl9sb2dGbGFnc1tcInZpZXcucmVuZGVyXCJdKSB7XG5cdFx0XHQvLyBcdFx0Y29uc29sZS5pbmZvKFwiJXM6Ol9yZXF1ZXN0UmVuZGVyIHJlc2NoZWR1bGVkIFslcyAoJXMpXVwiLCB0aGlzLmNpZCwgVmlldy5mbGFnc1RvU3RyaW5nKHRoaXMuX3JlbmRlckZsYWdzKSwgdGhpcy5fcmVuZGVyRmxhZ3MpO1xuXHRcdFx0Ly8gXHR9XG5cdFx0XHQvLyB9XG5cdFx0fVxuXHRcdGlmICh0aGlzLl9yZW5kZXJRdWV1ZUlkID09IC0xKSB7XG5cdFx0XHR0aGlzLl9yZW5kZXJRdWV1ZUlkID0gcmVuZGVyUXVldWUucmVxdWVzdCh0aGlzLl9hcHBseVJlbmRlciwgaXNOYU4odGhpcy52aWV3RGVwdGgpID8gTnVtYmVyLk1BWF9WQUxVRSA6IHRoaXMudmlld0RlcHRoKTtcblx0XHR9XG5cdFx0aWYgKERFQlVHKSB7XG5cdFx0XHRpZiAodGhpcy5fbG9nRmxhZ3NbXCJ2aWV3LnRyYWNlXCJdKSB7XG5cdFx0XHRcdC8vIGlmICh0aGlzLl9sb2dGbGFnc1tcInZpZXcudHJhY2VcIl0pIHtcblx0XHRcdFx0Ly8gXHRjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHRoaXMuY2lkICsgXCI6Ol9yZXF1ZXN0UmVuZGVyIFtcIiArIHRoaXMuX3RyYWNlUmVuZGVyU3RhdHVzKCkgKyBcIl0gdHJhY2VcIik7XG5cdFx0XHRcdC8vIFx0Y29uc29sZS50cmFjZSgpO1xuXHRcdFx0XHQvLyBcdGNvbnNvbGUuZ3JvdXBFbmQoKTtcblx0XHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCIlczo6X3JlcXVlc3RSZW5kZXIgJXMgWyVzXVwiLCB0aGlzLmNpZCxcblx0XHRcdFx0XHQocmVuZGVyUXVldWUucnVubmluZyA/IFwicmVzY2hlZHVsZWQgXCIgOiBcIlwiKSxcblx0XHRcdFx0XHR0aGlzLl90cmFjZVJlbmRlclN0YXR1cygpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdC8vIH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiByZW5kZXI6IHB1YmxpYyAvIGFic3RyYWN0IG1ldGhvZHNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdGludmFsaWRhdGU6IGZ1bmN0aW9uKGZsYWdzKSB7XG5cdFx0aWYgKGZsYWdzICE9PSB2b2lkIDApIHtcblx0XHRcdC8qaWYgKERFQlVHKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9sb2dGbGFnc1tcInZpZXcucmVuZGVyXCJdKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX3JlbmRlckZsYWdzID4gMCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCIlczo6aW52YWxpZGF0ZSBbJXMgKCVzKV0gKyBbJXMgKCVzKV1cIiwgdGhpcy5jaWQsIFZpZXcuZmxhZ3NUb1N0cmluZyh0aGlzLl9yZW5kZXJGbGFncyksIHRoaXMuX3JlbmRlckZsYWdzLCBWaWV3LmZsYWdzVG9TdHJpbmcoZmxhZ3MpLCBmbGFncyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6OmludmFsaWRhdGUgWyVzICglcyldXCIsIHRoaXMuY2lkLCBWaWV3LmZsYWdzVG9TdHJpbmcoZmxhZ3MpLCBmbGFncyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9Ki9cblx0XHRcdHRoaXMuX3JlbmRlckZsYWdzIHw9IGZsYWdzO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZXF1ZXN0UmVuZGVyOiBmdW5jdGlvbihmbGFncykge1xuXHRcdC8vIGlmIChERUJVRykge1xuXHRcdC8vIFx0aWYgKHRoaXMuX2xvZ0ZsYWdzW1widmlldy50cmFjZVwiXSkge1xuXHRcdC8vIFx0XHR2YXIgZm5QYXRoID0gW107XG5cdFx0Ly8gXHRcdHZhciBmbiA9IGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyO1xuXHRcdC8vIFx0XHR3aGlsZSAoZm4pIHtcblx0XHQvLyBcdFx0XHRpZiAoZm5QYXRoLmxlbmd0aCA+IDUpIGJyZWFrO1xuXHRcdC8vIFx0XHRcdGZuUGF0aC5wdXNoKGZuLm5hbWUpO1xuXHRcdC8vIFx0XHRcdGZuID0gZm4uY2FsbGVyO1xuXHRcdC8vIFx0XHR9XG5cdFx0Ly8gXHRcdC8vIHRoaXMuX2xvZ1JlbmRlckNhbGxlcnMucHVzaChmblBhdGguam9pbihcIlxcblxcdC0+XCIpKTtcblx0XHQvLyBcdFx0dGhpcy5fbG9nUmVuZGVyQ2FsbGVycy5wdXNoKGZuUGF0aC5qb2luKFwiIC0+IFwiKSk7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfVxuXHRcdC8vIGlmIChmbGFncyAhPT0gdm9pZCAwKSB7XG5cdFx0Ly8gXHR0aGlzLl9yZW5kZXJGbGFncyB8PSBmbGFncztcblx0XHQvLyB9XG5cdFx0dGhpcy5pbnZhbGlkYXRlKGZsYWdzKTtcblx0XHR0aGlzLl9yZXF1ZXN0UmVuZGVyKCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyoqIEBhYnN0cmFjdCAqL1xuXHRyZW5kZXJGcmFtZTogZnVuY3Rpb24odHN0YW1wLCBmbGFncykge1xuXHRcdC8vIHN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kXG5cdFx0cmV0dXJuIFZpZXcuTk9ORV9JTlZBTElEO1xuXHR9LFxuXG5cdHJlbmRlck5vdzogZnVuY3Rpb24oYWx3YXlzUnVuKSB7XG5cdFx0aWYgKHRoaXMuX3JlbmRlclF1ZXVlSWQgIT0gLTEpIHtcblx0XHRcdHRoaXMuX2NhbmNlbFJlbmRlcigpO1xuXHRcdFx0YWx3YXlzUnVuID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly8gaWYgKGFsd2F5c1J1biA9PT0gdHJ1ZSkge1xuXHRcdGlmIChhbHdheXNSdW4pIHtcblx0XHRcdHRoaXMuX2FwcGx5UmVuZGVyKF9ub3coKSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHdoZW5SZW5kZXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIFZpZXcud2hlblZpZXdJc1JlbmRlcmVkKHRoaXMpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogcmVuZGVyIGJpdHdpc2UgZmxhZ3Ncblx0LyogLSBjaGVjazogdGhpcy5fcmVuZGVyRmxhZ3MgJiBmbGFnc1xuXHQvKiAtIGFkZDogdGhpcy5fcmVuZGVyRmxhZ3MgfD0gZmxhZ3Ncblx0LyogLSByZW1vdmU6IHRoaXMuX3JlbmRlckZsYWdzICY9IH5mbGFnc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyogaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRyZXF1ZXN0Q2hpbGRyZW5SZW5kZXI6IGZ1bmN0aW9uKGZsYWdzLCBub3csIGZvcmNlKSB7XG5cdFx0dmFyIGNjaWQsIHZpZXc7XG5cdFx0Zm9yIChjY2lkIGluIHRoaXMuY2hpbGRWaWV3cykge1xuXHRcdFx0dmlldyA9IHRoaXMuY2hpbGRWaWV3c1tjY2lkXTtcblx0XHRcdHZpZXcuc2tpcFRyYW5zaXRpb25zID0gdmlldy5za2lwVHJhbnNpdGlvbnMgfHwgdGhpcy5za2lwVHJhbnNpdGlvbnM7XG5cdFx0XHR2aWV3LnJlcXVlc3RSZW5kZXIoZmxhZ3MpO1xuXHRcdFx0aWYgKG5vdykge1xuXHRcdFx0XHR2aWV3LnJlbmRlck5vdyhmb3JjZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVuZGVyTm93KHRydWUpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogY29tbW9uIGFic3RyYWN0XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKipcblx0LyogQHBhcmFtIHtCb29sZWFufVxuXHQvKi9cblx0c2V0RW5hYmxlZDogZnVuY3Rpb24oZW5hYmxlKSB7XG5cdFx0aWYgKHRoaXMuX2VuYWJsZWQgPT0gZW5hYmxlKSByZXR1cm47XG5cdFx0dGhpcy5fZW5hYmxlZCA9ICEhKGVuYWJsZSk7XG5cdFx0aWYgKHRoaXMuX2VuYWJsZWQpIHtcblx0XHRcdHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG5cdFx0fVxuXHR9LFxufTtcbi8vLCBWaWV3KTtcblxuaWYgKERFQlVHKSB7XG5cdFZpZXdQcm90by5fbG9nRmxhZ3MgPSBbXG5cdFx0XCJ2aWV3LnJlbmRlclwiLFxuXHRcdC8vIFwidmlldy50cmFjZVwiXG5cdF0uam9pbihcIiBcIik7XG5cblx0Vmlld1Byb3RvLmNvbnN0cnVjdG9yID0gKGZ1bmN0aW9uKGZuKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJldHZhbDtcblx0XHRcdHRoaXMuX2xvZ1JlbmRlckNhbGxlcnMgPSBbXTtcblx0XHRcdHRoaXMuX2xvZ0ZsYWdzID0gdGhpcy5fbG9nRmxhZ3Muc3BsaXQoXCIgXCIpLnJlZHVjZShmdW5jdGlvbihyLCBvKSB7XG5cdFx0XHRcdHJbb10gPSB0cnVlO1xuXHRcdFx0XHRyZXR1cm4gcjtcblx0XHRcdH0sIHt9KTtcblx0XHRcdHJldHZhbCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIi0tLS0tLSAlcyAlb1wiLCB0aGlzLmNpZCwgdGhpcy5fbG9nRmxhZ3MpO1xuXHRcdFx0cmV0dXJuIHJldHZhbDtcblx0XHR9O1xuXHR9KShWaWV3UHJvdG8uY29uc3RydWN0b3IpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKFZpZXdQcm90bywgVmlldyk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIFZpZXdFcnJvcih2aWV3LCBlcnIpIHtcblx0dGhpcy52aWV3ID0gdmlldztcblx0dGhpcy5lcnIgPSBlcnI7XG5cdHRoaXMubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xufVxuVmlld0Vycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblZpZXdFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBWaWV3RXJyb3I7XG5WaWV3RXJyb3IucHJvdG90eXBlLm5hbWUgPSBcIlZpZXdFcnJvclwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXdFcnJvcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGhlbHBlciwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1oZWxwZXJzLmhlbHBlck1pc3NpbmcsIGFsaWFzMz1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXM0PVwiZnVuY3Rpb25cIjtcblxuICByZXR1cm4gXCI8YSBocmVmPVxcXCJcIlxuICAgICsgYWxpYXMzKChoZWxwZXJzLmdsb2JhbCB8fCAoZGVwdGgwICYmIGRlcHRoMC5nbG9iYWwpIHx8IGFsaWFzMikuY2FsbChhbGlhczEsXCJBUFBfUk9PVFwiLHtcIm5hbWVcIjpcImdsb2JhbFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiI1wiXG4gICAgKyBhbGlhczMoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5oYW5kbGUgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmhhbmRsZSA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczQgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiaGFuZGxlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIlxcXCI+PHNwYW4gY2xhc3M9XFxcImxhYmVsXFxcIj5cIlxuICAgICsgKChzdGFjazEgPSAoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLm5hbWUgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXM0ID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcIm5hbWVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvc3Bhbj48L2E+XFxuXCI7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4vKiBAbW9kdWxlIGFwcC92aWV3L2NvbXBvbmVudC9BcnRpY2xlVmlld1xuLyovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld30gKi9cbmNvbnN0IFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3XCIpO1xuLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbmNvbnN0IHZpZXdUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuL0FydGljbGVCdXR0b24uaGJzXCIpO1xuXG4vKipcbi8qIEBjb25zdHJ1Y3RvclxuLyogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQXJ0aWNsZUJ1dHRvbn1cbi8qL1xudmFyIEFydGljbGVCdXR0b24gPSBWaWV3LmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJhcnRpY2xlQnV0dG9uXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0dGFnTmFtZTogXCJoMlwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJhcnRpY2xlLWJ1dHRvblwiLFxuXHQvKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuXHR0ZW1wbGF0ZTogdmlld1RlbXBsYXRlLFxuXG5cdGV2ZW50czoge1xuXHRcdFwiY2xpY2sgYVwiOiBmdW5jdGlvbihkb21ldikge1xuXHRcdFx0ZG9tZXYuZGVmYXVsdFByZXZlbnRlZCB8fCBkb21ldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzpjbGlja1wiLCB0aGlzLm1vZGVsKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gLyoqIEBvdmVycmlkZSAqL1xuXHQvLyBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBSZW5kZXJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0cmVuZGVyRnJhbWU6IGZ1bmN0aW9uKHRzdGFtcCwgZmxhZ3MpIHtcblx0XHR0aGlzLmVsLmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSk7XG5cdH0sXG59KTtcbm1vZHVsZS5leHBvcnRzID0gQXJ0aWNsZUJ1dHRvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4vKiBAbW9kdWxlIGFwcC92aWV3L2NvbXBvbmVudC9BcnRpY2xlVmlld1xuLyovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld30gKi9cbmNvbnN0IFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3XCIpO1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTp1dGlscy9uZXQvdG9BYnNvbHV0ZVVSTH0gKi9cbi8vIHZhciB0b0Fic29sdXRlVVJMID0gcmVxdWlyZShcInV0aWxzL25ldC90b0Fic29sdXRlVVJMXCIpO1xuLy9cbi8vIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuLy8gdmFyIEFCU19BUFBfUk9PVCA9IHRvQWJzb2x1dGVVUkwocmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIikuQVBQX1JPT1QpO1xuXG5jb25zdCBSRUNBUFRDSEFfS0VZUyA9IHtcblx0J2NhbmlsbGFzLm5hbWUnOiAnNkxjYVBId1VBQUFBQUFmekVucVJjaEl4OGpZMVlrVUVwdXN3SkRIeCdcbn07XG5jb25zdCBSRUNBUFRDSEFfVVJMID0gKGtleSkgPT4gYGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS5qcz9yZW5kZXI9JHtSRUNBUFRDSEFfS0VZU1trZXldfWA7XG5cbi8qKlxuLyogQGNvbnN0cnVjdG9yXG4vKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9BcnRpY2xlVmlld31cbi8qL1xudmFyIEFydGljbGVWaWV3ID0gVmlldy5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjaWRQcmVmaXg6IFwiYXJ0aWNsZVZpZXdcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0YWdOYW1lOiBcImFydGljbGVcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjbGFzc05hbWU6IFwiYXJ0aWNsZS12aWV3IG1kb3duXCIsXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBSZW5kZXJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0cmVuZGVyRnJhbWU6IGZ1bmN0aW9uKHRzdGFtcCwgZmxhZ3MpIHtcblx0XHR0aGlzLmVsLmlubmVySFRNTCA9IHRoaXMubW9kZWwuZ2V0KFwidGV4dFwiKTtcblxuXHRcdC8vIGxldCBsaW5rRWxzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiYVtocmVmXVwiKTtcblx0XHQvLyBpZiAobGlua0Vscy5sZW5ndGgpIHtcblx0XHQvLyBcdFJFQ0FQVENIQV9VUkwoJ2NhbmlsbGFzLm5hbWUnKTtcblx0XHQvLyB9XG5cdFx0Ly8gbGlua0Vscy5mb3JFYWNoKGVsID0+IHtcblx0XHQvLyB9KTtcblxuXHRcdC8vIEZJWE1FOiBub3cgZG9uZSBpbiB4c2x0XG5cdFx0Ly8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiYVtocmVmXVwiKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cdFx0Ly8gXHR2YXIgdXJsID0gdG9BYnNvbHV0ZVVSTChlbC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKTtcblx0XHQvLyBcdGlmICh1cmwuaW5kZXhPZihBQlNfQVBQX1JPT1QpICE9PSAwKSB7XG5cdFx0Ly8gXHRcdGVsLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9KTtcblx0fSxcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBBcnRpY2xlVmlldztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L2NvbXBvbmVudC9wcm9ncmVzcy9DYW52YXNQcm9ncmVzc01ldGVyXG4gKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9DYW52YXNWaWV3fSAqL1xuY29uc3QgQ2FudmFzVmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL0NhbnZhc1ZpZXdcIik7XG5cbnZhciBQSTIgPSBNYXRoLlBJICogMjtcbi8qIE5PVEU6IGF2b2lkIG5lZ2F0aXZlIHJvdGF0aW9ucyAqL1xudmFyIEJBU0VfUk9UQVRJT04gPSAxIC0gMC4yNTsgLy8gb2YgUEkyICgtOTAgZGVncmVlcylcbnZhciBHQVBfQVJDID0gUEkyIC8gNDg7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2Vhc2UvZm4vZWFzZUluUXVhZH0gKi9cbmNvbnN0IGVhc2VJbiA9IHJlcXVpcmUoXCJ1dGlscy9lYXNlL2ZuL2Vhc2VJblF1YWRcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9lYXNlL2ZuL2Vhc2VPdXRRdWFkfSAqL1xuY29uc3QgZWFzZU91dCA9IHJlcXVpcmUoXCJ1dGlscy9lYXNlL2ZuL2Vhc2VPdXRRdWFkXCIpO1xuXG52YXIgTE9PUF9PRkZTRVQgPSAxLjgzMzMzMztcbnZhciBTVEVQX01TID0gNDAwOyAvLyB0d2VlbiB0aW1lIGJhc2VcblxudmFyIEFSQ19ERUZBVUxUUyA9IHtcblx0XCJhbW91bnRcIjoge1xuXHRcdGxpbmVXaWR0aDogMC43NSxcblx0XHRyYWRpdXNPZmZzZXQ6IDBcblx0fSxcblx0XCJhdmFpbGFibGVcIjoge1xuXHRcdGxpbmVXaWR0aDogMC43NSxcblx0XHQvLyBsaW5lRGFzaDogWzEuMywgMC43XSxcblx0XHRpbnZlcnNlOiBcIm5vdC1hdmFpbGFibGVcIlxuXHR9LFxuXHRcIm5vdC1hdmFpbGFibGVcIjoge1xuXHRcdGxpbmVXaWR0aDogMC44LFxuXHRcdGxpbmVEYXNoOiBbMC4zLCAwLjddLFxuXHRcdGxpbmVEYXNoT2Zmc2V0OiAwXG5cdH0sXG5cdFwiaW5kZXRlcm1pbmF0ZVwiOiB7XG5cdFx0bGluZVdpZHRoOiAyLjAsIC8vMC44LFxuXHRcdGxpbmVEYXNoOiBbMC4zLCAxLjddLFxuXHRcdC8vIGxpbmVEYXNoOiBbMC42LCAxLjRdLFxuXHRcdGxpbmVEYXNoT2Zmc2V0OiAwXG5cdH0sXG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvcHJvZ3Jlc3MvQ2FudmFzUHJvZ3Jlc3NNZXRlcn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBDYW52YXNWaWV3LmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJjYW52YXNQcm9ncmVzc01ldGVyXCIsXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjbGFzc05hbWU6IFwicHJvZ3Jlc3MtbWV0ZXIgY2FudmFzLXByb2dyZXNzLW1ldGVyXCIsXG5cblx0ZGVmYXVsdEtleTogXCJhbW91bnRcIixcblxuXHRkZWZhdWx0czoge1xuXHRcdHZhbHVlczoge1xuXHRcdFx0YW1vdW50OiAwLFxuXHRcdFx0YXZhaWxhYmxlOiAwLFxuXHRcdFx0X2xvb3A6IDAsXG5cdFx0XHRfc3RhbGxlZF9hcmM6IDAsXG5cdFx0XHRfc3RhbGxlZF9sb29wOiAwLFxuXHRcdH0sXG5cdFx0bWF4VmFsdWVzOiB7XG5cdFx0XHRhbW91bnQ6IDEsXG5cdFx0XHRhdmFpbGFibGU6IDEsXG5cdFx0XHRfc3RhbGxlZF9sb29wOiAxLFxuXHRcdH0sXG5cdFx0dXNlT3BhcXVlOiB0cnVlLFxuXHRcdGxhYmVsRm46IGZ1bmN0aW9uKHZhbHVlLCBtYXgpIHtcblx0XHRcdHJldHVybiAoKHZhbHVlIC8gbWF4KSAqIDEwMCkgfCAwO1xuXHRcdH0sXG5cdH0sXG5cblx0cHJvcGVydGllczoge1xuXHRcdHN0YWxsZWQ6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy90aGlzLl9zdGFsbGVkO1xuXHRcdFx0fSxcblx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdFx0Ly8gdGhpcy5fc2V0U3RhbGxlZCh2YWx1ZSlcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0X3NldFN0YWxsZWQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYgKHRoaXMuX3N0YWxsZWQgIT09IHZhbHVlKSB7XG5cdFx0XHR0aGlzLl9zdGFsbGVkID0gdmFsdWU7XG5cdFx0XHR0aGlzLnJlcXVlc3RSZW5kZXIoQ2FudmFzVmlldy5NT0RFTF9JTlZBTElEIHwgQ2FudmFzVmlldy5MQVlPVVRfSU5WQUxJRCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIGNoaWxkcmVuL2xheW91dFxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHQvLyBUT0RPOiBjbGVhbnVwIG9wdGlvbnMgbWVzcyBpbiBDYW52YXNWaWV3XG5cdFx0Q2FudmFzVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdC8vIG9wdGlvbnMgPSBfLmRlZmF1bHRzKG9wdGlvbnMsIHRoaXMuZGVmYXVsdHMpO1xuXG5cdFx0dGhpcy5fbGFiZWxGbiA9IG9wdGlvbnMubGFiZWxGbjtcblx0XHR0aGlzLl9zdGFsbGVkID0gISEob3B0aW9ucy5zdGFsbGVkKTtcblx0XHR0aGlzLl92YWx1ZVN0eWxlcyA9IHt9O1xuXHRcdHRoaXMuX2NhbnZhc1NpemUgPSBudWxsO1xuXHRcdHRoaXMuX2NhbnZhc09yaWdpbiA9IG51bGw7XG5cdH0sXG5cblx0X25lZWRzTG9vcDogZmFsc2UsXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHR2YWx1ZVRvOiBmdW5jdGlvbihrZXksIHZhbHVlLCBkdXJhdGlvbikge1xuXHRcdGlmIChrZXkgPT09IFwiYW1vdW50XCIgJiYgdmFsdWUgPCB0aGlzLmludGVycG9sYXRvci5nZXRDdXJyZW50VmFsdWUoXCJhbW91bnRcIikpIHtcblx0XHRcdHRoaXMuX25lZWRzTG9vcCA9IHRydWU7XG5cdFx0fVxuXHRcdENhbnZhc1ZpZXcucHJvdG90eXBlLnZhbHVlVG8uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBwcml2YXRlXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0bWVhc3VyZUNhbnZhczogZnVuY3Rpb24odywgaCwgcykge1xuXHRcdC8vIG1ha2UgY2FudmFzIHNxdWFyZVxuXHRcdHRoaXMuX2NhbnZhc0hlaWdodCA9IHRoaXMuX2NhbnZhc1dpZHRoID0gTWF0aC5taW4odywgaCk7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHR1cGRhdGVDYW52YXM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIENhbnZhc1ZpZXcucHJvdG90eXBlLl91cGRhdGVDYW52YXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdC8vIHNpemUsIGxpbmVzLCBnYXBzLCBkYXNoZXMgKHRoaXMuX3ZhbHVlU3R5bGVzLCBHQVBfQVJDLCB0aGlzLl9hcmNSYWRpdXMpXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyB2YXIgYXJjTmFtZSwgcywgYXJjRGVmYXVsdDtcblx0XHQvLyB2YXIgbWFwTGluZURhc2ggPSBmdW5jdGlvbihuKSB7XG5cdFx0Ly8gXHRyZXR1cm4gbiAqIHRoaXMucmFkaXVzICogR0FQX0FSQztcblx0XHQvLyB9O1xuXHRcdC8vIHZhciBzdW1GbiA9IGZ1bmN0aW9uKHMsIG4pIHtcblx0XHQvLyBcdHJldHVybiBzICsgbjtcblx0XHQvLyB9O1xuXG5cdFx0Ly8gdGhpcy5fY2FudmFzU2l6ZSA9IE1hdGgubWluKHRoaXMuX2NhbnZhc1dpZHRoLCB0aGlzLl9jYW52YXNIZWlnaHQpO1xuXG5cdFx0dmFyIHM7XG5cdFx0Ly8gdGhpcy5fbWF4RGFzaEFyYyA9IDBcblx0XHRmb3IgKHZhciBzdHlsZU5hbWUgaW4gQVJDX0RFRkFVTFRTKSB7XG5cdFx0XHRzID0gXy5kZWZhdWx0cyh7fSwgQVJDX0RFRkFVTFRTW3N0eWxlTmFtZV0pO1xuXHRcdFx0cy5saW5lV2lkdGggKj0gdGhpcy5fY2FudmFzUmF0aW87XG5cdFx0XHRzLnJhZGl1cyA9ICh0aGlzLl9jYW52YXNXaWR0aCAtIHMubGluZVdpZHRoKSAvIDI7XG5cdFx0XHRpZiAocy5yYWRpdXNPZmZzZXQpIHtcblx0XHRcdFx0cy5yYWRpdXMgKz0gcy5yYWRpdXNPZmZzZXQgKiB0aGlzLl9jYW52YXNSYXRpbztcblx0XHRcdH1cblx0XHRcdGlmIChfLmlzQXJyYXkocy5saW5lRGFzaCkpIHtcblx0XHRcdFx0cy5saW5lRGFzaCA9IHMubGluZURhc2gubWFwKGZ1bmN0aW9uKHZhbCwgaSwgYXJyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbCAqIHRoaXMucmFkaXVzICogR0FQX0FSQztcblx0XHRcdFx0fSwgcyk7XG5cdFx0XHRcdHMubGluZURhc2hMZW5ndGggPSBzLmxpbmVEYXNoLnJlZHVjZShmdW5jdGlvbihyZXMsIHZhbCwgaSwgYXJyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcyArIHZhbDtcblx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdHMubGluZURhc2hBcmMgPSBzLmxpbmVEYXNoWzBdICogR0FQX0FSQztcblx0XHRcdFx0Ly8gdGhpcy5fbWF4RGFzaEFyYyA9IE1hdGgubWF4KHRoaXMuX21heERhc2hBcmMsIHMubGluZURhc2hBcmMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cy5saW5lRGFzaEFyYyA9IDA7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl92YWx1ZVN0eWxlc1tzdHlsZU5hbWVdID0gcztcblx0XHR9XG5cblx0XHQvLyBiYXNlbGluZVNoaWZ0XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBOT1RFOiBDZW50ZXIgYmFzZWxpbmU6IHVzZSBhc2NlbnQgZGF0YSB0byBjZW50ZXIgdG8geC1oZWlnaHQsIG9yIHNvcnQtb2YuXG5cdFx0Ly8gd2l0aCBhc2NlbnQvZGVzY2VudCB2YWx1ZXMgKDAuNywgLTAuMyksIHgtaGVpZ2h0IGlzIDAuNFxuXHRcdHZhciBtT2JqID0gdGhpcy5fZ2V0Rm9udE1ldHJpY3ModGhpcy5fZm9udEZhbWlseSk7XG5cdFx0dGhpcy5fYmFzZWxpbmVTaGlmdCA9IG1PYmogPyAobU9iai5hc2NlbnQgKyBtT2JqLmRlc2NlbnQpIC8gbU9iai51bml0c1BlckVtIDogMC43OyAvLyBkZWZhdWx0IHZhbHVlXG5cdFx0dGhpcy5fYmFzZWxpbmVTaGlmdCAqPSB0aGlzLl9mb250U2l6ZSAqIDAuNTsgLy8gYXBwbHkgdG8gZm9udC1zaXplLCBoYWx2ZSBpdFxuXHRcdHRoaXMuX2Jhc2VsaW5lU2hpZnQgPSBNYXRoLnJvdW5kKHRoaXMuX2Jhc2VsaW5lU2hpZnQpO1xuXG5cdFx0Ly8gc2F2ZSBjYW52YXMgY29udGV4dFxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gcmVzZXQgbWF0cml4IGFuZCB0cmFuc2xhdGUgMCwwIHRvIGNlbnRlclxuXHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cdFx0dGhpcy5fY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCB0aGlzLl9jYW52YXNXaWR0aCAvIDIsIHRoaXMuX2NhbnZhc0hlaWdodCAvIDIpO1xuXHRcdHRoaXMuX2N0eC5zYXZlKCk7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZWRyYXc6IGZ1bmN0aW9uKGN0eCwgaW50cnAsIGZsYWdzKSB7XG5cdFx0dGhpcy5fY2xlYXJDYW52YXMoLXRoaXMuX2NhbnZhc1dpZHRoIC8gMiwgLXRoaXMuX2NhbnZhc0hlaWdodCAvIDIsXG5cdFx0XHR0aGlzLl9jYW52YXNXaWR0aCwgdGhpcy5fY2FudmFzSGVpZ2h0XG5cdFx0KTtcblxuXHRcdHZhciBzLCAvLyByZXVzZWQgc3R5bGUgb2JqZWN0c1xuXHRcdFx0dmFsRGF0YSwgLy8gcmV1c2VkIGZvciBpbnRlcnBvbGF0ZWQgZGF0YVxuXHRcdFx0YXJjVmFsOyAvLyByZXVzZWQgYXJjIHZhbHVlc1xuXG5cdFx0Ly8gYW1vdW50IGxhYmVsXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHR2YWxEYXRhID0gaW50cnAuX3ZhbHVlRGF0YVtcImFtb3VudFwiXTtcblx0XHR0aGlzLmRyYXdMYWJlbCh0aGlzLl9sYWJlbEZuKHZhbERhdGEuX3JlbmRlcmVkVmFsdWUsIHZhbERhdGEuX21heFZhbCkpO1xuXG5cdFx0Ly8gaW5kZXRlcm1pbmF0ZVxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHQvKlxuXHRcdHZhciBpbmRWYWw7XG5cdFx0aWYgKHRoaXMuc3RhbGxlZCkge1xuXHRcdFx0Ly8gX2luZCBsb29wIGluZGVmaW5pdGVseSB3aGlsZSBpbmRldGVybWluYXRlOiByZXN0YXJ0IGlmIGF0IGVuZFxuXHRcdFx0aWYgKGludHJwLmlzQXRUYXJnZXQoXCJfaW5kXCIpKSB7XG5cdFx0XHRcdC8vIGlmIChpbnRycC5yZW5kZXJlZEtleXMgJiYgKGludHJwLnJlbmRlcmVkS2V5cy5pbmRleE9mKFwiX2luZFwiKSA9PT0gLTEpKSB7XG5cdFx0XHRcdGludHJwLnZhbHVlVG8oXCJfaW5kXCIsIDAsIDApO1xuXHRcdFx0XHRpbnRycC52YWx1ZVRvKFwiX2luZFwiLCAxLCAxMDAwKTtcblx0XHRcdFx0aW50cnAudXBkYXRlVmFsdWUoXCJfaW5kXCIpO1xuXHRcdFx0fVxuXHRcdFx0aW5kVmFsID0gaW50cnAuZ2V0Q3VycmVudFZhbHVlKFwiX2luZFwiKTtcblx0XHRcdC8vaW5kVmFsID0gaW50cnAuX3ZhbHVlRGF0YVtcIl9pbmRcIl0uX3JlbmRlcmVkVmFsdWUgfHwgMDtcblxuXHRcdFx0Ly8gZHJhdyBzcGlubmluZyBhcmNcblx0XHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHQvLyBzID0gdGhpcy5fdmFsdWVTdHlsZXNbXCJhbW91bnRcIl07XG5cdFx0XHQvLyBjdHguc2F2ZSgpO1xuXHRcdFx0Ly8gY3R4LnJvdGF0ZShQSTIgKiAoQkFTRV9ST1RBVElPTiArIChpbmRWYWwpKSk7IC8vICsgR0FQX0FSQyk7XG5cdFx0XHQvLyBsYXN0RW5kQXJjID0gdGhpcy5kcmF3QXJjKDEsXG5cdFx0XHQvLyBcdEdBUF9BUkMsXG5cdFx0XHQvLyBcdFBJMiAtIEdBUF9BUkMsXG5cdFx0XHQvLyBcdDAsIHMpO1xuXHRcdFx0Ly8gY3R4LnJlc3RvcmUoKTtcblx0XHRcdC8vIHJldHVybjtcblxuXHRcdFx0Ly8gbGluZURhc2hPZmZzZXQgYW5pbWF0aW9uXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0cyA9IHRoaXMuX3ZhbHVlU3R5bGVzW1wiaW5kZXRlcm1pbmF0ZVwiXTtcblx0XHRcdHMubGluZURhc2hPZmZzZXQgPSBzLmxpbmVEYXNoTGVuZ3RoICogKCgxIC0gaW5kVmFsKSAlIDMpICogMztcblx0XHRcdHRoaXMuX3ZhbHVlU3R5bGVzW1wiYXZhaWxhYmxlXCJdLmludmVyc2UgPSBcImluZGV0ZXJtaW5hdGVcIjtcblxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczo6cmVkcmF3IGluZFZhbDolbyBzLmxpbmVEYXNoT2Zmc2V0OiVvIHMubGluZURhc2g6JW9cIiwgdGhpcy5jaWQsIGluZFZhbCwgcy5saW5lRGFzaE9mZnNldCwgcy5saW5lRGFzaFswXSk7XG5cblx0XHRcdC8vIGRyYXcgc3Bpbm5pbmcgd2hlZWxcblx0XHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHQvLyBjdHguc2F2ZSgpO1xuXHRcdFx0Ly8gY3R4LnJvdGF0ZSgoUEkyIC8gV0hFRUxfTlVNKSAqIGluZFZhbCk7IC8vICsgR0FQX0FSQyk7XG5cdFx0XHQvLyB0aGlzLmRyYXdXaGVlbCh0aGlzLl92YWx1ZVN0eWxlc1tcImFtb3VudFwiXSwgMiAvIDUsIDMgLyA1KTtcblx0XHRcdC8vIGN0eC5yZXN0b3JlKCk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFpbnRycC5pc0F0VGFyZ2V0KFwiX2luZFwiKSkge1xuXHRcdFx0XHQvLyBpZiAoaW50cnAucmVuZGVyZWRLZXlzICYmIChpbnRycC5yZW5kZXJlZEtleXMuaW5kZXhPZihcIl9pbmRcIikgIT09IC0xKSkge1xuXHRcdFx0XHRpbnRycC52YWx1ZVRvKFwiX2luZFwiLCAwLCAwKTtcblx0XHRcdFx0aW50cnAudXBkYXRlVmFsdWUoXCJfaW5kXCIpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gbGluZURhc2hPZmZzZXQgYW5pbWF0aW9uXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0dGhpcy5fdmFsdWVTdHlsZXNbXCJhdmFpbGFibGVcIl0uaW52ZXJzZSA9IFwibm90LWF2YWlsYWJsZVwiO1xuXHRcdH0qL1xuXG5cdFx0Ly8gc2F2ZSBjdHggYmVmb3JlIGRyYXdpbmcgYXJjc1xuXHRcdGN0eC5zYXZlKCk7XG5cblx0XHQvLyBsb29wIChhbW91bnQpXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHR2YXIgbG9vcFZhbDtcblx0XHQvKlxuXHRcdE5PVEU6IElmIHZhbHVlIFwiYW1vdW50XCIgaGFzIGNoYW5nZWQgKHdpdGggdmFsdWVUbygpKSBidXQgbm8geWV0XG5cdFx0aW50ZXJwb2xhdGVkLCBhbmQgaXRzIGxhc3QgcmVuZGVyZWQgdmFsdWUgaXMgbGVzcywgdGhlbiBpdHMgYmVlbiByZXNldFxuXHRcdChhIHJlbG9hZCwgYSBsb29wLCBldGMpOiB3ZSB0cmlnZ2VyIGEgJ2xvb3AnIG9mIHRoZSB3aG9sZSBhcmMuXG5cdFx0Ki9cblx0XHQvLyBpZiAoKGludHJwLnJlbmRlcmVkS2V5cy5pbmRleE9mKFwiYW1vdW50XCIpICE9PSAtMSkgJiYgKHZhbERhdGEuX2xhc3RSZW5kZXJlZFZhbHVlID4gdmFsRGF0YS5fcmVuZGVyZWRWYWx1ZSkpIHtcblx0XHRpZiAodGhpcy5fbmVlZHNMb29wKSB7XG5cdFx0XHR0aGlzLl9uZWVkc0xvb3AgPSBmYWxzZTtcblx0XHRcdC8vIHRyaWdnZXIgbG9vcFxuXHRcdFx0aW50cnAudmFsdWVUbyhcIl9sb29wXCIsIDEsIDApO1xuXHRcdFx0aW50cnAudmFsdWVUbyhcIl9sb29wXCIsIDAsIDc1MCk7XG5cdFx0XHRpbnRycC51cGRhdGVWYWx1ZShcIl9sb29wXCIpO1xuXHRcdH1cblx0XHQvLyBsb29wVmFsID0gaW50cnAuX3ZhbHVlRGF0YVtcIl9sb29wXCJdLl9yZW5kZXJlZFZhbHVlIHx8IDA7XG5cdFx0bG9vcFZhbCA9IGludHJwLmdldEN1cnJlbnRWYWx1ZShcIl9sb29wXCIpO1xuXHRcdGN0eC5yb3RhdGUoKFBJMiAqIChCQVNFX1JPVEFUSU9OICsgKDEgLSBsb29wVmFsKSkpKTsgLy8gKyBHQVBfQVJDKTtcblxuXHRcdC8vIGFtb3VudCBhcmNcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIHZhciBhbW91bnRHYXBBcmMgPSBHQVBfQVJDO1xuXHRcdHZhciBsYXN0RW5kQXJjID0gMDtcblxuXHRcdHMgPSB0aGlzLl92YWx1ZVN0eWxlc1tcImFtb3VudFwiXTtcblx0XHRhcmNWYWwgPSBsb29wVmFsICsgdmFsRGF0YS5fcmVuZGVyZWRWYWx1ZSAvIHZhbERhdGEuX21heFZhbDtcblxuXHRcdGlmIChhcmNWYWwgPiAwKSB7XG5cdFx0XHRsYXN0RW5kQXJjID0gdGhpcy5kcmF3QXJjKGFyY1ZhbCxcblx0XHRcdFx0R0FQX0FSQyxcblx0XHRcdFx0UEkyIC0gR0FQX0FSQyxcblx0XHRcdFx0bGFzdEVuZEFyYywgcyk7XG5cdFx0XHR0aGlzLmRyYXdFbmRDYXAobGFzdEVuZEFyYywgcyk7XG5cdFx0XHRsYXN0RW5kQXJjID0gbGFzdEVuZEFyYyArIEdBUF9BUkMgKiAyO1xuXHRcdH1cblxuXHRcdC8vIGF2YWlsYWJsZSBhcmNcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHMgPSB0aGlzLl92YWx1ZVN0eWxlc1tcImF2YWlsYWJsZVwiXTtcblx0XHR2YWxEYXRhID0gaW50cnAuX3ZhbHVlRGF0YVtcImF2YWlsYWJsZVwiXTtcblxuXHRcdHZhciBzdGVwc051bSA9IHZhbERhdGEubGVuZ3RoIHx8IDE7XG5cdFx0dmFyIHN0ZXBCYXNlQXJjID0gUEkyIC8gc3RlcHNOdW07XG5cdFx0dmFyIHN0ZXBBZGp1c3RBcmMgPSBzdGVwQmFzZUFyYyAlIEdBUF9BUkM7XG5cdFx0dmFyIHN0ZXBHYXBBcmMgPSBHQVBfQVJDICsgKHN0ZXBBZGp1c3RBcmMgLSBzLmxpbmVEYXNoQXJjKSAvIDI7XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWxEYXRhKSkge1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwc051bTsgaSsrKSB7XG5cdFx0XHRcdGFyY1ZhbCA9IHZhbERhdGFbaV0uX3JlbmRlcmVkVmFsdWUgLyAodmFsRGF0YVtpXS5fbWF4VmFsIC8gc3RlcHNOdW0pO1xuXHRcdFx0XHR0aGlzLmRyYXdBcmMoYXJjVmFsLFxuXHRcdFx0XHRcdChpICogc3RlcEJhc2VBcmMpICsgc3RlcEdhcEFyYyxcblx0XHRcdFx0XHQoKGkgKyAxKSAqIHN0ZXBCYXNlQXJjKSAtIHN0ZXBHYXBBcmMsXG5cdFx0XHRcdFx0bGFzdEVuZEFyYywgcyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFyY1ZhbCA9IHZhbERhdGEuX3JlbmRlcmVkVmFsdWUgLyB2YWxEYXRhLl9tYXhWYWw7XG5cdFx0XHR0aGlzLmRyYXdBcmMoYXJjVmFsLFxuXHRcdFx0XHRzdGVwR2FwQXJjLFxuXHRcdFx0XHRQSTIgLSBzdGVwR2FwQXJjLFxuXHRcdFx0XHRsYXN0RW5kQXJjLCBzKTtcblx0XHR9XG5cdFx0Ly8gcmVzdG9yZSBjdHggYWZ0ZXIgZHJhd2luZyBhcmNzXG5cdFx0Ly8ga2VlcCByb3RhdGlvbiB0cmFuc2Zvcm1cblx0XHQvL2N0eC5yZXN0b3JlKCk7XG5cblx0XHRpZiAodGhpcy5fc3RhbGxlZCkge1xuXHRcdFx0aWYgKGludHJwLmdldFRhcmdldFZhbHVlKCdfc3RhbGxlZF9hcmMnKSA9PT0gMCkge1xuXHRcdFx0XHRpbnRycC52YWx1ZVRvKCdfc3RhbGxlZF9hcmMnLCAxLCAxICogU1RFUF9NUywgZWFzZUluKS51cGRhdGVWYWx1ZSgnX3N0YWxsZWRfYXJjJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChpbnRycC5nZXRUYXJnZXRWYWx1ZSgnX3N0YWxsZWRfYXJjJykgPT09IDEpIHtcblx0XHRcdFx0aW50cnAudmFsdWVUbygnX3N0YWxsZWRfYXJjJywgMCwgMSAqIFNURVBfTVMsIGVhc2VPdXQpLnVwZGF0ZVZhbHVlKCdfc3RhbGxlZF9hcmMnKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIGEgPSBpbnRycC5nZXRSZW5kZXJlZFZhbHVlKFwiX3N0YWxsZWRfYXJjXCIpO1xuXHRcdC8vIHdoaWxlIGFyYyBpcyA+IDAsIGxvb3AgaW5kZWZpbml0ZWx5IHdoaWxlIHNwaW5uaW5nIGFuZCByZXN0YXJ0XG5cdFx0Ly8gaWYgYXQgZW5kLiBPdGhlcndpc2UgbGV0IGludGVycCBleGhhdXN0IGFyYyBkdXJhdGlvblxuXHRcdGlmIChhID4gMCkge1xuXHRcdFx0aWYgKCFpbnRycC5wYXVzZWQgJiYgaW50cnAuaXNBdFRhcmdldCgnX3N0YWxsZWRfbG9vcCcpKSB7XG5cdFx0XHRcdGludHJwXG5cdFx0XHRcdFx0LnZhbHVlVG8oJ19zdGFsbGVkX2xvb3AnLCAwLCAwKVxuXHRcdFx0XHRcdC52YWx1ZVRvKCdfc3RhbGxlZF9sb29wJywgMSwgMiAqIFNURVBfTVMpXG5cdFx0XHRcdFx0LnVwZGF0ZVZhbHVlKCdfc3RhbGxlZF9sb29wJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZhciBsID0gaW50cnAuZ2V0UmVuZGVyZWRWYWx1ZShcIl9zdGFsbGVkX2xvb3BcIik7XG5cdFx0Ly8gYWx3YXlzIHJlbmRlciB3aGlsZSBhcmMgaXMgPiAwXG5cdFx0aWYgKGEgPiAwKSB7XG5cdFx0XHQvLyBhcmMgc3BhbiBib3VuY2Vcblx0XHRcdHZhciBiID0gKGwgPCAwLjUgPyAobCAlIDAuNSkgOiAwLjUgLSAobCAlIDAuNSkpICogMjtcblx0XHRcdC8vIGJvdW5jZSArIG1haW4gYXJjIHNwYW5cblx0XHRcdHZhciBhYSA9IChhICogYiAqIDAuMjUpICsgKGEgKiAwLjEyNSkgKyAuMDAwMTtcblx0XHRcdC8vIHJvdGF0aW9uIGxvb3Bcblx0XHRcdHZhciBsbCA9IGwgKyBMT09QX09GRlNFVDtcblxuXHRcdFx0Y3R4LnNhdmUoKTtcblx0XHRcdGN0eC5saW5lV2lkdGggPSAxMCAqIHRoaXMuX2NhbnZhc1JhdGlvO1xuXHRcdFx0Y3R4Lmdsb2JhbEFscGhhID0gMTtcblx0XHRcdGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW91dFwiO1xuXHRcdFx0Y3R4LnN0cm9rZUNvbG9yID0gJ3JlZCc7XG5cdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRjdHguYXJjKDAsIDAsICh0aGlzLl9jYW52YXNXaWR0aCkgLyAyLCAoKDEgLSBhYSkgKyBsbCkgKiBQSTIsIChhYSArIGxsKSAqIFBJMiwgZmFsc2UpO1xuXHRcdFx0Y3R4LnN0cm9rZSgpO1xuXHRcdFx0Y3R4LnJlc3RvcmUoKTtcblx0XHR9XG5cdFx0Y3R4LnJlc3RvcmUoKTtcblx0fSxcblxuXHRkcmF3QXJjOiBmdW5jdGlvbih2YWx1ZSwgc3RhcnRBcmMsIGVuZEFyYywgcHJldkFyYywgc3R5bGUpIHtcblx0XHR2YXIgdmFsQXJjLFxuXHRcdFx0dmFsU3RhcnRBcmMsXG5cdFx0XHR2YWxFbmRBcmMsXG5cdFx0XHRpbnZTdHlsZSxcblx0XHRcdGludlN0YXJ0QXJjLFxuXHRcdFx0aW52RW5kQXJjO1xuXG5cdFx0cHJldkFyYyB8fCAocHJldkFyYyA9IDApO1xuXG5cdFx0dmFsQXJjID0gZW5kQXJjIC0gc3RhcnRBcmM7XG5cdFx0dmFsRW5kQXJjID0gc3RhcnRBcmMgKyAodmFsQXJjICogdmFsdWUpO1xuXHRcdHZhbFN0YXJ0QXJjID0gTWF0aC5tYXgoc3RhcnRBcmMsIHByZXZBcmMpO1xuXHRcdGlmICh2YWxFbmRBcmMgPiB2YWxTdGFydEFyYykge1xuXHRcdFx0dGhpcy5fY3R4LnNhdmUoKTtcblx0XHRcdHRoaXMuYXBwbHlWYWx1ZVN0eWxlKHN0eWxlKTtcblx0XHRcdHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcblx0XHRcdHRoaXMuX2N0eC5hcmMoMCwgMCwgc3R5bGUucmFkaXVzLCB2YWxFbmRBcmMsIHZhbFN0YXJ0QXJjLCB0cnVlKTtcblx0XHRcdHRoaXMuX2N0eC5zdHJva2UoKTtcblx0XHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cdFx0fVxuXG5cdFx0Ly8gaWYgdGhlcmUncyB2YWx1ZVN0eWxlLCBkcmF3IHJlc3Qgb2Ygc3BhbiwgbWludXMgcHJldkFyYyBvdmVybGFwIHRvb1xuXHRcdGlmIChzdHlsZS5pbnZlcnNlICE9PSB2b2lkIDApIHtcblx0XHRcdGludlN0eWxlID0gdGhpcy5fdmFsdWVTdHlsZXNbc3R5bGUuaW52ZXJzZV07XG5cblx0XHRcdGludkVuZEFyYyA9IHZhbEVuZEFyYyArICh2YWxBcmMgKiAoMSAtIHZhbHVlKSk7XG5cdFx0XHRpbnZTdGFydEFyYyA9IE1hdGgubWF4KHZhbEVuZEFyYywgcHJldkFyYyk7XG5cdFx0XHRpZiAoaW52RW5kQXJjID4gaW52U3RhcnRBcmMpIHtcblx0XHRcdFx0dGhpcy5fY3R4LnNhdmUoKTtcblx0XHRcdFx0dGhpcy5hcHBseVZhbHVlU3R5bGUoaW52U3R5bGUpO1xuXHRcdFx0XHR0aGlzLl9jdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRcdHRoaXMuX2N0eC5hcmMoMCwgMCwgaW52U3R5bGUucmFkaXVzLCBpbnZFbmRBcmMsIGludlN0YXJ0QXJjLCB0cnVlKTtcblx0XHRcdFx0dGhpcy5fY3R4LnN0cm9rZSgpO1xuXHRcdFx0XHR0aGlzLl9jdHgucmVzdG9yZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB2YWxFbmRBcmM7XG5cdH0sXG5cblx0YXBwbHlWYWx1ZVN0eWxlOiBmdW5jdGlvbihzKSB7XG5cdFx0dGhpcy5fY3R4LmxpbmVXaWR0aCA9IHMubGluZVdpZHRoO1xuXHRcdGlmIChfLmlzQXJyYXkocy5saW5lRGFzaCkpIHtcblx0XHRcdHRoaXMuX2N0eC5zZXRMaW5lRGFzaChzLmxpbmVEYXNoKTtcblx0XHR9XG5cdFx0aWYgKF8uaXNOdW1iZXIocy5saW5lRGFzaE9mZnNldCkpIHtcblx0XHRcdHRoaXMuX2N0eC5saW5lRGFzaE9mZnNldCA9IHMubGluZURhc2hPZmZzZXQ7XG5cdFx0fVxuXHR9LFxuXG5cblx0ZHJhd05vdGNoOiBmdW5jdGlvbihhcmNQb3MsIGxlbmd0aCwgcykge1xuXHRcdHZhciBleCwgZXksIGVjMSwgZWMyO1xuXG5cdFx0ZXggPSBNYXRoLmNvcyhhcmNQb3MpO1xuXHRcdGV5ID0gTWF0aC5zaW4oYXJjUG9zKTtcblx0XHRlYzEgPSBzLnJhZGl1cztcblx0XHRlYzIgPSBzLnJhZGl1cyAtIGxlbmd0aDtcblxuXHRcdHRoaXMuX2N0eC5zYXZlKCk7XG5cdFx0dGhpcy5hcHBseVZhbHVlU3R5bGUocyk7XG5cdFx0dGhpcy5fY3R4LmxpbmVDYXAgPSBcInNxdWFyZVwiO1xuXHRcdHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcblx0XHR0aGlzLl9jdHgubW92ZVRvKGVjMSAqIGV4LCBlYzEgKiBleSk7XG5cdFx0dGhpcy5fY3R4LmxpbmVUbyhlYzIgKiBleCwgZWMyICogZXkpO1xuXHRcdHRoaXMuX2N0eC5zdHJva2UoKTtcblx0XHR0aGlzLl9jdHgucmVzdG9yZSgpO1xuXHR9LFxuXG5cdGRyYXdFbmRDYXA6IGZ1bmN0aW9uKGFyY1Bvcywgcykge1xuXHRcdHZhciByYWRpdXMgPSBzLnJhZGl1cztcblx0XHR0aGlzLl9jdHguc2F2ZSgpO1xuXHRcdHRoaXMuX2N0eC5saW5lV2lkdGggPSBzLmxpbmVXaWR0aDtcblxuXHRcdHRoaXMuX2N0eC5yb3RhdGUoYXJjUG9zIC0gR0FQX0FSQyAqIDIpOyAvLyAxLjUpO1xuXHRcdHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcblx0XHR0aGlzLl9jdHguYXJjKDAsIDAsIHJhZGl1cywgR0FQX0FSQyAqIDAuNSwgR0FQX0FSQyAqIDIsIGZhbHNlKTtcblx0XHR0aGlzLl9jdHgubGluZVRvKHJhZGl1cyAtIChHQVBfQVJDICogcmFkaXVzKSwgMCk7XG5cdFx0dGhpcy5fY3R4LmNsb3NlUGF0aCgpO1xuXG5cdFx0dGhpcy5fY3R4LmZpbGwoKTtcblx0XHR0aGlzLl9jdHguc3Ryb2tlKCk7XG5cdFx0dGhpcy5fY3R4LnJlc3RvcmUoKTtcblx0fSxcblxuXHRkcmF3TGFiZWw6IGZ1bmN0aW9uKHMpIHtcblx0XHRpZiAodGhpcy5fbGFiZWxUZXh0ICE9PSBzKSB7XG5cdFx0XHR0aGlzLl9sYWJlbFRleHQgPSBzO1xuXHRcdFx0dGhpcy5fbGFiZWxXaWR0aCA9IHRoaXMuX2N0eC5tZWFzdXJlVGV4dChzKS53aWR0aDtcblx0XHR9XG5cdFx0dGhpcy5fY3R4LmZpbGxUZXh0KHMsIHRoaXMuX2xhYmVsV2lkdGggKiAtMC41LCB0aGlzLl9iYXNlbGluZVNoaWZ0LCB0aGlzLl9sYWJlbFdpZHRoKTtcblx0fSxcbn0pO1xuXG5pZiAoREVCVUcpIHtcblx0bW9kdWxlLmV4cG9ydHMucHJvdG90eXBlLl9sb2dGbGFncyA9IFwiXCI7XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9jb21wb25lbnQvQ2Fyb3VzZWxcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTpiYWNrYm9uZS5iYWJ5c2l0dGVyfSAqL1xuY29uc3QgQ29udGFpbmVyID0gcmVxdWlyZShcImJhY2tib25lLmJhYnlzaXR0ZXJcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmhhbW1lcmpzfSAqL1xuY29uc3QgSGFtbWVyID0gcmVxdWlyZShcImhhbW1lcmpzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvdG91Y2gvU21vb3RoUGFuUmVjb2duaXplcn0gKi9cbmNvbnN0IFBhbiA9IHJlcXVpcmUoXCJ1dGlscy90b3VjaC9TbW9vdGhQYW5SZWNvZ25pemVyXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6aGFtbWVyanMuVGFwfSAqL1xudmFyIFRhcCA9IEhhbW1lci5UYXA7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG5jb25zdCBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXd9ICovXG5jb25zdCBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld1wiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvRGVmZXJyZWRWaWV3fSAqL1xuLy8gdmFyIFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9EZWZlcnJlZFZpZXdcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9DYXJvdXNlbFJlbmRlcmVyfSAqL1xuY29uc3QgQ2Fyb3VzZWxSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvQ2Fyb3VzZWxSZW5kZXJlclwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvcHJlZml4ZWRQcm9wZXJ0eX0gKi9cbmNvbnN0IHByZWZpeGVkUHJvcGVydHkgPSByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRQcm9wZXJ0eVwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkU3R5bGVOYW1lfSAqL1xuY29uc3QgcHJlZml4ZWRTdHlsZU5hbWUgPSByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRTdHlsZU5hbWVcIik7XG5cbnZhciB0cmFuc2Zvcm1TdHlsZU5hbWUgPSBwcmVmaXhlZFN0eWxlTmFtZShcInRyYW5zZm9ybVwiKTtcbnZhciB0cmFuc2Zvcm1Qcm9wZXJ0eSA9IHByZWZpeGVkUHJvcGVydHkoXCJ0cmFuc2Zvcm1cIik7XG52YXIgdHJhbnNsYXRlVGVtcGxhdGUgPSBHbG9iYWxzLlRSQU5TTEFURV9URU1QTEFURTtcblxuLy8gdmFyIGNzc1RvUHggPSBmdW5jdGlvbihjc3NWYWwsIGVsKSB7XG4vLyBcdHJldHVybiBwYXJzZUludChjc3NWYWwpO1xuLy8gfTtcblxuLy8gdmFyIGRlZmF1bHRSZW5kZXJlckZ1bmN0aW9uID0gKGZ1bmN0aW9uKCkge1xuLy8gXHR2YXIgZGVmYXVsdFJlbmRlcmVyID0gQ2Fyb3VzZWxSZW5kZXJlci5leHRlbmQoeyBjbGFzc05hbWU6IFwiY2Fyb3VzZWwtaXRlbSBkZWZhdWx0LXJlbmRlcmVyXCJ9KSxcbi8vIFx0XHRlbXB0eVJlbmRlcmVyID0gQ2Fyb3VzZWxSZW5kZXJlci5leHRlbmQoeyBjbGFzc05hbWU6IFwiY2Fyb3VzZWwtaXRlbSBlbXB0eS1yZW5kZXJlclwifSk7XG4vLyBcdHJldHVybiBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyKSB7XG4vLyBcdFx0cmV0dXJuIChpbmRleCA9PT0gLTEpPyBlbXB0eVJlbmRlcmVyOiBkZWZhdWx0UmVuZGVyZXI7XG4vLyBcdH07XG4vLyB9KSgpO1xuXG4vKiogQGNvbnN0ICovXG52YXIgTUFYX1NFTEVDVF9USFJFU0hPTEQgPSAyMDtcblxuLy8gLyoqIEBjb25zdCAqL1xuLy8gdmFyIENISUxEUkVOX0lOVkFMSUQgPSBWaWV3LkNISUxEUkVOX0lOVkFMSUQsXG4vLyBcdFNUWUxFU19JTlZBTElEID0gVmlldy5TVFlMRVNfSU5WQUxJRCxcbi8vIFx0TU9ERUxfSU5WQUxJRCA9IFZpZXcuTU9ERUxfSU5WQUxJRCxcbi8vIFx0U0laRV9JTlZBTElEID0gVmlldy5TSVpFX0lOVkFMSUQsXG4vLyBcdExBWU9VVF9JTlZBTElEID0gVmlldy5MQVlPVVRfSU5WQUxJRDtcblxudmFyIFZFUlRJQ0FMID0gSGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCxcblx0SE9SSVpPTlRBTCA9IEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTDtcblxuLy8geDogW1wieFwiLCBcInlcIl0sXG4vLyB5OiBbXCJ5XCIsIFwieFwiXSxcbi8vIG9mZnNldExlZnQ6IFtcIm9mZnNldExlZnRcIiwgXCJvZmZzZXRUb3BcIl0sXG4vLyBvZmZzZXRUb3A6IFtcIm9mZnNldFRvcFwiLCBcIm9mZnNldExlZnRcIl0sXG4vLyBvZmZzZXRXaWR0aDogW1wib2Zmc2V0V2lkdGhcIiwgXCJvZmZzZXRIZWlnaHRcIl0sXG4vLyBvZmZzZXRIZWlnaHQ6IFtcIm9mZnNldEhlaWdodFwiLCBcIm9mZnNldFdpZHRoXCJdLFxuLy8gd2lkdGg6IFtcIndpZHRoXCIsXCJoZWlnaHRcIl0sXG4vLyBoZWlnaHQ6IFtcImhlaWdodFwiLFwid2lkdGhcIl0sXG4vLyBtYXJnaW5MZWZ0OiBbXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5Ub3BcIl0sXG4vLyBtYXJnaW5SaWdodDogW1wibWFyZ2luUmlnaHRcIixcIm1hcmdpbkJvdHRvbVwiXSxcblxuLypcbnZhciBIT1JJWk9OVEFMX1BST1BTID0ge1xuXHRwb3M6IFwieFwiLFxuXHRzaXplOiBcIndpZHRoXCIsXG5cdG9mZnNldFBvczogXCJvZmZzZXRMZWZ0XCIsXG5cdG9mZnNldFNpemU6IFwib2Zmc2V0V2lkdGhcIixcblx0bWFyZ2luQmVmb3JlOiBcIm1hcmdpbkxlZnRcIixcblx0bWFyZ2luQWZ0ZXI6IFwibWFyZ2luUmlnaHRcIixcbn07XG52YXIgVkVSVElDQUxfUFJPUFMgPSB7XG5cdHBvczogXCJ5XCIsXG5cdHNpemU6IFwiaGVpZ2h0XCIsXG5cdG9mZnNldFBvczogXCJvZmZzZXRUb3BcIixcblx0b2Zmc2V0U2l6ZTogXCJvZmZzZXRIZWlnaHRcIixcblx0bWFyZ2luQmVmb3JlOiBcIm1hcmdpblRvcFwiLFxuXHRtYXJnaW5BZnRlcjogXCJtYXJnaW5Cb3R0b21cIixcbn07XG4qL1xuXG4vLyB2YXIgRElSRUNUSU9OX05PTkUgPSAxO1xuLy8gdmFyIERJUkVDVElPTl9MRUZUID0gMjtcbi8vIHZhciBESVJFQ1RJT05fUklHSFQgPSA0O1xuLy8gdmFyIERJUkVDVElPTl9VUCA9IDg7XG4vLyB2YXIgRElSRUNUSU9OX0RPV04gPSAxNjtcblxudmFyIGRpclRvU3RyID0gZnVuY3Rpb24oZGlyKSB7XG5cdGlmIChkaXIgPT09IEhhbW1lci5ESVJFQ1RJT05fTk9ORSkgcmV0dXJuICdOT05FJztcblx0aWYgKGRpciA9PT0gSGFtbWVyLkRJUkVDVElPTl9MRUZUKSByZXR1cm4gJ0xFRlQnO1xuXHRpZiAoZGlyID09PSBIYW1tZXIuRElSRUNUSU9OX1JJR0hUKSByZXR1cm4gJ1JJR0hUJztcblx0aWYgKGRpciA9PT0gSGFtbWVyLkRJUkVDVElPTl9VUCkgcmV0dXJuICdVUCc7XG5cdGlmIChkaXIgPT09IEhhbW1lci5ESVJFQ1RJT05fRE9XTikgcmV0dXJuICdET1dOJztcblx0aWYgKGRpciA9PT0gSGFtbWVyLkRJUkVDVElPTl9IT1JJWk9OVEFMKSByZXR1cm4gJ0hPUic7IC8vSVpPTlRBTCc7XG5cdGlmIChkaXIgPT09IEhhbW1lci5ESVJFQ1RJT05fVkVSVElDQUwpIHJldHVybiAnVkVSJzsgLy9USUNBTCc7XG5cdGlmIChkaXIgPT09IEhhbW1lci5ESVJFQ1RJT05fQUxMKSByZXR1cm4gJ0FMTCc7XG5cdHJldHVybiAnVU5SRUMnOyAvL09HTklaRUQnO1xufVxuXG52YXIgaXNWYWxpZFRvdWNoTWFuYWdlciA9IGZ1bmN0aW9uKHRvdWNoLCBkaXJlY3Rpb24pIHtcblx0Ly8gdmFyIHJldHZhbDtcblx0dHJ5IHtcblx0XHRyZXR1cm4gdG91Y2guZ2V0KFwiaHBhblwiKS5vcHRpb25zLmRpcmVjdGlvbiA9PSBkaXJlY3Rpb247XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHQvLyByZXR1cm4gcmV0dmFsO1xufTtcblxuLy8gLyoqIEB0eXBlIHtpbnR9IEluIHBpeGVscyAqL1xuLy8gdmFyIHBhblRocmVzaG9sZDogMTU7XG5cbnZhciBjcmVhdGVUb3VjaE1hbmFnZXIgPSBmdW5jdGlvbihlbCwgZGlyLCB0aHJlcykge1xuXHR2YXIgdG91Y2ggPSBuZXcgSGFtbWVyLk1hbmFnZXIoZWwpO1xuXHR2YXIgcGFuID0gbmV3IFBhbih7XG5cdFx0ZXZlbnQ6IFwiaHBhblwiLFxuXHRcdHRocmVzaG9sZDogR2xvYmFscy5USFJFU0hPTEQsXG5cdFx0ZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX0hPUklaT05UQUwsXG5cdH0pO1xuXHR2YXIgdGFwID0gbmV3IFRhcCh7XG5cdFx0dGhyZXNob2xkOiBHbG9iYWxzLlRIUkVTSE9MRCAtIDEsXG5cdFx0aW50ZXJ2YWw6IDUwLFxuXHRcdHRpbWU6IDIwMCxcblx0fSk7XG5cdHRhcC5yZWNvZ25pemVXaXRoKHBhbik7XG5cdHRvdWNoLmFkZChbcGFuLCB0YXBdKTtcblx0cmV0dXJuIHRvdWNoO1xufTtcblxuXG52YXIgQ2Fyb3VzZWwgPSB7XG5cdC8qKiBjb25zdCAqL1xuXHRBTklNQVRFRDogZmFsc2UsXG5cdC8qKiBjb25zdCAqL1xuXHRJTU1FRElBVEU6IHRydWUsXG5cblx0LyoqIGNvcHkgb2YgSGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCAqL1xuXHRESVJFQ1RJT05fVkVSVElDQUw6IFZFUlRJQ0FMLFxuXHQvKiogY29weSBvZiBIYW1tZXIuRElSRUNUSU9OX0hPUklaT05UQUwgKi9cblx0RElSRUNUSU9OX0hPUklaT05UQUw6IEhPUklaT05UQUwsXG5cdC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cblx0XHRzZWxlY3RPblNjcm9sbEVuZDogZmFsc2UsXG5cdFx0LyoqIEB0eXBlIHtib29sZWFufSAqL1xuXHRcdHJlcXVpcmVTZWxlY3Rpb246IGZhbHNlLFxuXHRcdC8qKiBAdHlwZSB7aW50fSAqL1xuXHRcdGRpcmVjdGlvbjogSE9SSVpPTlRBTCxcblx0XHQvKiogQHR5cGUge2ludH0gSW4gcGl4ZWxzICovXG5cdFx0c2VsZWN0VGhyZXNob2xkOiAyMCxcblx0XHQvKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuXHRcdHJlbmRlcmVyRnVuY3Rpb246IChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZWZhdWx0UmVuZGVyZXIgPSBDYXJvdXNlbFJlbmRlcmVyLmV4dGVuZCh7XG5cdFx0XHRcdFx0Y2xhc3NOYW1lOiBcImNhcm91c2VsLWl0ZW0gZGVmYXVsdC1yZW5kZXJlclwiXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRlbXB0eVJlbmRlcmVyID0gQ2Fyb3VzZWxSZW5kZXJlci5leHRlbmQoe1xuXHRcdFx0XHRcdGNsYXNzTmFtZTogXCJjYXJvdXNlbC1pdGVtIGVtcHR5LXJlbmRlcmVyXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycikge1xuXHRcdFx0XHRyZXR1cm4gKGluZGV4ID09PSAtMSkgPyBlbXB0eVJlbmRlcmVyIDogZGVmYXVsdFJlbmRlcmVyO1xuXHRcdFx0fTtcblx0XHR9KSgpLFxuXHR9LFxufTtcbkNhcm91c2VsLnZhbGlkT3B0aW9ucyA9IF8ua2V5cyhDYXJvdXNlbC5kZWZhdWx0cyk7XG5cbi8qKlxuLyogQGNvbnN0cnVjdG9yXG4vKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9DYXJvdXNlbH1cbi8qL1xudmFyIENhcm91c2VsUHJvdG8gPSB7XG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjaWRQcmVmaXg6IFwiY2Fyb3VzZWxcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0YWdOYW1lOiBcImRpdlwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJjYXJvdXNlbCBza2lwLXRyYW5zaXRpb25zXCIsXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogcHJvcGVydGllc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRwcm9wZXJ0aWVzOiB7XG5cdFx0c2Nyb2xsaW5nOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fc2Nyb2xsaW5nO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VsZWN0ZWRJdGVtOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fc2VsZWN0ZWRWaWV3Lm1vZGVsO1xuXHRcdFx0fSxcblx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdFx0aWYgKHZhbHVlKVxuXHRcdFx0XHRcdHRoaXMuX29uU2VsZWN0T25lKHZhbHVlKVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0dGhpcy5fb25TZWxlY3ROb25lKCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0fSxcblxuXHRldmVudHM6IHtcblx0XHQvLyBcIm1vdXNlZG93blwiOiBcIl9vbk1vdXNlRG93blwiLCBcIm1vdXNldXBcIjogXCJfb25Nb3VzZVVwXCIsXG5cdFx0XCJ0cmFuc2l0aW9uZW5kIC5jYXJvdXNlbC1pdGVtLnNlbGVjdGVkXCI6IFwiX29uU2Nyb2xsVHJhbnNpdGlvbkVuZFwiLFxuXHRcdFwiY2xpY2sgLmNhcm91c2VsLWl0ZW06bm90KC5zZWxlY3RlZClcIjogXCJfb25DbGlja1wiLFxuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdF8uYmluZEFsbCh0aGlzLCBcIl9vblBvaW50ZXJFdmVudFwiLCBcIl9vbkNsaWNrXCIpO1xuXG5cdFx0dGhpcy5pdGVtVmlld3MgPSBuZXcgQ29udGFpbmVyKCk7XG5cdFx0dGhpcy5tZXRyaWNzID0ge307XG5cblx0XHRfLmV4dGVuZCh0aGlzLCBfLmRlZmF1bHRzKF8ucGljayhvcHRpb25zLCBDYXJvdXNlbC52YWxpZE9wdGlvbnMpLCBDYXJvdXNlbC5kZWZhdWx0cykpO1xuXG5cdFx0Ly8gdGhpcy5jaGlsZEdhcCA9IDA7IC8vdGhpcy5kaXJQcm9wKDIwLCAxOCk7XG5cdFx0dGhpcy5fcHJlY2VkaW5nRGlyID0gKEhhbW1lci5ESVJFQ1RJT05fTEVGVCB8IEhhbW1lci5ESVJFQ1RJT05fVVApICYgdGhpcy5kaXJlY3Rpb247XG5cdFx0dGhpcy5fZm9sbG93aW5nRGlyID0gKEhhbW1lci5ESVJFQ1RJT05fUklHSFQgfCBIYW1tZXIuRElSRUNUSU9OX0RPV04pICYgdGhpcy5kaXJlY3Rpb247XG5cblx0XHQvLyB1c2Ugc3VwcGxpZWQgdG91Y2ggbWdyIG9yIGNyZWF0ZSBwcml2YXRlXG5cdFx0aWYgKGlzVmFsaWRUb3VjaE1hbmFnZXIob3B0aW9ucy50b3VjaCwgdGhpcy5kaXJlY3Rpb24pKSB7XG5cdFx0XHR0aGlzLnRvdWNoID0gb3B0aW9ucy50b3VjaDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiJXM6OmluaXRpYWxpemUgY3JlYXRpbmcgSGFtbWVyIGluc3RhbmNlXCIsIHRoaXMuY2lkKTtcblx0XHRcdHRoaXMudG91Y2ggPSBjcmVhdGVUb3VjaE1hbmFnZXIodGhpcy5lbCwgdGhpcy5kaXJlY3Rpb24pO1xuXHRcdFx0Ly8gdGhpcy5vbihcInZpZXc6cmVtb3ZlZFwiLCB0aGlzLnRvdWNoLmRlc3Ryb3ksIHRoaXMudG91Y2gpO1xuXHRcdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLCBcInZpZXc6cmVtb3ZlZFwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy50b3VjaC5kZXN0cm95KCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKiBjcmVhdGUgY2hpbGRyZW4gYW5kIHByb3BzICovXG5cdFx0dGhpcy5zZXRFbmFibGVkKHRydWUpO1xuXHRcdHRoaXMuc2tpcFRyYW5zaXRpb25zID0gdHJ1ZTtcblx0XHR0aGlzLl9yZW5kZXJGbGFncyA9IFZpZXcuQ0hJTERSRU5fSU5WQUxJRDtcblx0XHQvLyB0aGlzLmludmFsaWRhdGVDaGlsZHJlbigpO1xuXG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLCBcInZpZXc6YXR0YWNoZWRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnNraXBUcmFuc2l0aW9ucyA9IHRydWU7XG5cdFx0XHQvLyB0aGlzLmludmFsaWRhdGVTaXplKCk7XG5cdFx0XHQvLyB0aGlzLnJlbmRlck5vdygpO1xuXHRcdFx0Ly8gdGhpcy5yZXF1ZXN0UmVuZGVyKCk7XG5cdFx0XHR0aGlzLnJlcXVlc3RSZW5kZXIoVmlldy5TSVpFX0lOVkFMSUQgfCBWaWV3LkxBWU9VVF9JTlZBTElEKTtcblx0XHR9KTtcblxuXHRcdC8qIGNvbGxlY3Rpb24gbGlzdGVuZXJzICovXG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sIHtcblx0XHRcdFwicmVzZXRcIjogdGhpcy5fb25SZXNldCxcblx0XHRcdFwic2VsZWN0Om9uZVwiOiB0aGlzLl9vblNlbGVjdE9uZSxcblx0XHRcdFwic2VsZWN0Om5vbmVcIjogdGhpcy5fb25TZWxlY3ROb25lLFxuXHRcdFx0XCJkZXNlbGVjdDpvbmVcIjogdGhpcy5fb25EZXNlbGVjdEFueSxcblx0XHRcdFwiZGVzZWxlY3Q6bm9uZVwiOiB0aGlzLl9vbkRlc2VsZWN0QW55LFxuXHRcdH0pO1xuXHR9LFxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBIYW1tZXIgaW5pdFxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyB2YWxpZGF0ZVRvdWNoTWFuYWdlcjogZnVuY3Rpb24odG91Y2gsIGRpcmVjdGlvbikge1xuXHQvLyBcdHRyeSB7XG5cdC8vIFx0XHRyZXR1cm4gdG91Y2guZ2V0KFwicGFuXCIpLm9wdGlvbnMuZGlyZWN0aW9uID09PSBkaXJlY3Rpb24pO1xuXHQvLyBcdH0gY2F0Y2ggKGVycikge1xuXHQvLyBcdFx0cmV0dXJuIGZhbHNlO1xuXHQvLyBcdH1cblx0Ly8gfSxcblxuXHQvLyBpbml0aWFsaXplSGFtbWVyOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdC8vIFx0Ly8gZGlyZWN0aW9uIGZyb20gb3B0cy9kZWZhdWx0c1xuXHQvLyBcdGlmIChvcHRpb25zLmRpcmVjdGlvbiA9PT0gVkVSVElDQUwpIHtcblx0Ly8gXHRcdHRoaXMuZGlyZWN0aW9uID0gVkVSVElDQUw7XG5cdC8vIFx0fSAvLyBkbyBub3RoaW5nOiB0aGUgZGVmYXVsdCBpcyBob3Jpem9udGFsXG5cdC8vXG5cdC8vIFx0Ly8gdmFsaWRhdGUgaGFtbWVyIGluc3RhbmNlIG9yIGNyZWF0ZSBsb2NhbFxuXHQvLyBcdGlmICgodG91Y2ggPSBvcHRpb25zLnRvdWNoKSAmJiAocGFuID0gdG91Y2guZ2V0KFwicGFuXCIpKSkge1xuXHQvLyBcdFx0Ly8gT3ZlcnJpZGUgZGlyZWN0aW9uIG9ubHkgaWYgc3BlY2lmaWNcblx0Ly8gXHRcdGlmIChwYW4ub3B0aW9ucy5kaXJlY3Rpb24gIT09IEhhbW1lci5ESVJFQ1RJT05fQUxMKSB7XG5cdC8vIFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gcGFuLm9wdGlvbnMuZGlyZWN0aW9uO1xuXHQvLyBcdFx0fVxuXHQvLyBcdFx0dGhpcy5wYW5UaHJlc2hvbGQgPSBwYW4ub3B0aW9ucy50aHJlc2hvbGQ7XG5cdC8vIFx0fSBlbHNlIHtcblx0Ly8gXHRcdGNvbnNvbGUud2FybihcIiVzOjppbml0aWFsaXplSGFtbWVyIHVzaW5nIHByaXZhdGUgSGFtbWVyIGluc3RhbmNlXCIsIHRoaXMuY2lkKTtcblx0Ly8gXHRcdHRvdWNoID0gY3JlYXRlSGFtbWVySW5zdGFuY2UodGhpcy5lbCwgdGhpcy5wYW5UaHJlc2hvbGQsIHRoaXMuZGlyZWN0aW9uKTtcblx0Ly8gXHRcdHRoaXMub24oXCJ2aWV3OnJlbW92ZWRcIiwgdG91Y2guZGVzdHJveSwgdG91Y2gpO1xuXHQvLyBcdH1cblx0Ly8gXHR0aGlzLnRvdWNoID0gdG91Y2g7XG5cdC8vIH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHQvLyB0aGlzLl9zY3JvbGxQZW5kaW5nQWN0aW9uICYmIHRoaXMuX3Njcm9sbFBlbmRpbmdBY3Rpb24odHJ1ZSk7XG5cdFx0Ly8gaWYgKHRoaXMuX2VuYWJsZWQpIHtcblx0XHQvLyBcdHRoaXMudG91Y2gub2ZmKFwidGFwXCIsIHRoaXMuX29uVGFwKTtcblx0XHQvLyBcdHRoaXMudG91Y2gub2ZmKFwiaHBhbnN0YXJ0IGhwYW5tb3ZlIGhwYW5lbmQgaHBhbmNhbmNlbFwiLCB0aGlzLl9vblBhbik7XG5cdFx0Ly8gfVxuXHRcdHRoaXMuX3RvZ2dsZVBvaW50ZXJFdmVudHMoZmFsc2UpO1xuXHRcdHRoaXMucmVtb3ZlQ2hpbGRyZW4oKTtcblx0XHRWaWV3LnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIGhlbHBlciBmdW5jdGlvbnNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0ZGlyUHJvcDogZnVuY3Rpb24oaFByb3AsIHZQcm9wKSB7XG5cdFx0cmV0dXJuICh0aGlzLmRpcmVjdGlvbiAmIEhPUklaT05UQUwpID8gaFByb3AgOiB2UHJvcDtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBSZW5kZXJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gcmVuZGVyOiBmdW5jdGlvbigpIHtcblx0Ly8gXHRpZiAodGhpcy5hdHRhY2hlZCkge1xuXHQvLyBcdFx0dGhpcy5za2lwVHJhbnNpdGlvbnMgPSB0cnVlO1xuXHQvLyBcdFx0Ly8gdGhpcy5pbnZhbGlkYXRlU2l6ZSgpO1xuXHQvLyBcdFx0dGhpcy5yZW5kZXJOb3codHJ1ZSk7XG5cdC8vIFx0fVxuXHQvLyB9LFxuXG5cdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0Ly8gcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG5cdC8vIFx0aWYgKCF0aGlzLmF0dGFjaGVkKSB7XG5cdC8vIFx0XHRpZiAoIXRoaXMuX3JlbmRlclBlbmRpbmcpIHtcblx0Ly8gXHRcdFx0dGhpcy5fcmVuZGVyUGVuZGluZyA9IHRydWU7XG5cdC8vIFx0XHRcdHRoaXMubGlzdGVuVG8odGhpcywgXCJ2aWV3OmF0dGFjaGVkXCIsIHRoaXMucmVuZGVyKTtcblx0Ly8gXHRcdH1cblx0Ly8gXHR9IGVsc2Uge1xuXHQvLyBcdFx0aWYgKHRoaXMuX3JlbmRlclBlbmRpbmcpIHtcblx0Ly8gXHRcdFx0dGhpcy5fcmVuZGVyUGVuZGluZyA9IGZhbHNlO1xuXHQvLyBcdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmcodGhpcywgXCJ2aWV3OmF0dGFjaGVkXCIsIHRoaXMucmVuZGVyKTtcblx0Ly8gXHRcdH1cblx0Ly8gXHRcdHRoaXMuX2RlbHRhID0gMDtcblx0Ly8gXHRcdHRoaXMuc2tpcFRyYW5zaXRpb25zID0gdHJ1ZTtcblx0Ly8gXHRcdHRoaXMuaW52YWxpZGF0ZVNpemUoKTtcblx0Ly8gXHRcdC8vIHRoaXMuaW52YWxpZGF0ZUxheW91dCgpO1xuXHQvLyBcdFx0dGhpcy5yZW5kZXJOb3coKTtcblx0Ly8gXHR9XG5cdC8vIFx0cmV0dXJuIHRoaXM7XG5cdC8vIH0sXG5cblx0Ly8gcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG5cdC8vIFx0dGhpcy5tZWFzdXJlTGF0ZXIoKTtcblx0Ly8gXHR0aGlzLnNjcm9sbEJ5KDAsIENhcm91c2VsLklNTUVESUFURSk7XG5cdC8vXG5cdC8vIFx0aWYgKHRoaXMuZWwucGFyZW50RWxlbWVudCkge1xuXHQvLyBcdFx0dGhpcy5yZW5kZXJOb3coKTtcblx0Ly8gXHR9XG5cdC8vIFx0cmV0dXJuIHRoaXM7XG5cdC8vIH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZW5kZXJGcmFtZTogZnVuY3Rpb24odHN0YW1wLCBmbGFncykge1xuXHRcdGlmIChmbGFncyAmIFZpZXcuQ0hJTERSRU5fSU5WQUxJRCkge1xuXHRcdFx0dGhpcy5fY3JlYXRlQ2hpbGRyZW4oKTtcblx0XHRcdC8vIGNsZWFyIHRoaXMgZmxhZyBub3c6IHJlbmRlciBtYXkgYmUgZGVmZXJyZWQgdW50aWwgYXR0YWNoZWRcblx0XHRcdGZsYWdzICY9IH5WaWV3LkNISUxEUkVOX0lOVkFMSUQ7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmF0dGFjaGVkKSB7XG5cdFx0XHRpZiAoZmxhZ3MgJiBWaWV3LlNJWkVfSU5WQUxJRCkge1xuXHRcdFx0XHR0aGlzLl9tZWFzdXJlKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZmxhZ3MgJiAoVmlldy5MQVlPVVRfSU5WQUxJRCB8IFZpZXcuU0laRV9JTlZBTElEKSkge1xuXHRcdFx0XHR0aGlzLl9zY3JvbGxCeSh0aGlzLl9kZWx0YSwgdGhpcy5za2lwVHJhbnNpdGlvbnMpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoZmxhZ3MpIHtcblx0XHRcdHRoaXMubGlzdGVuVG9PbmNlKHRoaXMsIFwidmlldzphdHRhY2hlZFwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKGZsYWdzKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBlbmFibGVkXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0Ly8gX2VuYWJsZWQ6IHVuZGVmaW5lZCxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHNldEVuYWJsZWQ6IGZ1bmN0aW9uKGVuYWJsZWQpIHtcblx0XHRpZiAodGhpcy5fZW5hYmxlZCAhPT0gZW5hYmxlZCkge1xuXHRcdFx0dGhpcy5fZW5hYmxlZCA9IGVuYWJsZWQ7XG5cdFx0XHQvLyB0b2dnbGUgZXZlbnRzIGltbWVkaWF0ZWx5XG5cdFx0XHR0aGlzLl90b2dnbGVQb2ludGVyRXZlbnRzKGVuYWJsZWQpO1xuXHRcdFx0Ly8gZG9tIG1hbmlwdWxhdGlvbiBvbiByZW5kZXIgKF9yZW5kZXJFbmFibGVkKVxuXHRcdFx0Ly8gdGhpcy5fcmVuZGVyRmxhZ3MgfD0gVmlldy5TVFlMRVNfSU5WQUxJRDtcblx0XHRcdC8vIHRoaXMucmVxdWVzdFJlbmRlcigpO1xuXHRcdFx0dGhpcy5zZXRJbW1lZGlhdGUodGhpcy5fcmVuZGVyRW5hYmxlZCk7XG5cdFx0XHQvLyB0aGlzLl9yZW5kZXJFbmFibGVkKCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9yZW5kZXJFbmFibGVkOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCAhdGhpcy5lbmFibGVkKTtcblx0XHR0aGlzLml0ZW1WaWV3cy5lYWNoKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdHZpZXcuc2V0RW5hYmxlZCh0aGlzLmVuYWJsZWQpO1xuXHRcdH0sIHRoaXMpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIENyZWF0ZSBjaGlsZHJlblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfY3JlYXRlQ2hpbGRyZW46IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHZhciBzSW5kZXg7XG5cdFx0dmFyIGJ1ZmZlciwgcmVuZGVyZXIsIHZpZXcsIHZpZXdPcHRzO1xuXG5cdFx0dGhpcy5yZW1vdmVDaGlsZHJlbigpO1xuXG5cdFx0aWYgKHRoaXMuY29sbGVjdGlvbi5sZW5ndGgpIHtcblx0XHRcdHZpZXdPcHRzID0ge1xuXHRcdFx0XHQvLyB2aWV3RGVwdGg6IHRoaXMudmlld0RlcHRoICsgMSxcblx0XHRcdFx0Ly8gcGFyZW50VmlldzogdGhpcyxcblx0XHRcdFx0ZW5hYmxlZDogdGhpcy5lbmFibGVkXG5cdFx0XHR9O1xuXHRcdFx0YnVmZmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHRcdFx0Ly8gYnVmZmVyID0gdGhpcy5lbDtcblxuXHRcdFx0aWYgKCF0aGlzLnJlcXVpcmVTZWxlY3Rpb24pIHtcblx0XHRcdFx0cmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyRnVuY3Rpb24obnVsbCwgLTEsIHRoaXMuY29sbGVjdGlvbik7XG5cdFx0XHRcdHZpZXcgPSBuZXcgcmVuZGVyZXIodmlld09wdHMpO1xuXHRcdFx0XHR0aGlzLml0ZW1WaWV3cy5hZGQodmlldyk7XG5cdFx0XHRcdGJ1ZmZlci5hcHBlbmRDaGlsZCh2aWV3LmVsKTtcblx0XHRcdFx0dGhpcy5lbXB0eVZpZXcgPSB2aWV3O1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmNvbGxlY3Rpb24uZWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyKSB7XG5cdFx0XHRcdHZpZXdPcHRzLm1vZGVsID0gaXRlbTtcblx0XHRcdFx0cmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyRnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycik7XG5cdFx0XHRcdHZpZXcgPSBuZXcgcmVuZGVyZXIodmlld09wdHMpO1xuXHRcdFx0XHR0aGlzLml0ZW1WaWV3cy5hZGQodmlldyk7XG5cdFx0XHRcdGJ1ZmZlci5hcHBlbmRDaGlsZCh2aWV3LmVsKTtcblx0XHRcdH0sIHRoaXMpO1xuXG5cdFx0XHQvLyBpZiAoIXRoaXMucmVxdWlyZVNlbGVjdGlvbikge1xuXHRcdFx0Ly8gXHRidWZmZXIgPSB0aGlzLmFwcGVuZEl0ZW1WaWV3KGJ1ZmZlciwgdGhpcy5tb2RlbCwgLTEsIHRoaXMuY29sbGVjdGlvbik7XG5cdFx0XHQvLyBcdHRoaXMuZW1wdHlWaWV3ID0gdGhpcy5pdGVtVmlld3MuZmlyc3QoKTtcblx0XHRcdC8vIH1cblx0XHRcdC8vIGJ1ZmZlciA9IHRoaXMuY29sbGVjdGlvbi5yZWR1Y2UodGhpcy5hcHBlbmRJdGVtVmlldywgYnVmZmVyLCB0aGlzKTtcblxuXHRcdFx0dGhpcy5hZGp1c3RUb1NlbGVjdGlvbigpO1xuXHRcdFx0dGhpcy5fc2VsZWN0ZWRWaWV3LmVsLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcblxuXHRcdFx0dGhpcy5lbC5hcHBlbmRDaGlsZChidWZmZXIpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBhcHBlbmRJdGVtVmlldzogZnVuY3Rpb24gKHBhcmVudEVsLCBtb2RlbCwgaW5kZXgsIGFycikge1xuXHQvLyBcdHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXJGdW5jdGlvbihtb2RlbCwgaW5kZXgsIGFycik7XG5cdC8vIFx0dmFyIHZpZXcgPSBuZXcgcmVuZGVyZXIoe1xuXHQvLyBcdFx0bW9kZWw6IG1vZGVsLFxuXHQvLyBcdFx0cGFyZW50VmlldzogdGhpcyxcblx0Ly8gXHRcdGVuYWJsZWQ6IHRoaXMuZW5hYmxlZFxuXHQvLyBcdH0pO1xuXHQvLyBcdHRoaXMuaXRlbVZpZXdzLmFkZCh2aWV3KTtcblx0Ly8gXHRwYXJlbnRFbC5hcHBlbmRDaGlsZCh2aWV3LmVsKTtcblx0Ly8gXHRyZXR1cm4gcGFyZW50RWw7XG5cdC8vIH0sXG5cblx0Ly8gY3JlYXRlSXRlbVZpZXc6IGZ1bmN0aW9uIChyZW5kZXJlciwgb3B0cykge1xuXHQvLyBcdHZhciB2aWV3ID0gbmV3IHJlbmRlcmVyKG9wdHMpO1xuXHQvLyBcdHRoaXMuaXRlbVZpZXdzLmFkZCh2aWV3KTtcblx0Ly8gXHRyZXR1cm4gdmlldztcblx0Ly8gfSxcblxuXHRyZW1vdmVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5pdGVtVmlld3MuZWFjaCh0aGlzLnJlbW92ZUl0ZW1WaWV3LCB0aGlzKTtcblx0XHR0aGlzLmVtcHR5VmlldyA9ICh2b2lkIDApO1xuXHR9LFxuXG5cdHJlbW92ZUl0ZW1WaWV3OiBmdW5jdGlvbih2aWV3KSB7XG5cdFx0dGhpcy5pdGVtVmlld3MucmVtb3ZlKHZpZXcpO1xuXHRcdHZpZXcucmVtb3ZlKCk7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogbWVhc3VyZVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfbWVhc3VyZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG0sIG1tO1xuXHRcdHZhciBwb3MgPSAwLFxuXHRcdFx0cG9zSW5uZXIgPSAwO1xuXHRcdHZhciBtYXhBY3Jvc3MgPSAwLFxuXHRcdFx0bWF4T3V0ZXIgPSAwO1xuXHRcdHZhciBtYXhPdXRlclZpZXcsIG1heEFjcm9zc1ZpZXc7XG5cblx0XHRtYXhPdXRlclZpZXcgPSBtYXhBY3Jvc3NWaWV3ID0gdGhpcy5lbXB0eVZpZXcgfHwgdGhpcy5pdGVtVmlld3MuZmlyc3QoKTtcblxuXHRcdC8vIGNoaWRyZW4gbWV0cmljc1xuXHRcdHRoaXMuaXRlbVZpZXdzLmVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0dmlldy5yZW5kZXIoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMuaXRlbVZpZXdzLmVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0bSA9IHRoaXMubWVhc3VyZUl0ZW1WaWV3KHZpZXcpO1xuXHRcdFx0bS5wb3MgPSBwb3M7XG5cdFx0XHRwb3MgKz0gbS5vdXRlcjsgLy8gKyB0aGlzLmNoaWxkR2FwO1xuXHRcdFx0bS5wb3NJbm5lciA9IHBvc0lubmVyO1xuXHRcdFx0cG9zSW5uZXIgKz0gbS5pbm5lcjsgLy8rIHRoaXMuY2hpbGRHYXA7XG5cdFx0XHRpZiAodmlldyAhPT0gdGhpcy5lbXB0eVZpZXcpIHtcblx0XHRcdFx0aWYgKG0uYWNyb3NzID4gbWF4QWNyb3NzKSB7XG5cdFx0XHRcdFx0bWF4QWNyb3NzID0gbS5hY3Jvc3M7XG5cdFx0XHRcdFx0bWF4QWNyb3NzVmlldyA9IHZpZXc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG0ub3V0ZXIgPiBtYXhPdXRlcikge1xuXHRcdFx0XHRcdG1heE91dGVyID0gbS5vdXRlcjtcblx0XHRcdFx0XHRtYXhPdXRlclZpZXcgPSB2aWV3O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwgdGhpcyk7XG5cblx0XHQvLyBtZWFzdXJlIHNlbGYgKyBtYXggY2hpbGQgbWV0cmljc1xuXHRcdG1tID0gdGhpcy5tZXRyaWNzW3RoaXMuY2lkXSB8fCAodGhpcy5tZXRyaWNzW3RoaXMuY2lkXSA9IHt9KTtcblx0XHRtbS5vdXRlciA9IHRoaXMuZWxbdGhpcy5kaXJQcm9wKFwib2Zmc2V0V2lkdGhcIiwgXCJvZmZzZXRIZWlnaHRcIildO1xuXHRcdG1tLmJlZm9yZSA9IG1heE91dGVyVmlldy5lbFt0aGlzLmRpclByb3AoXCJvZmZzZXRMZWZ0XCIsIFwib2Zmc2V0VG9wXCIpXTtcblx0XHRtbS5pbm5lciA9IG1heE91dGVyVmlldy5lbFt0aGlzLmRpclByb3AoXCJvZmZzZXRXaWR0aFwiLCBcIm9mZnNldEhlaWdodFwiKV07XG5cdFx0bW0uYWZ0ZXIgPSBtbS5vdXRlciAtIChtbS5pbm5lciArIG1tLmJlZm9yZSk7XG5cdFx0bW0uYWNyb3NzID0gbWF4QWNyb3NzO1xuXG5cdFx0Ly8gbSA9IHRoaXMubWV0cmljc1ttYXhPdXRlclZpZXcuY2lkXTtcblx0XHQvLyBtbS5pbm5lciA9IG0uaW5uZXI7XG5cblx0XHQvLyB0YXAgYXJlYVxuXHRcdHRoaXMuX3RhcEFjcm9zc0JlZm9yZSA9IG1heEFjcm9zc1ZpZXcuZWxbdGhpcy5kaXJQcm9wKFwib2Zmc2V0VG9wXCIsIFwib2Zmc2V0TGVmdFwiKV07XG5cdFx0dGhpcy5fdGFwQWNyb3NzQWZ0ZXIgPSB0aGlzLl90YXBBY3Jvc3NCZWZvcmUgKyBtYXhBY3Jvc3M7XG5cdFx0dGhpcy5fdGFwQmVmb3JlID0gbW0uYmVmb3JlICsgdGhpcy5fdGFwR3Jvdztcblx0XHR0aGlzLl90YXBBZnRlciA9IG1tLmJlZm9yZSArIG1tLmlubmVyIC0gdGhpcy5fdGFwR3JvdztcblxuXHRcdHRoaXMuc2VsZWN0VGhyZXNob2xkID0gTWF0aC5taW4oTUFYX1NFTEVDVF9USFJFU0hPTEQsIG1tLm91dGVyICogMC4xKTtcblx0fSxcblxuXHRtZWFzdXJlSXRlbVZpZXc6IGZ1bmN0aW9uKHZpZXcpIHtcblx0XHR2YXIgbSwgdmlld0VsO1xuXHRcdC8vIHZhciBzLCBzaXplRWw7XG5cblx0XHR2aWV3RWwgPSB2aWV3LmVsO1xuXHRcdG0gPSB0aGlzLm1ldHJpY3Nbdmlldy5jaWRdIHx8ICh0aGlzLm1ldHJpY3Nbdmlldy5jaWRdID0ge30pO1xuXG5cdFx0bS5vdXRlciA9IHZpZXdFbFt0aGlzLmRpclByb3AoXCJvZmZzZXRXaWR0aFwiLCBcIm9mZnNldEhlaWdodFwiKV07XG5cdFx0bS5hY3Jvc3MgPSB2aWV3RWxbdGhpcy5kaXJQcm9wKFwib2Zmc2V0SGVpZ2h0XCIsIFwib2Zmc2V0V2lkdGhcIildO1xuXG5cdFx0aWYgKHZpZXcubWV0cmljcykge1xuXHRcdFx0bS5iZWZvcmUgPSB2aWV3Lm1ldHJpY3NbdGhpcy5kaXJQcm9wKFwibWFyZ2luTGVmdFwiLCBcIm1hcmdpblRvcFwiKV07XG5cdFx0XHRtLm91dGVyICs9IG0uYmVmb3JlO1xuXHRcdFx0bS5vdXRlciArPSB2aWV3Lm1ldHJpY3NbdGhpcy5kaXJQcm9wKFwibWFyZ2luUmlnaHRcIiwgXCJtYXJnaW5Cb3R0b21cIildO1xuXHRcdFx0bS5pbm5lciA9IHZpZXcubWV0cmljcy5jb250ZW50W3RoaXMuZGlyUHJvcChcIndpZHRoXCIsIFwiaGVpZ2h0XCIpXTtcblx0XHRcdG0uYmVmb3JlICs9IHZpZXcubWV0cmljcy5jb250ZW50W3RoaXMuZGlyUHJvcChcInhcIiwgXCJ5XCIpXTtcblx0XHRcdG0uYWZ0ZXIgPSBtLm91dGVyIC0gKG0uaW5uZXIgKyBtLmJlZm9yZSk7XG5cblx0XHRcdC8vIHZhciBtYXJnaW5CZWZvcmUgPSB2aWV3Lm1ldHJpY3NbdGhpcy5kaXJQcm9wKFwibWFyZ2luTGVmdFwiLFwibWFyZ2luVG9wXCIpXTtcblx0XHRcdC8vIHZhciBtYXJnaW5BZnRlciA9IHZpZXcubWV0cmljc1t0aGlzLmRpclByb3AoXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luQm90dG9tXCIpXTtcblx0XHRcdC8vIHZhciBwb3MgPSB2aWV3Lm1ldHJpY3MuY29udGVudFt0aGlzLmRpclByb3AoXCJ4XCIsXCJ5XCIpXTtcblx0XHRcdC8vXG5cdFx0XHQvLyBtLmlubmVyID0gdmlldy5tZXRyaWNzLmNvbnRlbnRbdGhpcy5kaXJQcm9wKFwid2lkdGhcIixcImhlaWdodFwiKV07XG5cdFx0XHQvLyBtLmJlZm9yZSA9IG1hcmdpbkJlZm9yZSArIHBvcztcblx0XHRcdC8vIG0ub3V0ZXIgKz0gbWFyZ2luQmVmb3JlICsgbWFyZ2luQWZ0ZXI7XG5cdFx0XHQvLyBtLmFmdGVyID0gbS5vdXRlciAtIChtLmlubmVyICsgbS5iZWZvcmUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyB0aHJvdyBuZXcgRXJyb3IoXCJyZW5kZXJlciBoYXMgbm8gbWV0cmljc1wiKTtcblx0XHRcdGNvbnNvbGUud2FybihcIiVzOjptZWFzdXJlSXRlbVZpZXcgdmlldyAnJXMnIGhhcyBubyBtZXRyaWNzXCIsIHRoaXMuY2lkLCB2aWV3LmNpZCk7XG5cdFx0XHRtLmlubmVyID0gbS5vdXRlcjtcblx0XHRcdG0uYWZ0ZXIgPSBtLmJlZm9yZSA9IDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG07XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0Lyogc2Nyb2xsaW5nIHByb3BlcnR5XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9kZWx0YTogMCxcblxuXHRfc2Nyb2xsaW5nOiBmYWxzZSxcblxuXHRfc2V0U2Nyb2xsaW5nOiBmdW5jdGlvbihzY3JvbGxpbmcpIHtcblx0XHQvLyBjb25zb2xlLndhcm4oXCJfc2V0U2Nyb2xsaW5nIGN1cnJlbnQvcmVxdWVzdGVkXCIsIHRoaXMuX3Njcm9sbGluZywgc2Nyb2xsaW5nKTtcblx0XHRpZiAodGhpcy5fc2Nyb2xsaW5nICE9IHNjcm9sbGluZykge1xuXHRcdFx0dGhpcy5fc2Nyb2xsaW5nID0gc2Nyb2xsaW5nO1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwic2Nyb2xsaW5nXCIsIHNjcm9sbGluZyk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoc2Nyb2xsaW5nID8gXCJ2aWV3OnNjcm9sbHN0YXJ0XCIgOiBcInZpZXc6c2Nyb2xsZW5kXCIpO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBTY3JvbGwvbGF5b3V0XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHNjcm9sbEJ5OiBmdW5jdGlvbihkZWx0YSwgc2tpcFRyYW5zaXRpb25zKSB7XG5cdFx0dGhpcy5fZGVsdGEgPSBkZWx0YSB8fCAwO1xuXHRcdHRoaXMuc2tpcFRyYW5zaXRpb25zID0gISFza2lwVHJhbnNpdGlvbnM7XG5cdFx0Ly8gdGhpcy5pbnZhbGlkYXRlTGF5b3V0KCk7XG5cdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKFZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHR9LFxuXG5cdF9zY3JvbGxCeTogZnVuY3Rpb24oZGVsdGEsIHNraXBUcmFuc2l0aW9ucykge1xuXHRcdHZhciBzTWV0cmljcywgbWV0cmljcywgcG9zO1xuXG5cdFx0c01ldHJpY3MgPSB0aGlzLm1ldHJpY3NbKHRoaXMuX3Njcm9sbENhbmRpZGF0ZVZpZXcgfHwgdGhpcy5fc2VsZWN0ZWRWaWV3KS5jaWRdO1xuXHRcdHRoaXMuaXRlbVZpZXdzLmVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0bWV0cmljcyA9IHRoaXMubWV0cmljc1t2aWV3LmNpZF07XG5cdFx0XHRwb3MgPSBNYXRoLmZsb29yKHRoaXMuX2dldFNjcm9sbE9mZnNldChkZWx0YSwgbWV0cmljcywgc01ldHJpY3MpKTtcblx0XHRcdHZpZXcubWV0cmljcy50cmFuc2xhdGVYID0gKHRoaXMuZGlyZWN0aW9uICYgSE9SSVpPTlRBTCkgPyBwb3MgOiAwO1xuXHRcdFx0dmlldy5tZXRyaWNzLnRyYW5zbGF0ZVkgPSAodGhpcy5kaXJlY3Rpb24gJiBIT1JJWk9OVEFMKSA/IDAgOiBwb3M7XG5cdFx0XHR2aWV3Lm1ldHJpY3MuX3RyYW5zZm9ybSA9IHRyYW5zbGF0ZVRlbXBsYXRlKHZpZXcubWV0cmljcy50cmFuc2xhdGVYLCB2aWV3Lm1ldHJpY3MudHJhbnNsYXRlWSk7XG5cdFx0XHR2aWV3LmVsLnN0eWxlW3RyYW5zZm9ybVByb3BlcnR5XSA9IHZpZXcubWV0cmljcy5fdHJhbnNmb3JtO1xuXHRcdFx0Ly8gdmlldy5lbC5zdHlsZVt0cmFuc2Zvcm1Qcm9wZXJ0eV0gPSAodGhpcy5kaXJlY3Rpb24gJiBIT1JJWk9OVEFMKT9cblx0XHRcdC8vIFx0XCJ0cmFuc2xhdGUzZChcIiArIHBvcyArIFwicHgsMCwwKVwiOlxuXHRcdFx0Ly8gXHRcInRyYW5zbGF0ZTNkKDAsXCIgKyBwb3MgKyBcInB4LDApXCI7XG5cdFx0fSwgdGhpcyk7XG5cblx0XHR0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJza2lwLXRyYW5zaXRpb25zXCIsIHNraXBUcmFuc2l0aW9ucyk7XG5cdFx0dGhpcy5zZWxlY3RGcm9tVmlldygpO1xuXHR9LFxuXG5cdF9nZXRTY3JvbGxPZmZzZXQ6IGZ1bmN0aW9uKGRlbHRhLCBtQ3VyciwgbVNlbCkge1xuXHRcdHZhciBwb3MsIG9mZnNldCA9IDA7XG5cblx0XHRwb3MgPSBtQ3Vyci5wb3MgLSBtU2VsLnBvcyArIGRlbHRhO1xuXHRcdGlmIChwb3MgPCAwKSB7XG5cdFx0XHRpZiAoTWF0aC5hYnMocG9zKSA8IG1TZWwub3V0ZXIpIHtcblx0XHRcdFx0b2Zmc2V0ICs9ICgtbUN1cnIuYWZ0ZXIpIC8gbVNlbC5vdXRlciAqIHBvcztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9mZnNldCArPSBtQ3Vyci5hZnRlcjtcblx0XHRcdH1cblx0XHR9IGVsc2Vcblx0XHRpZiAoMCA8PSBwb3MpIHtcblx0XHRcdGlmIChNYXRoLmFicyhwb3MpIDwgbVNlbC5vdXRlcikge1xuXHRcdFx0XHRvZmZzZXQgLT0gbUN1cnIuYmVmb3JlIC8gbVNlbC5vdXRlciAqIHBvcztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9mZnNldCAtPSBtQ3Vyci5iZWZvcmU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBwb3MgKyBvZmZzZXQ7XG5cdH0sXG5cblx0X29uU2Nyb2xsVHJhbnNpdGlvbkVuZDogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAoZXYucHJvcGVydHlOYW1lID09PSB0cmFuc2Zvcm1TdHlsZU5hbWUgJiYgdGhpcy5zY3JvbGxpbmcpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiJXM6Ol9vblNjcm9sbFRyYW5zaXRpb25FbmQgc2VsZWN0ZWQ6ICVzXCIsIHRoaXMuY2lkLCBldi50YXJnZXQuY2lkKTtcblx0XHRcdHRoaXMuX3NldFNjcm9sbGluZyhmYWxzZSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHRvZ2dsZSB0b3VjaCBldmVudHNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X3RvZ2dsZVBvaW50ZXJFdmVudHM6IGZ1bmN0aW9uKGVuYWJsZSkge1xuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6Ol90b2dnbGVQb2ludGVyRXZlbnRzXCIsIHRoaXMuY2lkLCBlbmFibGUpO1xuXHRcdGlmICh0aGlzLl9wb2ludGVyRXZlbnRzRW5hYmxlZCA9PSBlbmFibGUpIHJldHVybjtcblxuXHRcdHRoaXMuX3BvaW50ZXJFdmVudHNFbmFibGVkID0gZW5hYmxlO1xuXHRcdGlmIChlbmFibGUpIHtcblx0XHRcdHRoaXMudG91Y2gub24oXCJocGFuc3RhcnQgaHBhbm1vdmUgaHBhbmVuZCBocGFuY2FuY2VsXCIsIHRoaXMuX29uUG9pbnRlckV2ZW50KTtcblx0XHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihWaWV3LkNMSUNLX0VWRU5ULCB0aGlzLl9vbkNsaWNrLCB0cnVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50b3VjaC5vZmYoXCJocGFuc3RhcnQgaHBhbm1vdmUgaHBhbmVuZCBocGFuY2FuY2VsXCIsIHRoaXMuX29uUG9pbnRlckV2ZW50KTtcblx0XHRcdHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihWaWV3LkNMSUNLX0VWRU5ULCB0aGlzLl9vbkNsaWNrLCB0cnVlKTtcblx0XHR9XG5cdH0sXG5cblx0X29uUG9pbnRlckV2ZW50OiBmdW5jdGlvbihldikge1xuXHRcdC8vIE5PVEU6IGh0dHBzOi8vZ2l0aHViLmNvbS9oYW1tZXJqcy9oYW1tZXIuanMvcHVsbC8xMTE4XG5cdFx0aWYgKGV2LnNyY0V2ZW50LnR5cGUgPT09ICdwb2ludGVyY2FuY2VsJylcblx0XHRcdHJldHVybjtcblxuXHRcdGNvbnNvbGUubG9nKFwiJXM6WyVzICglcyldOl9vblBvaW50ZXJFdmVudCBvZmZzOiVzIFslc3wlcz09JXNdIFslc11cIiwgdGhpcy5jaWQsIGV2LnR5cGUsIGV2LnNyY0V2ZW50LnR5cGUsXG5cdFx0XHRkaXJUb1N0cihldi5vZmZzZXREaXJlY3Rpb24pLFxuXHRcdFx0ZGlyVG9TdHIoZXYuZGlyZWN0aW9uKSxcblx0XHRcdGRpclRvU3RyKHRoaXMuZGlyZWN0aW9uKSxcblx0XHRcdGRpclRvU3RyKGV2LmRpcmVjdGlvbiB8IHRoaXMuZGlyZWN0aW9uKSxcblx0XHRcdChldi5zcmNFdmVudC5kZWZhdWx0UHJldmVudGVkID8gXCJwcmV2ZW50ZWRcIiA6IFwiLVwiKSk7XG5cblx0XHQvLyBpZiAoZXYuZGlyZWN0aW9uICYgdGhpcy5kaXJlY3Rpb24pIHtcblx0XHRzd2l0Y2ggKGV2LnR5cGUpIHtcblx0XHRcdC8vIGNhc2UgVmlldy5DTElDS19FVkVOVDpcblx0XHRcdC8vIFx0cmV0dXJuIHRoaXMuX29uQ2xpY2soZXYpO1xuXHRcdFx0Ly8gY2FzZSBcInRhcFwiOlxuXHRcdFx0Ly8gXHRyZXR1cm4gdGhpcy5fb25UYXAoZXYpO1xuXHRcdFx0Y2FzZSBcImhwYW5zdGFydFwiOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fb25QYW5TdGFydChldik7XG5cdFx0XHRjYXNlIFwiaHBhbm1vdmVcIjpcblx0XHRcdFx0cmV0dXJuIHRoaXMuX29uUGFuTW92ZShldik7XG5cdFx0XHRjYXNlIFwiaHBhbmVuZFwiOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fb25QYW5GaW5hbChldik7XG5cdFx0XHRjYXNlIFwiaHBhbmNhbmNlbFwiOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fb25QYW5GaW5hbChldik7XG5cdFx0fVxuXHRcdC8vIH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiB0b3VjaCBldmVudDogcGFuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdGdldFZpZXdBdFBhbkRpcjogZnVuY3Rpb24oZGlyKSB7XG5cdFx0Ly8gcmV0dXJuIChkaXIgJiB0aGlzLl9wcmVjZWRpbmdEaXIpID8gdGhpcy5fcHJlY2VkaW5nVmlldyA6IHRoaXMuX2ZvbGxvd2luZ1ZpZXc7XG5cdFx0cmV0dXJuIChkaXIgJiB0aGlzLl9mb2xsb3dpbmdEaXIpID8gdGhpcy5fcHJlY2VkaW5nVmlldyA6IHRoaXMuX2ZvbGxvd2luZ1ZpZXc7XG5cdH0sXG5cblx0Ly8gX3BhbkNhcHR1cmVkT2Zmc2V0OiAwLFxuXG5cdC8qKiBAcGFyYW0ge09iamVjdH0gZXYgKi9cblx0X29uUGFuU3RhcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dGhpcy5zZWxlY3RGcm9tVmlldygpO1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZChcInBhbm5pbmdcIik7XG5cdFx0dGhpcy5fc2V0U2Nyb2xsaW5nKHRydWUpO1xuXHR9LFxuXG5cdC8qKiBAcGFyYW0ge09iamVjdH0gZXYgKi9cblx0X29uUGFuTW92ZTogZnVuY3Rpb24oZXYpIHtcblx0XHQvLyB2YXIgZGVsdGEgPSAodGhpcy5kaXJlY3Rpb24gJiBIT1JJWk9OVEFMKSA/IGV2LnRocmVzaG9sZERlbHRhWCA6IGV2LnRocmVzaG9sZERlbHRhWTtcblx0XHR2YXIgZGVsdGEgPSAodGhpcy5kaXJlY3Rpb24gJiBIT1JJWk9OVEFMKSA/IGV2LmRlbHRhWCA6IGV2LmRlbHRhWTtcblx0XHR2YXIgdmlldyA9IHRoaXMuZ2V0Vmlld0F0UGFuRGlyKGV2Lm9mZnNldERpcmVjdGlvbik7XG5cdFx0dmFyIGNWaWV3ID0gdGhpcy5fcGFuQ2FuZGlkYXRlVmlldztcblxuXHRcdGlmIChjVmlldyAhPT0gdmlldykge1xuXHRcdFx0Y1ZpZXcgJiYgY1ZpZXcuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNhbmRpZGF0ZVwiKTtcblx0XHRcdHZpZXcgJiYgdmlldy5lbC5jbGFzc0xpc3QuYWRkKFwiY2FuZGlkYXRlXCIpO1xuXHRcdFx0dGhpcy5fcGFuQ2FuZGlkYXRlVmlldyA9IHZpZXc7XG5cdFx0fVxuXHRcdGlmIChjVmlldyA9PT0gKHZvaWQgMCkpIHtcblx0XHRcdGRlbHRhICo9IEdsb2JhbHMuSFBBTl9PVVRfRFJBRztcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fcmVuZGVyUmFmSWQgIT09IC0xKSB7XG5cdFx0XHR0aGlzLnNjcm9sbEJ5KGRlbHRhLCBDYXJvdXNlbC5JTU1FRElBVEUpO1xuXHRcdFx0dGhpcy5yZW5kZXJOb3coKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fc2Nyb2xsQnkoZGVsdGEsIENhcm91c2VsLklNTUVESUFURSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKiBAcGFyYW0ge09iamVjdH0gZXYgKi9cblx0X29uUGFuRmluYWw6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0dmFyIHNjcm9sbENhbmRpZGF0ZTtcblx0XHQvLyBOT1RFOiB0aGlzIGRlbHRhIGlzIHVzZWQgZm9yIGRldGVybWluaW5nIHNlbGVjdGlvbiwgTk9UIGZvciBsYXlvdXRcblx0XHQvLyB2YXIgZGVsdGEgPSAodGhpcy5kaXJlY3Rpb24gJiBIT1JJWk9OVEFMKSA/IGV2LnRocmVzaG9sZERlbHRhWCA6IGV2LnRocmVzaG9sZERlbHRhWTtcblx0XHR2YXIgZGVsdGEgPSAodGhpcy5kaXJlY3Rpb24gJiBIT1JJWk9OVEFMKSA/IGV2LmRlbHRhWCA6IGV2LmRlbHRhWTtcblxuXHRcdGlmICgoZXYudHlwZSA9PSBcImhwYW5lbmRcIilcblx0XHRcdC8qIHBhbiBkaXJlY3Rpb24gKGN1cnJlbnQgZXZlbnQpIGFuZCBvZmZzZXREaXJlY3Rpb24gKHdob2xlIGdlc3R1cmUpIG11c3QgbWF0Y2ggKi9cblx0XHRcdCYmIChldi5kaXJlY3Rpb24gXiBldi5vZmZzZXREaXJlY3Rpb24gXiB0aGlzLmRpcmVjdGlvbilcblx0XHRcdC8vICYmIChldi5kaXJlY3Rpb24gJiBldi5vZmZzZXREaXJlY3Rpb24gJiB0aGlzLmRpcmVjdGlvbilcblx0XHRcdC8qIGdlc3R1cmUgbXVzdCBvdmVyc2hvb3Qgc2VsZWN0VGhyZXNob2xkICovXG5cdFx0XHQmJiAoTWF0aC5hYnMoZGVsdGEpID4gdGhpcy5zZWxlY3RUaHJlc2hvbGQpKSB7XG5cdFx0XHQvKiBjaG9vc2UgbmV4dCBzY3JvbGwgdGFyZ2V0ICovXG5cdFx0XHRzY3JvbGxDYW5kaWRhdGUgPSB0aGlzLmdldFZpZXdBdFBhbkRpcihldi5vZmZzZXREaXJlY3Rpb24pO1xuXHRcdH1cblx0XHR0aGlzLl9zY3JvbGxDYW5kaWRhdGVWaWV3ID0gc2Nyb2xsQ2FuZGlkYXRlIHx8ICh2b2lkIDApO1xuXG5cdFx0aWYgKHRoaXMuX3BhbkNhbmRpZGF0ZVZpZXcgJiYgKHRoaXMuX3BhbkNhbmRpZGF0ZVZpZXcgIT09IHNjcm9sbENhbmRpZGF0ZSkpIHtcblx0XHRcdHRoaXMuX3BhbkNhbmRpZGF0ZVZpZXcuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNhbmRpZGF0ZVwiKTtcblx0XHR9XG5cdFx0dGhpcy5fcGFuQ2FuZGlkYXRlVmlldyA9ICh2b2lkIDApO1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcInBhbm5pbmdcIik7XG5cblx0XHRjb25zb2xlLmxvZyhcIiVzOlslc106X29uUGFuRmluYWwgdGhyZXM6KCVzPiVzKSBkaXI6KGU6JXMgbzolcyBjOiVzKT0lc1xcblwiLCB0aGlzLmNpZCwgZXYudHlwZSxcblx0XHRcdE1hdGguYWJzKGRlbHRhKSwgdGhpcy5zZWxlY3RUaHJlc2hvbGQsXG5cdFx0XHRkaXJUb1N0cihldi5kaXJlY3Rpb24pLFxuXHRcdFx0ZGlyVG9TdHIoZXYub2Zmc2V0RGlyZWN0aW9uKSxcblx0XHRcdGRpclRvU3RyKHRoaXMuZGlyZWN0aW9uKSxcblx0XHRcdGRpclRvU3RyKGV2LmRpcmVjdGlvbiBeIGV2Lm9mZnNldERpcmVjdGlvbiBeIHRoaXMuZGlyZWN0aW9uKSxcblx0XHRcdHNjcm9sbENhbmRpZGF0ZSA/IChzY3JvbGxDYW5kaWRhdGUuY2lkICsgXCI6XCIgKyBzY3JvbGxDYW5kaWRhdGUubW9kZWwuY2lkKSA6IFwibm9uZVwiKTtcblx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjpfb25QYW5GaW5hbFwiLCB0aGlzLmNpZCwgZXYpO1xuXG5cdFx0dGhpcy5zY3JvbGxCeSgwLCBDYXJvdXNlbC5BTklNQVRFRCk7XG5cdFx0dGhpcy5zZWxlY3RGcm9tVmlldygpO1xuXG5cdFx0Ly8gaWYgKHRoaXMuX3JlbmRlclJhZklkICE9PSAtMSkge1xuXHRcdC8vIFx0dGhpcy5zY3JvbGxCeSgwLCBDYXJvdXNlbC5BTklNQVRFRCk7XG5cdFx0Ly8gXHR0aGlzLnJlbmRlck5vdygpO1xuXHRcdC8vIH0gZWxzZSB7XG5cdFx0Ly8gXHR0aGlzLl9zY3JvbGxCeSgwLCBDYXJvdXNlbC5BTklNQVRFRCk7XG5cdFx0Ly8gfVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHRvdWNoIGV2ZW50OiB0YXBcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEB0eXBlIHtpbnR9IEluIHBpeGVscyAqL1xuXHRfdGFwR3JvdzogMTAsXG5cblx0Z2V0Vmlld0F0VGFwUG9zOiBmdW5jdGlvbihwb3NBbG9uZywgcG9zQWNyb3NzKSB7XG5cdFx0aWYgKCh0aGlzLl90YXBBY3Jvc3NCZWZvcmUgPCBwb3NBY3Jvc3MpICYmIChwb3NBY3Jvc3MgPCB0aGlzLl90YXBBY3Jvc3NBZnRlcikpIHtcblx0XHRcdGlmIChwb3NBbG9uZyA8IHRoaXMuX3RhcEJlZm9yZSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fcHJlY2VkaW5nVmlldztcblx0XHRcdH0gZWxzZVxuXHRcdFx0aWYgKHBvc0Fsb25nID4gdGhpcy5fdGFwQWZ0ZXIpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2ZvbGxvd2luZ1ZpZXc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAodm9pZCAwKTtcblx0fSxcblxuXHRfb25DbGljazogZnVuY3Rpb24oZXYpIHtcblx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25DbGljayBbJXNdXCIsIHRoaXMuY2lkLCBldi50eXBlLCBldi5kZWZhdWx0UHJldmVudGVkID8gXCJwcmV2ZW50ZWRcIiA6IFwibm90LXByZXZlbnRlZFwiKTtcblx0XHR0aGlzLl9vblRhcChldik7XG5cdH0sXG5cblx0X29uVGFwOiBmdW5jdGlvbihldikge1xuXHRcdGlmIChldi5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cblx0XHR2YXIgdGFwQ2FuZGlkYXRlO1xuXHRcdHZhciB0YXJnZXRWaWV3ID0gVmlldy5maW5kQnlEZXNjZW5kYW50KGV2LnRhcmdldCk7XG5cdFx0Ly8gY29uc29sZS5sb2coXCIlczo6X29uVGFwICVvXCIsIHRoaXMuY2lkLCB0YXJnZXRWaWV3LmNpZCwgZXYudGFyZ2V0KTtcblx0XHQvLyBpZiAoIXRoaXMuaXRlbVZpZXdzLmNvbnRhaW5zKHRhcmdldFZpZXcpKSB7XG5cdFx0Ly8gXHRyZXR1cm47XG5cdFx0Ly8gfVxuXHRcdGRvIHtcblx0XHRcdGlmICh0aGlzLl9zZWxlY3RlZFZpZXcgPT09IHRhcmdldFZpZXcpIHtcblx0XHRcdFx0dGFwQ2FuZGlkYXRlID0gbnVsbDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMgPT09IHRhcmdldFZpZXcucGFyZW50Vmlldykge1xuXHRcdFx0XHR0YXBDYW5kaWRhdGUgPSB0YXJnZXRWaWV3O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH0gZWxzZSBpZiAodGhpcyA9PT0gdGFyZ2V0Vmlldykge1xuXHRcdFx0XHR2YXIgYm91bmRzLCB0YXBYLCB0YXBZO1xuXHRcdFx0XHRib3VuZHMgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHR0YXBYID0gKGV2LnR5cGUgPT09IFwidGFwXCIgPyBldi5jZW50ZXIueCA6IGV2LmNsaWVudFgpIC0gYm91bmRzLmxlZnQ7XG5cdFx0XHRcdHRhcFkgPSAoZXYudHlwZSA9PT0gXCJ0YXBcIiA/IGV2LmNlbnRlci55IDogZXYuY2xpZW50WSkgLSBib3VuZHMudG9wO1xuXHRcdFx0XHR0YXBDYW5kaWRhdGUgPSB0aGlzLmdldFZpZXdBdFRhcFBvcyhcblx0XHRcdFx0XHR0aGlzLmRpclByb3AodGFwWCwgdGFwWSksXG5cdFx0XHRcdFx0dGhpcy5kaXJQcm9wKHRhcFksIHRhcFgpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0gd2hpbGUgKCh0YXJnZXRWaWV3ID0gdGFyZ2V0Vmlldy5wYXJlbnRWaWV3KSlcblxuXHRcdGlmICh0YXBDYW5kaWRhdGUpIHtcblx0XHRcdGV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHQvLyBldi5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0Ly8gdGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldyA9IHRhcENhbmRpZGF0ZTtcblx0XHRcdC8vIHRoaXMuX3NldFNjcm9sbGluZyh0cnVlKTtcblx0XHRcdC8vIHRoaXMuc2Nyb2xsQnkoMCwgQ2Fyb3VzZWwuQU5JTUFURUQpO1xuXHRcdFx0Ly8gdGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldy5lbC5jbGFzc0xpc3QuYWRkKFwiY2FuZGlkYXRlXCIpO1xuXHRcdFx0Ly8gdGhpcy5zZWxlY3RGcm9tVmlldygpO1xuXG5cdFx0XHQvLy8vIE5PVCB1c2luZyBpbnRlcm5hbFNlbGVjdGlvblxuXHRcdFx0Ly8gdGhpcy50cmlnZ2VyU2VsZWN0aW9uRXZlbnRzKHRhcENhbmRpZGF0ZSwgZmFsc2UpO1xuXG5cdFx0XHQvLyB1c2luZyBpbnRlcm5hbFNlbGVjdGlvblxuXHRcdFx0dGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldyA9IHRhcENhbmRpZGF0ZTtcblx0XHRcdHRoaXMuX3NldFNjcm9sbGluZyh0cnVlKTtcblx0XHRcdHRoaXMuc2Nyb2xsQnkoMCwgQ2Fyb3VzZWwuQU5JTUFURUQpO1xuXG5cdFx0XHR0aGlzLnRyaWdnZXJTZWxlY3Rpb25FdmVudHModGFwQ2FuZGlkYXRlLCB0cnVlKTtcblx0XHRcdC8vIHRoaXMucmVuZGVyTm93KCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIFByaXZhdGVcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0dHJpZ2dlclNlbGVjdGlvbkV2ZW50czogZnVuY3Rpb24odmlldywgaW50ZXJuYWwpIHtcblx0XHRpZiAodmlldyA9PT0gKHZvaWQgMCkgfHwgdGhpcy5faW50ZXJuYWxTZWxlY3Rpb24pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLl9pbnRlcm5hbFNlbGVjdGlvbiA9ICEhaW50ZXJuYWw7XG5cdFx0aWYgKHZpZXcgPT09IHRoaXMuZW1wdHlWaWV3KSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoXCJ2aWV3OnNlbGVjdDpub25lXCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoXCJ2aWV3OnNlbGVjdDpvbmVcIiwgdmlldy5tb2RlbCk7XG5cdFx0fVxuXHRcdHRoaXMuX2ludGVybmFsU2VsZWN0aW9uID0gZmFsc2U7XG5cdH0sXG5cblx0c2VsZWN0RnJvbVZpZXc6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl9zY3JvbGxDYW5kaWRhdGVWaWV3KSB7XG5cdFx0XHR0aGlzLnRyaWdnZXJTZWxlY3Rpb25FdmVudHModGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldywgdHJ1ZSk7XG5cdFx0fVxuXHRcdC8vIGlmICh0aGlzLl9zY3JvbGxDYW5kaWRhdGVWaWV3ID09PSAodm9pZCAwKSkge1xuXHRcdC8vIFx0cmV0dXJuO1xuXHRcdC8vIH1cblx0XHQvLyB2YXIgdmlldyA9IHRoaXMuX3Njcm9sbENhbmRpZGF0ZVZpZXc7XG5cdFx0Ly8gdGhpcy50cmlnZ2VyU2VsZWN0aW9uRXZlbnRzKHZpZXcsIHRydWUpO1xuXHR9LFxuXG5cdGFkanVzdFRvU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgbSwgaSA9IHRoaXMuY29sbGVjdGlvbi5zZWxlY3RlZEluZGV4O1xuXHRcdC8vIGFzc3VtZSAtMSA8IGluZGV4IDwgdGhpcy5jb2xsZWN0aW9uLmxlbmd0aFxuXHRcdGlmICh0aGlzLnJlcXVpcmVTZWxlY3Rpb24pIHtcblx0XHRcdChpID09IC0xKSAmJiBpKys7IC8vIGlmIHNlbGVjdGlvbiBpcyBudWxsIChpbmRleCAtMSksIHNldCBfc2VsZWN0ZWRWaWV3IHRvIGZpcnN0IGl0ZW0gKGluZGV4IDApXG5cdFx0XHR0aGlzLl9zZWxlY3RlZFZpZXcgPSAobSA9IHRoaXMuY29sbGVjdGlvbi5hdChpKSkgJiYgdGhpcy5pdGVtVmlld3MuZmluZEJ5TW9kZWwobSk7XG5cdFx0XHR0aGlzLl9wcmVjZWRpbmdWaWV3ID0gKG0gPSB0aGlzLmNvbGxlY3Rpb24uYXQoaSAtIDEpKSAmJiB0aGlzLml0ZW1WaWV3cy5maW5kQnlNb2RlbChtKTtcblx0XHRcdHRoaXMuX2ZvbGxvd2luZ1ZpZXcgPSAobSA9IHRoaXMuY29sbGVjdGlvbi5hdChpICsgMSkpICYmIHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKG0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9zZWxlY3RlZFZpZXcgPSAobSA9IHRoaXMuY29sbGVjdGlvbi5hdChpKSkgPyB0aGlzLml0ZW1WaWV3cy5maW5kQnlNb2RlbChtKSA6IHRoaXMuZW1wdHlWaWV3O1xuXHRcdFx0dGhpcy5fcHJlY2VkaW5nVmlldyA9IG0gJiYgKChtID0gdGhpcy5jb2xsZWN0aW9uLmF0KGkgLSAxKSkgPyB0aGlzLml0ZW1WaWV3cy5maW5kQnlNb2RlbChtKSA6IHRoaXMuZW1wdHlWaWV3KTtcblx0XHRcdHRoaXMuX2ZvbGxvd2luZ1ZpZXcgPSAobSA9IHRoaXMuY29sbGVjdGlvbi5hdChpICsgMSkpICYmIHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKG0pO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBNb2RlbCBsaXN0ZW5lcnNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBwcml2YXRlICovXG5cdF9vblNlbGVjdE9uZTogZnVuY3Rpb24obW9kZWwpIHtcblx0XHRpZiAobW9kZWwgPT09IHRoaXMuX3NlbGVjdGVkVmlldy5tb2RlbCkge1xuXHRcdFx0Ly8gY29uc29sZS5pbmZvKFwiSU5URVJOQUxcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX29uU2VsZWN0QW55KG1vZGVsKTtcblx0fSxcblxuXHQvKiogQHByaXZhdGUgKi9cblx0X29uU2VsZWN0Tm9uZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCh0aGlzLnJlcXVpcmVTZWxlY3Rpb24gPyB0aGlzLml0ZW1WaWV3cy5maXJzdCgpIDogdGhpcy5lbXB0eVZpZXcpID09PSB0aGlzLl9zZWxlY3RlZFZpZXcpIHtcblx0XHRcdC8vIGNvbnNvbGUuaW5mbyhcIklOVEVSTkFMXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9vblNlbGVjdEFueSgpO1xuXHR9LFxuXG5cdC8qKiBAcHJpdmF0ZSAqL1xuXHRfb25TZWxlY3RBbnk6IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdFx0dGhpcy5fc2VsZWN0ZWRWaWV3LmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcblx0XHR0aGlzLmFkanVzdFRvU2VsZWN0aW9uKCk7XG5cdFx0dGhpcy5fc2VsZWN0ZWRWaWV3LmVsLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcblx0XHRpZiAodGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldykge1xuXHRcdFx0dGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FuZGlkYXRlXCIpO1xuXHRcdFx0dGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldyA9ICh2b2lkIDApO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5faW50ZXJuYWxTZWxlY3Rpb24pIHtcblx0XHRcdHRoaXMuX3NldFNjcm9sbGluZyh0cnVlKTtcblx0XHRcdHRoaXMuc2Nyb2xsQnkoMCwgQ2Fyb3VzZWwuQU5JTUFURUQpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBfb25EZXNlbGVjdEFueTogZnVuY3Rpb24gKG1vZGVsKSB7fSxcblxuXHQvKiogQHByaXZhdGUgKi9cblx0X29uUmVzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoaXMuX2NyZWF0ZUNoaWxkcmVuKCk7XG5cdFx0Ly8gdGhpcy5pbnZhbGlkYXRlQ2hpbGRyZW4oKTtcblx0XHR0aGlzLnJlcXVlc3RSZW5kZXIoVmlldy5DSElMRFJFTl9JTlZBTElEIHwgVmlldy5NT0RFTF9JTlZBTElEKTtcblx0fSxcblxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIFRFTVBcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gX3Njcm9sbEJ5MjogZnVuY3Rpb24gKGRlbHRhLCBza2lwVHJhbnNpdGlvbnMpIHtcblx0Ly8gXHR2YXIgbWV0cmljcywgcG9zO1xuXHQvLyBcdHZhciBzTWV0cmljcyA9IHRoaXMubWV0cmljc1sodGhpcy5fc2Nyb2xsQ2FuZGlkYXRlVmlldyB8fCB0aGlzLl9zZWxlY3RlZFZpZXcpLmNpZF07XG5cdC8vIFx0dmFyIGNNZXRyaWNzID0gdGhpcy5tZXRyaWNzWyh0aGlzLl9wYW5DYW5kaWRhdGVWaWV3IHx8IHRoaXMuX3NlbGVjdGVkVmlldykuY2lkXTtcblx0Ly9cblx0Ly8gXHR0aGlzLml0ZW1WaWV3cy5lYWNoKGZ1bmN0aW9uICh2aWV3KSB7XG5cdC8vIFx0XHRtZXRyaWNzID0gdGhpcy5tZXRyaWNzW3ZpZXcuY2lkXTtcblx0Ly8gXHRcdHBvcyA9IE1hdGguZmxvb3IodGhpcy5fZ2V0U2Nyb2xsT2Zmc2V0KGRlbHRhLCBtZXRyaWNzLCBzTWV0cmljcywgY01ldHJpY3MpKTtcblx0Ly8gXHRcdHZpZXcuZWwuc3R5bGVbdHJhbnNmb3JtUHJvcGVydHldID0gKHRoaXMuZGlyZWN0aW9uICYgSE9SSVpPTlRBTCk/XG5cdC8vIFx0XHRcdFx0XCJ0cmFuc2xhdGUzZChcIiArIHBvcyArIFwicHgsMCwwKVwiIDogXCJ0cmFuc2xhdGUzZCgwLFwiICsgcG9zICsgXCJweCwwKVwiO1xuXHQvLyBcdFx0XHRcdC8vIFwidHJhbnNsYXRlKFwiICsgcG9zICsgXCJweCwwKVwiIDogXCJ0cmFuc2xhdGUoMCxcIiArIHBvcyArIFwicHgpXCI7XG5cdC8vIFx0XHRcdFx0Ly8gXCJ0cmFuc2xhdGVYKFwiICsgcG9zICsgXCJweClcIiA6IFwidHJhbnNsYXRlWShcIiArIHBvcyArIFwicHgpXCI7XG5cdC8vIFx0fSwgdGhpcyk7XG5cdC8vIFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwic2tpcC10cmFuc2l0aW9uc1wiLCBza2lwVHJhbnNpdGlvbnMpO1xuXHQvLyBcdHRoaXMuc2VsZWN0RnJvbVZpZXcoKTtcblx0Ly8gfSxcblxuXHQvLyBfZ2V0U2Nyb2xsT2Zmc2V0MjogZnVuY3Rpb24gKGRlbHRhLCBtQ3VyciwgbVNlbCwgbUNhbikge1xuXHQvLyBcdHZhciBvZmZzZXQgPSAwO1xuXHQvLyBcdHZhciBwb3NJbm5lciA9IG1DdXJyLnBvc0lubmVyIC0gbVNlbC5wb3NJbm5lciArIGRlbHRhO1xuXHQvL1xuXHQvLyBcdGlmIChwb3NJbm5lciA8IC1tU2VsLmlubmVyKSB7XG5cdC8vIFx0XHRvZmZzZXQgPSAtKG1DdXJyLmJlZm9yZSk7XG5cdC8vIFx0fSBlbHNlIGlmIChwb3NJbm5lciA+IG1TZWwuaW5uZXIpIHtcblx0Ly8gXHRcdG9mZnNldCA9IChtU2VsLmFmdGVyKTtcblx0Ly8gXHR9IGVsc2Uge1xuXHQvLyBcdFx0aWYgKHBvc0lubmVyIDwgMCkge1xuXHQvLyBcdFx0XHRvZmZzZXQgPSAobUN1cnIuYmVmb3JlKSAvIChtQ3Vyci5pbm5lcikgKiBwb3NJbm5lcjtcblx0Ly8gXHRcdH0gZWxzZSB7XG5cdC8vIFx0XHRcdG9mZnNldCA9IChtU2VsLmFmdGVyKSAvIChtQ2FuLmlubmVyKSAqIHBvc0lubmVyO1xuXHQvLyBcdFx0fVxuXHQvLyBcdH1cblx0Ly8gXHRyZXR1cm4gcG9zSW5uZXIgKyBvZmZzZXQ7XG5cdC8vIH0sXG5cblx0Ly8gY2FwdHVyZVNlbGVjdGVkT2Zmc2V0OiBmdW5jdGlvbigpIHtcblx0Ly8gXHR2YXIgdmFsLCB2aWV3LCBjc3N2YWwsIG0sIG1tO1xuXHQvL1xuXHQvLyBcdHZhbCA9IDA7XG5cdC8vIFx0dmlldyA9IHRoaXMuX3Njcm9sbENhbmRpZGF0ZVZpZXcgfHwgdGhpcy5fc2VsZWN0ZWRWaWV3O1xuXHQvLyBcdGNzc3ZhbCA9IGdldENvbXB1dGVkU3R5bGUodmlldy5lbClbdHJhbnNmb3JtUHJvcGVydHldO1xuXHQvL1xuXHQvLyBcdG1tID0gY3NzdmFsLm1hdGNoKC8obWF0cml4fG1hdHJpeDNkKVxcKChbXlxcKV0rKVxcKS8pO1xuXHQvLyBcdGlmIChtbSkge1xuXHQvLyBcdFx0bSA9IG1tWzJdLnNwbGl0KFwiLFwiKTtcblx0Ly8gXHRcdGlmICh0aGlzLmRpcmVjdGlvbiAmIEhPUklaT05UQUwpIHtcblx0Ly8gXHRcdFx0dmFsID0gbVttbVsxXT09XCJtYXRyaXhcIj8gNCA6IDEyXTtcblx0Ly8gXHRcdH0gZWxzZSB7XG5cdC8vIFx0XHRcdHZhbCA9IG1bbW1bMV09PVwibWF0cml4XCI/IDUgOiAxM107XG5cdC8vIFx0XHR9XG5cdC8vIFx0XHR2YWwgPSBwYXJzZUZsb2F0KHZhbCk7XG5cdC8vIFx0fVxuXHQvL1xuXHQvLyBcdGNvbnNvbGUubG9nKFwiJXM6OmNhcHR1cmVTZWxlY3RlZE9mZnNldFwiLCB0aGlzLmNpZCwgY3NzdmFsLCB2YWwsIGNzc3ZhbC5tYXRjaCgvbWF0cml4XFwoKD86XFxkXFwsKXszfShcXGQpXFwsKFxcZCl8bWF0cml4M2RcXCgoPzpcXGRcXCwpezExfShcXGQpXFwsKFxcZCkvKSk7XG5cdC8vXG5cdC8vIFx0cmV0dXJuIHZhbDtcblx0Ly8gfSxcblxuXHQvLyBfb25TY3JvbGxFbmQ6IGZ1bmN0aW9uKGV4ZWMpIHtcblx0Ly8gXHR0aGlzLl9zY3JvbGxFbmRDYW5jZWxsYWJsZSA9ICh2b2lkIDApO1xuXHQvLyBcdC8vIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkLWNoYW5naW5nXCIpO1xuXHQvLyBcdGlmIChleGVjKSB7XG5cdC8vIFx0XHR0aGlzLl9zZXRTY3JvbGxpbmcoZmFsc2UpO1xuXHQvLyBcdFx0Ly8gdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwic2Nyb2xsaW5nXCIpO1xuXHQvLyBcdFx0Ly8gdGhpcy50cmlnZ2VyKFwidmlldzpzY3JvbGxlbmRcIik7XG5cdC8vIFx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25TY3JvbGxFbmRcIiwgdGhpcy5jaWQpO1xuXHQvLyBcdH1cblx0Ly8gfSxcblx0Ly8gX29uTW91c2VEb3duOiBmdW5jdGlvbihldikge1xuXHQvLyBcdGlmICh0aGlzLl9zY3JvbGxpbmcpIHtcblx0Ly8gXHRcdHRoaXMuX3BhbkNhcHR1cmVkT2Zmc2V0ID0gdGhpcy5jYXB0dXJlU2VsZWN0ZWRPZmZzZXQoKTtcblx0Ly8gXHRcdGNvbnNvbGUubG9nKFwiJXM6OmV2ZW50c1ttb3VzZWRvd25dIHNjcm9sbGluZyBpbnRlcnJ1cHRlZCAocG9zICVmKVwiLCB0aGlzLmNpZCwgdGhpcy5fcGFuQ2FwdHVyZWRPZmZzZXQpO1xuXHQvLyBcdH1cblx0Ly8gfSxcblx0Ly8gX29uTW91c2VVcDpmdW5jdGlvbihldikge1xuXHQvLyBcdHRoaXMuX3BhbkNhcHR1cmVkT2Zmc2V0ID0gMDtcblx0Ly8gfSxcblxufTtcblxuaWYgKERFQlVHKSB7XG5cdENhcm91c2VsUHJvdG8uX2xvZ0ZsYWdzID0gXCJcIjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDYXJvdXNlbCA9IFZpZXcuZXh0ZW5kKENhcm91c2VsUHJvdG8sIENhcm91c2VsKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBoZWxwZXI7XG5cbiAgcmV0dXJuIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMuaWQgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSkse1wibmFtZVwiOlwiaWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSk7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L2NvbXBvbmVudC9Db2xsZWN0aW9uU3RhY2tcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXd9ICovXG5jb25zdCBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld1wiKTtcblxuLyoqIEB0eXBlIHtzdHJpbmd9ICovXG5jb25zdCB2aWV3VGVtcGxhdGUgPSByZXF1aXJlKFwiLi9Db2xsZWN0aW9uU3RhY2suaGJzXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvY29tcG9uZW50L0NvbGxlY3Rpb25TdGFja31cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBWaWV3LmV4dGVuZCh7XG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjaWRQcmVmaXg6IFwic3RhY2tcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0YWdOYW1lOiBcImRpdlwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJzdGFja1wiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdHRlbXBsYXRlOiB2aWV3VGVtcGxhdGUsXG5cblx0ZXZlbnRzOiB7XG5cdFx0XCJ0cmFuc2l0aW9uZW5kXCI6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjp0cmFuc2l0aW9uZW5kIFtpbnZhbGlkOiAlc10gW3RyYW5zaXRpb246ICVzXVwiLCB0aGlzLmNpZCwgdGhpcy5fY29udGVudEludmFsaWQsICh0aGlzLl9za2lwVHJhbnNpdGlvbnM/IFwic2tpcFwiOiBcInJ1blwiKSwgZXYudGFyZ2V0LmlkLCBldi50YXJnZXQuY2xhc3NOYW1lKTtcblx0XHRcdHRoaXMuX3JlbmRlckNvbnRlbnQoKTtcblx0XHR9XG5cdH0sXG5cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHRoaXMuX2VuYWJsZWQgPSB0cnVlO1xuXHRcdHRoaXMuX3NraXBUcmFuc2l0aW9ucyA9IHRydWU7XG5cdFx0dGhpcy5fY29udGVudEludmFsaWQgPSB0cnVlO1xuXG5cdFx0b3B0aW9ucy50ZW1wbGF0ZSAmJiAodGhpcy50ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGUpO1xuXHRcdHRoaXMuY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0dGhpcy5jb250ZW50LmNsYXNzTmFtZSA9IFwic3RhY2staXRlbVwiO1xuXHRcdHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcblxuXHRcdHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCBcInNlbGVjdDpvbmUgc2VsZWN0Om5vbmVcIiwgdGhpcy5fb25TZWxlY3RDaGFuZ2UpO1xuXHR9LFxuXG5cdHNldEVuYWJsZWQ6IGZ1bmN0aW9uKGVuYWJsZWQpIHtcblx0XHRpZiAodGhpcy5fZW5hYmxlZCAhPT0gZW5hYmxlZCkge1xuXHRcdFx0dGhpcy5fZW5hYmxlZCA9IGVuYWJsZWQ7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCAhdGhpcy5fZW5hYmxlZCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9vblNlbGVjdENoYW5nZTogZnVuY3Rpb24oaXRlbSkge1xuXHRcdGlmICh0aGlzLl9yZW5kZXJlZEl0ZW0gPT09IHRoaXMuY29sbGVjdGlvbi5zZWxlY3RlZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiY2hhbmdlIGV2ZW50IHJlY2VpdmVkIGJ1dCBpdGVtIGlzIGlkZW50aWNhbFwiKTtcblx0XHR9XG5cdFx0dGhpcy5fcmVuZGVyZWRJdGVtID0gdGhpcy5jb2xsZWN0aW9uLnNlbGVjdGVkO1xuXG5cdFx0dGhpcy5fY29udGVudEludmFsaWQgPSB0cnVlO1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogcmVuZGVyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuX3NraXBUcmFuc2l0aW9ucykge1xuXHRcdFx0Ly8gZXhlY3V0ZSBldmVuIGlmIGNvbnRlbnQgaGFzIG5vdCBjaGFuZ2VkIHRvIGFwcGx5IHN0eWxlcyBpbW1lZGlhdGVseVxuXHRcdFx0dGhpcy5fc2tpcFRyYW5zaXRpb25zID0gZmFsc2U7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJza2lwLXRyYW5zaXRpb25zXCIpO1xuXHRcdFx0dGhpcy5zZXRJbW1lZGlhdGUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcInNraXAtdHJhbnNpdGlvbnNcIik7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gcmVuZGVyIGNoYW5nZWQgY29udGVudCBpbW1lZGlhdGVseVxuXHRcdFx0aWYgKHRoaXMuX2NvbnRlbnRJbnZhbGlkKSB7XG5cdFx0XHRcdHRoaXMuX3JlbmRlckNvbnRlbnQoKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZWxzZSByZW1vdmUgJ2N1cnJlbnQnIGNsYXNzIGFuZCByZW5kZXIgb24gdHJhbnNpdGlvbmVuZFxuXHRcdFx0aWYgKHRoaXMuX2NvbnRlbnRJbnZhbGlkKSB7XG5cdFx0XHRcdHRoaXMuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY3VycmVudFwiKTtcblx0XHRcdFx0Ly8gdGhpcy5jb250ZW50LmNsYXNzTmFtZSA9IFwic3RhY2staXRlbVwiO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRfcmVuZGVyQ29udGVudDogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuX2NvbnRlbnRJbnZhbGlkKSB7XG5cdFx0XHR0aGlzLl9jb250ZW50SW52YWxpZCA9IGZhbHNlO1xuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzLmNvbGxlY3Rpb24uc2VsZWN0ZWQ7XG5cdFx0XHR0aGlzLmNvbnRlbnQuaW5uZXJIVE1MID0gaXRlbSA/IHRoaXMudGVtcGxhdGUoaXRlbS50b0pTT04oKSkgOiBcIlwiO1xuXHRcdFx0dGhpcy5jb250ZW50LmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50XCIpO1xuXHRcdFx0Ly8gdGhpcy5jb250ZW50LmNsYXNzTmFtZSA9IFwic3RhY2staXRlbSBjdXJyZW50XCI7XG5cdFx0fVxuXHR9LFxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuLyogQG1vZHVsZSBhcHAvdmlldy9jb21wb25lbnQvRmlsdGVyYWJsZUxpc3RWaWV3XG4vKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmUuYmFieXNpdHRlcn0gKi9cbmNvbnN0IENvbnRhaW5lciA9IHJlcXVpcmUoXCJiYWNrYm9uZS5iYWJ5c2l0dGVyXCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXd9ICovXG5jb25zdCBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9DbGlja2FibGVSZW5kZXJlcn0gKi9cbmNvbnN0IENsaWNrYWJsZVJlbmRlcmVyID0gcmVxdWlyZShcImFwcC92aWV3L3JlbmRlci9DbGlja2FibGVSZW5kZXJlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkUHJvcGVydHl9ICovXG5jb25zdCBwcmVmaXhlZFByb3BlcnR5ID0gcmVxdWlyZShcInV0aWxzL3ByZWZpeGVkUHJvcGVydHlcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9jc3MvZ2V0Qm94RWRnZVN0eWxlc30gKi9cbmNvbnN0IGdldEJveEVkZ2VTdHlsZXMgPSByZXF1aXJlKFwidXRpbHMvY3NzL2dldEJveEVkZ2VTdHlsZXNcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9hcnJheS9kaWZmZXJlbmNlfSAqL1xuY29uc3QgZGlmZiA9IHJlcXVpcmUoXCJ1dGlscy9hcnJheS9kaWZmZXJlbmNlXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvcHJvbWlzZS9yZXNvbHZlQWxsfSAqL1xuY29uc3QgcmVzb2x2ZUFsbCA9IHJlcXVpcmUoXCJ1dGlscy9wcm9taXNlL3Jlc29sdmVBbGxcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9wcm9taXNlL3JlamVjdEFsbH0gKi9cbmNvbnN0IHJlamVjdEFsbCA9IHJlcXVpcmUoXCJ1dGlscy9wcm9taXNlL3JlamVjdEFsbFwiKTtcblxuLy8gdmFyIHJlc29sdmVBbGwgPSBmdW5jdGlvbihwcCwgcmVzdWx0KSB7XG4vLyBcdGlmIChwcC5sZW5ndGggIT0gMCkge1xuLy8gXHRcdHBwLmZvckVhY2goZnVuY3Rpb24ocCwgaSwgYSkge1xuLy8gXHRcdFx0cC5yZXNvbHZlKHJlc3VsdCk7XG4vLyBcdFx0XHRhW2ldID0gbnVsbDtcbi8vIFx0XHR9KTtcbi8vIFx0XHRwcC5sZW5ndGggPSAwO1xuLy8gXHR9XG4vLyBcdHJldHVybiBwcDtcbi8vIH07XG5cbi8vIHZhciByZWplY3RBbGwgPSBmdW5jdGlvbihwcCwgcmVhc29uKSB7XG4vLyBcdGlmIChwcC5sZW5ndGggIT0gMCkge1xuLy8gXHRcdHBwLmZvckVhY2goZnVuY3Rpb24ocCwgaSwgYSkge1xuLy8gXHRcdFx0cC5yZWplY3QocmVhc29uKTtcbi8vIFx0XHRcdGFbaV0gPSBudWxsO1xuLy8gXHRcdH0pO1xuLy8gXHRcdHBwLmxlbmd0aCA9IDA7XG4vLyBcdH1cbi8vIFx0cmV0dXJuIHBwO1xuLy8gfTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL2NvbnRyb2wvR2xvYmFscy5UUkFOU0xBVEVfVEVNUExBVEV9ICovXG5jb25zdCB0cmFuc2xhdGVDc3NWYWx1ZSA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpLlRSQU5TTEFURV9URU1QTEFURTtcblxuLyoqIEBjb25zdCAqL1xudmFyIHRyYW5zZm9ybVByb3AgPSBwcmVmaXhlZFByb3BlcnR5KFwidHJhbnNmb3JtXCIpO1xuXG4vKipcbi8qIEBjb25zdHJ1Y3RvclxuLyogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvRmlsdGVyYWJsZUxpc3RWaWV3fVxuLyovXG52YXIgRmlsdGVyYWJsZUxpc3RWaWV3ID0gVmlldy5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjaWRQcmVmaXg6IFwiZmlsdGVyYWJsZUxpc3RcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0YWdOYW1lOiBcInVsXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0Y2xhc3NOYW1lOiBcImxpc3Qgc2VsZWN0YWJsZSBmaWx0ZXJhYmxlXCIsXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRkZWZhdWx0czoge1xuXHRcdGNvbGxhcHNlZDogdHJ1ZSxcblx0XHRmaWx0ZXJGbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdHJlbmRlcmVyOiBDbGlja2FibGVSZW5kZXJlci5leHRlbmQoe1xuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0Y2lkUHJlZml4OiBcImxpc3RJdGVtXCIsXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHRjbGFzc05hbWU6IFwibGlzdC1pdGVtIGxpc3Qtbm9kZVwiLFxuXHRcdH0pLFxuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0cHJvcGVydGllczoge1xuXHRcdGNvbGxhcHNlZDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2NvbGxhcHNlZDtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdHRoaXMuX3NldENvbGxhcHNlZCh2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3RlZEl0ZW06IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9zZWxlY3RlZEl0ZW07XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0XHR0aGlzLl9zZXRTZWxlY3Rpb24odmFsdWUpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ZmlsdGVyZWRJdGVtczoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2ZpbHRlcmVkSXRlbXM7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRtZXRyaWNzOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fbWV0cmljcztcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRldmVudHM6IHtcblx0XHRcInRyYW5zaXRpb25lbmQgLmxpc3Qtbm9kZVwiOiBmdW5jdGlvbihldikge1xuXHRcdFx0Ly8gaWYgKCFldi50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1ub2RlXCIpKSB7fVxuXHRcdFx0aWYgKGV2LnByb3BlcnR5TmFtZSA9PSB0cmFuc2Zvcm1Qcm9wXG5cdFx0XHRcdCYmIGV2LnRhcmdldC5wYXJlbnRFbGVtZW50ID09PSB0aGlzLmVsKSB7XG5cdFx0XHRcdHRoaXMuX2NoYW5nZWRQb3NOdW0tLTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczpbJXMgKCVzKV0gWyVzXVwiLCB0aGlzLmNpZCwgZXYudHlwZSwgZXYudGFyZ2V0LmNsYXNzTmFtZSwgZXYucHJvcGVydHlOYW1lLCB0aGlzLl9jaGFuZ2VkUG9zTnVtLCBldik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXRoaXMuX2NvbGxhcHNlZENoYW5naW5nKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuX2NoYW5nZWRQb3NOdW0gPT0gMCkge1xuXHRcdFx0XHQvLyBpZiAoKGV2LnByb3BlcnR5TmFtZSA9PSB0cmFuc2Zvcm1Qcm9wKSB8fFxuXHRcdFx0XHQvLyBcdChldi5wcm9wZXJ0eU5hbWUgPT0gXCJ2aXNpYmlsaXR5XCIpKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiJXM6WyVzIC5saXN0LWl0ZW1dIFslc10gY29sbGFwc2VkLWNoYW5naW5nIGVuZCAocmVzb2x2aW5nICVzIHByb21pc2VzKVwiLCB0aGlzLmNpZCwgZXYudHlwZSwgZXYucHJvcGVydHlOYW1lLCB0aGlzLl9jb2xsYXBzZVByb21pc2VzLmxlbmd0aCk7XG5cdFx0XHRcdHRoaXMuX2NvbGxhcHNlZENoYW5naW5nID0gZmFsc2U7XG5cdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbGxhcHNlZC1jaGFuZ2luZ1wiKTtcblx0XHRcdFx0cmVzb2x2ZUFsbCh0aGlzLl9jb2xsYXBzZVByb21pc2VzLCB0aGlzKTtcblx0XHRcdH1cblx0XHR9LFxuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuXHRcdHRoaXMuX2ZpbHRlcmVkSXRlbXMgPSBbXTtcblx0XHR0aGlzLl9maWx0ZXJlZEluY29taW5nID0gW107XG5cdFx0dGhpcy5fZmlsdGVyZWRPdXRnb2luZyA9IFtdO1xuXG5cdFx0dGhpcy5fbWV0cmljcyA9IHt9O1xuXHRcdHRoaXMuX2l0ZW1NZXRyaWNzID0gW107XG5cdFx0dGhpcy5fY29sbGFwc2VQcm9taXNlcyA9IFtdO1xuXHRcdHRoaXMuaXRlbVZpZXdzID0gbmV3IENvbnRhaW5lcigpO1xuXG5cdFx0Xy5kZWZhdWx0cyhvcHRpb25zLCB0aGlzLmRlZmF1bHRzKTtcblx0XHR0aGlzLnJlbmRlcmVyID0gb3B0aW9ucy5yZW5kZXJlcjtcblx0XHR0aGlzLl9maWx0ZXJGbiA9IG9wdGlvbnMuZmlsdGVyRm47XG5cblx0XHQvLyB0aGlzLmNvbXB1dGVGaWx0ZXIoKTtcblx0XHQvLyB0aGlzLmNvbGxlY3Rpb24uZWFjaCh0aGlzLmNyZWF0ZUl0ZW1WaWV3LCB0aGlzKTtcblxuXHRcdHRoaXMuY29sbGVjdGlvbi5lYWNoKHRoaXMuY3JlYXRlSXRlbVZpZXcsIHRoaXMpO1xuXHRcdHRoaXMuX3NldFNlbGVjdGlvbih0aGlzLmNvbGxlY3Rpb24uc2VsZWN0ZWQpO1xuXHRcdHRoaXMuX3NldENvbGxhcHNlZChvcHRpb25zLmNvbGxhcHNlZCk7XG5cdFx0dGhpcy5yZWZyZXNoRmlsdGVyKCk7XG5cdFx0Ly8gdGhpcy5za2lwVHJhbnNpdGlvbnMgPSB0cnVlO1xuXHRcdC8vIHRoaXMucmVuZGVyTm93KCk7XG5cblx0XHQvLyB0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwgXCJzZWxlY3Q6b25lIHNlbGVjdDpub25lXCIsIHRoaXMuX3NldFNlbGVjdGlvbik7XG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sIFwicmVzZXRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLl9hbGxJdGVtcyA9IG51bGw7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIik7XG5cdFx0fSk7XG5cblx0XHQvLyB3aWxsIHRyaWdnZXIgb24gcmV0dXJuIGlmIHRoaXMuZWwgaXMgYWxyZWFkeSBhdHRhY2hlZFxuXHRcdC8vIHRoaXMuc2tpcFRyYW5zaXRpb25zID0gdHJ1ZTtcblx0XHQvLyB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJza2lwLXRyYW5zaXRpb25zXCIpO1xuXHRcdC8vIHRoaXMucmVxdWVzdFJlbmRlcihWaWV3LkFMTF9JTlZBTElEKTtcblxuXHRcdGNvbnNvbGUubG9nKFwiJXM6OmluaXRpYWxpemUgYXR0YWNoZWQ6ICVvXCIsIHRoaXMuY2lkLCB0aGlzLmF0dGFjaGVkKTtcblxuXHRcdHRoaXMub25jZShcInZpZXc6YXR0YWNoZWRcIiwgZnVuY3Rpb24odmlldykge1xuXHRcdFx0Y29uc29sZS5sb2coXCIlczo6aW5pdGlhbGl6ZSAtPiBbdmlldzphdHRhY2hlZF0gYXR0YWNoZWQ6ICVvXCIsIHZpZXcuY2lkLCB2aWV3LmF0dGFjaGVkKTtcblx0XHRcdC8vIHZpZXcucmVxdWVzdFJlbmRlcihWaWV3LkFMTF9JTlZBTElEKS5yZW5kZXJOb3coKTtcblx0XHRcdHZpZXcuc2tpcFRyYW5zaXRpb25zID0gdHJ1ZTtcblx0XHRcdHZpZXcuZWwuY2xhc3NMaXN0LmFkZChcInNraXAtdHJhbnNpdGlvbnNcIik7XG5cdFx0XHR2aWV3LnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gdGhpcy5za2lwVHJhbnNpdGlvbnMgPSB0cnVlO1xuXHRcdFx0XHR2aWV3LnJlbmRlck5vdygpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEdldCBhbiBhcnJheSB3aXRoIGEgY29sbGVjdGlvbiBjb250ZW5zXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRfZ2V0QWxsSXRlbXM6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLl9hbGxJdGVtcyB8fCAodGhpcy5fYWxsSXRlbXMgPSB0aGlzLmNvbGxlY3Rpb24uc2xpY2UoKSk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogVHJhbnNpdGlvbiBwcm9taXNlc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfd2hlbkNvbGxhcHNlQ2hhbmdlRW5kczogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuX2NvbGxhcHNlZENoYW5nZWQpIHtcblx0XHRcdHZhciB2aWV3ID0gdGhpcztcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0dmlldy5vbihcInZpZXc6cmVuZGVyOmFmdGVyXCIsIHJlc29sdmUpO1xuXHRcdFx0fSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzKTtcblx0XHR9XG5cdH0sXG5cblx0d2hlbkNvbGxhcHNlQ2hhbmdlRW5kczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGQsIHAsIHBwO1xuXHRcdGlmICh0aGlzLl9jb2xsYXBzZWRDaGFuZ2luZyB8fCB0aGlzLl9jb2xsYXBzZWRDaGFuZ2VkKSB7XG5cdFx0XHRkID0ge307XG5cdFx0XHRwID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdGQucmVzb2x2ZSA9IHJlc29sdmU7XG5cdFx0XHRcdGQucmVqZWN0ID0gcmVqZWN0O1xuXHRcdFx0fSk7XG5cdFx0XHRwcCA9IHRoaXMuX2NvbGxhcHNlUHJvbWlzZXM7XG5cdFx0XHRwcC5wdXNoKGQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwID0gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO1xuXHRcdH1cblx0XHRyZXR1cm4gcDtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBSZW5kZXJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZW5kZXJGcmFtZTogZnVuY3Rpb24odHN0YW1wLCBmbGFncykge1xuXHRcdC8vIGlmIChERUJVRykge1xuXHRcdC8vIFx0dmFyIGNoYW5nZWQgPSBbXTtcblx0XHQvLyBcdHRoaXMuX2NvbGxhcHNlZENoYW5nZWQgJiYgY2hhbmdlZC5wdXNoKFwiY29sbGFwc2VkXCIpO1xuXHRcdC8vIFx0dGhpcy5fc2VsZWN0aW9uQ2hhbmdlZCAmJiBjaGFuZ2VkLnB1c2goXCJzZWxlY3Rpb25cIik7XG5cdFx0Ly8gXHR0aGlzLl9maWx0ZXJDaGFuZ2VkICYmIGNoYW5nZWQucHVzaChcImZpbHRlclwiKTtcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiJXM6OnJlbmRlckZyYW1lIFslc11cIiwgdGhpcy5jaWQsIGNoYW5nZWQuam9pbihcIiBcIikpO1xuXHRcdC8vIH1cblxuXHRcdC8vIGNvbGxhcHNlZCB0cmFuc2l0aW9uIGZsYWdcblx0XHRpZiAodGhpcy5fY29sbGFwc2VkQ2hhbmdpbmcpIHtcblx0XHRcdGNvbnNvbGUud2FybihcIiVzOjpyZW5kZXJGcmFtZSBjb2xsYXBzZWQgdHggaW50ZXJydXB0ZWRcIiwgdGhpcy5jaWQpO1xuXHRcdFx0dGhpcy5fY29sbGFwc2VkQ2hhbmdpbmcgPSBmYWxzZTtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbGxhcHNlZC1jaGFuZ2luZ1wiKTtcblx0XHRcdHJlamVjdEFsbCh0aGlzLl9jb2xsYXBzZVByb21pc2VzLCB0aGlzKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuc2tpcFRyYW5zaXRpb25zKSB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJza2lwLXRyYW5zaXRpb25zXCIpO1xuXHRcdFx0Ly8gdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5za2lwVHJhbnNpdGlvbnMgPSBmYWxzZTtcblx0XHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwic2tpcC10cmFuc2l0aW9uc1wiKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9jb2xsYXBzZWRDaGFuZ2VkKSB7XG5cdFx0XHR0aGlzLl9jb2xsYXBzZWRDaGFuZ2VkID0gZmFsc2U7XG5cdFx0XHRmbGFncyB8PSBWaWV3LlNJWkVfSU5WQUxJRDtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImNvbGxhcHNlZFwiLCB0aGlzLl9jb2xsYXBzZWQpO1xuXG5cdFx0XHRpZiAodGhpcy5za2lwVHJhbnNpdGlvbnMpIHtcblx0XHRcdFx0dGhpcy5fY29sbGFwc2VkQ2hhbmdpbmcgPSBmYWxzZTtcblx0XHRcdFx0Ly8gcmVzb2x2ZUFsbCh0aGlzLl9jb2xsYXBzZVByb21pc2VzLCB0aGlzLmVsKTtcblx0XHRcdFx0dGhpcy5vbmNlKFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHRcdHRoaXMuX2NoYW5nZWRQb3NOdW0gPSAwO1xuXHRcdFx0XHRcdHJlc29sdmVBbGwodmlldy5fY29sbGFwc2VQcm9taXNlcywgdmlldyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fY29sbGFwc2VkQ2hhbmdpbmcgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJjb2xsYXBzZWQtY2hhbmdpbmdcIik7XG5cdFx0XHRcdC8vIHRoaXMgd2lsbCBiZSByZXNvbHZlZCBvbiB0cmFuc2l0aW9uZW5kXG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLmxvZyhcIiVzOltjb2xsYXBzZSBjaGFuZ2VkXSAlcyBwcm9taXNlc1wiLCB0aGlzLmNpZCxcblx0XHRcdFx0dGhpcy5fY29sbGFwc2VQcm9taXNlcy5sZW5ndGgsXG5cdFx0XHRcdHRoaXMuX2NvbGxhcHNlZENoYW5naW5nID8gXCJyZXNvbHZpbmcgbm93XCIgOiBcInJlc29sdmluZyBvbiB0cmFuc2l0aW9uZW5kXCJcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX3NlbGVjdGlvbkNoYW5nZWQpIHtcblx0XHRcdHRoaXMuX3NlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcblx0XHRcdGZsYWdzIHw9IFZpZXcuTEFZT1VUX0lOVkFMSUQ7XG5cdFx0XHR0aGlzLnJlbmRlclNlbGVjdGlvbih0aGlzLmNvbGxlY3Rpb24uc2VsZWN0ZWQsIHRoaXMuY29sbGVjdGlvbi5sYXN0U2VsZWN0ZWQpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9maWx0ZXJDaGFuZ2VkKSB7XG5cdFx0XHR0aGlzLl9maWx0ZXJDaGFuZ2VkID0gZmFsc2U7XG5cdFx0XHRmbGFncyB8PSBWaWV3LkxBWU9VVF9JTlZBTElEO1xuXHRcdFx0dmFyIGxhc3RGaWx0ZXJlZEl0ZW1zID0gdGhpcy5maWx0ZXJlZEl0ZW1zO1xuXHRcdFx0Ly8gdGhpcy5fcHJpbnRTdGF0cyhsYXN0RmlsdGVyZWRJdGVtcyk7XG5cdFx0XHR0aGlzLmNvbXB1dGVGaWx0ZXIoKTtcblx0XHRcdHRoaXMuYXBwbHlGaWx0ZXIoKTtcblx0XHRcdGlmIChERUJVRykge1xuXHRcdFx0XHR0aGlzLl9wcmludFN0YXRzKGxhc3RGaWx0ZXJlZEl0ZW1zKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZmxhZ3MgJiBWaWV3LlNJWkVfSU5WQUxJRCkge1xuXHRcdFx0dGhpcy5tZWFzdXJlKCk7IC8vIE5PVEU6IG1lYXN1cmVzIGNoaWxkcmVuXG5cdFx0fVxuXG5cdFx0aWYgKGZsYWdzICYgKFZpZXcuTEFZT1VUX0lOVkFMSUQgfCBWaWV3LlNJWkVfSU5WQUxJRCkpIHtcblx0XHRcdHRoaXMucmVuZGVyTGF5b3V0KCk7XG5cdFx0fVxuXHR9LFxuXG5cdG1lYXN1cmU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHZhciBpLCBpaSwgZWwsIGVscywgbSwgbW07XG5cdFx0Ly8gZWxzID0gdGhpcy5lbC5jaGlsZHJlbjtcblx0XHQvLyBpaSA9IGVscy5sZW5ndGg7XG5cdFx0Ly8gbW0gPSB0aGlzLl9pdGVtTWV0cmljcztcblx0XHQvLyBmb3IgKGkgPSAwOyBpIDwgaWk7IGkrKykge1xuXHRcdC8vIFx0bW1baV0gPSBfLnBpY2soZWxzW2ldLCBcIm9mZnNldFRvcFwiLCBcIm9mZnNldEhlaWdodFwiKTtcblx0XHQvLyB9XG5cblx0XHR0aGlzLl9tZXRyaWNzID0gZ2V0Qm94RWRnZVN0eWxlcyh0aGlzLmVsLCB0aGlzLl9tZXRyaWNzKTtcblxuXHRcdC8vIHZhciBpdGVtRWwsIGl0ZW1WaWV3LCBiYXNlbGluZSA9IDA7XG5cdFx0Ly8gaWYgKGl0ZW1FbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW06bm90KC5leGNsdWRlZCkgLmxhYmVsXCIpKSB7XG5cdFx0Ly8gXHQvLyBpdGVtVmlldyA9IHRoaXMuaXRlbVZpZXdzLmZpbmRCeUNpZChpdGVtRWwuY2lkKTtcblx0XHQvLyBcdHZhciBlbEEgPSBpdGVtRWwsIGVsQiA9IGl0ZW1FbC5wYXJlbnRFbGVtZW50O1xuXHRcdC8vIFx0dmFyIHlBID0gZWxBLm9mZnNldFRvcCxcblx0XHQvLyBcdFx0aEEgPSBlbEEub2Zmc2V0SGVpZ2h0LFxuXHRcdC8vIFx0XHR5QiA9IGVsQi5vZmZzZXRUb3AsXG5cdFx0Ly8gXHRcdGhCID0gZWxCLm9mZnNldEhlaWdodDtcblx0XHQvLyBcdGJhc2VsaW5lID0gKCh5QSArIGhBKSAtICh5QiArIGhCKSk7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhcIiVzOjptZWFzdXJlIGZvbnRTaXplOiAlc3B4ICglcyslcyktKCVzKyVzKT0lc1wiLCB0aGlzLmNpZCwgdGhpcy5fbWV0cmljcy5mb250U2l6ZSxcblx0XHQvLyBcdFx0eUEsIGhBLCB5QiwgaEIsIGJhc2VsaW5lXG5cdFx0Ly8gXHQpO1xuXHRcdC8vIH1cblxuXHRcdHRoaXMuaXRlbVZpZXdzLmZvckVhY2goZnVuY3Rpb24odmlldykge1xuXHRcdFx0aWYgKCF2aWV3Ll9tZXRyaWNzKSB2aWV3Ll9tZXRyaWNzID0ge307XG5cdFx0XHQvLyB2aWV3Ll9tZXRyaWNzLmJhc2VsaW5lID0gdGhpcy5fbWV0cmljcy5mb250U2l6ZSAtIGJhc2VsaW5lO1xuXHRcdFx0dmlldy5fbWV0cmljcy5vZmZzZXRUb3AgPSB2aWV3LmVsLm9mZnNldFRvcDtcblx0XHRcdHZpZXcuX21ldHJpY3Mub2Zmc2V0SGVpZ2h0ID0gdmlldy5lbC5vZmZzZXRIZWlnaHQ7XG5cdFx0XHR2aWV3Ll9tZXRyaWNzLm9mZnNldExlZnQgPSB2aWV3LmVsLm9mZnNldExlZnQ7XG5cdFx0XHR2aWV3Ll9tZXRyaWNzLm9mZnNldFdpZHRoID0gdmlldy5lbC5vZmZzZXRXaWR0aDtcblx0XHRcdGlmICghdGhpcy5fY29sbGFwc2VkICYmIHZpZXcubGFiZWwpIHtcblx0XHRcdFx0dmlldy5fbWV0cmljcy50ZXh0TGVmdCA9IHZpZXcubGFiZWwub2Zmc2V0TGVmdDtcblx0XHRcdFx0dmlldy5fbWV0cmljcy50ZXh0V2lkdGggPSB2aWV3LmxhYmVsLm9mZnNldFdpZHRoO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmlldy5fbWV0cmljcy50ZXh0TGVmdCA9IHZpZXcuX21ldHJpY3Mub2Zmc2V0TGVmdDtcblx0XHRcdFx0dmlldy5fbWV0cmljcy50ZXh0V2lkdGggPSB2aWV3Ll9tZXRyaWNzLm9mZnNldFdpZHRoO1xuXHRcdFx0fVxuXHRcdH0sIHRoaXMpO1xuXG5cdFx0Ly8gdGhpcy5fbWV0cmljcy5iYXNlbGluZSA9IHRoaXMuX21ldHJpY3MuZm9udFNpemUgLSBiYXNlbGluZTtcblx0fSxcblxuXHRyZW5kZXJMYXlvdXQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwb3NYLCBwb3NZLCBsYXN0WCwgbGFzdFk7XG5cdFx0cG9zWCA9IHRoaXMuX21ldHJpY3MucGFkZGluZ0xlZnQ7XG5cdFx0cG9zWSA9IHRoaXMuX21ldHJpY3MucGFkZGluZ1RvcDtcblxuXHRcdHRoaXMuX2NoYW5nZWRQb3NOdW0gPSAwO1xuXHRcdC8vIHVzZSBIVE1MRWxlbWVudC5jaGlsZHJlbiB0byBrZWVwIGxheW91dCBvcmRlclxuXHRcdGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuZWwuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0dmFyIHZpZXcgPSB0aGlzLml0ZW1WaWV3cy5maW5kQnlDaWQodGhpcy5lbC5jaGlsZHJlbltpXS5jaWQpO1xuXHRcdFx0bGFzdFggPSB2aWV3LnRyYW5zZm9ybS50eDtcblx0XHRcdGxhc3RZID0gdmlldy50cmFuc2Zvcm0udHk7XG5cdFx0XHRpZiAoKCh0aGlzLmNvbGxlY3Rpb24uc2VsZWN0ZWQgJiYgIXZpZXcubW9kZWwuc2VsZWN0ZWQpIHx8XG5cdFx0XHRcdFx0dmlldy5lbC5jbGFzc0xpc3QuY29udGFpbnMoXCJleGNsdWRlZFwiKSkgJiYgdGhpcy5fY29sbGFwc2VkKSB7XG5cdFx0XHRcdHZpZXcudHJhbnNmb3JtLnR4ID0gcG9zWDtcblx0XHRcdFx0dmlldy50cmFuc2Zvcm0udHkgPSBwb3NZO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHZpZXcuX21ldHJpY3Mub2Zmc2V0SGVpZ2h0ID09IDApIHtcblx0XHRcdFx0XHRwb3NZIC09IHZpZXcuX21ldHJpY3Mub2Zmc2V0VG9wO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZpZXcudHJhbnNmb3JtLnR4ID0gcG9zWDtcblx0XHRcdFx0dmlldy50cmFuc2Zvcm0udHkgPSBwb3NZO1xuXHRcdFx0XHRwb3NZICs9IHZpZXcuX21ldHJpY3Mub2Zmc2V0SGVpZ2h0ICsgdmlldy5fbWV0cmljcy5vZmZzZXRUb3A7XG5cdFx0XHR9XG5cdFx0XHR2aWV3LmVsLnN0eWxlW3RyYW5zZm9ybVByb3BdID0gdHJhbnNsYXRlQ3NzVmFsdWUodmlldy50cmFuc2Zvcm0udHgsIHZpZXcudHJhbnNmb3JtLnR5KTtcblx0XHRcdGlmICh2aWV3LnRyYW5zZm9ybS50eCAhPSBsYXN0WCB8fCB2aWV3LnRyYW5zZm9ybS50eSAhPSBsYXN0WSkge1xuXHRcdFx0XHR0aGlzLl9jaGFuZ2VkUG9zTnVtKys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gcG9zWSArPSB0aGlzLl9tZXRyaWNzLnBhZGRpbmdCb3R0b207XG5cdFx0dGhpcy5fbWV0cmljcy5oZWlnaHQgPSBNYXRoLm1heCgwLCBwb3NZICsgdGhpcy5fbWV0cmljcy5wYWRkaW5nQm90dG9tKTtcblx0XHR0aGlzLmVsLnN0eWxlLmhlaWdodCA9IHRoaXMuX21ldHJpY3MuaGVpZ2h0ICsgXCJweFwiO1xuXHRcdC8vIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gKHBvc1kgPiAwKSA/IHBvc1kgKyBcInB4XCIgOiBcIlwiO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIENoaWxkIHZpZXdzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAcHJpdmF0ZSAqL1xuXHRjcmVhdGVJdGVtVmlldzogZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcblx0XHR2YXIgdmlldyA9IG5ldyB0aGlzLnJlbmRlcmVyKHtcblx0XHRcdG1vZGVsOiBpdGVtLFxuXHRcdFx0ZWw6IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW1bZGF0YS1pZD1cXFwiXCIgKyBpdGVtLmlkICsgXCJcXFwiXVwiKVxuXHRcdH0pO1xuXHRcdC8vIGl0ZW0uc2V0KFwiZXhjbHVkZWRcIiwgZmFsc2UsIHsgc2lsZW50OiB0cnVlIH0pO1xuXHRcdC8vIHZpZXcubGlzdGVuVG8oaXRlbSwgXCJjaGFuZ2U6ZXhjbHVkZWRcIiwgZnVuY3Rpb24oaXRlbSwgbmV3VmFsKSB7XG5cdFx0Ly8gXHQvLyBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuXHRcdC8vIFx0aWYgKHRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXhjbHVkZWRcIikgIT09IG5ld1ZhbCkge1xuXHRcdC8vIFx0XHRjb25zb2xlLndhcm4oXCIlczpbY2hhbmdlOmV4Y2x1ZGVkXSBtOiVvIGNzczogJW9cIiwgdGhpcy5jaWQsIG5ld1ZhbCwgdGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoXCJleGNsdWRlZFwiKSk7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gXHQvLyB0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJleGNsdWRlZFwiLCBleGNsdWRlZCk7XG5cdFx0Ly8gfSk7XG5cdFx0dGhpcy5saXN0ZW5Ubyh2aWV3LCBcInJlbmRlcmVyOmNsaWNrXCIsIHRoaXMuX29uUmVuZGVyZXJDbGljayk7XG5cdFx0dGhpcy5pdGVtVmlld3MuYWRkKHZpZXcpO1xuXHRcdHJldHVybiB2aWV3O1xuXHR9LFxuXG5cdC8qKiBAcHJpdmF0ZSAqL1xuXHRfb25SZW5kZXJlckNsaWNrOiBmdW5jdGlvbihpdGVtLCBldikge1xuXHRcdGlmICh0aGlzLl9jb2xsYXBzZWRDaGFuZ2luZ1xuXHRcdFx0fHwgKHRoaXMuX2NvbGxhcHNlZCAmJiBpdGVtLmdldChcImV4Y2x1ZGVkXCIpKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAodGhpcy5jb2xsZWN0aW9uLnNlbGVjdGVkICE9PSBpdGVtKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoXCJ2aWV3OnNlbGVjdDpvbmVcIiwgaXRlbSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChldi5hbHRLZXkpIHtcblx0XHRcdFx0dGhpcy50cmlnZ2VyKFwidmlldzpzZWxlY3Q6bm9uZVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMudHJpZ2dlcihcInZpZXc6c2VsZWN0OnNhbWVcIiwgaXRlbSk7XG5cdFx0XHR9XG5cdFx0XHQvLyB0aGlzLnRyaWdnZXIoXCJ2aWV3OnNlbGVjdDpub25lXCIpO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBDb2xsYXBzZWRcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBwcml2YXRlICovXG5cdF9jb2xsYXBzZWQ6IHVuZGVmaW5lZCxcblxuXHQvKipcblx0ICogQHBhcmFtIHtCb29sZWFufVxuXHQgKi9cblx0X3NldENvbGxhcHNlZDogZnVuY3Rpb24oY29sbGFwc2VkKSB7XG5cdFx0aWYgKGNvbGxhcHNlZCAhPT0gdGhpcy5fY29sbGFwc2VkKSB7XG5cdFx0XHR0aGlzLl9jb2xsYXBzZWQgPSBjb2xsYXBzZWQ7XG5cdFx0XHR0aGlzLl9jb2xsYXBzZWRDaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdHRoaXMucmVxdWVzdFJlbmRlcigpO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBTZWxlY3Rpb25cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBwcml2YXRlICovXG5cdF9zZWxlY3RlZEl0ZW06IHVuZGVmaW5lZCxcblxuXHQvKiogQHBhcmFtIHtCYWNrYm9uZS5Nb2RlbHxudWxsfSAqL1xuXHRfc2V0U2VsZWN0aW9uOiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0aWYgKGl0ZW0gIT09IHRoaXMuX3NlbGVjdGVkSXRlbSkge1xuXHRcdFx0dGhpcy5fc2VsZWN0ZWRJdGVtID0gaXRlbTtcblx0XHRcdHRoaXMuX3NlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKFZpZXcuTU9ERUxfSU5WQUxJRCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKiBAcHJpdmF0ZSAqL1xuXHRyZW5kZXJTZWxlY3Rpb246IGZ1bmN0aW9uKG5ld0l0ZW0sIG9sZEl0ZW0pIHtcblx0XHR2YXIgdmlldztcblx0XHRpZiAob2xkSXRlbSkge1xuXHRcdFx0dmlldyA9IHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKG9sZEl0ZW0pO1xuXHRcdFx0dmlldy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XG5cdFx0XHQvLyB2aWV3LmxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJjb2xvci1mZ1wiKTtcblx0XHRcdC8vIHZpZXcubGFiZWwuY2xhc3NMaXN0LnJlbW92ZShcImNvbG9yLXJldmVyc2VcIik7XG5cdFx0fVxuXHRcdGlmIChuZXdJdGVtKSB7XG5cdFx0XHR2aWV3ID0gdGhpcy5pdGVtVmlld3MuZmluZEJ5TW9kZWwobmV3SXRlbSk7XG5cdFx0XHR2aWV3LmVsLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcblx0XHRcdC8vIHZpZXcubGFiZWwuY2xhc3NMaXN0LmFkZChcImNvbG9yLWZnXCIpO1xuXHRcdFx0Ly8gdmlldy5sYWJlbC5jbGFzc0xpc3QuYWRkKFwiY29sb3ItcmV2ZXJzZVwiKTtcblx0XHR9XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGFzLXNlbGVjdGVkXCIsIHRoaXMuc2VsZWN0ZWRJdGVtICE9PSBudWxsKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBGaWx0ZXJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0cmVmcmVzaEZpbHRlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuX2ZpbHRlckZuKSB7XG5cdFx0XHR0aGlzLl9maWx0ZXJDaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdHRoaXMucmVxdWVzdFJlbmRlcihWaWV3Lk1PREVMX0lOVkFMSUQpO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBGaWx0ZXIgaW1wbCAyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdGNvbXB1dGVGaWx0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdJdGVtcywgb2xkSXRlbXM7XG5cdFx0dmFyIGhhc05ldywgaGFzT2xkO1xuXHRcdHRoaXMuX2ZpbHRlcmVkSW5jb21pbmcubGVuZ3RoID0gMDtcblx0XHR0aGlzLl9maWx0ZXJlZE91dGdvaW5nLmxlbmd0aCA9IDA7XG5cblx0XHRuZXdJdGVtcyA9IHRoaXMuX2ZpbHRlckZuID8gdGhpcy5jb2xsZWN0aW9uLmZpbHRlcih0aGlzLl9maWx0ZXJGbiwgdGhpcykgOiB0aGlzLl9nZXRBbGxJdGVtcygpO1xuXHRcdG9sZEl0ZW1zID0gdGhpcy5fZmlsdGVyZWRJdGVtcztcblx0XHRoYXNOZXcgPSAhIShuZXdJdGVtcyAmJiBuZXdJdGVtcy5sZW5ndGgpO1xuXHRcdGhhc09sZCA9ICEhKG9sZEl0ZW1zICYmIG9sZEl0ZW1zLmxlbmd0aCk7XG5cdFx0Ly8gTk9URTogZGlmZiB0aGlyZCBhcmcgaXMgZGVzdGluYXRpb24gYXJyYXlcblx0XHRpZiAoaGFzTmV3KSB7XG5cdFx0XHQvLyBpbmNvbWluZyBleGNsdXNpb25zXG5cdFx0XHRkaWZmKChoYXNPbGQgPyBvbGRJdGVtcyA6IHRoaXMuX2dldEFsbEl0ZW1zKCkpLCBuZXdJdGVtcywgdGhpcy5fZmlsdGVyZWRJbmNvbWluZyk7XG5cdFx0XHQvLyB0aGlzLl9maWx0ZXJlZEluY29taW5nLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0Ly8gXHRpdGVtLnNldChcImV4Y2x1ZGVkXCIsIHRydWUpO1xuXHRcdFx0Ly8gfSk7XG5cdFx0fVxuXHRcdGlmIChoYXNPbGQpIHtcblx0XHRcdC8vIG91dGdvaW5nIGV4Y2x1c2lvbnNcblx0XHRcdGRpZmYoKGhhc05ldyA/IG5ld0l0ZW1zIDogdGhpcy5fZ2V0QWxsSXRlbXMoKSksIG9sZEl0ZW1zLCB0aGlzLl9maWx0ZXJlZE91dGdvaW5nKTtcblx0XHRcdC8vIHRoaXMuX2ZpbHRlcmVkT3V0Z29pbmcuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHQvLyBcdGl0ZW0uc2V0KFwiZXhjbHVkZWRcIiwgZmFsc2UpO1xuXHRcdFx0Ly8gfSk7XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OnJlbmRlckZpbHRlckZuXCIsIHRoaXMuY2lkLCBuZXdJdGVtcyk7XG5cdFx0dGhpcy5fZmlsdGVyZWRJdGVtcyA9IG5ld0l0ZW1zO1xuXHR9LFxuXG5cdGFwcGx5RmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHQvLyB0aGlzLml0ZW1WaWV3cy5mb3JFYWNoKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHQvLyBcdHZpZXcuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImV4Y2x1ZGVkXCIsIHZpZXcubW9kZWwuZ2V0KFwiZXhjbHVkZWRcIikpO1xuXHRcdC8vIH0pO1xuXHRcdHRoaXMuX2ZpbHRlcmVkSW5jb21pbmcuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHR0aGlzLml0ZW1WaWV3cy5maW5kQnlNb2RlbChpdGVtKS5lbC5jbGFzc0xpc3QuYWRkKFwiZXhjbHVkZWRcIik7XG5cdFx0XHRpdGVtLnNldChcImV4Y2x1ZGVkXCIsIHRydWUpO1xuXHRcdH0sIHRoaXMpO1xuXHRcdHRoaXMuX2ZpbHRlcmVkT3V0Z29pbmcuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHR0aGlzLml0ZW1WaWV3cy5maW5kQnlNb2RlbChpdGVtKS5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiZXhjbHVkZWRcIik7XG5cdFx0XHRpdGVtLnNldChcImV4Y2x1ZGVkXCIsIGZhbHNlKTtcblx0XHR9LCB0aGlzKTtcblxuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImhhcy1leGNsdWRlZFwiLCB0aGlzLmZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMCk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogRmlsdGVyIGltcGwgMVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKlxuXHRjb21wdXRlRmlsdGVyXzE6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpdGVtcyA9IHRoaXMuX2ZpbHRlckZuID8gdGhpcy5jb2xsZWN0aW9uLmZpbHRlcih0aGlzLl9maWx0ZXJGbiwgdGhpcykgOiB0aGlzLl9nZXRBbGxJdGVtcygpO1xuXHRcdHRoaXMucmVuZGVyRmlsdGVycyhpdGVtcywgdGhpcy5fZmlsdGVyZWRJdGVtcyk7XG5cdFx0dGhpcy5fZmlsdGVyZWRJdGVtcyA9IGl0ZW1zO1xuXHR9LFxuXG5cdHJlbmRlckZpbHRlcnM6IGZ1bmN0aW9uKG5ld0l0ZW1zLCBvbGRJdGVtcykge1xuXHRcdHZhciBoYXNOZXcgPSAhIShuZXdJdGVtcyAmJiBuZXdJdGVtcy5sZW5ndGgpO1xuXHRcdHZhciBoYXNPbGQgPSAhIShvbGRJdGVtcyAmJiBvbGRJdGVtcy5sZW5ndGgpO1xuXHRcdHZhciBpbkV4Y2wgPSBbXTtcblx0XHR2YXIgb3V0RXhjbCA9IFtdO1xuXG5cdFx0Ly8gY29uc29sZS5sb2coXCIlczo6cmVuZGVyRmlsdGVyRm5cIiwgdGhpcy5jaWQsIG5ld0l0ZW1zKTtcblx0XHQvLyBOT1RFOiBkaWZmIHRoaXJkIGFyZyBpcyBkZXN0aW5hdGlvbiBhcnJheVxuXHRcdGlmIChoYXNOZXcpIHtcblx0XHRcdGRpZmYoKGhhc09sZCA/IG9sZEl0ZW1zIDogdGhpcy5fZ2V0QWxsSXRlbXMoKSksIG5ld0l0ZW1zLCBpbkV4Y2wpXG5cdFx0XHQvLyAuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHQvLyBcdHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKGl0ZW0pLmVsLmNsYXNzTGlzdC5hZGQoXCJleGNsdWRlZFwiKTtcblx0XHRcdC8vIFx0aXRlbS5zZXQoXCJleGNsdWRlZFwiLCB0cnVlKTtcblx0XHRcdC8vIH0sIHRoaXMpO1xuXHRcdH1cblx0XHRpZiAoaGFzT2xkKSB7XG5cdFx0XHRkaWZmKChoYXNOZXcgPyBuZXdJdGVtcyA6IHRoaXMuX2dldEFsbEl0ZW1zKCkpLCBvbGRJdGVtcywgb3V0RXhjbClcblx0XHRcdC8vIC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdC8vIFx0dGhpcy5pdGVtVmlld3MuZmluZEJ5TW9kZWwoaXRlbSkuZWwuY2xhc3NMaXN0LnJlbW92ZShcImV4Y2x1ZGVkXCIpO1xuXHRcdFx0Ly8gXHRpdGVtLnNldChcImV4Y2x1ZGVkXCIsIGZhbHNlKTtcblx0XHRcdC8vIH0sIHRoaXMpO1xuXHRcdH1cblx0XHR0aGlzLl9maWx0ZXJlZEluY29taW5nID0gaW5FeGNsO1xuXHRcdHRoaXMuX2ZpbHRlcmVkT3V0Z29pbmcgPSBvdXRFeGNsO1xuXHRcdC8vIHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImhhcy1leGNsdWRlZFwiLCBoYXNOZXcpO1xuXHRcdC8vIHRoaXMuYXBwbHlGaWx0ZXIoKTtcblx0fSxcblx0Ki9cblxuXHQvLyBjb21wdXRlRmlsdGVyZWQ6IGZ1bmN0aW9uKCkge1xuXHQvLyBcdHRoaXMuX2ZpbHRlclJlc3VsdCA9IHRoaXMuY29sbGVjdGlvbi5tYXAodGhpcy5fZmlsdGVyRm4sIHRoaXMpO1xuXHQvLyB9LFxuXHQvL1xuXHQvLyByZW5kZXJGaWx0ZXJlZDogZnVuY3Rpb24oKSB7XG5cdC8vIFx0dGhpcy5jb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcblx0Ly8gXHRcdHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKGl0ZW0pLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJleGNsdWRlZFwiLCAhdGhpcy5fZmlsdGVyUmVzdWx0W2luZGV4XSk7XG5cdC8vIFx0fSwgdGhpcyk7XG5cdC8vIH0sXG5cbn0pO1xuXG5pZiAoREVCVUcpIHtcblx0RmlsdGVyYWJsZUxpc3RWaWV3LnByb3RvdHlwZS5fbG9nRmxhZ3MgPSBbXG5cdFx0XCJ2aWV3LnJlbmRlclwiLFxuXHRcdC8vIFwidmlldy50cmFjZVwiXG5cdF0uam9pbihcIiBcIik7XG5cblx0RmlsdGVyYWJsZUxpc3RWaWV3LnByb3RvdHlwZS5fcHJpbnRTdGF0cyA9IGZ1bmN0aW9uKGxhc3RGaWx0ZXJlZEl0ZW1zKSB7XG5cdFx0aWYgKHRoaXMuX2xvZ0ZsYWdzW1widmlldy50cmFjZVwiXSkgY29uc29sZS5sb2coXCIlczo6cmVuZGVyRnJhbWUgJXMgZmlsdGVyZWQ6JW8oPSVvKS8lbyAoY2hhbmdlZDolbywgaW46JW8sIG91dDolbylcIiwgdGhpcy5jaWQsXG5cdFx0XHR0aGlzLmZpbHRlcmVkSXRlbXMubGVuZ3RoID4gMCA/IFwiaGFzXCIgOiBcImhhcyBub3RcIixcblx0XHRcdHRoaXMuZmlsdGVyZWRJdGVtcy5sZW5ndGgsXG5cdFx0XHRsYXN0RmlsdGVyZWRJdGVtcyA/ICh0aGlzLmZpbHRlcmVkSXRlbXMubGVuZ3RoICsgdGhpcy5fZmlsdGVyZWRJbmNvbWluZy5sZW5ndGgpIC0gdGhpcy5fZmlsdGVyZWRPdXRnb2luZy5sZW5ndGggOiB0aGlzLmZpbHRlcmVkSXRlbXMubGVuZ3RoLFxuXHRcdFx0dGhpcy5jb2xsZWN0aW9uLmxlbmd0aCxcblx0XHRcdCh0aGlzLl9maWx0ZXJlZEluY29taW5nLmxlbmd0aCArIHRoaXMuX2ZpbHRlcmVkT3V0Z29pbmcubGVuZ3RoKSxcblx0XHRcdHRoaXMuX2ZpbHRlcmVkSW5jb21pbmcubGVuZ3RoLFxuXHRcdFx0dGhpcy5fZmlsdGVyZWRPdXRnb2luZy5sZW5ndGgpO1xuXHR9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZpbHRlcmFibGVMaXN0VmlldztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L2NvbXBvbmVudC9HcmFwaFZpZXdcbiAqL1xuXG4vKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuY29uc3QgQ29sb3IgPSByZXF1aXJlKFwiY29sb3JcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvQ2FudmFzVmlld30gKi9cbmNvbnN0IENhbnZhc1ZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9DYW52YXNWaWV3XCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9HbG9iYWxzfSAqL1xuY29uc3QgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuXG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9jYW52YXMvY2FsY0FyY0hDb25uZWN0b3J9ICovXG5jb25zdCBjYWxjQXJjSENvbm5lY3RvciA9IHJlcXVpcmUoXCJ1dGlscy9jYW52YXMvY2FsY0FyY0hDb25uZWN0b3JcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2NhbnZhcy9DYW52YXNIZWxwZXJ9ICovXG5jb25zdCBDYW52YXNIZWxwZXIgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL0NhbnZhc0hlbHBlclwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvZ2VvbS9pbmZsYXRlUmVjdH0gKi9cbmNvbnN0IGluZmxhdGVSZWN0ID0gcmVxdWlyZShcInV0aWxzL2dlb20vaW5mbGF0ZVJlY3RcIik7XG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2RvbS9nZXRBYnNvbHV0ZUNsaWVudFJlY3R9ICovXG4vLyB2YXIgZ2V0QWJzb2x1dGVDbGllbnRSZWN0ID0gcmVxdWlyZShcInV0aWxzL2RvbS9nZXRBYnNvbHV0ZUNsaWVudFJlY3RcIik7XG5cblxuLy8gdmFyIEJFWklFUl9DSVJDTEUgPSAwLjU1MTkxNTAyNDQ5NDtcbi8vIHZhciBNSU5fQ0FOVkFTX1JBVElPID0gMjtcbi8vIHZhciBQSTIgPSBNYXRoLlBJICogMjtcblxudmFyIHN0eWxlQmFzZSA9IHtcblx0bGluZUNhcDogXCJidXR0XCIsIC8vIHJvdW5kLCBidXR0LCBzcXVhcmVcblx0bGluZVdpZHRoOiAwLjc1LFxuXHRsaW5lRGFzaE9mZnNldDogMCxcblx0c2V0TGluZURhc2g6IFtbXV0sXG5cdC8vIHJhZGl1c0Jhc2U6IDIsXG5cdC8vIC8qIGZhY3RvcmVkIHRvIHJlbSB1bml0ICovIC8vNixcblx0Ly8gcmFkaXVzSW5jcmVtZW50OiAwLjIxLCAvLzMsIC8vMC4yNSxcblx0Ly8gLyogdXNlcyBsaW5lV2lkdGggbXVsdGlwbGllciAqL1xuXHQvLyBvdXRsaW5lV2lkdGg6IDMsXG5cdC8vIC8qIHVzZXMgbGluZVdpZHRoIG11bHRpcGxpZXIgKi9cblx0Ly8gYXJyb3dTaXplOiAwLjMsXG59O1xudmFyIHBhcmFtc0Jhc2UgPSB7XG5cdHJhZGl1c0Jhc2U6IDEuMjUsXG5cdC8qIGZhY3RvcmVkIHRvIHJlbSB1bml0ICovIC8vNixcblx0cmFkaXVzSW5jcmVtZW50OiAwLjIxLCAvLzMsIC8vMC4yNSxcblx0LyogdXNlcyBsaW5lV2lkdGggbXVsdGlwbGllciAqL1xuXHRvdXRsaW5lV2lkdGg6IDMsXG5cdC8qIGZhY3RvcmVkIHRvIHJlbSB1bml0ICovXG5cdGFycm93U2l6ZTogMC40LCAvLzAuMyxcbn07XG5cbi8vIHZhciBvdmVybGF5U3R5bGVCYXNlID0ge1xuLy8gXHRnbG9iYWxBbHBoYTogMC43NSxcbi8vIFx0Z2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRlc3RpbmF0aW9uLW91dFwiLFxuLy8gXHRsaW5lV2lkdGg6IDQsXG4vLyBcdGxpbmVKb2luOiBcInJvdW5kXCIsXG4vLyBcdHRleHRCYXNlbGluZTogXCJ0b3BcIixcbi8vIFx0dGV4dEFsaWduOiBcImxlZnRcIixcbi8vIH07XG5cbmlmIChERUJVRykge1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXHR2YXIgX2RTdHlsZXMgPSB7XG5cdFx0ZGVmYXVsdHM6IHtcblx0XHRcdGdsb2JhbEFscGhhOiAwLjY2LFxuXHRcdFx0bGluZVdpZHRoOiAwLFxuXHRcdFx0ZmlsbFN0eWxlOiBcInRyYW5zcGFyZW50XCIsXG5cdFx0XHRzdHJva2VTdHlsZTogXCJ0cmFuc3BhcmVudFwiLFxuXHRcdFx0bGluZURhc2hPZmZzZXQ6IDAsXG5cdFx0XHRzZXRMaW5lRGFzaDogW1tdXVxuXHRcdH1cblx0fTtcblxuXHQvKiBTdHJva2UgKi9cblx0W1xuXHRcdFwicmVkXCIsIFwic2FsbW9uXCIsIFwic2llbm5hXCIsXG5cdFx0XCJncmVlblwiLCBcInllbGxvd2dyZWVuXCIsIFwib2xpdmVcIixcblx0XHRcImJsdWVcIiwgXCJsaWdodHNreWJsdWVcIiwgXCJtaWRuaWdodGJsdWVcIixcblx0XHRcImdyZXlcIiwgXCJzaWx2ZXJcIlxuXHRdXG5cdC5mb3JFYWNoKGZ1bmN0aW9uKGNvbG9yTmFtZSkge1xuXHRcdHZhciByZ2JhVmFsdWUgPSBDb2xvcihjb2xvck5hbWUpLmFscGhhKDAuNzUpLnN0cmluZygpO1xuXG5cdFx0X2RTdHlsZXNbY29sb3JOYW1lXSA9IF8uZGVmYXVsdHMoe1xuXHRcdFx0bGluZVdpZHRoOiAwLjc1LFxuXHRcdFx0c3Ryb2tlU3R5bGU6IHJnYmFWYWx1ZSxcblx0XHR9LCBfZFN0eWxlc1tcImRlZmF1bHRzXCJdKTtcblxuXHRcdF9kU3R5bGVzW2NvbG9yTmFtZSArIFwiX2Rhc2hlZFwiXSA9IF8uZGVmYXVsdHMoe1xuXHRcdFx0c2V0TGluZURhc2g6IFtbNCwgMl1dLFxuXHRcdFx0c3Ryb2tlU3R5bGU6IHJnYmFWYWx1ZSxcblx0XHR9LCBfZFN0eWxlc1tcImRlZmF1bHRzXCJdKTtcblxuXHRcdF9kU3R5bGVzW2NvbG9yTmFtZSArIFwiX3RoaWNrXCJdID0gXy5kZWZhdWx0cyh7XG5cdFx0XHRsaW5lV2lkdGg6IDUsXG5cdFx0XHRzdHJva2VTdHlsZTogcmdiYVZhbHVlLFxuXHRcdH0sIF9kU3R5bGVzW1wiZGVmYXVsdHNcIl0pO1xuXG5cdFx0X2RTdHlsZXNbY29sb3JOYW1lICsgXCJfZmlsbFwiXSA9IF8uZGVmYXVsdHMoe1xuXHRcdFx0ZmlsbFN0eWxlOiByZ2JhVmFsdWVcblx0XHR9LCBfZFN0eWxlc1tcImRlZmF1bHRzXCJdKTtcblx0fSlcblx0LyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqL1xufVxuXG52YXIgZ2V0UmVjdERpclggPSBmdW5jdGlvbihyMSwgcjIpIHtcblx0aWYgKHIxLnJpZ2h0IDwgcjIubGVmdCkge1xuXHRcdHJldHVybiAxO1xuXHR9XG5cdGlmIChyMi5yaWdodCA8IHIxLmxlZnQpIHtcblx0XHRyZXR1cm4gLTE7XG5cdH1cblx0cmV0dXJuIDA7XG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvR3JhcGhWaWV3fVxuICovXG52YXIgR3JhcGhWaWV3ID0gQ2FudmFzVmlldy5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjaWRQcmVmaXg6IFwiZ3JhcGhcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0YWdOYW1lOiBcImNhbnZhc1wiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJncmFwaFwiLFxuXG5cdGRlZmF1bHRLZXk6IFwiYTJiXCIsXG5cblx0ZGVmYXVsdHM6IHtcblx0XHR2YWx1ZXM6IHtcblx0XHRcdGEyYjogMCxcblx0XHRcdGIyYTogMCxcblx0XHR9LFxuXHRcdG1heFZhbHVlczoge1xuXHRcdFx0YTJiOiAxLFxuXHRcdFx0YjJhOiAxLFxuXHRcdH0sXG5cdFx0Ly8gdXNlT3BhcXVlOiB0cnVlLFxuXHRcdC8vIGxhYmVsRm46IGZ1bmN0aW9uKHZhbHVlLCBtYXgpIHtcblx0XHQvLyBcdHJldHVybiAoKHZhbHVlIC8gbWF4KSAqIDEwMCkgfCAwO1xuXHRcdC8vIH0sXG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0Q2FudmFzVmlldy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0dGhpcy5fbGlzdEEgPSBvcHRpb25zLmxpc3RBO1xuXHRcdHRoaXMuX2xpc3RCID0gb3B0aW9ucy5saXN0Qjtcblx0XHR0aGlzLl9hMmIgPSB7XG5cdFx0XHRzcmNWaWV3OiBvcHRpb25zLmxpc3RBLFxuXHRcdFx0ZGVzdFZpZXc6IG9wdGlvbnMubGlzdEIsXG5cdFx0XHRzOiBfLmRlZmF1bHRzKHtcblx0XHRcdFx0bGluZVdpZHRoOiAwLjcsIC8vMS4yNVxuXHRcdFx0XHQvLyByYWRpdXNJbmNyZW1lbnQ6IDAuMjUsXG5cdFx0XHR9LCBzdHlsZUJhc2UsIHBhcmFtc0Jhc2UpLFxuXHRcdFx0cDogXy5kZWZhdWx0cyh7fSwgcGFyYW1zQmFzZSksXG5cdFx0XHRzdHJva2VTdHlsZUZuOiAoZmcsIGJnLCBsbikgPT4gQ29sb3IobG4pLm1peChiZywgMC4xKS5oZXgoKVxuXHRcdH07XG5cdFx0dGhpcy5fYjJhID0ge1xuXHRcdFx0c3JjVmlldzogb3B0aW9ucy5saXN0Qixcblx0XHRcdGRlc3RWaWV3OiBvcHRpb25zLmxpc3RBLFxuXHRcdFx0czogXy5kZWZhdWx0cyh7XG5cdFx0XHRcdGxpbmVXaWR0aDogMC43LFxuXHRcdFx0XHQvLyBhcnJvd1NpemU6IDAuMjUsXG5cdFx0XHRcdC8vIHJhZGl1c0luY3JlbWVudDogMCxcblx0XHRcdFx0Ly8gb3V0bGluZVdpZHRoOiAwLFxuXHRcdFx0fSwgc3R5bGVCYXNlLCBwYXJhbXNCYXNlKSxcblx0XHRcdHA6IF8uZGVmYXVsdHMoe30sIHBhcmFtc0Jhc2UpLFxuXHRcdFx0c3Ryb2tlU3R5bGVGbjogKGZnLCBiZywgbG4pID0+IENvbG9yKGZnKS5taXgoYmcsIDAuNCkuaGV4KClcblx0XHR9O1xuXG5cdFx0Ly8gdGhpcy5saXN0ZW5Ubyh0aGlzLl9hMmIuc3JjVmlldy5jb2xsZWN0aW9uLCBcInZpZXc6c2VsZWN0Om9uZSB2aWV3OnNlbGVjdDpub25lXCIsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHQvLyBcdHRoaXMuX2EyYi5jb25uZWN0b3JzT3V0ID0gdGhpcy5fYTJiLmNvbm5lY3RvcnM7XG5cdFx0Ly8gXHR0aGlzLl9hMmIuY29ubmVjdG9ycyA9IG51bGw7XG5cdFx0Ly8gfSk7XG5cdFx0Ly9cblx0XHQvLyB0aGlzLmxpc3RlblRvKHRoaXMuX2IyYS5zcmNWaWV3LmNvbGxlY3Rpb24sIFwidmlldzpzZWxlY3Q6b25lIHZpZXc6c2VsZWN0Om5vbmVcIiwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdC8vIFx0dGhpcy5fYjJhLmNvbm5lY3RvcnNPdXQgPSB0aGlzLl9iMmEuY29ubmVjdG9ycztcblx0XHQvLyBcdHRoaXMuX2IyYS5jb25uZWN0b3JzID0gbnVsbDtcblx0XHQvLyB9KTtcblxuXHRcdC8vIHRoaXMubGlzdGVuVG8odGhpcywgXCJ2aWV3OnJlbmRlcjpiZWZvcmVcIiwgdGhpcy5fYmVmb3JlVmlld1JlbmRlcik7XG5cblx0XHQvLyB0aGlzLl90cmFjZVNjcm9sbCA9IF8uZGVib3VuY2UodGhpcy5fX3JhY2VTY3JvbGwsIDEwMCwgZmFsc2UpO1xuXG5cdFx0Ly8gdmFyIHZpZXdwb3J0Q2hhbmdlZCA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhcIiVzOlslc11cIiwgdGhpcy5jaWQsIGV2LnR5cGUpO1xuXHRcdC8vXG5cdFx0Ly8gXHQvLyB0aGlzLl90cmFjZVNjcm9sbChldi50eXBlKTtcblx0XHQvLyBcdC8vIHRoaXMuX2xhYmVsT3ZlcmxheXMgPSBudWxsO1xuXHRcdC8vIFx0dGhpcy5pbnZhbGlkYXRlKENhbnZhc1ZpZXcuTEFZT1VUX0lOVkFMSUQgfCBDYW52YXNWaWV3LlNJWkVfSU5WQUxJRCk7XG5cdFx0Ly8gXHQvLyB0aGlzLnJlcXVlc3RSZW5kZXIoQ2FudmFzVmlldy5MQVlPVVRfSU5WQUxJRCB8IENhbnZhc1ZpZXcuU0laRV9JTlZBTElEKTtcblx0XHQvLyBcdC8vIHRoaXMucmVxdWVzdFJlbmRlcigpLnJlbmRlck5vdygpO1xuXHRcdC8vIH0uYmluZCh0aGlzKTtcblx0XHQvLyB2aWV3cG9ydENoYW5nZWQgPSBfLmRlYm91bmNlKHZpZXdwb3J0Q2hhbmdlZCwgNjAsIGZhbHNlKTtcblxuXHRcdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsXG5cdFx0Ly8gXHRcdF8uZGVib3VuY2Uodmlld3BvcnRDaGFuZ2VkLCAxMDAsIGZhbHNlKSwgZmFsc2UpO1xuXHRcdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIixcblx0XHQvLyBcdF8uZGVib3VuY2Uodmlld3BvcnRDaGFuZ2VkLCAxMDAsIGZhbHNlKSwgZmFsc2UpO1xuXHRcdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHZpZXdwb3J0Q2hhbmdlZCwgZmFsc2UpO1xuXHRcdC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdmlld3BvcnRDaGFuZ2VkLCBmYWxzZSk7XG5cdFx0Ly8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdmlld3BvcnRDaGFuZ2VkLCBmYWxzZSk7XG5cdFx0Ly8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCB2aWV3cG9ydENoYW5nZWQsIGZhbHNlKTtcblxuXHRcdC8vIHRoaXMuX2FkZExpc3RMaXN0ZW5lcnModGhpcy5fYTJiKTtcblx0XHQvLyB0aGlzLl9hZGRMaXN0TGlzdGVuZXJzKHRoaXMuX2IyYSk7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRtZWFzdXJlQ2FudmFzOiBmdW5jdGlvbih3LCBoLCBzKSB7XG5cdFx0Y29uc29sZS5sb2coXCIlczo6bWVhc3VyZUNhbnZhcyBzdHlsZTolbyBzY3JvbGw6JW8gb2Zmc2V0OiVvIGNsaWVudDolbyBhcmc6JW9cIiwgdGhpcy5jaWQsIHMuaGVpZ2h0LCB0aGlzLmVsLm9mZnNldEhlaWdodCwgdGhpcy5lbC5zY3JvbGxIZWlnaHQsIHRoaXMuZWwuY2xpZW50SGVpZ2h0LCBoKTtcblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHVwZGF0ZUNhbnZhczogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fdXBkYXRlTWV0cmljcygpO1xuXHRcdHRoaXMuX3VwZGF0ZVN0eWxlcygpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHN0eWxlc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfdXBkYXRlU3R5bGVzOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYiwgYmdDb2xvciwgbG5Db2xvcjtcblx0XHRpZiAodGhpcy5tb2RlbC5oYXMoXCJidW5kbGVcIikpIHtcblx0XHRcdGIgPSB0aGlzLm1vZGVsLmdldChcImJ1bmRsZVwiKTtcblx0XHRcdGxuQ29sb3IgPSBDb2xvcihiLmNvbG9ycy5sbkNvbG9yKTsgLy8uY2xvbmUoKTtcblx0XHRcdGJnQ29sb3IgPSBDb2xvcihiLmNvbG9ycy5iZ0NvbG9yKTsgLy8uY2xvbmUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YmdDb2xvciA9IENvbG9yKEdsb2JhbHMuREVGQVVMVF9DT0xPUlNbXCJiYWNrZ3JvdW5kLWNvbG9yXCJdKTtcblx0XHRcdGxuQ29sb3IgPSBDb2xvcihHbG9iYWxzLkRFRkFVTFRfQ09MT1JTW1wibGluay1jb2xvclwiXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fYTJiLnMuc3Ryb2tlU3R5bGUgPSB0aGlzLl9hMmIucy5maWxsU3R5bGUgPVxuXHRcdFx0dGhpcy5fYTJiLnN0cm9rZVN0eWxlRm4odGhpcy5fY29sb3IsIGJnQ29sb3IsIGxuQ29sb3IpO1xuXHRcdHRoaXMuX2IyYS5zLnN0cm9rZVN0eWxlID0gdGhpcy5fYjJhLnMuZmlsbFN0eWxlID1cblx0XHRcdHRoaXMuX2IyYS5zdHJva2VTdHlsZUZuKHRoaXMuX2NvbG9yLCBiZ0NvbG9yLCBsbkNvbG9yKTtcblxuXHRcdGlmIChERUJVRykge1xuXHRcdFx0dGhpcy5fZGVidWdCbG9ja3MgPSB0aGlzLmVsLm1hdGNoZXMoXCIuZGVidWctYmxvY2tzIC5cIiArIHRoaXMuY2xhc3NOYW1lKTtcblx0XHRcdHRoaXMuX2RlYnVnR3JhcGggPSB0aGlzLmVsLm1hdGNoZXMoXCIuZGVidWctZ3JhcGggLlwiICsgdGhpcy5jbGFzc05hbWUpO1xuXHRcdH1cblx0fSxcblxuXHRfc2V0U3R5bGU6IGZ1bmN0aW9uKHMpIHtcblx0XHRpZiAodHlwZW9mIHMgPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0cyA9IHRoaXMuX3N0eWxlRGF0YVtzXTtcblx0XHR9XG5cdFx0Q2FudmFzVmlldy5zZXRTdHlsZSh0aGlzLl9jdHgsIHMpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIG1ldHJpY3Ncblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X3VwZGF0ZU1ldHJpY3M6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBib3VuZHM7XG5cblx0XHR0aGlzLl9yb290Rm9udFNpemUgPSBwYXJzZUZsb2F0KFxuXHRcdFx0Z2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmZvbnRTaXplKTtcblxuXHRcdGJvdW5kcyA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0Ly8gYm91bmRzID0gZ2V0QWJzb2x1dGVDbGllbnRSZWN0KHRoaXMuZWwpO1xuXHRcdHRoaXMuX2N0eC5zZXRUcmFuc2Zvcm0odGhpcy5fY2FudmFzUmF0aW8sIDAsIDAsIHRoaXMuX2NhbnZhc1JhdGlvLFxuXHRcdFx0KC0oYm91bmRzLmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQpICogdGhpcy5fY2FudmFzUmF0aW8pIC0gMC41LFxuXHRcdFx0KC0oYm91bmRzLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCkgKiB0aGlzLl9jYW52YXNSYXRpbykgLSAwLjVcblx0XHQpO1xuXG5cdFx0dmFyIGksIGlpLCBlbHM7XG5cdFx0dmFyIHNyY1JlY3QsIGRlc3RSZWN0O1xuXHRcdHZhciBzcmNNaW4sIGRlc3RNaW47XG5cblx0XHRzcmNSZWN0ID0gdGhpcy5fYTJiLnNyY1ZpZXcuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0ZGVzdFJlY3QgPSB0aGlzLl9hMmIuZGVzdFZpZXcuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0dGhpcy5fYTJiLnF4ID0gZ2V0UmVjdERpclgoc3JjUmVjdCwgZGVzdFJlY3QpO1xuXG5cdFx0ZWxzID0gdGhpcy5fbGlzdEEuZWwucXVlcnlTZWxlY3RvckFsbChcIi5sYWJlbFwiKTtcblx0XHRzcmNNaW4gPSBzcmNSZWN0LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQ7XG5cdFx0Zm9yIChpID0gMCwgaWkgPSBlbHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0c3JjTWluID0gTWF0aC5tYXgoc3JjTWluLFxuXHRcdFx0XHRlbHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgKyB3aW5kb3cucGFnZVhPZmZzZXQpO1xuXHRcdH1cblx0XHR0aGlzLl9hMmIueE1pbiA9IHNyY01pbjtcblxuXHRcdGVscyA9IHRoaXMuX2xpc3RCLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGFiZWxcIik7XG5cdFx0ZGVzdE1pbiA9IGRlc3RSZWN0LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQ7XG5cdFx0Zm9yIChpID0gMCwgaWkgPSBlbHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0ZGVzdE1pbiA9IE1hdGgubWluKGRlc3RNaW4sXG5cdFx0XHRcdGVsc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0KTtcblx0XHR9XG5cdFx0dGhpcy5fYTJiLmRlc3RNaW5YID0gZGVzdE1pbjtcblxuXHRcdHRoaXMuX2IyYS5xeCA9IC10aGlzLl9hMmIucXg7XG5cdFx0dGhpcy5fYjJhLnhNaW4gPSB0aGlzLl9hMmIuZGVzdE1pblg7XG5cdFx0dGhpcy5fYjJhLmRlc3RNaW5YID0gdGhpcy5fYTJiLnhNaW47XG5cblx0XHQvLyB2YXIgcyA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcblx0XHQvLyB0aGlzLl9yb290Rm9udFNpemUgPSBwYXJzZUZsb2F0KHMuZm9udFNpemUpOyAvLyAqIHRoaXMuX2NhbnZhc1JhdGlvO1xuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6Ol91cGRhdGVNZXRyaWNzIF9yb290Rm9udFNpemU6ICVzICVvXCIsIHRoaXMuY2lkLCB0aGlzLl9yb290Rm9udFNpemUsIHMpO1xuXG5cdFx0Ly8gdmFyIGMgPSBNYXRoLmFicyhzRGF0YS54TWluIC0gZERhdGEueE1pbikgLyA2O1xuXHRcdC8vIHNNaW4gPSBzRGF0YS54TWluICsgYyAqIHF4O1xuXHRcdC8vIGRNaW4gPSBkRGF0YS54TWluIC0gYyAqIHF4O1xuXG5cdFx0Ly8gdGhpcy5fYTJiLnRhcmdldHMgPSB0aGlzLl9tZWFzdXJlTGlzdEl0ZW1zKGxpc3RWaWV3KTtcblx0XHQvLyB0aGlzLl9iMmEudGFyZ2V0cyA9IHRoaXMuX21lYXN1cmVMaXN0SXRlbXMobGlzdFZpZXcpO1xuXG5cdFx0Ly8gLy8gY29ubmVjdG9yIG1pbmltdW0gYnJhbmNoIHgyXG5cdFx0Ly8gbGlzdFZpZXcgPSB0aGlzLl9saXN0Qjtcblx0XHQvLyBmb3IgKGkgPSAwLCBpaSA9IGxpc3RWaWV3Lmdyb3Vwcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG5cdFx0Ly8gXHRpdGVtVmlldyA9IGxpc3RWaWV3Lml0ZW1WaWV3cy5maW5kQnlNb2RlbChsaXN0Vmlldy5ncm91cHNbaV0pO1xuXHRcdC8vIFx0aXRlbVJlY3QgPSAoaXRlbVZpZXcubGFiZWwgfHwgaXRlbVZpZXcuZWwpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdC8vIFx0dGhpcy5fYjJhLnhNaW4gPSBNYXRoLm1pbih0aGlzLl9iMmEueE1pbiwgaXRlbVJlY3QubGVmdCk7XG5cdFx0Ly8gXHQvLyBpZiAoaXRlbVZpZXcuX21ldHJpY3MpIHRoaXMuX2IyYS5yZWN0LmxlZnQgKyBpdGVtVmlldy50cmFuc2Zvcm0udHggKyBpdGVtVmlldy5fbWV0cmljcy50ZXh0TGVmdDtcblx0XHQvLyB9XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogcmVkcmF3XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHJlZHJhdzogZnVuY3Rpb24oY3R4LCBpbnRlcnAsIGZsYWdzKSB7XG5cdFx0dGhpcy5fY2xlYXJDYW52YXMoMCwgMCwgdGhpcy5fY2FudmFzV2lkdGgsIHRoaXMuX2NhbnZhc0hlaWdodCk7XG5cdFx0Y3R4LnNhdmUoKTtcblx0XHR0aGlzLl9yZWRyYXdfZnJvbUVsZW1lbnRzKGN0eCwgaW50ZXJwLCBmbGFncyk7XG5cdFx0Ly8gdGhpcy5fcmVkcmF3X2Zyb21WaWV3cyhjdHgsIGludGVycCk7XG5cdFx0Y3R4LnJlc3RvcmUoKTtcblx0fSxcblxuXHRfcmVkcmF3X2Zyb21FbGVtZW50czogZnVuY3Rpb24oY3R4LCBpbnRlcnAsIGZsYWdzKSB7XG5cdFx0Ly8gYjJhOiBrZXl3b3JkIHRvIGJ1bmRsZXMsIHJpZ2h0IHRvIGxlZnRcblx0XHQvLyBhMmI6IGJ1bmRsZSB0byBrZXl3b3JkcywgbGVmdCB0byByaWdodFxuXHRcdGlmIChmbGFncyAmIChDYW52YXNWaWV3LlNJWkVfSU5WQUxJRCB8IENhbnZhc1ZpZXcuTU9ERUxfSU5WQUxJRCkpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiJXM6OnJlZHJhdyBbdmFsdWVzQ2hhbmdlZDogJXNdIFtmbGFnczogJXNdXCIsIHRoaXMuY2lkLCBpbnRlcnAudmFsdWVzQ2hhbmdlZCwgQ2FudmFzVmlldy5mbGFnc1RvU3RyaW5nKGZsYWdzKSk7XG5cdFx0XHR0aGlzLl9hMmIuY29ubmVjdG9yc091dCA9IHRoaXMuX2EyYi5jb25uZWN0b3JzO1xuXHRcdFx0dGhpcy5fYjJhLmNvbm5lY3RvcnNPdXQgPSB0aGlzLl9iMmEuY29ubmVjdG9ycztcblx0XHRcdHRoaXMuX2IyYS5jb25uZWN0b3JzID0gdGhpcy5fY29tcHV0ZUNvbm5lY3RvcnModGhpcy5fYjJhKTtcblx0XHRcdHRoaXMuX2EyYi5jb25uZWN0b3JzID0gdGhpcy5fY29tcHV0ZUNvbm5lY3RvcnModGhpcy5fYTJiKTtcblx0XHRcdHRoaXMuX2xhYmVsT3ZlcmxheXMgPSB0aGlzLl9jb21wdXRlTGFiZWxPdmVybGF5cyh0aGlzLl9saXN0Qik7XG5cdFx0fVxuXG5cdFx0LyogbGluZSBkYXNoIHZhbHVlIGludGVycG9sYXRpb24gKi9cblx0XHR2YXIgYjJhVmFsLCBhMmJWYWw7XG5cdFx0YjJhVmFsID0gaW50ZXJwLmdldFJlbmRlcmVkVmFsdWUoXCJiMmFcIikgLyBpbnRlcnAuZ2V0T3B0aW9uKFwiYjJhXCIsIFwibWF4XCIpOyAvL192YWx1ZURhdGFbXCJiMmFcIl0uX21heFZhbDtcblx0XHQvLyBiMmFWYWwgPSBpbnRlcnAuX3ZhbHVlRGF0YVtcImIyYVwiXS5fcmVuZGVyZWRWYWx1ZSAvIGludGVycC5fdmFsdWVEYXRhW1wiYjJhXCJdLl9tYXhWYWw7XG5cdFx0YTJiVmFsID0gaW50ZXJwLmdldFJlbmRlcmVkVmFsdWUoXCJhMmJcIikgLyBpbnRlcnAuZ2V0T3B0aW9uKFwiYTJiXCIsIFwibWF4XCIpOyAvL2ludGVycC5fdmFsdWVEYXRhW1wiYTJiXCJdLl9tYXhWYWw7XG5cdFx0Ly8gYTJiVmFsID0gaW50ZXJwLl92YWx1ZURhdGFbXCJhMmJcIl0uX3JlbmRlcmVkVmFsdWUgLyBpbnRlcnAuX3ZhbHVlRGF0YVtcImEyYlwiXS5fbWF4VmFsO1xuXG5cdFx0LyogZHJhdyAqL1xuXHRcdHRoaXMuX2RyYXdDb25uZWN0b3JzKHRoaXMuX2IyYS5jb25uZWN0b3JzLCB0aGlzLl9iMmEucywgYjJhVmFsLCAxKTtcblx0XHR0aGlzLl9kcmF3Q29ubmVjdG9ycyh0aGlzLl9iMmEuY29ubmVjdG9yc091dCwgdGhpcy5fYjJhLnMsIDEgLSBiMmFWYWwsIDEpO1xuXHRcdHRoaXMuX2RyYXdDb25uZWN0b3JzKHRoaXMuX2EyYi5jb25uZWN0b3JzLCB0aGlzLl9hMmIucywgYTJiVmFsLCAyKTtcblx0XHQvLyB0aGlzLl9kcmF3Q29ubmVjdG9ycyh0aGlzLl9hMmIuY29ubmVjdG9yc091dCwgdGhpcy5fYTJiLnMsIDEgLSBhMmJWYWwsIDIpO1xuXHRcdHRoaXMuX2RyYXdMYWJlbE92ZXJsYXlzKHRoaXMuX2xhYmVsT3ZlcmxheXMpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIGxhYmVsIG92ZXJsYXlzXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9jb21wdXRlTGFiZWxPdmVybGF5czogZnVuY3Rpb24obGlzdCkge1xuXHRcdHZhciBkYXRhID0geyByZWN0czogW10gfTtcblx0XHR2YXIgZWxzID0gbGlzdC5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxpc3QtZ3JvdXAgLmxhYmVsIHNwYW5cIik7XG5cblx0XHR2YXIgaSwgaWksIHI7XG5cdFx0Zm9yIChpID0gMCwgaWkgPSBlbHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0Ly8gciA9IGluZmxhdGVSZWN0KGVsc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgMCwgMCk7XG5cdFx0XHRyID0gXy5jbG9uZShlbHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuXHRcdFx0ci50b3AgKz0gd2luZG93LnBhZ2VZT2Zmc2V0OyAvLyAtIDAuNTtcblx0XHRcdHIubGVmdCArPSB3aW5kb3cucGFnZVhPZmZzZXQ7IC8vIC0gMC41O1xuXHRcdFx0Ly8gci5pbm5lclRleHQgPSBlbHNbaV0uaW5uZXJUZXh0O1xuXHRcdFx0ZGF0YS5yZWN0c1tpXSA9IHI7XG5cdFx0fVxuXHRcdC8vIGRhdGEuY3NzU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsc1swXSk7XG5cdFx0Ly8gZGF0YS5ib3hTdHlsZSA9IGdldEJveEVkZ2VTdHlsZXMob3ZlcmxheURhdGEuY3NzU3R5bGUpO1xuXHRcdC8vIGRhdGEuY3R4U3R5bGUgPSB7XG5cdFx0Ly8gXHRmb250OiBbcy5mb250V2VpZ2h0LCBzLmZvbnRTdHlsZSwgcy5mb250U2l6ZSArIFwiL1wiICsgcy5saW5lSGVpZ2h0LCBzLmZvbnRGYW1pbHldLmpvaW4oXCIgXCIpXG5cdFx0Ly8gfTtcblx0XHRyZXR1cm4gZGF0YTtcblx0fSxcblxuXHRfZHJhd0xhYmVsT3ZlcmxheXM6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHR0aGlzLl9jdHguc2F2ZSgpO1xuXHRcdC8vIENhbnZhc1ZpZXcuc2V0U3R5bGUodGhpcy5fY3R4LCBzKTtcblx0XHR0aGlzLl9jdHguZ2xvYmFsQWxwaGEgPSAwLjg1O1xuXHRcdHRoaXMuX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW91dFwiO1xuXHRcdC8vIHRoaXMuX2N0eC5jYW52YXMuc3R5bGUubGV0dGVyU3BhY2luZyA9IG92ZXJsYXlEYXRhLmNzc1N0eWxlLmxldHRlclNwYWNpbmc7XG5cblx0XHRkYXRhLnJlY3RzLmZvckVhY2goZnVuY3Rpb24ocikge1xuXHRcdFx0Ly8gdGhpcy5fY3R4LmNsZWFyUmVjdChyLmxlZnQsIHIudG9wLCByLndpZHRoLCByLmhlaWdodCk7XG5cdFx0XHR0aGlzLl9jdHguZmlsbFJlY3Qoci5sZWZ0LCByLnRvcCwgci53aWR0aCwgci5oZWlnaHQpO1xuXHRcdFx0Ly8gdGhpcy5fY3R4LnN0cm9rZVRleHQoci5pbm5lclRleHQsIHIubGVmdCwgci50b3ApO1xuXHRcdH0sIHRoaXMpO1xuXHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cblx0XHRpZiAoREVCVUcpIHtcblx0XHRcdGlmICh0aGlzLl9kZWJ1Z0dyYXBoIHx8IHRoaXMuX2RlYnVnQmxvY2tzKSB7XG5cdFx0XHRcdGRhdGEucmVjdHMuZm9yRWFjaChmdW5jdGlvbihyKSB7XG5cdFx0XHRcdFx0ciA9IGluZmxhdGVSZWN0KHIsIDAsIDApO1xuXHRcdFx0XHRcdENhbnZhc0hlbHBlci5kcmF3UmVjdCh0aGlzLl9jdHgsIF9kU3R5bGVzW1wic2lsdmVyX2Rhc2hlZFwiXSxcblx0XHRcdFx0XHRcdHIubGVmdCwgci50b3AsIHIud2lkdGgsIHIuaGVpZ2h0KTtcblx0XHRcdFx0fSwgdGhpcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIGNvbm5lY3RvcnNcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X2NvbXB1dGVDb25uZWN0b3JzOiBmdW5jdGlvbihkKSB7XG5cdFx0dmFyIHNNaW4gPSBkLnhNaW47XG5cdFx0dmFyIGRNaW4gPSBkLmRlc3RNaW5YO1xuXHRcdHZhciBxeCA9IGQucXg7XG5cblx0XHR2YXIgckJhc2UsIHJJbmM7XG5cdFx0ckJhc2UgPSB0aGlzLl9yb3VuZFRvKGQucy5yYWRpdXNCYXNlICogdGhpcy5fcm9vdEZvbnRTaXplLCAwLjUpO1xuXHRcdHJJbmMgPSB0aGlzLl9yb3VuZFRvKGQucy5yYWRpdXNJbmNyZW1lbnQgKiB0aGlzLl9yb290Rm9udFNpemUsIDAuNSk7XG5cblx0XHQvLyB2YXIgcm9vdCA9IHt9O1xuXHRcdHZhciBpLCBwLCBkZE51bSwgY29ubmVjdG9ycyA9IFtdO1xuXHRcdHZhciB4MSwgeTEsIHR4O1xuXG5cdFx0dmFyIHNWaWV3LCBkZFZpZXcsIGRkSXRlbXM7XG5cdFx0aWYgKGQuc3JjVmlldy5jb2xsZWN0aW9uLnNlbGVjdGVkICYmIGQuZGVzdFZpZXcuZmlsdGVyZWRJdGVtcykge1xuXHRcdFx0c1ZpZXcgPSBkLnNyY1ZpZXcuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKGQuc3JjVmlldy5jb2xsZWN0aW9uLnNlbGVjdGVkKTtcblxuXHRcdFx0dmFyIHJlY3QgPSBzVmlldy5sYWJlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdHgxID0gcmVjdC5sZWZ0O1xuXHRcdFx0eTEgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcblx0XHRcdGlmIChxeCA+IDApIHgxICs9IHJlY3Qud2lkdGg7XG5cdFx0XHR4MSArPSB3aW5kb3cucGFnZVhPZmZzZXQ7XG5cdFx0XHR5MSArPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG5cblx0XHRcdC8vIGlmICghc1ZpZXcuX21ldHJpY3MpIHJldHVybjtcblx0XHRcdC8vIHgxID0gZC5yZWN0LmxlZnQgKyBzVmlldy50cmFuc2Zvcm0udHhcblx0XHRcdC8vIFx0KyBzVmlldy5fbWV0cmljcy50ZXh0TGVmdDtcblx0XHRcdC8vIHkxID0gZC5yZWN0LnRvcCArIHNWaWV3LnRyYW5zZm9ybS50eVxuXHRcdFx0Ly8gXHQrIHNWaWV3Ll9tZXRyaWNzLm9mZnNldEhlaWdodCAvIDI7XG5cdFx0XHQvLyBpZiAocXggPiAwKSB4MSArPSBzVmlldy5fbWV0cmljcy50ZXh0V2lkdGg7XG5cblx0XHRcdGRkSXRlbXMgPSBkLmRlc3RWaWV3LmZpbHRlcmVkSXRlbXM7XG5cdFx0XHRkZE51bSA9IGQuZGVzdFZpZXcuZmlsdGVyZWRJdGVtcy5sZW5ndGg7XG5cblx0XHRcdGZvciAoaSA9IDA7IGkgPCBkZE51bTsgaSsrKSB7XG5cdFx0XHRcdHAgPSB7fTtcblx0XHRcdFx0ZGRWaWV3ID0gZC5kZXN0Vmlldy5pdGVtVmlld3MuZmluZEJ5TW9kZWwoZGRJdGVtc1tpXSk7XG5cblx0XHRcdFx0cmVjdCA9IGRkVmlldy5sYWJlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdFx0cC54MiA9IHJlY3QubGVmdDtcblx0XHRcdFx0cC55MiA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuXHRcdFx0XHRpZiAocXggPCAwKSBwLngyICs9IHJlY3Qud2lkdGg7XG5cdFx0XHRcdHAueDIgKz0gd2luZG93LnBhZ2VYT2Zmc2V0O1xuXHRcdFx0XHRwLnkyICs9IHdpbmRvdy5wYWdlWU9mZnNldDtcblxuXHRcdFx0XHQvLyBwLngyID0gZC5kZXN0UmVjdC5sZWZ0ICsgZGRWaWV3LnRyYW5zZm9ybS50eFxuXHRcdFx0XHQvLyBcdCsgZGRWaWV3Ll9tZXRyaWNzLnRleHRMZWZ0O1xuXHRcdFx0XHQvLyBwLnkyID0gZC5kZXN0UmVjdC50b3AgKyBkZFZpZXcudHJhbnNmb3JtLnR5XG5cdFx0XHRcdC8vIFx0KyBkZFZpZXcuX21ldHJpY3Mub2Zmc2V0SGVpZ2h0IC8gMjtcblx0XHRcdFx0Ly8gaWYgKHF4IDwgMCkgcC54MiArPSBkZFZpZXcuX21ldHJpY3MudGV4dFdpZHRoO1xuXG5cdFx0XHRcdHAueDEgPSB4MTtcblx0XHRcdFx0cC55MSA9IHkxO1xuXHRcdFx0XHRwLnF4ID0gcXg7XG5cdFx0XHRcdGNvbm5lY3RvcnNbaV0gPSBwO1xuXHRcdFx0fVxuXHRcdFx0Y29ubmVjdG9ycy5zb3J0KChhLCBiKSA9PiBhLnkyIC0gYi55Mik7XG5cdFx0XHQvLyBzc0VsJ3MgbnVtYmVyIG9mIGl0ZW1zIGFib3ZlIGluIHRoZSBZIGF4aXNcblx0XHRcdHZhciBzaSA9IDA7XG5cdFx0XHQvLyBOb2RlIGZpcnN0IGFyYyAocjApIG1heCByYWRpdXMgKGN4MClcblx0XHRcdC8vIFRoZXkgYXJlIGNlbnRlcmVkIHRvIHRoZSBsYWJlbCwgc28gaGFsdmUgaXRcblx0XHRcdHZhciByTWF4MCA9IGRkTnVtICogckluYyAqIDAuNTtcblx0XHRcdC8vIGN5MSBvZmZzZXQgZnJvbSB5MVxuXHRcdFx0dmFyIGE7XG5cblx0XHRcdC8vIEZpcnN0IHBhc3MsIGNhbGMgZmlyc3QgcmFkaXVzIChyMCwgYXQgdGhlIHNvdXJjZSBvZiB0aGUgY29ubmVjdG9yKSxcblx0XHRcdC8vIGFuZCB0aGUgYW1vdW50IG9mIGRlc3QgY29ubmVjdG9ycyB2ZXJ0aWNhbGx5IGNsb3NlciB0byB0aGUgc291cmNlIChkaSlcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBkZE51bTsgaSsrKSB7XG5cdFx0XHRcdHAgPSBjb25uZWN0b3JzW2ldO1xuXG5cdFx0XHRcdGEgPSAoaSAtIChkZE51bSAtIDEpIC8gMikgKiBySW5jO1xuXHRcdFx0XHRwLmN5MSA9IHAueTEgKyBhO1xuXHRcdFx0XHRwLmN5MiA9IHAueTI7XG5cdFx0XHRcdHAucjAgPSBNYXRoLmFicyhhKTtcblx0XHRcdFx0cC5jeDAgPSBwLngxICsgKHJNYXgwIC0gcC5yMCkgKiBxeDtcblxuXHRcdFx0XHQvLyBJZiBzcmMgKGN5MSkgaXMgYWJvdmUgZGVzdCAoeTIpLCBkZWNyZWFzZSBpbmRleCBkaWZmIChkaSlcblx0XHRcdFx0cC5kaSA9ICgocC5jeTEgLSBwLnkyKSA+IDApID8gaSA6IGRkTnVtIC0gKGkgKyAxKTtcblx0XHRcdFx0c2kgPSBNYXRoLm1heChzaSwgcC5kaSk7XG5cblx0XHRcdFx0Ly8gcC5keCA9IHgxIC0gcC54Mjtcblx0XHRcdFx0Ly8gcC5keSA9IHkxIC0gcC55Mjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsYyBtYXggcmFkaXVzIHRoYXQgZml0cyBzTWluIHRvIGRNaW46XG5cdFx0XHQvLyBmcm9tIHNwYWNlIGJ0dyBzTWluIHRvIGRNaW4sIHJlbW92ZSBmaXJzdCBhcmMgYW5kIG1heCBhcmMgaW5jcmVhc2UsXG5cdFx0XHQvLyB0aGVuIGhhbHZlICh0aGVyZSdzIHR3byBhcmNzIGxlZnQpXG5cdFx0XHR2YXIgckJhc2VNYXggPSAoTWF0aC5hYnMoZE1pbiAtIHNNaW4pIC0gKHJNYXgwICsgKHNpICogckluYykpKSAvIDI7XG5cdFx0XHQvLyBFbnN1cmUgMCA+IHJCYXNlID4gckJhc2VNYXhcblx0XHRcdHJCYXNlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ockJhc2UsIHJCYXNlTWF4KSk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjpfY29tcHV0ZUNvbm5lY3RvcnMgMXJlbSA9ICVzcHggckJhc2U6JXMgckJhc2VNYXg6JXNcIiwgdGhpcy5jaWQsIHRoaXMuX3Jvb3RGb250U2l6ZSwgckJhc2UsIHJCYXNlTWF4KTtcblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGRkTnVtOyBpKyspIHtcblx0XHRcdFx0cCA9IGNvbm5lY3RvcnNbaV07XG5cdFx0XHRcdHAucjEgPSBwLmRpICogckluYyArIHJCYXNlO1xuXHRcdFx0XHRwLnIyID0gckJhc2U7XG5cblx0XHRcdFx0Ly8gcC5yMSA9IHAuZGkgKiBySW5jICsgckJhc2U7XG5cdFx0XHRcdC8vIHAucjIgPSAoc2kgLSBwLmRpKSAqIHJJbmMgKyByQmFzZTtcblxuXHRcdFx0XHRwLmN4MSA9IHNNaW4gKyAock1heDAgKiBxeCk7XG5cdFx0XHRcdHAuY3gyID0gZE1pbiAtICgoc2kgLSBwLmRpKSAqIHJJbmMpICogcXg7XG5cdFx0XHRcdC8vXG5cdFx0XHRcdC8vIHAuY3gxID0gc01pbiArIChyTWF4MCAqIHF4KTtcblx0XHRcdFx0Ly8gcC5jeDIgPSBkTWluO1xuXG5cdFx0XHRcdHR4ID0gY2FsY0FyY0hDb25uZWN0b3IocC5jeDEsIHAuY3kxLCBwLnIxLCBwLmN4MiwgcC5jeTIsIHAucjIsIDAuNyk7XG5cdFx0XHRcdGlmICh0eCkge1xuXHRcdFx0XHRcdHAudHgxID0gdHhbMF07XG5cdFx0XHRcdFx0cC50eDIgPSB0eFsxXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwLnR4MSA9IHAuY3gxO1xuXHRcdFx0XHRcdHAudHgyID0gcC5jeDI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cC5sZW5ndGggPSBNYXRoLmFicyhwLngxIC0gcC54MikgKyBNYXRoLmFicyhwLmN5MSAtIHAuY3kyKTtcblxuXHRcdFx0XHQvLyBGaW5kIG91dCBsb25nZXN0IG5vZGUgY29ubmVjdGlvbiBmb3Igc2V0TGluZURhc2hcblx0XHRcdFx0Ly8gcm9vdC5tYXhMZW5ndGggPSBNYXRoLm1heChyb290Lm1heExlbmd0aCwgcC5sZW5ndGgpO1xuXHRcdFx0fVxuXHRcdFx0Y29ubmVjdG9ycy5zb3J0KChhLCBiKSA9PlxuXHRcdFx0XHRhLmRpIC0gYi5kaSAvLyBTb3J0IGJ5IGluZGV4IGRpc3RhbmNlIHRvIGZyb20gc291cmNlIHBvaW50XG5cdFx0XHRcdC8vIGEucjAgLSBiLnIwIC8vIFNvcnQgYnkgZmlyc3QgYXJjIChjZW50ZXJlZClcblx0XHRcdFx0Ly8gKGEucjEgKyBhLnIyKSAtIChiLnIxICsgYi5yMilcblx0XHRcdFx0Ly8gYS50eDIgLSBiLnR4MlxuXHRcdFx0KTtcblxuXHRcdFx0Y29ubmVjdG9ycy5zaSA9IHNpO1xuXHRcdFx0Y29ubmVjdG9ycy5xeCA9IHF4O1xuXHRcdFx0Y29ubmVjdG9ycy5zTWluID0gc01pbjtcblx0XHRcdGNvbm5lY3RvcnMuZE1pbiA9IGRNaW47XG5cdFx0XHQvLyByb290LnggPSB4MTtcblx0XHRcdC8vIHJvb3QueSA9IHkxO1xuXHRcdFx0Ly8gcm9vdC5xeCA9IHF4O1xuXHRcdFx0Ly8gcm9vdC5yMCA9IHNpICogckluYztcblx0XHR9XG5cdFx0Ly8gZC5jb25uZWN0b3JzID0gY29ubmVjdG9ycztcblx0XHQvLyBkLnJvb3QgPSByb290O1xuXHRcdC8vIHJldHVybiBkO1xuXHRcdHJldHVybiBjb25uZWN0b3JzO1xuXHR9LFxuXG5cdF9kcmF3Q29ubmVjdG9yczogZnVuY3Rpb24ocHAsIHMsIGxWYWwsIGRpcikge1xuXHRcdHZhciBpLCBpaSwgcDtcblx0XHR2YXIgb3csIHJhMSwgcmEyLCB0YTtcblxuXHRcdGlmICghKHBwICYmIHBwLmxlbmd0aCAmJiBsVmFsKSkgcmV0dXJuO1xuXG5cdFx0aWkgPSBwcC5sZW5ndGg7XG5cblx0XHQvKiBvdXRsaW5lIHdpZHRoICovXG5cdFx0b3cgPSBzLmxpbmVXaWR0aCArIHMub3V0bGluZVdpZHRoO1xuXHRcdC8vIG93ID0gTWF0aC5taW4oXG5cdFx0Ly8gXHR0aGlzLl9yb3VuZFRvKHMucmFkaXVzSW5jcmVtZW50ICogdGhpcy5fcm9vdEZvbnRTaXplLCAwLjUpLFxuXHRcdC8vIFx0dGhpcy5fcm91bmRUbyhzLmxpbmVXaWR0aCAqICgxICsgcy5vdXRsaW5lV2lkdGgpLCAwLjUpXG5cdFx0Ly8gKTtcblxuXHRcdC8qIGFycm93IHJhZGl1c2VzLCBkaXJlY3Rpb24gKi9cblx0XHQvLyByYTEgPSAocy5yYWRpdXNJbmNyZW1lbnQgKiB0aGlzLl9yb290Rm9udFNpemUpICsgcy5saW5lV2lkdGg7XG5cdFx0cmExID0gcy5hcnJvd1NpemUgKiB0aGlzLl9yb290Rm9udFNpemU7XG5cdFx0cmEyID0gcmExICsgKG93IC0gcy5saW5lV2lkdGgpO1xuXHRcdHRhID0gTWF0aC5QSSAqIGRpcjtcblx0XHQvLyBkaXIgLT0gMjtcblxuXHRcdHRoaXMuX3NldFN0eWxlKHMpO1xuXG5cdFx0Ly8gaWYgKGxWYWwgPCAxKSB7XG5cdFx0Ly8gXHR0aGlzLl9jdHgubGluZURhc2hPZmZzZXQgPSBsTWF4ICogKDEgKyBsVmFsKTtcblx0XHQvLyBcdHRoaXMuX2N0eC5zZXRMaW5lRGFzaChbbE1heCwgbE1heF0pXG5cdFx0Ly8gXHQvLyB0aGlzLl9jdHgubGluZURhc2hPZmZzZXQgPSBsTWF4ICogKDEgKyBsVmFsKTs7XG5cdFx0Ly8gXHQvLyB0aGlzLl9jdHguc2V0TGluZURhc2goW2xNYXggKiAoMSAtIGxWYWwpLCBsTWF4XSk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gZm9yIChpID0gMDsgaSA8IGlpOyBpKyspIHtcblx0XHQvLyBwID0gcHBbaV07XG5cdFx0aWYgKHMub3V0bGluZVdpZHRoKSB7XG5cdFx0XHR0aGlzLl9jdHguc2F2ZSgpO1xuXHRcdFx0dGhpcy5fY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3V0XCI7XG5cdFx0XHR0aGlzLl9jdHgubGluZVdpZHRoID0gb3c7XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0XHRwID0gcHBbaV07XG5cblx0XHRcdFx0aWYgKGxWYWwgPCAxKSB7XG5cdFx0XHRcdFx0dGhpcy5fY3R4LmxpbmVEYXNoT2Zmc2V0ID0gcC5sZW5ndGggKiAoMSArIGxWYWwpO1xuXHRcdFx0XHRcdHRoaXMuX2N0eC5zZXRMaW5lRGFzaChbcC5sZW5ndGgsIHAubGVuZ3RoXSlcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9kcmF3Q29ubmVjdG9yKHAsIGksIHBwKTtcblx0XHRcdFx0aWYgKGxWYWwgPT0gMSkge1xuXHRcdFx0XHRcdHRoaXMuX2RyYXdBcnJvd2hlYWQocC54MiwgcC55MiwgcmEyLCBkaXIgKiB0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGlpOyBpKyspIHtcblx0XHRcdHAgPSBwcFtpXTtcblx0XHRcdGlmIChsVmFsIDwgMSkge1xuXHRcdFx0XHR0aGlzLl9jdHgubGluZURhc2hPZmZzZXQgPSBwLmxlbmd0aCAqICgxICsgbFZhbCk7XG5cdFx0XHRcdHRoaXMuX2N0eC5zZXRMaW5lRGFzaChbcC5sZW5ndGgsIHAubGVuZ3RoXSlcblx0XHRcdH1cblx0XHRcdHRoaXMuX2RyYXdDb25uZWN0b3IocCwgaSwgcHApO1xuXHRcdFx0aWYgKGxWYWwgPT0gMSkge1xuXHRcdFx0XHR0aGlzLl9kcmF3QXJyb3doZWFkKHAueDIsIHAueTIsIHJhMSwgZGlyICogdGEpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRfZHJhd0Fycm93aGVhZDogZnVuY3Rpb24oeCwgeSwgciwgdCkge1xuXHRcdC8vIHRoaXMuX2N0eC5zYXZlKCk7XG5cdFx0Ly8gdGhpcy5fY3R4LmxpbmVEYXNoT2Zmc2V0ID0gMDtcblx0XHQvLyB0aGlzLl9jdHguc2V0TGluZURhc2goW10pO1xuXHRcdENhbnZhc0hlbHBlci5hcnJvd2hlYWQyKHRoaXMuX2N0eCwgeCwgeSwgciwgdCk7XG5cdFx0dGhpcy5fY3R4LnN0cm9rZSgpO1xuXHRcdC8vIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cdH0sXG5cblx0X2RyYXdBcnJvd2hlYWQyOiBmdW5jdGlvbih4LCB5LCByLCB0KSB7XG5cdFx0Q2FudmFzSGVscGVyLmFycm93aGVhZCh0aGlzLl9jdHgsIHgsIHksIHIsIHQpO1xuXHRcdHRoaXMuX2N0eC5maWxsKCk7XG5cdH0sXG5cblx0Ly8gX2RyYXdBcnJvd2hlYWRIOiBmdW5jdGlvbih4LCB5LCByLCBhKSB7XG5cdC8vIFx0dGhpcy5fY3R4LnNhdmUoKTtcblx0Ly8gXHR0aGlzLl9jdHgubGluZURhc2hPZmZzZXQgPSAwO1xuXHQvLyBcdHRoaXMuX2N0eC5zZXRMaW5lRGFzaChbXSk7XG5cdC8vIFx0dGhpcy5fY3R4LmJlZ2luUGF0aCgpO1xuXHQvLyBcdHRoaXMuX2N0eC5tb3ZlVG8oeCArIHIgKiAxIC8gZGlyLCB5IC0gcik7XG5cdC8vIFx0dGhpcy5fY3R4LmxpbmVUbyh4LCB5KTtcblx0Ly8gXHR0aGlzLl9jdHgubGluZVRvKHggKyByICogMSAvIGRpciwgeSArIHIpO1xuXHQvLyBcdHRoaXMuX2N0eC5zdHJva2UoKTtcblx0Ly8gXHR0aGlzLl9jdHgucmVzdG9yZSgpO1xuXHQvLyB9LFxuXG5cdF9kcmF3Q29ubmVjdG9yOiBmdW5jdGlvbihwLCBpLCBwcCkge1xuXHRcdHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcblx0XHR0aGlzLl9jdHgubW92ZVRvKHAueDIsIHAuY3kyKTtcblx0XHR0aGlzLl9jdHguYXJjVG8ocC50eDIsIHAuY3kyLCBwLnR4MSwgcC5jeTEsIHAucjIpO1xuXHRcdHRoaXMuX2N0eC5hcmNUbyhwLnR4MSwgcC5jeTEsIHAuY3gxLCBwLmN5MSwgcC5yMSk7XG5cdFx0dGhpcy5fY3R4LmFyY1RvKHAuY3gwLCBwLmN5MSwgcC5jeDAsIHAueTEsIHAucjApO1xuXG5cdFx0Ly8gcC5jeDAwID0gcC54MSArICgocC5yMCArIHAuZGkpICogcC5xeCk7XG5cdFx0Ly8gcC5jeTAwID0gKHAuY3kxICsgcC55MSkgLyAyO1xuXHRcdC8vIHRoaXMuX2N0eC5hcmNUbyhwLmN4MDAsIHAuY3kxLCBwLmN4MDAsIHAuY3kwMCwgcC5yMCAvIDIpO1xuXHRcdC8vIHRoaXMuX2N0eC5hcmNUbyhwLmN4MDAsIHAueTEsIHAueDEsIHAueTEsIHAucjAgLyAyKTtcblx0XHQvLyB0aGlzLl9jdHgubGluZVRvKHAueDEsIHAueTEpO1xuXG5cdFx0Ly8gcC5jeDAwID0gcC54MSArIChwLnIwICogcC5xeCAqIDIpO1xuXHRcdC8vIHRoaXMuX2N0eC5saW5lVG8ocC5jeDAwLCBwLmN5MSk7XG5cdFx0Ly8gdGhpcy5fY3R4LnF1YWRyYXRpY0N1cnZlVG8ocC5jeDAsIHAuY3kxLCBwLmN4MCwgcC55MSk7XG5cblx0XHQvLyB0aGlzLl9jdHgubGluZVRvKHAuY3gwLCBwLnkxKTtcblx0XHR0aGlzLl9jdHguc3Ryb2tlKCk7XG5cdH0sXG5cblx0X3JvdW5kVG86IGZ1bmN0aW9uKG4sIHApIHtcblx0XHRpZiAocCA+IDEpIHAgPSAxIC8gcDtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZChuIC8gcCkgKiBwO1xuXHR9LFxuXG5cdC8qXG5cdF9jb21wdXRlQ29ubmVjdG9yczogZnVuY3Rpb24oZCkge1xuXHRcdHZhciByQmFzZSA9IGQucy5yYWRpdXNCYXNlO1xuXHRcdHZhciBySW5jID0gZC5zLnJhZGl1c0luY3JlbWVudDtcblx0XHR2YXIgc01pbiA9IGQueE1pbjtcblx0XHR2YXIgZE1pbiA9IGQuZGVzdE1pblg7XG5cblx0XHR2YXIgbE1heCA9IDA7XG5cdFx0dmFyIHAsIGNvbm5lY3RvcnMgPSBbXTtcblx0XHR2YXIgcXgsIHgxLCB5MSwgdHg7XG5cdFx0dmFyIHNpOyAvLyBzc0VsJ3MgbnVtYmVyIG9mIGl0ZW1zIGFib3ZlIGluIHRoZSBZIGF4aXNcblxuXHRcdGlmIChkLnJlY3QucmlnaHQgPCBkLmRlc3RSZWN0LmxlZnQpIHtcblx0XHRcdHF4ID0gMTtcblx0XHR9IGVsc2UgaWYgKGQuZGVzdFJlY3QucmlnaHQgPCBkLnJlY3QubGVmdCkge1xuXHRcdFx0cXggPSAtMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cXggPSAwO1xuXHRcdH1cblxuXHRcdHZhciBzc0VsLCBkZEVscywgZGROdW0sIHNzUmVjdCwgZGRSZWN0LCBpO1xuXHRcdHNzRWwgPSBkLnNyY1ZpZXcuZWwucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW0uc2VsZWN0ZWQgLmxhYmVsXCIpO1xuXHRcdGlmIChzc0VsKSB7XG5cdFx0XHRzc1JlY3QgPSBzc0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0eDEgPSBzc1JlY3QubGVmdDtcblx0XHRcdGlmIChxeCA+IDApIHgxICs9IHNzUmVjdC53aWR0aDtcblx0XHRcdHkxID0gc3NSZWN0LnRvcCArIHNzUmVjdC5oZWlnaHQgLyAyO1xuXHRcdFx0Ly8gcjIgPSByQmFzZTtcblx0XHRcdC8vIGN4MSA9IGQueE1pbjtcblxuXHRcdFx0c2kgPSAwO1xuXHRcdFx0ZGRFbHMgPSBkLmRlc3RWaWV3LmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGlzdC1pdGVtOm5vdCguZXhjbHVkZWQpIC5sYWJlbFwiKTtcblx0XHRcdGRkTnVtID0gZGRFbHMubGVuZ3RoO1xuXHRcdFx0Ly8gZHggPSBNYXRoLmFicyhkLnhNaW4gLSBkRGF0YS54TWluKTtcblxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGRkTnVtOyBpKyspIHtcblx0XHRcdFx0cCA9IHt9O1xuXHRcdFx0XHRkZFJlY3QgPSBkZEVsc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdFx0cC54MiA9IGRkUmVjdC5sZWZ0O1xuXHRcdFx0XHRpZiAocXggPCAwKSBwLngyICs9IGRkUmVjdC53aWR0aDtcblx0XHRcdFx0cC55MiA9IGRkUmVjdC50b3AgKyBkZFJlY3QuaGVpZ2h0IC8gMjtcblx0XHRcdFx0cC54MSA9IHgxO1xuXHRcdFx0XHRwLnkxID0geTE7XG5cdFx0XHRcdHAuZHggPSBwLngxIC0gcC54Mjtcblx0XHRcdFx0cC5keSA9IHAueTEgLSBwLnkyO1xuXHRcdFx0XHRwLnF4ID0gcXg7XG5cdFx0XHRcdHAucXkgPSBNYXRoLnNpZ24ocC5keSk7XG5cdFx0XHRcdC8vIHAuZExlbmd0aCA9IE1hdGguYWJzKHAueCkgKyBNYXRoLmFicyhwLnkpO1xuXHRcdFx0XHRwLmRpID0gcC5keSA+IDAgPyBpIDogZGROdW0gLSAoaSArIDEpO1xuXHRcdFx0XHRzaSA9IE1hdGgubWF4KHNpLCBwLmRpKTtcblx0XHRcdFx0Y29ubmVjdG9yc1tpXSA9IHA7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBhLCByTWF4MCA9IGRkTnVtICogMC41ICogckluYztcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBkZE51bTsgaSsrKSB7XG5cdFx0XHRcdHAgPSBjb25uZWN0b3JzW2ldO1xuXHRcdFx0XHRwLnIxID0gcC5kaSAqIHJJbmMgKyByQmFzZTtcblx0XHRcdFx0cC5yMiA9IHJCYXNlO1xuXHRcdFx0XHQvLyBwLnIyID0gKHNpIC0gcC5kaSkgKiBySW5jICsgckJhc2U7XG5cblx0XHRcdFx0cC5jeDEgPSBzTWluO1xuXHRcdFx0XHRwLmN4MiA9IGRNaW4gLSAoKHNpIC0gcC5kaSkgKiBySW5jKSAqIHF4O1xuXHRcdFx0XHQvLyBwLmN4MiA9IGRNaW47XG5cblx0XHRcdFx0YSA9IChpIC0gKGRkTnVtIC0gMSkgLyAyKSAqIHJJbmM7XG5cdFx0XHRcdHAuY3kxID0gcC55MSArIGE7XG5cdFx0XHRcdHAuY3kyID0gcC55MjtcblxuXHRcdFx0XHRhID0gTWF0aC5hYnMoYSk7XG5cdFx0XHRcdHAucjAgPSBhO1xuXHRcdFx0XHRwLmN4MCA9IHAueDEgKyAock1heDAgLSBhKSAqIHF4O1xuXG5cdFx0XHRcdHR4ID0gY2FsY0FyY0hDb25uZWN0b3IocC5jeDEsIHAuY3kxLCBwLnIxLCBwLmN4MiwgcC5jeTIsIHAucjIsIDAuOCk7XG5cdFx0XHRcdHAudHgxID0gdHhbMF07XG5cdFx0XHRcdHAudHgyID0gdHhbMV07XG5cblx0XHRcdFx0Ly8gRmluZCBvdXQgbG9uZ2VzdCBub2RlIGNvbm5lY3Rpb24gZm9yIHNldExpbmVEYXNoXG5cdFx0XHRcdGxNYXggPSBNYXRoLm1heChsTWF4LCBNYXRoLmFicyhwLngxIC0gcC54MikgKyBNYXRoLmFicyhwLmN5MSAtIHAuY3kyKSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBTb3J0IGJ5IGRpc3RhbmNlIHkxIChvcmlnaW5hbCkgPiBjeTEgKHJJbmMgb2Zmc2V0KSBkaXN0YW5jZVxuXHRcdFx0Y29ubmVjdG9ycy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdFx0Ly8gcmV0dXJuIE1hdGguYWJzKGIueTEgLSBiLmN5MSkgLSBNYXRoLmFicyhhLnkxIC0gYS5jeTEpO1xuXHRcdFx0XHQvLyByZXR1cm4gYS5yMCAtIGIucjA7XG5cdFx0XHRcdHJldHVybiBiLmRpIC0gYS5kaTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRkLmNvbm5lY3RvcnMgPSBjb25uZWN0b3JzO1xuXHRcdGQubWF4TGVuZ3RoID0gbE1heDtcblx0XHRkLm1heExlbmd0aCA9IHF4O1xuXHR9LCAqL1xuXG59KTtcblxuaWYgKERFQlVHKSB7XG5cdC8vIEdyYXBoVmlldy5wcm90b3R5cGUuX2xvZ0ZsYWdzID0gXCJcIjtcblxuXHR2YXIgYXBwbHlGbiA9IGZ1bmN0aW9uKGNvbnRleHQsIGFyZ3MpIHtcblx0XHRyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNoaWZ0LmFwcGx5KGFyZ3MpLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHR9XG5cblx0R3JhcGhWaWV3LnByb3RvdHlwZS5fZHJhd0Nvbm5lY3RvciA9IF8ud3JhcChHcmFwaFZpZXcucHJvdG90eXBlLl9kcmF3Q29ubmVjdG9yLCBmdW5jdGlvbihmbiwgcCwgaSwgcHApIHtcblx0XHRpZiAoIXRoaXMuX2RlYnVnR3JhcGgpIHtcblx0XHRcdC8vIHZpc3VhbCBkZWJ1ZyBhaWRzIGFyZSBvZmZcblx0XHRcdHJldHVybiBmbi5jYWxsKHRoaXMsIHAsIGksIHBwKTtcblx0XHR9XG5cblx0XHQvLyB2YXIgaXNSdGwgPSBwLnF4IDwgMDtcblx0XHR2YXIgaXNGaXJzdCA9IGkgPT0gMDtcblx0XHR2YXIgaXNMYXN0ID0gaSA9PSAocHAubGVuZ3RoIC0gMSk7XG5cdFx0Ly8gZ3VpZGUgY29sb3Jcblx0XHR2YXIgZ3MgPSBfZFN0eWxlc1tpc0ZpcnN0ID8gXCJzYWxtb25fZGFzaGVkXCIgOiBcImxpZ2h0c2t5Ymx1ZV9kYXNoZWRcIl07XG5cblx0XHRpZiAoaXNGaXJzdCkge1xuXHRcdFx0Q2FudmFzSGVscGVyLmRyYXdWR3VpZGUodGhpcy5fY3R4LCBfZFN0eWxlc1tcImdyZXlcIl0sIHBwLnNNaW4pO1xuXHRcdFx0Q2FudmFzSGVscGVyLmRyYXdWR3VpZGUodGhpcy5fY3R4LCBfZFN0eWxlc1tcImdyZXlcIl0sIHBwLmRNaW4pO1xuXHRcdH1cblxuXHRcdGlmIChpc0ZpcnN0KSB7XG5cdFx0XHRDYW52YXNIZWxwZXIuZHJhd0hHdWlkZSh0aGlzLl9jdHgsIF9kU3R5bGVzW1wic2lsdmVyX2Rhc2hlZFwiXSwgcC55MSk7XG5cdFx0XHRDYW52YXNIZWxwZXIuZHJhd1ZHdWlkZSh0aGlzLl9jdHgsIF9kU3R5bGVzW1wic2lsdmVyX2Rhc2hlZFwiXSwgcC54MSk7XG5cdFx0XHRDYW52YXNIZWxwZXIuZHJhd0NpcmNsZSh0aGlzLl9jdHgsIF9kU3R5bGVzW1wibWlkbmlnaHRibHVlXCJdLCBwLngxLCBwLnkxLCAxMCk7XG5cdFx0fVxuXHRcdGlmIChpc0ZpcnN0IHx8IGlzTGFzdCkge1xuXHRcdFx0Ly8gQ2FudmFzSGVscGVyLmRyYXdWR3VpZGUodGhpcy5fY3R4LCBncywgcC5jeDEgKyAocC5yMSAqIHAucXgpKTtcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Vkd1aWRlKHRoaXMuX2N0eCwgZ3MsIHAudHgyKTtcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Vkd1aWRlKHRoaXMuX2N0eCwgZ3MsIHAuY3gyIC0gKHAucjIgKiBwLnF4KSk7XG5cdFx0XHQvLyBDYW52YXNIZWxwZXIuZHJhd1ZHdWlkZSh0aGlzLl9jdHgsIGdzLCBwLmN4Mik7XG5cdFx0XHQvLyBDYW52YXNIZWxwZXIuZHJhd0hHdWlkZSh0aGlzLl9jdHgsIGdzLCBwLmN5Mik7XG5cdFx0fVxuXHRcdGlmIChpc0ZpcnN0IHx8IGlzTGFzdCkge1xuXHRcdFx0dGhpcy5fY3R4LnNhdmUoKTtcblx0XHRcdHRoaXMuX2N0eC5zdHJva2VTdHlsZSA9IF9kU3R5bGVzWyhpc0ZpcnN0ID8gXCJyZWRcIiA6IFwiYmx1ZVwiKV0uc3Ryb2tlU3R5bGU7XG5cdFx0XHR0aGlzLl9jdHgubGluZVdpZHRoICo9IDEuNTtcblx0XHR9XG5cdFx0Ly8gfVxuXG5cdFx0Zm4uY2FsbCh0aGlzLCBwLCBpLCBwcCk7XG5cblx0XHQvLyBpZiAoaXNSdGwpIHtcblx0XHRpZiAoaXNGaXJzdCB8fCBpc0xhc3QpIHtcblx0XHRcdHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cdFx0fVxuXHRcdC8vIHBvaW50IGNvbG9yXG5cdFx0dmFyIHBDb2wgPSBpc0xhc3QgPyBcIm1pZG5pZ2h0Ymx1ZVwiIDogaXNGaXJzdCA/IFwic2llbm5hXCIgOiBcImdyZXlcIjtcblx0XHR2YXIgcHMgPSBfZFN0eWxlc1twQ29sXTtcblx0XHR2YXIgcGYgPSBfZFN0eWxlc1twQ29sICsgXCJfZmlsbFwiXTtcblxuXHRcdC8vIENhbnZhc0hlbHBlci5kcmF3Q3Jvc3NoYWlyKHRoaXMuX2N0eCwgcHMsIHAueDEgKyAoKHAucjAgKyBwLmRpKSAqIHAucXgpLCBwLmN5MSwgMyk7XG5cblxuXHRcdGlmIChpc0ZpcnN0IHx8IGlzTGFzdCkge1xuXHRcdFx0Ly8gbW92ZVRvKHAueDIsIHAuY3kyKVxuXHRcdFx0Q2FudmFzSGVscGVyLmRyYXdDcm9zc2hhaXIodGhpcy5fY3R4LCBwcywgcC54MiwgcC5jeTIsIDEwKTtcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Q2lyY2xlKHRoaXMuX2N0eCwgcHMsIHAueDIsIHAuY3kyLCAzKTtcblxuXHRcdFx0Ly8gYXJjVG8gIzE6IChwLnR4MiwgcC5jeTIsIHAudHgxLCBwLmN5MSwgcC5yMilcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3U3F1YXJlKHRoaXMuX2N0eCwgcHMsIHAudHgyLCBwLmN5MiwgNCk7IC8vIHAxXG5cdFx0XHRDYW52YXNIZWxwZXIuZHJhd0NpcmNsZSh0aGlzLl9jdHgsIHBmLCBwLnR4MSwgcC5jeTEsIDIpOyAvLyBwMlxuXG5cdFx0XHQvLyBhcmNUbyAjMjogKHAudHgxLCBwLmN5MSwgcC5jeDEsIHAuY3kxLCBwLnIxKVxuXHRcdFx0Q2FudmFzSGVscGVyLmRyYXdTcXVhcmUodGhpcy5fY3R4LCBwcywgcC50eDEsIHAuY3kxLCA0KTsgLy8gcDFcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Q2lyY2xlKHRoaXMuX2N0eCwgcGYsIHAuY3gxLCBwLmN5MSwgMik7IC8vIHAyXG5cblx0XHRcdC8vIGFyY1RvICMyOiAocC5jeDAsIHAuY3kxLCBwLmN4MCwgcC55MSwgcC5yMClcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3U3F1YXJlKHRoaXMuX2N0eCwgcHMsIHAuY3gwLCBwLmN5MSwgNCk7IC8vIHAxXG5cdFx0XHRDYW52YXNIZWxwZXIuZHJhd0NpcmNsZSh0aGlzLl9jdHgsIHBmLCBwLmN4MCwgcC55MSwgMik7IC8vIHAyXG5cblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Q2lyY2xlKHRoaXMuX2N0eCwgX2RTdHlsZXNbXCJncmVlblwiXSwgcC50eDEsIHAuY3kxLCA0KTtcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Q2lyY2xlKHRoaXMuX2N0eCwgX2RTdHlsZXNbXCJncmVlblwiXSwgcC5jeDEsIHAuY3kxLCA0KTtcblx0XHRcdENhbnZhc0hlbHBlci5kcmF3Q2lyY2xlKHRoaXMuX2N0eCwgX2RTdHlsZXNbXCJncmVlblwiXSwgcC5jeDIsIHAuY3kyLCA0KTtcblx0XHR9XG5cdFx0Ly8gfVxuXHR9KTtcblxuXG5cdEdyYXBoVmlldy5wcm90b3R5cGUuX3RyYWNlU2Nyb2xsID0gZnVuY3Rpb24odHlwZSkge1xuXHRcdHZhciB0cGwgPSBcIiVzOlslc10gRFBSOiVpIFwiICtcblx0XHRcdFwiW3dpbmRvdzogJWkgJWldIFwiICtcblx0XHRcdFwiW2h0bWw6ICVpICVpICVpXSBcIiArXG5cdFx0XHRcIltib2R5OiAlaSAlaSAlaV0gXCIgK1xuXHRcdFx0XCJbY29udGFpbmVyOiAlaSAlaSAlaV0gXCIgK1xuXHRcdFx0XCJbZ3JhcGg6ICVpICVpICVpXVwiO1xuXHRcdGNvbnNvbGUubG9nKHRwbCwgdGhpcy5jaWQsIHR5cGUsIHRoaXMuX2NhbnZhc1JhdGlvLFxuXHRcdFx0d2luZG93LnBhZ2VZT2Zmc2V0LFxuXHRcdFx0d2luZG93LnBhZ2VZT2Zmc2V0LFxuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcblx0XHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsXG5cdFx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LFxuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsXG5cdFx0XHRkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCxcblx0XHRcdGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LFxuXHRcdFx0ZG9jdW1lbnQuYm9keS5maXJzdEVsZW1lbnRDaGlsZC5jbGllbnRIZWlnaHQsXG5cdFx0XHRkb2N1bWVudC5ib2R5LmZpcnN0RWxlbWVudENoaWxkLnNjcm9sbFRvcCxcblx0XHRcdGRvY3VtZW50LmJvZHkuZmlyc3RFbGVtZW50Q2hpbGQuc2Nyb2xsSGVpZ2h0LFxuXHRcdFx0dGhpcy5lbC5jbGllbnRIZWlnaHQsXG5cdFx0XHR0aGlzLmVsLnNjcm9sbFRvcCxcblx0XHRcdHRoaXMuZWwuc2Nyb2xsSGVpZ2h0XG5cdFx0KTtcblx0fTtcblxuXHRpZiAoR3JhcGhWaWV3LnByb3RvdHlwZS5fbG9nRmxhZ3Muc3BsaXQoXCIgXCIpW1widmlldy5yZW5kZXJcIl0pIHtcblx0XHQvLyBHcmFwaFZpZXcucHJvdG90eXBlLl9yZXF1ZXN0UmVuZGVyID0gXy53cmFwKENhbnZhc1ZpZXcucHJvdG90eXBlLl9yZXF1ZXN0UmVuZGVyLCBmdW5jdGlvbihmbikge1xuXHRcdC8vIFx0ZGVib3VuY2VkTG9nKFwiJXM6Ol9yZXF1ZXN0UmVuZGVyXCIsIHRoaXMuY2lkKTtcblx0XHQvLyBcdHJldHVybiBhcHBseU1ldGhvZCh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdC8vIH0pO1xuXHRcdHZhciBkZWJvdW5jZWRMb2cgPSBfLmRlYm91bmNlKF8uYmluZChjb25zb2xlLmxvZywgY29uc29sZSksIDUwMCwgdHJ1ZSk7XG5cblx0XHRHcmFwaFZpZXcucHJvdG90eXBlLl9hcHBseVJlbmRlciA9IF8ud3JhcChDYW52YXNWaWV3LnByb3RvdHlwZS5fYXBwbHlSZW5kZXIsIGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHR2YXIgcmV0dmFsO1xuXHRcdFx0dGhpcy5fbG9nRmxhZ3NbXCJ2aWV3LnJlbmRlclwiXSA9IGZhbHNlO1xuXHRcdFx0ZGVib3VuY2VkTG9nKFwiJXM6Ol9hcHBseVJlbmRlciBbZGVib3VuY2VkXVwiLCB0aGlzLmNpZCk7XG5cdFx0XHRyZXR2YWwgPSBhcHBseUZuKHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLl9sb2dGbGFnc1tcInZpZXcucmVuZGVyXCJdID0gdHJ1ZTtcblx0XHRcdHJldHVybiByZXR2YWw7XG5cdFx0fSk7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHcmFwaFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9jb21wb25lbnQvR3JvdXBpbmdMaXN0Vmlld1xuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9GaWx0ZXJhYmxlTGlzdFZpZXd9ICovXG5jb25zdCBGaWx0ZXJhYmxlTGlzdFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvY29tcG9uZW50L0ZpbHRlcmFibGVMaXN0Vmlld1wiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9DbGlja2FibGVSZW5kZXJlcn0gKi9cbmNvbnN0IENsaWNrYWJsZVJlbmRlcmVyID0gcmVxdWlyZShcImFwcC92aWV3L3JlbmRlci9DbGlja2FibGVSZW5kZXJlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9MYWJlbFJlbmRlcmVyfSAqL1xuY29uc3QgTGFiZWxSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvTGFiZWxSZW5kZXJlclwiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2FycmF5L2RpZmZlcmVuY2V9ICovXG4vLyB2YXIgZGlmZiA9IHJlcXVpcmUoXCJ1dGlscy9hcnJheS9kaWZmZXJlbmNlXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvR3JvdXBpbmdMaXN0Vmlld31cbiAqL1xudmFyIEdyb3VwaW5nTGlzdFZpZXcgPSBGaWx0ZXJhYmxlTGlzdFZpZXcuZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0Y2lkUHJlZml4OiBcImdyb3VwaW5nTGlzdFwiLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0dGFnTmFtZTogXCJkbFwiLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0Y2xhc3NOYW1lOiBcImdyb3VwZWRcIixcblxuXHQvKiogQHR5cGUge0Z1bmN0aW9ufG51bGx9IGVtcHR5IGFycmF5ICovXG5cdF9ncm91cGluZ0ZuOiBudWxsLCAvL2Z1bmN0aW9uKCkgeyByZXR1cm4gbnVsbDsgfSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGRlZmF1bHRzOiBfLmRlZmF1bHRzKHtcblx0XHQvLyBkZWZhdWx0czoge1xuXHRcdHJlbmRlcmVyOiBDbGlja2FibGVSZW5kZXJlci5leHRlbmQoe1xuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0Y2lkUHJlZml4OiBcImdyb3VwaW5nTGlzdEl0ZW1cIixcblx0XHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRcdHRhZ05hbWU6IFwiZGxcIixcblx0XHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRcdGNsYXNzTmFtZTogXCJsaXN0LWl0ZW0gbGlzdC1ub2RlXCIsXG5cdFx0fSksXG5cdFx0Z3JvdXBpbmdSZW5kZXJlcjogTGFiZWxSZW5kZXJlci5leHRlbmQoe1xuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0Y2lkUHJlZml4OiBcImdyb3VwaW5nTGlzdEdyb3VwXCIsXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHR0YWdOYW1lOiBcImR0XCIsXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHRjbGFzc05hbWU6IFwibGlzdC1ncm91cCBsaXN0LW5vZGVcIixcblx0XHR9KSxcblx0XHRncm91cGluZ0ZuOiBudWxsLFxuXHRcdC8vIH0sXG5cdH0sIEZpbHRlcmFibGVMaXN0Vmlldy5wcm90b3R5cGUuZGVmYXVsdHMpLFxuXG5cdHByb3BlcnRpZXM6IHtcblx0XHRncm91cHM6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9ncm91cHM7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRmaWx0ZXJlZEdyb3Vwczoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2ZpbHRlcmVkR3JvdXBzO1xuXHRcdFx0fVxuXHRcdH0sXG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0RmlsdGVyYWJsZUxpc3RWaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cblx0XHR0aGlzLl9ncm91cHMgPSBbXTtcblx0XHR0aGlzLl9maWx0ZXJlZEdyb3VwcyA9IFtdO1xuXHRcdHRoaXMuX2NoYW5nZWRGaWx0ZXJlZEdyb3VwcyA9IFtdO1xuXHRcdHRoaXMuX2dyb3Vwc0J5SXRlbUNpZCA9IHt9O1xuXG5cdFx0dGhpcy5fZ3JvdXBpbmdGbiA9IG9wdGlvbnMuZ3JvdXBpbmdGbjtcblx0XHR0aGlzLmdyb3VwaW5nUmVuZGVyZXIgPSBvcHRpb25zLmdyb3VwaW5nUmVuZGVyZXI7XG5cdFx0dGhpcy5fY29tcHV0ZUdyb3VwcygpO1xuXHRcdGlmICh0aGlzLl9ncm91cGluZ0ZuKSB7XG5cdFx0XHR0aGlzLl9ncm91cHMuZm9yRWFjaCh0aGlzLmNyZWF0ZUdyb3VwaW5nVmlldywgdGhpcyk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgb25jZSBvbiBjb2xsZWN0aW9uIGNoYW5nZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X2NvbXB1dGVHcm91cHM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoaXMuX2dyb3VwcyA9IF8udW5pcSh0aGlzLmNvbGxlY3Rpb24ubWFwKHRoaXMuX2dyb3VwaW5nRm4sIHRoaXMpKTtcblx0XHR0aGlzLl9ncm91cHMubGVuZ3RoID0gMDtcblx0XHQvLyB0aGlzLl9ncm91cEl0ZW1zLmxlbmd0aCA9IDA7XG5cdFx0aWYgKHRoaXMuX2dyb3VwaW5nRm4pIHtcblx0XHRcdHRoaXMuY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0dmFyIGdJZHgsIGdPYmo7XG5cdFx0XHRcdGdPYmogPSB0aGlzLl9ncm91cGluZ0ZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdGlmIChnT2JqKSB7XG5cdFx0XHRcdFx0Z0lkeCA9IHRoaXMuX2dyb3Vwcy5pbmRleE9mKGdPYmopO1xuXHRcdFx0XHRcdGlmIChnSWR4ID09IC0xKSB7XG5cdFx0XHRcdFx0XHRnSWR4ID0gdGhpcy5fZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0XHRcdHRoaXMuX2dyb3Vwc1tnSWR4XSA9IGdPYmo7XG5cdFx0XHRcdFx0XHQvLyB0aGlzLl9ncm91cEl0ZW1zW2dJZHhdID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIHRoaXMuX2dyb3VwSXRlbXNbZ0lkeF0ucHVzaChpdGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLl9ncm91cHNCeUl0ZW1DaWRbaXRlbS5jaWRdID0gZ09iajtcblx0XHRcdH0sIHRoaXMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdHRoaXMuX2dyb3Vwc0J5SXRlbUNpZFtpdGVtLmNpZF0gPSBudWxsO1xuXHRcdFx0fSwgdGhpcyk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKiBAcHJpdmF0ZSBDcmVhdGUgY2hpbGRyZW4gdmlld3MgKi9cblx0Y3JlYXRlR3JvdXBpbmdWaWV3OiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0dmFyIHZpZXcgPSBuZXcgdGhpcy5ncm91cGluZ1JlbmRlcmVyKHtcblx0XHRcdG1vZGVsOiBpdGVtLFxuXHRcdFx0ZWw6IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5saXN0LWdyb3VwW2RhdGEtaWQ9XFxcIlwiICsgaXRlbS5pZCArIFwiXFxcIl1cIilcblx0XHR9KTtcblx0XHR0aGlzLml0ZW1WaWV3cy5hZGQodmlldyk7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogRmlsdGVyIGltcGwgMVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQG92ZXJyaWRlICovXG5cdC8qXG5cdGNvbXB1dGVGaWx0ZXJfMTogZnVuY3Rpb24oKSB7XG5cdFx0RmlsdGVyYWJsZUxpc3RWaWV3LnByb3RvdHlwZS5jb21wdXRlRmlsdGVyXzEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdGlmICh0aGlzLl9ncm91cGluZ0ZuKSB7XG5cdFx0XHRpZiAodGhpcy5fZmlsdGVyZWRJdGVtcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHR0aGlzLl9maWx0ZXJlZEdyb3VwcyA9IFtdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fZmlsdGVyZWRHcm91cHMgPSBfLnVuaXEodGhpcy5fZmlsdGVyZWRJdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLl9ncm91cHNCeUl0ZW1DaWRbaXRlbS5jaWRdO1xuXHRcdFx0XHR9LCB0aGlzKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIGlmICh0aGlzLl9ncm91cGluZ0ZuKSB7XG5cdFx0Ly8gXHRpZiAodGhpcy5fZmlsdGVyZWRJdGVtcy5sZW5ndGggPT0gMCkge1xuXHRcdC8vIFx0XHR0aGlzLl9maWx0ZXJlZEdyb3VwcyA9IFtdO1xuXHRcdC8vIFx0XHR0aGlzLl9ncm91cHMuZm9yRWFjaChmdW5jdGlvbihncm91cCkge1xuXHRcdC8vIFx0XHRcdHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKGdyb3VwKS5lbC5jbGFzc0xpc3QucmVtb3ZlKFwiZXhjbHVkZWRcIik7XG5cdFx0Ly8gXHRcdH0sIHRoaXMpO1xuXHRcdC8vIFx0fSBlbHNlIHtcblx0XHQvLyBcdFx0dGhpcy5fZmlsdGVyZWRHcm91cHMgPSBfLnVuaXEodGhpcy5fZmlsdGVyZWRJdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSkge1xuXHRcdC8vIFx0XHRcdHJldHVybiB0aGlzLl9ncm91cHNCeUl0ZW1DaWRbaXRlbS5jaWRdO1xuXHRcdC8vIFx0XHR9LCB0aGlzKSk7XG5cdFx0Ly8gXHRcdHRoaXMuX2dyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKGdyb3VwKSB7XG5cdFx0Ly8gXHRcdFx0dGhpcy5pdGVtVmlld3MuZmluZEJ5TW9kZWwoZ3JvdXApLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJleGNsdWRlZFwiLCB0aGlzLl9maWx0ZXJlZEdyb3Vwcy5pbmRleE9mKGdyb3VwKSA9PSAtMSk7XG5cdFx0Ly8gXHRcdH0sIHRoaXMpO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH1cblx0fSxcblx0Ki9cblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBGaWx0ZXIgaW1wbCAyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0Ly8gcmVuZGVyRmlsdGVyRm5fMjogZnVuY3Rpb24oKSB7XG5cdC8vIFx0RmlsdGVyYWJsZUxpc3RWaWV3LnByb3RvdHlwZS5yZW5kZXJGaWx0ZXJGbl8yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdC8vIH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjb21wdXRlRmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHRGaWx0ZXJhYmxlTGlzdFZpZXcucHJvdG90eXBlLmNvbXB1dGVGaWx0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdGlmICh0aGlzLl9ncm91cGluZ0ZuKSB7XG5cdFx0XHRpZiAodGhpcy5fZmlsdGVyZWRJdGVtcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHR0aGlzLl9maWx0ZXJlZEdyb3VwcyA9IHRoaXMuX2dyb3Vwcy5jb25jYXQoKTsgLy9bXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX2ZpbHRlcmVkR3JvdXBzID0gXy51bmlxKHRoaXMuX2ZpbHRlcmVkSXRlbXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fZ3JvdXBzQnlJdGVtQ2lkW2l0ZW0uY2lkXTtcblx0XHRcdFx0fSwgdGhpcykpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGFwcGx5RmlsdGVyOiBmdW5jdGlvbigpIHtcblx0XHRGaWx0ZXJhYmxlTGlzdFZpZXcucHJvdG90eXBlLmFwcGx5RmlsdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cblx0XHR0aGlzLl9ncm91cHMuZm9yRWFjaChmdW5jdGlvbihncm91cCkge1xuXHRcdFx0dGhpcy5pdGVtVmlld3MuZmluZEJ5TW9kZWwoZ3JvdXApLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJleGNsdWRlZFwiLCAodGhpcy5fZmlsdGVyZWRHcm91cHMuaW5kZXhPZihncm91cCkgPT0gLTEpKTtcblx0XHR9LCB0aGlzKTtcblx0fSxcblxuXHQvLyBjb21wdXRlRmlsdGVyZWQ6IGZ1bmN0aW9uKCkge1xuXHQvLyBcdEZpbHRlcmFibGVMaXN0Vmlldy5wcm90b3R5cGUuY29tcHV0ZUZpbHRlcmVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdC8vIH0sXG5cdC8vXG5cdC8vIHJlbmRlckZpbHRlcmVkOiBmdW5jdGlvbigpIHtcblx0Ly8gXHRGaWx0ZXJhYmxlTGlzdFZpZXcucHJvdG90eXBlLnJlbmRlckZpbHRlcmVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdC8vIH0sXG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3VwaW5nTGlzdFZpZXc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9jb21wb25lbnQvUGxheVRvZ2dsZVN5bWJvbFxuICovXG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG4vLyB2YXIgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9DYW52YXNWaWV3fSAqL1xuY29uc3QgQ2FudmFzVmlldyA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL0NhbnZhc1ZpZXdcIik7XG5cbi8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG5jb25zdCBDb2xvciA9IHJlcXVpcmUoXCJjb2xvclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2NhbnZhcy9iaXRtYXAvc3RhY2tCbHVyUkdCfSAqL1xuY29uc3Qgc3RhY2tCbHVyUkdCID0gcmVxdWlyZShcInV0aWxzL2NhbnZhcy9iaXRtYXAvc3RhY2tCbHVyUkdCXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvY2FudmFzL2JpdG1hcC9nZXRBdmVyYWdlUkdCfSAqL1xuY29uc3QgZ2V0QXZlcmFnZVJHQiA9IHJlcXVpcmUoXCJ1dGlscy9jYW52YXMvYml0bWFwL2dldEF2ZXJhZ2VSR0JcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9jYW52YXMvYml0bWFwL211bHRpcGx5fSAqL1xuY29uc3QgbXVsdGlwbHkgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9tdWx0aXBseVwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2NhbnZhcy9iaXRtYXAvZGVzYXR1cmF0ZX0gKi9cbmNvbnN0IGRlc2F0dXJhdGUgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9kZXNhdHVyYXRlXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvY2FudmFzL0NhbnZhc0hlbHBlcn0gKi9cbmNvbnN0IHJvdW5kUmVjdCA9IHJlcXVpcmUoXCJ1dGlscy9jYW52YXMvQ2FudmFzSGVscGVyXCIpLnJvdW5kUmVjdDtcblxuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvZWFzZS9mbi9lYXNlSW5RdWFkfSAqL1xuY29uc3QgZWFzZUluID0gcmVxdWlyZShcInV0aWxzL2Vhc2UvZm4vZWFzZUluUXVhZFwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL2Vhc2UvZm4vZWFzZU91dFF1YWR9ICovXG5jb25zdCBlYXNlT3V0ID0gcmVxdWlyZShcInV0aWxzL2Vhc2UvZm4vZWFzZU91dFF1YWRcIik7XG5cbnZhciBQSTIgPSBNYXRoLlBJICogMjtcbnZhciBMT09QX09GRlNFVCA9IDEuODMzMzMzO1xuY29uc3QgSU5URVBfTVMgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKS5UUkFOU0lUSU9OX0RVUkFUSU9OO1xudmFyIEZJTFRFUl9SRUZSRVNIX1RIUkVTSE9MRCA9IDAuNTsgLy9zZWNvbmRzIGVsYXBzZWRcbnZhciBGSUxURVJfU0NBTEUgPSAxLjU7XG52YXIgRklMVEVSX1JBRElVUyA9IDMwOyAvL3BpeGVsc1xudmFyIEZJTFRFUl9NVUxUSVBMWSA9IDAuMTtcblxudmFyIFBsYXlUb2dnbGVTeW1ib2wgPSB7XG5cdFBMQVk6IFwicGxheWluZ1wiLFxuXHRQQVVTRTogXCJwYXVzZWRcIixcblx0V0FJVElORzogXCJ3YWl0aW5nXCIsXG5cdEVOREVEOiBcImVuZGVkXCIsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbnZhc1ZpZXcuZXh0ZW5kKHtcblxuXHRcdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRcdGNpZFByZWZpeDogXCJwbGF5VG9nZ2xlU3ltYm9sXCIsXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdFx0Y2xhc3NOYW1lOiBcInBsYXktdG9nZ2xlXCIsXG5cblx0XHRkZWZhdWx0czoge1xuXHRcdFx0dmFsdWVzOiB7XG5cdFx0XHRcdF9sb29wOiAwLFxuXHRcdFx0XHRfYXJjOiAwLFxuXHRcdFx0fSxcblx0XHRcdG1heFZhbHVlczoge1xuXHRcdFx0XHRfbG9vcDogMVxuXHRcdFx0fSxcblx0XHRcdGNvbG9yOiBcInJnYmEoMjU1LDI1NSwyNTUsMS4wKVwiLFxuXHRcdFx0YmFja2dyb3VuZENvbG9yOiBcInJnYmEoMCwwLDAsMC4yNSlcIixcblx0XHRcdHBhdXNlZDogdHJ1ZSxcblx0XHRcdHN5bWJvbE5hbWU6IFwiXCIsXG5cdFx0XHQvLyBib3JkZXJSYWRpdXM6IDMsXG5cdFx0XHQvLyBib3JkZXJXaWR0aDogMyxcblx0XHR9LFxuXG5cdFx0cHJvcGVydGllczoge1xuXHRcdFx0c3ltYm9sTmFtZToge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLl9zeW1ib2xOYW1lO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdFx0dGhpcy5fc2V0U3ltYm9sTmFtZSh2YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSxcblxuXHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0XHQvLyBUT0RPOiBjbGVhbnVwIG9wdGlvbnMgbWVzcyBpbiBDYW52YXNWaWV3XG5cdFx0XHRDYW52YXNWaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLl9vcHRpb25zID0gXy5leHRlbmQodGhpcy5fb3B0aW9ucywgXy5waWNrKG9wdGlvbnMsIFwic3ltYm9sTmFtZVwiLCBcImJvcmRlclJhZGl1c1wiLCBcImJvcmRlcldpZHRoXCIpKTtcblx0XHRcdHRoaXMuc3ltYm9sTmFtZSA9IHRoaXMuX29wdGlvbnMuc3ltYm9sTmFtZTtcblx0XHR9LFxuXG5cdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdG1lYXN1cmVDYW52YXM6IGZ1bmN0aW9uKHcsIGgsIHMpIHtcblx0XHRcdC8vIG1ha2UgY2FudmFzIHNxdWFyZVxuXHRcdFx0dGhpcy5fY2FudmFzSGVpZ2h0ID0gdGhpcy5fY2FudmFzV2lkdGggPSBNYXRoLm1pbih3LCBoKTtcblx0XHR9LFxuXG5cdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdHVwZGF0ZUNhbnZhczogZnVuY3Rpb24oY3R4LCBzKSB7XG5cdFx0XHR2YXIgbU9iaiA9IHRoaXMuX2dldEZvbnRNZXRyaWNzKHRoaXMuX2ZvbnRGYW1pbHkpO1xuXHRcdFx0dGhpcy5fYmFzZWxpbmVTaGlmdCA9IG1PYmogPyAobU9iai5hc2NlbnQgKyBtT2JqLmRlc2NlbnQpIC8gbU9iai51bml0c1BlckVtIDogMC43OyAvLyBkZWZhdWx0IHZhbHVlXG5cdFx0XHR0aGlzLl9iYXNlbGluZVNoaWZ0ICo9IHRoaXMuX2ZvbnRTaXplICogMC41OyAvLyBhcHBseSB0byBmb250LXNpemUsIGhhbHZlIGl0XG5cdFx0XHR0aGlzLl9iYXNlbGluZVNoaWZ0ID0gTWF0aC5yb3VuZCh0aGlzLl9iYXNlbGluZVNoaWZ0KTtcblxuXHRcdFx0dGhpcy5fY2FudmFzT2Zmc2V0WCA9IHRoaXMuX2NhbnZhc09mZnNldFkgPSB0aGlzLl9jYW52YXNXaWR0aCAvIDI7XG5cdFx0XHQvLyBkb3VibGUgU1FSVDFfMjogc3F1YXJlIHdpdGhpbiBjaXJjbGUgd2l0aGluIHNxdWFyZVxuXHRcdFx0dGhpcy5fcmFkaXVzID0gKHRoaXMuX2NhbnZhc1dpZHRoIC8gMikgKiBNYXRoLlNRUlQxXzIgKiBNYXRoLlNRUlQxXzIgKiBNYXRoLlNRUlQxXzI7XG5cdFx0XHR0aGlzLl9zaWRlID0gdGhpcy5fcmFkaXVzOyAvLyAqIE1hdGguU1FSVDFfMjsgLy8gKiBNYXRoLlNRUlQxXzI7XG5cdFx0XHQvLyB0aGlzLl9ib3JkZXJXaWR0aCA9IHRoaXMuX29wdGlvbnMuYm9yZGVyV2lkdGggKiB0aGlzLl9jYW52YXNSYXRpbztcblx0XHRcdC8vIHRoaXMuX2JvcmRlclJhZGl1cyA9IHRoaXMuX2NhbnZhc1dpZHRoICogdGhpcy5fY2FudmFzUmF0aW8gLyAyOyAvL3RoaXMuX29wdGlvbnMuYm9yZGVyUmFkaXVzICogdGhpcy5fY2FudmFzUmF0aW87XG5cblx0XHRcdC8vIHJlc2V0IG1hdHJpeCBhbmQgdHJhbnNsYXRlIDAsMCB0byBjZW50ZXJcblx0XHRcdHRoaXMuX2N0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgdGhpcy5fY2FudmFzT2Zmc2V0WCwgdGhpcy5fY2FudmFzT2Zmc2V0WSk7XG5cdFx0XHQvLyB0aGlzLl9jdHgucmVzdG9yZSgpO1xuXHRcdFx0Ly8gdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCI7XG5cdFx0XHR0aGlzLl9jdHgubGluZVdpZHRoID0gdGhpcy5fcmFkaXVzICogKDEgLSBNYXRoLlNRUlQxXzIpO1xuXHRcdFx0Ly8gdGhpcy5fY3R4LmZpbGxTdHlsZSA9IFwiI0ZGRlwiO1xuXHRcdFx0dGhpcy5fY3R4LnNoYWRvd0NvbG9yID0gXCJyZ2JhKDAsMCwwLDAuNzUpXCI7XG5cdFx0XHR0aGlzLl9jdHguc2hhZG93Qmx1ciA9IDE7XG5cdFx0XHR0aGlzLl9jdHguc2hhZG93T2Zmc2V0WCA9IDI7XG5cdFx0XHR0aGlzLl9jdHguc2hhZG93T2Zmc2V0WSA9IDI7XG5cdFx0XHQvLyB0aGlzLl9jdHguc2F2ZSgpO1xuXG5cdFx0XHR0aGlzLl9pc0ltYWdlRGF0YUludmFsaWQgPSB0cnVlO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIiVzOjp1cGRhdGVDYW52YXMgJXNcIiwgdGhpcy5jaWQsIHRoaXMuX2JhY2tncm91bmRDb2xvcik7XG5cdFx0fSxcblxuXHRcdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdFx0ICogc3ltYm9sTmFtZVxuXHRcdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdFx0X3N5bWJvbE5hbWU6IFwiXCIsXG5cdFx0X3NldFN5bWJvbE5hbWU6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRpZiAodGhpcy5fc3ltYm9sTmFtZSAhPT0gdmFsdWUpIHtcblx0XHRcdFx0dGhpcy5fbGFzdFN5bWJvbE5hbWUgPSB0aGlzLl9zeW1ib2xOYW1lO1xuXHRcdFx0XHR0aGlzLl9zeW1ib2xOYW1lID0gdmFsdWU7XG5cblx0XHRcdFx0dGhpcy5yZWZyZXNoSW1hZ2VTb3VyY2UoKTtcblx0XHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKENhbnZhc1ZpZXcuTEFZT1VUX0lOVkFMSUQpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIiVzOjpbc2V0XSBzeW1ib2wgJW8gKGZyb20gJW8pXCIsIHRoaXMuYXR0YWNoZWQgPyB0aGlzLnBhcmVudFZpZXcuY2lkIDogdGhpcy5jaWQsIHRoaXMuX3N5bWJvbE5hbWUsIHRoaXMuX2xhc3RTeW1ib2xOYW1lLCB0aGlzLnBhdXNlZCA/IFwicGF1c2VkXCIgOiBcIlwiKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0XHQgKiBzZXRJbWFnZVNvdXJjZS9yZWZyZXNoSW1hZ2VTb3VyY2Vcblx0XHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRcdF9pbWFnZVNvdXJjZTogbnVsbCxcblx0XHRzZXRJbWFnZVNvdXJjZTogZnVuY3Rpb24oaW1hZ2VTb3VyY2UpIHtcblx0XHRcdGlmICh0aGlzLl9pbWFnZVNvdXJjZSAhPT0gaW1hZ2VTb3VyY2UpIHtcblx0XHRcdFx0dGhpcy5faW1hZ2VTb3VyY2UgPSBpbWFnZVNvdXJjZTtcblx0XHRcdFx0dGhpcy5faXNJbWFnZURhdGFJbnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKENhbnZhc1ZpZXcuU0laRV9JTlZBTElEKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X2ltYWdlRGF0YVRDOiBudWxsLFxuXHRcdHJlZnJlc2hJbWFnZVNvdXJjZTogZnVuY3Rpb24odGhyZXNob2xkKSB7XG5cdFx0XHRpZiAodGhpcy5faXNJbWFnZURhdGFJbnZhbGlkIHx8ICEodGhpcy5faW1hZ2VTb3VyY2UgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KSkge1xuXHRcdFx0XHRyZXR1cm47IC8vIGRhdGEgaXMgbWFya2VkIGZvciByZWZyZXNoIGFscmVhZHksIG9yIG5vdCBhIHZpZGVvXG5cdFx0XHR9XG5cdFx0XHRpZiAoIV8uaXNOdW1iZXIodGhyZXNob2xkKSkge1xuXHRcdFx0XHR0aHJlc2hvbGQgPSBGSUxURVJfUkVGUkVTSF9USFJFU0hPTEQ7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhyZXNob2xkIDwgTWF0aC5hYnModGhpcy5faW1hZ2VEYXRhVEMgLSB0aGlzLl9pbWFnZVNvdXJjZS5jdXJyZW50VGltZSkpIHtcblx0XHRcdFx0dGhpcy5faXNJbWFnZURhdGFJbnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5yZXF1ZXN0UmVuZGVyKENhbnZhc1ZpZXcuU0laRV9JTlZBTElEKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X2ltYWdlRGF0YTogbnVsbCxcblx0XHRfdXBkYXRlSW1hZ2VEYXRhOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICh0aGlzLl9pbWFnZVNvdXJjZSA9PT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLl9pbWFnZURhdGEgPSBudWxsO1xuXHRcdFx0XHR0aGlzLl9pbWFnZURhdGFUQyA9IG51bGw7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIHNvdXJjZSBzY2FsZSwgc291cmNlIHJlY3QsIGRlc3Qgc2NhbGUsIGRlc3QgcmVjdCwgY3VycmVudCB0aW1lY29kZVxuXHRcdFx0dmFyIHMsIHNyLCBkLCBkciwgdGM7XG5cblx0XHRcdC8vIEdldCBzb3VyY2UvZGVzdCBvZmZzZXRzLCBpbnRyaW5zaWMgc2NhbGUgYW5kIHRpbWVjb2RlXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdHNyID0gdGhpcy5faW1hZ2VTb3VyY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRkciA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHRcdGlmICh0aGlzLl9pbWFnZVNvdXJjZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcblx0XHRcdFx0cyA9IHRoaXMuX2ltYWdlU291cmNlLnZpZGVvV2lkdGggLyBzci53aWR0aDtcblx0XHRcdFx0dGMgPSB0aGlzLl9pbWFnZVNvdXJjZS5jdXJyZW50VGltZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHMgPSB0aGlzLl9pbWFnZVNvdXJjZS5uYXR1cmFsV2lkdGggLyBzci53aWR0aDtcblx0XHRcdFx0dGMgPSAwO1xuXHRcdFx0fVxuXHRcdFx0ZCA9IHMgKiBGSUxURVJfU0NBTEU7XG5cblx0XHRcdC8vIGRyYXcgc291cmNlIGNhbnZhcyBtYWludGFpbmluZyBwb3NpdGlvblxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHR0aGlzLl9jdHguc2F2ZSgpO1xuXHRcdFx0dGhpcy5fY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcblx0XHRcdHRoaXMuX2N0eC5kcmF3SW1hZ2UodGhpcy5faW1hZ2VTb3VyY2UsXG5cdFx0XHRcdChkci5sZWZ0IC0gc3IubGVmdCkgKiBzICsgKGRyLndpZHRoIC8gMikgKiBzIC0gKGRyLndpZHRoIC8gMikgKiBkLFxuXHRcdFx0XHQoZHIudG9wIC0gc3IudG9wKSAqIHMgKyAoZHIuaGVpZ2h0IC8gMikgKiBzIC0gKGRyLmhlaWdodCAvIDIpICogZCxcblx0XHRcdFx0ZHIud2lkdGggKiBkLCBkci5oZWlnaHQgKiBkLFxuXHRcdFx0XHQwLCAwLCB0aGlzLmVsLndpZHRoLCB0aGlzLmVsLmhlaWdodFxuXHRcdFx0KTtcblx0XHRcdC8vIGlmIChkID09IHMpXG5cdFx0XHQvLyB0aGlzLl9jdHguZHJhd0ltYWdlKHRoaXMuX2ltYWdlU291cmNlLFxuXHRcdFx0Ly8gXHQoZHIubGVmdCAtIHNyLmxlZnQpICogcywgKGRyLnRvcCAtIHNyLnRvcCkgKiBzLFxuXHRcdFx0Ly8gXHRkci53aWR0aCAqIHMsIGRyLmhlaWdodCAqIHMsXG5cdFx0XHQvLyBcdDAsIDAsIHRoaXMuZWwud2lkdGgsIHRoaXMuZWwuaGVpZ2h0XG5cdFx0XHQvLyApO1xuXG5cdFx0XHQvLyBnZXQgSW1hZ2VEYXRhXG5cdFx0XHQvLyBmaW5kIGx1bWlub3NpdHkgdGhyZXNob2xkIGZvcm0gYXZlcmFnZSBjb2xvclxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHR2YXIgaW1nZGF0YSwgaXNEYXJrO1xuXG5cdFx0XHRpbWdkYXRhID0gdGhpcy5fY3R4LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLmVsLndpZHRoLCB0aGlzLmVsLmhlaWdodCk7XG5cdFx0XHQvLyBpc0RhcmsgPSAhQ29sb3IoKS5yZ2IoZ2V0QXZlcmFnZVJHQihpbWdkYXRhKSkuZGFyaygpO1xuXG5cdFx0XHQvLyB0aGlzLl9jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJsdW1pbm9zaXR5XCI7XG5cdFx0XHQvLyB0aGlzLl9jdHguZ2xvYmFsQWxwaGEgPSAwLjI1O1xuXHRcdFx0Ly8gdGhpcy5fY3R4LmZpbGxTdHlsZSA9IChpc0RhcmsgPyBcImJsYWNrXCIgOiBcIndoaXRlXCIpO1xuXHRcdFx0Ly8gdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuZWwud2lkdGgsIHRoaXMuZWwuaGVpZ2h0KTtcblxuXHRcdFx0dGhpcy5fY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmVsLndpZHRoLCB0aGlzLmVsLmhlaWdodCk7XG5cdFx0XHR0aGlzLl9jdHgucmVzdG9yZSgpO1xuXG5cdFx0XHQvLyBTdG9yZSBhcHByb3BpYXRlIGNvbG9yIHZhbHVlc1xuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHR0aGlzLl9jb2xvciA9IGlzRGFyayA/IFwid2hpdGVcIiA6IFwiYmxhY2tcIjtcblx0XHRcdC8vIHRoaXMuX2NvbG9yID0gaXNEYXJrID8gXCJyZ2JhKDI1NSwyNTUsMjU1LDAuNzUpXCIgOiBcInJnYmEoMCwwLDAsMC43NSlcIjtcblx0XHRcdC8vIHRoaXMuX2JhY2tncm91bmRDb2xvciA9IGlzRGFyayA/IFwicmdiYSgwLDAsMCwwLjc1KVwiIDogXCJyZ2JhKDI1NSwyNTUsMjU1LDAuNzQpXCI7XG5cblx0XHRcdC8vIHRoaXMuZWwuc3R5bGUuY29sb3IgPVxuXHRcdFx0Ly8gXHR0aGlzLl9jdHguZmlsbFN0eWxlID1cblx0XHRcdC8vIFx0dGhpcy5fY3R4LnN0cm9rZVN0eWxlID1cblx0XHRcdC8vIFx0dGhpcy5fY29sb3I7XG5cdFx0XHQvLyB0aGlzLmVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9XG5cdFx0XHQvLyBcdHRoaXMuX2N0eC5zaGFkb3dDb2xvciA9XG5cdFx0XHQvLyBcdHRoaXMuX2JhY2tncm91bmRDb2xvcjtcblxuXHRcdFx0Ly8gdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwibG9kXCIsIGlzRGFyayk7XG5cdFx0XHQvLyB0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJkb2xcIiwgIWlzRGFyayk7XG5cblx0XHRcdC8vIEFwcGx5IGZpbHRlcnMgYW5kIHNhdmUgcmVzdWx0c1xuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHQvLyBpbWdkYXRhID0gdGhpcy5fY3R4LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLmVsLndpZHRoLCB0aGlzLmVsLmhlaWdodCk7XG5cdFx0XHQvLyBpbWdkYXRhID0gbXVsdGlwbHkoaW1nZGF0YSwgKGlzRGFyayA/IDEgLSBGSUxURVJfTVVMVElQTFkgOiAxICsgRklMVEVSX01VTFRJUExZKSk7XG5cdFx0XHQvLyBpbWdkYXRhID0gZGVzYXR1cmF0ZShpbWdkYXRhLCAwLjUpO1xuXG5cdFx0XHRpbWdkYXRhID0gbXVsdGlwbHkoaW1nZGF0YSwgMSArIEZJTFRFUl9NVUxUSVBMWSk7XG5cdFx0XHRpbWdkYXRhID0gc3RhY2tCbHVyUkdCKGltZ2RhdGEsIEZJTFRFUl9SQURJVVMpO1xuXHRcdFx0Ly8gaW1nZGF0YSA9IG51bGw7XG5cblx0XHRcdHRoaXMuX2ltYWdlRGF0YSA9IGltZ2RhdGE7XG5cdFx0XHR0aGlzLl9pbWFnZURhdGFUQyA9IHRjO1xuXHRcdH0sXG5cblx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0cmVkcmF3OiBmdW5jdGlvbihjdHgsIGludHJwLCBmbGFncykge1xuXHRcdFx0dGhpcy5fY2xlYXJDYW52YXMoKTtcblxuXHRcdFx0aWYgKHRoaXMuX3N5bWJvbE5hbWUgPT09ICd3YWl0aW5nJykge1xuXHRcdFx0XHRpZiAoaW50cnAuZ2V0VGFyZ2V0VmFsdWUoJ19hcmMnKSA9PT0gMCkge1xuXHRcdFx0XHRcdGludHJwLnZhbHVlVG8oJ19hcmMnLCAxLCAwICogSU5URVBfTVMsIGVhc2VJbilcblx0XHRcdFx0XHRcdC51cGRhdGVWYWx1ZSgnX2FyYycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoaW50cnAuZ2V0VGFyZ2V0VmFsdWUoJ19hcmMnKSA9PT0gMSkge1xuXHRcdFx0XHRcdGludHJwLnZhbHVlVG8oJ19hcmMnLCAwLCAwICogSU5URVBfTVMsIGVhc2VPdXQpXG5cdFx0XHRcdFx0XHQudXBkYXRlVmFsdWUoJ19hcmMnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dmFyIGEgPSBpbnRycC5nZXRSZW5kZXJlZFZhbHVlKFwiX2FyY1wiKTtcblx0XHRcdC8vIHdoaWxlIGFyYyBpcyA+IDAsIGxvb3AgaW5kZWZpbml0ZWx5IHdoaWxlIHNwaW5uaW5nIGFuZCByZXN0YXJ0XG5cdFx0XHQvLyBpZiBhdCBlbmQuIE90aGVyd2lzZSBsZXQgaW50ZXJwIGV4aGF1c3QgYXJjIGR1cmF0aW9uXG5cdFx0XHRpZiAoYSA+IDApIHtcblx0XHRcdFx0aWYgKCFpbnRycC5wYXVzZWQgJiYgaW50cnAuaXNBdFRhcmdldCgnX2xvb3AnKSkge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OnJlZHJhdyBbbG9vcF1cIiwgdGhpcy5jaWQsIHRoaXMucGFyZW50Vmlldy5jaWQpO1xuXHRcdFx0XHRcdGludHJwXG5cdFx0XHRcdFx0XHQudmFsdWVUbygnX2xvb3AnLCAwLCAwKVxuXHRcdFx0XHRcdFx0LnZhbHVlVG8oJ19sb29wJywgMSwgMiAqIElOVEVQX01TKVxuXHRcdFx0XHRcdFx0LnVwZGF0ZVZhbHVlKCdfbG9vcCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR2YXIgbCA9IGludHJwLmdldFJlbmRlcmVkVmFsdWUoXCJfbG9vcFwiKTtcblxuXHRcdFx0Ly8gaWYgKHRoaXMuX2lzSW1hZ2VEYXRhSW52YWxpZCkge1xuXHRcdFx0Ly8gXHR0aGlzLl9pc0ltYWdlRGF0YUludmFsaWQgPSBmYWxzZTtcblx0XHRcdC8vIFx0dGhpcy5fdXBkYXRlSW1hZ2VEYXRhKCk7XG5cdFx0XHQvLyB9XG5cdFx0XHQvLyBpZiAodGhpcy5faW1hZ2VEYXRhICE9PSBudWxsKSB7XG5cdFx0XHQvLyBcdGN0eC5wdXRJbWFnZURhdGEodGhpcy5faW1hZ2VEYXRhLCAwLCAwKTtcblx0XHRcdC8vIH1cblxuXHRcdFx0Ly8gYWx3YXlzIHJlbmRlciB3aGlsZSBhcmMgaXMgPiAwXG5cdFx0XHRpZiAoYSA+IDApIHtcblx0XHRcdFx0Ly8gYXJjIHNwYW4gYm91bmNlXG5cdFx0XHRcdHZhciBiID0gKGwgPCAwLjUgPyAobCAlIDAuNSkgOiAwLjUgLSAobCAlIDAuNSkpICogMjtcblx0XHRcdFx0Ly8gYm91bmNlICsgbWFpbiBhcmMgc3BhblxuXHRcdFx0XHR2YXIgYWEgPSAoYSAqIGIgKiAwLjI1KSArIChhICogMC4xMjUpICsgLjAwMDE7XG5cdFx0XHRcdC8vIHJvdGF0aW9uIGxvb3Bcblx0XHRcdFx0dmFyIGxsID0gbCArIExPT1BfT0ZGU0VUO1xuXG5cdFx0XHRcdGN0eC5iZWdpblBhdGgoKTtcblx0XHRcdFx0Y3R4LmFyYygwLCAwLCB0aGlzLl9yYWRpdXMsICgoMSAtIGFhKSArIGxsKSAqIFBJMiwgKGFhICsgbGwpICogUEkyLCBmYWxzZSk7XG5cdFx0XHRcdGN0eC5zdHJva2UoKTtcblx0XHRcdH1cblxuXHRcdFx0c3dpdGNoICh0aGlzLl9zeW1ib2xOYW1lKSB7XG5cdFx0XHRcdGNhc2UgXCJyZXBsYXlcIjpcblx0XHRcdFx0Y2FzZSBcImVuZGVkXCI6XG5cdFx0XHRcdGNhc2UgXCJwbGF5XCI6XG5cdFx0XHRcdFx0Ly8gdGhpcy5kcmF3UGxheShjdHgsICgxIC0gYSkgKiBzKTtcblx0XHRcdFx0XHR0aGlzLmRyYXdQbGF5KGN0eCwgdGhpcy5fc2lkZSk7XG5cdFx0XHRcdFx0Y3R4LmZpbGwoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInBhdXNlXCI6XG5cdFx0XHRcdFx0Ly8gdGhpcy5kcmF3UGF1c2UoY3R4LCAoMSAtIGEpICogcyk7XG5cdFx0XHRcdFx0dGhpcy5kcmF3UGF1c2UoY3R4LCB0aGlzLl9zaWRlKTtcblx0XHRcdFx0XHRjdHguZmlsbCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwid2FpdGluZ1wiOlxuXHRcdFx0XHRcdHN3aXRjaCAodGhpcy5fbGFzdFN5bWJvbE5hbWUpIHtcblx0XHRcdFx0XHRcdGNhc2UgXCJyZXBsYXlcIjpcblx0XHRcdFx0XHRcdGNhc2UgXCJlbmRlZFwiOlxuXHRcdFx0XHRcdFx0Y2FzZSBcInBsYXlcIjpcblx0XHRcdFx0XHRcdFx0dGhpcy5kcmF3UGxheShjdHgsICgxIC0gYSkgKiB0aGlzLl9zaWRlKTtcblx0XHRcdFx0XHRcdFx0Y3R4LmZpbGwoKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlIFwicGF1c2VcIjpcblx0XHRcdFx0XHRcdFx0dGhpcy5kcmF3UGF1c2UoY3R4LCAoMSAtIGEpICogdGhpcy5fc2lkZSk7XG5cdFx0XHRcdFx0XHRcdGN0eC5maWxsKCk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRkcmF3UGxheTogZnVuY3Rpb24oY3R4LCByKSB7XG5cdFx0XHR2YXIgdHggPSAoMSAtIE1hdGguU1FSVDFfMikgKiByO1xuXHRcdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdFx0Y3R4Lm1vdmVUbyh0eCArIHIsIDApO1xuXHRcdFx0Y3R4LmxpbmVUbyh0eCAtIHIsIC1yKTtcblx0XHRcdGN0eC5saW5lVG8odHggLSByLCByKTtcblx0XHRcdGN0eC5jbG9zZVBhdGgoKTtcblx0XHR9LFxuXG5cdFx0ZHJhd1BhdXNlOiBmdW5jdGlvbihjdHgsIHIpIHtcblx0XHRcdHZhciB3ID0gciAqIDAuNzU7XG5cdFx0XHR2YXIgaCA9IHIgKiAyO1xuXHRcdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdFx0Y3R4LnJlY3QoLXIsIC1yLCB3LCBoKTtcblx0XHRcdGN0eC5yZWN0KHIgLSB3LCAtciwgdywgaCk7XG5cdFx0XHRjdHguY2xvc2VQYXRoKCk7XG5cdFx0fSxcblxuXHRcdGRyYXdMYWJlbDogZnVuY3Rpb24obGFiZWxTdHJpbmcpIHtcblx0XHRcdHZhciBsYWJlbFdpZHRoID0gdGhpcy5fY3R4Lm1lYXN1cmVUZXh0KGxhYmVsU3RyaW5nKS53aWR0aDtcblx0XHRcdHRoaXMuX2N0eC5maWxsVGV4dChsYWJlbFN0cmluZyxcblx0XHRcdFx0bGFiZWxXaWR0aCAqIC0wLjUsXG5cdFx0XHRcdC8vIDAsIGxhYmVsV2lkdGgpO1xuXHRcdFx0XHR0aGlzLl9iYXNlbGluZVNoaWZ0LCBsYWJlbFdpZHRoKTtcblx0XHR9LFxuXHR9LFxuXHRQbGF5VG9nZ2xlU3ltYm9sKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L2NvbXBvbmVudC9TZWxlY3RhYmxlTGlzdFZpZXdcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXd9ICovXG5jb25zdCBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld1wiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YmFja2JvbmUuYmFieXNpdHRlcn0gKi9cbmNvbnN0IENvbnRhaW5lciA9IHJlcXVpcmUoXCJiYWNrYm9uZS5iYWJ5c2l0dGVyXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvY29tcG9uZW50L0RlZmF1bHRTZWxlY3RhYmxlUmVuZGVyZXJ9ICovXG5jb25zdCBEZWZhdWx0U2VsZWN0YWJsZVJlbmRlcmVyID0gcmVxdWlyZShcImFwcC92aWV3L3JlbmRlci9EZWZhdWx0U2VsZWN0YWJsZVJlbmRlcmVyXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvY29tcG9uZW50L0NsaWNrYWJsZVJlbmRlcmVyfSAqL1xuY29uc3QgQ2xpY2thYmxlUmVuZGVyZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcmVuZGVyL0NsaWNrYWJsZVJlbmRlcmVyXCIpO1xuXG52YXIgU2VsZWN0YWJsZUxpc3RWaWV3ID0gVmlldy5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjaWRQcmVmaXg6IFwic2VsZWN0YWJsZUxpc3RcIixcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHRhZ05hbWU6IFwidWxcIixcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJsaXN0IHNlbGVjdGFibGVcIixcblxuXHQvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvRGVmYXVsdFNlbGVjdGFibGVSZW5kZXJlcn0gKi9cblx0cmVuZGVyZXI6IERlZmF1bHRTZWxlY3RhYmxlUmVuZGVyZXIsXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dGhpcy5fZW5hYmxlZCA9IHRydWU7XG5cdFx0dGhpcy5fY2hpbGRyZW5JbnZhbGlkID0gdHJ1ZTtcblxuXHRcdG9wdGlvbnMucmVuZGVyZXIgJiYgKHRoaXMucmVuZGVyZXIgPSBvcHRpb25zLnJlbmRlcmVyKTtcblx0XHR0aGlzLnNob3dFbXB0eSA9ICEhb3B0aW9ucy5zaG93RW1wdHk7XG5cdFx0dGhpcy5pdGVtVmlld3MgPSBuZXcgQ29udGFpbmVyKCk7XG5cblx0XHR0aGlzLmxpc3RlblRvKHRoaXMuY29sbGVjdGlvbiwgXCJhZGQgcmVtb3ZlIHJlc2V0XCIsIHRoaXMuX29uQ29sbGVjdGlvbkNoYW5nZSk7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMucmVtb3ZlQ2hpbGRyZW4oKTtcblx0XHRWaWV3LnByb3RvdHlwZS5yZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRfb25Db2xsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMuX2NoaWxkcmVuSW52YWxpZCA9IHRydWU7XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuX2NoaWxkcmVuSW52YWxpZCkge1xuXHRcdFx0dGhpcy5fY2hpbGRyZW5JbnZhbGlkID0gZmFsc2U7XG5cdFx0XHR0aGlzLmNyZWF0ZUNoaWxkcmVuKCk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0c2V0RW5hYmxlZDogZnVuY3Rpb24oZW5hYmxlZCkge1xuXHRcdGlmICh0aGlzLl9lbmFibGVkICE9PSBlbmFibGVkKSB7XG5cdFx0XHR0aGlzLl9lbmFibGVkID0gZW5hYmxlZDtcblx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGVkXCIsICF0aGlzLl9lbmFibGVkKTtcblx0XHR9XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogQ2hpbGQgdmlld3Ncblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Y3JlYXRlQ2hpbGRyZW46IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbHRCdWZmZXIsIHZpZXc7XG5cblx0XHR0aGlzLnJlbW92ZUNoaWxkcmVuKCk7XG5cdFx0dGhpcy5lbC5pbm5lckhUTUwgPSBcIlwiO1xuXG5cdFx0aWYgKHRoaXMuY29sbGVjdGlvbi5sZW5ndGgpIHtcblx0XHRcdGVsdEJ1ZmZlciA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0XHRcdGlmICh0aGlzLnNob3dFbXB0eSkge1xuXHRcdFx0XHR2aWV3ID0gdGhpcy5jcmVhdGVFbXB0eVZpZXcoKTtcblx0XHRcdFx0ZWx0QnVmZmVyLmFwcGVuZENoaWxkKHZpZXcucmVuZGVyKCkuZWwpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24obW9kZWwsIGluZGV4LCBhcnIpIHtcblx0XHRcdFx0dmlldyA9IHRoaXMuY3JlYXRlSXRlbVZpZXcobW9kZWwsIGluZGV4KTtcblx0XHRcdFx0ZWx0QnVmZmVyLmFwcGVuZENoaWxkKHZpZXcucmVuZGVyKCkuZWwpO1xuXHRcdFx0fSwgdGhpcyk7XG5cdFx0XHR0aGlzLmVsLmFwcGVuZENoaWxkKGVsdEJ1ZmZlcik7XG5cdFx0fVxuXHR9LFxuXG5cdGNyZWF0ZUl0ZW1WaWV3OiBmdW5jdGlvbihtb2RlbCwgaW5kZXgpIHtcblx0XHR2YXIgdmlldyA9IG5ldyh0aGlzLnJlbmRlcmVyKSh7XG5cdFx0XHRtb2RlbDogbW9kZWxcblx0XHR9KTtcblx0XHR0aGlzLml0ZW1WaWV3cy5hZGQodmlldyk7XG5cdFx0dGhpcy5saXN0ZW5Ubyh2aWV3LCBcInJlbmRlcmVyOmNsaWNrXCIsIHRoaXMub25JdGVtVmlld0NsaWNrKTtcblx0XHRyZXR1cm4gdmlldztcblx0fSxcblxuXHRyZW1vdmVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5pdGVtVmlld3MuZWFjaCh0aGlzLnJlbW92ZUl0ZW1WaWV3LCB0aGlzKTtcblx0fSxcblxuXHRyZW1vdmVJdGVtVmlldzogZnVuY3Rpb24odmlldykge1xuXHRcdHRoaXMuc3RvcExpc3RlbmluZyh2aWV3KTtcblx0XHR0aGlzLml0ZW1WaWV3cy5yZW1vdmUodmlldyk7XG5cdFx0dmlldy5yZW1vdmUoKTtcblx0XHRyZXR1cm4gdmlldztcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBDaGlsZCBldmVudCBoYW5kbGVyc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQHByaXZhdGUgKi9cblx0b25JdGVtVmlld0NsaWNrOiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0aWYgKHRoaXMuY29sbGVjdGlvbi5zZWxlY3RlZCAhPT0gaXRlbSAmJiB0aGlzLl9lbmFibGVkKSB7XG5cdFx0XHR0aGlzLnRyaWdnZXIoXCJ2aWV3OnNlbGVjdDpvbmVcIiwgaXRlbSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIEVtcHR5IHZpZXdcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Y3JlYXRlRW1wdHlWaWV3OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgdmlldyA9IG5ldyBTZWxlY3RhYmxlTGlzdFZpZXcuRW1wdHlSZW5kZXJlcih7XG5cdFx0XHRtb2RlbDogdGhpcy5jb2xsZWN0aW9uXG5cdFx0fSk7XG5cdFx0dGhpcy5pdGVtVmlld3MuYWRkKHZpZXcpO1xuXHRcdHRoaXMubGlzdGVuVG8odmlldywgXCJyZW5kZXJlcjpjbGlja1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuX2VuYWJsZWQgJiYgdGhpcy50cmlnZ2VyKFwidmlldzpzZWxlY3Q6bm9uZVwiKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gdmlldztcblx0fSxcbn0sIHtcblx0RW1wdHlSZW5kZXJlcjogQ2xpY2thYmxlUmVuZGVyZXIuZXh0ZW5kKHtcblxuXHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHR0YWdOYW1lOiBcImxpXCIsXG5cdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdGNsYXNzTmFtZTogXCJsaXN0LWl0ZW0gZW1wdHktaXRlbVwiLFxuXG5cdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJzZWxlY3RlZCBkZXNlbGVjdGVkXCIsIHRoaXMucmVuZGVyQ2xhc3NMaXN0KTtcblx0XHRcdHRoaXMucmVuZGVyQ2xhc3NMaXN0KCk7XG5cdFx0fSxcblxuXHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5lbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9XFxcIiNjbGVhclxcXCI+PGI+IDwvYj48L2E+XCI7XG5cdFx0XHR0aGlzLnJlbmRlckNsYXNzTGlzdCgpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblxuXHRcdHJlbmRlckNsYXNzTGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJzZWxlY3RlZFwiLCB0aGlzLm1vZGVsLnNlbGVjdGVkSW5kZXggPT09IC0xKTtcblx0XHR9LFxuXHR9KVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2VsZWN0YWJsZUxpc3RWaWV3O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuY29uc3QgQ29sb3IgPSByZXF1aXJlKFwiY29sb3JcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvY29udHJvbC9HbG9iYWxzfSAqL1xuY29uc3QgR2xvYmFscyA9IHJlcXVpcmUoXCJhcHAvY29udHJvbC9HbG9iYWxzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL2NvbGxlY3Rpb24vQnVuZGxlQ29sbGVjdGlvbn0gKi9cbmNvbnN0IGJ1bmRsZXMgPSByZXF1aXJlKFwiYXBwL21vZGVsL2NvbGxlY3Rpb24vQnVuZGxlQ29sbGVjdGlvblwiKTtcblxuLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuLy8gIHV0aWxzXG4vLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cbmZ1bmN0aW9uIGluc2VydENTU1J1bGUoc2hlZXQsIHNlbGVjdG9yLCBzdHlsZSkge1xuXHR2YXIgY3NzVGV4dCA9IFwiXCI7XG5cdGZvciAodmFyIHByb3AgaW4gc3R5bGUpIHtcblx0XHRjc3NUZXh0ICs9IHByb3AgKyBcIjpcIiArIHN0eWxlW3Byb3BdICsgXCI7XCI7XG5cdH1cblx0c2hlZXQuaW5zZXJ0UnVsZShzZWxlY3RvciArIFwie1wiICsgY3NzVGV4dCArIFwifVwiLCBzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBzZWxmQW5kRGVzY2VuZGFudChzZWxmQ2xzLCBjbHMpIHtcblx0cmV0dXJuIHNlbGZDbHMgKyBcIiBcIiArIGNscyArIFwiLCBcIiArIHNlbGZDbHMgKyBjbHM7XG59XG5cbi8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cbi8vICByb290IHJ1bGVzXG4vLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cbnZhciByb290U3R5bGVzID0gW1xuXHRcImNvbG9yXCIsXG5cdFwiYmFja2dyb3VuZFwiLFxuXHRcImJhY2tncm91bmQtY29sb3JcIixcblx0Ly8gXCItLWxpbmstY29sb3JcIlxuXTtcblxuZnVuY3Rpb24gaW5pdFJvb3RTdHlsZXMoc2hlZXQsIHJvb3RTZWxlY3RvciwgYXR0cnMsIGZnQ29sb3IsIGJnQ29sb3IsIGxuQ29sb3IsIGhhc0RhcmtCZykge1xuXHR2YXIgcywgcmV2U2VsZWN0b3IsIGZnQ29sb3JWYWwsIGJnQ29sb3JWYWw7XG5cdC8vIHZhciByZXZGZ0NvbG9yVmFsLCByZXZCZ0NvbG9yVmFsO1xuXG5cdHMgPSBfLnBpY2soYXR0cnMsIHJvb3RTdHlsZXMpO1xuXHQvLyBzW1wiLXdlYmtpdC1mb250LXNtb290aGluZ1wiXSA9IChoYXNEYXJrQmcgPyBcImFudGlhbGlhc2VkXCIgOiBcImF1dG9cIik7XG5cdC8qIE5PVEU6IEluIEZpcmVmb3ggJy1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7J1xuXHQvKiB3b3JrcyBib3RoIGluIGxpZ2h0IG92ZXIgZGFyayBhbmQgZGFyayBvdmVyIGxpZ2h0LCBoYXJkY29kZWQgaW4gX2Jhc2Uuc2NzcyAqL1xuXHQvL3NbXCItbW96LW9zeC1mb250LXNtb290aGluZ1wiXSA9IChoYXNEYXJrQmc/IFwiZ3JheXNjYWxlXCIgOiBcImF1dG9cIik7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHJvb3RTZWxlY3Rvciwgcyk7XG5cblx0Ly8gQSBlbGVtZW50XG5cdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0cyA9IHt9XG5cdHNbXCJjb2xvclwiXSA9IGxuQ29sb3IucmdiKCkuc3RyaW5nKCk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHJvb3RTZWxlY3RvciArIFwiIGFcIiwgcyk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHJvb3RTZWxlY3RvciArIFwiIC5jb2xvci1sblwiLCBzKTtcblxuXHQvLyAuY29sb3ItZmcwNVxuXHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdHMgPSB7fTtcblx0c1tcImNvbG9yXCJdID0gQ29sb3IoZmdDb2xvcikubWl4KGJnQ29sb3IsIDAuNSkucmdiKCkuc3RyaW5nKCk7XG5cdHNbXCJib3JkZXItY29sb3JcIl0gPSBDb2xvcihmZ0NvbG9yKS5taXgoYmdDb2xvciwgMC4zKS5yZ2IoKS5zdHJpbmcoKTtcblx0aW5zZXJ0Q1NTUnVsZShzaGVldCwgcm9vdFNlbGVjdG9yICsgXCIgLmNvbG9yLWZnMDVcIiwgcyk7XG5cblx0ZmdDb2xvclZhbCA9IGZnQ29sb3IucmdiKCkuc3RyaW5nKCk7XG5cdGJnQ29sb3JWYWwgPSBiZ0NvbG9yLnJnYigpLnN0cmluZygpO1xuXHQvLyByZXZGZ0NvbG9yVmFsID0gQ29sb3IoYmdDb2xvcikubWl4KGZnQ29sb3IsIDAuOSkucmdiKCkuc3RyaW5nKCk7XG5cdC8vIHJldkJnQ29sb3JWYWwgPSBDb2xvcihmZ0NvbG9yKS5taXgoYmdDb2xvciwgMC42KS5yZ2IoKS5zdHJpbmcoKTtcblx0cmV2U2VsZWN0b3IgPSByb290U2VsZWN0b3IgKyBcIiAuY29sb3ItcmV2ZXJzZVwiO1xuXG5cdC8vIC5jb2xvci1mZyAuY29sb3ItYmdcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRzID0ge1xuXHRcdFwiY29sb3JcIjogZmdDb2xvclZhbFxuXHR9O1xuXHRpbnNlcnRDU1NSdWxlKHNoZWV0LCByb290U2VsZWN0b3IgKyBcIiAuY29sb3ItZmdcIiwgcyk7XG5cdHMgPSB7XG5cdFx0XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IGJnQ29sb3JWYWxcblx0fTtcblx0aW5zZXJ0Q1NTUnVsZShzaGVldCwgcm9vdFNlbGVjdG9yICsgXCIgLmNvbG9yLWJnXCIsIHMpO1xuXHQvLyBodG1sIGludmVydGVkIHRleHQvYmFja2dyb3VuZFxuXHRzID0ge1xuXHRcdFwiY29sb3JcIjogYmdDb2xvclZhbFxuXHR9OyAvLyBzID0geyBcImNvbG9yXCIgOiByZXZGZ0NvbG9yVmFsIH07XG5cdC8vIHNbXCItd2Via2l0LWZvbnQtc21vb3RoaW5nXCJdID0gKGhhc0RhcmtCZyA/IFwiYXV0b1wiIDogXCJhbnRpYWxpYXNlZFwiKTtcblx0Ly8gaW5zZXJ0Q1NTUnVsZShzaGVldCwgcmV2U2VsZWN0b3IgKyBcIiAuY29sb3ItZmdcIiwgcyk7XG5cdC8vIGluc2VydENTU1J1bGUoc2hlZXQsIHJldlNlbGVjdG9yICsgXCIuY29sb3ItZmdcIiwgcyk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHNlbGZBbmREZXNjZW5kYW50KHJldlNlbGVjdG9yLCBcIi5jb2xvci1mZ1wiKSwgcyk7XG5cblx0cyA9IHtcblx0XHRcImJhY2tncm91bmQtY29sb3JcIjogZmdDb2xvclZhbFxuXHR9O1xuXHQvLyBzID0geyBcImJhY2tncm91bmQtY29sb3JcIiA6IHJldkJnQ29sb3JWYWwgfTtcblx0Ly8gaW5zZXJ0Q1NTUnVsZShzaGVldCwgcmV2U2VsZWN0b3IgKyBcIiAuY29sb3ItYmdcIiwgcyk7XG5cdC8vIGluc2VydENTU1J1bGUoc2hlZXQsIHJldlNlbGVjdG9yICsgXCIuY29sb3ItYmdcIiwgcyk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHNlbGZBbmREZXNjZW5kYW50KHJldlNlbGVjdG9yLCBcIi5jb2xvci1iZ1wiKSwgcyk7XG5cblx0Ly8gLmNvbG9yLXN0cm9rZSAuY29sb3ItZmlsbCAoU1ZHKVxuXHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdHMgPSB7XG5cdFx0XCJzdHJva2VcIjogZmdDb2xvclZhbFxuXHR9O1xuXHRpbnNlcnRDU1NSdWxlKHNoZWV0LCByb290U2VsZWN0b3IgKyBcIiAuY29sb3Itc3Ryb2tlXCIsIHMpO1xuXHRzID0ge1xuXHRcdFwiZmlsbFwiOiBiZ0NvbG9yVmFsXG5cdH07XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHJvb3RTZWxlY3RvciArIFwiIC5jb2xvci1maWxsXCIsIHMpO1xuXHQvLyBzdmcgaW52ZXJ0ZWQgZmlsbC9zdHJva2Vcblx0cyA9IHtcblx0XHRcInN0cm9rZVwiOiBiZ0NvbG9yVmFsXG5cdH07XG5cdC8vIGluc2VydENTU1J1bGUoc2hlZXQsIHJldlNlbGVjdG9yICsgXCIgLmNvbG9yLXN0cm9rZVwiLCBzKTtcblx0Ly8gaW5zZXJ0Q1NTUnVsZShzaGVldCwgcmV2U2VsZWN0b3IgKyBcIi5jb2xvci1zdHJva2VcIiwgcyk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIHNlbGZBbmREZXNjZW5kYW50KHJldlNlbGVjdG9yLCBcIi5jb2xvci1zdHJva2VcIiksIHMpO1xuXHRzID0ge1xuXHRcdFwiZmlsbFwiOiBmZ0NvbG9yVmFsXG5cdH07XG5cdC8vIGluc2VydENTU1J1bGUoc2hlZXQsIHJldlNlbGVjdG9yICsgXCIgLmNvbG9yLWZpbGxcIiwgcyk7XG5cdC8vIGluc2VydENTU1J1bGUoc2hlZXQsIHJldlNlbGVjdG9yICsgXCIuY29sb3ItZmlsbFwiLCBzKTtcblx0aW5zZXJ0Q1NTUnVsZShzaGVldCwgc2VsZkFuZERlc2NlbmRhbnQocmV2U2VsZWN0b3IsIFwiLmNvbG9yLWZpbGxcIiksIHMpO1xuXG5cdC8vIC50ZXh0LW91dGxpbmVcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHQvLyBzID0ge1xuXHQvLyBcdFwidGV4dC1zaGFkb3dcIjogXCItMXB4IC0xcHggMCBcIiArIGJnQ29sb3JWYWwgK1xuXHQvLyBcdFx0XCIsIDFweCAtMXB4IDAgXCIgKyBiZ0NvbG9yVmFsICtcblx0Ly8gXHRcdFwiLCAtMXB4IDFweCAwIFwiICsgYmdDb2xvclZhbCArXG5cdC8vIFx0XHRcIiwgMXB4IDFweCAwIFwiICsgYmdDb2xvclZhbFxuXHQvLyB9O1xuXHQvLyBpbnNlcnRDU1NSdWxlKHNoZWV0LCByb290U2VsZWN0b3IgKyBcIiA6bm90KC4uY29sbGFwc2VkLWNoYW5naW5nKSAudGV4dC1vdXRsaW5lLWJnXCIsIHMpO1xuXG59XG5cbi8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cbi8vIGNhcm91c2VsIHN0eWxlc1xuLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXG52YXIgY2Fyb3VzZWxTdHlsZXMgPSBbXCJib3gtc2hhZG93XCIsIFwiYm9yZGVyXCIsIFwiYm9yZGVyLXJhZGl1c1wiXTtcblxuZnVuY3Rpb24gaW5pdENhcm91c2VsU3R5bGVzKHNoZWV0LCBjYXJvdXNlbFNlbGVjdG9yLCBhdHRycywgZmdDb2xvciwgYmdDb2xvciwgbG5Db2xvciwgaGFzRGFya0JnKSB7XG5cdHZhciBzID0gXy5waWNrKGF0dHJzLCBjYXJvdXNlbFN0eWxlcyk7IC8vLCBcImJhY2tncm91bmQtY29sb3JcIl0pO1xuXHRpbnNlcnRDU1NSdWxlKHNoZWV0LCBjYXJvdXNlbFNlbGVjdG9yICsgXCIgLm1lZGlhLWl0ZW0gLmNvbnRlbnRcIiwgcyk7XG5cblx0Ly8gLm1lZGlhLWl0ZW0gLmNvbG9yLWJnMDlcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRzID0ge307XG5cdHNbXCJiYWNrZ3JvdW5kLWNvbG9yXCJdID0gQ29sb3IoYmdDb2xvcikubWl4KGZnQ29sb3IsIDAuMDUpLnJnYigpLnN0cmluZygpO1xuXHQvLyBzW1wiYmFja2dyb3VuZC1jb2xvclwiXSA9IENvbG9yKGJnQ29sb3IpW2hhc0RhcmtCZyA/IFwiZGFya2VuXCIgOiBcImxpZ2h0ZW5cIl0oMC4wNDUpLnJnYigpLnN0cmluZygpO1xuXHQvLyBzW1wiYmFja2dyb3VuZC1jb2xvclwiXSA9IENvbG9yKGJnQ29sb3IpW2hhc0RhcmtCZyA/IFwibGlnaHRlblwiIDogXCJkYXJrZW5cIl0oMC4wMykucmdiKCkuc3RyaW5nKCk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIGNhcm91c2VsU2VsZWN0b3IgKyBcIiAubWVkaWEtaXRlbSAuY29sb3ItYmcwOVwiLCBzKTtcblxuXHQvLyAubWVkaWEtaXRlbSAucGxhY2Vob2xkZXJcblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRzID0ge307XG5cdC8vIHNbXCItd2Via2l0LWZvbnQtc21vb3RoaW5nXCJdID0gKGhhc0RhcmtCZyA/IFwiYXV0b1wiIDogXCJhbnRpYWxpYXNlZFwiKTtcblx0Ly8gdGV4dCBjb2xvciBsdW1pbm9zaXR5IGlzIGludmVyc2UgZnJvbSBib2R5LCBhcHBseSBvcG9zaXRlIHJlbmRlcmluZyBtb2RlXG5cdHNbXCJjb2xvclwiXSA9IGJnQ29sb3IucmdiKCkuc3RyaW5nKCk7XG5cdC8vIHNbXCJjb2xvclwiXSA9IENvbG9yKGJnQ29sb3IpW2hhc0RhcmtCZyA/IFwiZGFya2VuXCIgOiBcImxpZ2h0ZW5cIl0oMC4wNDUpLnJnYigpLnN0cmluZygpO1xuXHRzW1wiYmFja2dyb3VuZC1jb2xvclwiXSA9IENvbG9yKGJnQ29sb3IpLm1peChmZ0NvbG9yLCAwLjA1KS5yZ2IoKS5zdHJpbmcoKTtcblx0Ly8gc1tcImJhY2tncm91bmQtY29sb3JcIl0gPSBDb2xvcihiZ0NvbG9yKS5taXgoZmdDb2xvciwgMC44KS5hbHBoYSgwLjMpLnJnYmEoKS5zdHJpbmcoKTtcblx0Ly8gc1tcImJhY2tncm91bmQtY29sb3JcIl0gPSBDb2xvcihiZ0NvbG9yKVtoYXNEYXJrQmcgPyBcImxpZ2h0ZW5cIiA6IFwiZGFya2VuXCJdKDAuMDMpLnJnYigpLnN0cmluZygpO1xuXHQoXCJib3JkZXItcmFkaXVzXCIgaW4gYXR0cnMpICYmIChzW1wiYm9yZGVyLXJhZGl1c1wiXSA9IGF0dHJzW1wiYm9yZGVyLXJhZGl1c1wiXSk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIGNhcm91c2VsU2VsZWN0b3IgKyBcIiAubWVkaWEtaXRlbSAucGxhY2Vob2xkZXJcIiwgcyk7XG5cblx0Ly8gLmltYWdlLWl0ZW0gaW1nXG5cdC8vIC5zZXF1ZW5jZS1pdGVtIC5zZXF1ZW5jZS1zdGVwXG5cdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0cyA9IHt9O1xuXHRzW1wiYmFja2dyb3VuZC1jb2xvclwiXSA9IGJnQ29sb3IucmdiKCkuc3RyaW5nKCk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIGNhcm91c2VsU2VsZWN0b3IgKyBcIiAuaW1hZ2UtaXRlbSBpbWdcIiwgcyk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIGNhcm91c2VsU2VsZWN0b3IgKyBcIiAuc2VxdWVuY2UtaXRlbSAuc2VxdWVuY2Utc3RlcFwiLCBzKTtcblxuXHQvLyAuZW1wdHktaXRlbSBBXG5cdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0cyA9IHt9O1xuXHRzW1widGV4dC1kZWNvcmF0aW9uLWNvbG9yXCJdID0gQ29sb3IoZmdDb2xvcikubWl4KGJnQ29sb3IsIDAuNykucmdiKCkuc3RyaW5nKCk7XG5cdGluc2VydENTU1J1bGUoc2hlZXQsIGNhcm91c2VsU2VsZWN0b3IgKyBcIiAuZW1wdHktaXRlbSBBXCIsIHMpO1xuXHQvLyAvLyAuY29sb3ItZ3JhZGllbnRcblx0Ly8gLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHQvLyBzID0ge307XG5cdC8vIHNbXCJiYWNrZ3JvdW5kLWNvbG9yXCJdID0gXCJ0cmFuc3BhcmVudFwiO1xuXHQvLyBzW1wiYmFja2dyb3VuZFwiXSA9IFwibGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgXCIgK1xuXHQvLyBcdFx0Q29sb3IoYmdDb2xvcikuYWxwaGEoMC4wMCkucmdiYSgpLnN0cmluZygpICsgXCIgMCUsIFwiICtcblx0Ly8gXHRcdENvbG9yKGJnQ29sb3IpLmFscGhhKDAuMTEpLnJnYmEoKS5zdHJpbmcoKSArIFwiIDEwMCUpXCI7XG5cdC8vIGluc2VydENTU1J1bGUoc2hlZXQsIHJvb3RTZWxlY3RvciArIFwiIC5jb2xvci1ncmFkaWVudFwiLCBzKTtcblx0Ly8gcyA9IHt9O1xuXHQvLyBzW1wiYmFja2dyb3VuZC1jb2xvclwiXSA9IFwidHJhbnNwYXJlbnRcIjtcblx0Ly8gc1tcImJhY2tncm91bmRcIl0gPSBcImxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIFwiICtcblx0Ly8gXHRcdENvbG9yKGZnQ29sb3IpLmFscGhhKDAuMDApLnJnYmEoKS5zdHJpbmcoKSArIFwiIDAlLCBcIiArXG5cdC8vIFx0XHRDb2xvcihmZ0NvbG9yKS5hbHBoYSgwLjExKS5yZ2JhKCkuc3RyaW5nKCkgKyBcIiAxMDAlKVwiO1xuXHQvLyBpbnNlcnRDU1NSdWxlKHNoZWV0LCByZXZTZWxlY3RvciArIFwiIC5jb2xvci1ncmFkaWVudFwiLCBzKTtcblx0Ly8gaW5zZXJ0Q1NTUnVsZShzaGVldCwgcmV2U2VsZWN0b3IgKyBcIi5jb2xvci1ncmFkaWVudFwiLCBzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0dmFyIGF0dHJzLCBmZ0NvbG9yLCBiZ0NvbG9yLCBsbkNvbG9yLCBoYXNEYXJrQmc7XG5cblx0YXR0cnMgPSBHbG9iYWxzLkRFRkFVTFRfQ09MT1JTO1xuXHRmZ0NvbG9yID0gbmV3IENvbG9yKEdsb2JhbHMuREVGQVVMVF9DT0xPUlNbXCJjb2xvclwiXSk7XG5cdGJnQ29sb3IgPSBuZXcgQ29sb3IoR2xvYmFscy5ERUZBVUxUX0NPTE9SU1tcImJhY2tncm91bmQtY29sb3JcIl0pO1xuXHRsbkNvbG9yID0gbmV3IENvbG9yKEdsb2JhbHMuREVGQVVMVF9DT0xPUlNbXCJsaW5rLWNvbG9yXCJdKVxuXHRoYXNEYXJrQmcgPSBmZ0NvbG9yLmx1bWlub3NpdHkoKSA+IGJnQ29sb3IubHVtaW5vc2l0eSgpO1xuXG5cdHZhciBjb2xvclN0eWxlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0Y29sb3JTdHlsZXMuaWQgPSBcImNvbG9yc1wiO1xuXHRjb2xvclN0eWxlcy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGNvbG9yU3R5bGVzKTtcblx0Ly8gdmFyIGNvbG9yU3R5bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImxpbmsjZm9saW9cIik7XG5cblx0aW5pdFJvb3RTdHlsZXMoY29sb3JTdHlsZXMuc2hlZXQsIFwiLmFwcFwiLFxuXHRcdGF0dHJzLCBmZ0NvbG9yLCBiZ0NvbG9yLCBsbkNvbG9yLCBoYXNEYXJrQmcpO1xuXHRpbml0Q2Fyb3VzZWxTdHlsZXMoY29sb3JTdHlsZXMuc2hlZXQsIFwiLmNhcm91c2VsXCIsXG5cdFx0YXR0cnMsIGZnQ29sb3IsIGJnQ29sb3IsIGxuQ29sb3IsIGhhc0RhcmtCZyk7XG5cblx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHQvLyBwZXItYnVuZGxlIHJ1bGVzXG5cdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0YnVuZGxlcy5lYWNoKGZ1bmN0aW9uKGJ1bmRsZSkge1xuXHRcdGF0dHJzID0gYnVuZGxlLmF0dHJzKCk7IC8vZ2V0KFwiYXR0cnNcIik7XG5cdFx0ZmdDb2xvciA9IGJ1bmRsZS5jb2xvcnMuZmdDb2xvcjtcblx0XHRiZ0NvbG9yID0gYnVuZGxlLmNvbG9ycy5iZ0NvbG9yO1xuXHRcdGxuQ29sb3IgPSBidW5kbGUuY29sb3JzLmxuQ29sb3I7XG5cdFx0aGFzRGFya0JnID0gYnVuZGxlLmNvbG9ycy5oYXNEYXJrQmc7XG5cblx0XHRpbml0Um9vdFN0eWxlcyhjb2xvclN0eWxlcy5zaGVldCxcblx0XHRcdFwiLmFwcC5cIiArIGJ1bmRsZS5nZXQoXCJkb21pZFwiKSxcblx0XHRcdGF0dHJzLCBmZ0NvbG9yLCBiZ0NvbG9yLCBsbkNvbG9yLCBoYXNEYXJrQmcpO1xuXHRcdGluaXRDYXJvdXNlbFN0eWxlcyhjb2xvclN0eWxlcy5zaGVldCxcblx0XHRcdFwiLmNhcm91c2VsLlwiICsgYnVuZGxlLmdldChcImRvbWlkXCIpLFxuXHRcdFx0YXR0cnMsIGZnQ29sb3IsIGJnQ29sb3IsIGxuQ29sb3IsIGhhc0RhcmtCZyk7XG5cdH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gLyoqIEB0eXBlIHttb2R1bGU6dW5kZXJzY29yZS5zdHJpbmcvbHBhZH0gKi9cbi8vIHZhciBjbGFzc2lmeSA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlLnN0cmluZy9jbGFzc2lmeVwiKTtcblxuLy8gdmFyIHN0YXR1c01zZyA9IF8udGVtcGxhdGUoXCI8JT0gc3RhdHVzICU+IHJlY2VpdmVkIGZyb20gPCU9IHVybCAlPiAoPCU9IHN0YXR1c1RleHQgJT4pXCIpO1xuLy8gdmFyIGVyck1zZyA9IF8udGVtcGxhdGUoXCInPCU9IGVyck5hbWUgJT4nIG9jdXJyZWQgZHVyaW5nIHJlcXVlc3QgPCU9IHVybCAlPlwiKTtcblxuaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiB3aW5kb3cuVVJMICYmIHdpbmRvdy5CbG9iKSB7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXJsLCBwcm9ncmVzc0ZuKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0dmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdHJlcXVlc3Qub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xuXHRcdFx0Ly8gcmVxdWVzdC50aW1lb3V0ID0gMTAwMDA7IC8vIGluIG1pbGxpc2Vjb25kc1xuXHRcdFx0cmVxdWVzdC5yZXNwb25zZVR5cGUgPSBcImJsb2JcIjtcblxuXHRcdFx0dmFyIGVycm9yRnJvbUV2ZW50ID0gZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0dmFyIGVyciA9IG5ldyBFcnJvcigoZXYudGFyZ2V0LnN0YXR1cyA+IDAgP1xuXHRcdFx0XHRcdFwiaHR0cF9cIiArIHJlcXVlc3Quc3RhdHVzVGV4dC5yZXBsYWNlKC9cXHMvZywgXCJfXCIpIDpcblx0XHRcdFx0XHRldi50eXBlICsgXCJfZXZlbnRcIikudG9VcHBlckNhc2UoKSk7XG5cdFx0XHRcdGVyci5sb2dNZXNzYWdlID0gXCJfbG9hZEltYWdlQXNPYmplY3RVUkw6OlwiICsgZXYudHlwZSArIFwiIFtyZWplY3RdXCI7XG5cdFx0XHRcdGVyci5pbmZvQ29kZSA9IGV2LnRhcmdldC5zdGF0dXM7XG5cdFx0XHRcdGVyci5pbmZvU3JjID0gdXJsO1xuXHRcdFx0XHRlcnIubG9nRXZlbnQgPSBldjtcblx0XHRcdFx0cmV0dXJuIGVycjtcblx0XHRcdH07XG5cdFx0XHQvLyBpZiBwcm9ncmVzc0ZuIGlzIHN1cHBsaWVkXG5cdFx0XHQvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXHRcdFx0aWYgKHByb2dyZXNzRm4pIHtcblx0XHRcdFx0cmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHRwcm9ncmVzc0ZuKGV2LmxvYWRlZCAvIGV2LnRvdGFsLCByZXF1ZXN0KTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdC8vIHJlc29sdmVkL3N1Y2Nlc3Ncblx0XHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdFx0XHRyZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdC8vIFdoZW4gdGhlIHJlcXVlc3QgbG9hZHMsIGNoZWNrIHdoZXRoZXIgaXQgd2FzIHN1Y2Nlc3NmdWxcblx0XHRcdFx0aWYgKHJlcXVlc3Quc3RhdHVzID09IDIwMCkge1xuXHRcdFx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIHJlc29sdmUgdGhlIHByb21pc2UgYnkgcGFzc2luZyBiYWNrIGEgcmVmZXJlbmNlIHVybFxuXHRcdFx0XHRcdHJlc29sdmUoVVJMLmNyZWF0ZU9iamVjdFVSTChyZXF1ZXN0LnJlc3BvbnNlKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yRnJvbUV2ZW50KGV2KSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHQvLyBub3JtYWwgYWJvcnRcblx0XHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdFx0XHRyZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbihldikge1xuXHRcdFx0XHRyZXNvbHZlKHZvaWQgMCk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gcmVqZWN0L2ZhaWx1cmVcblx0XHRcdC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbihldikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JGcm9tRXZlbnQoZXYpKTtcblx0XHRcdH07XG5cdFx0XHRyZXF1ZXN0Lm9udGltZW91dCA9IHJlcXVlc3Qub25lcnJvcjtcblxuXHRcdFx0Ly8gZmluYWxseVxuXHRcdFx0Ly8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblx0XHRcdHJlcXVlc3Qub25sb2FkZW5kID0gZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIl9sb2FkSW1hZ2VBc09iamVjdFVSTDo6JXMgW2NsZWFudXBdICglcylcIiwgZXYgPyBldi50eXBlIDogXCJubyBldmVudFwiLCB1cmwpO1xuXHRcdFx0XHRyZXF1ZXN0Lm9uYWJvcnQgPSByZXF1ZXN0Lm9udGltZW91dCA9IHJlcXVlc3Qub25lcnJvciA9IHZvaWQgMDtcblx0XHRcdFx0cmVxdWVzdC5vbmxvYWQgPSByZXF1ZXN0Lm9ubG9hZGVuZCA9IHZvaWQgMDtcblx0XHRcdFx0aWYgKHByb2dyZXNzRm4pIHtcblx0XHRcdFx0XHRyZXF1ZXN0Lm9ucHJvZ3Jlc3MgPSB2b2lkIDA7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHJlcXVlc3Quc2VuZCgpO1xuXHRcdH0pO1xuXHR9O1xufSBlbHNlIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1cmwsIHByb2dyZXNzRm4pIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVybCk7XG5cdH07XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW1hZ2UsIHJlc29sdmVFbXB0eSkge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0aWYgKCEoaW1hZ2UgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEltYWdlRWxlbWVudCkpIHtcblx0XHRcdC8vcmVqZWN0KG5ldyBFcnJvcihcIm5vdCBhbiBIVE1MSW1hZ2VFbGVtZW50XCIpKTtcblx0XHRcdHJlamVjdChcIkVycm9yOiBub3QgYW4gSFRNTEltYWdlRWxlbWVudFwiKTtcblx0XHR9IGVsc2UgaWYgKGltYWdlLmNvbXBsZXRlICYmIChpbWFnZS5zcmMubGVuZ3RoID4gMCB8fCByZXNvbHZlRW1wdHkpKSB7XG5cdFx0XHQvLyBpZiAoaW1hZ2Uuc3JjID09PSBcIlwiKSBjb25zb2xlLndhcm4oXCJfd2hlbkltYWdlTG9hZHMgcmVzb2x2ZWQgd2l0aCBlbXB0eSBzcmNcIik7XG5cdFx0XHQvLyBlbHNlIGNvbnNvbGUubG9nKFwiX3doZW5JbWFnZUxvYWRzIHJlc29sdmUtc3luY1wiLCBpbWFnZS5zcmMpO1xuXHRcdFx0cmVzb2x2ZShpbWFnZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBoYW5kbGVycyA9IHtcblx0XHRcdFx0bG9hZDogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIl93aGVuSW1hZ2VMb2Fkc19kb20gcmVzb2x2ZS1hc3luY1wiLCBldi50eXBlLCBpbWFnZS5zcmMpO1xuXHRcdFx0XHRcdHJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZShpbWFnZSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRcdHZhciBlcnIgPSBuZXcgRXJyb3IoXCJMb2FkaW5nIGZhaWxlZCAoXCIgKyBldi50eXBlICsgXCIgZXZlbnQpXCIpO1xuXHRcdFx0XHRcdGVyci5pbmZvQ29kZSA9IC0xO1xuXHRcdFx0XHRcdGVyci5pbmZvU3JjID0gaW1hZ2Uuc3JjO1xuXHRcdFx0XHRcdGVyci5sb2dFdmVudCA9IGV2O1xuXHRcdFx0XHRcdGVyci5sb2dNZXNzYWdlID0gXCJfd2hlbkltYWdlTG9hZHM6OlwiICsgZXYudHlwZSArIFwiIFtyZWplY3RdXCI7XG5cdFx0XHRcdFx0cmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGhhbmRsZXJzLmFib3J0ID0gaGFuZGxlcnMuZXJyb3I7XG5cdFx0XHR2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yICh2YXIgZXZlbnQgaW4gaGFuZGxlcnMpIHtcblx0XHRcdFx0XHRpZiAoaGFuZGxlcnMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7XG5cdFx0XHRcdFx0XHRpbWFnZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyc1tldmVudF0sIGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRmb3IgKHZhciBldmVudCBpbiBoYW5kbGVycykge1xuXHRcdFx0XHRpZiAoaGFuZGxlcnMuaGFzT3duUHJvcGVydHkoZXZlbnQpKSB7XG5cdFx0XHRcdFx0aW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcnNbZXZlbnRdLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcHJvbWlzZS9fd2hlbkltYWdlTG9hZHN9ICovXG5jb25zdCBfd2hlbkltYWdlTG9hZHMgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcHJvbWlzZS9fd2hlbkltYWdlTG9hZHNcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9wcm9taXNlL19sb2FkSW1hZ2VBc09iamVjdFVSTH0gKi9cbmNvbnN0IF9sb2FkSW1hZ2VBc09iamVjdFVSTCA9IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL19sb2FkSW1hZ2VBc09iamVjdFVSTFwiKTtcblxuLy8gdmFyIGlzQmxvYlJFID0gL15ibG9iXFw6LiovO1xuXG4vLyB2YXIgbG9nTWVzc2FnZSA9IFwiJXM6OndoZW5EZWZhdWx0SW1hZ2VMb2FkcyBbJXNdOiAlc1wiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZpZXcpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBzb3VyY2UgPSB2aWV3Lm1vZGVsLmdldChcInNvdXJjZVwiKTtcblx0XHRpZiAoc291cmNlLmhhcyhcInByZWZldGNoZWRcIikpIHtcblx0XHRcdHZpZXcuZGVmYXVsdEltYWdlLnNyYyA9IHNvdXJjZS5nZXQoXCJwcmVmZXRjaGVkXCIpO1xuXHRcdFx0X3doZW5JbWFnZUxvYWRzKHZpZXcuZGVmYXVsdEltYWdlKVxuXHRcdFx0XHQudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbih0YXJnZXRFbCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmlldy5tZWRpYVN0YXRlID0gXCJwZW5kaW5nXCI7XG5cblx0XHRcdHZhciBzVXJsID0gc291cmNlLmdldChcIm9yaWdpbmFsXCIpO1xuXHRcdFx0dmFyIHByb2dyZXNzRm4gPSBmdW5jdGlvbihwcm9ncmVzcywgZXYpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2cobG9nTWVzc2FnZSwgdmlldy5jaWQsIFwicHJvZ3Jlc3NcIiwgcHJvZ3Jlc3MpO1xuXHRcdFx0XHR2aWV3LnVwZGF0ZU1lZGlhUHJvZ3Jlc3MocHJvZ3Jlc3MsIHNVcmwpO1xuXHRcdFx0fTtcblx0XHRcdHByb2dyZXNzRm4gPSBfLnRocm90dGxlKHByb2dyZXNzRm4sIDEwMCwge1xuXHRcdFx0XHRsZWFkaW5nOiB0cnVlLFxuXHRcdFx0XHR0cmFpbGluZzogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdFx0X2xvYWRJbWFnZUFzT2JqZWN0VVJMKHNVcmwsIHByb2dyZXNzRm4pXG5cdFx0XHRcdC50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKHVybCkge1xuXHRcdFx0XHRcdFx0aWYgKC9eYmxvYlxcOi4qLy50ZXN0KHVybCkpIHtcblx0XHRcdFx0XHRcdFx0c291cmNlLnNldChcInByZWZldGNoZWRcIiwgdXJsKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHZpZXcuZGVmYXVsdEltYWdlLnNyYyA9IHVybDtcblx0XHRcdFx0XHRcdHJldHVybiB2aWV3LmRlZmF1bHRJbWFnZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQudGhlbihfd2hlbkltYWdlTG9hZHMpXG5cdFx0XHRcdC50aGVuKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKHRhcmdldEVsKSB7XG5cdFx0XHRcdFx0XHR2aWV3Lm9uKFwidmlldzpyZW1vdmVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgcHJlZmV0Y2hlZCA9IHNvdXJjZS5nZXQoXCJwcmVmZXRjaGVkXCIpO1xuXHRcdFx0XHRcdFx0XHRpZiAocHJlZmV0Y2hlZCAmJiAvXmJsb2JcXDovLnRlc3QocHJlZmV0Y2hlZCkpIHtcblx0XHRcdFx0XHRcdFx0XHRzb3VyY2UudW5zZXQoXCJwcmVmZXRjaGVkXCIsIHsgc2lsZW50OiB0cnVlIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwocHJlZmV0Y2hlZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uKGVycikge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBQcm9taXNlICovXG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXdFcnJvcn0gKi9cbmNvbnN0IFZpZXdFcnJvciA9IHJlcXVpcmUoXCJhcHAvdmlldy9iYXNlL1ZpZXdFcnJvclwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3RXJyb3J9ICovXG5jb25zdCB3aGVuVmlld0lzQXR0YWNoZWQgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcHJvbWlzZS93aGVuVmlld0lzQXR0YWNoZWRcIik7XG5cbmZ1bmN0aW9uIHdoZW5TY3JvbGxpbmdFbmRzKHZpZXcpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBwYXJlbnQgPSB2aWV3LnBhcmVudFZpZXc7XG5cdFx0aWYgKHBhcmVudCA9PT0gbnVsbCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIiVzOjp3aGVuU2Nyb2xsaW5nRW5kcyBbJXNdIChzeW5jKVwiLCB2aWV3LmNpZCwgXCJyZWplY3RlZFwiLCB2aWV3LmF0dGFjaGVkKTtcblx0XHRcdHJlamVjdChuZXcgVmlld0Vycm9yKHZpZXcsIG5ldyBFcnJvcihcIndoZW5TY3JvbGxpbmdFbmRzOiB2aWV3IGhhcyBubyBwYXJlbnRcIikpKTtcblx0XHR9IGVsc2UgaWYgKCFwYXJlbnQuc2Nyb2xsaW5nKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjp3aGVuU2Nyb2xsaW5nRW5kcyBbJXNdIChzeW5jKVwiLCB2aWV3LmNpZCwgXCJyZXNvbHZlZFwiLCB2aWV3LmF0dGFjaGVkKTtcblx0XHRcdHJlc29sdmUodmlldyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBjbGVhbnVwID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHBhcmVudC5vZmYoXCJ2aWV3OnNjcm9sbGVuZFwiLCBvblNjcm9sbGVuZCk7XG5cdFx0XHRcdHBhcmVudC5vZmYoXCJ2aWV3OnJlbW92ZVwiLCBvblJlbW92ZSk7XG5cdFx0XHR9O1xuXHRcdFx0dmFyIG9uU2Nyb2xsZW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OndoZW5TY3JvbGxpbmdFbmRzIFslc11cIiwgdmlldy5jaWQsIFwicmVzb2x2ZWRcIiwgdmlldy5hdHRhY2hlZCk7XG5cdFx0XHRcdGNsZWFudXAoKTtcblx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdH07XG5cdFx0XHR2YXIgb25SZW1vdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczo6d2hlblNjcm9sbGluZ0VuZHMgWyVzXVwiLCB2aWV3LmNpZCwgXCJyZWplY3RlZFwiLCB2aWV3LmF0dGFjaGVkKTtcblx0XHRcdFx0Y2xlYW51cCgpO1xuXHRcdFx0XHRyZWplY3QobmV3IFZpZXdFcnJvcih2aWV3LCBuZXcgRXJyb3IoXCJ3aGVuU2Nyb2xsaW5nRW5kczogdmlldyB3YXMgcmVtb3ZlZFwiKSkpO1xuXHRcdFx0fTtcblx0XHRcdHBhcmVudC5vbihcInZpZXc6c2Nyb2xsZW5kXCIsIG9uU2Nyb2xsZW5kKTtcblx0XHRcdHBhcmVudC5vbihcInZpZXc6cmVtb3ZlXCIsIG9uUmVtb3ZlKTtcblx0XHR9XG5cdH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZpZXcpIHtcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh2aWV3KVxuXHRcdC50aGVuKHdoZW5WaWV3SXNBdHRhY2hlZClcblx0XHQudGhlbih3aGVuU2Nyb2xsaW5nRW5kcyk7XG59O1xuXG4vKlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2aWV3KSB7XG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUodmlldylcblx0XHQudGhlbihmdW5jdGlvbih2aWV3KSB7XG5cdFx0XHRpZiAodmlldy5hdHRhY2hlZCkge1xuXHRcdFx0XHRyZXR1cm4gdmlldztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0XHR2aWV3Lm9uY2UoXCJ2aWV3OmF0dGFjaGVkXCIsIGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0XHRcdHJlc29sdmUodmlldyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24odmlldykge1xuXHRcdFx0aWYgKCF2aWV3LnBhcmVudFZpZXcuc2Nyb2xsaW5nKSB7XG5cdFx0XHRcdHJldHVybiB2aWV3O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRcdHZhciByZXNvbHZlT25TY3JvbGxlbmQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OndoZW5TY3JvbGxpbmdFbmRzIFslc11cIiwgdmlldy5jaWQsIFwicmVzb2x2ZWRcIik7XG5cdFx0XHRcdFx0XHR2aWV3Lm9mZihcInZpZXc6cmVtb3ZlXCIsIHJlamVjdE9uUmVtb3ZlKTtcblx0XHRcdFx0XHRcdHJlc29sdmUodmlldyk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR2YXIgcmVqZWN0T25SZW1vdmUgPSBmdW5jdGlvbih2aWV3KSB7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjp3aGVuU2Nyb2xsaW5nRW5kcyBbJXNdXCIsIHZpZXcuY2lkLCBcInJlamVjdGVkXCIpO1xuXHRcdFx0XHRcdFx0dmlldy5wYXJlbnRWaWV3Lm9mZihcInZpZXc6c2Nyb2xsZW5kXCIsIHJlc29sdmVPblNjcm9sbGVuZCk7XG5cdFx0XHRcdFx0XHRyZWplY3QobmV3IFZpZXdFcnJvcih2aWV3LFxuXHRcdFx0XHRcdFx0XHRuZXcgRXJyb3IoXCJ3aGVuU2VsZWN0U2Nyb2xsaW5nRW5kczogdmlldyB3YXMgcmVtb3ZlZCAoXCIrIHZpZXcuY2lkICtcIilcIikpKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHZpZXcucGFyZW50Vmlldy5vbmNlKFwidmlldzpzY3JvbGxlbmRcIiwgcmVzb2x2ZU9uU2Nyb2xsZW5kKTtcblx0XHRcdFx0XHR2aWV3Lm9uY2UoXCJ2aWV3OnJlbW92ZVwiLCByZWplY3RPblJlbW92ZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xufTtcbiovXG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld0Vycm9yfSAqL1xuY29uc3QgVmlld0Vycm9yID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld0Vycm9yXCIpO1xuXG4vLyB2YXIgbG9nTWVzc2FnZSA9IFwiJXM6OndoZW5TZWxlY3Rpb25EaXN0YW5jZUlzIFslc106ICVzXCI7XG5cbi8qKlxuICogQHBhcmFtIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3fVxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmlldywgZGlzdGFuY2UpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdC8vIGlmICghKHZpZXcubW9kZWwgJiYgdmlldy5tb2RlbC5jb2xsZWN0aW9uKSkge1xuXHRcdC8vIFx0cmVqZWN0KG5ldyBWaWV3RXJyb3IodmlldywgbmV3IEVycm9yKFwid2hlblNlbGVjdGlvbklzQ29udGlndW91czogbW9kZWwuY29sbGVjdGlvbiBpcyBlbXB0eVwiKSkpO1xuXHRcdC8vIH1cblx0XHR2YXIgbW9kZWwgPSB2aWV3Lm1vZGVsO1xuXHRcdHZhciBjb2xsZWN0aW9uID0gbW9kZWwuY29sbGVjdGlvbjtcblxuXHRcdHZhciBjaGVjayA9IGZ1bmN0aW9uKG4pIHsgLy8gQ2hlY2sgaW5kaWNlcyBmb3IgY29udGlndWl0eVxuXHRcdFx0cmV0dXJuIE1hdGguYWJzKGNvbGxlY3Rpb24uaW5kZXhPZihtb2RlbCkgLSBjb2xsZWN0aW9uLnNlbGVjdGVkSW5kZXgpIDw9IGRpc3RhbmNlO1xuXHRcdH07XG5cblx0XHRpZiAoY2hlY2soKSkge1xuXHRcdFx0Ly8gY29uc29sZS5sb2cobG9nTWVzc2FnZSwgdmlldy5jaWQsIFwicmVzb2x2ZVwiLCBcInN5bmNcIik7XG5cdFx0XHRyZXNvbHZlKHZpZXcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgY2xlYW51cE9uU2V0dGxlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGxvZ01lc3NhZ2UsIHZpZXcuY2lkLCBcImNsZWFudXBcIiwgXCJhc3luY1wiKTtcblx0XHRcdFx0Y29sbGVjdGlvbi5vZmYoXCJzZWxlY3Q6b25lIHNlbGVjdDpub25lXCIsIHJlc29sdmVPblNlbGVjdCk7XG5cdFx0XHRcdHZpZXcub2ZmKFwidmlldzpyZW1vdmVkXCIsIHJlamVjdE9uUmVtb3ZlKTtcblx0XHRcdH07XG5cdFx0XHR2YXIgcmVzb2x2ZU9uU2VsZWN0ID0gZnVuY3Rpb24obW9kZWwpIHtcblx0XHRcdFx0aWYgKGNoZWNrKCkpIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhsb2dNZXNzYWdlLCB2aWV3LmNpZCwgXCJyZXNvbHZlXCIsIFwiYXN5bmNcIik7XG5cdFx0XHRcdFx0Y2xlYW51cE9uU2V0dGxlKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHZhciByZWplY3RPblJlbW92ZSA9IGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0Y2xlYW51cE9uU2V0dGxlKCk7XG5cdFx0XHRcdHJlamVjdChuZXcgVmlld0Vycm9yKHZpZXcsIG5ldyBFcnJvcihcIndoZW5TZWxlY3Rpb25EaXN0YW5jZUlzOiB2aWV3IHdhcyByZW1vdmVkXCIpKSk7XG5cdFx0XHR9O1xuXHRcdFx0Y29sbGVjdGlvbi5vbihcInNlbGVjdDpvbmUgc2VsZWN0Om5vbmVcIiwgcmVzb2x2ZU9uU2VsZWN0KTtcblx0XHRcdHZpZXcub24oXCJ2aWV3OnJlbW92ZWRcIiwgcmVqZWN0T25SZW1vdmUpO1xuXHRcdH1cblx0fSk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXdFcnJvcn0gKi9cbi8vIHZhciBWaWV3RXJyb3IgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3RXJyb3JcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3Byb21pc2Uvd2hlblNlbGVjdGlvbkRpc3RhbmNlSXN9ICovXG5jb25zdCB3aGVuU2VsZWN0aW9uRGlzdGFuY2VJcyA9IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL3doZW5TZWxlY3Rpb25EaXN0YW5jZUlzXCIpO1xuXG4vKiogQHBhcmFtIHttb2R1bGU6YXBwL3ZpZXcvYmFzZS9WaWV3fSAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2aWV3KSB7XG5cdHJldHVybiB3aGVuU2VsZWN0aW9uRGlzdGFuY2VJcyh2aWV3LCAxKTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmlldykge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0aWYgKHZpZXcuYXR0YWNoZWQpIHtcblx0XHRcdHJlc29sdmUodmlldyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZpZXcub24oXCJ2aWV3OmF0dGFjaGVkXCIsIGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZpZXcpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdGlmICghdmlldy5pbnZhbGlkYXRlZCkge1xuXHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmlldy5vbmNlKFwidmlldzpyZW5kZXI6YWZ0ZXJcIiwgZnVuY3Rpb24odmlldywgZmxhZ3MpIHtcblx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvcmVuZGVyL0Nhcm91c2VsUmVuZGVyZXJcbiAqL1xuXG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9iYXNlL1ZpZXd9ICovXG5jb25zdCBWaWV3ID0gcmVxdWlyZShcImFwcC92aWV3L2Jhc2UvVmlld1wiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6dW5kZXJzY29yZX0gKi9cbmNvbnN0IGdldEJveEVkZ2VTdHlsZXMgPSByZXF1aXJlKFwidXRpbHMvY3NzL2dldEJveEVkZ2VTdHlsZXNcIik7XG5cbi8vIEZJWE1FOiB0aGlzIGZpeHVwIHNob3VsZCBub3QgYmUgZG9uZSBoZXJlXG4vLyAvKiogQHR5cGUge21vZHVsZTp1dGlscy9uZXQvdG9BYnNvbHV0ZVVSTH0gKi9cbi8vIHZhciB0b0Fic29sdXRlVVJMID0gcmVxdWlyZShcInV0aWxzL25ldC90b0Fic29sdXRlVVJMXCIpO1xuLy8gLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4vLyB2YXIgQUJTX0FQUF9ST09UID0gdG9BYnNvbHV0ZVVSTChyZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKS5BUFBfUk9PVCk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9DYXJvdXNlbFJlbmRlcmVyfVxuICovXG52YXIgQ2Fyb3VzZWxSZW5kZXJlciA9IFZpZXcuZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0Y2lkUHJlZml4OiBcImNhcm91c2VsUmVuZGVyZXJcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0YWdOYW1lOiBcImRpdlwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNsYXNzTmFtZTogXCJjYXJvdXNlbC1pdGVtXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0dGVtcGxhdGU6IF8udGVtcGxhdGUoXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50IHNpemluZ1xcXCI+PCU9IG5hbWUgJT48L2Rpdj5cIiksXG5cblx0cHJvcGVydGllczoge1xuXHRcdGNvbnRlbnQ6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9jb250ZW50IHx8ICh0aGlzLl9jb250ZW50ID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIikpO1xuXHRcdFx0fSxcblx0XHR9LFxuXHRcdHNpemluZzoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3NpemluZyB8fCAodGhpcy5fc2l6aW5nID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLnNpemluZ1wiKSk7XG5cdFx0XHR9LFxuXHRcdH1cblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRpZiAodGhpcy5tb2RlbC5hdHRyKFwiQGNsYXNzbmFtZVwiKSAhPT0gdm9pZCAwKSB7XG5cdFx0XHR2YXIgY2xzQXR0ciA9IHRoaXMubW9kZWwuYXR0cihcIkBjbGFzc25hbWVcIikuc3BsaXQoXCIgXCIpO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjbHNBdHRyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZChjbHNBdHRyW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0b3B0aW9ucy5wYXJlbnRWaWV3ICYmICh0aGlzLnBhcmVudFZpZXcgPSBvcHRpb25zLnBhcmVudFZpZXcpO1xuXHRcdHRoaXMubWV0cmljcyA9IHt9O1xuXHRcdHRoaXMubWV0cmljcy5jb250ZW50ID0ge307XG5cdFx0dGhpcy5jcmVhdGVDaGlsZHJlbigpO1xuXHRcdC8vIHRoaXMuZW5hYmxlZCA9ICEhb3B0aW9ucy5lbmFibGVkOyAvLyBmb3JjZSBib29sXG5cdFx0dGhpcy5zZXRFbmFibGVkKCEhb3B0aW9ucy5lbmFibGVkKTtcblx0fSxcblxuXHRjcmVhdGVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwudG9KU09OKCkpO1xuXHRcdC8vIEZJWE1FOiB0aGlzIGZpeHVwIHNob3VsZCBub3QgYmUgZG9uZSBoZXJlXG5cdFx0Ly8gRklYRUQ6IG5vdyBkb25lIGluIHhzbHRcblx0XHQvKnRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcImFbaHJlZl1cIikuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuXHRcdFx0dmFyIHVybCA9IHRvQWJzb2x1dGVVUkwoZWwuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSk7XG5cdFx0XHRpZiAodXJsLmluZGV4T2YoQUJTX0FQUF9ST09UKSAhPT0gMCkge1xuXHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG5cdFx0XHR9XG5cdFx0fSk7Ki9cblx0fSxcblxuXHQvKiogQHJldHVybiB7SFRNTEVsZW1lbnR9ICovXG5cdGdldFNpemluZ0VsOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5fc2l6aW5nIHx8ICh0aGlzLl9zaXppbmcgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuc2l6aW5nXCIpKTtcblx0fSxcblxuXHQvKiogQHJldHVybiB7SFRNTEVsZW1lbnR9ICovXG5cdGdldENvbnRlbnRFbDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NvbnRlbnQgfHwgKHRoaXMuX2NvbnRlbnQgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudFwiKSk7XG5cdH0sXG5cblx0LyoqIEByZXR1cm4ge3RoaXN9ICovXG5cdG1lYXN1cmU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzaXppbmcgPSB0aGlzLmdldFNpemluZ0VsKCk7XG5cblx0XHR0aGlzLm1ldHJpY3MgPSBnZXRCb3hFZGdlU3R5bGVzKHRoaXMuZWwsIHRoaXMubWV0cmljcyk7XG5cdFx0dGhpcy5tZXRyaWNzLmNvbnRlbnQgPSBnZXRCb3hFZGdlU3R5bGVzKHRoaXMuZ2V0Q29udGVudEVsKCksIHRoaXMubWV0cmljcy5jb250ZW50KTtcblxuXHRcdHNpemluZy5zdHlsZS5tYXhXaWR0aCA9IFwiXCI7XG5cdFx0c2l6aW5nLnN0eWxlLm1heEhlaWdodCA9IFwiXCI7XG5cblx0XHR0aGlzLm1ldHJpY3MuY29udGVudC54ID0gc2l6aW5nLm9mZnNldExlZnQgKyBzaXppbmcuY2xpZW50TGVmdDtcblx0XHR0aGlzLm1ldHJpY3MuY29udGVudC55ID0gc2l6aW5nLm9mZnNldFRvcCArIHNpemluZy5jbGllbnRUb3A7XG5cdFx0dGhpcy5tZXRyaWNzLmNvbnRlbnQud2lkdGggPSBzaXppbmcuY2xpZW50V2lkdGg7XG5cdFx0dGhpcy5tZXRyaWNzLmNvbnRlbnQuaGVpZ2h0ID0gc2l6aW5nLmNsaWVudEhlaWdodDtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLm1lYXN1cmUoKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRnZXRTZWxlY3Rpb25EaXN0YW5jZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIE1hdGguYWJzKHRoaXMubW9kZWwuY29sbGVjdGlvbi5pbmRleE9mKHRoaXMubW9kZWwpIC0gdGhpcy5tb2RlbC5jb2xsZWN0aW9uLnNlbGVjdGVkSW5kZXgpO1xuXHR9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2Fyb3VzZWxSZW5kZXJlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L3JlbmRlci9DbGlja2FibGVSZW5kZXJlclxuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9MYWJlbFJlbmRlcmVyfSAqL1xuY29uc3QgTGFiZWxSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvTGFiZWxSZW5kZXJlclwiKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcmVuZGVyL0NsaWNrYWJsZVJlbmRlcmVyfVxuICovXG52YXIgQ2xpY2thYmxlUmVuZGVyZXIgPSBMYWJlbFJlbmRlcmVyLmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJjbGlja2FibGVSZW5kZXJlclwiLFxuXG5cdC8vIGRlZmF1bHRzOiB7XG5cdC8vIFx0dGFyZ2V0OiBcIi5sYWJlbFwiXG5cdC8vIH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRldmVudHM6IHtcblx0XHRcImNsaWNrIC5sYWJlbFwiOiBmdW5jdGlvbihldikge1xuXHRcdFx0aWYgKGV2LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblxuXHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMudHJpZ2dlcihcInJlbmRlcmVyOmNsaWNrXCIsIHRoaXMubW9kZWwsIGV2KTtcblx0XHR9LFxuXHRcdFwiY2xpY2sgYVwiOiBmdW5jdGlvbihldikge1xuXHRcdFx0ZXYuZGVmYXVsdFByZXZlbnRlZCB8fCBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdC8vIFx0b3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblx0Ly8gXHQvLyBpZiAob3B0aW9ucykge1xuXHQvLyBcdG9wdGlvbnMgPSBfLmRlZmF1bHRzKHt9LCBvcHRpb25zLCBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSk7XG5cdC8vIFx0Ly8gfSBlbHNlIHtcblx0Ly8gXHQvLyBcdCBfLmRlZmF1bHRzKHt9LCBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSk7XG5cdC8vIFx0Ly8gfVxuXHQvLyBcdHRoaXMuZXZlbnRzW1wiY2xpY2sgXCIgKyBvcHRpb25zLnRhcmdldF0gPSB0aGlzLmNsaWNrSGFuZGxlcjtcblx0Ly8gfSxcblx0Ly9cblx0Ly8gY2xpY2tIYW5kbGVyOiBmdW5jdGlvbihldikge1xuXHQvLyBcdGlmIChldi5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cdC8vXG5cdC8vIFx0ZXYucHJldmVudERlZmF1bHQoKTtcblx0Ly8gXHR0aGlzLnRyaWdnZXIoXCJyZW5kZXJlcjpjbGlja1wiLCB0aGlzLm1vZGVsLCBldik7XG5cdC8vIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENsaWNrYWJsZVJlbmRlcmVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgaGVscGVyLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXMyPWhlbHBlcnMuaGVscGVyTWlzc2luZywgYWxpYXMzPVwiZnVuY3Rpb25cIjtcblxuICByZXR1cm4gXCI8YSBocmVmPVxcXCIjXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMuZG9taWQgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmRvbWlkIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJkb21pZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiPjxzcGFuIGNsYXNzPVxcXCJsYWJlbFxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5uYW1lIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJuYW1lXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L3NwYW4+PC9hPlwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9yZW5kZXIvRGVmYXVsdFNlbGVjdGFibGVSZW5kZXJlclxuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9DbGlja2FibGVSZW5kZXJlcn0gKi9cbmNvbnN0IENsaWNrYWJsZVJlbmRlcmVyID0gcmVxdWlyZShcImFwcC92aWV3L3JlbmRlci9DbGlja2FibGVSZW5kZXJlclwiKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcmVuZGVyL0RlZmF1bHRTZWxlY3RhYmxlUmVuZGVyZXJ9XG4gKi9cbnZhciBEZWZhdWx0U2VsZWN0YWJsZVJlbmRlcmVyID0gQ2xpY2thYmxlUmVuZGVyZXIuZXh0ZW5kKHtcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdHRhZ05hbWU6IFwibGlcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjbGFzc05hbWU6IFwibGlzdC1pdGVtXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0dGVtcGxhdGU6IHJlcXVpcmUoXCIuL0RlZmF1bHRTZWxlY3RhYmxlUmVuZGVyZXIuaGJzXCIpLFxuXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsIFwic2VsZWN0ZWQgZGVzZWxlY3RlZFwiLCB0aGlzLl9yZW5kZXJDbGFzc0xpc3QpO1xuXHRcdHRoaXMuX3JlbmRlckNsYXNzTGlzdCgpO1xuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsLmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSk7XG5cdFx0dGhpcy5fcmVuZGVyQ2xhc3NMaXN0KCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0X3JlbmRlckNsYXNzTGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwic2VsZWN0ZWRcIiwgdGhpcy5tb2RlbC5zZWxlY3RlZCk7XG5cdH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWZhdWx0U2VsZWN0YWJsZVJlbmRlcmVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGhlbHBlciwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1oZWxwZXJzLmhlbHBlck1pc3NpbmcsIGFsaWFzMz1cImZ1bmN0aW9uXCIsIGFsaWFzND1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCI8c3BhbiBjbGFzcz1cXFwibGFiZWxcXFwiPlwiXG4gICAgKyBhbGlhczQoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5uYW1lIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJuYW1lXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvc3Bhbj48YSBocmVmPVxcXCIjXCJcbiAgICArIGFsaWFzNCgoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLmRvbWlkIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kb21pZCA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiZG9taWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxcIj48Yj4gPC9iPjwvYT5cIjtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvcmVuZGVyL0RvdE5hdmlnYXRpb25SZW5kZXJlclxuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld30gKi9cbmNvbnN0IFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3XCIpO1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQ2xpY2thYmxlUmVuZGVyZXJ9ICovXG4vLyB2YXIgQ2xpY2thYmxlUmVuZGVyZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcmVuZGVyL0xhYmVsUmVuZGVyZXJcIik7XG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IHZpZXdUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuL0RvdE5hdmlnYXRpb25SZW5kZXJlci5oYnNcIik7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9Eb3ROYXZpZ2F0aW9uUmVuZGVyZXJ9XG4gKi9cbnZhciBEb3ROYXZpZ2F0aW9uUmVuZGVyZXIgPSBWaWV3LmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJkb3RSZW5kZXJlclwiLFxuXHQvKiogQG92ZXJyaWRlICovXG5cdHRhZ05hbWU6IFwibGlcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjbGFzc05hbWU6IFwibGlzdC1pdGVtXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0dGVtcGxhdGU6IHZpZXdUZW1wbGF0ZSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGV2ZW50czoge1xuXHRcdFwiY2xpY2tcIjogZnVuY3Rpb24oZXYpIHtcblx0XHRcdGlmIChldi5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cblx0XHRcdGV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoXCJyZW5kZXJlcjpjbGlja1wiLCB0aGlzLm1vZGVsLCBldik7XG5cdFx0fSxcblx0XHRcImNsaWNrIGFcIjogZnVuY3Rpb24oZXYpIHtcblx0XHRcdGV2LmRlZmF1bHRQcmV2ZW50ZWQgfHwgZXYucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCBcInNlbGVjdGVkIGRlc2VsZWN0ZWRcIiwgdGhpcy5yZW5kZXJDbGFzc0xpc3QpO1xuXHRcdHRoaXMucmVuZGVyQ2xhc3NMaXN0KCk7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuZWwuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLnRvSlNPTigpKTtcblx0XHR0aGlzLnJlbmRlckNsYXNzTGlzdCgpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbmRlckNsYXNzTGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwic2VsZWN0ZWRcIiwgdGhpcy5tb2RlbC5zZWxlY3RlZCk7XG5cdH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb3ROYXZpZ2F0aW9uUmVuZGVyZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzQ29tcGlsZXIgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnNDb21waWxlci50ZW1wbGF0ZSh7XCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgaGVscGVyLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXMyPWhlbHBlcnMuaGVscGVyTWlzc2luZywgYWxpYXMzPVwiZnVuY3Rpb25cIiwgYWxpYXM0PWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcInBsYWNlaG9sZGVyIHNpemluZ1xcXCI+PC9kaXY+XFxuPGltZyBjbGFzcz1cXFwiY29udGVudCBtZWRpYS1ib3JkZXIgZGVmYXVsdFxcXCIgYWx0PVxcXCJcIlxuICAgICsgYWxpYXM0KCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMudGV4dCB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudGV4dCA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwidGV4dFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiIGxvbmdkZXNjPVxcXCIjZGVzY19tXCJcbiAgICArIGFsaWFzNCgoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLmlkIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwiaWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxcIiAvPlxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9yZW5kZXIvSW1hZ2VSZW5kZXJlclxuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L01lZGlhUmVuZGVyZXJ9ICovXG5jb25zdCBNZWRpYVJlbmRlcmVyID0gcmVxdWlyZShcIi4vTWVkaWFSZW5kZXJlclwiKTtcblxuLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbmNvbnN0IHZpZXdUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuL0ltYWdlUmVuZGVyZXIuaGJzXCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9yZW5kZXIvSW1hZ2VSZW5kZXJlcn1cbiAqL1xudmFyIEltYWdlUmVuZGVyZXIgPSBNZWRpYVJlbmRlcmVyLmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJpbWFnZVJlbmRlcmVyXCIsXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjbGFzc05hbWU6IE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLmNsYXNzTmFtZSArIFwiIGltYWdlLWl0ZW1cIixcblx0LyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cblx0dGVtcGxhdGU6IHZpZXdUZW1wbGF0ZSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcblx0XHRNZWRpYVJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0Ly8gdGhpcy5jcmVhdGVDaGlsZHJlbigpO1xuXHRcdC8vIHRoaXMuaW5pdGlhbGl6ZUFzeW5jKCk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogY2hpbGRyZW4vbGF5b3V0XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0Y3JlYXRlQ2hpbGRyZW46IGZ1bmN0aW9uKCkge1xuXHRcdE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZUNoaWxkcmVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0Ly8gdGhpcy5lbC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwudG9KU09OKCkpO1xuXHRcdHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2Vob2xkZXJcIik7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0Ly8gdGhpcy5tZWFzdXJlKCk7XG5cblx0XHR2YXIgaW1nID0gdGhpcy5nZXREZWZhdWx0SW1hZ2UoKTtcblx0XHRpZiAodGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoKSB7XG5cdFx0XHRpbWcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgdGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMubWV0cmljcy5tZWRpYS5oZWlnaHQpIHtcblx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5tZXRyaWNzLm1lZGlhLmhlaWdodCk7XG5cdFx0fVxuXG5cdFx0dmFyIGNvbnRlbnQgPSB0aGlzLmdldENvbnRlbnRFbCgpO1xuXHRcdGNvbnRlbnQuc3R5bGUubGVmdCA9IHRoaXMubWV0cmljcy5jb250ZW50LnggKyBcInB4XCI7XG5cdFx0Y29udGVudC5zdHlsZS50b3AgPSB0aGlzLm1ldHJpY3MuY29udGVudC55ICsgXCJweFwiO1xuXG5cdFx0Ly8gdmFyIHNpemluZyA9IHRoaXMuZ2V0U2l6aW5nRWwoKTtcblx0XHQvLyBzaXppbmcuc3R5bGUubWF4V2lkdGggPSB0aGlzLm1ldHJpY3MuY29udGVudC53aWR0aCArIFwicHhcIjtcblx0XHQvLyBzaXppbmcuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tZXRyaWNzLmNvbnRlbnQuaGVpZ2h0ICsgXCJweFwiO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogaW5pdGlhbGl6ZUFzeW5jXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdGluaXRpYWxpemVBc3luYzogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemVBc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG5cdFx0Ly8gcmV0dXJuIE1lZGlhUmVuZGVyZXIud2hlblNlbGVjdGlvbklzQ29udGlndW91cyh0aGlzKVxuXHRcdC8vIC8vIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcylcblx0XHQvLyAvLyBcdC50aGVuKE1lZGlhUmVuZGVyZXIud2hlblNlbGVjdGlvbklzQ29udGlndW91cylcblx0XHQvLyBcdC50aGVuKE1lZGlhUmVuZGVyZXIud2hlblNlbGVjdFRyYW5zaXRpb25FbmRzKVxuXHRcdC8vIFx0LnRoZW4oTWVkaWFSZW5kZXJlci53aGVuRGVmYXVsdEltYWdlTG9hZHMpXG5cdFx0Ly8gLnRoZW4oXG5cdFx0Ly8gXHRmdW5jdGlvbih2aWV3KSB7XG5cdFx0Ly8gXHRcdHZpZXcubWVkaWFTdGF0ZSA9IFwicmVhZHlcIjtcblx0XHQvLyBcdH0pXG5cdFx0Ly8gLmNhdGNoKFxuXHRcdC8vIFx0ZnVuY3Rpb24oZXJyKSB7XG5cdFx0Ly8gXHRcdGlmIChlcnIgaW5zdGFuY2VvZiBWaWV3RXJyb3IpIHtcblx0XHQvLyBcdFx0XHQvLyBOT1RFOiBpZ25vcmUgVmlld0Vycm9yIHR5cGVcblx0XHQvLyBcdFx0XHQvLyBjb25zb2xlLmxvZyhlcnIudmlldy5jaWQsIGVyci52aWV3Lm1vZGVsLmNpZCwgXCJJbWFnZVJlbmRlcmVyOiBcIiArIGVyci5tZXNzYWdlKTtcblx0XHQvLyBcdFx0fSBlbHNlIHtcblx0XHQvLyBcdFx0XHRjb25zb2xlLmVycm9yKHRoaXMuY2lkLCBlcnIubmFtZSwgZXJyKTtcblx0XHQvLyBcdFx0XHR0aGlzLnBsYWNlaG9sZGVyLmlubmVySFRNTCA9IFwiPHAgY2xhc3M9XFxcImNvbG9yLWZnXFxcIiBzdHlsZT1cXFwicG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7cGFkZGluZzozcmVtO1xcXCI+PHN0cm9uZz5cIiArIGVyci5uYW1lICsgXCI8L3N0cm9uZz4gXCIgKyBlcnIubWVzc2FnZSArIFwiPC9wPlwiO1xuXHRcdC8vIFx0XHRcdHRoaXMubWVkaWFTdGF0ZSA9IFwiZXJyb3JcIjtcblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0fS5iaW5kKHRoaXMpKVxuXHRcdDtcblx0fSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEltYWdlUmVuZGVyZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9yZW5kZXIvTGFiZWxSZW5kZXJlclxuICovXG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld30gKi9cbmNvbnN0IFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3XCIpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9yZW5kZXIvTGFiZWxSZW5kZXJlcn1cbiAqL1xudmFyIExhYmVsUmVuZGVyZXIgPSBWaWV3LmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJsYWJlbFJlbmRlcmVyXCIsXG5cblx0cHJvcGVydGllczoge1xuXHRcdGxhYmVsOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fbGFiZWwgfHwgKHRoaXMuX2xhYmVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmxhYmVsXCIpKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gbWVhc3VyZWRXaWR0aDoge1xuXHRcdC8vIFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHQvLyBcdFx0cmV0dXJuIHRoaXMuX21lYXN1cmVkV2lkdGg7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfSxcblx0XHQvLyBtZWFzdXJlZEhlaWdodDoge1xuXHRcdC8vIFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHQvLyBcdFx0cmV0dXJuIHRoaXMuX21lYXN1cmVkSGVpZ2h0O1xuXHRcdC8vIFx0fVxuXHRcdC8vIH0sXG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBtZWFzdXJlXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBfbWVhc3VyZWRXaWR0aDogbnVsbCxcblx0Ly8gX21lYXN1cmVkSGVpZ2h0OiBudWxsLFxuXHQvLyBtZWFzdXJlOiBmdW5jdGlvbigpIHt9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gTGFiZWxSZW5kZXJlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLypnbG9iYWwgWE1MSHR0cFJlcXVlc3QsIEhUTUxNZWRpYUVsZW1lbnQsIE1lZGlhRXJyb3IqL1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L3JlbmRlci9NZWRpYVJlbmRlcmVyXG4gKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6dW5kZXJzY29yZS5zdHJpbmdzL2xwYWR9ICovXG5jb25zdCBscGFkID0gcmVxdWlyZShcInVuZGVyc2NvcmUuc3RyaW5nL2xwYWRcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9tb2RlbC9pdGVtL01lZGlhSXRlbX0gKi9cbmNvbnN0IE1lZGlhSXRlbSA9IHJlcXVpcmUoXCJhcHAvbW9kZWwvaXRlbS9NZWRpYUl0ZW1cIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9DYXJvdXNlbFJlbmRlcmVyfSAqL1xuY29uc3QgQ2Fyb3VzZWxSZW5kZXJlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9yZW5kZXIvQ2Fyb3VzZWxSZW5kZXJlclwiKTtcblxuLy8gdmFyIGVycm9yVGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vdGVtcGxhdGUvRXJyb3JCbG9jay5oYnNcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTp1dGlscy9jc3MvZ2V0Qm94RWRnZVN0eWxlc30gKi9cbi8vIHZhciBnZXRCb3hFZGdlU3R5bGVzID0gcmVxdWlyZShcInV0aWxzL2Nzcy9nZXRCb3hFZGdlU3R5bGVzXCIpO1xuXG52YXIgTWVkaWFSZW5kZXJlciA9IENhcm91c2VsUmVuZGVyZXIuZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0Y2lkUHJlZml4OiBcIm1lZGlhUmVuZGVyZXJcIixcblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNsYXNzTmFtZTogQ2Fyb3VzZWxSZW5kZXJlci5wcm90b3R5cGUuY2xhc3NOYW1lICsgXCIgbWVkaWEtaXRlbVwiLFxuXHQvKiogQHR5cGUge21vZHVsZTphcHAvbW9kZWwvTWVkaWFJdGVtfSAqL1xuXHRtb2RlbDogTWVkaWFJdGVtLFxuXG5cdHByb3BlcnRpZXM6IHtcblx0XHRkZWZhdWx0SW1hZ2U6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9kZWZhdWx0SW1hZ2UgfHwgKHRoaXMuX2RlZmF1bHRJbWFnZSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcImltZy5kZWZhdWx0XCIpKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG1lZGlhU3RhdGU6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9tZWRpYVN0YXRlO1xuXHRcdFx0fSxcblx0XHRcdHNldDogZnVuY3Rpb24oc3RhdGUpIHtcblx0XHRcdFx0dGhpcy5fc2V0TWVkaWFTdGF0ZShzdGF0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuXHRcdC8vIGlmICh0aGlzLm1vZGVsLmF0dHJzKCkuaGFzT3duUHJvcGVydHkoXCJAY2xhc3NuYW1lXCIpKSB7XG5cdFx0Ly8gXHR0aGlzLmVsLmNsYXNzTmFtZSArPSBcIiBcIiArIHRoaXMubW9kZWwuYXR0cihcIkBjbGFzc25hbWVcIik7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gTk9URTogQGNsYXNzbmFtZSBhdHRyIGhhbmRsaW5nIG1vdmVkIHRvIENhcm91c2VsUmVuZGVyZXJcblx0XHQvLyBpZiAodGhpcy5tb2RlbC5hdHRyKFwiQGNsYXNzbmFtZVwiKSAhPT0gdm9pZCAwKSB7XG5cdFx0Ly8gXHR2YXIgY2xzQXR0ciA9IHRoaXMubW9kZWwuYXR0cihcIkBjbGFzc25hbWVcIikuc3BsaXQoXCIgXCIpO1xuXHRcdC8vIFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjbHNBdHRyLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZChjbHNBdHRyW2ldKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9XG5cdFx0Q2Fyb3VzZWxSZW5kZXJlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0dGhpcy5tZXRyaWNzLm1lZGlhID0ge307XG5cdFx0dGhpcy5tZWRpYVN0YXRlID0gXCJpZGxlXCI7XG5cblx0XHR0aGlzLmluaXRpYWxpemVBc3luYygpXG5cdFx0XHQudGhlbih0aGlzLndoZW5Jbml0aWFsaXplZClcblx0XHRcdC5jYXRjaCh0aGlzLndoZW5Jbml0aWFsaXplRXJyb3IuYmluZCh0aGlzKSk7XG5cdH0sXG5cblx0aW5pdGlhbGl6ZUFzeW5jOiBmdW5jdGlvbigpIHtcblx0XHQvLyB2YXIgTWVkaWFSZW5kZXJlciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpXG5cdFx0XHQudGhlbihNZWRpYVJlbmRlcmVyLndoZW5TZWxlY3Rpb25Jc0NvbnRpZ3VvdXMpXG5cdFx0XHQudGhlbihNZWRpYVJlbmRlcmVyLndoZW5TY3JvbGxpbmdFbmRzKVxuXHRcdFx0LnRoZW4oTWVkaWFSZW5kZXJlci53aGVuRGVmYXVsdEltYWdlTG9hZHMpO1xuXHR9LFxuXG5cdHdoZW5Jbml0aWFsaXplZDogZnVuY3Rpb24odmlldykge1xuXHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OndoZW5Jbml0aWFsaXplZCBbJXNdXCIsIHZpZXcuY2lkLCBcInJlc29sdmVkXCIpO1xuXHRcdHZpZXcubWVkaWFTdGF0ZSA9IFwicmVhZHlcIjtcblx0XHR2aWV3LnBsYWNlaG9sZGVyLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtcHJvZ3Jlc3NcIik7XG5cdFx0cmV0dXJuIHZpZXc7XG5cdH0sXG5cblx0d2hlbkluaXRpYWxpemVFcnJvcjogZnVuY3Rpb24oZXJyKSB7XG5cdFx0aWYgKGVyciBpbnN0YW5jZW9mIENhcm91c2VsUmVuZGVyZXIuVmlld0Vycm9yKSB7XG5cdFx0XHQvLyBOT1RFOiBpZ25vcmUgVmlld0Vycm9yIHR5cGVcblx0XHRcdHJldHVybjtcblx0XHR9IGVsc2UgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGVyci5zdGFjayk7XG5cdFx0fVxuXHRcdHRoaXMucGxhY2Vob2xkZXIucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcm9ncmVzc1wiKTtcblx0XHR0aGlzLm1lZGlhU3RhdGUgPSBcImVycm9yXCI7XG5cdH0sXG5cblx0dXBkYXRlTWVkaWFQcm9ncmVzczogZnVuY3Rpb24ocHJvZ3Jlc3MsIGlkKSB7XG5cdFx0aWYgKF8uaXNOdW1iZXIocHJvZ3Jlc3MpKSB7XG5cdFx0XHR0aGlzLnBsYWNlaG9sZGVyLnNldEF0dHJpYnV0ZShcImRhdGEtcHJvZ3Jlc3NcIiwgbHBhZChNYXRoLmZsb29yKHByb2dyZXNzICogMTAwKSwgMiwgJzAnKSk7XG5cdFx0fVxuXHRcdC8vIGVsc2UgaWYgKHByb2dyZXNzID09PSBcImNvbXBsZXRlXCIpIHtcblx0XHQvLyBcdHRoaXMucGxhY2Vob2xkZXIucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcm9ncmVzc1wiKTtcblx0XHQvLyB9XG5cdH0sXG5cblx0Ly8gd2hlbk1lZGlhSXNSZWFkeTogZnVuY3Rpb24odmlldykge1xuXHQvLyBcdHJldHVybiBNZWRpYVJlbmRlcmVyLndoZW5EZWZhdWx0SW1hZ2VMb2Fkcyh0aGlzLCB0aGlzLnVwZGF0ZU1lZGlhUHJvZ3Jlc3MuYmluZCh0aGlzKSk7XG5cdC8vIH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogY2hpbGQgZ2V0dGVyc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQHJldHVybiB7SFRNTEVsZW1lbnR9ICovXG5cdGdldERlZmF1bHRJbWFnZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZGVmYXVsdEltYWdlO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIGNoaWxkcmVuL2xheW91dFxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRjcmVhdGVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwudG9KU09OKCkpO1xuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0bWVhc3VyZTogZnVuY3Rpb24oKSB7XG5cdFx0Q2Fyb3VzZWxSZW5kZXJlci5wcm90b3R5cGUubWVhc3VyZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0dmFyIHN3LCBzaDsgLy8gc291cmNlIGRpbWVuc2lvbnNcblx0XHR2YXIgcGN3LCBwY2g7IC8vIG1lYXN1cmVkIHZhbHVlc1xuXHRcdHZhciBjeCwgY3ksIGN3LCBjaCwgY3M7IC8vIGNvbXB1dGVkIHZhbHVlc1xuXHRcdHZhciBldywgZWg7IC8vIGNvbnRlbnQgZWRnZSB0b3RhbHNcblx0XHR2YXIgY207IC8vIGNvbnRlbnQgbWV0cmljc1xuXG5cdFx0Y20gPSB0aGlzLm1ldHJpY3MuY29udGVudDtcblx0XHRjeCA9IGNtLng7XG5cdFx0Y3kgPSBjbS55O1xuXHRcdHBjdyA9IGNtLndpZHRoO1xuXHRcdHBjaCA9IGNtLmhlaWdodDtcblxuXHRcdGV3ID0gKGNtLnBhZGRpbmdMZWZ0ICsgY20ucGFkZGluZ1JpZ2h0ICsgY20uYm9yZGVyTGVmdFdpZHRoICsgY20uYm9yZGVyUmlnaHRXaWR0aCk7XG5cdFx0ZWggPSAoY20ucGFkZGluZ1RvcCArIGNtLnBhZGRpbmdCb3R0b20gKyBjbS5ib3JkZXJUb3BXaWR0aCArIGNtLmJvcmRlckJvdHRvbVdpZHRoKTtcblx0XHRwY3cgLT0gZXc7XG5cdFx0cGNoIC09IGVoO1xuXG5cdFx0c3cgPSB0aGlzLm1vZGVsLmdldChcInNvdXJjZVwiKS5nZXQoXCJ3XCIpO1xuXHRcdC8vIHx8IHRoaXMuZGVmYXVsdEltYWdlLm5hdHVyYWxXaWR0aCB8fCBwY3c7XG5cdFx0c2ggPSB0aGlzLm1vZGVsLmdldChcInNvdXJjZVwiKS5nZXQoXCJoXCIpO1xuXHRcdC8vIHx8IHRoaXMuZGVmYXVsdEltYWdlLm5hdHVyYWxIZWlnaHQgfHwgcGNoO1xuXG5cdFx0Ly8gaWYgKCEoc3cgJiYgc2gpKSB7XG5cdFx0Ly8gXHRzdyA9IHBjdztcblx0XHQvLyBcdHNoID0gcGNoO1xuXHRcdC8vIH1cblxuXHRcdC8vIFVubGVzcyBib3RoIGNsaWVudCBkaW1lbnNpb25zIGFyZSBsYXJnZXIgdGhhbiB0aGUgc291cmNlJ3Ncblx0XHQvLyBjaG9vc2UgY29uc3RyYWludCBkaXJlY3Rpb24gYnkgYXNwZWN0IHJhdGlvXG5cdFx0aWYgKHN3IDwgcGN3ICYmIHNoIDwgcGNoKSB7XG5cdFx0XHRjcyA9IDE7XG5cdFx0XHRjdyA9IHN3O1xuXHRcdFx0Y2ggPSBzaDtcblx0XHRcdHRoaXMubWV0cmljcy5maXREaXJlY3Rpb24gPSBcImJvdGhcIjtcblx0XHR9IGVsc2UgaWYgKChwY3cgLyBwY2gpIDwgKHN3IC8gc2gpKSB7XG5cdFx0XHQvLyBmaXQgd2lkdGhcblx0XHRcdGN3ID0gcGN3O1xuXHRcdFx0Y3MgPSBjdyAvIHN3O1xuXHRcdFx0Ly8gY2ggPSBjcyAqIHNoO1xuXHRcdFx0Y2ggPSBNYXRoLnJvdW5kKGNzICogc2gpO1xuXHRcdFx0dGhpcy5tZXRyaWNzLmZpdERpcmVjdGlvbiA9IFwid2lkdGhcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZml0IGhlaWdodFxuXHRcdFx0Y2ggPSBwY2g7XG5cdFx0XHRjcyA9IGNoIC8gc2g7XG5cdFx0XHQvLyBjdyA9IGNzICogc3c7XG5cdFx0XHRjdyA9IE1hdGgucm91bmQoY3MgKiBzdyk7XG5cdFx0XHR0aGlzLm1ldHJpY3MuZml0RGlyZWN0aW9uID0gXCJoZWlnaHRcIjtcblx0XHR9XG5cblx0XHR0aGlzLm1ldHJpY3MuY29udGVudC54ID0gY3g7XG5cdFx0dGhpcy5tZXRyaWNzLmNvbnRlbnQueSA9IGN5O1xuXHRcdHRoaXMubWV0cmljcy5jb250ZW50LndpZHRoID0gY3cgKyBldztcblx0XHR0aGlzLm1ldHJpY3MuY29udGVudC5oZWlnaHQgPSBjaCArIGVoO1xuXG5cdFx0dGhpcy5tZXRyaWNzLm1lZGlhLnggPSBjeCArIGNtLnBhZGRpbmdMZWZ0ICsgY20uYm9yZGVyTGVmdFdpZHRoO1xuXHRcdHRoaXMubWV0cmljcy5tZWRpYS55ID0gY3kgKyBjbS5wYWRkaW5nVG9wICsgY20uYm9yZGVyVG9wV2lkdGg7XG5cdFx0dGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoID0gY3c7XG5cdFx0dGhpcy5tZXRyaWNzLm1lZGlhLmhlaWdodCA9IGNoO1xuXHRcdHRoaXMubWV0cmljcy5tZWRpYS5zY2FsZSA9IGNzO1xuXG5cdFx0Ly8gY29uc29sZS5sb2coXCIlczo6bWVhc3VyZSBtdzolcyBtaDolcyBmaXQ6ICVzIG1ldHJpY3M6ICVvXCIsIHRoaXMuY2lkLCBwY3csIHBjaCwgdGhpcy5tZXRyaWNzLmZpdERpcmVjdGlvbiwgdGhpcy5tZXRyaWNzKTtcblx0XHQvLyB2YXIgc2l6aW5nID0gdGhpcy5nZXRTaXppbmdFbCgpO1xuXHRcdC8vIHNpemluZy5zdHlsZS5tYXhXaWR0aCA9IChjdyArIGV3KSArIFwicHhcIjtcblx0XHQvLyBzaXppbmcuc3R5bGUubWF4SGVpZ2h0ID0gKGNoICsgZWgpICsgXCJweFwiO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHQvLyBOT1RFOiBub3QgY2FsbGluZyBzdXBlci5yZW5kZXIsIGNhbGxpbmcgbWVhc3VyZSBvdXJzZWx2ZXNcblx0XHR0aGlzLm1lYXN1cmUoKTtcblxuXHRcdHZhciBzaXppbmcgPSB0aGlzLmdldFNpemluZ0VsKCk7XG5cdFx0c2l6aW5nLnN0eWxlLm1heFdpZHRoID0gdGhpcy5tZXRyaWNzLmNvbnRlbnQud2lkdGggKyBcInB4XCI7XG5cdFx0c2l6aW5nLnN0eWxlLm1heEhlaWdodCA9IHRoaXMubWV0cmljcy5jb250ZW50LmhlaWdodCArIFwicHhcIjtcblxuXHRcdHRoaXMuZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1maXQtZGlyXCIsIHRoaXMubWV0cmljcy5maXREaXJlY3Rpb24pO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogbWVkaWFTdGF0ZVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfbWVkaWFTdGF0ZUVudW06IFtcImlkbGVcIiwgXCJwZW5kaW5nXCIsIFwicmVhZHlcIiwgXCJlcnJvclwiXSxcblxuXHRfc2V0TWVkaWFTdGF0ZTogZnVuY3Rpb24oa2V5KSB7XG5cdFx0aWYgKHRoaXMuX21lZGlhU3RhdGVFbnVtLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50IFwiICsga2V5ICsgXCIgaW52YWxpZC4gTXVzdCBiZSBvbmUgb2Y6IFwiICsgdGhpcy5fbWVkaWFTdGF0ZUVudW0uam9pbihcIiwgXCIpKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX21lZGlhU3RhdGUgIT09IGtleSkge1xuXHRcdFx0aWYgKHRoaXMuX21lZGlhU3RhdGUpIHtcblx0XHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX21lZGlhU3RhdGUpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKGtleSk7XG5cdFx0XHR0aGlzLl9tZWRpYVN0YXRlID0ga2V5O1xuXHRcdFx0dGhpcy50cmlnZ2VyKFwibWVkaWE6XCIgKyBrZXkpO1xuXHRcdH1cblx0fSxcbn0sIHtcblx0TE9HX1RPX1NDUkVFTjogdHJ1ZSxcblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcHJvbWlzZS93aGVuU2VsZWN0aW9uRGlzdGFuY2VJc30gKi9cblx0d2hlblNlbGVjdGlvbkRpc3RhbmNlSXM6IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL3doZW5TZWxlY3Rpb25EaXN0YW5jZUlzXCIpLFxuXG5cdC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3Byb21pc2Uvd2hlblNlbGVjdGlvbklzQ29udGlndW91c30gKi9cblx0d2hlblNlbGVjdGlvbklzQ29udGlndW91czogcmVxdWlyZShcImFwcC92aWV3L3Byb21pc2Uvd2hlblNlbGVjdGlvbklzQ29udGlndW91c1wiKSxcblxuXHQvLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9wcm9taXNlL3doZW5TZWxlY3RUcmFuc2l0aW9uRW5kc30gKi9cblx0Ly8gd2hlblNlbGVjdFRyYW5zaXRpb25FbmRzOiByZXF1aXJlKFwiYXBwL3ZpZXcvcHJvbWlzZS93aGVuU2VsZWN0VHJhbnNpdGlvbkVuZHNcIiksXG5cblx0LyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcHJvbWlzZS93aGVuU2Nyb2xsaW5nRW5kc30gKi9cblx0d2hlblNjcm9sbGluZ0VuZHM6IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL3doZW5TY3JvbGxpbmdFbmRzXCIpLFxuXG5cdC8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3Byb21pc2Uvd2hlbkRlZmF1bHRJbWFnZUxvYWRzfSAqL1xuXHR3aGVuRGVmYXVsdEltYWdlTG9hZHM6IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL3doZW5EZWZhdWx0SW1hZ2VMb2Fkc1wiKSxcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qIGxvZyB0byBzY3JlZW5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuaWYgKERFQlVHKSB7XG5cblx0TWVkaWFSZW5kZXJlciA9IChmdW5jdGlvbihNZWRpYVJlbmRlcmVyKSB7XG5cdFx0aWYgKCFNZWRpYVJlbmRlcmVyLkxPR19UT19TQ1JFRU4pIHJldHVybiBNZWRpYVJlbmRlcmVyO1xuXG5cdFx0LyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cblx0XHR2YXIgQ29sb3IgPSByZXF1aXJlKFwiY29sb3JcIik7XG5cdFx0Ly8gLyoqIEB0eXBlIHttb2R1bGU6dW5kZXJzY29yZS5zdHJpbmcvbHBhZH0gKi9cblx0XHQvLyB2YXIgbHBhZCA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlLnN0cmluZy9scGFkXCIpO1xuXHRcdC8vIC8qKiBAdHlwZSB7bW9kdWxlOnVuZGVyc2NvcmUuc3RyaW5nL3JwYWR9ICovXG5cdFx0Ly8gdmFyIHJwYWQgPSByZXF1aXJlKFwidW5kZXJzY29yZS5zdHJpbmcvcnBhZFwiKTtcblxuXHRcdHJldHVybiBNZWRpYVJlbmRlcmVyLmV4dGVuZCh7XG5cblx0XHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciBmZ0NvbG9yID0gbmV3IENvbG9yKHRoaXMubW9kZWwuYXR0cihcImNvbG9yXCIpKTtcblx0XHRcdFx0dmFyIGJnQ29sb3IgPSBuZXcgQ29sb3IodGhpcy5tb2RlbC5hdHRyKFwiYmFja2dyb3VuZC1jb2xvclwiKSk7XG5cdFx0XHRcdHRoaXMuX19sb2dDb2xvcnMgPSB7XG5cdFx0XHRcdFx0bm9ybWFsOiBDb2xvcihmZ0NvbG9yKS5taXgoYmdDb2xvciwgMC43NSkuaHNsKCkuc3RyaW5nKCksXG5cdFx0XHRcdFx0aWdub3JlZDogQ29sb3IoZmdDb2xvcikubWl4KGJnQ29sb3IsIDAuMjUpLmhzbCgpLnN0cmluZygpLFxuXHRcdFx0XHRcdGVycm9yOiBcImJyb3duXCIsXG5cdFx0XHRcdFx0YWJvcnQ6IFwib3JhbmdlXCJcblx0XHRcdFx0fTtcblx0XHRcdFx0dGhpcy5fX2xvZ0ZyYW1lU3R5bGUgPSBcIjFweCBkYXNoZWQgXCIgKyBDb2xvcihmZ0NvbG9yKS5taXgoYmdDb2xvciwgMC41KS5oc2woKS5zdHJpbmcoKTtcblx0XHRcdFx0dGhpcy5fX2xvZ1N0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cdFx0XHRcdHRoaXMuX19yYWZJZCA9IC0xO1xuXHRcdFx0XHR0aGlzLl9fb25GcmFtZSA9IHRoaXMuX19vbkZyYW1lLmJpbmQodGhpcyk7XG5cdFx0XHRcdE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdH0sXG5cblx0XHRcdGluaXRpYWxpemVBc3luYzogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBNZWRpYVJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplQXN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKS5jYXRjaChmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0XHRpZiAoIShlcnIgaW5zdGFuY2VvZiBNZWRpYVJlbmRlcmVyLlZpZXdFcnJvcikpIHtcblx0XHRcdFx0XHRcdHRoaXMuX19sb2dNZXNzYWdlKGVyci5tZXNzYWdlLCBlcnIubmFtZSwgdGhpcy5fX2xvZ0NvbG9yc1tcImVycm9yXCJdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG5cdFx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0XHR9LFxuXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHRjcmVhdGVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciByZXQgPSBNZWRpYVJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0XHRcdHRoaXMuX19sb2dFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRcdFx0dGhpcy5fX2xvZ0VsZW1lbnQuY2xhc3NOYW1lID0gXCJkZWJ1Zy1sb2dcIjtcblx0XHRcdFx0Ly8gdGhpcy5fX2xvZ0VsZW1lbnQuc3R5bGUudG91Y2hBY3Rpb24gPSBcInBhbi15XCI7XG5cdFx0XHRcdHRoaXMuX19sb2dIZWFkZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG5cdFx0XHRcdHRoaXMuX19sb2dIZWFkZXJFbC5jbGFzc05hbWUgPSBcImxvZy1oZWFkZXIgY29sb3ItYmdcIjtcblx0XHRcdFx0Ly8gQ29sb3IodGhpcy5tb2RlbC5jb2xvcnMuZmdDb2xvcikubWl4KGZnQ29sb3IsIDAuOSkucmdiKCkuc3RyaW5nKClcblx0XHRcdFx0Ly8gQ29sb3IodGhpcy5tb2RlbC5jb2xvcnMuZmdDb2xvcikuYWxwaGFcblx0XHRcdFx0dGhpcy5fX2xvZ0hlYWRlckVsLnRleHRDb250ZW50ID0gdGhpcy5fX2dldEhlYWRlclRleHQoKTtcblx0XHRcdFx0dGhpcy5fX2xvZ0VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fX2xvZ0hlYWRlckVsKTtcblx0XHRcdFx0dGhpcy5lbC5pbnNlcnRCZWZvcmUodGhpcy5fX2xvZ0VsZW1lbnQsIHRoaXMuZWwuZmlyc3RFbGVtZW50Q2hpbGQpO1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fSxcblxuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHJldCA9IE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0XHRcdHRoaXMuX19sb2dFbGVtZW50LnN0eWxlLnRvcCA9ICh0aGlzLm1ldHJpY3MuY29udGVudC5oZWlnaHQgKyB0aGlzLm1ldHJpY3MuY29udGVudC55KSArIFwicHhcIjtcblx0XHRcdFx0dGhpcy5fX2xvZ0VsZW1lbnQuc3R5bGUubGVmdCA9IHRoaXMubWV0cmljcy5jb250ZW50LnggKyBcInB4XCI7XG5cdFx0XHRcdHRoaXMuX19sb2dFbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5tZXRyaWNzLmNvbnRlbnQud2lkdGggKyBcInB4XCI7XG5cdFx0XHRcdHRoaXMuX19sb2dFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuX19sb2dFbGVtZW50LnNjcm9sbEhlaWdodDtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fSxcblxuXHRcdFx0d2hlbkluaXRpYWxpemVFcnJvcjogZnVuY3Rpb24oZXJyKSB7XG5cdFx0XHRcdC8vIE5PVEU6IG5vdCBjYWxsaW5nIHN1cGVyXG5cdFx0XHRcdC8vIE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLndoZW5Jbml0aWFsaXplRXJyb3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIENhcm91c2VsUmVuZGVyZXIuVmlld0Vycm9yKSB7XG5cdFx0XHRcdFx0Ly8gTk9URTogaWdub3JlIFZpZXdFcnJvciB0eXBlXG5cdFx0XHRcdFx0Ly8gY29uc29sZS53YXJuKFwiJXM6OndoZW5Jbml0aWFsaXplRXJyb3IgXCIsIGVyci52aWV3LmNpZCwgZXJyLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihlcnIuc3RhY2spO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIHRoaXMucGxhY2Vob2xkZXIuaW5uZXJIVE1MID0gZXJyID8gZXJyb3JUZW1wbGF0ZShlcnIpIDogXCJcIjtcblx0XHRcdFx0dGhpcy5wbGFjZWhvbGRlci5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXByb2dyZXNzXCIpO1xuXHRcdFx0XHR0aGlzLm1lZGlhU3RhdGUgPSBcImVycm9yXCI7XG5cblx0XHRcdFx0Ly8gY29uc29sZS5lcnJvcihcIiVzOjppbml0aWFsaXplQXN5bmMgWyVzIChjYXVnaHQpXTogJXNcIiwgdGhpcy5jaWQsIGVyci5uYW1lLCAoZXJyLmluZm8gJiYgZXJyLmluZm8ubG9nTWVzc2FnZSkgfHwgZXJyLm1lc3NhZ2UpO1xuXHRcdFx0XHQvLyBlcnIubG9nRXZlbnQgJiYgY29uc29sZS5sb2coZXJyLmxvZ0V2ZW50KTtcblx0XHRcdH0sXG5cblx0XHRcdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdFx0XHQvKiBsb2cgbWV0aG9kc1xuXHRcdFx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0XHRcdF9fbG9nTWVzc2FnZTogZnVuY3Rpb24obXNnLCBsb2d0eXBlLCBjb2xvcikge1xuXHRcdFx0XHR2YXIgbG9nRW50cnlFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG5cblx0XHRcdFx0bG9ndHlwZSB8fCAobG9ndHlwZSA9IFwiLVwiKVxuXHRcdFx0XHRsb2dFbnRyeUVsLnRleHRDb250ZW50ID0gdGhpcy5fX2dldFRTdGFtcCgpICsgXCIgXCIgKyBtc2c7XG5cdFx0XHRcdGxvZ0VudHJ5RWwuc2V0QXR0cmlidXRlKFwiZGF0YS1sb2d0eXBlXCIsIGxvZ3R5cGUpO1xuXHRcdFx0XHRsb2dFbnRyeUVsLnN0eWxlLmNvbG9yID0gY29sb3IgfHwgdGhpcy5fX2xvZ0NvbG9yc1tsb2d0eXBlXSB8fCB0aGlzLl9fbG9nQ29sb3JzLm5vcm1hbDtcblxuXHRcdFx0XHR0aGlzLl9fbG9nRWxlbWVudC5hcHBlbmRDaGlsZChsb2dFbnRyeUVsKTtcblx0XHRcdFx0dGhpcy5fX2xvZ0VsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5fX2xvZ0VsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuXG5cdFx0XHRcdGlmICh0aGlzLl9fcmFmSWQgPT0gLTEpIHtcblx0XHRcdFx0XHR0aGlzLl9fcmFmSWQgPSB0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9fb25GcmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdF9fb25GcmFtZTogZnVuY3Rpb24odHN0YW1wKSB7XG5cdFx0XHRcdHRoaXMuX19yYWZJZCA9IC0xO1xuXHRcdFx0XHR0aGlzLl9fbG9nRWxlbWVudC5sYXN0RWxlbWVudENoaWxkLnN0eWxlLmJvcmRlckJvdHRvbSA9IHRoaXMuX19sb2dGcmFtZVN0eWxlO1xuXHRcdFx0XHR0aGlzLl9fbG9nRWxlbWVudC5sYXN0RWxlbWVudENoaWxkLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjJweFwiO1xuXHRcdFx0XHR0aGlzLl9fbG9nRWxlbWVudC5sYXN0RWxlbWVudENoaWxkLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMnB4XCI7XG5cdFx0XHR9LFxuXG5cdFx0XHRfX2dldFRTdGFtcDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIHJldHVybiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gdGhpcy5fX2xvZ1N0YXJ0VGltZSkudG9JU09TdHJpbmcoKS5zdWJzdHIoMTEsIDEyKTtcblx0XHRcdFx0cmV0dXJuIGxwYWQoKChEYXRlLm5vdygpIC0gdGhpcy5fX2xvZ1N0YXJ0VGltZSkgLyAxMDAwKS50b0ZpeGVkKDMpLCA4LCBcIjBcIik7XG5cdFx0XHR9LFxuXG5cdFx0XHRfX2dldEhlYWRlclRleHQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9KShNZWRpYVJlbmRlcmVyKTtcblxufSAvLyBlbmQgZGVidWdcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcmVuZGVyL01lZGlhUmVuZGVyZXJ9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gTWVkaWFSZW5kZXJlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L3JlbmRlci9QbGF5YWJsZVJlbmRlcmVyXG4gKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvTWVkaWFSZW5kZXJlcn0gKi9cbmNvbnN0IE1lZGlhUmVuZGVyZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcmVuZGVyL01lZGlhUmVuZGVyZXJcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQ2FudmFzUHJvZ3Jlc3NNZXRlcn0gKi9cbi8vIHZhciBQcm9ncmVzc01ldGVyID0gcmVxdWlyZShcImFwcC92aWV3L2NvbXBvbmVudC9DYW52YXNQcm9ncmVzc01ldGVyXCIpO1xuXG4vKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuY29uc3QgcHJlZml4ZWRQcm9wZXJ0eSA9IHJlcXVpcmUoXCJ1dGlscy9wcmVmaXhlZFByb3BlcnR5XCIpO1xuLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbmNvbnN0IHByZWZpeGVkRXZlbnQgPSByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRFdmVudFwiKTtcblxuLy8gdmFyIHZpc2liaWxpdHlIaWRkZW5Qcm9wID0gcHJlZml4ZWRQcm9wZXJ0eShcImhpZGRlblwiLCBkb2N1bWVudCk7XG4vKiogQHR5cGUge1N0cmluZ30gKi9cbnZhciB2aXNpYmlsaXR5U3RhdGVQcm9wID0gcHJlZml4ZWRQcm9wZXJ0eShcInZpc2liaWxpdHlTdGF0ZVwiLCBkb2N1bWVudCk7XG4vKiogQHR5cGUge1N0cmluZ30gKi9cbnZhciB2aXNpYmlsaXR5Q2hhbmdlRXZlbnQgPSBwcmVmaXhlZEV2ZW50KFwidmlzaWJpbGl0eWNoYW5nZVwiLCBkb2N1bWVudCwgXCJoaWRkZW5cIik7XG5cbi8vIC8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG4vLyB2YXIgQ29sb3IgPSByZXF1aXJlKFwiY29sb3JcIik7XG4vL1xuLy8gLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbi8vIC8vIHZhciBkdW90b25lID0gcmVxdWlyZShcInV0aWxzL2NhbnZhcy9iaXRtYXAvZHVvdG9uZVwiKTtcbi8vIC8vIHZhciBzdGFja0JsdXJNb25vID0gcmVxdWlyZShcInV0aWxzL2NhbnZhcy9iaXRtYXAvc3RhY2tCbHVyTW9ub1wiKTtcbi8vIHZhciBzdGFja0JsdXJSR0IgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9zdGFja0JsdXJSR0JcIik7XG4vLyAvLyB2YXIgZ2V0QXZlcmFnZVJHQkEgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9nZXRBdmVyYWdlUkdCQVwiKTtcbi8vIHZhciBnZXRBdmVyYWdlUkdCID0gcmVxdWlyZShcInV0aWxzL2NhbnZhcy9iaXRtYXAvZ2V0QXZlcmFnZVJHQlwiKTtcbi8vIC8vIHZhciBpbmZsYXRlUmVjdCA9IHJlcXVpcmUoXCJ1dGlscy9nZW9tL2luZmxhdGVSZWN0XCIpO1xuLy9cblxuLy8gdmFyIFdBSVRfREVCT1VOQ0VfTVMgPSByZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKS5UUkFOU0lUSU9OX0RVUkFUSU9OO1xuXG4vLyAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fSAqL1xuLy8gdmFyIF9zaGFyZWRDYW52YXMgPSBudWxsO1xuLy8gLyoqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSAqL1xuLy8gdmFyIGdldFNoYXJlZENhbnZhcyA9IGZ1bmN0aW9uKCkge1xuLy8gXHRpZiAoX3NoYXJlZENhbnZhcyA9PT0gbnVsbCkge1xuLy8gXHRcdF9zaGFyZWRDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuLy8gXHR9XG4vLyBcdHJldHVybiBfc2hhcmVkQ2FudmFzO1xuLy8gfTtcblxuLy8gdmFyIFNWR19OUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcbi8vIHZhciBYTElOS19OUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiO1xuLy9cbi8vIHZhciB1c2VJZFNlZWQgPSAwXG4vLyB2YXIgY3JlYXRlU1ZHVXNlRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuLy8gXHR2YXIgc3ZnRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoU1ZHX05TLCBcInVzZVwiKTtcbi8vIFx0c3ZnRWwuc2V0QXR0cmlidXRlTlMobnVsbCwgXCJpZFwiLCBuYW1lICsgKHVzZUlkU2VlZCsrKSk7XG4vLyBcdHN2Z0VsLnNldEF0dHJpYnV0ZU5TKG51bGwsIFwiY2xhc3NcIiwgW25hbWUsIFwic3ltYm9sXCJdLmpvaW4oXCIgXCIpKTtcbi8vIFx0c3ZnRWwuc2V0QXR0cmlidXRlTlMoWExJTktfTlMsIFwieGxpbms6aHJlZlwiLCBcIiNcIiArIG5hbWUpO1xuLy8gXHRyZXR1cm4gc3ZnRWw7XG4vLyB9O1xuXG4vLyBmdW5jdGlvbiBsb2dBdHRhY2hJbmZvKHZpZXcsIG5hbWUsIGxldmVsKSB7XG4vLyBcdGlmIChbXCJsb2dcIiwgXCJpbmZvXCIsIFwid2FyblwiLCBcImVycm9yXCJdLmluZGV4T2YobGV2ZWwpICE9IC0xKSB7XG4vLyBcdFx0bGV2ZWwgPSBcImxvZ1wiO1xuLy8gXHR9XG4vLyBcdGNvbnNvbGVbbGV2ZWxdLmNhbGwoY29uc29sZSwgXCIlczo6JXMgW3BhcmVudDolcyAlcyAlcyBkZXB0aDolc11cIiwgdmlldy5jaWQsIG5hbWUsIHZpZXcucGFyZW50VmlldyAmJiB2aWV3LnBhcmVudFZpZXcuY2lkLCB2aWV3LmF0dGFjaGVkID8gXCJhdHRhY2hlZFwiIDogXCJkZXRhY2hlZFwiLCB2aWV3Ll92aWV3UGhhc2UsIHZpZXcudmlld0RlcHRoKTtcbi8vIH1cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcmVuZGVyL1BsYXlhYmxlUmVuZGVyZXJ9XG4gKi9cbnZhciBQbGF5YWJsZVJlbmRlcmVyID0gTWVkaWFSZW5kZXJlci5leHRlbmQoe1xuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjaWRQcmVmaXg6IFwicGxheWFibGVSZW5kZXJlclwiLFxuXG5cdC8qKiBAdHlwZSB7c3RyaW5nfEZ1bmN0aW9ufSAqL1xuXHRjbGFzc05hbWU6IE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLmNsYXNzTmFtZSArIFwiIHBsYXlhYmxlLWl0ZW1cIixcblxuXHRwcm9wZXJ0aWVzOiB7XG5cdFx0bWVkaWFQYXVzZWQ6IHtcblx0XHRcdC8qKiBAcmV0dXJuIHtCb29sZWFufSAqL1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2lzTWVkaWFQYXVzZWQoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG1lZGlhV2FpdGluZzoge1xuXHRcdFx0LyoqIEByZXR1cm4ge0Jvb2xlYW59ICovXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5faXNNZWRpYVdhaXRpbmcoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHBsYXliYWNrUmVxdWVzdGVkOiB7XG5cdFx0XHQvKiogQHJldHVybiB7Qm9vbGVhbn0gKi9cblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9wbGF5YmFja1JlcXVlc3RlZDtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdHRoaXMuX3NldFBsYXliYWNrUmVxdWVzdGVkKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG92ZXJsYXk6IHtcblx0XHRcdC8qKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gKi9cblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9vdmVybGF5IHx8ICh0aGlzLl9vdmVybGF5ID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIikpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Ly8gcGxheVRvZ2dsZToge1xuXHRcdC8vIFx0LyoqIEByZXR1cm4ge0hUTUxFbGVtZW50fSAqL1xuXHRcdC8vIFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHQvLyBcdFx0cmV0dXJuIHRoaXMuX3BsYXlUb2dnbGUgfHwgKHRoaXMuX3BsYXlUb2dnbGUgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucGxheS10b2dnbGVcIikpO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH0sXG5cdFx0Ly8gcGxheVRvZ2dsZVN5bWJvbDoge1xuXHRcdC8vIFx0LyoqIEByZXR1cm4ge0hUTUxFbGVtZW50fSAqL1xuXHRcdC8vIFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHQvLyBcdFx0cmV0dXJuIHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wgfHwgKHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucGxheS10b2dnbGUtc3ltYm9sXCIpKTtcblx0XHQvLyBcdH1cblx0XHQvLyB9LFxuXHRcdHBsYXlUb2dnbGVIaXRhcmVhOiB7XG5cdFx0XHQvKiogQHJldHVybiB7SFRNTEVsZW1lbnR9ICovXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fcGxheVRvZ2dsZUhpdGFyZWEgfHwgKHRoaXMuX3BsYXlUb2dnbGVIaXRhcmVhID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLnBsYXktdG9nZ2xlLWhpdGFyZWFcIikpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG5cdFx0dGhpcy5fcGxheVRvZ2dsZVN5bWJvbCA9IHt9O1xuXHRcdC8vIHRoaXMuX3RvZ2dsZVdhaXRpbmcgPSBfLmRlYm91bmNlKHRoaXMuX3RvZ2dsZVdhaXRpbmcsIDUwMCk7XG5cdFx0Ly8gdGhpcy5fdG9nZ2xlV2FpdGluZyA9IF8udGhyb3R0bGUodGhpcy5fdG9nZ2xlV2FpdGluZywgV0FJVF9ERUJPVU5DRV9NUywgeyBsZWFkaW5nOiB0cnVlLCB0cmFpbGluZzogdHJ1ZSB9KTtcblxuXHRcdF8uYmluZEFsbCh0aGlzLFxuXHRcdFx0XCJfb25QbGF5YmFja1RvZ2dsZVwiLFxuXHRcdFx0XCJfb25WaXNpYmlsaXR5Q2hhbmdlXCJcblx0XHQpO1xuXHRcdE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR0aGlzLl9zZXRQbGF5YmFja1JlcXVlc3RlZCh0aGlzLl9wbGF5YmFja1JlcXVlc3RlZCk7XG5cblx0XHQvLyB0aGlzLmxpc3RlblRvKHRoaXMsIFwidmlldzpwYXJlbnRDaGFuZ2VcIiwgZnVuY3Rpb24oY2hpbGRWaWV3LCBuZXdQYXJlbnQsIG9sZFBhcmVudCkge1xuXHRcdC8vIFx0Ly8gbG9nQXR0YWNoSW5mbyh0aGlzLCBcIlt2aWV3OnBhcmVudENoYW5nZV1cIiwgXCJpbmZvXCIpO1xuXHRcdC8vIFx0Y29uc29sZS5pbmZvKFwiJXM6Olt2aWV3OnBhcmVudENoYW5nZV0gJyVzJyB0byAnJXMnXCIsIHRoaXMuY2lkLCBvbGRQYXJlbnQgJiYgb2xkUGFyZW50LmNpZCwgbmV3UGFyZW50ICYmIG5ld1BhcmVudC5jaWQpO1xuXHRcdC8vIH0pO1xuXHR9LFxuXG5cdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0Ly8gaW5pdGlhbGl6ZUFzeW5jOiBmdW5jdGlvbigpIHtcblx0Ly8gXHRyZXR1cm4gTWVkaWFSZW5kZXJlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5pbml0aWFsaXplQXN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0Ly8gfSxcblxuXHQvLyAvKiogQG92ZXJyaWRlICovXG5cdC8vIHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdC8vIFx0TWVkaWFSZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdC8vIFx0cmV0dXJuIHRoaXM7XG5cdC8vIH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogY2hpbGRyZW4vbGF5b3V0XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIGNyZWF0ZUNoaWxkcmVuOiBmdW5jdGlvbigpIHtcblx0Ly8gfSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBzZXRFbmFibGVkXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0c2V0RW5hYmxlZDogZnVuY3Rpb24oZW5hYmxlZCkge1xuXHRcdE1lZGlhUmVuZGVyZXIucHJvdG90eXBlLnNldEVuYWJsZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHQvLyB0aGlzLl92YWxpZGF0ZVBsYXliYWNrKGVuYWJsZWQpO1xuXHRcdC8vIGlmIChlbmFibGVkKSB7XG5cdFx0dGhpcy5fdmFsaWRhdGVQbGF5YmFjaygpO1xuXHRcdC8vIH0gZWxzZSB7XG5cdFx0Ly8gXHQvLyBpZiBzZWxlY3RlZCwgcGF1c2UgbWVkaWFcblx0XHQvLyBcdHRoaXMubW9kZWwuc2VsZWN0ZWQgJiYgdGhpcy5fdG9nZ2xlUGxheWJhY2soZmFsc2UpO1xuXHRcdC8vIFx0Ly8gdGhpcy5fdG9nZ2xlUGxheWJhY2soZmFsc2UpO1xuXHRcdC8vIH1cblx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjpzZXRFbmFibGVkXCIsIHRoaXMuY2lkLCB0aGlzLmVuYWJsZWQpO1xuXHRcdC8vIHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wucGF1c2VkID0gKHRoaXMuZW5hYmxlZCAmJiB0aGlzLm1vZGVsLnNlbGVjdGVkKTtcblx0XHQvL31cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Lyogc2VsZWN0aW9uIGhhbmRsZXJzXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdGxpc3RlblRvU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5fdmlld1BoYXNlICE9IFwiaW5pdGlhbGl6ZWRcIilcblx0XHRcdHRocm93IG5ldyBFcnJvcih0aGlzLmNpZCArIFwiOjpsaXN0ZW5Ub1NlbGVjdGlvbiBjYWxsZWQgd2hpbGUgXCIgKyB0aGlzLl92aWV3UGhhc2UpO1xuXG5cdFx0Ly8gbG9nQXR0YWNoSW5mbyh0aGlzLCBcImxpc3RlblRvU2VsZWN0aW9uXCIsIFwibG9nXCIpO1xuXHRcdC8vIHRoaXMubGlzdGVuVG8odGhpcywgXCJ2aWV3OnJlbW92ZWRcIiwgdGhpcy5yZW1vdmVTZWxlY3Rpb25MaXN0ZW5lcnMpO1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJzZWxlY3RlZFwiLCB0aGlzLl9vbk1vZGVsU2VsZWN0ZWQpO1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJkZXNlbGVjdGVkXCIsIHRoaXMuX29uTW9kZWxEZXNlbGVjdGVkKTtcblx0XHRpZiAodGhpcy5tb2RlbC5zZWxlY3RlZCkge1xuXHRcdFx0dGhpcy5fb25Nb2RlbFNlbGVjdGVkKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIG1vZGVsIHNlbGVjdGVkIGhhbmRsZXJzOlxuXHQvKiBtb2RlbCBzZWxlY3Rpb24gdG9nZ2xlcyBwbGF5YmFja1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25Nb2RlbFNlbGVjdGVkOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25Nb2RlbFNlbGVjdGVkIF9wbGF5YmFja1JlcXVlc3RlZDogJXMsIGV2ZW50OiAlc1wiLCB0aGlzLmNpZCwgdGhpcy5fcGxheWJhY2tSZXF1ZXN0ZWQsIHRoaXMuX3RvZ2dsZUV2ZW50KTtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMsIFwidmlldzpwYXJlbnRDaGFuZ2VcIiwgdGhpcy5fb25QYXJlbnRDaGFuZ2UpO1xuXHRcdGlmICh0aGlzLnBhcmVudFZpZXcpIHRoaXMuX29uUGFyZW50Q2hhbmdlKHRoaXMsIHRoaXMucGFyZW50VmlldywgbnVsbCk7XG5cblx0XHQvLyB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXHRcdHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wucGF1c2VkID0gIXRoaXMuZW5hYmxlZDtcblxuXHRcdHRoaXMuX2xpc3RlbldoaWxlU2VsZWN0ZWQoKTtcblx0XHR0aGlzLl92YWxpZGF0ZVBsYXliYWNrKCk7XG5cdH0sXG5cblx0X29uTW9kZWxEZXNlbGVjdGVkOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLmxvZyhcIiVzOjpfb25Nb2RlbERlc2VsZWN0ZWQgX3BsYXliYWNrUmVxdWVzdGVkOiAlcywgZXZlbnQ6ICVzXCIsIHRoaXMuY2lkLCB0aGlzLl9wbGF5YmFja1JlcXVlc3RlZCwgdGhpcy5fdG9nZ2xlRXZlbnQpO1xuXHRcdHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLCBcInZpZXc6cGFyZW50Q2hhbmdlXCIsIHRoaXMuX29uUGFyZW50Q2hhbmdlKTtcblx0XHRpZiAodGhpcy5wYXJlbnRWaWV3KSB0aGlzLl9vblBhcmVudENoYW5nZSh0aGlzLCBudWxsLCB0aGlzLnBhcmVudFZpZXcpO1xuXG5cdFx0dGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5wYXVzZWQgPSB0cnVlO1xuXG5cdFx0dGhpcy5fc3RvcExpc3RlbmluZ1doaWxlU2VsZWN0ZWQoKTtcblx0XHR0aGlzLl92YWxpZGF0ZVBsYXliYWNrKGZhbHNlKTtcblx0XHQvLyB0aGlzLl90b2dnbGVQbGF5YmFjayhmYWxzZSk7XG5cdH0sXG5cblx0LyogdmlldzpwYXJlbnRDaGFuZ2UgaGFuZGxlcnMgM1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0X29uUGFyZW50Q2hhbmdlOiBmdW5jdGlvbihjaGlsZFZpZXcsIG5ld1BhcmVudCwgb2xkUGFyZW50KSB7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJbc2Nyb2xsXSAlczo6X29uUGFyZW50Q2hhbmdlICclcycgdG8gJyVzJ1wiLCB0aGlzLmNpZCwgb2xkUGFyZW50ICYmIG9sZFBhcmVudC5jaWQsIG5ld1BhcmVudCAmJiBuZXdQYXJlbnQuY2lkKTtcblx0XHRpZiAob2xkUGFyZW50KSB0aGlzLnN0b3BMaXN0ZW5pbmcob2xkUGFyZW50LCBcInZpZXc6c2Nyb2xsc3RhcnQgdmlldzpzY3JvbGxlbmRcIiwgdGhpcy5fb25TY3JvbGxDaGFuZ2UpO1xuXHRcdGlmIChuZXdQYXJlbnQpIHRoaXMubGlzdGVuVG8obmV3UGFyZW50LCBcInZpZXc6c2Nyb2xsc3RhcnQgdmlldzpzY3JvbGxlbmRcIiwgdGhpcy5fb25TY3JvbGxDaGFuZ2UpO1xuXHR9LFxuXG5cdF9vblNjcm9sbENoYW5nZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMucGFyZW50VmlldyA9PT0gbnVsbCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKHRoaXMuY2lkICsgXCI6Ol9vblNjcm9sbENoYW5nZSBwYXJlbnRWaWV3IGlzIG51bGxcIik7XG5cdFx0fVxuXHRcdHRoaXMuX3ZhbGlkYXRlUGxheWJhY2soKTtcblx0fSxcblxuXHQvKiB2aXNpYmlsaXR5IGRvbSBldmVudFxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0X29uVmlzaWJpbGl0eUNoYW5nZTogZnVuY3Rpb24oZXYpIHtcblx0XHR0aGlzLl92YWxpZGF0ZVBsYXliYWNrKCk7XG5cdH0sXG5cblx0LyogbGlzdGVuIHRvIERPTSBldmVudHNcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X2xpc3RlbldoaWxlU2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcywgXCJ2aWV3OnJlbW92ZWRcIiwgdGhpcy5fc3RvcExpc3RlbmluZ1doaWxlU2VsZWN0ZWQpO1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodmlzaWJpbGl0eUNoYW5nZUV2ZW50LCB0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2UsIGZhbHNlKTtcblx0XHR0aGlzLnBsYXlUb2dnbGVIaXRhcmVhLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fdG9nZ2xlRXZlbnQsIHRoaXMuX29uUGxheWJhY2tUb2dnbGUsIGZhbHNlKTtcblx0fSxcblxuXHRfc3RvcExpc3RlbmluZ1doaWxlU2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLCBcInZpZXc6cmVtb3ZlZFwiLCB0aGlzLl9zdG9wTGlzdGVuaW5nV2hpbGVTZWxlY3RlZCk7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih2aXNpYmlsaXR5Q2hhbmdlRXZlbnQsIHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZSwgZmFsc2UpO1xuXHRcdHRoaXMucGxheVRvZ2dsZUhpdGFyZWEucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl90b2dnbGVFdmVudCwgdGhpcy5fb25QbGF5YmFja1RvZ2dsZSwgZmFsc2UpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHBsYXktdG9nZ2xlXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAdHlwZSB7U3RyaW5nfSAqL1xuXHRfdG9nZ2xlRXZlbnQ6IE1lZGlhUmVuZGVyZXIuQ0xJQ0tfRVZFTlQsIC8vd2luZG93Lmhhc093blByb3BlcnR5KFwib25wb2ludGVydXBcIikgPyBcInBvaW50ZXJ1cFwiIDogXCJtb3VzZXVwXCIsXG5cblx0X29uUGxheWJhY2tUb2dnbGU6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0Ly9jb25zb2xlLmxvZyhcIiVzWyVzYWJsZWRdOjpfb25QbGF5YmFja1RvZ2dsZVslc10gZGVmYXVsdFByZXZlbnRlZDogJXNcIiwgdGhpcy5jaWQsIHRoaXMuZW5hYmxlZCA/IFwiZW5cIiA6IFwiZGlzXCIsIGV2LnR5cGUsIGV2LmRlZmF1bHRQcmV2ZW50ZWQpO1xuXHRcdC8vIE5PVEU6IFBlcmZvcm0gYWN0aW9uIGlmIE1vdXNlRXZlbnQuYnV0dG9uIGlzIDAgb3IgdW5kZWZpbmVkICgwOiBsZWZ0LWJ1dHRvbilcblx0XHRpZiAodGhpcy5lbmFibGVkICYmICFldi5kZWZhdWx0UHJldmVudGVkICYmICFldi5idXR0b24pIHtcblx0XHRcdGV2LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnBsYXliYWNrUmVxdWVzdGVkID0gIXRoaXMucGxheWJhY2tSZXF1ZXN0ZWQ7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHBsYXliYWNrUmVxdWVzdGVkXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9wbGF5YmFja0NvdW50OiAwLFxuXG5cdC8qKiBAdHlwZSB7Qm9vbGVhbj99ICovXG5cdF9wbGF5YmFja1JlcXVlc3RlZDogbnVsbCxcblxuXHRfc2V0UGxheWJhY2tSZXF1ZXN0ZWQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0dGhpcy5fcGxheWJhY2tSZXF1ZXN0ZWQgPSB2YWx1ZTtcblxuXHRcdHZhciBjbGFzc0xpc3QgPSB0aGlzLmNvbnRlbnQuY2xhc3NMaXN0O1xuXHRcdGNsYXNzTGlzdC50b2dnbGUoXCJwbGF5aW5nXCIsIHZhbHVlID09PSB0cnVlKTtcblx0XHRjbGFzc0xpc3QudG9nZ2xlKFwicGF1c2VkXCIsIHZhbHVlID09PSBmYWxzZSk7XG5cdFx0Y2xhc3NMaXN0LnRvZ2dsZShcInJlcXVlc3RlZFwiLCB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UpO1xuXG5cdFx0dGhpcy5fcmVuZGVyUGxheWJhY2tTdGF0ZSgpO1xuXG5cdFx0Ly8gdGhpcy5fdmFsaWRhdGVQbGF5YmFjayh0aGlzLnBsYXliYWNrUmVxdWVzdGVkKTtcblx0XHQvLyBpZiAodGhpcy5wbGF5YmFja1JlcXVlc3RlZCkge1xuXHRcdHRoaXMuX3ZhbGlkYXRlUGxheWJhY2soKTtcblx0XHQvLyB9IGVsc2Uge1xuXHRcdC8vIFx0dGhpcy5fdG9nZ2xlUGxheWJhY2soZmFsc2UpO1xuXHRcdC8vIH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiBfdG9nZ2xlUGxheWJhY2tcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBwYXJhbSB7Qm9vbGVhbn0gKi9cblx0X3RvZ2dsZVBsYXliYWNrOiBmdW5jdGlvbihuZXdQbGF5U3RhdGUpIHtcblx0XHRpZiAoREVCVUcpIHRoaXMuX19sb2dNZXNzYWdlKFtcblx0XHRcdFx0XCJhcmdzOlwiLCBBcnJheS5wcm90b3R5cGUuam9pbi5hcHBseShhcmd1bWVudHMpLFxuXHRcdFx0XHRcInBhdXNlZDpcIiwgKHRoaXMuX2lzTWVkaWFQYXVzZWQoKSA/IFwicGF1c2VcIiA6IFwicGxheVwiKSxcblx0XHRcdFx0XCJtZWRpYS1zdGF0ZTpcIiwgdGhpcy5tZWRpYVN0YXRlLFxuXHRcdFx0XHRdLmpvaW4oXCIgXCIpLFxuXHRcdFx0XCJ0b2dnbGUtcGxheWJhY2tcIik7XG5cblx0XHRpZiAoXy5pc0Jvb2xlYW4obmV3UGxheVN0YXRlKSAmJiBuZXdQbGF5U3RhdGUgIT09IHRoaXMuX2lzTWVkaWFQYXVzZWQoKSkge1xuXHRcdFx0cmV0dXJuOyAvLyByZXF1ZXN0ZWQgc3RhdGUgaXMgY3VycmVudCwgZG8gbm90aGluZ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXdQbGF5U3RhdGUgPSB0aGlzLl9pc01lZGlhUGF1c2VkKCk7XG5cdFx0fVxuXHRcdGlmIChuZXdQbGF5U3RhdGUpIHsgLy8gY2hhbmdpbmcgdG8gd2hhdD9cblx0XHRcdC8vIHRoaXMuX3BsYXliYWNrQ291bnQrKztcblx0XHRcdHRoaXMuX3BsYXlNZWRpYSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9wYXVzZU1lZGlhKCk7XG5cdFx0fVxuXHRcdC8qIE5PVEU6IGNhbGxlZCBmcm9tIF9zZXRQbGF5YmFja1JlcXVlc3RlZCAqL1xuXHRcdC8vIHRoaXMuX3JlbmRlclBsYXliYWNrU3RhdGUoKTtcblx0fSxcblxuXHRfY2FuUmVzdW1lUGxheWJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAhIShcblx0XHRcdHRoaXMuZW5hYmxlZCAmJlxuXHRcdFx0dGhpcy5tb2RlbC5zZWxlY3RlZCAmJlxuXHRcdFx0dGhpcy5wbGF5YmFja1JlcXVlc3RlZCAmJlxuXHRcdFx0KHRoaXMubWVkaWFTdGF0ZSA9PT0gXCJyZWFkeVwiKSAmJlxuXHRcdFx0dGhpcy5hdHRhY2hlZCAmJlxuXHRcdFx0KHRoaXMucGFyZW50VmlldyAhPT0gbnVsbCkgJiZcblx0XHRcdCghdGhpcy5wYXJlbnRWaWV3LnNjcm9sbGluZykgJiZcblx0XHRcdChkb2N1bWVudFt2aXNpYmlsaXR5U3RhdGVQcm9wXSAhPSBcImhpZGRlblwiKVxuXHRcdCk7XG5cdH0sXG5cblx0X3ZhbGlkYXRlUGxheWJhY2s6IGZ1bmN0aW9uKHNob3J0Y2lyY3VpdCkge1xuXHRcdC8vIGEgJ3Nob3J0Y2lyY3VpdCcgYm9vbGVhbiBhcmd1bWVudCBjYW4gYmUgcGFzc2VkLCBhbmQgaWYgZmFsc2UsXG5cdFx0Ly8gc2tpcCBfY2FuUmVzdW1lUGxheWJhY2sgYW5kIHBhdXNlIHBsYXliYWNrIHJpZ2h0IGF3YXlcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMCAmJiAhc2hvcnRjaXJjdWl0KSB7XG5cdFx0XHR0aGlzLl90b2dnbGVQbGF5YmFjayhmYWxzZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3RvZ2dsZVBsYXliYWNrKHRoaXMuX2NhblJlc3VtZVBsYXliYWNrKCkpO1xuXHRcdH1cblx0XHR0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sLnBhdXNlZCA9ICEodGhpcy5hdHRhY2hlZCAmJiB0aGlzLmVuYWJsZWQgJiYgdGhpcy5tb2RlbC5zZWxlY3RlZCk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIF9zZXRQbGF5VG9nZ2xlU3ltYm9sXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9yZW5kZXJQbGF5YmFja1N0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIXRoaXMuYXR0YWNoZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHRoaXMucHJvZ3Jlc3NNZXRlcikge1xuXHRcdFx0dGhpcy5wcm9ncmVzc01ldGVyLnN0YWxsZWQgPSB0aGlzLl9pc01lZGlhV2FpdGluZygpO1xuXHRcdH1cblx0XHQvLyB0aGlzLl9zZXRQbGF5VG9nZ2xlU3ltYm9sKFwid2FpdGluZ1wiKTtcblx0XHQvLyB0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZShcIndhaXRpbmdcIiwgdHJ1ZSk7XG5cblx0XHQvLyBpZiAoIXRoaXMuY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJzdGFydGVkXCIpKSB7XG5cdFx0Ly8gXHR0aGlzLl9zZXRQbGF5VG9nZ2xlU3ltYm9sKFwicGxheVwiKTtcblx0XHQvLyB9IGVsc2Vcblx0XHR2YXIgd2FpdGluZyA9ICF0aGlzLnBhcmVudFZpZXcuc2Nyb2xsaW5nICYmIHRoaXMuX2lzTWVkaWFXYWl0aW5nKCk7XG5cblx0XHRpZiAodGhpcy5wbGF5YmFja1JlcXVlc3RlZCkge1xuXHRcdFx0aWYgKHdhaXRpbmcpIHtcblx0XHRcdFx0dGhpcy5fc2V0UGxheVRvZ2dsZVN5bWJvbChcIndhaXRpbmdcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9zZXRQbGF5VG9nZ2xlU3ltYm9sKFwicGxheVwiKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKHRoaXMuY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJzdGFydGVkXCIpKSB7XG5cdFx0XHRcdHRoaXMuX3NldFBsYXlUb2dnbGVTeW1ib2woXCJwYXVzZVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX3NldFBsYXlUb2dnbGVTeW1ib2woXCJwbGF5XCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR2YXIgY2xzID0gdGhpcy5jb250ZW50LmNsYXNzTGlzdDtcblx0XHRjbHMudG9nZ2xlKFwicGxheWluZ1wiLCB0aGlzLnBsYXliYWNrUmVxdWVzdGVkKTtcblx0XHRjbHMudG9nZ2xlKFwicGF1c2VkXCIsICF0aGlzLnBsYXliYWNrUmVxdWVzdGVkKTtcblx0XHRjbHMudG9nZ2xlKFwid2FpdGluZ1wiLCB3YWl0aW5nKTtcblxuXHRcdC8vY29uc29sZS5sb2coXCIlczo6X3JlbmRlclBsYXliYWNrU3RhdGUgW3BsYXk6ICVzXSBbd2FpdDogJXNdIFtzeW1ib2w6ICVzXVwiLCB0aGlzLmNpZCwgdGhpcy5wbGF5YmFja1JlcXVlc3RlZCwgdGhpcy5faXNNZWRpYVdhaXRpbmcoKSwgdGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5zeW1ib2xOYW1lKTtcblx0fSxcblxuXHRfc2V0UGxheVRvZ2dsZVN5bWJvbDogZnVuY3Rpb24oc3ltYm9sTmFtZSkge1xuXHRcdC8vY29uc29sZS5sb2coXCIlczo6X3NldFBsYXlUb2dnbGVTeW1ib2wgW2VuYWJsZWQ6ICVzXSBbc2VsZWN0ZWQ6ICVzXSBbc3ltYm9sOiAlc11cIiwgdGhpcy5jaWQsIHRoaXMuZW5hYmxlZCwgISEodGhpcy5tb2RlbC5zZWxlY3RlZCksIHN5bWJvbE5hbWUpO1xuXG5cdFx0Ly8gdGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5wYXVzZWQgPSAhKHRoaXMuYXR0YWNoZWQgJiYgdGhpcy5lbmFibGVkICYmICEhKHRoaXMubW9kZWwuc2VsZWN0ZWQpKTtcblx0XHR0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sLnN5bWJvbE5hbWUgPSBzeW1ib2xOYW1lO1xuXHRcdGlmICh0aGlzLm1lZGlhU3RhdGUgPT09IFwicmVhZHlcIikgeyAvL3RoaXMuX3BsYXlUb2dnbGVTeW1ib2wucmVuZGVyRmxhZ3MpIHtcblx0XHRcdHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wucmVuZGVyTm93KCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIF9wbGF5VG9nZ2xlU3ltYm9sU3ZnOiBudWxsLFxuXHQvLyBfcGxheVRvZ2dsZVN5bWJvbE5hbWU6IG51bGwsXG5cdC8vIF9zZXRQbGF5VG9nZ2xlU3ltYm9sX3N2ZzogZnVuY3Rpb24oc3ltYm9sTmFtZSkge1xuXHQvLyBcdGlmICh0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sTmFtZSAhPT0gc3ltYm9sTmFtZSkge1xuXHQvLyBcdFx0dmFyIHN2Z0RvYyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcInN2Zy5wbGF5LXRvZ2dsZS1zeW1ib2xcIik7XG5cdC8vIFx0XHRpZiAodGhpcy5fcGxheVRvZ2dsZVN5bWJvbFN2Zykge1xuXHQvLyBcdFx0XHRzdmdEb2MucmVtb3ZlQ2hpbGQodGhpcy5fcGxheVRvZ2dsZVN5bWJvbFN2Zyk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0XHR2YXIgc3ZnU3ltID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJ1c2VcIik7XG5cdC8vIFx0XHRzdmdTeW0uc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsIFwieGxpbms6aHJlZlwiLCBcIiNcIiArIHN5bWJvbE5hbWUpO1xuXHQvLyBcdFx0c3ZnRG9jLmFwcGVuZENoaWxkKHN2Z1N5bSk7XG5cdC8vIFx0XHRzdmdEb2Muc2V0QXR0cmlidXRlTlMobnVsbCwgXCJjbGFzc1wiLCBzeW1ib2xOYW1lICsgXCItc3ltYm9sIHBsYXktdG9nZ2xlLXN5bWJvbFwiKTtcblx0Ly9cblx0Ly8gXHRcdHRoaXMuX3BsYXlUb2dnbGVTeW1ib2xTdmcgPSBzdmdTeW07XG5cdC8vIFx0XHR0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sTmFtZSA9IHN5bWJvbE5hbWU7XG5cdC8vIFx0fVxuXHQvLyB9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHdhaXRpbmdcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X2lzV2FpdGluZzogZmFsc2UsXG5cblx0X2lzTWVkaWFXYWl0aW5nOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5faXNXYWl0aW5nO1xuXHR9LFxuXG5cdF90b2dnbGVXYWl0aW5nOiBmdW5jdGlvbih3YWl0aW5nKSB7XG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdHdhaXRpbmcgPSAhdGhpcy5faXNXYWl0aW5nO1xuXHRcdH1cblx0XHQvLyBpZiAodGhpcy5faXNNZWRpYVBhdXNlZCgpKSB7XG5cdFx0Ly8gXHR3YWl0aW5nID0gZmFsc2U7XG5cdFx0Ly8gfVxuXHRcdGlmICh0aGlzLl9pc1dhaXRpbmcgIT09IHdhaXRpbmcpIHtcblx0XHRcdHRoaXMuX2lzV2FpdGluZyA9IHdhaXRpbmc7XG5cdFx0XHR0aGlzLl9yZW5kZXJQbGF5YmFja1N0YXRlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIGFic3RyYWN0XG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF9pc01lZGlhUGF1c2VkOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLndhcm4oXCIlczo6X2lzTWVkaWFQYXVzZWQgTm90IGltcGxlbWVudGVkXCIsIHRoaXMuY2lkKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHRfcGxheU1lZGlhOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLndhcm4oXCIlczo6X3BsYXlNZWRpYSBOb3QgaW1wbGVtZW50ZWRcIiwgdGhpcy5jaWQpO1xuXHR9LFxuXG5cdF9wYXVzZU1lZGlhOiBmdW5jdGlvbigpIHtcblx0XHRjb25zb2xlLndhcm4oXCIlczo6X3BhdXNlTWVkaWEgTm90IGltcGxlbWVudGVkXCIsIHRoaXMuY2lkKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQvKiB1dGlsXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdHVwZGF0ZU92ZXJsYXk6IGZ1bmN0aW9uKG1lZGlhRWwsIHRhcmdldEVsLCByZWN0RWwpIHtcblx0XHQvLyB0aGlzIG1ldGhvZCBpcyBub3QgY3JpdGljYWwsIGp1c3QgY2F0Y2ggYW5kIGxvZyBhbGwgZXJyb3JzXG5cdFx0Ly8gdHJ5IHtcblx0XHQvLyBcdHRoaXMuX3VwZGF0ZU92ZXJsYXkobWVkaWFFbCwgdGFyZ2V0RWwsIHJlY3RFbClcblx0XHQvLyB9IGNhdGNoIChlcnIpIHtcblx0XHQvLyBcdGNvbnNvbGUuZXJyb3IoXCIlczo6dXBkYXRlT3ZlcmxheVwiLCB0aGlzLmNpZCwgZXJyKTtcblx0XHQvLyB9XG5cdH0sXG5cblx0LyoqXFwvXG5cdF9kcmF3TWVkaWFFbGVtZW50OiBmdW5jdGlvbihjdHgsIG1lZGlhRWwsIGRlc3QpIHtcblx0XHQvLyBkZXN0aW5hdGlvbiByZWN0XG5cdFx0Ly8gTk9URTogbWVkaWFFbCBpcyBleHBlY3RlZCB0byBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbnMgaW4gdGhpcy5tZXRyaWNzLm1lZGlhXG5cdFx0bWVkaWFFbCB8fCAobWVkaWFFbCA9IHRoaXMuZGVmYXVsdEltYWdlKTtcblx0XHRkZXN0IHx8IChkZXN0ID0ge1xuXHRcdFx0eDogMCxcblx0XHRcdHk6IDAsXG5cdFx0XHR3aWR0aDogdGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoLFxuXHRcdFx0aGVpZ2h0OiB0aGlzLm1ldHJpY3MubWVkaWEuaGVpZ2h0XG5cdFx0fSk7XG5cblx0XHQvLyBuYXRpdmUvZGlzcGxheSBzY2FsZVxuXHRcdHZhciBzVyA9IHRoaXMubW9kZWwuZ2V0KFwic291cmNlXCIpLmdldChcIndcIiksXG5cdFx0XHRzSCA9IHRoaXMubW9kZWwuZ2V0KFwic291cmNlXCIpLmdldChcImhcIiksXG5cdFx0XHRyc1ggPSBzVyAvIHRoaXMubWV0cmljcy5tZWRpYS53aWR0aCxcblx0XHRcdHJzWSA9IHNIIC8gdGhpcy5tZXRyaWNzLm1lZGlhLmhlaWdodDtcblxuXHRcdC8vIGRlc3QsIHNjYWxlZCB0byBuYXRpdmVcblx0XHR2YXIgc3JjID0ge1xuXHRcdFx0eDogTWF0aC5tYXgoMCwgZGVzdC54ICogcnNYKSxcblx0XHRcdHk6IE1hdGgubWF4KDAsIGRlc3QueSAqIHJzWSksXG5cdFx0XHR3aWR0aDogTWF0aC5taW4oc1csIGRlc3Qud2lkdGggKiByc1gpLFxuXHRcdFx0aGVpZ2h0OiBNYXRoLm1pbihzSCwgZGVzdC5oZWlnaHQgKiByc1kpXG5cdFx0fTtcblxuXHRcdC8vIHJlc2l6ZSBjYW52YXNcblx0XHQvLyB2YXIgY2FudmFzID0gY3R4LmNhbnZhcztcblx0XHQvLyBpZiAoY2FudmFzLndpZHRoICE9PSBkZXN0LndpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT09IGRlc3QuaGVpZ2h0KSB7XG5cdFx0Ly8gXHRjYW52YXMud2lkdGggPSBkZXN0LndpZHRoO1xuXHRcdC8vIFx0Y2FudmFzLmhlaWdodCA9IGRlc3QuaGVpZ2h0O1xuXHRcdC8vIH1cblx0XHRjdHguY2FudmFzLndpZHRoID0gZGVzdC53aWR0aDtcblx0XHRjdHguY2FudmFzLmhlaWdodCA9IGRlc3QuaGVpZ2h0O1xuXG5cdFx0Ly8gY29weSBpbWFnZSB0byBjYW52YXNcblx0XHRjdHguY2xlYXJSZWN0KDAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0KTtcblx0XHRjdHguZHJhd0ltYWdlKG1lZGlhRWwsXG5cdFx0XHRzcmMueCwgc3JjLnksIHNyYy53aWR0aCwgc3JjLmhlaWdodCxcblx0XHRcdDAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0IC8vIGRlc3RpbmF0aW9uIHJlY3Rcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGN0eDtcblx0fSxcblxuXHRfZ2V0SW1hZ2VEYXRhOiBmdW5jdGlvbihtZWRpYUVsLCB0YXJnZXRFbCwgcmVjdEVsKSB7XG5cdFx0Ly8gc3JjL2Rlc3QgcmVjdHNcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRyZWN0RWwgfHwgKHJlY3RFbCA9IHRhcmdldEVsKTtcblxuXHRcdC8vIE5PVEU6IGRvZXMgbm90IHdvcmsgd2l0aCBzdmcgZWxlbWVudFxuXHRcdC8vIHZhciB0UmVjdCA9IHJlY3RFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHQvLyB2YXIgY1JlY3QgPSBtZWRpYUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdC8vIHZhciB0WCA9IHRSZWN0LnggLSBjUmVjdC54LFxuXHRcdC8vIFx0dFkgPSB0UmVjdC55IC0gY1JlY3QueSxcblx0XHQvLyBcdHRXID0gdFJlY3Qud2lkdGgsXG5cdFx0Ly8gXHR0SCA9IHRSZWN0LmhlaWdodDtcblxuXHRcdC8vIHRhcmdldCBib3VuZHNcblx0XHR2YXIgdFggPSByZWN0RWwub2Zmc2V0TGVmdCxcblx0XHRcdHRZID0gcmVjdEVsLm9mZnNldFRvcCxcblx0XHRcdHRXID0gcmVjdEVsLm9mZnNldFdpZHRoLFxuXHRcdFx0dEggPSByZWN0RWwub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0aWYgKHRYID09PSB2b2lkIDAgfHwgdFkgPT09IHZvaWQgMCB8fCB0VyA9PT0gdm9pZCAwIHx8IHRIID09PSB2b2lkIDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBkZXN0aW5hdGlvbiByZWN0XG5cdFx0dmFyIFJFQ1RfR1JPVyA9IDA7XG5cdFx0dmFyIGRlc3QgPSB7XG5cdFx0XHR4OiB0WCAtIFJFQ1RfR1JPVyxcblx0XHRcdHk6IHRZIC0gUkVDVF9HUk9XLFxuXHRcdFx0d2lkdGg6IHRXICsgUkVDVF9HUk9XICogMixcblx0XHRcdGhlaWdodDogdEggKyBSRUNUX0dST1cgKiAyXG5cdFx0fTtcblxuXHRcdC8vIG5hdGl2ZS9kaXNwbGF5IHNjYWxlXG5cdFx0dmFyIHNXID0gdGhpcy5tb2RlbC5nZXQoXCJzb3VyY2VcIikuZ2V0KFwid1wiKSxcblx0XHRcdHNIID0gdGhpcy5tb2RlbC5nZXQoXCJzb3VyY2VcIikuZ2V0KFwiaFwiKSxcblx0XHRcdHJzWCA9IHNXIC8gdGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoLFxuXHRcdFx0cnNZID0gc0ggLyB0aGlzLm1ldHJpY3MubWVkaWEuaGVpZ2h0O1xuXG5cdFx0Ly8gZGVzdCwgc2NhbGVkIHRvIG5hdGl2ZVxuXHRcdHZhciBzcmMgPSB7XG5cdFx0XHR4OiBNYXRoLm1heCgwLCBkZXN0LnggKiByc1gpLFxuXHRcdFx0eTogTWF0aC5tYXgoMCwgZGVzdC55ICogcnNZKSxcblx0XHRcdHdpZHRoOiBNYXRoLm1pbihzVywgZGVzdC53aWR0aCAqIHJzWCksXG5cdFx0XHRoZWlnaHQ6IE1hdGgubWluKHNILCBkZXN0LmhlaWdodCAqIHJzWSlcblx0XHR9O1xuXG5cdFx0Ly8gQ29weSBpbWFnZSB0byBjYW52YXNcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHRcdC8vIGNhbnZhcy5zdHlsZS53aWR0aCAgPSBkZXN0LndpZHRoICsgXCJweFwiO1xuXHRcdC8vIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBkZXN0LmhlaWdodCArIFwicHhcIjtcblxuXHRcdHZhciBjYW52YXMgPSBnZXRTaGFyZWRDYW52YXMoKTtcblx0XHRpZiAoY2FudmFzLndpZHRoICE9PSBkZXN0LndpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT09IGRlc3QuaGVpZ2h0KSB7XG5cdFx0XHRjYW52YXMud2lkdGggPSBkZXN0LndpZHRoO1xuXHRcdFx0Y2FudmFzLmhlaWdodCA9IGRlc3QuaGVpZ2h0O1xuXHRcdH1cblx0XHR2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0XHRjdHguY2xlYXJSZWN0KDAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0KTtcblx0XHRjdHguZHJhd0ltYWdlKG1lZGlhRWwsXG5cdFx0XHRzcmMueCwgc3JjLnksIHNyYy53aWR0aCwgc3JjLmhlaWdodCxcblx0XHRcdDAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0IC8vIGRlc3RpbmF0aW9uIHJlY3Rcblx0XHQpO1xuXHRcdHJldHVybiBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGRlc3Qud2lkdGgsIGRlc3QuaGVpZ2h0KTtcblx0fSxcblxuXHRfdXBkYXRlT3ZlcmxheTogZnVuY3Rpb24obWVkaWFFbCwgdGFyZ2V0RWwsIHJlY3RFbCkge1xuXHRcdHZhciBjYW52YXMsIGN0eDtcblx0XHR2YXIgaW1hZ2VEYXRhID0gdGhpcy5fZ2V0SW1hZ2VEYXRhKG1lZGlhRWwsIHRhcmdldEVsLCByZWN0RWwpO1xuXHRcdHZhciBhdmdDb2xvciA9IENvbG9yKCkucmdiKGdldEF2ZXJhZ2VSR0IoaW1hZ2VEYXRhKSk7XG5cblx0XHQvLyB2YXIgYXZnSGV4ID0gYXZnQ29sb3IuaGV4KCkuc3RyaW5nKCksIGVscyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcImltZywgdmlkZW9cIik7XG5cdFx0Ly8gZm9yICh2YXIgaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBcdGVscy5pdGVtKGkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGF2Z0hleDtcblx0XHQvLyB9XG5cblx0XHR0YXJnZXRFbC5jbGFzc0xpc3QudG9nZ2xlKFwib3Zlci1kYXJrXCIsIGF2Z0NvbG9yLmRhcmsoKSk7XG5cblx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjp1cGRhdGVPdmVybGF5KCkgYXZnQ29sb3I6JXMgKCVzKVwiLCB0aGlzLmNpZCwgYXZnQ29sb3IucmdiKCkuc3RyaW5nKCksIGF2Z0NvbG9yLmRhcmsoKT9cImRhcmtcIjpcImxpZ2h0XCIsIHRhcmdldEVsKTtcblxuXHRcdC8vIENvbG9yLCBmaWx0ZXIgb3B0c1xuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0dGhpcy5mZ0NvbG9yIHx8ICh0aGlzLmZnQ29sb3IgPSBuZXcgQ29sb3IodGhpcy5tb2RlbC5hdHRyKFwiY29sb3JcIikpKTtcblx0XHR0aGlzLmJnQ29sb3IgfHwgKHRoaXMuYmdDb2xvciA9IG5ldyBDb2xvcih0aGlzLm1vZGVsLmF0dHIoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpKSk7XG5cblx0XHR2YXIgb3B0cyA9IHsgcmFkaXVzOiAyMCB9O1xuXHRcdHZhciBpc0ZnRGFyayA9IHRoaXMuZmdDb2xvci5sdW1pbm9zaXR5KCkgPCB0aGlzLmJnQ29sb3IubHVtaW5vc2l0eSgpO1xuXHRcdG9wdHMueDAwID0gaXNGZ0RhcmsgPyBDb2xvcih0aGlzLmZnQ29sb3IpLmxpZ2h0ZW4oMC41KSA6IENvbG9yKHRoaXMuYmdDb2xvcikuZGFya2VuKDAuNSk7XG5cdFx0b3B0cy54RkYgPSBpc0ZnRGFyayA/IENvbG9yKHRoaXMuYmdDb2xvcikubGlnaHRlbigwLjUpIDogQ29sb3IodGhpcy5mZ0NvbG9yKS5kYXJrZW4oMC41KTtcblxuXHRcdHN0YWNrQmx1clJHQihpbWFnZURhdGEsIHsgcmFkaXVzOiA0MCB9KTtcblx0XHQvLyBzdGFja0JsdXJNb25vKGltYWdlRGF0YSwgb3B0cyk7XG5cdFx0Ly8gZHVvdG9uZShpbWFnZURhdGEsIG9wdHMpO1xuXG5cdFx0Y3R4ID0gZ2V0U2hhcmVkQ2FudmFzKCk7XG5cdFx0aWYgKGNhbnZhcy53aWR0aCAhPT0gaW1hZ2VEYXRhLndpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT09IGltYWdlRGF0YS5oZWlnaHQpIHtcblx0XHRcdGNhbnZhcy53aWR0aCA9IGltYWdlRGF0YS53aWR0aDtcblx0XHRcdGNhbnZhcy5oZWlnaHQgPSBpbWFnZURhdGEuaGVpZ2h0O1xuXHRcdH1cblx0XHRjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHRcdGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcblx0XHR0YXJnZXRFbC5zdHlsZS5iYWNrZ3JvdW5kT3JpZ2luID0gXCJib3JkZXItYm94XCI7XG5cdFx0dGFyZ2V0RWwuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdFx0dGFyZ2V0RWwuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcIjEwMCVcIjtcblx0XHQvLyB0YXJnZXRFbC5zdHlsZS5wYWRkaW5nID0gXCIwIDAgNXJlbSAwXCI7XG5cdFx0dGFyZ2V0RWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBjYW52YXMudG9EYXRhVVJMKCkgKyBcIilcIjtcblx0fSAvKiovXG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKiBHb29nbGUgQW5hbHl0aWNzXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8vIGlmICh3aW5kb3cuR1RBR19FTkFCTEVEICYmIHdpbmRvdy5nYSkge1xuaWYgKHdpbmRvdy5nYSkge1xuXHRQbGF5YWJsZVJlbmRlcmVyID0gKGZ1bmN0aW9uKFBsYXlhYmxlUmVuZGVyZXIpIHtcblxuXHRcdC8qKiBAdHlwZSB7bW9kdWxlOnVuZGVyc2NvcmUuc3RyaW5ncy9kYXNoZXJpemV9ICovXG5cdFx0dmFyIGRhc2hlcml6ZSA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlLnN0cmluZy9kYXNoZXJpemVcIik7XG5cblx0XHQvLyB2YXIgcmVhZHlFdmVudHMgPSBbXCJwbGF5aW5nXCIsIFwid2FpdGluZ1wiLCBcImVuZGVkXCJdO1xuXHRcdC8vIHZhciB1c2VyRXZlbnRzID0gW1wicGxheVwiLCBcInBhdXNlXCJdO1xuXG5cdFx0cmV0dXJuIFBsYXlhYmxlUmVuZGVyZXIuZXh0ZW5kKHtcblxuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciByZXR2YWwgPSBQbGF5YWJsZVJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdHRoaXMuX2dhRXZlbnRTdWZmaXggPSB0aGlzLnBsYXliYWNrUmVxdWVzdGVkID8gXCItYXV0b3BsYXlcIiA6IFwiXCI7XG5cdFx0XHRcdHJldHVybiByZXR2YWw7XG5cdFx0XHR9LFxuXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHRfb25QbGF5YmFja1RvZ2dsZTogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0dmFyIHJldHZhbCA9IFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLl9vblBsYXliYWNrVG9nZ2xlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdGlmICh3aW5kb3cuZ2EpIHtcblx0XHRcdFx0XHR3aW5kb3cuZ2EoXCJzZW5kXCIsIHtcblx0XHRcdFx0XHRcdGhpdFR5cGU6IFwiZXZlbnRcIixcblx0XHRcdFx0XHRcdGV2ZW50Q2F0ZWdvcnk6IGRhc2hlcml6ZSh0aGlzLmNpZFByZWZpeCksXG5cdFx0XHRcdFx0XHRldmVudEFjdGlvbjogKHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgPyBcInBsYXlcIiA6IFwicGF1c2VcIikgKyB0aGlzLl9nYUV2ZW50U3VmZml4LFxuXHRcdFx0XHRcdFx0ZXZlbnRMYWJlbDogdGhpcy5tb2RlbC5nZXQoXCJ0ZXh0XCIpLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIiVzOjpfb25QbGF5YmFja1RvZ2dsZSB3aW5kb3cuZ2EgaXMgJXNcIiwgdGhpcy5jaWQsIHdpbmRvdy5nYSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJldHZhbDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRcdC8vIF90b2dnbGVQbGF5YmFjazogZnVuY3Rpb24obmV3UGxheVN0YXRlKSB7XG5cdFx0XHQvLyBcdHZhciByZXR2YWwgPSBQbGF5YWJsZVJlbmRlcmVyLnByb3RvdHlwZS5fdG9nZ2xlUGxheWJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdC8vIFx0d2luZG93LmdhKFwic2VuZFwiLCB7XG5cdFx0XHQvLyBcdFx0aGl0VHlwZTogXCJldmVudFwiLFxuXHRcdFx0Ly8gXHRcdGV2ZW50Q2F0ZWdvcnk6IFwiUGxheWFibGVcIixcblx0XHRcdC8vIFx0XHRldmVudEFjdGlvbjogdGhpcy5wbGF5YmFja1JlcXVlc3RlZCA/IFwicGxheVwiIDogXCJwYXVzZVwiLFxuXHRcdFx0Ly8gXHRcdGV2ZW50TGFiZWw6IHRoaXMubW9kZWwuZ2V0KFwidGV4dFwiKSxcblx0XHRcdC8vIFx0fSk7XG5cdFx0XHQvLyBcdHJldHVybiByZXR2YWw7XG5cdFx0XHQvLyB9LFxuXHRcdH0pO1xuXHR9KShQbGF5YWJsZVJlbmRlcmVyKTtcbn1cblxuLy8gaWYgKERFQlVHKSB7XG4vLyBcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLl9sb2dGbGFncyA9IFwiXCI7XG4vL1xuLy8gXHRQbGF5YWJsZVJlbmRlcmVyID0gKGZ1bmN0aW9uKFBsYXlhYmxlUmVuZGVyZXIpIHtcbi8vIFx0XHRpZiAoIVBsYXlhYmxlUmVuZGVyZXIuTE9HX1RPX1NDUkVFTikgcmV0dXJuIFBsYXlhYmxlUmVuZGVyZXI7XG4vL1xuLy8gXHRcdC8qKiBAdHlwZSB7bW9kdWxlOnVuZGVyc2NvcmUuc3RyaW5ncy9scGFkfSAqL1xuLy8gXHRcdHZhciBscGFkID0gcmVxdWlyZShcInVuZGVyc2NvcmUuc3RyaW5nL2xwYWRcIik7XG4vL1xuLy8gXHRcdHJldHVybiBQbGF5YWJsZVJlbmRlcmVyLmV4dGVuZCh7XG4vLyBcdFx0XHRfY2FuUmVzdW1lUGxheWJhY2s6IGZ1bmN0aW9uKCkge1xuLy8gXHRcdFx0XHR2YXIgcmV0dmFsID0gUGxheWFibGVSZW5kZXJlci5wcm90b3R5cGUuX2NhblJlc3VtZVBsYXliYWNrLmFwcGx5KHRoaXMuYXJndW1lbnRzKTtcbi8vIFx0XHRcdFx0Y29uc29sZS5sb2coXCJbc2Nyb2xsXSAlczo6X2NhblJlc3VtZVBsYXliYWNrKCk6JXNcIiwgdGhpcy5jaWQsIHJldHZhbCwge1xuLy8gXHRcdFx0XHRcdFwiZW5hYmxlZFwiOiB0aGlzLmVuYWJsZWQsXG4vLyBcdFx0XHRcdFx0XCJzZWxlY3RlZFwiOiAoISF0aGlzLm1vZGVsLnNlbGVjdGVkKSxcbi8vIFx0XHRcdFx0XHRcInBsYXliYWNrUmVxdWVzdGVkXCI6IHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQsXG4vLyBcdFx0XHRcdFx0XCJhdHRhY2hlZFwiOiB0aGlzLmF0dGFjaGVkLFxuLy8gXHRcdFx0XHRcdFwicGFyZW50Vmlld1wiOiAodGhpcy5wYXJlbnRWaWV3ICYmIHRoaXMucGFyZW50Vmlldy5jaWQpLFxuLy8gXHRcdFx0XHRcdFwiIXNjcm9sbGluZ1wiOiAodGhpcy5wYXJlbnRWaWV3ICYmICF0aGlzLnBhcmVudFZpZXcuc2Nyb2xsaW5nKSxcbi8vIFx0XHRcdFx0XHRcIm1lZGlhU3RhdGVcIjogdGhpcy5tZWRpYVN0YXRlLFxuLy8gXHRcdFx0XHRcdC8vIFwiIWRvY3VtZW50LmhpZGRlblwiOiAhZG9jdW1lbnRbdmlzaWJpbGl0eUhpZGRlblByb3BdLFxuLy8gXHRcdFx0XHRcdFwidmlzaWJpbGl0eVN0YXRlXCI6IGRvY3VtZW50W3Zpc2liaWxpdHlTdGF0ZVByb3BdXG4vLyBcdFx0XHRcdH0pO1xuLy8gXHRcdFx0XHRyZXR1cm4gcmV0dmFsO1xuLy8gXHRcdFx0fSxcbi8vIFx0XHR9KTtcbi8vIFx0fSkoUGxheWFibGVSZW5kZXJlcik7XG4vLyB9XG5cbm1vZHVsZS5leHBvcnRzID0gUGxheWFibGVSZW5kZXJlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBoZWxwZXIsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCBhbGlhczI9aGVscGVycy5oZWxwZXJNaXNzaW5nLCBhbGlhczM9XCJmdW5jdGlvblwiLCBhbGlhczQ9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwicGxhY2Vob2xkZXIgc2l6aW5nXFxcIj48L2Rpdj5cXG48ZGl2IGNsYXNzPVxcXCJjb250ZW50XFxcIj5cXG5cdDxkaXYgY2xhc3M9XFxcIm1lZGlhLWJvcmRlciBjb250ZW50LXNpemVcXFwiPjwvZGl2Plxcblx0PGRpdiBjbGFzcz1cXFwiY29udHJvbHMgY29udGVudC1zaXplXFxcIj5cXG5cdFx0PGNhbnZhcyBjbGFzcz1cXFwicHJvZ3Jlc3MtbWV0ZXJcXFwiPjwvY2FudmFzPlxcblx0PC9kaXY+XFxuXHQ8ZGl2IGNsYXNzPVxcXCJzZXF1ZW5jZSBtZWRpYS1zaXplXFxcIj5cXG5cdFx0PGltZyBjbGFzcz1cXFwic2VxdWVuY2Utc3RlcCBjdXJyZW50IGRlZmF1bHRcXFwiIGFsdD1cXFwiXCJcbiAgICArIGFsaWFzNCgoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLnRleHQgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnRleHQgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXMzID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcInRleHRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxcIiBsb25nZGVzYz1cXFwiI2Rlc2NfbVwiXG4gICAgKyBhbGlhczQoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5pZCB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXMzID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcImlkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIlxcXCIgLz5cXG5cdDwvZGl2Plxcblx0PGRpdiBjbGFzcz1cXFwib3ZlcmxheSBtZWRpYS1zaXplIHBsYXktdG9nZ2xlLWhpdGFyZWFcXFwiPlxcblx0XHQ8Y2FudmFzIGNsYXNzPVxcXCJwbGF5LXRvZ2dsZVxcXCIvPlxcblx0PC9kaXY+XFxuPC9kaXY+XFxuXCI7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIGFwcC92aWV3L3JlbmRlci9TZXF1ZW5jZVJlbmRlcmVyXG4gKi9cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIEltcG9ydHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKiogQHR5cGUge21vZHVsZTpiYWNrYm9uZS5iYWJ5c2l0dGVyfSAqL1xuY29uc3QgQ29udGFpbmVyID0gcmVxdWlyZShcImJhY2tib25lLmJhYnlzaXR0ZXJcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2Jhc2UvVmlld30gKi9cbmNvbnN0IFZpZXcgPSByZXF1aXJlKFwiYXBwL3ZpZXcvYmFzZS9WaWV3XCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcmVuZGVyL1BsYXlhYmxlUmVuZGVyZXJ9ICovXG5jb25zdCBQbGF5YWJsZVJlbmRlcmVyID0gcmVxdWlyZShcImFwcC92aWV3L3JlbmRlci9QbGF5YWJsZVJlbmRlcmVyXCIpO1xuLy8gLyoqIEB0eXBlIHttb2R1bGU6YXBwL21vZGVsL1NlbGVjdGFibGVDb2xsZWN0aW9ufSAqL1xuLy8gdmFyIFNlbGVjdGFibGVDb2xsZWN0aW9uID0gcmVxdWlyZShcImFwcC9tb2RlbC9TZWxlY3RhYmxlQ29sbGVjdGlvblwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG5jb25zdCBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG5cbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9DYW52YXNQcm9ncmVzc01ldGVyfSAqL1xuY29uc3QgUHJvZ3Jlc3NNZXRlciA9IHJlcXVpcmUoXCJhcHAvdmlldy9jb21wb25lbnQvQ2FudmFzUHJvZ3Jlc3NNZXRlclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L2NvbXBvbmVudC9QbGF5VG9nZ2xlU3ltYm9sfSAqL1xuY29uc3QgUGxheVRvZ2dsZVN5bWJvbCA9IHJlcXVpcmUoXCJhcHAvdmlldy9jb21wb25lbnQvUGxheVRvZ2dsZVN5bWJvbFwiKTtcblxuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvVGltZXJ9ICovXG5jb25zdCBUaW1lciA9IHJlcXVpcmUoXCJ1dGlscy9UaW1lclwiKTtcbi8vIC8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG4vLyB2YXIgdHJhbnNpdGlvbkVuZCA9IHJlcXVpcmUoXCJ1dGlscy9ldmVudC90cmFuc2l0aW9uRW5kXCIpO1xuLy8gLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvcHJlZml4ZWRQcm9wZXJ0eX0gKi9cbi8vIHZhciBwcmVmaXhlZCA9IHJlcXVpcmUoXCJ1dGlscy9wcmVmaXhlZFByb3BlcnR5XCIpO1xuXG4vKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuY29uc3QgX3doZW5JbWFnZUxvYWRzID0gcmVxdWlyZShcImFwcC92aWV3L3Byb21pc2UvX3doZW5JbWFnZUxvYWRzXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcHJvbWlzZS9fbG9hZEltYWdlQXNPYmplY3RVUkx9ICovXG5jb25zdCBfbG9hZEltYWdlQXNPYmplY3RVUkwgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcHJvbWlzZS9fbG9hZEltYWdlQXNPYmplY3RVUkxcIik7XG4vLyAvKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuLy8gdmFyIHdoZW5TZWxlY3Rpb25EaXN0YW5jZUlzID0gcmVxdWlyZShcImFwcC92aWV3L3Byb21pc2Uvd2hlblNlbGVjdGlvbkRpc3RhbmNlSXNcIik7XG4vLyB2YXIgd2hlblNlbGVjdFRyYW5zaXRpb25FbmRzID0gcmVxdWlyZShcImFwcC92aWV3L3Byb21pc2Uvd2hlblNlbGVjdFRyYW5zaXRpb25FbmRzXCIpO1xuLy8gdmFyIHdoZW5EZWZhdWx0SW1hZ2VMb2FkcyA9IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL3doZW5EZWZhdWx0SW1hZ2VMb2Fkc1wiKTtcblxuLy8gLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbi8vIHZhciBDb2xvciA9IHJlcXVpcmUoXCJjb2xvclwiKTtcbi8vIHZhciBkdW90b25lID0gcmVxdWlyZShcInV0aWxzL2NhbnZhcy9iaXRtYXAvZHVvdG9uZVwiKTtcbi8vIHZhciBzdGFja0JsdXJSR0IgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9zdGFja0JsdXJSR0JcIik7XG4vLyB2YXIgc3RhY2tCbHVyTW9ubyA9IHJlcXVpcmUoXCJ1dGlscy9jYW52YXMvYml0bWFwL3N0YWNrQmx1ck1vbm9cIik7XG4vLyB2YXIgZ2V0QXZlcmFnZVJHQkEgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9nZXRBdmVyYWdlUkdCQVwiKTtcblxuY29uc3QgZXJyb3JUZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi90ZW1wbGF0ZS9FcnJvckJsb2NrLmhic1wiKTtcblxudmFyIE1JTl9TVEVQX0lOVEVSVkFMID0gMiAqIEdsb2JhbHMuVFJBTlNJVElPTl9EVVJBVElPTiArIEdsb2JhbHMuVFJBTlNJVElPTl9ERUxBWV9JTlRFUlZBTDtcbnZhciBERUZBVUxUX1NURVBfSU5URVJWQUwgPSA2ICogR2xvYmFscy5UUkFOU0lUSU9OX0RVUkFUSU9OICsgR2xvYmFscy5UUkFOU0lUSU9OX0RFTEFZX0lOVEVSVkFMO1xuXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiBQcml2YXRlIGNsYXNzZXNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9yZW5kZXIvU2VxdWVuY2VSZW5kZXJlci5QcmVmZXRlY2hlZFNvdXJjZVJlbmRlcmVyfVxuICovXG52YXIgUHJlZmV0ZWNoZWRTb3VyY2VSZW5kZXJlciA9IFZpZXcuZXh0ZW5kKHtcblxuXHRjaWRQcmVmaXg6IFwic2VxdWVuY2VTdGVwUmVuZGVyZXJcIixcblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNsYXNzTmFtZTogXCJzZXF1ZW5jZS1zdGVwXCIsXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHR0YWdOYW1lOiBcImltZ1wiLFxuXG5cdHByb3BlcnRpZXM6IHtcblx0XHRyZWFkeToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3JlYWR5O1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcblx0XHQhdGhpcy5lbC5oYXNBdHRyaWJ1dGUoXCJhbHRcIikgJiYgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5tb2RlbC5nZXQoXCJzcmNcIikpO1xuXHRcdC8vIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwibG9uZ2Rlc2NcIiwgdGhpcy5tb2RlbC5nZXQoXCJvcmlnaW5hbFwiKSk7XG5cblx0XHRpZiAodGhpcy5tb2RlbC5oYXMoXCJwcmVmZXRjaGVkXCIpKSB7XG5cdFx0XHR0aGlzLl9yZW5kZXJQcmVmZXRjaGVkKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJjaGFuZ2U6cHJlZmV0Y2hlZFwiLCB0aGlzLl9yZW5kZXJQcmVmZXRjaGVkKTtcblx0XHR9XG5cdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCBcInNlbGVjdGVkIGRlc2VsZWN0ZWRcIiwgdGhpcy5fcmVuZGVyU2VsZWN0aW9uKTtcblx0XHR0aGlzLl9yZW5kZXJTZWxlY3Rpb24oKTtcblx0fSxcblxuXHRfcmVuZGVyU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLmVsLmNsYXNzTGlzdC50b2dnbGUoXCJjdXJyZW50XCIsICEhdGhpcy5tb2RlbC5zZWxlY3RlZCk7XG5cdH0sXG5cblx0X3JlbmRlclByZWZldGNoZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwcmVmZXRjaGVkID0gdGhpcy5tb2RlbC5nZXQoXCJwcmVmZXRjaGVkXCIpO1xuXHRcdGlmIChwcmVmZXRjaGVkICE9PSB0aGlzLmVsLnNyYykge1xuXHRcdFx0dGhpcy5lbC5zcmMgPSBwcmVmZXRjaGVkO1xuXHRcdH1cblx0XHRfd2hlbkltYWdlTG9hZHModGhpcy5lbCkudGhlbihcblx0XHRcdGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRcdHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKHRzdGFtcCkge1xuXHRcdFx0XHRcdHRoaXMuX3NldFJlYWR5KHRydWUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0uYmluZCh0aGlzKSxcblx0XHRcdGZ1bmN0aW9uKGVycikge1xuXHRcdFx0XHQvLyB0aGlzLl9zZXRSZWFkeShmYWxzZSk7XG5cdFx0XHRcdChlcnIgaW5zdGFuY2VvZiBFcnJvcikgfHwgKGVyciA9IG5ldyBFcnJvcihcImNhbm5vdCBsb2FkIHByZWZldGNoZWQgdXJsXCIpKTtcblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fS5iaW5kKHRoaXMpXG5cdFx0KTtcblx0fSxcblxuXHQvKiogQHR5cGUge2Jvb2xlYW59ICovXG5cdF9yZWFkeTogZmFsc2UsXG5cblx0X3NldFJlYWR5OiBmdW5jdGlvbihyZWFkeSkge1xuXHRcdGlmICh0aGlzLl9yZWFkeSAhPT0gcmVhZHkpIHtcblx0XHRcdHRoaXMuX3JlYWR5ID0gISEocmVhZHkpOyAvLyBtYWtlIGJvb2xcblx0XHRcdHRoaXMudHJpZ2dlcihcInJlbmRlcmVyOnJlYWR5XCIsIHRoaXMpO1xuXHRcdH1cblx0fSxcblxuXHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIGlmICh0aGlzLm1vZGVsLmhhcyhcInByZWZldGNoZWRcIikpIHtcblx0XHQvLyBcdHRoaXMuX3JlbmRlclByZWZldGNoZWQoKTtcblx0XHQvLyB9XG5cdFx0Ly8gdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiY3VycmVudFwiLCAhIXRoaXMubW9kZWwuc2VsZWN0ZWQpO1xuXHRcdGNvbnNvbGUubG9nKFwiJXM6OnJlbmRlclwiLCB0aGlzLmNpZCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG59KTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL3ZpZXcvcmVuZGVyL1NlcXVlbmNlUmVuZGVyZXIuU2ltcGxlU291cmNlUmVuZGVyZXJ9XG4gKi9cbi8vIHZhciBTaW1wbGVTb3VyY2VSZW5kZXJlciA9IFZpZXcuZXh0ZW5kKHtcbi8vXG4vLyBcdGNpZFByZWZpeDogXCJzZXF1ZW5jZVN0ZXBSZW5kZXJlclwiLFxuLy8gXHQvKiogQHR5cGUge3N0cmluZ30gKi9cbi8vIFx0Y2xhc3NOYW1lOiBcInNlcXVlbmNlLXN0ZXBcIixcbi8vIFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG4vLyBcdHRhZ05hbWU6IFwiaW1nXCIsXG4vL1xuLy8gXHQvKiogQG92ZXJyaWRlICovXG4vLyBcdGluaXRpYWxpemU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4vLyBcdFx0Ly8gdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiY3VycmVudFwiLCB0aGlzLm1vZGVsLmhhc093blByb3BlcnR5KFwic2VsZWN0ZWRcIikpO1xuLy8gXHRcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImN1cnJlbnRcIiwgISF0aGlzLm1vZGVsLnNlbGVjdGVkKTtcbi8vIFx0XHR0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsIHtcbi8vIFx0XHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24gKCkge1xuLy8gXHRcdFx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50XCIpO1xuLy8gXHRcdFx0fSxcbi8vIFx0XHRcdFwiZGVzZWxlY3RlZFwiOiBmdW5jdGlvbiAoKSB7XG4vLyBcdFx0XHRcdHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcImN1cnJlbnRcIik7XG4vLyBcdFx0XHR9XG4vLyBcdFx0fSk7XG4vLyBcdFx0aWYgKHRoaXMuZWwuc3JjID09PSBcIlwiKSB7XG4vLyBcdFx0XHR0aGlzLmVsLnNyYyA9IEdsb2JhbHMuTUVESUFfRElSICsgXCIvXCIgKyB0aGlzLm1vZGVsLmdldChcInNyY1wiKTtcbi8vIFx0XHR9XG4vL1xuLy8gXHRcdGlmICh0aGlzLm1vZGVsLmhhcyhcImVycm9yXCIpKSB7XG4vLyBcdFx0XHR0aGlzLl9vbk1vZGVsRXJyb3IoKTtcbi8vIFx0XHR9IGVsc2Uge1xuLy8gXHRcdFx0dGhpcy5saXN0ZW5Ub09uY2UodGhpcy5tb2RlbCwgXCJjaGFuZ2U6ZXJyb3JcIiwgdGhpcy5fb25Nb2RlbEVycm9yKTtcbi8vIFx0XHRcdC8vIHRoaXMubGlzdGVuVG9PbmNlKHRoaXMubW9kZWwsIHtcbi8vIFx0XHRcdC8vIFx0XCJjaGFuZ2U6c291cmNlXCI6IHRoaXMuX29uTW9kZWxTb3VyY2UsXG4vLyBcdFx0XHQvLyBcdFwiY2hhbmdlOmVycm9yXCI6IHRoaXMuX29uTW9kZWxFcnJvcixcbi8vIFx0XHRcdC8vIH0pO1xuLy8gXHRcdH1cbi8vIFx0fSxcbi8vXG4vLyBcdC8vIF9vbk1vZGVsU291cmNlOiBmdW5jdGlvbigpIHtcbi8vIFx0Ly8gXHR0aGlzLmVsLnNyYyA9IEdsb2JhbHMuTUVESUFfRElSICsgXCIvXCIgKyB0aGlzLm1vZGVsLmdldChcInNyY1wiKTtcbi8vIFx0Ly8gXHQvLyBjb25zb2xlLmxvZyhcIiVzOjpjaGFuZ2U6c3JjXCIsIHRoaXMuY2lkLCB0aGlzLm1vZGVsLmdldChcInNyY1wiKSk7XG4vLyBcdC8vIH0sXG4vL1xuLy8gXHRfb25Nb2RlbEVycm9yOiBmdW5jdGlvbigpIHtcbi8vIFx0XHR2YXIgZXJyID0gdGhpcy5tb2RlbC5nZXQoXCJlcnJvclwiKTtcbi8vIFx0XHR2YXIgZXJyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gXHRcdGVyckVsLmNsYXNzTmFtZSA9IFwiZXJyb3IgY29sb3ItYmdcIiArICh0aGlzLm1vZGVsLnNlbGVjdGVkPyBcIiBjdXJyZW50XCIgOiBcIlwiKTtcbi8vIFx0XHRlcnJFbC5pbm5lckhUTUwgPSBlcnJvclRlbXBsYXRlKGVycik7XG4vLyBcdFx0dGhpcy5zZXRFbGVtZW50KGVyckVsLCB0cnVlKTtcbi8vIFx0XHRjb25zb2xlLmxvZyhcIiVzOjpjaGFuZ2U6ZXJyb3JcIiwgdGhpcy5jaWQsIGVyci5tZXNzYWdlLCBlcnIuaW5mb1NyYyk7XG4vLyBcdH0sXG4vLyB9KTtcblxudmFyIFNvdXJjZUVycm9yUmVuZGVyZXIgPSBWaWV3LmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNsYXNzTmFtZTogXCJzZXF1ZW5jZS1zdGVwIGVycm9yXCIsXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0Y2lkUHJlZml4OiBcInNvdXJjZUVycm9yUmVuZGVyZXJcIixcblx0LyoqIEBvdmVycmlkZSAqL1xuXHR0ZW1wbGF0ZTogZXJyb3JUZW1wbGF0ZSxcblx0LyoqIEB0eXBlIHtib29sZWFufSAqL1xuXHRyZWFkeTogdHJ1ZSxcblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG5cdFx0Ly8gdmFyIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IGZ1bmN0aW9uIG9uU2VsZWN0aW9uQ2hhbmdlICgpIHtcblx0XHQvLyBcdHRoaXMuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImN1cnJlbnRcIiwgISF0aGlzLm1vZGVsLnNlbGVjdGVkKTtcblx0XHQvLyB9O1xuXHRcdC8vIHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJzZWxlY3RlZCBkZXNlbGVjdGVkXCIsIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSk7XG5cdFx0Ly8gLy8gdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiY3VycmVudFwiLCAhIXRoaXMubW9kZWwuc2VsZWN0ZWQpO1xuXHRcdC8vIGhhbmRsZVNlbGVjdGlvbkNoYW5nZS5jYWxsKHRoaXMpO1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgXCJzZWxlY3RlZCBkZXNlbGVjdGVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiY3VycmVudFwiLCAhIXRoaXMubW9kZWwuc2VsZWN0ZWQpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiY3VycmVudFwiLCAhIXRoaXMubW9kZWwuc2VsZWN0ZWQpO1xuXHRcdHRoaXMuZWwuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLmdldChcImVycm9yXCIpKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcbn0pO1xuXG52YXIgU2VxdWVuY2VTdGVwUmVuZGVyZXIgPSBQcmVmZXRlY2hlZFNvdXJjZVJlbmRlcmVyO1xuLy8gdmFyIFNlcXVlbmNlU3RlcFJlbmRlcmVyID0gU2ltcGxlU291cmNlUmVuZGVyZXI7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAdHlwZSB7bW9kdWxlOmFwcC92aWV3L3JlbmRlci9TZXF1ZW5jZVJlbmRlcmVyfVxuICovXG52YXIgU2VxdWVuY2VSZW5kZXJlciA9IFBsYXlhYmxlUmVuZGVyZXIuZXh0ZW5kKHtcblxuXHQvKiogQHR5cGUge3N0cmluZ30gKi9cblx0Y2lkUHJlZml4OiBcInNlcXVlbmNlUmVuZGVyZXJcIixcblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNsYXNzTmFtZTogUGxheWFibGVSZW5kZXJlci5wcm90b3R5cGUuY2xhc3NOYW1lICsgXCIgc2VxdWVuY2UtaXRlbVwiLFxuXHQvKiogQHR5cGUge0Z1bmN0aW9ufSAqL1xuXHR0ZW1wbGF0ZTogcmVxdWlyZShcIi4vU2VxdWVuY2VSZW5kZXJlci5oYnNcIiksXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0LyogaW5pdGlhbGl6ZVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG5cdFx0dGhpcy5zb3VyY2VzID0gdGhpcy5tb2RlbC5nZXQoXCJzb3VyY2VzXCIpO1xuXHRcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQgKiBjaGlsZHJlblxuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvKiogQG92ZXJyaWRlICovXG5cdGNyZWF0ZUNoaWxkcmVuOiBmdW5jdGlvbigpIHtcblx0XHRQbGF5YWJsZVJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0dGhpcy5wbGFjZWhvbGRlciA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5wbGFjZWhvbGRlclwiKTtcblx0XHR0aGlzLnNlcXVlbmNlID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VxdWVuY2VcIik7XG5cblx0XHQvLyBzdHlsZXNcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHR2YXIgcywgYXR0cnMgPSB0aGlzLm1vZGVsLmF0dHJzKCk7XG5cdFx0Ly8gdmFyIHMsIGF0dHJzID0gdGhpcy5tb2RlbC5nZXQoXCJhdHRyc1wiKTtcblx0XHRzID0gXy5waWNrKGF0dHJzLCBcImJveC1zaGFkb3dcIiwgXCJib3JkZXJcIiwgXCJib3JkZXItcmFkaXVzXCIpO1xuXHRcdF8uZXh0ZW5kKHRoaXMuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLm1lZGlhLWJvcmRlclwiKS5zdHlsZSwgcyk7XG5cdFx0cyA9IF8ucGljayhhdHRycywgXCJib3JkZXItcmFkaXVzXCIpO1xuXHRcdF8uZXh0ZW5kKHRoaXMuc2VxdWVuY2Uuc3R5bGUsIHMpO1xuXHRcdF8uZXh0ZW5kKHRoaXMucGxhY2Vob2xkZXIuc3R5bGUsIHMpO1xuXG5cdFx0Ly8gbW9kZWxcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHR0aGlzLnNvdXJjZXMuc2VsZWN0KHRoaXMubW9kZWwuZ2V0KFwic291cmNlXCIpKTtcblxuXHRcdC8vIGl0ZW1WaWV3c1xuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHRoaXMuaXRlbVZpZXdzID0gbmV3IENvbnRhaW5lcigpO1xuXHRcdC8vIGFkZCBkZWZhdWx0IGltYWdlIGFzIHJlbmRlcmVyIChhbHJlYWR5IGluIERPTSlcblx0XHR0aGlzLml0ZW1WaWV3cy5hZGQobmV3IFNlcXVlbmNlU3RlcFJlbmRlcmVyKHtcblx0XHRcdGVsOiB0aGlzLmdldERlZmF1bHRJbWFnZSgpLFxuXHRcdFx0bW9kZWw6IHRoaXMubW9kZWwuZ2V0KFwic291cmNlXCIpXG5cdFx0fSkpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIGxheW91dC9yZW5kZXJcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0dmFyIGVscywgZWwsIGksIGNzc1csIGNzc0g7XG5cdFx0dmFyIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XG5cblx0XHQvLyBtZWRpYS1zaXplXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Y3NzVyA9IHRoaXMubWV0cmljcy5tZWRpYS53aWR0aCArIFwicHhcIjtcblx0XHRjc3NIID0gdGhpcy5tZXRyaWNzLm1lZGlhLmhlaWdodCArIFwicHhcIjtcblxuXHRcdGVscyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcIi5tZWRpYS1zaXplXCIpO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGVsID0gZWxzLml0ZW0oaSk7XG5cdFx0XHRlbC5zdHlsZS53aWR0aCA9IGNzc1c7XG5cdFx0XHRlbC5zdHlsZS5oZWlnaHQgPSBjc3NIO1xuXHRcdH1cblx0XHRjb250ZW50LnN0eWxlLndpZHRoID0gY3NzVztcblx0XHRjb250ZW50LnN0eWxlLmhlaWdodCA9IGNzc0g7XG5cblx0XHQvLyBjb250ZW50LXBvc2l0aW9uXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dmFyIGNzc1gsIGNzc1k7XG5cdFx0Y3NzWCA9IHRoaXMubWV0cmljcy5jb250ZW50LnggKyBcInB4XCI7XG5cdFx0Y3NzWSA9IHRoaXMubWV0cmljcy5jb250ZW50LnkgKyBcInB4XCI7XG5cdFx0Y29udGVudC5zdHlsZS5sZWZ0ID0gY3NzWDtcblx0XHRjb250ZW50LnN0eWxlLnRvcCA9IGNzc1k7XG5cblx0XHRlbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sc1wiKTtcblx0XHQvLyBlbC5zdHlsZS5sZWZ0ID0gY3NzWDtcblx0XHQvLyBlbC5zdHlsZS50b3AgPSBjc3NZO1xuXHRcdGVsLnN0eWxlLndpZHRoID0gdGhpcy5tZXRyaWNzLmNvbnRlbnQud2lkdGggKyBcInB4XCI7XG5cdFx0ZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5tZXRyaWNzLmNvbnRlbnQuaGVpZ2h0ICsgXCJweFwiO1xuXG5cdFx0Ly8gLy8gY29udGVudC1zaXplXG5cdFx0Ly8gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gY3NzVyA9IHRoaXMubWV0cmljcy5jb250ZW50LndpZHRoICsgXCJweFwiO1xuXHRcdC8vIGNzc0ggPSB0aGlzLm1ldHJpY3MuY29udGVudC5oZWlnaHQgKyBcInB4XCI7XG5cdFx0Ly9cblx0XHQvLyBlbHMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGVudC1zaXplXCIpO1xuXHRcdC8vIGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBcdGVsID0gZWxzLml0ZW0oaSk7XG5cdFx0Ly8gXHRlbC5zdHlsZS53aWR0aCA9IGNzc1c7XG5cdFx0Ly8gXHRlbC5zdHlsZS5oZWlnaHQgPSBjc3NIO1xuXHRcdC8vIH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIGluaXRpYWxpemVBc3luY1xuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRpbml0aWFsaXplUGxheWFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIG1vZGVsXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gdGhpcy5zb3VyY2VzLnNlbGVjdCh0aGlzLm1vZGVsLmdldChcInNvdXJjZVwiKSk7XG5cdFx0dGhpcy5jb250ZW50LmNsYXNzTGlzdC5hZGQoXCJzdGFydGVkXCIpO1xuXG5cdFx0Ly8gU2VxdWVuY2UgbW9kZWxcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRQbGF5YWJsZVJlbmRlcmVyLndoZW5TZWxlY3Rpb25EaXN0YW5jZUlzKHRoaXMsIDApXG5cdFx0XHQvLyAudGhlbihmdW5jdGlvbih2aWV3KSB7XG5cdFx0XHQvLyBcdC8qIGRlZmF1bHRJbWFnZSBpcyBsb2FkZWQsIGFkZCBgc3RhcnRlZGAgcmlnaHRhd2F5ICovXG5cdFx0XHQvLyBcdHZpZXcuY29udGVudC5jbGFzc0xpc3QuYWRkKFwic3RhcnRlZFwiKTtcblx0XHRcdC8vIFx0cmV0dXJuIHZpZXc7XG5cdFx0XHQvLyB9KVxuXHRcdFx0LnRoZW4odGhpcy5fcHJlbG9hZEFsbEl0ZW1zLCBmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0cmV0dXJuIChlcnIgaW5zdGFuY2VvZiBWaWV3LlZpZXdFcnJvcikgPyAodm9pZCAwKSA6IGVycjsgLy8gSWdub3JlIFZpZXdFcnJvclxuXHRcdFx0fSk7XG5cblx0XHR0aGlzLl9zZXF1ZW5jZUludGVydmFsID0gTWF0aC5tYXgocGFyc2VJbnQodGhpcy5tb2RlbC5hdHRyKFwiQHNlcXVlbmNlLWludGVydmFsXCIpKSwgTUlOX1NURVBfSU5URVJWQUwpIHx8IERFRkFVTFRfU1RFUF9JTlRFUlZBTDtcblxuXHRcdC8vIHRpbWVyXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0LyogdGltZXIgd2lsbCBiZSBzdGFydGVkIHdoZW4gX3ZhbGlkYXRlUGxheWJhY2sgaXMgY2FsbGVkIGZyb20gX29uTW9kZWxTZWxlY3RlZCAqL1xuXHRcdHRoaXMudGltZXIgPSBuZXcgVGltZXIoKTtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMsIFwidmlldzpyZW1vdmVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy50aW1lci5zdG9wKCk7XG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmcodGhpcy50aW1lcik7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmxpc3RlblRvKHRoaXMudGltZXIsIHtcblx0XHRcdFwic3RhcnRcIjogdGhpcy5fb25UaW1lclN0YXJ0LFxuXHRcdFx0XCJyZXN1bWVcIjogdGhpcy5fb25UaW1lclJlc3VtZSxcblx0XHRcdFwicGF1c2VcIjogdGhpcy5fb25UaW1lclBhdXNlLFxuXHRcdFx0XCJlbmRcIjogdGhpcy5fb25UaW1lckVuZCxcblx0XHRcdC8vIFwic3RvcFwiOiBmdW5jdGlvbiAoKSB7fSwgLy8gc3RvcCBpcyBvbmx5IGNhbGxlZCBvbiB2aWV3IHJlbW92ZVxuXHRcdH0pO1xuXG5cdFx0Ly8gcGxheS10b2dnbGUtc3ltYm9sXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dGhpcy5fcGxheVRvZ2dsZVN5bWJvbCA9IG5ldyBQbGF5VG9nZ2xlU3ltYm9sKF8uZXh0ZW5kKHtcblx0XHRcdGVsOiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucGxheS10b2dnbGVcIilcblx0XHR9LCB0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sIHx8IHt9KSk7XG5cblx0XHQvLyBwcm9ncmVzcy1tZXRlciBtb2RlbFxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHRoaXMuX3NvdXJjZVByb2dyZXNzQnlJZHggPSB0aGlzLnNvdXJjZXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fSk7XG5cdFx0dGhpcy5fc291cmNlUHJvZ3Jlc3NCeUlkeFswXSA9IDE7IC8vIGZpcnN0IGl0ZW0gaXMgYWxyZWFkeSBsb2FkZWRcblxuXHRcdC8vIHByb2dyZXNzLW1ldGVyXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dGhpcy5wcm9ncmVzc01ldGVyID0gbmV3IFByb2dyZXNzTWV0ZXIoe1xuXHRcdFx0ZWw6IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5wcm9ncmVzcy1tZXRlclwiKSxcblx0XHRcdGNvbG9yOiB0aGlzLm1vZGVsLmF0dHIoXCJjb2xvclwiKSxcblx0XHRcdC8vIGJhY2tncm91bmRDb2xvcjogdGhpcy5tb2RlbC5hdHRyKFwiYmFja2dyb3VuZC1jb2xvclwiKSxcblx0XHRcdHZhbHVlczoge1xuXHRcdFx0XHRhdmFpbGFibGU6IHRoaXMuX3NvdXJjZVByb2dyZXNzQnlJZHguY29uY2F0KCksXG5cdFx0XHR9LFxuXHRcdFx0bWF4VmFsdWVzOiB7XG5cdFx0XHRcdGFtb3VudDogdGhpcy5zb3VyY2VzLmxlbmd0aCxcblx0XHRcdFx0YXZhaWxhYmxlOiB0aGlzLnNvdXJjZXMubGVuZ3RoLFxuXHRcdFx0fSxcblx0XHRcdGxhYmVsRm46IChmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgPT09IGZhbHNlKSByZXR1cm4gR2xvYmFscy5QQVVTRV9DSEFSO1xuXHRcdFx0XHRyZXR1cm4gKHRoaXMuc291cmNlcy5zZWxlY3RlZEluZGV4ICsgMSkgKyBcIi9cIiArIHRoaXMuc291cmNlcy5sZW5ndGg7XG5cdFx0XHR9KS5iaW5kKHRoaXMpXG5cdFx0fSk7XG5cdFx0Ly8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLnRvcC1iYXJcIilcblx0XHQvL1x0XHQuYXBwZW5kQ2hpbGQodGhpcy5wcm9ncmVzc01ldGVyLnJlbmRlcigpLmVsKTtcblx0fSxcblxuXHRpbml0aWFsaXplQXN5bmM6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBQbGF5YWJsZVJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplQXN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuXHRcdFx0LnRoZW4oXG5cdFx0XHRcdGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0XHRyZXR1cm4gdmlldy53aGVuQXR0YWNoZWQoKTtcblx0XHRcdFx0fSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0dmlldy5pbml0aWFsaXplUGxheWFibGUoKTtcblx0XHRcdFx0Ly8gdmlldy51cGRhdGVPdmVybGF5KHZpZXcuZGVmYXVsdEltYWdlLCB2aWV3LnBsYXlUb2dnbGUpOyAvL3ZpZXcub3ZlcmxheSk7XG5cdFx0XHRcdHZpZXcubGlzdGVuVG9TZWxlY3Rpb24oKTtcblx0XHRcdFx0cmV0dXJuIHZpZXc7XG5cdFx0XHR9KTtcblx0fSxcblxuXHR3aGVuSW5pdGlhbGl6ZWQ6IGZ1bmN0aW9uKHZpZXcpIHtcblx0XHR2YXIgcmV0dmFsID0gUGxheWFibGVSZW5kZXJlci5wcm90b3R5cGUud2hlbkluaXRpYWxpemVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0dmlldy5fdmFsaWRhdGVQbGF5YmFjaygpO1xuXHRcdHJldHVybiByZXR2YWw7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0ICogX3ByZWxvYWRBbGxJdGVtc1xuXHQgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfcHJlbG9hZEFsbEl0ZW1zOiBmdW5jdGlvbih2aWV3KSB7XG5cdFx0dmlldy5vbmNlKFwidmlldzpyZW1vdmVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2lsZW50ID0geyBzaWxlbnQ6IHRydWUgfTtcblx0XHRcdHZpZXcuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBzb3VyY2VzKSB7XG5cdFx0XHRcdC8vIHZpZXcuc3RvcExpc3RlbmluZyhpdGVtLCBcImNoYW5nZTpwcm9ncmVzc1wiKTtcblx0XHRcdFx0dmFyIHByZWZldGNoZWQgPSBpdGVtLmdldChcInByZWZldGNoZWRcIik7XG5cdFx0XHRcdGlmIChwcmVmZXRjaGVkKSB7XG5cdFx0XHRcdFx0aXRlbS5zZXQoXCJwcm9ncmVzc1wiLCAwLCBzaWxlbnQpO1xuXHRcdFx0XHRcdGl0ZW0udW5zZXQoXCJwcmVmZXRjaGVkXCIsIHNpbGVudCk7XG5cdFx0XHRcdFx0aWYgKC9eYmxvYlxcOi8udGVzdChwcmVmZXRjaGVkKSkge1xuXHRcdFx0XHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTChwcmVmZXRjaGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdHJldHVybiB2aWV3LnNvdXJjZXMucmVkdWNlKGZ1bmN0aW9uKGxhc3RQcm9taXNlLCBpdGVtLCBpbmRleCwgc291cmNlcykge1xuXHRcdFx0cmV0dXJuIGxhc3RQcm9taXNlLnRoZW4oZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHRpZiAodmlldy5fdmlld1BoYXNlID09PSBcImRpc3Bvc2VkXCIpIHtcblx0XHRcdFx0XHQvKiogZG8gbm90aGluZyAqL1xuXHRcdFx0XHRcdHJldHVybiB2aWV3O1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0aWYgKGl0ZW0uaGFzKFwicHJlZmV0Y2hlZFwiKSkge1xuXHRcdFx0XHRcdHZpZXcuX3VwZGF0ZUl0ZW1Qcm9ncmVzcygxLCBpbmRleCk7XG5cdFx0XHRcdFx0cmV0dXJuIHZpZXc7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIG9uSXRlbVByb2dyZXNzID0gZnVuY3Rpb24oaXRlbSwgcHJvZ3Jlc3MpIHtcblx0XHRcdFx0XHRcdHZpZXcuX3VwZGF0ZUl0ZW1Qcm9ncmVzcyhwcm9ncmVzcywgaW5kZXgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0dmlldy5saXN0ZW5UbyhpdGVtLCBcImNoYW5nZTpwcm9ncmVzc1wiLCBvbkl0ZW1Qcm9ncmVzcyk7XG5cdFx0XHRcdFx0dmlldy5vbmNlKFwidmlldzpyZW1vdmVcIiwgZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHRcdFx0dmlldy5zdG9wTGlzdGVuaW5nKGl0ZW0sIFwiY2hhbmdlOnByb2dyZXNzXCIsIG9uSXRlbVByb2dyZXNzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIiVzOl9wcmVsb2FkQWxsSXRlbXNcIiwgdmlldy5jaWQsIGl0ZW0uZ2V0KFwib3JpZ2luYWxcIiksIGl0ZW0uZ2V0KFwibWltZVwiKSk7XG5cdFx0XHRcdFx0cmV0dXJuIF9sb2FkSW1hZ2VBc09iamVjdFVSTChpdGVtLmdldChcIm9yaWdpbmFsXCIpLFxuXHRcdFx0XHRcdFx0XHRmdW5jdGlvbihwcm9ncmVzcywgcmVxdWVzdCkge1xuXHRcdFx0XHRcdFx0XHRcdC8qIE5PVEU6IFNpbmNlIHdlIGFyZSBjYWxsaW5nIFVSTC5yZXZva2VPYmplY3RVUkwgd2hlbiB2aWV3IGlzIHJlbW92ZWQsIGFsc28gYWJvcnQgaW5jb21wbGV0ZSByZXF1ZXN0cy4gT3RoZXJ3aXNlLCBjbGVhciB0aGUgY2FsbGJhY2sgcmVmZXJlbmNlIGZyb20gWE1MSHR0cFJlcXVlc3Qub25wcm9ncmVzcyAgKi9cblx0XHRcdFx0XHRcdFx0XHRpZiAodmlldy5fdmlld1BoYXNlID09PSBcImRpc3Bvc2VkXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vY29uc29sZS53YXJuKFwiJXM6Ol9wcmVsb2FkQWxsSXRlbXMgYWJvcnRpbmcgWEhSIFslcyAlc10gKCVzKVwiLCB2aWV3LmNpZCwgcmVxdWVzdC5zdGF0dXMsIHJlcXVlc3QucmVhZHlTdGF0ZSwgaXRlbS5nZXQoXCJvcmlnaW5hbFwiKSwgcmVxdWVzdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0LmFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyByZXF1ZXN0Lm9ucHJvZ3Jlc3MgPSB2b2lkIDA7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0uc2V0KFwicHJvZ3Jlc3NcIiwgcHJvZ3Jlc3MpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC50aGVuKFxuXHRcdFx0XHRcdFx0XHRmdW5jdGlvbihwVXJsKSB7XG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5zZXQoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJwcm9ncmVzc1wiOiBwVXJsID8gMSA6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcInByZWZldGNoZWRcIjogcFVybFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB2aWV3O1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRpdGVtLnNldCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcInByb2dyZXNzXCI6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImVycm9yXCI6IGVyclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB2aWV3O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LCBQcm9taXNlLnJlc29sdmUodmlldykpO1xuXHR9LFxuXG5cdC8vIF9wcmVsb2FkQWxsSXRlbXMyOiBmdW5jdGlvbih2aWV3KSB7XG5cdC8vIFx0cmV0dXJuIHZpZXcuc291cmNlcy5yZWR1Y2UoZnVuY3Rpb24obGFzdFByb21pc2UsIGl0ZW0sIGluZGV4LCBzb3VyY2VzKSB7XG5cdC8vIFx0XHRyZXR1cm4gbGFzdFByb21pc2UudGhlbihmdW5jdGlvbih2aWV3KSB7XG5cdC8vIFx0XHRcdHZhciBpdGVtVmlldyA9IHZpZXcuX2dldEl0ZW1WaWV3KGl0ZW0pO1xuXHQvLyBcdFx0XHRyZXR1cm4gX3doZW5JbWFnZUxvYWRzKGl0ZW1WaWV3LmVsKS50aGVuKGZ1bmN0aW9uKHVybCl7XG5cdC8vIFx0XHRcdFx0dmlldy5fdXBkYXRlSXRlbVByb2dyZXNzKDEsIGluZGV4KTtcblx0Ly8gXHRcdFx0XHRyZXR1cm4gdmlldztcblx0Ly8gXHRcdFx0fSwgZnVuY3Rpb24oZXJyKSB7XG5cdC8vIFx0XHRcdFx0dmlldy5fdXBkYXRlSXRlbVByb2dyZXNzKDAsIGluZGV4KTtcblx0Ly8gXHRcdFx0XHRpdGVtLnNldChcImVycm9yXCIsIGVycik7XG5cdC8vIFx0XHRcdFx0cmV0dXJuIHZpZXc7XG5cdC8vIFx0XHRcdH0pO1xuXHQvLyBcdFx0fSk7XG5cdC8vIFx0fSwgUHJvbWlzZS5yZXNvbHZlKHZpZXcpKTtcblx0Ly8gfSxcblxuXHRfdXBkYXRlSXRlbVByb2dyZXNzOiBmdW5jdGlvbihwcm9ncmVzcywgaW5kZXgpIHtcblx0XHR0aGlzLl9zb3VyY2VQcm9ncmVzc0J5SWR4W2luZGV4XSA9IHByb2dyZXNzO1xuXHRcdGlmICh0aGlzLnByb2dyZXNzTWV0ZXIpIHtcblx0XHRcdHRoaXMucHJvZ3Jlc3NNZXRlci52YWx1ZVRvKFwiYXZhaWxhYmxlXCIsIHRoaXMuX3NvdXJjZVByb2dyZXNzQnlJZHgsIDMwMCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBQbGF5YWJsZVJlbmRlcmVyIGltcGxlbWVudGF0aW9uXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qKiBAb3ZlcnJpZGUgaW5pdGlhbCB2YWx1ZSAqL1xuXHRfcGxheWJhY2tSZXF1ZXN0ZWQ6IHRydWUsXG5cblx0LyoqIEB0eXBlIHtCb29sZWFufSBpbnRlcm5hbCBzdG9yZSAqL1xuXHRfcGF1c2VkOiB0cnVlLFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0X2lzTWVkaWFQYXVzZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLl9wYXVzZWQ7XG5cdH0sXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRfcGxheU1lZGlhOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoIXRoaXMuX3BhdXNlZCkgcmV0dXJuO1xuXHRcdHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuXG5cdFx0aWYgKCF0aGlzLl9pc01lZGlhV2FpdGluZygpKSB7XG5cdFx0XHRpZiAodGhpcy50aW1lci5zdGF0dXMgPT09IFRpbWVyLlBBVVNFRCkge1xuXHRcdFx0XHR0aGlzLnRpbWVyLnN0YXJ0KCk7IC8vIHJlc3VtZSwgYWN0dWFsbHlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMudGltZXIuc3RhcnQodGhpcy5fc2VxdWVuY2VJbnRlcnZhbCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0X3BhdXNlTWVkaWE6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl9wYXVzZWQpIHJldHVybjtcblx0XHR0aGlzLl9wYXVzZWQgPSB0cnVlO1xuXHRcdGlmICh0aGlzLnRpbWVyLnN0YXR1cyA9PT0gVGltZXIuU1RBUlRFRCkge1xuXHRcdFx0dGhpcy50aW1lci5wYXVzZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyAvKiogQG92ZXJyaWRlICovXG5cdC8vIF9yZW5kZXJQbGF5YmFja1N0YXRlOiBmdW5jdGlvbigpIHtcblx0Ly8gXHQvLyBpZiAoIXRoaXMuY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJzdGFydGVkXCIpKSB7XG5cdC8vIFx0Ly8gXHR0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LmFkZChcInN0YXJ0ZWRcIik7XG5cdC8vIFx0Ly8gfVxuXHQvLyBcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLl9yZW5kZXJQbGF5YmFja1N0YXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdC8vIH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0Lyogc2VxdWVuY2UgcHJpdmF0ZVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25UaW1lclN0YXJ0OiBmdW5jdGlvbihkdXJhdGlvbikge1xuXHRcdHZhciBpdGVtO1xuXHRcdGlmICh0aGlzLnNvdXJjZXMuc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcblx0XHRcdGl0ZW0gPSB0aGlzLm1vZGVsLmdldChcInNvdXJjZVwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aXRlbSA9IHRoaXMuc291cmNlcy5mb2xsb3dpbmdPckZpcnN0KCk7XG5cdFx0fVxuXHRcdHRoaXMuc291cmNlcy5zZWxlY3QoaXRlbSk7XG5cdFx0dGhpcy5wcm9ncmVzc01ldGVyLnZhbHVlVG8oXCJhbW91bnRcIiwgdGhpcy5zb3VyY2VzLnNlbGVjdGVkSW5kZXggKyAxLCBkdXJhdGlvbik7XG5cdFx0dGhpcy5jb250ZW50LmNsYXNzTGlzdC50b2dnbGUoXCJwbGF5YmFjay1lcnJvclwiLCBpdGVtLmhhcyhcImVycm9yXCIpKTtcblxuXHRcdC8vIHZhciBjdXJyVmlldyA9IHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKGl0ZW0pO1xuXHRcdC8vIGlmICghaXRlbS5oYXMoXCJlcnJvclwiKSAmJiBjdXJyVmlldyAhPT0gbnVsbCkge1xuXHRcdC8vIFx0dGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5zZXRJbWFnZVNvdXJjZShjdXJyVmlldy5lbCk7XG5cdFx0Ly8gXHQvLyB0aGlzLnVwZGF0ZU92ZXJsYXkoY3VyclZpZXcuZWwsIHRoaXMucGxheVRvZ2dsZSk7XG5cdFx0Ly8gfSBlbHNlIHtcblx0XHQvLyBcdHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wuc2V0SW1hZ2VTb3VyY2UobnVsbCk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gLy8gaW5pdCBuZXh0IHJlbmRlcmVyIG5vdyB0byBoYXZlIHNtb290aGVyIHRyYW5zaXRpb25zXG5cdFx0Ly8gdGhpcy5fZ2V0SXRlbVZpZXcodGhpcy5zb3VyY2VzLmZvbGxvd2luZ09yRmlyc3QoKSk7XG5cdH0sXG5cblx0X29uVGltZXJSZXN1bWU6IGZ1bmN0aW9uKGR1cmF0aW9uKSB7XG5cdFx0dGhpcy5wcm9ncmVzc01ldGVyLnZhbHVlVG8oXCJhbW91bnRcIiwgdGhpcy5zb3VyY2VzLnNlbGVjdGVkSW5kZXggKyAxLCBkdXJhdGlvbik7XG5cdH0sXG5cblx0X29uVGltZXJQYXVzZTogZnVuY3Rpb24oZHVyYXRpb24pIHtcblx0XHR0aGlzLnByb2dyZXNzTWV0ZXIudmFsdWVUbyhcImFtb3VudFwiLCB0aGlzLnByb2dyZXNzTWV0ZXIuZ2V0UmVuZGVyZWRWYWx1ZShcImFtb3VudFwiKSwgMCk7XG5cdH0sXG5cblx0LyogbGFzdCBjb21wbGV0ZWx5IHBsYXllZCBzZXF1ZW5jZSBpbmRleCAqL1xuXHQvLyBfbGFzdFBsYXllZEluZGV4OiAtMSxcblxuXHRfb25UaW1lckVuZDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5leHRJdGVtLCBuZXh0VmlldztcblxuXHRcdHZhciBzaG93TmV4dFZpZXcgPSBmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OnNob3dOZXh0VmlldyAlc21zICVzXCIsIGNvbnRleHQuY2lkLCBjb250ZXh0Ll9zZXF1ZW5jZUludGVydmFsLCBuZXh0SXRlbS5jaWQpXG5cdFx0XHR0aGlzLnNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCF0aGlzLm1lZGlhUGF1c2VkKSB7XG5cdFx0XHRcdFx0dGhpcy50aW1lci5zdGFydCh0aGlzLl9zZXF1ZW5jZUludGVydmFsKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0uYmluZCh0aGlzKTtcblxuXHRcdC8vIGdldCBuZXh0IGl0ZW0gaW5pdCBuZXh0IHJlbmRlcmVyXG5cdFx0bmV4dEl0ZW0gPSB0aGlzLnNvdXJjZXMuZm9sbG93aW5nT3JGaXJzdCgpO1xuXHRcdG5leHRWaWV3ID0gdGhpcy5fZ2V0SXRlbVZpZXcobmV4dEl0ZW0pO1xuXG5cdFx0aWYgKG5leHRJdGVtLmhhcyhcImVycm9yXCIpKSB7XG5cdFx0XHRzaG93TmV4dFZpZXcoKTtcblx0XHR9IGVsc2UgaWYgKG5leHRJdGVtLmhhcyhcInByZWZldGNoZWRcIikpIHtcblx0XHRcdF93aGVuSW1hZ2VMb2FkcyhuZXh0Vmlldy5lbCkudGhlbihzaG93TmV4dFZpZXcsIHNob3dOZXh0Vmlldyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8qIFRPRE86IGFkZCBnYSBldmVudCAnbWVkaWEtd2FpdGluZycgKi9cblx0XHRcdC8vIHdpbmRvdy5nYShcInNlbmRcIiwgXCJldmVudFwiLCBcInNlcXVlbmNlLWl0ZW1cIiwgXCJ3YWl0aW5nXCIsIHRoaXMubW9kZWwuZ2V0KFwidGV4dFwiKSk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOlt3YWl0aW5nXSAlc21zICVzXCIsIGNvbnRleHQuY2lkLCBuZXh0SXRlbS5jaWQpO1xuXHRcdFx0dGhpcy5fdG9nZ2xlV2FpdGluZyh0cnVlKTtcblx0XHRcdHRoaXMubGlzdGVuVG9PbmNlKG5leHRJdGVtLCBcImNoYW5nZTpwcmVmZXRjaGVkIGNoYW5nZTplcnJvclwiLCBmdW5jdGlvbihtb2RlbCkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOltwbGF5aW5nXSAlc21zICVzXCIsIGNvbnRleHQuY2lkLCBuZXh0SXRlbS5jaWQpO1xuXHRcdFx0XHR0aGlzLl90b2dnbGVXYWl0aW5nKGZhbHNlKTtcblx0XHRcdFx0X3doZW5JbWFnZUxvYWRzKG5leHRWaWV3LmVsKS50aGVuKHNob3dOZXh0Vmlldywgc2hvd05leHRWaWV3KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXHRfZ2V0SXRlbVZpZXc6IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHR2YXIgdmlldyA9IHRoaXMuaXRlbVZpZXdzLmZpbmRCeU1vZGVsKGl0ZW0pO1xuXHRcdGlmICghdmlldykge1xuXHRcdFx0dmlldyA9IG5ldyhpdGVtLmhhcyhcImVycm9yXCIpID8gU291cmNlRXJyb3JSZW5kZXJlciA6IFNlcXVlbmNlU3RlcFJlbmRlcmVyKSh7XG5cdFx0XHRcdG1vZGVsOiBpdGVtXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMuaXRlbVZpZXdzLmFkZCh2aWV3KTtcblx0XHRcdHRoaXMuc2VxdWVuY2UuYXBwZW5kQ2hpbGQodmlldy5yZW5kZXIoKS5lbCk7XG5cdFx0fVxuXHRcdHJldHVybiB2aWV3O1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdC8qIHByb2dyZXNzIG1ldGVyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIF9jcmVhdGVEZWZhdWx0SXRlbURhdGE6IGZ1bmN0aW9uKCkge1xuXHQvLyBcdHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHQvLyBcdHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0Ly8gXHR2YXIgaW1hZ2VEYXRhID0gdGhpcy5fZHJhd01lZGlhRWxlbWVudChjb250ZXh0KS5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblx0Ly9cblx0Ly8gXHR2YXIgb3B0cyA9IHsgcmFkaXVzOiAyMCB9O1xuXHQvLyBcdHZhciBmZ0NvbG9yID0gbmV3IENvbG9yKHRoaXMubW9kZWwuYXR0cihcImNvbG9yXCIpKTtcblx0Ly8gXHR2YXIgYmdDb2xvciA9IG5ldyBDb2xvcih0aGlzLm1vZGVsLmF0dHIoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpKTtcblx0Ly8gXHR2YXIgaXNGZ0RhcmsgPSBmZ0NvbG9yLmx1bWlub3NpdHkoKSA8IGJnQ29sb3IubHVtaW5vc2l0eSgpO1xuXHQvLyBcdG9wdHMueDAwID0gaXNGZ0Rhcms/IENvbG9yKGZnQ29sb3IpLmxpZ2h0ZW4oMC4zMykgOiBDb2xvcihiZ0NvbG9yKS5kYXJrZW4oMC4zMyk7XG5cdC8vIFx0b3B0cy54RkYgPSBpc0ZnRGFyaz8gQ29sb3IoYmdDb2xvcikubGlnaHRlbigwLjMzKSA6IENvbG9yKGZnQ29sb3IpLmRhcmtlbigwLjMzKTtcblx0Ly9cblx0Ly8gXHRzdGFja0JsdXJNb25vKGltYWdlRGF0YSwgb3B0cyk7XG5cdC8vIFx0ZHVvdG9uZShpbWFnZURhdGEsIG9wdHMpO1xuXHQvLyBcdC8vIHN0YWNrQmx1clJHQihpbWFnZURhdGEsIG9wdHMpO1xuXHQvL1xuXHQvLyBcdGNvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG5cdC8vIFx0cmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoKTtcblx0Ly8gfSxcbn0pO1xuXG5pZiAoREVCVUcpIHtcblx0U2VxdWVuY2VSZW5kZXJlciA9IChmdW5jdGlvbihTZXF1ZW5jZVJlbmRlcmVyKSB7XG5cdFx0aWYgKCFTZXF1ZW5jZVJlbmRlcmVyLkxPR19UT19TQ1JFRU4pIHJldHVybiBTZXF1ZW5jZVJlbmRlcmVyO1xuXG5cdFx0Ly8gLyoqIEB0eXBlIHttb2R1bGU6dW5kZXJzY29yZS5zdHJpbmdzL2xwYWR9ICovXG5cdFx0Ly8gdmFyIHJwYWQgPSByZXF1aXJlKFwidW5kZXJzY29yZS5zdHJpbmcvcnBhZFwiKTtcblx0XHQvKiogQHR5cGUge21vZHVsZTp1bmRlcnNjb3JlLnN0cmluZ3MvbHBhZH0gKi9cblx0XHR2YXIgbHBhZCA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlLnN0cmluZy9scGFkXCIpO1xuXHRcdC8qKiBAdHlwZSB7bW9kdWxlOnVuZGVyc2NvcmUuc3RyaW5ncy9jYXBpdGFsaXplfSAqL1xuXHRcdHZhciBjYXBzID0gcmVxdWlyZShcInVuZGVyc2NvcmUuc3RyaW5nL2NhcGl0YWxpemVcIik7XG5cblx0XHRyZXR1cm4gU2VxdWVuY2VSZW5kZXJlci5leHRlbmQoe1xuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFNlcXVlbmNlUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdFx0XHR0aGlzLl9fbG9nQ29sb3JzID0gXy5leHRlbmQoe1xuXHRcdFx0XHRcdFwibWVkaWE6cGxheVwiOiBcImRhcmtyZWRcIixcblx0XHRcdFx0XHRcIm1lZGlhOnBhdXNlXCI6IFwiZGFya3JlZFwiLFxuXG5cdFx0XHRcdFx0XCJ0aW1lcjpzdGFydFwiOiBcImRhcmtncmVlblwiLFxuXHRcdFx0XHRcdFwidGltZXI6ZW5kXCI6IFwiZGFya2dyZWVuXCIsXG5cdFx0XHRcdFx0XCJ0aW1lcjpyZXN1bWVcIjogXCJncmVlblwiLFxuXHRcdFx0XHRcdFwidGltZXI6cGF1c2VcIjogXCJncmVlblwiLFxuXG5cdFx0XHRcdFx0XCJsb2FkOnByb2dyZXNzXCI6IFwiYmx1ZVwiLFxuXHRcdFx0XHRcdFwibG9hZDpjb21wbGV0ZVwiOiBcImRhcmtibHVlXCJcblx0XHRcdFx0fSwgdGhpcy5fX2xvZ0NvbG9ycyk7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBfX2dldEhlYWRlclRleHQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gXHR2YXIgZm10MSA9IGZ1bmN0aW9uKHMpIHtcblx0XHRcdC8vIFx0XHRyZXR1cm4gbHBhZChjYXBzKHMpLCA4KS5zdWJzdHIoMCwgOCkudG9VcHBlckNhc2UoKTtcblx0XHRcdC8vIFx0fTtcblx0XHRcdC8vIFx0dmFyIGZtdDIgPSBmdW5jdGlvbihzKSB7XG5cdFx0XHQvLyBcdFx0cmV0dXJuIGxwYWQoY2FwcyhzKSwgOCkuc3Vic3RyKDAsIDgpLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHQvLyBcdH07XG5cdFx0XHQvLyBcdHZhciBvID0ge1xuXHRcdFx0Ly8gXHRcdFwidHN0YW1wXCI6IGZtdDEsXG5cdFx0XHQvLyBcdFx0XCJpbmRleFwiOiBmbXQyLFxuXHRcdFx0Ly8gXHRcdFwiZHVyYXRpb25cIjogZm10MSxcblx0XHRcdC8vIFx0XHRcInBsYXliYWNrXCI6IGZtdDEsXG5cdFx0XHQvLyBcdFx0XCJtZWRpYVwiOiBmbXQxLFxuXHRcdFx0Ly8gXHRcdFwidGltZXJcIjogZm10MSxcblx0XHRcdC8vIFx0XHRcIm5leHRcIjogZm10MSxcblx0XHRcdC8vIFx0fTtcblx0XHRcdC8vIFx0cmV0dXJuIE9iamVjdC5rZXlzKG8pLm1hcChmdW5jdGlvbihzLCBpLCBhKSB7XG5cdFx0XHQvLyBcdFx0cmV0dXJuIG9bc10ocyk7XG5cdFx0XHQvLyBcdH0pLmpvaW4oXCIgXCIpO1xuXHRcdFx0Ly8gXHQvLyBPYmplY3Qua2V5cyhvKS5yZWR1Y2UoZnVuY3Rpb24oc3MsIHMsIGksIGEpIHtcblx0XHRcdC8vIFx0Ly8gXHRyZXR1cm4gc3MgKyBcIiBcIiArIGxwYWQoY2FwcyhzKSwgOCkuc3Vic3RyKDAsIDgpLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHQvLyBcdC8vIH0sIFwiXCIpO1xuXHRcdFx0Ly8gfSxcblxuXHRcdFx0X19nZXRIZWFkZXJUZXh0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRcInRzdGFtcFwiLFxuXHRcdFx0XHRcdFwiaW5kZXhcIixcblx0XHRcdFx0XHRcImR1cmF0aW9uXCIsXG5cdFx0XHRcdFx0XCJwbGF5YmFja1wiLFxuXHRcdFx0XHRcdFwibWVkaWFcIixcblx0XHRcdFx0XHRcInRpbWVyXCIsXG5cdFx0XHRcdFx0XCJuZXh0XCIsXG5cdFx0XHRcdF0ubWFwKGZ1bmN0aW9uKHMsIGksIGEpIHtcblx0XHRcdFx0XHRyZXR1cm4gbHBhZChjYXBzKHMpLCA4KS5zdWJzdHIoMCwgOCkudG9VcHBlckNhc2UoKTtcblx0XHRcdFx0fSkuam9pbihcIiBcIik7XG5cdFx0XHR9LFxuXG5cdFx0XHRfX2xvZ1RpbWVyRXZlbnQ6IGZ1bmN0aW9uKGV2bmFtZSwgbXNnKSB7XG5cdFx0XHRcdHZhciBsb2dNc2cgPSBbXG5cdFx0XHRcdFx0dGhpcy5zb3VyY2VzLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0KHRoaXMudGltZXIuZ2V0RHVyYXRpb24oKSAqIC4wMDEpLnRvRml4ZWQoMyksXG5cdFx0XHRcdFx0dGhpcy5wbGF5YmFja1JlcXVlc3RlZCA/IFwiPj5cIiA6IFwiOjpcIixcblx0XHRcdFx0XHR0aGlzLm1lZGlhUGF1c2VkID8gXCJwYXVzZWRcIiA6XG5cdFx0XHRcdFx0KHRoaXMubWVkaWFXYWl0aW5nID8gXCJ3YWl0aW5nXCIgOiBcInBsYXlpbmdcIiksXG5cdFx0XHRcdFx0dGhpcy50aW1lci5nZXRTdGF0dXMoKSxcblx0XHRcdFx0XHR0aGlzLnNvdXJjZXMuZm9sbG93aW5nT3JGaXJzdCgpLmhhcyhcInByZWZldGNoZWRcIikgPyBcInJlYWR5XCIgOiBcInBlbmRpbmdcIlxuXHRcdFx0XHRdLm1hcChmdW5jdGlvbihzLCBpLCBhKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGxwYWQocywgOCkuc3Vic3RyKDAsIDgpLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRtc2cgJiYgbG9nTXNnLnB1c2gobXNnKTtcblx0XHRcdFx0bG9nTXNnID0gbG9nTXNnLmpvaW4oXCIgXCIpO1xuXG5cdFx0XHRcdHRoaXMuX19sb2dNZXNzYWdlKGxvZ01zZywgZXZuYW1lKTtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczo6WyVzXSAlc1wiLCB0aGlzLmNpZCwgZXZuYW1lLCBsb2dNc2cpO1xuXHRcdFx0fSxcblx0XHRcdF9wbGF5TWVkaWE6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLl9fbG9nVGltZXJFdmVudChcIm1lZGlhOnBsYXlcIik7XG5cdFx0XHRcdFNlcXVlbmNlUmVuZGVyZXIucHJvdG90eXBlLl9wbGF5TWVkaWEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0Ly8gdGhpcy5fX2xvZ1RpbWVyRXZlbnQoXCI8IG1lZGlhOnBsYXlcIik7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6Ol9wbGF5TWVkaWEoKVwiLCB0aGlzLmNpZCk7XG5cdFx0XHR9LFxuXHRcdFx0X3BhdXNlTWVkaWE6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLl9fbG9nVGltZXJFdmVudChcIm1lZGlhOnBhdXNlXCIpO1xuXHRcdFx0XHRTZXF1ZW5jZVJlbmRlcmVyLnByb3RvdHlwZS5fcGF1c2VNZWRpYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHQvLyB0aGlzLl9fbG9nVGltZXJFdmVudChcIjwgbWVkaWE6cGF1c2VcIik7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6Ol9wYXVzZU1lZGlhKClcIiwgdGhpcy5jaWQpO1xuXHRcdFx0fSxcblxuXHRcdFx0X29uVGltZXJTdGFydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuX19sb2dUaW1lckV2ZW50KFwidGltZXI6c3RhcnRcIik7XG5cdFx0XHRcdFNlcXVlbmNlUmVuZGVyZXIucHJvdG90eXBlLl9vblRpbWVyU3RhcnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdH0sXG5cdFx0XHRfb25UaW1lclJlc3VtZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuX19sb2dUaW1lckV2ZW50KFwidGltZXI6cmVzdW1lXCIpO1xuXHRcdFx0XHRTZXF1ZW5jZVJlbmRlcmVyLnByb3RvdHlwZS5fb25UaW1lclJlc3VtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0fSxcblx0XHRcdF9vblRpbWVyUGF1c2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLl9fbG9nVGltZXJFdmVudChcInRpbWVyOnBhdXNlXCIpO1xuXHRcdFx0XHRTZXF1ZW5jZVJlbmRlcmVyLnByb3RvdHlwZS5fb25UaW1lclBhdXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHR9LFxuXHRcdFx0X29uVGltZXJFbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLl9fbG9nVGltZXJFdmVudChcInRpbWVyOmVuZFwiKTtcblx0XHRcdFx0U2VxdWVuY2VSZW5kZXJlci5wcm90b3R5cGUuX29uVGltZXJFbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdH0sXG5cblx0XHRcdF91cGRhdGVJdGVtUHJvZ3Jlc3M6IGZ1bmN0aW9uKHByb2dyZXNzLCBzcmNJZHgpIHtcblx0XHRcdFx0aWYgKHByb2dyZXNzID09IDEpIHtcblx0XHRcdFx0XHR0aGlzLl9fbG9nVGltZXJFdmVudChcImxvYWQ6Y29tcGxldGVcIiwgXCJpdGVtIFwiICsgc3JjSWR4ICsgXCI6IGNvbXBsZXRlXCIpO1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0aWYgKHNyY0lkeCA9PT0gdGhpcy5zb3VyY2VzLnNlbGVjdGVkSW5kZXgpIHtcblx0XHRcdFx0XHR0aGlzLl9fbG9nVGltZXJFdmVudChcImxvYWQ6cHJvZ3Jlc3NcIiwgXCJpdGVtIFwiICsgc3JjSWR4ICsgXCI6IFwiICsgcHJvZ3Jlc3MpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFNlcXVlbmNlUmVuZGVyZXIucHJvdG90eXBlLl91cGRhdGVJdGVtUHJvZ3Jlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdH0sXG5cblx0XHRcdF9wcmVsb2FkQWxsSXRlbXM6IGZ1bmN0aW9uKHZpZXcpIHtcblx0XHRcdFx0dmlldy5fX2xvZ01lc3NhZ2Uodmlldy5jaWQgKyBcIjo6X3ByZWxvYWRBbGxJdGVtc1wiLCBcImxvYWQ6c3RhcnRcIik7XG5cdFx0XHRcdFNlcXVlbmNlUmVuZGVyZXIucHJvdG90eXBlLl9wcmVsb2FkQWxsSXRlbXMuYXBwbHkodmlldywgYXJndW1lbnRzKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cdH0pKFNlcXVlbmNlUmVuZGVyZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcXVlbmNlUmVuZGVyZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzQ29tcGlsZXIgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG52YXIgcGFydGlhbCQwID0gcmVxdWlyZSgnLi4vdGVtcGxhdGUvc3ZnL0Z1bGxzY3JlZW5TeW1ib2wuaGJzJyk7XG5IYW5kbGViYXJzQ29tcGlsZXIucmVnaXN0ZXJQYXJ0aWFsKCcuLi90ZW1wbGF0ZS9zdmcvRnVsbHNjcmVlblN5bWJvbC5oYnMnLCBwYXJ0aWFsJDApO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgaGVscGVyO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcInBsYWNlaG9sZGVyIHNpemluZ1xcXCI+PC9kaXY+XFxuPGRpdiBjbGFzcz1cXFwiY29udGVudCBtZWRpYS1ib3JkZXJcXFwiPlxcblx0PGRpdiBjbGFzcz1cXFwiY29udHJvbHMgY29udGVudC1zaXplXFxcIj5cXG5cdFx0PGNhbnZhcyBjbGFzcz1cXFwicHJvZ3Jlc3MtbWV0ZXJcXFwiPjwvY2FudmFzPlxcblx0PC9kaXY+XFxuXHQ8ZGl2IGNsYXNzPVxcXCJjcm9wLWJveCBtZWRpYS1zaXplXFxcIj5cXG5cdFx0PHZpZGVvIHdpZHRoPVxcXCIyNDBcXFwiIGhlaWdodD1cXFwiMTgwXFxcIiBtdXRlZCBwbGF5c2lubGluZT48L3ZpZGVvPlxcblx0XHQ8aW1nIGNsYXNzPVxcXCJwb3N0ZXIgZGVmYXVsdFxcXCIgYWx0PVxcXCJcIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy50ZXh0IHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC50ZXh0IDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSkse1wibmFtZVwiOlwidGV4dFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiIHdpZHRoPVxcXCIyNDBcXFwiIGhlaWdodD1cXFwiMTgwXFxcIiAvPlxcblx0PC9kaXY+XFxuXHQ8ZGl2IGNsYXNzPVxcXCJvdmVybGF5IG1lZGlhLXNpemUgcGxheS10b2dnbGUtaGl0YXJlYVxcXCI+XFxuXHRcdFx0PGNhbnZhcyBjbGFzcz1cXFwicGxheS10b2dnbGVcXFwiPjwvY2FudmFzPlxcblx0XHQ8YSBjbGFzcz1cXFwiZnVsbHNjcmVlbi10b2dnbGVcXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6KHZvaWQgMClcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKHBhcnRpYWxzW1wiLi4vdGVtcGxhdGUvc3ZnL0Z1bGxzY3JlZW5TeW1ib2wuaGJzXCJdLGRlcHRoMCx7XCJuYW1lXCI6XCIuLi90ZW1wbGF0ZS9zdmcvRnVsbHNjcmVlblN5bWJvbC5oYnNcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCJcXHRcXHRcXHRcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXHRcdDwvYT5cXG5cdDwvZGl2PlxcbjwvZGl2PlxcblwiO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLypnbG9iYWwgSFRNTE1lZGlhRWxlbWVudCwgTWVkaWFFcnJvciovXG4vKipcbiAqIEBtb2R1bGUgYXBwL3ZpZXcvcmVuZGVyL1ZpZGVvUmVuZGVyZXJcbiAqXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC92aWRlb1xuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTE1lZGlhRWxlbWVudFxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9HdWlkZS9FdmVudHMvTWVkaWFfZXZlbnRzXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0hUTUwvVXNpbmdfSFRNTDVfYXVkaW9fYW5kX3ZpZGVvXG4gKi9cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIEltcG9ydHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTpiYWNrYm9uZX0gKi9cbi8vIHZhciBCYWNrYm9uZSA9IHJlcXVpcmUoXCJiYWNrYm9uZVwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG5jb25zdCBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9yZW5kZXIvUGxheWFibGVSZW5kZXJlcn0gKi9cbmNvbnN0IFBsYXlhYmxlUmVuZGVyZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcmVuZGVyL1BsYXlhYmxlUmVuZGVyZXJcIik7XG4vKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvQ2FudmFzUHJvZ3Jlc3NNZXRlcn0gKi9cbmNvbnN0IFByb2dyZXNzTWV0ZXIgPSByZXF1aXJlKFwiYXBwL3ZpZXcvY29tcG9uZW50L0NhbnZhc1Byb2dyZXNzTWV0ZXJcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTphcHAvdmlldy9jb21wb25lbnQvUGxheVRvZ2dsZVN5bWJvbH0gKi9cbmNvbnN0IFBsYXlUb2dnbGVTeW1ib2wgPSByZXF1aXJlKFwiYXBwL3ZpZXcvY29tcG9uZW50L1BsYXlUb2dnbGVTeW1ib2xcIik7XG5cbi8vIHZhciBzdGFja0JsdXJNb25vID0gcmVxdWlyZShcInV0aWxzL2NhbnZhcy9iaXRtYXAvc3RhY2tCbHVyTW9ub1wiKTtcbi8vIHZhciBzdGFja0JsdXJSR0IgPSByZXF1aXJlKFwidXRpbHMvY2FudmFzL2JpdG1hcC9zdGFja0JsdXJSR0JcIik7XG5cbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkU3R5bGVOYW1lfSAqL1xuLy8gdmFyIHByZWZpeGVkU3R5bGVOYW1lID0gcmVxdWlyZShcInV0aWxzL3ByZWZpeGVkU3R5bGVOYW1lXCIpO1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvcHJlZml4ZWRFdmVudH0gKi9cbmNvbnN0IHByZWZpeGVkRXZlbnQgPSByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRFdmVudFwiKTtcblxuLy8gdmFyIHdoZW5WaWV3SXNBdHRhY2hlZCA9IHJlcXVpcmUoXCJhcHAvdmlldy9wcm9taXNlL3doZW5WaWV3SXNBdHRhY2hlZFwiKTtcbi8vIC8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG4vLyB2YXIgd2hlblNlbGVjdGlvbkRpc3RhbmNlSXMgPSByZXF1aXJlKFwiYXBwL3ZpZXcvcHJvbWlzZS93aGVuU2VsZWN0aW9uRGlzdGFuY2VJc1wiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIHByaXZhdGUgc3RhdGljXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGZ1bGxzY3JlZW5DaGFuZ2VFdmVudCA9IHByZWZpeGVkRXZlbnQoXCJmdWxsc2NyZWVuY2hhbmdlXCIsIGRvY3VtZW50KTtcbi8vIHZhciBmdWxsc2NyZWVuRXJyb3JFdmVudCA9IHByZWZpeGVkRXZlbnQoXCJmdWxsc2NyZWVuZXJyb3JcIiwgZG9jdW1lbnQpO1xuXG52YXIgZm9ybWF0VGltZWNvZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRpZiAoaXNOYU4odmFsdWUpKSByZXR1cm4gXCJcIjsgLy92YWx1ZSA9IDA7XG5cdGlmICh2YWx1ZSA+PSAzNjAwKSByZXR1cm4gKCh2YWx1ZSAvIDM2MDApIHwgMCkgKyBcIkhcIjtcblx0aWYgKHZhbHVlID49IDYwKSByZXR1cm4gKCh2YWx1ZSAvIDYwKSB8IDApICsgXCJNXCI7XG5cdC8vIGlmICh2YWx1ZSA+PSAxMCkgcmV0dXJuIFwiMFwiICsgKHZhbHVlIHwgMCkgKyBcIlNcIjtcblx0cmV0dXJuICh2YWx1ZSB8IDApICsgXCJTXCI7XG59O1xuXG52YXIgVklERU9fQ1JPUF9QWCA9IEdsb2JhbHMuVklERU9fQ1JPUF9QWDtcbnZhciBTWU5DX1RJTUVPVVRfTVMgPSAxMjAwO1xudmFyIFNZTkNfVEhSRVNIT0xEX01TID0gMTAwO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHR5cGUge21vZHVsZTphcHAvdmlldy9yZW5kZXIvVmlkZW9SZW5kZXJlcn1cbiAqL1xudmFyIFZpZGVvUmVuZGVyZXIgPSBQbGF5YWJsZVJlbmRlcmVyLmV4dGVuZCh7XG5cblx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXG5cdGNpZFByZWZpeDogXCJ2aWRlb1JlbmRlcmVyXCIsXG5cdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuXHRjbGFzc05hbWU6IFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLmNsYXNzTmFtZSArIFwiIHZpZGVvLWl0ZW1cIixcblx0LyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cblx0dGVtcGxhdGU6IHJlcXVpcmUoXCIuL1ZpZGVvUmVuZGVyZXIuaGJzXCIpLFxuXG5cdC8vIGV2ZW50czogKGZ1bmN0aW9uKCkge1xuXHQvLyBcdHZhciByZXQgPSB7fTtcblx0Ly8gXHRyZXRbUGxheWFibGVSZW5kZXJlci5DTElDS19FVkVOVCArIFwiIC5mdWxsc2NyZWVuLXRvZ2dsZVwiXSA9IFwiX29uRnVsbHNjcmVlblRvZ2dsZVwiO1xuXHQvLyBcdHJldHVybiByZXQ7XG5cdC8vIH0oKSksXG5cblx0Ly8gZXZlbnRzOiBmdW5jdGlvbigpIHtcblx0Ly8gXHR2YXIgZXZlbnRzID0ge307XG5cdC8vIFx0ZXZlbnRzW1BsYXlhYmxlUmVuZGVyZXIuQ0xJQ0tfRVZFTlQgKyBcIiAuZnVsbHNjcmVlbi10b2dnbGVcIl0gPSBcIl9vbkZ1bGxzY3JlZW5Ub2dnbGVcIjtcblx0Ly8gXHRyZXR1cm4gXy5leHRlbmQoZXZlbnRzLCBfLnJlc3VsdCh0aGlzLCBQbGF5YWJsZVJlbmRlcmVyLnByb3RvdHlwZS5ldmVudHMpKTtcblx0Ly8gfSxcblx0Ly8gZXZlbnRzOiB7XG5cdC8vIFx0XCJjbGljayAuZnVsbHNjcmVlbi10b2dnbGVcIjogXCJfb25GdWxsc2NyZWVuVG9nZ2xlXCIsXG5cdC8vIH0sXG5cblx0cHJvcGVydGllczoge1xuXHRcdGZ1bGxzY3JlZW5Ub2dnbGU6IHtcblx0XHRcdC8qKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gKi9cblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9mdWxsc2NyZWVuVG9nZ2xlIHx8ICh0aGlzLl9mdWxsc2NyZWVuVG9nZ2xlID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmZ1bGxzY3JlZW4tdG9nZ2xlXCIpKTtcblx0XHRcdH1cblx0XHR9LFxuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0aW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuXHRcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRfLmJpbmRBbGwodGhpcyxcblx0XHRcdFwiX3VwZGF0ZVBsYXliYWNrU3RhdGVcIixcblx0XHRcdFwiX3VwZGF0ZUN1cnJUaW1lVmFsdWVcIixcblx0XHRcdFwiX3VwZGF0ZUJ1ZmZlcmVkVmFsdWVcIixcblx0XHRcdFwiX29uTWVkaWFFcnJvclwiLFxuXHRcdFx0XCJfb25NZWRpYUVuZGVkXCIsXG5cdFx0XHQvLyBcIl9vbk1lZGlhUGxheWluZ09uY2VcIixcblx0XHRcdFwiX29uRnVsbHNjcmVlbkNoYW5nZVwiLFxuXHRcdFx0XCJfb25GdWxsc2NyZWVuVG9nZ2xlXCJcblx0XHQpO1xuXHRcdF8uYmluZEFsbCh0aGlzLFxuXHRcdFx0XCJfcGxheWJhY2tUaW1lb3V0Rm5fcGxheWluZ1wiLFxuXHRcdFx0XCJfcGxheWJhY2tUaW1lb3V0Rm5fd2FpdGluZ1wiXG5cdFx0KTtcblx0XHQvLyB2YXIgb25QZWVyU2VsZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly8gXHR0aGlzLmNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICh0aGlzLmdldFNlbGVjdGlvbkRpc3RhbmNlKCkgPiAxKT8gXCJub25lXCI6IFwiXCI7XG5cdFx0Ly8gfTtcblx0XHQvLyB0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwuY29sbGVjdGlvbiwgXCJzZWxlY3Q6b25lIHNlbGVjdDpub25lXCIsIG9uUGVlclNlbGVjdCk7XG5cdFx0Ly8gb25QZWVyU2VsZWN0KCk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcblx0ICogY2hpbGRyZW5cblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRjcmVhdGVDaGlsZHJlbjogZnVuY3Rpb24oKSB7XG5cdFx0UGxheWFibGVSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlQ2hpbGRyZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2Vob2xkZXJcIik7XG5cdFx0Ly8gdGhpcy5vdmVybGF5ID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcblx0XHR0aGlzLnZpZGVvID0gdGhpcy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCJ2aWRlb1wiKTtcblx0XHQvLyB0aGlzLnZpZGVvLmxvb3AgPSB0aGlzLm1vZGVsLmF0dHJzKCkuaGFzT3duUHJvcGVydHkoXCJAdmlkZW8tbG9vcFwiKTtcblxuXHRcdC8vIHRoaXMudmlkZW8uc2V0QXR0cmlidXRlKFwibXV0ZWRcIiwgXCJtdXRlZFwiKTtcblx0XHQvLyB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZShcInBsYXlzaW5saW5lXCIsIFwicGxheXNpbmxpbmVcIik7XG5cdFx0Ly8gaWYgKHRoaXMubW9kZWwuYXR0cihcIkB2aWRlby1sb29wXCIpICE9PSB2b2lkIDApIHtcblx0XHQvLyBcdHRoaXMudmlkZW8uc2V0QXR0cmlidXRlKFwibG9vcFwiLCBcImxvb3BcIik7XG5cdFx0Ly8gfVxuXHRcdHRoaXMudmlkZW8uc2V0QXR0cmlidXRlKFwicHJlbG9hZFwiLCBcIm5vbmVcIik7XG5cdFx0aWYgKHRoaXMudmlkZW8uY29udHJvbExpc3QpIHRoaXMudmlkZW8uY29udHJvbExpc3QuYWRkKFwibm9kb3dubG9hZFwiKTtcblxuXHRcdC8vIHRoaXMudmlkZW8ubXV0ZWQgPSB0cnVlO1xuXHRcdC8vIHRoaXMudmlkZW8ucGxheXNpbmxpbmUgPSB0cnVlO1xuXHRcdC8vIHRoaXMudmlkZW8ucHJlbG9hZCA9IFwiYXV0b1wiO1xuXHRcdHRoaXMudmlkZW8ubG9vcCA9IHRoaXMubW9kZWwuYXR0cihcIkB2aWRlby1sb29wXCIpICE9PSB2b2lkIDA7XG5cdFx0dGhpcy52aWRlby5zcmMgPSB0aGlzLmZpbmRQbGF5YWJsZVNvdXJjZSh0aGlzLnZpZGVvKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQgKiBsYXlvdXQvcmVuZGVyXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdG1lYXN1cmU6IGZ1bmN0aW9uKCkge1xuXHRcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLm1lYXN1cmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdC8vIE5PVEU6IFZlcnRpY2FsIDFweCB2aWRlbyBjcm9wXG5cdFx0Ly8gLSBDcm9wcGVkIGluIENTUzogdmlkZW8sIC5wb3N0ZXIgeyBtYXJnaW4tdG9wOiAtMXB4OyBtYXJnaW4tYm90dG9tOiAtMXB4O31cblx0XHQvLyAtIENyb3BwZWQgaGVpZ2h0IGlzIGFkanVzdGVkIGluIG1ldHJpY3Mgb2JqXG5cdFx0Ly8gLSBDcm9wIGFtb3VudCBhZGRlZCBiYWNrIHRvIGFjdHVhbCB2aWRlbyBvbiByZW5kZXIoKVxuXHRcdHRoaXMubWV0cmljcy5tZWRpYS5oZWlnaHQgKz0gVklERU9fQ1JPUF9QWCAqIDI7XG5cdFx0dGhpcy5tZXRyaWNzLmNvbnRlbnQuaGVpZ2h0ICs9IFZJREVPX0NST1BfUFggKiAyO1xuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblx0XHRQbGF5YWJsZVJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuXHRcdHZhciBlbHMsIGVsLCBpLCBjc3NXLCBjc3NIO1xuXHRcdHZhciBpbWcgPSB0aGlzLmRlZmF1bHRJbWFnZTtcblx0XHR2YXIgY29udGVudCA9IHRoaXMuY29udGVudDtcblxuXHRcdC8vIG1lZGlhLXNpemVcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRjc3NXID0gdGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoICsgXCJweFwiO1xuXHRcdGNzc0ggPSB0aGlzLm1ldHJpY3MubWVkaWEuaGVpZ2h0ICsgXCJweFwiO1xuXG5cdFx0ZWxzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1lZGlhLXNpemVcIik7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZWwgPSBlbHMuaXRlbShpKTtcblx0XHRcdGVsLnN0eWxlLndpZHRoID0gY3NzVztcblx0XHRcdGVsLnN0eWxlLmhlaWdodCA9IGNzc0g7XG5cdFx0fVxuXG5cdFx0Y29udGVudC5zdHlsZS53aWR0aCA9IGNzc1c7XG5cdFx0Y29udGVudC5zdHlsZS5oZWlnaHQgPSAodGhpcy5tZXRyaWNzLm1lZGlhLmhlaWdodCArIFZJREVPX0NST1BfUFgpICsgXCJweFwiO1xuXG5cdFx0Ly8gY29udGVudC1wb3NpdGlvblxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHZhciBjc3NYLCBjc3NZO1xuXHRcdGNzc1ggPSB0aGlzLm1ldHJpY3MuY29udGVudC54ICsgXCJweFwiO1xuXHRcdGNzc1kgPSB0aGlzLm1ldHJpY3MuY29udGVudC55ICsgXCJweFwiO1xuXHRcdGNvbnRlbnQuc3R5bGUubGVmdCA9IGNzc1g7XG5cdFx0Y29udGVudC5zdHlsZS50b3AgPSBjc3NZO1xuXG5cdFx0ZWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbHNcIik7XG5cdFx0Ly8gZWwuc3R5bGUubGVmdCA9IGNzc1g7XG5cdFx0Ly8gY29udHJvbHMuc3R5bGUudG9wID0gY3NzWTtcblx0XHRlbC5zdHlsZS53aWR0aCA9IHRoaXMubWV0cmljcy5jb250ZW50LndpZHRoICsgXCJweFwiO1xuXHRcdGVsLnN0eWxlLmhlaWdodCA9IHRoaXMubWV0cmljcy5jb250ZW50LmhlaWdodCArIFwicHhcIjtcblxuXHRcdC8vIC8vIGNvbnRlbnQtc2l6ZVxuXHRcdC8vIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIGNzc1cgPSB0aGlzLm1ldHJpY3MuY29udGVudC53aWR0aCArIFwicHhcIjtcblx0XHQvLyBjc3NIID0gdGhpcy5tZXRyaWNzLmNvbnRlbnQuaGVpZ2h0ICsgXCJweFwiO1xuXHRcdC8vXG5cdFx0Ly8gZWxzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRlbnQtc2l6ZVwiKTtcblx0XHQvLyBmb3IgKGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gXHRlbCA9IGVscy5pdGVtKGkpO1xuXHRcdC8vIFx0ZWwuc3R5bGUud2lkdGggPSBjc3NXO1xuXHRcdC8vIFx0ZWwuc3R5bGUuaGVpZ2h0ID0gY3NzSDtcblx0XHQvLyB9XG5cblx0XHQvLyBOT1RFOiBlbGVtZW50cyBiZWxvdyBtdXN0IHVzZSB2aWRlbydzIFVOQ1JPUFBFRCBoZWlnaHQsIHNvICsycHhcblx0XHR0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMubWV0cmljcy5tZWRpYS53aWR0aCk7XG5cdFx0dGhpcy52aWRlby5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5tZXRyaWNzLm1lZGlhLmhlaWdodCAtIFZJREVPX0NST1BfUFggKiAyKTtcblx0XHRpbWcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgdGhpcy5tZXRyaWNzLm1lZGlhLndpZHRoKTtcblx0XHRpbWcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHRoaXMubWV0cmljcy5tZWRpYS5oZWlnaHQgLSBWSURFT19DUk9QX1BYICogMik7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuXHQgKiBpbml0aWFsaXplQXN5bmNcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0aW5pdGlhbGl6ZUFzeW5jOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpXG5cdFx0XHQudGhlbihQbGF5YWJsZVJlbmRlcmVyLndoZW5TZWxlY3Rpb25Jc0NvbnRpZ3VvdXMpXG5cdFx0XHQudGhlbihQbGF5YWJsZVJlbmRlcmVyLndoZW5TY3JvbGxpbmdFbmRzKVxuXHRcdFx0LnRoZW4oUGxheWFibGVSZW5kZXJlci53aGVuVmlld0lzQXR0YWNoZWQpXG5cdFx0XHQudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OmluaXRpYWxpemVBc3luYyBbYXR0YWNoZWQsIHNjcm9sbGVuZCwgc2VsZWN0ZWQgPiAlbywgcHJlbG9hZDolc10gKCclbycpXCIsIHZpZXcuY2lkLCB2aWV3Lm1vZGVsLmdldERpc3RhbmNlVG9TZWxlY3RlZCgpLCB2aWV3LnZpZGVvLnByZWxvYWQsIHZpZXcubW9kZWwuZ2V0KFwibmFtZVwiKSk7XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKFtcblx0XHRcdFx0XHRcdFBsYXlhYmxlUmVuZGVyZXIud2hlbkRlZmF1bHRJbWFnZUxvYWRzKHZpZXcpLFxuXHRcdFx0XHRcdFx0dmlldy53aGVuVmlkZW9IYXNNZXRhZGF0YSh2aWV3KSxcblx0XHRcdFx0XHRdKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHZpZXc7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pXG5cdFx0XHQudGhlbihcblx0XHRcdFx0ZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OmluaXRpYWxpemVBc3luYyBbZGVmYXVsdEltYWdlLCBwcmVsb2FkOiVzXSAoJyVvJylcIiwgdmlldy5jaWQsIHZpZXcudmlkZW8ucHJlbG9hZCwgdmlldy5tb2RlbC5nZXQoXCJuYW1lXCIpKTtcblx0XHRcdFx0XHR2aWV3LmluaXRpYWxpemVQbGF5YWJsZSgpO1xuXHRcdFx0XHRcdC8vIHZpZXcudXBkYXRlT3ZlcmxheSh2aWV3LmRlZmF1bHRJbWFnZSwgdmlldy5wbGF5VG9nZ2xlKTsgLy92aWV3Lm92ZXJsYXkpO1xuXHRcdFx0XHRcdHZpZXcubGlzdGVuVG9TZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRyZXR1cm4gdmlldztcblx0XHRcdFx0fSk7XG5cblx0XHQvLyB2aWRlb0VsLnNldEF0dHJpYnV0ZShcInByZWxvYWRcIiwgXCJtZXRhZGF0YVwiKTtcblx0fSxcblxuXHRpbml0aWFsaXplUGxheWFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIFdoZW4gc2VsZWN0ZWQgZm9yIHRoZSBmaXJzdCB0aW1lXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0UGxheWFibGVSZW5kZXJlci53aGVuU2VsZWN0aW9uRGlzdGFuY2VJcyh0aGlzLCAwKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odmlldykge1xuXHRcdFx0XHR2aWV3LnZpZGVvLnNldEF0dHJpYnV0ZShcInByZWxvYWRcIiwgXCJhdXRvXCIpO1xuXHRcdFx0XHR2aWV3LnZpZGVvLnByZWxvYWQgPSBcImF1dG9cIjtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczo6aW5pdGlhbGl6ZUFzeW5jIFtzZWxlY3RlZCwgcHJlbG9hZDolc10gKCclbycpXCIsIHZpZXcuY2lkLCB2aWV3LnZpZGVvLnByZWxvYWQsIHZpZXcubW9kZWwuZ2V0KFwibmFtZVwiKSk7XG5cdFx0XHRcdHJldHVybiB2aWV3O1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihyZWFzb24pIHtcblx0XHRcdFx0aWYgKHJlYXNvbiBpbnN0YW5jZW9mIFBsYXlhYmxlUmVuZGVyZXIuVmlld0Vycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCIlczo6JXNcIiwgcmVhc29uLnZpZXcuY2lkLCByZWFzb24ubWVzc2FnZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKHJlYXNvbik7XG5cdFx0XHRcdFx0Ly8gcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdC8vIHBsYXktdG9nZ2xlLXN5bWJvbFxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wgPSBuZXcgUGxheVRvZ2dsZVN5bWJvbChfLmV4dGVuZCh7XG5cdFx0XHRlbDogdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLnBsYXktdG9nZ2xlXCIpXG5cdFx0fSwgdGhpcy5fcGxheVRvZ2dsZVN5bWJvbCB8fCB7fSkpO1xuXG5cdFx0Ly8gdGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5zZXRJbWFnZVNvdXJjZSh0aGlzLmRlZmF1bHRJbWFnZSwgMCwgMCk7XG5cdFx0Ly8gdGhpcy5saXN0ZW5Ub0VsZW1lbnRPbmNlKHRoaXMudmlkZW8sIFwidGltZXVwZGF0ZVwiLCBmdW5jdGlvbihldikge1xuXHRcdC8vIFx0dGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5zZXRJbWFnZVNvdXJjZSh0aGlzLnZpZGVvKTtcblx0XHQvLyB9KTtcblxuXHRcdC8vIHByb2dyZXNzLW1ldGVyXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0dGhpcy5wcm9ncmVzc01ldGVyID0gbmV3IFByb2dyZXNzTWV0ZXIoe1xuXHRcdFx0ZWw6IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5wcm9ncmVzcy1tZXRlclwiKSxcblx0XHRcdGNvbG9yOiB0aGlzLm1vZGVsLmF0dHIoXCJjb2xvclwiKSxcblx0XHRcdC8vIGJhY2tncm91bmRDb2xvcjogdGhpcy5tb2RlbC5hdHRyKFwiYmFja2dyb3VuZC1jb2xvclwiKSxcblx0XHRcdG1heFZhbHVlczoge1xuXHRcdFx0XHRhbW91bnQ6IHRoaXMudmlkZW8uZHVyYXRpb24sXG5cdFx0XHRcdGF2YWlsYWJsZTogdGhpcy52aWRlby5kdXJhdGlvbixcblx0XHRcdH0sXG5cdFx0XHRsYWJlbEZuOiAoZnVuY3Rpb24odmFsdWUsIHRvdGFsKSB7XG5cdFx0XHRcdGlmICghdGhpcy5fc3RhcnRlZCB8fCB0aGlzLnZpZGVvLmVuZGVkIHx8IGlzTmFOKHZhbHVlKSkge1xuXHRcdFx0XHRcdHJldHVybiBmb3JtYXRUaW1lY29kZSh0b3RhbCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIXRoaXMucGxheWJhY2tSZXF1ZXN0ZWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gR2xvYmFscy5QQVVTRV9DSEFSO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmb3JtYXRUaW1lY29kZSh0b3RhbCAtIHZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSkuYmluZCh0aGlzKVxuXHRcdH0pO1xuXHRcdC8vIHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sc1wiKS5hcHBlbmRDaGlsZCh0aGlzLnByb2dyZXNzTWV0ZXIuZWwpO1xuXHRcdC8vIHZhciBlbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5wcm9ncmVzcy1tZXRlclwiKTtcblx0XHQvLyBlbC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLnByb2dyZXNzTWV0ZXIuZWwsIGVsKTtcblx0XHQvLyB2YXIgcGFyZW50RWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbHNcIik7XG5cdFx0Ly8gcGFyZW50RWwuaW5zZXJ0QmVmb3JlKHRoaXMucHJvZ3Jlc3NNZXRlci5lbCwgcGFyZW50RWwuZmlyc3RDaGlsZCk7XG5cblx0XHQvLyB0aGlzLl9zZXRQbGF5VG9nZ2xlU3ltYm9sKFwicGxheS1zeW1ib2xcIik7XG5cdFx0dGhpcy5fcmVuZGVyUGxheWJhY2tTdGF0ZSgpO1xuXG5cdFx0Ly8gbGlzdGVuIHRvIHZpZGVvIGV2ZW50c1xuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIHRoaXMudmlkZW8ucG9zdGVyID0gdGhpcy5tb2RlbC5nZXQoXCJzb3VyY2VcIikuZ2V0KFwib3JpZ2luYWxcIik7XG5cdFx0dGhpcy5hZGRNZWRpYUxpc3RlbmVycygpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG5cdCAqIHdoZW5WaWRlb0hhc01ldGFkYXRhIHByb21pc2Vcblx0ICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0d2hlblZpZGVvSGFzTWV0YWRhdGE6IGZ1bmN0aW9uKHZpZXcpIHtcblx0XHQvLyBOT1RFOiBub3QgcHJldHR5ICEhIVxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdHZhciB2aWRlb0VsID0gdmlldy52aWRlbztcblx0XHRcdHZhciBldmVudEhhbmRsZXJzID0ge1xuXHRcdFx0XHRsb2FkZWRtZXRhZGF0YTogZnVuY3Rpb24oZXYpIHtcblx0XHRcdFx0XHRpZiAoZXYpIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIlczo6d2hlblZpZGVvSGFzTWV0YWRhdGEgWyVzXSAlc1wiLCB2aWV3LmNpZCwgXCJyZXNvbHZlZFwiLCBldiA/IGV2LnR5cGUgOiBcInN5bmNcIik7XG5cdFx0XHRcdFx0cmVzb2x2ZSh2aWV3KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdFx0aWYgKGV2KSByZW1vdmVFdmVudExpc3RlbmVycygpO1xuXHRcdFx0XHRcdHJlamVjdChuZXcgUGxheWFibGVSZW5kZXJlci5WaWV3RXJyb3IodmlldywgbmV3IEVycm9yKFwid2hlblZpZGVvSGFzTWV0YWRhdGE6IHZpZXcgd2FzIHJlbW92ZWRcIikpKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdFx0aWYgKGV2KSByZW1vdmVFdmVudExpc3RlbmVycygpO1xuXHRcdFx0XHRcdHZhciBlcnI7XG5cdFx0XHRcdFx0aWYgKHZpZGVvRWwuZXJyb3IpIHtcblx0XHRcdFx0XHRcdGVyciA9IG5ldyBFcnJvcihfLmludmVydChNZWRpYUVycm9yKVt2aWRlb0VsLmVycm9yLmNvZGVdKTtcblx0XHRcdFx0XHRcdGVyci5pbmZvQ29kZSA9IHZpZGVvRWwuZXJyb3IuY29kZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZXJyID0gbmV3IEVycm9yKFwiVW5zcGVjaWZpZWQgZXJyb3JcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVyci5pbmZvU3JjID0gdmlkZW9FbC5zcmM7XG5cdFx0XHRcdFx0ZXJyLmxvZ01lc3NhZ2UgPSBcIndoZW5WaWRlb0hhc01ldGFkYXRhOiBcIiArIGVyci5uYW1lICsgXCIgXCIgKyBlcnIuaW5mb1NyYztcblx0XHRcdFx0XHRlcnIubG9nRXZlbnQgPSBldjtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fSxcblx0XHRcdH07XG5cblx0XHRcdC8vICAodmlkZW9FbC5wcmVsb2FkID09IFwiYXV0b1wiICYmIHZpZGVvRWwucmVhZHlTdGF0ZSA+PSBIVE1MTWVkaWFFbGVtZW50LkhBVkVfQ1VSUkVOVF9EQVRBKVxuXHRcdFx0Ly8gXHQodmlkZW9FbC5wcmVsb2FkID09IFwibWV0YWRhdGFcIiAmJiB2aWRlb0VsLnJlYWR5U3RhdGUgPj0gSFRNTE1lZGlhRWxlbWVudC5IQVZFX01FVEFEQVRBKVxuXG5cdFx0XHRpZiAodmlkZW9FbC5lcnJvcikge1xuXHRcdFx0XHRldmVudEhhbmRsZXJzLmVycm9yKCk7XG5cdFx0XHR9IGVsc2UgaWYgKHZpZGVvRWwucmVhZHlTdGF0ZSA+PSBIVE1MTWVkaWFFbGVtZW50LkhBVkVfTUVUQURBVEEpIHtcblx0XHRcdFx0ZXZlbnRIYW5kbGVycy5sb2FkZWRtZXRhZGF0YSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIHNvdXJjZXMgPSB2aWRlb0VsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzb3VyY2VcIik7XG5cdFx0XHRcdHZhciBlcnJUYXJnZXQgPSBzb3VyY2VzLmxlbmd0aCA+IDAgPyBzb3VyY2VzLml0ZW0oc291cmNlcy5sZW5ndGggLSAxKSA6IHZpZGVvRWw7XG5cdFx0XHRcdHZhciBlcnJDYXB0dXJlID0gZXJyVGFyZ2V0ID09PSB2aWRlb0VsOyAvLyB1c2UgY2FwdHVyZSB3aXRoIEhUTUxNZWRpYUVsZW1lbnRcblxuXHRcdFx0XHR2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRlcnJUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGV2ZW50SGFuZGxlcnMuZXJyb3IsIGVyckNhcHR1cmUpO1xuXHRcdFx0XHRcdGZvciAodmFyIGV2IGluIGV2ZW50SGFuZGxlcnMpIHtcblx0XHRcdFx0XHRcdGlmIChldiAhPT0gXCJlcnJvclwiICYmIGV2ZW50SGFuZGxlcnMuaGFzT3duUHJvcGVydHkoZXYpKSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldiwgZXZlbnRIYW5kbGVyc1tldl0sIGZhbHNlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGVyclRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZXZlbnRIYW5kbGVycy5lcnJvciwgZXJyQ2FwdHVyZSk7XG5cdFx0XHRcdGZvciAodmFyIGV2IGluIGV2ZW50SGFuZGxlcnMpIHtcblx0XHRcdFx0XHRpZiAoZXYgIT09IFwiZXJyb3JcIiAmJiBldmVudEhhbmRsZXJzLmhhc093blByb3BlcnR5KGV2KSkge1xuXHRcdFx0XHRcdFx0dmlkZW9FbC5hZGRFdmVudExpc3RlbmVyKGV2LCBldmVudEhhbmRsZXJzW2V2XSwgZmFsc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvKiBOT1RFOiBNUyBFZGdlIGlnbm9yZXMganMgcHJvcGVydHksIHVzaW5nIHNldEF0dHJpYnV0ZSAqL1xuXHRcdFx0XHR2aWRlb0VsLnNldEF0dHJpYnV0ZShcInByZWxvYWRcIiwgXCJtZXRhZGF0YVwiKTtcblx0XHRcdFx0dmlkZW9FbC5wcmVsb2FkID0gXCJtZXRhZGF0YVwiO1xuXG5cdFx0XHRcdC8vIHZpZGVvRWwuc2V0QXR0cmlidXRlKFwicG9zdGVyXCIsIHZpZXcuZ2V0KFwic291cmNlXCIpLmdldChcIm9yaWdpbmFsXCIpKTtcblx0XHRcdFx0Ly8gdmlkZW9FbC5zZXRBdHRyaWJ1dGUoXCJwcmVsb2FkXCIsIFwibWV0YWRhdGFcIik7XG5cdFx0XHRcdC8vIHZpZGVvRWwucG9zdGVyID0gdmlldy5tb2RlbC5nZXQoXCJzb3VyY2VcIikuZ2V0KFwib3JpZ2luYWxcIik7XG5cdFx0XHRcdC8vIHZpZGVvRWwubG9vcCA9IHZpZXcubW9kZWwuYXR0cihcIkB2aWRlby1sb29wXCIpICE9PSB2b2lkIDA7XG5cdFx0XHRcdC8vIHZpZGVvRWwuc3JjID0gdmlldy5maW5kUGxheWFibGVTb3VyY2UodmlkZW9FbCk7XG5cdFx0XHRcdC8vIHZpZGVvRWwubG9hZCgpO1xuXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiJXM6OndoZW5WaWRlb0hhc01ldGFkYXRhIFtwcmVsb2FkOiVzXVwiLCB2aWV3LmNpZCwgdmlkZW9FbC5wcmVsb2FkKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRmaW5kUGxheWFibGVTb3VyY2U6IGZ1bmN0aW9uKHZpZGVvKSB7XG5cdFx0dmFyIHBsYXlhYmxlID0gdGhpcy5tb2RlbC5nZXQoXCJzb3VyY2VzXCIpLmZpbmQoZnVuY3Rpb24oc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gL152aWRlb1xcLy8udGVzdChzb3VyY2UuZ2V0KFwibWltZVwiKSkgJiYgdmlkZW8uY2FuUGxheVR5cGUoc291cmNlLmdldChcIm1pbWVcIikpICE9IFwiXCI7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBsYXlhYmxlID8gcGxheWFibGUuZ2V0KFwib3JpZ2luYWxcIikgOiBcIlwiO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgKiBQbGF5YWJsZVJlbmRlcmVyIGltcGxlbWVudGF0aW9uXG5cdCAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIC8qKiBAb3ZlcnJpZGUgKi9cblx0Ly8gX2NhblJlc3VtZVBsYXliYWNrOiBmdW5jdGlvbigpIHtcblx0Ly8gXHRyZXR1cm4gUGxheWFibGVSZW5kZXJlci5wcm90b3R5cGUuX2NhblJlc3VtZVBsYXliYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgJiYgdGhpcy52aWRlby5yZWFkeVN0YXRlID49IEhUTUxNZWRpYUVsZW1lbnQuSEFWRV9DVVJSRU5UX0RBVEE7XG5cdC8vIH0sXG5cblx0LyoqIEBvdmVycmlkZSBpbml0aWFsIHZhbHVlICovXG5cdF9wbGF5YmFja1JlcXVlc3RlZDogZmFsc2UsXG5cblx0LyoqIEBvdmVycmlkZSAqL1xuXHRfaXNNZWRpYVBhdXNlZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMudmlkZW8ucGF1c2VkO1xuXHR9LFxuXG5cdC8qKiBAb3ZlcnJpZGUgKi9cblx0X3BsYXlNZWRpYTogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMudmlkZW8ucmVhZHlTdGF0ZSA+PSBIVE1MTWVkaWFFbGVtZW50LkhBVkVfQ1VSUkVOVF9EQVRBICYmIHRoaXMudmlkZW8uc2Vla2FibGUubGVuZ3RoID09IDApIHtcblx0XHRcdGNvbnNvbGUud2Fybih0aGlzLmNpZCwgXCJXVEYhIGdvdCB2aWRlbyBkYXRhLCBidXQgY2Fubm90IHNlZWssIGNhbGxpbmcgbG9hZCgpXCIpO1xuXHRcdFx0Ly8gdGhpcy5fbG9nTWVzc2FnZShcImNhbGw6bG9hZFwiLCBcImdvdCB2aWRlbyBkYXRhLCBidXQgY2Fubm90IHNlZWssIGNhbGxpbmcgbG9hZCgpXCIsIFwib3JhbmdlXCIpO1xuXHRcdFx0aWYgKF8uaXNGdW5jdGlvbih0aGlzLnZpZGVvLmxvYWQpKSB7XG5cdFx0XHRcdHRoaXMudmlkZW8ubG9hZCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvKiBOT1RFOiBsb29wIGlzIGZhbHNlLCByZXN0YXJ0IGZyb20gZW5kIG9uIHJlcXVlc3QgKi9cblx0XHRlbHNlIGlmICh0aGlzLnZpZGVvLmVuZGVkKSB7XG5cdFx0XHR0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gdGhpcy52aWRlby5zZWVrYWJsZS5zdGFydCgwKTtcblx0XHR9XG5cblx0XHQvKiBpZiBub3QgZW5vdWdoIGRhdGEgKi9cblx0XHRpZiAodGhpcy52aWRlby5yZWFkeVN0YXRlIDwgSFRNTE1lZGlhRWxlbWVudC5IQVZFX0VOT1VHSF9EQVRBKSB7XG5cdFx0XHRpZiAodGhpcy52aWRlby5uZXR3b3JrU3RhdGUgPT0gSFRNTE1lZGlhRWxlbWVudC5ORVRXT1JLX0lETEUpIHtcblx0XHRcdFx0dGhpcy52aWRlby5sb2FkKCk7XG5cdFx0XHR9IC8vZWxzZSB7XG5cdFx0XHQvLyB2YXIgX3BsYXlTdGFtcCA9IHRoaXMuX3BsYXliYWNrQ291bnQ7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIiVzOjpfcGxheU1lZGlhICVzIHdhaXRpbmcgWyMlc11cIiwgdGhpcy5jaWQsIHRoaXMuX2lzTWVkaWFXYWl0aW5nKCkgPyBcImNvbnRpbnVlXCIgOiBcImJlZ2luXCIsIF9wbGF5U3RhbXApO1xuXHRcdFx0Ly9cblx0XHRcdC8vIHRoaXMubGlzdGVuVG9FbGVtZW50T25jZSh0aGlzLnZpZGVvLCBcImNhbnBsYXl0aHJvdWdoXCIsIGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHQvLyBcdGNvbnNvbGUubG9nKFwiJXM6Ol9wbGF5TWVkaWEgZW5kIHdhaXRpbmcgWyMlc11cIiwgdGhpcy5jaWQsIF9wbGF5U3RhbXApO1xuXHRcdFx0Ly9cblx0XHRcdC8vIFx0dGhpcy5fdG9nZ2xlV2FpdGluZyhmYWxzZSk7XG5cdFx0XHQvLyBcdC8vIHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgJiYgdGhpcy52aWRlby5wbGF5KCk7XG5cdFx0XHQvLyBcdHRoaXMuX3ZhbGlkYXRlUGxheWJhY2soKTtcblx0XHRcdC8vIH0pO1xuXHRcdFx0Ly99XG5cdFx0XHQvKiBOT1RFOiBvbiBcImNhbnBsYXl0aHJvdWdoXCIgX3BsYXlNZWRpYSgpIHdpbGwgYmUgY2FsbGVkIGFnYWluIGlmIHN0aWxsIHJlcXVpcmVkICovXG5cdFx0XHR0aGlzLl90b2dnbGVXYWl0aW5nKHRydWUpO1xuXHRcdH1cblx0XHQvKiBwbGF5ICovXG5cdFx0ZWxzZSB7XG5cdFx0XHQvKiBOT1RFOiBjdXJyZW50IGJyb3dzZXJzIHJldHVybiBhIHByb21pc2UgKi9cblx0XHRcdHRoaXMudmlkZW8ucGxheSgpO1xuXHRcdH1cblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdF9wYXVzZU1lZGlhOiBmdW5jdGlvbigpIHtcblx0XHQvLyB0aGlzLl9zZXRQbGF5VG9nZ2xlU3ltYm9sKFwicGxheS1zeW1ib2xcIik7XG5cdFx0dGhpcy52aWRlby5wYXVzZSgpO1xuXHRcdC8vIHRoaXMuX3JlbmRlclBsYXliYWNrU3RhdGUoKTtcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogRE9NIGV2ZW50c1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfbGlzdGVuV2hpbGVTZWxlY3RlZDogZnVuY3Rpb24oKSB7XG5cdFx0UGxheWFibGVSZW5kZXJlci5wcm90b3R5cGUuX2xpc3RlbldoaWxlU2VsZWN0ZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR0aGlzLmZ1bGxzY3JlZW5Ub2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdHRoaXMuX3RvZ2dsZUV2ZW50LCB0aGlzLl9vbkZ1bGxzY3JlZW5Ub2dnbGUsIGZhbHNlKTtcblx0fSxcblxuXHRfc3RvcExpc3RlbmluZ1doaWxlU2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLl9zdG9wTGlzdGVuaW5nV2hpbGVTZWxlY3RlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHRoaXMuZnVsbHNjcmVlblRvZ2dsZS5yZW1vdmVFdmVudExpc3RlbmVyKFxuXHRcdFx0dGhpcy5fdG9nZ2xlRXZlbnQsIHRoaXMuX29uRnVsbHNjcmVlblRvZ2dsZSwgZmFsc2UpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBtZWRpYSBldmVudHNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0YWRkTWVkaWFMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIGlmICghdGhpcy5fc3RhcnRlZCkge1xuXHRcdC8vIFx0dGhpcy5hZGRMaXN0ZW5lcnModGhpcy52aWRlbywgdGhpcy5wbGF5aW5nT25jZUV2ZW50cywgdGhpcy5fb25NZWRpYVBsYXlpbmdPbmNlKTtcblx0XHQvLyB9XG5cdFx0dGhpcy5hZGRMaXN0ZW5lcnModGhpcy52aWRlbywgdGhpcy51cGRhdGVQbGF5YmFja0V2ZW50cywgdGhpcy5fdXBkYXRlUGxheWJhY2tTdGF0ZSk7XG5cdFx0dGhpcy5hZGRMaXN0ZW5lcnModGhpcy52aWRlbywgdGhpcy51cGRhdGVCdWZmZXJlZEV2ZW50cywgdGhpcy5fdXBkYXRlQnVmZmVyZWRWYWx1ZSk7XG5cdFx0dGhpcy5hZGRMaXN0ZW5lcnModGhpcy52aWRlbywgdGhpcy51cGRhdGVDdXJyVGltZUV2ZW50cywgdGhpcy5fdXBkYXRlQ3VyclRpbWVWYWx1ZSk7XG5cdFx0dGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgdGhpcy5fb25NZWRpYUVuZGVkLCBmYWxzZSk7XG5cdFx0dGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcy5fb25NZWRpYUVycm9yLCB0cnVlKTtcblxuXHRcdHRoaXMub24oXCJ2aWV3OnJlbW92ZWRcIiwgdGhpcy5yZW1vdmVNZWRpYUxpc3RlbmVycywgdGhpcyk7XG5cdH0sXG5cblx0cmVtb3ZlTWVkaWFMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMub2ZmKFwidmlldzpyZW1vdmVkXCIsIHRoaXMucmVtb3ZlTWVkaWFMaXN0ZW5lcnMsIHRoaXMpO1xuXG5cdFx0Ly8gaWYgKCF0aGlzLl9zdGFydGVkKSB7XG5cdFx0Ly8gXHR0aGlzLnJlbW92ZUxpc3RlbmVycyh0aGlzLnZpZGVvLCB0aGlzLnBsYXlpbmdPbmNlRXZlbnRzLCB0aGlzLl9vbk1lZGlhUGxheWluZ09uY2UpO1xuXHRcdC8vIH1cblx0XHR0aGlzLnJlbW92ZUxpc3RlbmVycyh0aGlzLnZpZGVvLCB0aGlzLnVwZGF0ZVBsYXliYWNrRXZlbnRzLCB0aGlzLl91cGRhdGVQbGF5YmFja1N0YXRlKTtcblx0XHR0aGlzLnJlbW92ZUxpc3RlbmVycyh0aGlzLnZpZGVvLCB0aGlzLnVwZGF0ZUJ1ZmZlcmVkRXZlbnRzLCB0aGlzLl91cGRhdGVCdWZmZXJlZFZhbHVlKTtcblx0XHR0aGlzLnJlbW92ZUxpc3RlbmVycyh0aGlzLnZpZGVvLCB0aGlzLnVwZGF0ZUN1cnJUaW1lRXZlbnRzLCB0aGlzLl91cGRhdGVDdXJyVGltZVZhbHVlKTtcblx0XHR0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCB0aGlzLl9vbk1lZGlhRW5kZWQsIGZhbHNlKTtcblx0XHR0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCB0aGlzLl9vbk1lZGlhRXJyb3IsIHRydWUpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBtZWRpYSBldmVudCBoYW5kbGVyc1xuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25NZWRpYUVycm9yOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMucmVtb3ZlTWVkaWFMaXN0ZW5lcnMoKTtcblx0XHR0aGlzLnJlbW92ZVNlbGVjdGlvbkxpc3RlbmVycygpO1xuXG5cdFx0dGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuXHRcdHRoaXMuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwic3RhcnRlZFwiKTtcblxuXHRcdHRoaXMubWVkaWFTdGF0ZSA9IFwiZXJyb3JcIjtcblx0XHR0aGlzLnBsYXliYWNrUmVxdWVzdGVkID0gZmFsc2U7XG5cdFx0Ly8gdGhpcy5jb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJlbmRlZFwiKTtcblx0XHQvLyB0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZShcIndhaXRpbmdcIik7XG5cdFx0dGhpcy5fZXhpdEZ1bGxzY3JlZW4oKTtcblx0fSxcblxuXHRfb25NZWRpYUVuZGVkOiBmdW5jdGlvbihldikge1xuXHRcdHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgPSBmYWxzZTtcblx0XHR0aGlzLl9leGl0RnVsbHNjcmVlbigpO1xuXHR9LFxuXG5cdF9leGl0RnVsbHNjcmVlbjogZnVuY3Rpb24oKSB7XG5cdFx0LyogTk9URTogcG9seWZpbGwgc2hvdWxkIGhhbmRsZSB0aGlzIG9uIGlPUz8gKi9cblx0XHRpZiAodGhpcy52aWRlby53ZWJraXREaXNwbGF5aW5nRnVsbHNjcmVlbikge1xuXHRcdFx0dGhpcy52aWRlby53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xuXHRcdH1cblx0XHRpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IHRoaXMudmlkZW8pIHtcblx0XHRcdHRoaXMudmlkZW8uZXhpdEZ1bGxzY3JlZW4oKTtcblx0XHR9XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIF9vbk1lZGlhUGxheWluZ09uY2Vcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gcGxheWluZ09uY2VFdmVudHM6IFwicGxheWluZyB3YWl0aW5nXCIsXG5cdC8vXG5cdC8vIF9vbk1lZGlhUGxheWluZ09uY2U6IGZ1bmN0aW9uKGV2KSB7XG5cdC8vIFx0dGhpcy5yZW1vdmVMaXN0ZW5lcnModGhpcy52aWRlbywgdGhpcy5wbGF5aW5nT25jZUV2ZW50cywgdGhpcy5fb25NZWRpYVBsYXlpbmdPbmNlKTtcblx0Ly8gXHRpZiAoIXRoaXMuX3N0YXJ0ZWQpIHtcblx0Ly8gXHRcdHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xuXHQvLyBcdFx0dGhpcy5jb250ZW50LmNsYXNzTGlzdC5hZGQoXCJzdGFydGVkXCIpO1xuXHQvLyBcdH1cblx0Ly8gfSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogX3VwZGF0ZUN1cnJUaW1lVmFsdWVcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0dXBkYXRlQ3VyclRpbWVFdmVudHM6IFwicGxheWluZyB3YWl0aW5nIHBhdXNlIHRpbWV1cGRhdGUgc2Vla2VkXCIsIC8vLnNwbGl0KFwiIFwiKSxcblxuXHRfdXBkYXRlQ3VyclRpbWVWYWx1ZTogZnVuY3Rpb24oZXYpIHtcblx0XHRpZiAodGhpcy52aWRlby5wbGF5ZWQubGVuZ3RoKSB7XG5cdFx0XHR0aGlzLmNvbnRlbnQuY2xhc3NMaXN0LmFkZChcInN0YXJ0ZWRcIik7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnByb2dyZXNzTWV0ZXIpIHtcblx0XHRcdHRoaXMucHJvZ3Jlc3NNZXRlci52YWx1ZVRvKFwiYW1vdW50XCIsIHRoaXMudmlkZW8uY3VycmVudFRpbWUsIDApO1xuXHRcdH1cblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogX3VwZGF0ZVBsYXliYWNrU3RhdGVcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gdXBkYXRlUGxheWJhY2tFdmVudHM6IFwicGxheWluZyBwbGF5IHdhaXRpbmcgcGF1c2Ugc2Vla2luZyBzZWVrZWQgZW5kZWRcIixcblx0dXBkYXRlUGxheWJhY2tFdmVudHM6IFwidGltZXVwZGF0ZSBwbGF5aW5nIHBhdXNlIHdhaXRpbmcgY2FucGxheXRocm91Z2ggc2Vla2VkXCIsXG5cblx0X2lzUGxheWJhY2tXYWl0aW5nOiBmYWxzZSxcblx0X3BsYXliYWNrU3RhcnRUUzogLTEsXG5cdF9wbGF5YmFja1N0YXJ0VEM6IC0xLFxuXG5cdF91cGRhdGVQbGF5YmFja1N0YXRlOiBmdW5jdGlvbihldikge1xuXHRcdC8vIHZhciBpc1dhaXRpbmcgPSBmYWxzZTtcblx0XHQvLyB2YXIgc3ltYm9sTmFtZSA9IFwicGxheS1zeW1ib2xcIjtcblxuXHRcdC8vIE5PVEU6IGNsZWFyVGltZW91dCB3aWxsIGNhbmNlbCBib3RoIHNldFRpbWVvdXQgYW5kIHNldEludGVydmFsIElEc1xuXHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fcGxheWJhY2tUaW1lb3V0SUQpO1xuXHRcdHRoaXMuX3BsYXliYWNrVGltZW91dElEID0gLTE7XG5cblx0XHRpZiAodGhpcy5wbGF5YmFja1JlcXVlc3RlZCkge1xuXHRcdFx0aWYgKGV2LnR5cGUgIT09IFwidGltZXVwZGF0ZVwiKSB7XG5cdFx0XHRcdHRoaXMuX3BsYXliYWNrU3RhcnRUUyA9IGV2LnRpbWVTdGFtcDtcblx0XHRcdFx0dGhpcy5fcGxheWJhY2tTdGFydFRDID0gdGhpcy52aWRlby5jdXJyZW50VGltZTtcblx0XHRcdH1cblx0XHRcdHN3aXRjaCAoZXYudHlwZSkge1xuXHRcdFx0XHRjYXNlIFwidGltZXVwZGF0ZVwiOlxuXHRcdFx0XHRcdGlmIChTWU5DX1RIUkVTSE9MRF9NUyA8IE1hdGguYWJzKChldi50aW1lU3RhbXAgLSB0aGlzLl9wbGF5YmFja1N0YXJ0VFMpIC1cblx0XHRcdFx0XHRcdFx0KCh0aGlzLnZpZGVvLmN1cnJlbnRUaW1lIC0gdGhpcy5fcGxheWJhY2tTdGFydFRDKSAqIDEwMDApKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5fcGxheWJhY2tTdGFydFRTID0gZXYudGltZVN0YW1wO1xuXHRcdFx0XHRcdFx0dGhpcy5fcGxheWJhY2tTdGFydFRDID0gdGhpcy52aWRlby5jdXJyZW50VGltZTtcblx0XHRcdFx0XHRcdHRoaXMuX3BsYXliYWNrVGltZW91dElEID1cblx0XHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQodGhpcy5fcGxheWJhY2tUaW1lb3V0Rm5fd2FpdGluZywgU1lOQ19USU1FT1VUX01TKTtcblx0XHRcdFx0XHRcdHRoaXMuX3RvZ2dsZVdhaXRpbmcodHJ1ZSk7XG5cdFx0XHRcdFx0XHQvLyBicmVhaztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5fcGxheWJhY2tUaW1lb3V0SUQgPVxuXHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCh0aGlzLl9wbGF5YmFja1RpbWVvdXRGbl9wbGF5aW5nLCBTWU5DX1RJTUVPVVRfTVMpO1xuXHRcdFx0XHRcdFx0dGhpcy5fdG9nZ2xlV2FpdGluZyhmYWxzZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgXCJwbGF5aW5nXCI6XG5cdFx0XHRcdFx0dGhpcy5fcGxheWJhY2tTdGFydFRTID0gZXYudGltZVN0YW1wO1xuXHRcdFx0XHRcdHRoaXMuX3BsYXliYWNrU3RhcnRUQyA9IHRoaXMudmlkZW8uY3VycmVudFRpbWU7XG5cdFx0XHRcdFx0dGhpcy5fcGxheWJhY2tUaW1lb3V0SUQgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLl9wbGF5YmFja1RpbWVvdXRGbl9wbGF5aW5nLCBTWU5DX1RJTUVPVVRfTVMpO1xuXHRcdFx0XHRcdHRoaXMuX3RvZ2dsZVdhaXRpbmcoZmFsc2UpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgXCJwYXVzZVwiOlxuXHRcdFx0XHRcdC8qIE5PVEU6IHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgaXMgdHJ1ZSwgdGhlIHBhdXNlIHdhc24ndCB0cmlnZ2VyZWRcblx0XHRcdFx0XHQgKiBmcm9tIFVJLCBidXQgYnkgdGhlIHdhaXRpbmcgaGFuZGxlciBiZWxvdywgc28gd2UgdHJlYXQgaXQgYXNcblx0XHRcdFx0XHQgKiB3YWl0aW5nICovXG5cdFx0XHRcdFx0Ly8gaWYgKCF0aGlzLnBsYXliYWNrUmVxdWVzdGVkKSB7XG5cdFx0XHRcdFx0Ly8gXHR0aGlzLl90b2dnbGVXYWl0aW5nKGZhbHNlKTtcblx0XHRcdFx0XHQvLyB9XG5cdFx0XHRcdFx0dGhpcy5fdG9nZ2xlV2FpdGluZyh0aGlzLnBsYXliYWNrUmVxdWVzdGVkKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlIFwiY2FucGxheXRocm91Z2hcIjpcblx0XHRcdFx0XHR0aGlzLl90b2dnbGVXYWl0aW5nKGZhbHNlKTtcblx0XHRcdFx0XHR0aGlzLl92YWxpZGF0ZVBsYXliYWNrKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBcIndhaXRpbmdcIjpcblx0XHRcdFx0XHQvKiBOT1RFOiBpZiB0aGUgdmlkZW8gaXMgc2Vla2luZywgZ2l2ZSBpdCBhIGNoYW5jZSB0byByZXN1bWUsIHNvIGRvXG5cdFx0XHRcdFx0ICogbm90aGluZywgYW5kIGhhbmRsZSB0aGluZ3Mgb24gc2Vla2VkL3BsYXlpbmcgKi9cblx0XHRcdFx0XHRpZiAoIXRoaXMudmlkZW8uc2Vla2luZykge1xuXHRcdFx0XHRcdFx0LyogaWYgbm90IGVub3VnaCBkYXRhICovXG5cdFx0XHRcdFx0XHRpZiAodGhpcy52aWRlby5yZWFkeVN0YXRlIDwgSFRNTE1lZGlhRWxlbWVudC5IQVZFX0VOT1VHSF9EQVRBKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMudmlkZW8ucGF1c2UoKTtcblxuXHRcdFx0XHRcdFx0XHQvLyB0aGlzLmxpc3RlblRvRWxlbWVudE9uY2UodGhpcy52aWRlbywgXCJjYW5wbGF5dGhyb3VnaFwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0Ly8gXHR0aGlzLl90b2dnbGVXYWl0aW5nKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0Ly8gXHR0aGlzLl92YWxpZGF0ZVBsYXliYWNrKCk7XG5cdFx0XHRcdFx0XHRcdC8vIHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgJiYgdGhpcy52aWRlby5wbGF5KCk7XG5cdFx0XHRcdFx0XHRcdC8vIH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhpcy5fdG9nZ2xlV2FpdGluZyh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aGlzLl90b2dnbGVXYWl0aW5nKGZhbHNlKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fdG9nZ2xlV2FpdGluZyhmYWxzZSk7XG5cdFx0fVxuXHR9LFxuXG5cdF9wbGF5YmFja1RpbWVvdXRJRDogLTEsXG5cdF9wbGF5YmFja1RpbWVvdXRGbl9wbGF5aW5nOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9wbGF5YmFja1RpbWVvdXRJRCA9IC0xO1xuXG5cdFx0dGhpcy5fdG9nZ2xlV2FpdGluZyh0cnVlKTtcblx0XHQvLyB0aGlzLl9yZW5kZXJQbGF5YmFja1N0YXRlKCk7XG5cblx0XHQvLyB0aGlzLl9zZXRQbGF5VG9nZ2xlU3ltYm9sKFwid2FpdGluZy1zeW1ib2xcIik7XG5cdFx0Ly8gdGhpcy5jb250ZW50LmNsYXNzTGlzdC5hZGQoXCJ3YWl0aW5nXCIpO1xuXHRcdC8vIHRoaXMucHJvZ3Jlc3NNZXRlci5zdGFsbGVkID0gdHJ1ZTtcblx0XHQvLyB0aGlzLl9pc1BsYXliYWNrV2FpdGluZyA9IHRydWU7XG5cdH0sXG5cblx0X3BsYXliYWNrVGltZW91dEZuX3dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdGlmIChTWU5DX1RIUkVTSE9MRF9NUyA8ICh0aGlzLnZpZGVvLmN1cnJlbnRUaW1lIC0gdGhpcy5fcGxheWJhY2tTdGFydFRDKSAqIDEwMDApIHtcblx0XHRcdHRoaXMuX3BsYXliYWNrVGltZW91dElEID1cblx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQodGhpcy5fcGxheWJhY2tUaW1lb3V0Rm5fd2FpdGluZywgU1lOQ19USU1FT1VUX01TKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gc2luY2UgdGhlcmUgaXMgbm8gZXZlbnQudGltZVN0YW1wXG5cdFx0XHQvLyB2YXIgZGVsdGEgPSB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lIC0gdGhpcy5fcGxheWJhY2tTdGFydFRDO1xuXHRcdFx0Ly8gdGhpcy5fcGxheWJhY2tTdGFydFRTICs9IGRlbHRhICogMTAwMDtcblx0XHRcdC8vIHRoaXMuX3BsYXliYWNrU3RhcnRUUyA9IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTtcblx0XHRcdHRoaXMuX3BsYXliYWNrU3RhcnRUUyArPSBTWU5DX1RJTUVPVVRfTVM7XG5cdFx0XHR0aGlzLl9wbGF5YmFja1N0YXJ0VEMgPSB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lO1xuXHRcdFx0dGhpcy5fcGxheWJhY2tUaW1lb3V0SUQgPVxuXHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCh0aGlzLl9wbGF5YmFja1RpbWVvdXRGbl9wbGF5aW5nLCBTWU5DX1RJTUVPVVRfTVMpO1xuXG5cdFx0XHR0aGlzLl90b2dnbGVXYWl0aW5nKGZhbHNlKTtcblx0XHRcdC8vIHRoaXMuX3JlbmRlclBsYXliYWNrU3RhdGUoKTtcblxuXHRcdFx0Ly8gdGhpcy5fc2V0UGxheVRvZ2dsZVN5bWJvbChcInBhdXNlLXN5bWJvbFwiKTtcblx0XHRcdC8vIHRoaXMuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwid2FpdGluZ1wiKTtcblx0XHRcdC8vIHRoaXMucHJvZ3Jlc3NNZXRlci5zdGFsbGVkID0gZmFsc2U7XG5cdFx0XHQvLyB0aGlzLl9pc1BsYXliYWNrV2FpdGluZyA9IGZhbHNlO1xuXHRcdH1cblx0fSxcblxuXHQvKiogQG92ZXJyaWRlICovXG5cdF9yZW5kZXJQbGF5YmFja1N0YXRlOiBmdW5jdGlvbigpIHtcblx0XHQvLyBpZiAoREVCVUcpIHtcblx0XHQvLyBcdHRoaXMuX19sb2dNZXNzYWdlKFtcblx0XHQvLyBcdFwibWVkaWFTdGF0ZTpcIiwgdGhpcy5tZWRpYVN0YXRlLFxuXHRcdC8vIFx0XCJwbGF5ZWQ6XCIsIHRoaXMudmlkZW8ucGxheWVkLmxlbmd0aCxcblx0XHQvLyBcdFwiZW5kZWQ6XCIsIHRoaXMudmlkZW8uZW5kZWQsXG5cdFx0Ly8gXHRcInRvZ2dsZS5wYXVzZWQ6XCIsIHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wucGF1c2VkXG5cdFx0Ly8gXS5qb2luKFwiIFwiKSwgXCJfcmVuZGVyUGxheWJhY2tTdGF0ZVwiKTtcblx0XHQvLyB9XG5cdFx0Ly8gY29uc29sZS5sb2coXCIlczo6X3JlbmRlclBsYXliYWNrU3RhdGUgbWVkaWFTdGF0ZTolcyBwbGF5ZWQ6JW8gZW5kZWQ6JW9cIixcblx0XHQvLyBcdHRoaXMuY2lkLCB0aGlzLm1lZGlhU3RhdGUsIHRoaXMudmlkZW8ucGxheWVkLmxlbmd0aCwgdGhpcy52aWRlby5lbmRlZCk7XG5cdFx0Ly9cblx0XHQvLyBpZiAodGhpcy5tZWRpYVN0YXRlID09PSBcInJlYWR5XCIpIHtcblx0XHQvLyBcdHRoaXMudXBkYXRlT3ZlcmxheSh0aGlzLnZpZGVvLCB0aGlzLnBsYXlUb2dnbGUpO1xuXHRcdC8vIH1cblxuXHRcdHZhciBjbHMgPSB0aGlzLmNvbnRlbnQuY2xhc3NMaXN0O1xuXHRcdC8vIGlmICghdGhpcy5fc3RhcnRlZCAmJiB0aGlzLnBsYXliYWNrUmVxdWVzdGVkICYmXG5cdFx0Ly8gXHRcdHRoaXMudmlkZW8ucmVhZHlTdGF0ZSA9PT0gSFRNTE1lZGlhRWxlbWVudC5IQVZFX0VOT1VHSF9EQVRBKSB7XG5cdFx0Ly8gXHR0aGlzLl9zdGFydGVkID0gdHJ1ZTtcblx0XHQvLyBcdGNscy5hZGQoXCJzdGFydGVkXCIpO1xuXHRcdC8vIH1cblx0XHQvLyBjbHMudG9nZ2xlKFwic3RhcnRlZFwiLCAodGhpcy52aWRlby5wbGF5ZWQubGVuZ3RoID4gMCkpO1xuXHRcdGNscy50b2dnbGUoXCJlbmRlZFwiLCB0aGlzLnZpZGVvLmVuZGVkKTtcblxuXHRcdFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLl9yZW5kZXJQbGF5YmFja1N0YXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH0sXG5cblx0X3NldFBsYXlUb2dnbGVTeW1ib2w6IGZ1bmN0aW9uKHN5bWJvbE5hbWUpIHtcblx0XHQvLyBpZiAodGhpcy52aWRlby5lbmRlZCkge1xuXHRcdC8vIFx0Y29uc29sZS5sb2coXCIlczo6X3NldFBsYXlUb2dnbGVTeW1ib2wgJXMgLT4gZW5kZWRcIiwgdGhpcy5jaWQsIHN5bWJvbE5hbWUpO1xuXHRcdC8vIH1cblx0XHQvLyBpZiAodGhpcy5tZWRpYVN0YXRlID09PSBcInJlYWR5XCIpIHtcblx0XHQvLyBcdGlmICh0aGlzLnBsYXliYWNrUmVxdWVzdGVkICYmICF0aGlzLl9pc01lZGlhV2FpdGluZygpKSB7XG5cdFx0Ly8gXHRcdHRoaXMuX3BsYXlUb2dnbGVTeW1ib2wuc2V0SW1hZ2VTb3VyY2UobnVsbCk7XG5cdFx0Ly8gXHR9IGVsc2Uge1xuXHRcdC8vIFx0XHR0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sLnNldEltYWdlU291cmNlKHRoaXMudmlkZW8pO1xuXHRcdC8vIFx0fVxuXHRcdC8vIFx0dGhpcy5fcGxheVRvZ2dsZVN5bWJvbC5yZWZyZXNoSW1hZ2VTb3VyY2UoKTtcblx0XHQvLyB9XG5cdFx0cmV0dXJuIFBsYXlhYmxlUmVuZGVyZXIucHJvdG90eXBlLl9zZXRQbGF5VG9nZ2xlU3ltYm9sLmNhbGwodGhpcywgdGhpcy52aWRlby5lbmRlZCA/IFwiZW5kZWRcIiA6IHN5bWJvbE5hbWUpO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBfdXBkYXRlQnVmZmVyZWRWYWx1ZVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyB1cGRhdGVCdWZmZXJlZEV2ZW50czogXCJwcm9ncmVzcyBjYW5wbGF5IGNhbnBsYXl0aHJvdWdoIHBsYXlpbmcgdGltZXVwZGF0ZVwiLC8vbG9hZGVkZGF0YVxuXHR1cGRhdGVCdWZmZXJlZEV2ZW50czogXCJwcm9ncmVzcyBjYW5wbGF5IGNhbnBsYXl0aHJvdWdoIHBsYXkgcGxheWluZ1wiLFxuXG5cdF91cGRhdGVCdWZmZXJlZFZhbHVlOiBmdW5jdGlvbihldikge1xuXHRcdC8vIGlmICghdGhpcy5fc3RhcnRlZCkgcmV0dXJuO1xuXHRcdHZhciBiUmFuZ2VzID0gdGhpcy52aWRlby5idWZmZXJlZDtcblx0XHRpZiAoYlJhbmdlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHR0aGlzLl9idWZmZXJlZFZhbHVlID0gYlJhbmdlcy5lbmQoYlJhbmdlcy5sZW5ndGggLSAxKTtcblx0XHRcdGlmICh0aGlzLnByb2dyZXNzTWV0ZXIgJiYgKCh0aGlzLnZpZGVvLnJlYWR5U3RhdGUgPj0gSFRNTE1lZGlhRWxlbWVudC5IQVZFX0NVUlJFTlRfREFUQSkgLyp8fCAodGhpcy52aWRlby5yZWFkeVN0YXRlID49IEhUTUxNZWRpYUVsZW1lbnQuSEFWRV9DVVJSRU5UX0RBVEEgJiYgdGhpcy52aWRlby5uZXR3b3JrU3RhdGUgPT0gSFRNTE1lZGlhRWxlbWVudC5ORVRXT1JLX0xPQURJTkcpKi8gKSkge1xuXHRcdFx0XHR0aGlzLnByb2dyZXNzTWV0ZXIudmFsdWVUbyhcImF2YWlsYWJsZVwiLCB0aGlzLl9idWZmZXJlZFZhbHVlLCAzMDApO1xuXHRcdFx0XHQvLyB0aGlzLnByb2dyZXNzTWV0ZXIudmFsdWVUbyhcImF2YWlsYWJsZVwiLCB0aGlzLl9idWZmZXJlZFZhbHVlLCBNYXRoLm1heCgwLCAxMDAwICogKHRoaXMuX2J1ZmZlcmVkVmFsdWUgLSAodGhpcy5wcm9ncmVzc01ldGVyLmdldFRhcmdldFZhbHVlKFwiYXZhaWxhYmxlXCIpIHwgMCkpKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBmdWxsc2NyZWVuIGFwaVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfb25GdWxsc2NyZWVuVG9nZ2xlOiBmdW5jdGlvbihldikge1xuXHRcdC8vIE5PVEU6IElnbm9yZSBpZiBNb3VzZUV2ZW50LmJ1dHRvbiBpcyAwIG9yIHVuZGVmaW5lZCAoMDogbGVmdC1idXR0b24pXG5cdFx0aWYgKCFldi5kZWZhdWx0UHJldmVudGVkICYmICFldi5idXR0b24gJiYgdGhpcy5tb2RlbC5zZWxlY3RlZCkge1xuXHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGlmIChkb2N1bWVudC5oYXNPd25Qcm9wZXJ0eShcImZ1bGxzY3JlZW5FbGVtZW50XCIpICYmXG5cdFx0XHRcdFx0ZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgIT09IHRoaXMudmlkZW8pIHtcblx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGZ1bGxzY3JlZW5DaGFuZ2VFdmVudCwgdGhpcy5fb25GdWxsc2NyZWVuQ2hhbmdlLCBmYWxzZSk7XG5cdFx0XHRcdFx0dGhpcy52aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0aWYgKHRoaXMudmlkZW8ud2Via2l0U3VwcG9ydHNGdWxsc2NyZWVuICYmICF0aGlzLnZpZGVvLndlYmtpdERpc3BsYXlpbmdGdWxsc2NyZWVuKSB7XG5cdFx0XHRcdFx0dGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0YmVnaW5mdWxsc2NyZWVuXCIsIHRoaXMuX29uRnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuXHRcdFx0XHRcdHRoaXMudmlkZW8ud2Via2l0RW50ZXJGdWxsU2NyZWVuKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHR0aGlzLnZpZGVvLmNvbnRyb2xzID0gZmFsc2U7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0X29uRnVsbHNjcmVlbkNoYW5nZTogZnVuY3Rpb24oZXYpIHtcblx0XHRzd2l0Y2ggKGV2LnR5cGUpIHtcblx0XHRcdGNhc2UgZnVsbHNjcmVlbkNoYW5nZUV2ZW50OlxuXHRcdFx0XHQvLyB2YXIgaXNPd25GdWxsc2NyZWVuID0gTW9kZXJuaXpyLnByZWZpeGVkKFwiZnVsbHNjcmVlbkVsZW1lbnRcIiwgZG9jdW1lbnQpID09PSB0aGlzLnZpZGVvO1xuXHRcdFx0XHR2YXIgaXNPd25GdWxsc2NyZWVuID0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IHRoaXMudmlkZW87XG5cdFx0XHRcdHRoaXMudmlkZW8uY29udHJvbHMgPSBpc093bkZ1bGxzY3JlZW47XG5cdFx0XHRcdGlmICghaXNPd25GdWxsc2NyZWVuKSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihmdWxsc2NyZWVuQ2hhbmdlRXZlbnQsIHRoaXMuX29uRnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIndlYmtpdGJlZ2luZnVsbHNjcmVlblwiOlxuXHRcdFx0XHR0aGlzLnZpZGVvLmNvbnRyb2xzID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy52aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKFwid2Via2l0YmVnaW5mdWxsc2NyZWVuXCIsIHRoaXMuX29uRnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuXHRcdFx0XHR0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRlbmRmdWxsc2NyZWVuXCIsIHRoaXMuX29uRnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJ3ZWJraXRlbmRmdWxsc2NyZWVuXCI6XG5cdFx0XHRcdHRoaXMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGVuZGZ1bGxzY3JlZW5cIiwgdGhpcy5fb25GdWxsc2NyZWVuQ2hhbmdlLCBmYWxzZSk7XG5cdFx0XHRcdHRoaXMudmlkZW8uY29udHJvbHMgPSBmYWxzZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9LFxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IFZpZGVvUmVuZGVyZXI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyogbG9nIHRvIHNjcmVlblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5pZiAoREVCVUcpIHtcblx0bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oVmlkZW9SZW5kZXJlcikge1xuXHRcdGlmICghVmlkZW9SZW5kZXJlci5MT0dfVE9fU0NSRUVOKSByZXR1cm4gVmlkZW9SZW5kZXJlcjtcblxuXHRcdC8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG5cdFx0dmFyIENvbG9yID0gcmVxdWlyZShcImNvbG9yXCIpO1xuXHRcdC8qKiBAdHlwZSB7bW9kdWxlOnVuZGVyc2NvcmUuc3RyaW5ncy9scGFkfSAqL1xuXHRcdHZhciBscGFkID0gcmVxdWlyZShcInVuZGVyc2NvcmUuc3RyaW5nL2xwYWRcIik7XG5cdFx0LyoqIEB0eXBlIHttb2R1bGU6dW5kZXJzY29yZS5zdHJpbmdzL3JwYWR9ICovXG5cdFx0dmFyIHJwYWQgPSByZXF1aXJlKFwidW5kZXJzY29yZS5zdHJpbmcvcnBhZFwiKTtcblxuXHRcdC8vIHZhciBmdWxsc2NyZWVuRXZlbnRzID0gW1xuXHRcdC8vIFx0ZnVsbHNjcmVlbkNoYW5nZUV2ZW50LCBmdWxsc2NyZWVuRXJyb3JFdmVudCxcblx0XHQvLyBcdFwid2Via2l0YmVnaW5mdWxsc2NyZWVuXCIsIFwid2Via2l0ZW5kZnVsbHNjcmVlblwiLFxuXHRcdC8vIF07XG5cblx0XHR2YXIgbWVkaWFFdmVudHMgPSByZXF1aXJlKFwidXRpbHMvZXZlbnQvbWVkaWFFdmVudHNFbnVtXCIpO1xuXHRcdHZhciBsb2dQbGF5YmFja1N0YXRlRXZlbnRzLCBsb2dCdWZmZXJlZEV2ZW50cywgbG9nUGxheWVkRXZlbnRzO1xuXG5cdFx0Ly8gbG9nUGxheWJhY2tTdGF0ZUV2ZW50cyA9IFtcInBsYXlpbmdcIiwgXCJ3YWl0aW5nXCIsIFwiZW5kZWRcIiwgXCJwYXVzZVwiLCBcInNlZWtpbmdcIiwgXCJzZWVrZWRcIl07XG5cdFx0Ly8gbG9nQnVmZmVyZWRFdmVudHMgPSBbXCJwcm9ncmVzc1wiLCBcImR1cmF0aW9uY2hhbmdlXCIsIFwiY2FucGxheVwiLCBcInBsYXlcIl07XG5cdFx0Ly8gbG9nUGxheWVkRXZlbnRzID0gW1wicGxheWluZ1wiLCBcInRpbWV1cGRhdGVcIl07XG5cblx0XHRsb2dQbGF5YmFja1N0YXRlRXZlbnRzID0gW1xuXHRcdFx0XCJsb2Fkc3RhcnRcIixcblx0XHRcdFwicHJvZ3Jlc3NcIixcblx0XHRcdFwic3VzcGVuZFwiLFxuXHRcdFx0XCJhYm9ydFwiLFxuXHRcdFx0XCJlcnJvclwiLFxuXHRcdFx0XCJlbXB0aWVkXCIsXG5cdFx0XHRcInN0YWxsZWRcIixcblx0XHRdO1xuXHRcdGxvZ0J1ZmZlcmVkRXZlbnRzID0gW1xuXHRcdFx0XCJsb2FkZWRtZXRhZGF0YVwiLFxuXHRcdFx0XCJsb2FkZWRkYXRhXCIsXG5cdFx0XHRcImNhbnBsYXlcIixcblx0XHRcdFwiY2FucGxheXRocm91Z2hcIixcblx0XHRcdFwicGxheWluZ1wiLFxuXHRcdFx0XCJ3YWl0aW5nXCIsXG5cdFx0XHRcInNlZWtpbmdcIiwgLy8gc2Vla2luZyBjaGFuZ2VkIHRvIHRydWVcblx0XHRcdFwic2Vla2VkXCIsIC8vIHNlZWtpbmcgY2hhbmdlZCB0byBmYWxzZVxuXHRcdFx0XCJlbmRlZFwiLCAvLyBlbmRlZCBpcyB0cnVlXG5cdFx0XTtcblx0XHRsb2dQbGF5ZWRFdmVudHMgPSBbXG5cdFx0XHRcInBsYXlcIixcblx0XHRcdFwicGF1c2VcIlxuXHRcdF07XG5cblx0XHQvLyBFeGNsdWRlIHNvbWUgZXZlbnRzIGZyb20gbG9nXG5cdFx0bWVkaWFFdmVudHMgPSBfLndpdGhvdXQobWVkaWFFdmVudHMsIFwicmVzaXplXCIsIFwiZXJyb3JcIik7XG5cdFx0Ly8gTWFrZSBzdXJlIGV2ZW50IHN1YnNldHMgZXhpc3QgaW4gdGhlIG1haW4gc2V0XG5cdFx0bG9nUGxheWJhY2tTdGF0ZUV2ZW50cyA9IF8uaW50ZXJzZWN0aW9uKG1lZGlhRXZlbnRzLCBsb2dQbGF5YmFja1N0YXRlRXZlbnRzKTtcblx0XHRsb2dCdWZmZXJlZEV2ZW50cyA9IF8uaW50ZXJzZWN0aW9uKG1lZGlhRXZlbnRzLCBsb2dCdWZmZXJlZEV2ZW50cyk7XG5cdFx0bG9nUGxheWVkRXZlbnRzID0gXy5pbnRlcnNlY3Rpb24obWVkaWFFdmVudHMsIGxvZ1BsYXllZEV2ZW50cyk7XG5cblx0XHR2YXIgcmVhZHlTdGF0ZVN5bWJvbHMgPSBfLmludmVydChfLnBpY2soSFRNTE1lZGlhRWxlbWVudCxcblx0XHRcdGZ1bmN0aW9uKHZhbCwga2V5LCBvYmopIHtcblx0XHRcdFx0cmV0dXJuIC9eSEFWRV8vLnRlc3Qoa2V5KTtcblx0XHRcdH0pKTtcblx0XHR2YXIgcmVhZHlTdGF0ZVRvU3RyaW5nID0gZnVuY3Rpb24oZWwpIHtcblx0XHRcdHJldHVybiByZWFkeVN0YXRlU3ltYm9sc1tlbC5yZWFkeVN0YXRlXSArIFwiKFwiICsgZWwucmVhZHlTdGF0ZSArIFwiKVwiO1xuXHRcdH07XG5cblx0XHR2YXIgbmV0d29ya1N0YXRlU3ltYm9scyA9IF8uaW52ZXJ0KF8ucGljayhIVE1MTWVkaWFFbGVtZW50LFxuXHRcdFx0ZnVuY3Rpb24odmFsLCBrZXksIG9iaikge1xuXHRcdFx0XHRyZXR1cm4gL15ORVRXT1JLXy8udGVzdChrZXkpO1xuXHRcdFx0fSkpO1xuXHRcdHZhciBuZXR3b3JrU3RhdGVUb1N0cmluZyA9IGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRyZXR1cm4gbmV0d29ya1N0YXRlU3ltYm9sc1tlbC5uZXR3b3JrU3RhdGVdICsgXCIoXCIgKyBlbC5uZXR3b3JrU3RhdGUgKyBcIilcIjtcblx0XHR9O1xuXG5cdFx0dmFyIG1lZGlhRXJyb3JTeW1ib2xzID0gXy5pbnZlcnQoTWVkaWFFcnJvcik7XG5cdFx0dmFyIG1lZGlhRXJyb3JUb1N0cmluZyA9IGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWwuZXJyb3IgPyBtZWRpYUVycm9yU3ltYm9sc1tlbC5lcnJvci5jb2RlXSArIFwiKFwiICsgZWwuZXJyb3IuY29kZSArIFwiKVwiIDogXCJbTWVkaWFFcnJvciBudWxsXVwiO1xuXHRcdH07XG5cblx0XHR2YXIgZmluZFJhbmdlSW5kZXggPSBmdW5jdGlvbihyYW5nZSwgY3VyclRpbWUpIHtcblx0XHRcdGZvciAodmFyIGkgPSAwLCBpaSA9IHJhbmdlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHRcdFx0aWYgKHJhbmdlLnN0YXJ0KGkpIDw9IGN1cnJUaW1lICYmIGN1cnJUaW1lIDw9IHJhbmdlLmVuZChpKSkge1xuXHRcdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gLTE7XG5cdFx0fTtcblxuXHRcdHZhciBmb3JtYXRWaWRlb0Vycm9yID0gZnVuY3Rpb24odmlkZW8pIHtcblx0XHRcdHJldHVybiBbXG5cdFx0XHRcdG1lZGlhRXJyb3JUb1N0cmluZyh2aWRlbyksXG5cdFx0XHRcdG5ldHdvcmtTdGF0ZVRvU3RyaW5nKHZpZGVvKSxcblx0XHRcdFx0cmVhZHlTdGF0ZVRvU3RyaW5nKHZpZGVvKSxcblx0XHRcdF0uam9pbihcIiBcIik7XG5cdFx0fTtcblxuXHRcdHZhciBnZXRWaWRlb1N0YXRzQ29scyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFwiMDAwMC4wMDAgW0N1cnIvVG90YWxdIFtTZWVrYWJsZV0gIFtCdWZmZXJlZF0gIG5ldHdvcmtTdGF0ZSByZWFkeVN0YXRlICAgICAgUGxheWJhY2tcIjtcblx0XHRcdC8vIHJldHVybiBcIjAwMDAuNjIwIFt0OiAgMC4wICAyNy40XSBbczogMjcuNCAwLzFdIFtiOiAgMC41IDAvMV0gTE9BRElORygyKSAgIEZVVFVSRV9EQVRBKDMpICA6OiAoOjopXCI7XG5cdFx0fVxuXG5cdFx0dmFyIGZvcm1hdFZpZGVvU3RhdHMgPSBmdW5jdGlvbih2aWRlbykge1xuXHRcdFx0dmFyIGN1cnJUaW1lID0gdmlkZW8uY3VycmVudFRpbWUsXG5cdFx0XHRcdGR1clRpbWUgPSB2aWRlby5kdXJhdGlvbixcblx0XHRcdFx0YlJhbmdlcyA9IHZpZGVvLmJ1ZmZlcmVkLFxuXHRcdFx0XHRiUmFuZ2VJZHgsXG5cdFx0XHRcdHNSYW5nZXMgPSB2aWRlby5zZWVrYWJsZSxcblx0XHRcdFx0c1JhbmdlSWR4O1xuXG5cdFx0XHRiUmFuZ2VJZHggPSBmaW5kUmFuZ2VJbmRleChiUmFuZ2VzLCBjdXJyVGltZSk7XG5cdFx0XHRzUmFuZ2VJZHggPSBmaW5kUmFuZ2VJbmRleChzUmFuZ2VzLCBjdXJyVGltZSk7XG5cdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcIltcIiArIGxwYWQoY3VyclRpbWUudG9GaXhlZCgxKSwgNSkgK1xuXHRcdFx0XHRcdFwiIFwiICsgbHBhZCgoIWlzTmFOKGR1clRpbWUpID8gZHVyVGltZS50b0ZpeGVkKDEpIDogXCItXCIpLCA0KSArIFwiXVwiLFxuXHRcdFx0XHRcIltcIiArIGxwYWQoKHNSYW5nZUlkeCA+PSAwID8gc1Jhbmdlcy5lbmQoc1JhbmdlSWR4KS50b0ZpeGVkKDEpIDogXCItXCIpLCA1KSArXG5cdFx0XHRcdFx0XCIgXCIgKyAoc1JhbmdlSWR4ID49IDAgPyBzUmFuZ2VJZHggOiBcIi1cIikgKyBcIi9cIiArIHNSYW5nZXMubGVuZ3RoICsgXCJdXCIsXG5cdFx0XHRcdFwiW1wiICsgbHBhZCgoYlJhbmdlSWR4ID49IDAgPyBiUmFuZ2VzLmVuZChiUmFuZ2VJZHgpLnRvRml4ZWQoMSkgOiBcIi1cIiksIDUpICtcblx0XHRcdFx0XHRcIiBcIiArIChiUmFuZ2VJZHggPj0gMCA/IGJSYW5nZUlkeCA6IFwiLVwiKSArIFwiL1wiICsgYlJhbmdlcy5sZW5ndGggKyBcIl1cIixcblx0XHRcdFx0cnBhZChuZXR3b3JrU3RhdGVUb1N0cmluZyh2aWRlbykuc3Vic3RyKDgpLCAxMiksXG5cdFx0XHRcdHJwYWQocmVhZHlTdGF0ZVRvU3RyaW5nKHZpZGVvKS5zdWJzdHIoNSksIDE1KSxcblx0XHRcdFx0KHZpZGVvLmVuZGVkID8gXCI+OlwiIDogKHZpZGVvLnBhdXNlZCA/IFwiOjpcIiA6IFwiPj5cIikpXG5cdFx0XHRcdC8vIHZpZGVvLnBsYXliYWNrUmF0ZS50b0ZpeGVkKDIpICsgXCIgKFwiICsgdmlkZW8uZGVmYXVsdFBsYXliYWNrUmF0ZS50b0ZpeGVkKDIpICsgXCIpXCJcblx0XHRcdF07IC8vLmpvaW4oXCIgXCIpO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gVmlkZW9SZW5kZXJlci5leHRlbmQoe1xuXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0VmlkZW9SZW5kZXJlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0XHRcdF8uYmluZEFsbCh0aGlzLCBcIl9faGFuZGxlTWVkaWFFdmVudFwiKTtcblxuXHRcdFx0XHR2YXIgZmdDb2xvciA9IHRoaXMubW9kZWwuYXR0cihcImNvbG9yXCIpLFxuXHRcdFx0XHRcdHJlZCA9IG5ldyBDb2xvcihcInJlZFwiKSxcblx0XHRcdFx0XHRibHVlID0gbmV3IENvbG9yKFwiYmx1ZVwiKSxcblx0XHRcdFx0XHRncmVlbiA9IG5ldyBDb2xvcihcImdyZWVuXCIpO1xuXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWVkaWFFdmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR2YXIgZXYgPSBtZWRpYUV2ZW50c1tpXTtcblx0XHRcdFx0XHR0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoZXYsIHRoaXMuX19oYW5kbGVNZWRpYUV2ZW50LCBmYWxzZSk7XG5cblx0XHRcdFx0XHR2YXIgYyA9IG5ldyBDb2xvcihmZ0NvbG9yKSxcblx0XHRcdFx0XHRcdGNjID0gMTtcblx0XHRcdFx0XHRpZiAobG9nQnVmZmVyZWRFdmVudHMuaW5kZXhPZihldikgIT0gLTEpIGMubWl4KGdyZWVuLCAoY2MgLz0gMikpO1xuXHRcdFx0XHRcdGlmIChsb2dQbGF5ZWRFdmVudHMuaW5kZXhPZihldikgIT0gLTEpIGMubWl4KHJlZCwgKGNjIC89IDIpKTtcblx0XHRcdFx0XHRpZiAobG9nUGxheWJhY2tTdGF0ZUV2ZW50cy5pbmRleE9mKGV2KSAhPSAtMSkgYy5taXgoYmx1ZSwgKGNjIC89IDIpKTtcblx0XHRcdFx0XHR0aGlzLl9fbG9nQ29sb3JzW2V2XSA9IGMucmdiKCkuc3RyaW5nKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcy5fX2hhbmRsZU1lZGlhRXZlbnQsIHRydWUpO1xuXHRcdFx0fSxcblxuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0VmlkZW9SZW5kZXJlci5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWVkaWFFdmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAobWVkaWFFdmVudHNbaV0gPT0gXCJlcnJvclwiKSBjb250aW51ZTtcblx0XHRcdFx0XHR0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIobWVkaWFFdmVudHNbaV0sIHRoaXMuX19oYW5kbGVNZWRpYUV2ZW50LCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy52aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgdGhpcy5fX2hhbmRsZU1lZGlhRXZlbnQsIHRydWUpO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gLyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0Ly8gX29uVmlzaWJpbGl0eUNoYW5nZTogZnVuY3Rpb24oZXYpIHtcblx0XHRcdC8vIFx0VmlkZW9SZW5kZXJlci5wcm90b3R5cGUuX29uVmlzaWJpbGl0eUNoYW5nZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0Ly8gXHR2YXIgc3RhdGVWYWwgPSBNb2Rlcm5penIucHJlZml4ZWQoXCJ2aXNpYmlsaXR5U3RhdGVcIiwgZG9jdW1lbnQpO1xuXHRcdFx0Ly8gXHR0aGlzLl9fbG9nRXZlbnQoXCJ2aXNpYmlsaXR5U3RhdGU6XCIgKyBzdGF0ZVZhbCwgZXYudHlwZSArIFwiOlwiICsgc3RhdGVWYWwpO1xuXHRcdFx0Ly8gfSxcblx0XHRcdC8vXG5cdFx0XHQvLyAvKiogQG92ZXJyaWRlICovXG5cdFx0XHQvLyBfb25GdWxsc2NyZWVuQ2hhbmdlOiBmdW5jdGlvbihldikge1xuXHRcdFx0Ly8gXHRWaWRlb1JlbmRlcmVyLnByb3RvdHlwZS5fb25GdWxsc2NyZWVuQ2hhbmdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHQvLyBcdHZhciBsb2d0eXBlID0gKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50ID09PSB0aGlzLnZpZGVvID8gXCJlbnRlcjpcIiA6IFwiZXhpdDpcIikgKyBldi50eXBlO1xuXHRcdFx0Ly8gXHR0aGlzLl9fbG9nRXZlbnQoXCJkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudDogXCIgKyB0aGlzLmNpZCwgbG9ndHlwZSk7XG5cdFx0XHQvLyB9LFxuXG5cdFx0XHQvKiogQG92ZXJyaWRlICovXG5cdFx0XHRfb25GdWxsc2NyZWVuVG9nZ2xlOiBmdW5jdGlvbihldikge1xuXHRcdFx0XHRpZiAoIWV2LmRlZmF1bHRQcmV2ZW50ZWQgJiYgdGhpcy5tb2RlbC5zZWxlY3RlZCkge1xuXHRcdFx0XHRcdHRoaXMuX19sb2dFdmVudChcImZ1bGxzY3JlZW4tdG9nZ2xlXCIsIGV2LnR5cGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFZpZGVvUmVuZGVyZXIucHJvdG90eXBlLl9vbkZ1bGxzY3JlZW5Ub2dnbGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdH0sXG5cblx0XHRcdC8qKiBAb3ZlcnJpZGUgKi9cblx0XHRcdF9wbGF5YmFja1RpbWVvdXRGbl9wbGF5aW5nOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0VmlkZW9SZW5kZXJlci5wcm90b3R5cGUuX3BsYXliYWNrVGltZW91dEZuX3BsYXlpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdFx0Ly8gdGhpcy5fX2xvZ0V2ZW50KGZvcm1hdFZpZGVvU3RhdHModGhpcy52aWRlbykuam9pbihcIiBcIiksIFwidGltZW91dC1wbGF5XCIpO1xuXHRcdFx0XHR0aGlzLl9faGFuZGxlTWVkaWFFdmVudCh7XG5cdFx0XHRcdFx0dHlwZTogXCJ0aW1lb3V0LXBsYXlcIixcblx0XHRcdFx0XHR0aW1lU3RhbXA6IG51bGwsXG5cdFx0XHRcdFx0aXNUaW1lb3V0OiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblxuXHRcdFx0LyoqIEBvdmVycmlkZSAqL1xuXHRcdFx0X3BsYXliYWNrVGltZW91dEZuX3dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRWaWRlb1JlbmRlcmVyLnByb3RvdHlwZS5fcGxheWJhY2tUaW1lb3V0Rm5fd2FpdGluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHQvLyB0aGlzLl9fbG9nRXZlbnQoZm9ybWF0VmlkZW9TdGF0cyh0aGlzLnZpZGVvKS5qb2luKFwiIFwiKSwgXCJ0aW1lb3V0LXdhaXRcIik7XG5cdFx0XHRcdHRoaXMuX19oYW5kbGVNZWRpYUV2ZW50KHtcblx0XHRcdFx0XHR0eXBlOiBcInRpbWVvdXQtd2FpdFwiLFxuXHRcdFx0XHRcdHRpbWVTdGFtcDogbnVsbCxcblx0XHRcdFx0XHRpc1RpbWVvdXQ6IHRydWVcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXG5cdFx0XHRfX2hhbmRsZU1lZGlhRXZlbnQ6IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRcdHZhciBldm1zZyA9IGZvcm1hdFZpZGVvU3RhdHModGhpcy52aWRlbyk7XG5cblx0XHRcdFx0aWYgKHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQgPT09IHRydWUpIHtcblx0XHRcdFx0XHRldm1zZy5wdXNoKFwiKD4+KVwiKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLnBsYXliYWNrUmVxdWVzdGVkID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdGV2bXNnLnB1c2goXCIoOjopXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGV2bXNnLnB1c2goXCIoLS0pXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMucGxheWJhY2tSZXF1ZXN0ZWQpIHtcblx0XHRcdFx0XHRldm1zZy5wdXNoKHRoaXMuX3BsYXliYWNrVGltZW91dElEICE9PSAtMSA/IFwiV1wiIDogXCItXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGV2bXNnLnB1c2godGhpcy5fcGxheWJhY2tUaW1lb3V0SUQgIT09IC0xID8gXCI/XCIgOiBcIiFcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gZXZtc2cucHVzaCh0aGlzLl9wbGF5VG9nZ2xlU3ltYm9sLnN5bWJvbE5hbWUpO1xuXG5cdFx0XHRcdHZhciB0cywgdGM7XG5cdFx0XHRcdGlmICgodGhpcy51cGRhdGVQbGF5YmFja0V2ZW50cy5pbmRleE9mKGV2LnR5cGUpID4gLTEpIHx8IGV2LmlzVGltZW91dCkge1xuXHRcdFx0XHRcdC8vIGV2bXNnLnB1c2godGhpcy5fcGxheWJhY2tTdGFydFRTLnRvRml4ZWQoMikpO1xuXHRcdFx0XHRcdHRzID0gZXYudGltZVN0YW1wIC0gdGhpcy5fcGxheWJhY2tTdGFydFRTO1xuXHRcdFx0XHRcdHRjID0gdGhpcy52aWRlby5jdXJyZW50VGltZSAtIHRoaXMuX3BsYXliYWNrU3RhcnRUQztcblx0XHRcdFx0XHR0cyAqPSAuMDAxOyAvLyBzIHRvIG1zXG5cdFx0XHRcdFx0ZXZtc2cucHVzaChNYXRoLmFicyh0YyAtIHRzKS50b0ZpeGVkKDMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBlbHNlIHtcblx0XHRcdFx0Ly8gXHR0cyA9IHRoaXMuX3BsYXliYWNrU3RhcnRUUztcblx0XHRcdFx0Ly8gXHR0YyA9IHRoaXMuX3BsYXliYWNrU3RhcnRUQztcblx0XHRcdFx0Ly8gfVxuXHRcdFx0XHQvLyB0cyAqPSAuMDAxOyAvLyBzIHRvIG1zXG5cdFx0XHRcdC8vIGV2bXNnLnB1c2goTWF0aC5hYnModGMgLSB0cykudG9GaXhlZCgzKSk7XG5cdFx0XHRcdC8vIGV2bXNnLnB1c2goXCJUQzpcIiArIHRjLnRvRml4ZWQoMykpO1xuXHRcdFx0XHQvLyBldm1zZy5wdXNoKFwiVFM6XCIgKyB0cy50b0ZpeGVkKDMpKTtcblxuXHRcdFx0XHR0aGlzLl9fbG9nRXZlbnQoZXZtc2cuam9pbihcIiBcIiksIGV2LnR5cGUpO1xuXHRcdFx0XHRpZiAoZXYudHlwZSA9PT0gXCJlcnJvclwiIHx8IGV2LnR5cGUgPT09IFwiYWJvcnRcIikge1xuXHRcdFx0XHRcdHRoaXMuX19sb2dNZXNzYWdlKGZvcm1hdFZpZGVvRXJyb3IodGhpcy52aWRlbyksIGV2LnR5cGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRfX2xvZ0V2ZW50OiBmdW5jdGlvbihtc2csIGxvZ3R5cGUsIGNvbG9yKSB7XG5cdFx0XHRcdHZhciBsb2dFbnRyeUVsID0gdGhpcy5fX2xvZ0VsZW1lbnQubGFzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0aWYgKChsb2dFbnRyeUVsICYmIGxvZ0VudHJ5RWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1sb2d0eXBlXCIpID09IGxvZ3R5cGUpICYmXG5cdFx0XHRcdFx0KChsb2d0eXBlID09PSBcInRpbWV1cGRhdGVcIikgfHwgKGxvZ3R5cGUgPT09IFwicHJvZ3Jlc3NcIikpKSB7XG5cdFx0XHRcdFx0dmFyIGxvZ1JlcGVhdFZhbCA9IHBhcnNlSW50KGxvZ0VudHJ5RWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1sb2dyZXBlYXRcIikpO1xuXHRcdFx0XHRcdGxvZ0VudHJ5RWwudGV4dENvbnRlbnQgPSB0aGlzLl9fZ2V0VFN0YW1wKCkgKyBcIiBcIiArIG1zZztcblx0XHRcdFx0XHRsb2dFbnRyeUVsLnNldEF0dHJpYnV0ZShcImRhdGEtbG9ncmVwZWF0XCIsIGlzTmFOKGxvZ1JlcGVhdFZhbCkgPyAyIDogKytsb2dSZXBlYXRWYWwpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuX19sb2dNZXNzYWdlKG1zZywgbG9ndHlwZSwgY29sb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRfX2dldEhlYWRlclRleHQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gZ2V0VmlkZW9TdGF0c0NvbHMoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cdH0pKG1vZHVsZS5leHBvcnRzKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGhlbHBlciwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1oZWxwZXJzLmhlbHBlck1pc3NpbmcsIGFsaWFzMz1cImZ1bmN0aW9uXCI7XG5cbiAgcmV0dXJuIFwiPGRpdiBpZD1cXFwiZGVzY19iXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMuaWQgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJpZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXFwiIGNsYXNzPVxcXCJjb250ZW50IHNpemluZyBtZG93blxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5kZXNjIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kZXNjIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJkZXNjXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cXG5cIjtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgaGVscGVyLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXMyPWhlbHBlcnMuaGVscGVyTWlzc2luZywgYWxpYXMzPVwiZnVuY3Rpb25cIjtcblxuICByZXR1cm4gXCI8ZGl2IGlkPVxcXCJkZXNjX21cIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5pZCB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXMzID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcImlkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIlxcXCIgY2xhc3M9XFxcImNvbnRlbnQgc2l6aW5nXFxcIj48cD5cIlxuICAgICsgKChzdGFjazEgPSAoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLm5hbWUgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXMzID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcIm5hbWVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvcD5cIlxuICAgICsgKChzdGFjazEgPSAoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLnN1YiB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc3ViIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJzdWJcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvZGl2PlxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzQ29tcGlsZXIgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnNDb21waWxlci50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgaGVscGVyO1xuXG4gIHJldHVybiBcIlx0XHQ8cD48Y29kZT5cIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5pbmZvU3JjIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pbmZvU3JjIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSkse1wibmFtZVwiOlwiaW5mb1NyY1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCI8L2NvZGU+PC9wPlxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGhlbHBlciwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1oZWxwZXJzLmhlbHBlck1pc3NpbmcsIGFsaWFzMz1cImZ1bmN0aW9uXCIsIGFsaWFzND1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJlcnJvci10aXRsZSBjb2xvci1mZyBjb2xvci1yZXZlcnNlXFxcIj5cIlxuICAgICsgYWxpYXM0KCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMubmFtZSB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCkpICE9IG51bGwgPyBoZWxwZXIgOiBhbGlhczIpLCh0eXBlb2YgaGVscGVyID09PSBhbGlhczMgPyBoZWxwZXIuY2FsbChhbGlhczEse1wibmFtZVwiOlwibmFtZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCI8L2Rpdj5cXG48ZGl2IGNsYXNzPVxcXCJlcnJvci1tZXNzYWdlIGNvbG9yLWZnXFxcIj5cXG5cdDxwPjxzdHJvbmc+XCJcbiAgICArIGFsaWFzNCgoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLm5hbWUgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXMyKSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXMzID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcIm5hbWVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiPC9zdHJvbmc+IDxjb2RlPlwiXG4gICAgKyBhbGlhczQoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5tZXNzYWdlIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5tZXNzYWdlIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzMiksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzMyA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJtZXNzYWdlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvY29kZT48L3A+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pbmZvU3JjIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cXG5cIjtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vLyB2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpW1wiZGVmYXVsdFwiXTtcbmNvbnN0IEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGJzZnkvcnVudGltZVwiKTtcbi8qKiBAdHlwZSB7RnVuY3Rpb259ICovXG5jb25zdCBDb2xvciA9IHJlcXVpcmUoXCJjb2xvclwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOmFwcC9jb250cm9sL0dsb2JhbHN9ICovXG5jb25zdCBHbG9iYWxzID0gcmVxdWlyZShcImFwcC9jb250cm9sL0dsb2JhbHNcIik7XG5cbi8vIChmdW5jdGlvbigpIHtcbnZhciBoZWxwZXJzID0ge1xuXHQvKlxuXHQvKiBBcml0aG1ldGljIGhlbHBlcnNcblx0LyovXG5cdGFkZDogZnVuY3Rpb24odmFsdWUsIGFkZGl0aW9uKSB7XG5cdFx0cmV0dXJuIHZhbHVlICsgYWRkaXRpb247XG5cdH0sXG5cdHN1YnRyYWN0OiBmdW5jdGlvbih2YWx1ZSwgc3Vic3RyYWN0aW9uKSB7XG5cdFx0cmV0dXJuIHZhbHVlIC0gc3Vic3RyYWN0aW9uO1xuXHR9LFxuXHRkaXZpZGU6IGZ1bmN0aW9uKHZhbHVlLCBkaXZpc29yKSB7XG5cdFx0cmV0dXJuIHZhbHVlIC8gZGl2aXNvcjtcblx0fSxcblx0bXVsdGlwbHk6IGZ1bmN0aW9uKHZhbHVlLCBtdWx0aXBsaWVyKSB7XG5cdFx0cmV0dXJuIHZhbHVlICogbXVsdGlwbGllcjtcblx0fSxcblx0Zmxvb3I6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0cmV0dXJuIE1hdGguZmxvb3IodmFsdWUpO1xuXHR9LFxuXHRjZWlsOiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdHJldHVybiBNYXRoLmNlaWwodmFsdWUpO1xuXHR9LFxuXHRyb3VuZDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSk7XG5cdH0sXG5cdGdsb2JhbDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRyZXR1cm4gR2xvYmFsc1t2YWx1ZV07XG5cdH0sXG5cblx0Lypcblx0LyogRmxvdyBjb250cm9sIGhlbHBlcnNcblx0LyovXG5cdGlzOiBmdW5jdGlvbihhLCBiLCBvcHRzKSB7XG5cdFx0cmV0dXJuIChhID09PSBiKSA/IG9wdHMuZm4odGhpcykgOiBvcHRzLmludmVyc2UodGhpcyk7XG5cdH0sXG5cdGlzbm90OiBmdW5jdGlvbihhLCBiLCBvcHRzKSB7XG5cdFx0cmV0dXJuIChhICE9PSBiKSA/IG9wdHMuZm4odGhpcykgOiBvcHRzLmludmVyc2UodGhpcyk7XG5cdH0sXG5cdGlzYW55OiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGlpID0gYXJndW1lbnRzLmxlbmd0aCAtIDIsXG5cdFx0XHRvcHRzID0gYXJndW1lbnRzW2lpICsgMV07XG5cdFx0ZG9cblx0XHRcdGlmICh2YWx1ZSA9PT0gYXJndW1lbnRzWysraV0pIHtcblx0XHRcdFx0cmV0dXJuIG9wdHMuZm4odGhpcyk7XG5cdFx0XHR9XG5cdFx0d2hpbGUgKGkgPCBpaSk7XG5cdFx0cmV0dXJuIG9wdHMuaW52ZXJzZSh0aGlzKTtcblx0fSxcblx0Y29udGFpbnM6IGZ1bmN0aW9uKGEsIGIsIG9wdHMpIHtcblx0XHRyZXR1cm4gKGEuaW5kZXhPZihiKSAhPT0gLTEpID8gb3B0cy5mbih0aGlzKSA6IG9wdHMuaW52ZXJzZSh0aGlzKTtcblx0fSxcblx0aWdub3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gXCJcIjtcblx0fSxcblxuXHQvKlxuXHQvKiBDb2xvciBoZWxwZXJzXG5cdC8qL1xuXHRtaXg6IGZ1bmN0aW9uKGNvbG9yYSwgY29sb3JiLCBhbW91bnQpIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yYSkubWl4KG5ldyBDb2xvcihjb2xvcmIpLCBhbW91bnQpLnJnYigpLnN0cmluZygpO1xuXHR9LFxuXHRsaWdodGVuOiBmdW5jdGlvbihjb2xvciwgYW1vdW50KSB7XG5cdFx0cmV0dXJuIG5ldyBDb2xvcihjb2xvcikubGlnaHRlbihhbW91bnQpLnJnYigpLnN0cmluZygpO1xuXHR9LFxuXHRkYXJrZW46IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yKS5kYXJrZW4oYW1vdW50KS5yZ2IoKS5zdHJpbmcoKTtcblx0fSxcblx0Ly8gY29sb3JGb3JtYXQ6IGZ1bmN0aW9uKGNvbG9yLCBmbXQpIHtcblx0Ly8gXHRzd2l0Y2ggKGZtdCkge1xuXHQvLyBcdFx0Y2FzZSBcInJnYlwiOlxuXHQvLyBcdFx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yKS5yZ2IoKS5zdHJpbmcoKTtcblx0Ly8gXHRcdGNhc2UgXCJoc2xcIjpcblx0Ly8gXHRcdFx0cmV0dXJuIG5ldyBDb2xvcihjb2xvcikuaHNsKCkuc3RyaW5nKCk7XG5cdC8vIFx0XHRjYXNlIFwiaGV4XCI6IGRlZmF1bHQ6XG5cdC8vIFx0XHRcdHJldHVybiBuZXcgQ29sb3IoY29sb3IpLmhleCgpLnN0cmluZygpO1xuXHQvLyBcdH1cblx0Ly8gfSxcbn07XG5mb3IgKHZhciBoZWxwZXIgaW4gaGVscGVycykge1xuXHRpZiAoaGVscGVycy5oYXNPd25Qcm9wZXJ0eShoZWxwZXIpKSB7XG5cdFx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihoZWxwZXIsIGhlbHBlcnNbaGVscGVyXSk7XG5cdH1cbn1cbi8vIH0pKCk7XG5cbi8vIG1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycztcbiIsIlwidXNlIHN0cmljdFwiO1xuLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIjxzdmcgY2xhc3M9XFxcImZ1bGxzY3JlZW4tc3ltYm9sXFxcIiB2ZXJzaW9uPVxcXCIxLjFcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgeG1sbnM6eGxpbms9XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcXFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XFxcInhNaWRZTWlkIG1lZXRcXFwiIHZpZXdCb3g9XFxcIi0yMSAtMjEgNDIgNDJcXFwiPlxcblx0PHBhdGggaWQ9XFxcImZ1bGxzY3JlZW4tc2hhZG93XFxcIiBkPVxcXCJNLTUsNSBMLTIwLDIwIE0tNywyMCBMLTIwLDIwIEwtMjAsNyBNNSwtNSBMMjAsLTIwIE03LC0yMCBMMjAsLTIwIEwyMCwtN1xcXCIgY2xhc3M9XFxcImJnLWNvbG9yLXN0cm9rZVxcXCIgc3R5bGU9XFxcImZpbGw6bm9uZVxcXCIgdmVjdG9yLWVmZmVjdD1cXFwibm9uLXNjYWxpbmctc3Ryb2tlXFxcIiB0cmFuc2Zvcm09XFxcInRyYW5zbGF0ZSgyIDIpXFxcIi8+XFxuXHQ8cGF0aCBpZD1cXFwiZnVsbHNjcmVlbi1wYXRoXFxcIiBkPVxcXCJNLTUsNSBMLTIwLDIwIE0tNywyMCBMLTIwLDIwIEwtMjAsNyBNNSwtNSBMMjAsLTIwIE03LC0yMCBMMjAsLTIwIEwyMCwtN1xcXCIgY2xhc3M9XFxcImNvbG9yLXN0cm9rZVxcXCIgc3R5bGU9XFxcImZpbGw6bm9uZVxcXCIgdmVjdG9yLWVmZmVjdD1cXFwibm9uLXNjYWxpbmctc3Ryb2tlXFxcIiAvPlxcbjwvc3ZnPlxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKiBAdHlwZSB7bW9kdWxlOmJhY2tib25lfSAqL1xuY29uc3QgRXZlbnRzID0gcmVxdWlyZShcImJhY2tib25lXCIpLkV2ZW50cztcblxuXG4vLyB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4vLyBcdHRpY2s6IDEsXG4vLyBcdG9uc3RhcnQ6IG51bGwsXG4vLyBcdG9udGljazogbnVsbCxcbi8vIFx0b25wYXVzZTogbnVsbCxcbi8vIFx0b25zdG9wOiBudWxsLFxuLy8gXHRvbmVuZDogbnVsbFxuLy8gfVxudmFyIGlkU2VlZCA9IDA7XG5cbnZhciBUaW1lciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0Ly8gaWYgKCEodGhpcyBpbnN0YW5jZW9mIFRpbWVyKSkge1xuXHQvLyBcdHJldHVybiBuZXcgVGltZXIob3B0aW9ucyk7XG5cdC8vIH1cblx0dGhpcy5faWQgPSBpZFNlZWQrKztcblx0Ly8gdGhpcy5fb3B0aW9ucyA9IHt9O1xuXHR0aGlzLl9kdXJhdGlvbiA9IDA7XG5cdHRoaXMuX3N0YXR1cyA9IFwiaW5pdGlhbGl6ZWRcIjtcblx0dGhpcy5fc3RhcnQgPSAwO1xuXHQvLyB0aGlzLl9tZWFzdXJlcyA9IFtdO1xuXG5cdC8vIGZvciAodmFyIHByb3AgaW4gZGVmYXVsdE9wdGlvbnMpIHtcblx0Ly8gXHR0aGlzLl9vcHRpb25zW3Byb3BdID0gZGVmYXVsdE9wdGlvbnNbcHJvcF07XG5cdC8vIH1cblx0Ly8gdGhpcy5vcHRpb25zKG9wdGlvbnMpO1xufTtcblxuXy5leHRlbmQoVGltZXIucHJvdG90eXBlLCBFdmVudHMsIHtcblxuXHRzdGFydDogZnVuY3Rpb24oZHVyYXRpb24pIHtcblx0XHRpZiAoIV8uaXNOdW1iZXIoZHVyYXRpb24pICYmICF0aGlzLl9kdXJhdGlvbikge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdC8vIGR1cmF0aW9uICYmIChkdXJhdGlvbiAqPSAxMDAwKVxuXHRcdGlmICh0aGlzLl90aW1lb3V0ICYmIHRoaXMuX3N0YXR1cyA9PT0gXCJzdGFydGVkXCIpIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHR2YXIgZXZOYW1lID0gKHRoaXMuX3N0YXR1cyA9PT0gXCJzdG9wcGVkXCIpID8gXCJzdGFydFwiIDogXCJyZXN1bWVcIjtcblx0XHR0aGlzLl9kdXJhdGlvbiA9IGR1cmF0aW9uIHx8IHRoaXMuX2R1cmF0aW9uO1xuXHRcdHRoaXMuX3RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChlbmQuYmluZCh0aGlzKSwgdGhpcy5fZHVyYXRpb24pO1xuXHRcdC8vIGlmICh0eXBlb2YgdGhpcy5fb3B0aW9ucy5vbnRpY2sgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdC8vIFx0dGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblx0XHQvLyBcdFx0dGhpcy50cmlnZ2VyKFwidGlja1wiLCB0aGlzLmdldER1cmF0aW9uKCkpXG5cdFx0Ly8gXHR9LmJpbmQodGhpcyksICt0aGlzLl9vcHRpb25zLnRpY2sgKiAxMDAwKVxuXHRcdC8vIH1cblx0XHR0aGlzLl9zdGFydCA9IF9ub3coKTtcblx0XHR0aGlzLl9zdGF0dXMgPSBcInN0YXJ0ZWRcIjtcblx0XHR0aGlzLnRyaWdnZXIoZXZOYW1lLCB0aGlzLmdldER1cmF0aW9uKCkpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHBhdXNlOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5fc3RhdHVzICE9PSBcInN0YXJ0ZWRcIikge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdHRoaXMuX2R1cmF0aW9uIC09IChfbm93KCkgLSB0aGlzLl9zdGFydCk7XG5cdFx0Y2xlYXIuY2FsbCh0aGlzLCBmYWxzZSk7XG5cdFx0dGhpcy5fc3RhdHVzID0gXCJwYXVzZWRcIjtcblx0XHR0aGlzLnRyaWdnZXIoXCJwYXVzZVwiLCB0aGlzLmdldER1cmF0aW9uKCkpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHN0b3A6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghL3N0YXJ0ZWR8cGF1c2VkLy50ZXN0KHRoaXMuX3N0YXR1cykpIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRjbGVhci5jYWxsKHRoaXMsIHRydWUpO1xuXHRcdHRoaXMuX3N0YXR1cyA9IFwic3RvcHBlZFwiO1xuXHRcdHRoaXMudHJpZ2dlcihcInN0b3BcIik7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0Z2V0RHVyYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl9zdGF0dXMgPT09IFwic3RhcnRlZFwiKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fZHVyYXRpb24gLSAoX25vdygpIC0gdGhpcy5fc3RhcnQpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5fc3RhdHVzID09PSBcInBhdXNlZFwiKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fZHVyYXRpb247XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdGdldFN0YXR1czogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3N0YXR1cztcblx0fSxcbn0pO1xuXG52YXIgX25vdyA9IHdpbmRvdy5wZXJmb3JtYW5jZSA/XG5cdHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cuYmluZCh3aW5kb3cucGVyZm9ybWFuY2UpIDpcblx0RGF0ZS5ub3cuYmluZChEYXRlKTtcblxuZnVuY3Rpb24gZW5kKCkge1xuXHRjbGVhci5jYWxsKHRoaXMpO1xuXHR0aGlzLl9zdGF0dXMgPSBcInN0b3BwZWRcIjtcblx0dGhpcy50cmlnZ2VyKFwiZW5kXCIpO1xufVxuXG5mdW5jdGlvbiBjbGVhcihjbGVhckR1cmF0aW9uKSB7XG5cdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG5cdC8vIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTtcblx0aWYgKGNsZWFyRHVyYXRpb24gPT09IHRydWUpIHtcblx0XHR0aGlzLl9kdXJhdGlvbiA9IDA7XG5cdH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVGltZXIucHJvdG90eXBlLCB7XG5cdGR1cmF0aW9uOiB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0RHVyYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0YXR1czoge1xuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmdldFN0YXR1cygpO1xuXHRcdH1cblx0fVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRpbWVyLCB7XG5cdFNUT1BQRUQ6IHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdHZhbHVlOiBcInN0b3BwZWRcIlxuXHR9LFxuXHRTVEFSVEVEOiB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHR2YWx1ZTogXCJzdGFydGVkXCJcblx0fSxcblx0UEFVU0VEOiB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHR2YWx1ZTogXCJwYXVzZWRcIlxuXHR9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVGltZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qIEltcG9ydHNcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL1RyYW5zZm9ybUl0ZW19ICovXG5jb25zdCBUcmFuc2Zvcm1JdGVtID0gcmVxdWlyZShcIi4vVHJhbnNmb3JtSXRlbVwiKTtcblxudmFyIGlkU2VlZCA9IDA7XG52YXIgY2lkU2VlZCA9IDEwMDtcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEB0eXBlIHttb2R1bGU6YXBwL2hlbHBlci9UcmFuc2Zvcm1IZWxwZXJ9XG4gKi9cbmZ1bmN0aW9uIFRyYW5zZm9ybUhlbHBlcigpIHtcblx0dGhpcy5pZCA9IGlkU2VlZCsrO1xuXHR0aGlzLl9pdGVtcyA9IFtdO1xuXHR0aGlzLl9pdGVtc0J5SWQgPSB7fTtcbn1cblxuVHJhbnNmb3JtSGVscGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoe1xuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogUHJpdmF0ZVxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0X2dldDogZnVuY3Rpb24oZWwpIHtcblx0XHRpZiAodGhpcy5oYXMoZWwpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5faXRlbXNCeUlkW2VsLmVpZF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLl9hZGQoZWwpO1xuXHRcdH1cblx0fSxcblxuXHRfYWRkOiBmdW5jdGlvbihlbCkge1xuXHRcdHZhciBpdGVtLCBpZDtcblx0XHQvLyBpZCA9IGVsLmVpZCB8fCBlbC5jaWQgfHwgZWwuaWQ7XG5cdFx0Ly8gaWYgKCFpZCB8fCAodGhpcy5faXRlbXNCeUlkW2lkXSAmJiAodGhpcy5faXRlbXNCeUlkW2lkXS5lbCAhPT0gZWwpKSkge1xuXHRcdC8vIFx0aWQgPSBcImVsdFwiICsgY2lkU2VlZCsrO1xuXHRcdC8vIH1cblx0XHQvLyBpZiAoIWVsLmVpZCkge1xuXHRcdC8vIFx0aWQgPSBlbC5laWQgfHwgZWwuY2lkIHx8IChcImVsdFwiICsgY2lkU2VlZCsrKTtcblx0XHQvLyB9XG5cdFx0aWQgPSBlbC5laWQgfHwgZWwuY2lkIHx8IChcImVsdFwiICsgY2lkU2VlZCsrKTtcblx0XHRpdGVtID0gbmV3IFRyYW5zZm9ybUl0ZW0oZWwsIGlkKTtcblx0XHR0aGlzLl9pdGVtc0J5SWRbaWRdID0gaXRlbTtcblx0XHR0aGlzLl9pdGVtcy5wdXNoKGl0ZW0pO1xuXHRcdHJldHVybiBpdGVtO1xuXHR9LFxuXG5cdF9yZW1vdmU6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0aWYgKHRoaXMuaGFzKGVsKSkge1xuXHRcdFx0dmFyIG8gPSB0aGlzLl9pdGVtc0J5SWRbZWwuZWlkXTtcblx0XHRcdHRoaXMuX2l0ZW1zLnNwbGljZSh0aGlzLl9pdGVtcy5pbmRleE9mKG8pLCAxKTtcblx0XHRcdG8uZGVzdHJveSgpO1xuXHRcdFx0ZGVsZXRlIHRoaXMuX2l0ZW1zQnlJZFtlbC5laWRdO1xuXHRcdH1cblx0fSxcblxuXHRfaW52b2tlOiBmdW5jdGlvbihmdW5jTmFtZSwgYXJncywgc3RhcnRJbmRleCkge1xuXHRcdHZhciBpLCBpaSwgaiwgamosIGVsLCBvLCBycjtcblx0XHR2YXIgZnVuY0FyZ3MgPSBudWxsO1xuXHRcdGlmIChzdGFydEluZGV4ICE9PSB2b2lkIDApIHtcblx0XHRcdGZ1bmNBcmdzID0gc2xpY2UuY2FsbChhcmdzLCAwLCBzdGFydEluZGV4KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RhcnRJbmRleCA9IDA7XG5cdFx0fVxuXHRcdGZvciAoaSA9IHN0YXJ0SW5kZXgsIGlpID0gYXJncy5sZW5ndGgsIHJyID0gW107IGkgPCBpaTsgKytpKSB7XG5cdFx0XHRlbCA9IGFyZ3NbaV07XG5cdFx0XHQvLyBpdGVyYXRlIG9uIE5vZGVMaXN0LCBBcmd1bWVudHMsIEFycmF5Li4uXG5cdFx0XHRpZiAoZWwubGVuZ3RoKSB7XG5cdFx0XHRcdGZvciAoaiA9IDAsIGpqID0gZWwubGVuZ3RoOyBqIDwgamo7ICsraikge1xuXHRcdFx0XHRcdG8gPSB0aGlzLl9nZXQoZWxbal0pO1xuXHRcdFx0XHRcdHJyLnB1c2gob1tmdW5jTmFtZV0uYXBwbHkobywgZnVuY0FyZ3MpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0byA9IHRoaXMuX2dldChlbCk7XG5cdFx0XHRcdHJyLnB1c2gob1tmdW5jTmFtZV0uYXBwbHkobywgZnVuY0FyZ3MpKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJyO1xuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogUHVibGljXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRoYXM6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0cmV0dXJuIGVsLmVpZCAmJiB0aGlzLl9pdGVtc0J5SWRbZWwuZWlkXSAhPT0gdm9pZCAwO1xuXHR9LFxuXG5cdGdldEl0ZW1zOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaSwgaiwgZWwsIHJldCA9IFtdO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHtcblx0XHRcdGVsID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKGVsLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgZWwubGVuZ3RoOyArK2opIHtcblx0XHRcdFx0XHRyZXQucHVzaCh0aGlzLl9nZXQoZWxbal0pKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0LnB1c2godGhpcy5fZ2V0KGVsKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Z2V0OiBmdW5jdGlvbihlbCkge1xuXHRcdHJldHVybiB0aGlzLl9nZXQoZWwpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGksIGosIGVsO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpIHtcblx0XHRcdGVsID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKGVsLmxlbmd0aCkge1xuXHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgZWwubGVuZ3RoOyArK2opIHtcblx0XHRcdFx0XHR0aGlzLl9nZXQoZWxbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9nZXQoZWwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpLCBqLCBlbDtcblx0XHRmb3IgKGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRlbCA9IGFyZ3VtZW50c1tpXTtcblx0XHRcdGlmIChlbC5sZW5ndGgpIHtcblx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IGVsLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0dGhpcy5fcmVtb3ZlKGVsW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fcmVtb3ZlKGVsKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogcHVibGljXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0LyogcHVibGljOiBzaW5nbGUgYXJnXG5cdC8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gKi9cblxuXHRoYXNPZmZzZXQ6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0cmV0dXJuIHRoaXMuaGFzKGVsKSA/IHRoaXMuX2l0ZW1zQnlJZFtlbC5laWRdLmhhc09mZnNldCA6ICh2b2lkIDApO1xuXHR9LFxuXG5cdC8qIHB1YmxpYzogY2FwdHVyZVxuXHQvKiAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtICovXG5cblx0Y2FwdHVyZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5faW52b2tlKFwiY2FwdHVyZVwiLCBhcmd1bWVudHMpO1xuXHR9LFxuXHRjYXB0dXJlQWxsOiBmdW5jdGlvbigpIHtcblx0XHRmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLl9pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG5cdFx0XHR0aGlzLl9pdGVtc1tpXS5jYXB0dXJlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdGNsZWFyQ2FwdHVyZTogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5faW52b2tlKFwiY2xlYXJDYXB0dXJlXCIsIGFyZ3VtZW50cyk7XG5cdH0sXG5cdGNsZWFyQWxsQ2FwdHVyZXM6IGZ1bmN0aW9uKCkge1xuXHRcdGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuX2l0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHRcdHRoaXMuX2l0ZW1zW2ldLmNsZWFyQ2FwdHVyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvKiBwdWJsaWM6IG9mZnNldFxuXHQvKiAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtICovXG5cdG9mZnNldDogZnVuY3Rpb24oeCwgeSkge1xuXHRcdHRoaXMuX2ludm9rZShcIm9mZnNldFwiLCBhcmd1bWVudHMsIDIpO1xuXHR9LFxuXHRvZmZzZXRBbGw6IGZ1bmN0aW9uKHgsIHkpIHtcblx0XHRmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLl9pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG5cdFx0XHR0aGlzLl9pdGVtc1tpXS5vZmZzZXQoeCwgeSk7XG5cdFx0fVxuXHR9LFxuXG5cdGNsZWFyT2Zmc2V0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9pbnZva2UoXCJjbGVhck9mZnNldFwiLCBhcmd1bWVudHMpO1xuXHR9LFxuXHRjbGVhckFsbE9mZnNldHM6IGZ1bmN0aW9uKCkge1xuXHRcdGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuX2l0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHRcdHRoaXMuX2l0ZW1zW2ldLmNsZWFyT2Zmc2V0KCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qIHB1YmxpYzogdHJhbnNpdGlvbnNcblx0LyogLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAqL1xuXG5cdHJ1blRyYW5zaXRpb246IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHtcblx0XHR0aGlzLl9pbnZva2UoXCJydW5UcmFuc2l0aW9uXCIsIGFyZ3VtZW50cywgMSk7XG5cdH0sXG5cdHJ1bkFsbFRyYW5zaXRpb25zOiBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5faXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0dGhpcy5faXRlbXNbaV0ucnVuVHJhbnNpdGlvbih0cmFuc2l0aW9uKTtcblx0XHR9XG5cdH0sXG5cblx0Y2xlYXJUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9pbnZva2UoXCJjbGVhclRyYW5zaXRpb25cIiwgYXJndW1lbnRzKTtcblx0fSxcblx0Y2xlYXJBbGxUcmFuc2l0aW9uczogZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5faXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0dGhpcy5faXRlbXNbaV0uY2xlYXJUcmFuc2l0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXG5cdHN0b3BUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9pbnZva2UoXCJzdG9wVHJhbnNpdGlvblwiLCBhcmd1bWVudHMpO1xuXHR9LFxuXHRzdG9wQWxsVHJhbnNpdGlvbnM6IGZ1bmN0aW9uKCkge1xuXHRcdGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuX2l0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHRcdHRoaXMuX2l0ZW1zW2ldLnN0b3BUcmFuc2l0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXG5cdHdoZW5UcmFuc2l0aW9uRW5kczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJlcyA9IHRoaXMuX2ludm9rZShcIndoZW5UcmFuc2l0aW9uRW5kc1wiLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiByZXMubGVuZ3RoICE9IDAgP1xuXHRcdFx0UHJvbWlzZS5hbGwocmVzKSA6XG5cdFx0XHRQcm9taXNlLnJlc29sdmUobnVsbCk7XG5cdH0sXG5cdHdoZW5BbGxUcmFuc2l0aW9uc0VuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICh0aGlzLl9pdGVtcy5sZW5ndGggIT0gMCkgPyBQcm9taXNlLmFsbCh0aGlzLl9pdGVtcy5tYXAoZnVuY3Rpb24obykge1xuXHRcdFx0cmV0dXJuIG8ud2hlblRyYW5zaXRpb25FbmRzKCk7XG5cdFx0fSkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuXHR9LFxuXG5cdHByb21pc2U6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09IDAgP1xuXHRcdFx0dGhpcy53aGVuQWxsVHJhbnNpdGlvbnNFbmQoKSA6XG5cdFx0XHR0aGlzLndoZW5UcmFuc2l0aW9uRW5kcy5jYWxsKHRoaXMsIGFyZ3VtZW50cyk7XG5cdH0sXG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiB2YWxpZGF0aW9uXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHR2YWxpZGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5faXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdFx0dGhpcy5faXRlbXNbaV0udmFsaWRhdGUoKTtcblx0XHR9XG5cdH0sXG59LCB7XG5cdGl0ZW1zOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9pdGVtcztcblx0XHR9XG5cdH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zZm9ybUhlbHBlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogSW1wb3J0c1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvcHJlZml4ZWRQcm9wZXJ0eX0gKi9cbmNvbnN0IHByZWZpeGVkUHJvcGVydHkgPSByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRQcm9wZXJ0eVwiKTtcbi8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkU3R5bGVOYW1lfSAqL1xuY29uc3QgcHJlZml4ZWRTdHlsZU5hbWUgPSByZXF1aXJlKFwidXRpbHMvcHJlZml4ZWRTdHlsZU5hbWVcIik7XG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9wcmVmaXhlZEV2ZW50fSAqL1xuY29uc3QgcHJlZml4ZWRFdmVudCA9IHJlcXVpcmUoXCJ1dGlscy9wcmVmaXhlZEV2ZW50XCIpO1xuLyoqIEB0eXBlIHtTdHJpbmd9ICovXG52YXIgdHJhbnNpdGlvbkVuZCA9IHByZWZpeGVkRXZlbnQoXCJ0cmFuc2l0aW9uZW5kXCIpO1xuLy92YXIgdHJhbnNpdGlvbkVuZCA9IHJlcXVpcmUoXCJ1dGlscy9ldmVudC90cmFuc2l0aW9uRW5kXCIpO1xuLy8gLyoqIEB0eXBlIHtGdW5jdGlvbn0gKi9cbi8vIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLy8gLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvZGVidWcvdHJhY2VFbGVtZW50fSAqL1xuLy8gdmFyIHRyYWNlRWx0ID0gcmVxdWlyZShcIi4vZGVidWcvdHJhY2VFbGVtZW50XCIpO1xuLy8gdmFyIHRyYWNlRWx0Q2FjaGUgPSB7fTtcbi8vIHZhciBsb2cgPSBmdW5jdGlvbigpIHtcbi8vIFx0dmFyIGxvZ0ZuID0gXCJsb2dcIjtcbi8vIFx0dmFyIGFyZ3MgPSBzbGljZS5hcHBseShhcmd1bWVudHMpO1xuLy8gXHRzd2l0Y2goYXJnc1swXSkge1xuLy8gXHRcdGNhc2UgXCJlcnJvclwiOlxuLy8gXHRcdGNhc2UgXCJ3YXJuXCI6XG4vLyBcdFx0Y2FzZSBcImluZm9cIjpcbi8vIFx0XHRcdGxvZ0ZuID0gYXJncy5zaGlmdCgpO1xuLy8gXHRcdFx0YnJlYWs7XG4vLyBcdFx0ZGVmYXVsdDpcbi8vIFx0XHRcdC8vIGJyZWFrO1xuLy8gXHRcdFx0cmV0dXJuO1xuLy8gXHR9XG4vLyBcdHZhciBlbCwgdHhJZDtcbi8vIFx0aWYgKChlbCA9IGFyZ3NbMF0pICYmICh0eElkID0gZWwuZWlkKSkge1xuLy8gXHRcdGFyZ3NbMF0gPSB0cmFjZUVsdENhY2hlW3R4SWRdIHx8ICh0cmFjZUVsdENhY2hlW3R4SWRdID0gZWwpO1xuLy8gXHR9XG4vLyBcdGFyZ3NbMF0gPSBcIlxcdFwiICsgYXJnc1swXTtcbi8vIFx0Y29uc29sZVtsb2dGbl0uYXBwbHkoY29uc29sZSwgYXJncyk7XG4vLyB9O1xuXG4vKiBqc2hpbnQgLVcwNzkgKi9cbi8vIHZhciBjb25zb2xlID0gKGZ1bmN0aW9uKHRhcmdldCkge1xuLy8gXHRyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KS5yZWR1Y2UoZnVuY3Rpb24ocHJveHksIHByb3ApIHtcbi8vIFx0XHRpZiAoKHR5cGVvZiB0YXJnZXRbcHJvcF0pID09IFwiZnVuY3Rpb25cIikge1xuLy8gXHRcdFx0c3dpdGNoIChwcm9wKSB7XG4vLyBcdFx0XHRcdGNhc2UgXCJlcnJvclwiOlxuLy8gXHRcdFx0XHRjYXNlIFwid2FyblwiOlxuLy8gXHRcdFx0XHRjYXNlIFwiaW5mb1wiOlxuLy8gXHRcdFx0XHRcdHByb3h5W3Byb3BdID0gZnVuY3Rpb24gKCkge1xuLy8gXHRcdFx0XHRcdFx0dmFyIGFyZ3MgPSBzbGljZS5hcHBseShhcmd1bWVudHMpO1xuLy8gXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09IFwic3RyaW5nXCIpIHtcbi8vIFx0XHRcdFx0XHRcdFx0YXJnc1swXSA9IHByb3AgKyBcIjo6XCIgKyBhcmdzWzBdO1xuLy8gXHRcdFx0XHRcdFx0fVxuLy8gXHRcdFx0XHRcdFx0cmV0dXJuIHRhcmdldFtwcm9wXS5hcHBseSh0YXJnZXQsIGFyZ3MpO1xuLy8gXHRcdFx0XHRcdH07XG4vLyBcdFx0XHRcdFx0YnJlYWs7XG4vLyBcdFx0XHRcdGNhc2UgXCJsb2dcIjpcbi8vIFx0XHRcdFx0XHRwcm94eVtwcm9wXSA9IGZ1bmN0aW9uKCkge307XG4vLyBcdFx0XHRcdFx0YnJlYWs7XG4vLyBcdFx0XHRcdGRlZmF1bHQ6XG4vLyBcdFx0XHRcdFx0cHJveHlbcHJvcF0gPSB0YXJnZXRbcHJvcF0uYmluZCh0YXJnZXQpO1xuLy8gXHRcdFx0XHRcdGJyZWFrO1xuLy8gXHRcdFx0fVxuLy8gXHRcdH0gZWxzZSB7XG4vLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkocHJveHksIHByb3AsIHtcbi8vIFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldFtwcm9wXTsgfSxcbi8vIFx0XHRcdFx0c2V0OiBmdW5jdGlvbih2YWwpIHsgdGFyZ2V0W3Byb3BdID0gdmFsOyB9XG4vLyBcdFx0XHR9KTtcbi8vIFx0XHR9XG4vLyBcdFx0cmV0dXJuIHByb3h5O1xuLy8gXHR9LCB7fSk7XG4vLyB9KSh3aW5kb3cuY29uc29sZSk7XG4vKiBqc2hpbnQgK1cwNzkgKi9cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyogUHJpdmF0ZSBzdGF0aWNcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIE5PX1RSQU5TSVRJT05fVkFMVUUgPSBcIm5vbmUgMHMgc3RlcC1zdGFydCAwc1wiO1xuLy8gdmFyIE5PX1RSQU5TSVRJT05fVkFMVUUgPSBcImFsbCAwLjAwMXMgc3RlcC1zdGFydCAwLjAwMXNcIjtcblxudmFyIFVOU0VUX1RSQU5TSVRJT04gPSB7XG5cdG5hbWU6IFwidW5zZXRcIixcblx0Y2xhc3NOYW1lOiBcInR4LXVuc2V0XCIsXG5cdHByb3BlcnR5OiBcIm5vbmVcIixcblx0ZWFzaW5nOiBcImVhc2VcIixcblx0ZGVsYXk6IDAsXG5cdGR1cmF0aW9uOiAwLFxuXHRjc3NUZXh0OiBcInVuc2V0XCIsXG59O1xuXG4vLyB2YXIgdHJhbnNsYXRlVGVtcGxhdGUgPSBfLnRlbXBsYXRlKFwidHJhbnNsYXRlKDwlPSBfcmVuZGVyZWRYICU+cHgsIDwlPSBfcmVuZGVyZWRZICU+cHgpXCI7XG4vLyB2YXIgdHJhbnNsYXRlM2RUZW1wbGF0ZSA9IF8udGVtcGxhdGUoXCJ0cmFuc2xhdGUzZCg8JT0gX3JlbmRlcmVkWCAlPnB4LCA8JT0gX3JlbmRlcmVkWSAlPnB4LCAwcHgpXCI7XG4vLyB2YXIgdHJhbnNpdGlvblRlbXBsYXRlID0gXy50ZW1wbGF0ZShcIjwlPSBwcm9wZXJ0eSAlPiA8JSBkdXJhdGlvbi8xMDAwICU+cyA8JT0gZWFzaW5nICU+IDwlIGRlbGF5LzEwMDAgJT5zXCIpO1xuXG52YXIgdHJhbnNsYXRlVGVtcGxhdGUgPSAoZnVuY3Rpb24oZm4pIHtcblx0cmV0dXJuIGZ1bmN0aW9uKG8pIHtcblx0XHRyZXR1cm4gZm4oby5fcmVuZGVyZWRYLCBvLl9yZW5kZXJlZFkpO1xuXHR9O1xufShyZXF1aXJlKFwiYXBwL2NvbnRyb2wvR2xvYmFsc1wiKS5UUkFOU0xBVEVfVEVNUExBVEUpKTtcblxudmFyIHRyYW5zaXRpb25UZW1wbGF0ZSA9IGZ1bmN0aW9uKG8pIHtcblx0cmV0dXJuIG8ucHJvcGVydHkgKyBcIiBcIiArXG5cdFx0by5kdXJhdGlvbiAvIDEwMDAgKyBcInMgXCIgK1xuXHRcdG8uZWFzaW5nICsgXCIgXCIgK1xuXHRcdG8uZGVsYXkgLyAxMDAwICsgXCJzXCI7XG59O1xuXG52YXIgcHJvcERlZmF1bHRzID0ge1xuXHRcIm9wYWNpdHlcIjogXCIxXCIsXG5cdFwidmlzaWJpbGl0eVwiOiBcInZpc2libGVcIixcblx0XCJ0cmFuc2Zvcm1cIjogXCJtYXRyaXgoMSwgMCwgMCwgMSwgMCwgMClcIixcblx0XCJ0cmFuc2Zvcm1TdHlsZVwiOiBcIlwiLFxuXHRcInRyYW5zaXRpb25cIjogXCJcIixcblx0Ly8gXCJ3aWxsQ2hhbmdlXCI6IFwiXCIsXG5cdC8vIFwidHJhbnNpdGlvbkR1cmF0aW9uXCI6IFwiMHNcIixcblx0Ly8gXCJ0cmFuc2l0aW9uRGVsYXlcIjogXCIwc1wiLFxuXHQvLyBcInRyYW5zaXRpb25Qcm9wZXJ0eVwiOiBcIm5vbmVcIixcblx0Ly8gXCJ0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb25cIjogXCJlYXNlXCJcbn07XG52YXIgcHJvcEtleXMgPSBPYmplY3Qua2V5cyhwcm9wRGVmYXVsdHMpO1xudmFyIHByb3BOYW1lcyA9IHByb3BLZXlzLnJlZHVjZShmdW5jdGlvbihvYmosIHByb3BOYW1lKSB7XG5cdG9ialtwcm9wTmFtZV0gPSBwcmVmaXhlZFByb3BlcnR5KHByb3BOYW1lKTtcblx0cmV0dXJuIG9iajtcbn0sIHt9KTtcblxudmFyIHN0eWxlTmFtZXMgPSAoZnVuY3Rpb24oY2FtZWxUb0Rhc2hlZCkge1xuXHRyZXR1cm4gcHJvcEtleXNcblx0XHQubWFwKGNhbWVsVG9EYXNoZWQpXG5cdFx0LnJlZHVjZShmdW5jdGlvbihvYmosIHByb3BOYW1lKSB7XG5cdFx0XHRvYmpbcHJvcE5hbWVdID0gcHJlZml4ZWRTdHlsZU5hbWUocHJvcE5hbWUpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9LCB7fSk7XG59KShyZXF1aXJlKFwidXRpbHMvc3RyaW5ncy9jYW1lbFRvRGFzaGVkXCIpKTtcblxudmFyIHJlc29sdmVBbGwgPSBmdW5jdGlvbihwcCwgcmVzdWx0KSB7XG5cdGlmIChwcC5sZW5ndGggIT0gMCkge1xuXHRcdHBwLmZvckVhY2goZnVuY3Rpb24ocCwgaSwgYSkge1xuXHRcdFx0cC5yZXNvbHZlKHJlc3VsdCk7XG5cdFx0XHRhW2ldID0gbnVsbDtcblx0XHR9KTtcblx0XHRwcC5sZW5ndGggPSAwO1xuXHR9XG5cdHJldHVybiBwcDtcbn07XG5cbnZhciByZWplY3RBbGwgPSBmdW5jdGlvbihwcCwgcmVhc29uKSB7XG5cdGlmIChwcC5sZW5ndGggIT0gMCkge1xuXHRcdHBwLmZvckVhY2goZnVuY3Rpb24ocCwgaSwgYSkge1xuXHRcdFx0cC5yZWplY3QocmVhc29uKTsvL1xuXHRcdFx0YVtpXSA9IG51bGw7XG5cdFx0fSk7XG5cdFx0cHAubGVuZ3RoID0gMDsvL1xuXHR9XG5cdHJldHVybiBwcDtcbn07XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFRyYW5zZm9ybUl0ZW1cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIFRyYW5zZm9ybUl0ZW0gPSBmdW5jdGlvbihlbCwgaWQpIHtcblx0dGhpcy5lbCA9IGVsO1xuXHR0aGlzLmlkID0gaWQ7XG5cdHRoaXMuZWwuZWlkID0gaWQ7XG5cblx0dGhpcy5fb25UcmFuc2l0aW9uRW5kID0gdGhpcy5fb25UcmFuc2l0aW9uRW5kLmJpbmQodGhpcyk7XG5cdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kLCB0aGlzLl9vblRyYW5zaXRpb25FbmQsIGZhbHNlKTtcblxuXHR0aGlzLl9jYXB0dXJlSW52YWxpZCA9IGZhbHNlO1xuXHR0aGlzLl9jYXB0dXJlZENoYW5nZWQgPSBmYWxzZTtcblx0dGhpcy5fY2FwdHVyZWRYID0gbnVsbDtcblx0dGhpcy5fY2FwdHVyZWRZID0gbnVsbDtcblx0dGhpcy5fY3VyckNhcHR1cmUgPSB7fTtcblx0dGhpcy5fbGFzdENhcHR1cmUgPSB7fTtcblxuXHR0aGlzLl9oYXNPZmZzZXQgPSBmYWxzZTtcblx0dGhpcy5fb2Zmc2V0SW52YWxpZCA9IGZhbHNlO1xuXHR0aGlzLl9vZmZzZXRYID0gbnVsbDtcblx0dGhpcy5fb2Zmc2V0WSA9IG51bGw7XG5cblx0dGhpcy5fcmVuZGVyZWRYID0gbnVsbDtcblx0dGhpcy5fcmVuZGVyZWRZID0gbnVsbDtcblxuXHR0aGlzLl9oYXNUcmFuc2l0aW9uID0gZmFsc2U7XG5cdHRoaXMuX3RyYW5zaXRpb25JbnZhbGlkID0gZmFsc2U7XG5cdHRoaXMuX3RyYW5zaXRpb25SdW5uaW5nID0gZmFsc2U7XG5cdHRoaXMuX3RyYW5zaXRpb24gPSBfLmV4dGVuZCh7fSwgVU5TRVRfVFJBTlNJVElPTik7IC8ve307XG5cblx0dGhpcy5fcHJvbWlzZXMgPSBbXTtcblx0dGhpcy5fcGVuZGluZ1Byb21pc2VzID0gW107XG59XG5cblRyYW5zZm9ybUl0ZW0ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh7XG5cblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvKiBQdWJsaWNcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8qIGRlc3Ryb3lcblx0LyogLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAqL1xuXHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHQvLyBOT1RFOiBzdHlsZSBwcm9wZXJ0eSBtYXkgaGF2ZSBiZWVuIG1vZGlmaWVkOyBjbGVhck9mZnNldChlbGVtZW50KSBzaG91bGRcblx0XHQvLyBiZSBjYWxsZWQgZXhwbGljaXRseSBpZiBjbGVhbiB1cCBpcyByZXF1aXJlZC5cblx0XHR0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCwgdGhpcy5fb25UcmFuc2l0aW9uRW5kLCBmYWxzZSk7XG5cdFx0cmVzb2x2ZUFsbCh0aGlzLl9wZW5kaW5nUHJvbWlzZXMsIHRoaXMpO1xuXHRcdHJlc29sdmVBbGwodGhpcy5fcHJvbWlzZXMsIHRoaXMpO1xuXHRcdC8vIGRlbGV0ZSB0aGlzLmVsLmVpZDtcblx0fSxcblxuXHQvKiBjYXB0dXJlXG5cdC8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gKi9cblx0Y2FwdHVyZTogZnVuY3Rpb24oZm9yY2UpIHtcblx0XHQvLyBjb25zb2xlLmxvZyhcInR4WyVzXTo6Y2FwdHVyZVwiLCB0aGlzLmlkKTtcblx0XHRpZiAoZm9yY2UpIHtcblx0XHRcdHRoaXMuY2xlYXJDYXB0dXJlKCk7XG5cdFx0fVxuXHRcdHRoaXMuX3ZhbGlkYXRlQ2FwdHVyZSgpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsZWFyQ2FwdHVyZTogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJ0eFslc106OmNsZWFyQ2FwdHVyZVwiLCB0aGlzLmlkKTtcblx0XHQvLyB0aGlzLl9oYXNPZmZzZXQgPSBmYWxzZTtcblx0XHR0aGlzLl9jYXB0dXJlSW52YWxpZCA9IHRydWU7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0Lyogb2Zmc2V0L2NsZWFyXG5cdC8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gKi9cblx0b2Zmc2V0OiBmdW5jdGlvbih4LCB5KSB7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJ0eFslc106Om9mZnNldFwiLCB0aGlzLmlkKTtcblx0XHR0aGlzLl9oYXNPZmZzZXQgPSB0cnVlO1xuXHRcdHRoaXMuX29mZnNldEludmFsaWQgPSB0cnVlO1xuXHRcdHRoaXMuX29mZnNldFggPSB4IHx8IDA7XG5cdFx0dGhpcy5fb2Zmc2V0WSA9IHkgfHwgMDtcblx0XHQvLyBpZiAodGhpcy5pbW1lZGlhdGUpIHRoaXMuX3ZhbGlkYXRlT2Zmc2V0KCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0Y2xlYXJPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl9oYXNPZmZzZXQpIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKFwidHhbJXNdOjpjbGVhck9mZnNldFwiLCB0aGlzLmlkKTtcblx0XHRcdHRoaXMuX2hhc09mZnNldCA9IGZhbHNlO1xuXHRcdFx0dGhpcy5fb2Zmc2V0SW52YWxpZCA9IHRydWU7XG5cdFx0XHR0aGlzLl9vZmZzZXRYID0gbnVsbDtcblx0XHRcdHRoaXMuX29mZnNldFkgPSBudWxsO1xuXHRcdFx0Ly8gaWYgKHRoaXMuaW1tZWRpYXRlKSB0aGlzLl92YWxpZGF0ZU9mZnNldCgpO1xuXHRcdH1cblx0XHQvLyBlbHNlIHtcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwidHhbJXNdOjpjbGVhck9mZnNldCBubyBvZmZzZXQgdG8gY2xlYXJcIiwgdGhpcy5pZCk7XG5cdFx0Ly8gfVxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdC8qIHRyYW5zaXRpb25zXG5cdC8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gKi9cblx0cnVuVHJhbnNpdGlvbjogZnVuY3Rpb24odHJhbnNpdGlvbikge1xuXHRcdGlmICghdHJhbnNpdGlvbikgeyAvLyB8fCAodHJhbnNpdGlvbi5kdXJhdGlvbiArIHRyYW5zaXRpb24uZGVsYXkpID09IDApIHtcblx0XHRcdHJldHVybiB0aGlzLmNsZWFyVHJhbnNpdGlvbigpO1xuXHRcdH1cblx0XHR2YXIgbGFzdFZhbHVlID0gdGhpcy5fdHJhbnNpdGlvblZhbHVlO1xuXHRcdHZhciBsYXN0TmFtZSA9IHRoaXMuX3RyYW5zaXRpb24ubmFtZTtcblx0XHR0aGlzLl90cmFuc2l0aW9uLnByb3BlcnR5ID0gc3R5bGVOYW1lc1tcInRyYW5zZm9ybVwiXTtcblx0XHR0aGlzLl90cmFuc2l0aW9uID0gXy5leHRlbmQodGhpcy5fdHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG5cdFx0dGhpcy5fdHJhbnNpdGlvblZhbHVlID0gdHJhbnNpdGlvblRlbXBsYXRlKHRoaXMuX3RyYW5zaXRpb24pO1xuXG5cdFx0aWYgKHRoaXMuX3RyYW5zaXRpb25JbnZhbGlkKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJ0eFslc106OnJ1blRyYW5zaXRpb24gc2V0IG92ZXIgKCVzOiclcycgPT4gJXM6JyVzJylcIiwgdGhpcy5pZCxcblx0XHRcdFx0bGFzdE5hbWUsIGxhc3RWYWx1ZSwgdGhpcy5fdHJhbnNpdGlvbi5uYW1lLCB0aGlzLl90cmFuc2l0aW9uVmFsdWUpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2hhc1RyYW5zaXRpb24gPSB0cnVlO1xuXHRcdHRoaXMuX3RyYW5zaXRpb25JbnZhbGlkID0gdHJ1ZTtcblx0XHQvLyBpZiAodGhpcy5pbW1lZGlhdGUpIHRoaXMuX3ZhbGlkYXRlVHJhbnNpdGlvbigpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsZWFyVHJhbnNpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fdHJhbnNpdGlvbiA9IF8uZXh0ZW5kKHRoaXMuX3RyYW5zaXRpb24sIFVOU0VUX1RSQU5TSVRJT04pO1xuXHRcdHRoaXMuX3RyYW5zaXRpb25WYWx1ZSA9IE5PX1RSQU5TSVRJT05fVkFMVUU7XG5cblx0XHR0aGlzLl9oYXNUcmFuc2l0aW9uID0gZmFsc2U7XG5cdFx0dGhpcy5fdHJhbnNpdGlvbkludmFsaWQgPSB0cnVlO1xuXHRcdC8vIGlmICh0aGlzLmltbWVkaWF0ZSkgdGhpcy5fdmFsaWRhdGVUcmFuc2l0aW9uKCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0c3RvcFRyYW5zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoaXMuX3RyYW5zaXRpb24ubmFtZSA9IFwiW25vbmVdXCI7XG5cdFx0Ly8gdGhpcy5fdHJhbnNpdGlvbi5wcm9wZXJ0eSA9IFwibm9uZVwiO1xuXHRcdHRoaXMuX3RyYW5zaXRpb24gPSBfLmV4dGVuZCh0aGlzLl90cmFuc2l0aW9uLCBVTlNFVF9UUkFOU0lUSU9OKTtcblx0XHR0aGlzLl90cmFuc2l0aW9uVmFsdWUgPSBOT19UUkFOU0lUSU9OX1ZBTFVFO1xuXG5cdFx0dGhpcy5faGFzVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHRcdHRoaXMuX3RyYW5zaXRpb25JbnZhbGlkID0gdHJ1ZTtcblx0XHQvLyBpZiAodGhpcy5pbW1lZGlhdGUpIHRoaXMuX3ZhbGlkYXRlVHJhbnNpdGlvbigpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHdoZW5UcmFuc2l0aW9uRW5kczogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGQsIHAsIHBwO1xuXHRcdGlmICh0aGlzLl90cmFuc2l0aW9uSW52YWxpZCB8fCB0aGlzLl90cmFuc2l0aW9uUnVubmluZykge1xuXHRcdFx0ZCA9IHt9O1xuXHRcdFx0cCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRkLnJlc29sdmUgPSByZXNvbHZlO1xuXHRcdFx0XHRkLnJlamVjdCA9IHJlamVjdDtcblx0XHRcdH0pO1xuXHRcdFx0cHAgPSB0aGlzLl90cmFuc2l0aW9uSW52YWxpZCA/IHRoaXMuX3BlbmRpbmdQcm9taXNlcyA6IHRoaXMuX3Byb21pc2VzO1xuXHRcdFx0cHAucHVzaChkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cCA9IFByb21pc2UucmVzb2x2ZSh0aGlzKTtcblx0XHR9XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cblx0LyogdmFsaWRhdGlvblxuXHQvKiAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtICovXG5cdHZhbGlkYXRlOiBmdW5jdGlvbigpIHtcblx0XHQvLyB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCwgdGhpcy5fb25UcmFuc2l0aW9uRW5kLCBmYWxzZSk7XG5cdFx0dGhpcy5faWdub3JlRXZlbnQgPSB0cnVlO1xuXG5cdFx0aWYgKHRoaXMuX2NhcHR1cmVJbnZhbGlkKSB7XG5cdFx0XHR2YXIgbGFzdFggPSAodGhpcy5fcmVuZGVyZWRYICE9PSBudWxsID8gdGhpcy5fcmVuZGVyZWRYIDogdGhpcy5fY2FwdHVyZWRYKSxcblx0XHRcdFx0bGFzdFkgPSAodGhpcy5fcmVuZGVyZWRZICE9PSBudWxsID8gdGhpcy5fcmVuZGVyZWRZIDogdGhpcy5fY2FwdHVyZWRZKTtcblxuXHRcdFx0Ly8gdGhpcy5fdmFsaWRhdGVUcmFuc2l0aW9uKCk7XG5cdFx0XHR0aGlzLl92YWxpZGF0ZUNhcHR1cmUoKTtcblx0XHRcdHRoaXMuX3ZhbGlkYXRlT2Zmc2V0KCk7XG5cblx0XHRcdHZhciBjdXJyWCA9ICh0aGlzLl9yZW5kZXJlZFggIT09IG51bGwgPyB0aGlzLl9yZW5kZXJlZFggOiB0aGlzLl9jYXB0dXJlZFgpLFxuXHRcdFx0XHRjdXJyWSA9ICh0aGlzLl9yZW5kZXJlZFkgIT09IG51bGwgPyB0aGlzLl9yZW5kZXJlZFkgOiB0aGlzLl9jYXB0dXJlZFkpO1xuXG5cdFx0XHRpZiAobGFzdFggPT09IGN1cnJYICYmIGxhc3RZID09PSBjdXJyWSkge1xuXHRcdFx0XHR0aGlzLl9oYXNUcmFuc2l0aW9uICYmIGNvbnNvbGUud2FybihcInR4WyVzXTo6dmFsaWRhdGUgdW5jaGFuZ2VkOiBsYXN0OlslaSwlaV0gY3VycjpbJWksJWldXCIsIHRoaXMuZWwuaWQgfHwgdGhpcy5pZCwgbGFzdFgsIGxhc3RZLCBjdXJyWCwgY3VyclkpO1xuXHRcdFx0XHQvLyBjb25zb2xlLmluZm8oXCJ0eFslc106OnZhbGlkYXRlIHVuY2hhbmdlZDogbGFzdDpbJWYsJWZdIGN1cnI6WyVmLCVmXSByZW5kZXI6WyVmLCVmXSBjYXB0dXJlZFslZiwlZl1cIiwgdGhpcy5lbC5pZCB8fCB0aGlzLmlkLCBsYXN0WCwgbGFzdFksIGN1cnJYLCBjdXJyWSwgdGhpcy5fcmVuZGVyZWRYLCB0aGlzLl9yZW5kZXJlZFksIHRoaXMuX2NhcHR1cmVkWCwgdGhpcy5fY2FwdHVyZWRZKTtcblx0XHRcdFx0dGhpcy5jbGVhclRyYW5zaXRpb24oKTtcblx0XHRcdFx0Ly8gdGhpcy5fdmFsaWRhdGVUcmFuc2l0aW9uKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl92YWxpZGF0ZVRyYW5zaXRpb24oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gdGhpcy5fdmFsaWRhdGVDYXB0dXJlKCk7XG5cdFx0XHR0aGlzLl92YWxpZGF0ZVRyYW5zaXRpb24oKTtcblx0XHRcdHRoaXMuX3ZhbGlkYXRlT2Zmc2V0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmQsIHRoaXMuX29uVHJhbnNpdGlvbkVuZCwgZmFsc2UpO1xuXHRcdHRoaXMuX2lnbm9yZUV2ZW50ID0gZmFsc2U7XG5cblx0XHQvLyBpZiAodGhpcy5fY2FwdHVyZWRDaGFuZ2VkKSB7XG5cdFx0Ly8gXHRjb25zb2xlLmVycm9yKFwidHhbJXNdOjp2YWxpZGF0ZSBjYXB0dXJlIGNoYW5nZWQ6IFslZiwlZl1cIiwgdGhpcy5pZCwgdGhpcy5fY2FwdHVyZWRYLCB0aGlzLl9jYXB0dXJlZFkpO1xuXHRcdC8vIH1cblx0XHR0aGlzLl9jYXB0dXJlZENoYW5nZWQgPSBmYWxzZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8qIFByaXZhdGVcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdF92YWxpZGF0ZUNhcHR1cmU6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICghdGhpcy5fY2FwdHVyZUludmFsaWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gdmFyIGNvbXB1dGVkLCBjYXB0dXJlZFZhbHVlcztcblx0XHR2YXIgdHJhbnNmb3JtVmFsdWUgPSBudWxsO1xuXG5cdFx0aWYgKHRoaXMuX2hhc09mZnNldCAmJiAhdGhpcy5fb2Zmc2V0SW52YWxpZCkge1xuXHRcdFx0Ly8gdGhpcyBpcyBhbiBleHBsaWNpdCBjYWxsIHRvIGNhcHR1cmUoKSBpbnN0ZWFkIG9mIGEgc3ViY2FsbCBmcm9tIF92YWxpZGF0ZU9mZnNldCgpXG5cdFx0XHR0cmFuc2Zvcm1WYWx1ZSA9IHRoaXMuX2dldENTU1Byb3AoXCJ0cmFuc2Zvcm1cIik7XG5cdFx0XHRpZiAodHJhbnNmb3JtVmFsdWUgPT09IFwiXCIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcInR4WyVzXTo6X2NhcHR1cmUgdmFsaWQgb2Zmc2V0ICglaSwkaSkgYnV0IHRyYW5zZm9ybVZhbHVlPVxcXCJcXFwiXCIsIHRoaXMuaWQsIHRoaXMuX29mZnNldFgsIHRoaXMuX29mZnNldFkpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fcmVtb3ZlQ1NTUHJvcChcInRyYW5zZm9ybVwiKTtcblx0XHR9XG5cblx0XHQvLyBOT1RFOiByZXVzaW5nIG9iamVjdCwgYWxsIHByb3BzIHdpbGwgYmUgb3ZlcndyaXR0ZW5cblx0XHR0aGlzLl9sYXN0Q2FwdHVyZSA9IHRoaXMuX2N1cnJDYXB0dXJlO1xuXHRcdHRoaXMuX2N1cnJDYXB0dXJlID0gdGhpcy5fZ2V0Q29tcHV0ZWRDU1NQcm9wcygpO1xuXG5cdFx0aWYgKHRoaXMuX2N1cnJDYXB0dXJlLnRyYW5zZm9ybSAhPT0gdGhpcy5fbGFzdENhcHR1cmUudHJhbnNmb3JtKSB7XG5cdFx0XHR2YXIgbSwgbW07IC8vLCByZXQgPSB7fTtcblx0XHRcdG1tID0gdGhpcy5fY3VyckNhcHR1cmUudHJhbnNmb3JtLm1hdGNoKC8obWF0cml4fG1hdHJpeDNkKVxcKChbXlxcKV0rKVxcKS8pO1xuXHRcdFx0aWYgKG1tKSB7XG5cdFx0XHRcdG0gPSBtbVsyXS5zcGxpdChcIixcIik7XG5cdFx0XHRcdGlmIChtbVsxXSA9PT0gXCJtYXRyaXhcIikge1xuXHRcdFx0XHRcdHRoaXMuX2NhcHR1cmVkWCA9IHBhcnNlRmxvYXQobVs0XSk7XG5cdFx0XHRcdFx0dGhpcy5fY2FwdHVyZWRZID0gcGFyc2VGbG9hdChtWzVdKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9jYXB0dXJlZFggPSBwYXJzZUZsb2F0KG1bMTJdKTtcblx0XHRcdFx0XHR0aGlzLl9jYXB0dXJlZFkgPSBwYXJzZUZsb2F0KG1bMTNdKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fY2FwdHVyZWRYID0gMDtcblx0XHRcdFx0dGhpcy5fY2FwdHVyZWRZID0gMDtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2NhcHR1cmVkQ2hhbmdlZCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmICh0cmFuc2Zvcm1WYWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJ0eFslc106Ol9jYXB0dXJlIHJlYXBwbHlpbmcgJyVzJ1wiLCB0aGlzLmlkLCB0cmFuc2Zvcm1WYWx1ZSk7XG5cdFx0XHR0aGlzLl9zZXRDU1NQcm9wKFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybVZhbHVlKTtcblx0XHR9XG5cdFx0dGhpcy5fY2FwdHVyZUludmFsaWQgPSBmYWxzZTtcblx0fSxcblxuXHRfdmFsaWRhdGVPZmZzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdGlmICh0aGlzLl9vZmZzZXRJbnZhbGlkKSB7XG5cdFx0XHQvLyB0aGlzLl92YWxpZGF0ZUNhcHR1cmUoKTtcblx0XHRcdHRoaXMuX29mZnNldEludmFsaWQgPSBmYWxzZTtcblx0XHRcdGlmICh0aGlzLl9oYXNPZmZzZXQpIHtcblx0XHRcdFx0dmFyIHR4ID0gdGhpcy5fb2Zmc2V0WCArIHRoaXMuX2NhcHR1cmVkWDtcblx0XHRcdFx0dmFyIHR5ID0gdGhpcy5fb2Zmc2V0WSArIHRoaXMuX2NhcHR1cmVkWTtcblx0XHRcdFx0aWYgKHR4ICE9PSB0aGlzLl9yZW5kZXJlZFggfHwgdHkgIT09IHRoaXMuX3JlbmRlcmVkWSkge1xuXHRcdFx0XHRcdHRoaXMuX3JlbmRlcmVkWCA9IHR4O1xuXHRcdFx0XHRcdHRoaXMuX3JlbmRlcmVkWSA9IHR5O1xuXHRcdFx0XHRcdHRoaXMuX3NldENTU1Byb3AoXCJ0cmFuc2Zvcm1cIiwgdHJhbnNsYXRlVGVtcGxhdGUodGhpcykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9yZW5kZXJlZFggPSBudWxsO1xuXHRcdFx0XHR0aGlzLl9yZW5kZXJlZFkgPSBudWxsO1xuXHRcdFx0XHR0aGlzLl9yZW1vdmVDU1NQcm9wKFwidHJhbnNmb3JtXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRfdmFsaWRhdGVUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5fdHJhbnNpdGlvbkludmFsaWQpIHtcblx0XHRcdC8vIHRoaXMuX3ZhbGlkYXRlQ2FwdHVyZSgpO1xuXHRcdFx0dGhpcy5fdHJhbnNpdGlvbkludmFsaWQgPSBmYWxzZTtcblxuXHRcdFx0Ly8gc2F2ZSBwcm9taXNlcyBtYWRlIHdoaWxlIGludmFsaWRcblx0XHRcdHZhciBwcCA9IHRoaXMuX3Byb21pc2VzO1xuXHRcdFx0Ly8gcHJlcGFyZSBfcHJvbWlzZXMgYW5kIHB1c2ggaW4gbmV3IG9uZXNcblx0XHRcdHRoaXMuX3Byb21pc2VzID0gdGhpcy5fcGVuZGluZ1Byb21pc2VzO1xuXHRcdFx0Ly8gd2hhdGV2ZXIgc3RpbGwgaGVyZSBpcyB0byBiZSByZWplY3RlZC4gcmV1c2UgYXJyYXlcblx0XHRcdHRoaXMuX3BlbmRpbmdQcm9taXNlcyA9IHJlc29sdmVBbGwocHAsIHRoaXMpO1xuXG5cdFx0XHQvLyBTZXQgcnVubmluZyBmbGFnLCBpZiB0aGVyZSdzIGEgdHJhbnNpdGlvbiB0byBydW5cblx0XHRcdHRoaXMuX3RyYW5zaXRpb25SdW5uaW5nID0gdGhpcy5faGFzVHJhbnNpdGlvbjtcblx0XHRcdC8vIFNldCB0aGUgY3NzIHZhbHVlICh3aGljaCB3aWxsIGJlIGVtcHR5IHN0cmluZyBpZiB0aGVyZSdzIG5vIHRyYW5zaXRpb24pXG5cdFx0XHR0aGlzLl9zZXRDU1NQcm9wKFwidHJhbnNpdGlvblwiLCB0aGlzLl90cmFuc2l0aW9uVmFsdWUpO1xuXHRcdFx0aWYgKERFQlVHKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9oYXNUcmFuc2l0aW9uKSB7XG5cdFx0XHRcdFx0dGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR4XCIsIHRoaXMuX3RyYW5zaXRpb24ubmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCF0aGlzLl9oYXNUcmFuc2l0aW9uKSB7XG5cdFx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIHRyYW5zaXRpb24sIHJlc29sdmUgcHJvbWlzZXMgbm93XG5cdFx0XHRcdHJlc29sdmVBbGwodGhpcy5fcHJvbWlzZXMsIHRoaXMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRfb25UcmFuc2l0aW9uRW5kOiBmdW5jdGlvbihldikge1xuXHRcdGlmICh0aGlzLl9pZ25vcmVFdmVudCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAodGhpcy5fdHJhbnNpdGlvblJ1bm5pbmcgJiYgKHRoaXMuZWwgPT09IGV2LnRhcmdldCkgJiZcblx0XHRcdCh0aGlzLl90cmFuc2l0aW9uLnByb3BlcnR5ID09IGV2LnByb3BlcnR5TmFtZSkpIHtcblx0XHRcdHRoaXMuX2hhc1RyYW5zaXRpb24gPSBmYWxzZTtcblx0XHRcdHRoaXMuX3RyYW5zaXRpb25SdW5uaW5nID0gZmFsc2U7XG5cdFx0XHR0aGlzLl9yZW1vdmVDU1NQcm9wKFwidHJhbnNpdGlvblwiKTtcblx0XHRcdHJlc29sdmVBbGwodGhpcy5fcHJvbWlzZXMsIHRoaXMpO1xuXG5cdFx0XHRpZiAoREVCVUcpIHtcblx0XHRcdFx0aWYgKHRoaXMuZWwuaGFzQXR0cmlidXRlKFwiZGF0YS10eFwiKSkge1xuXHRcdFx0XHRcdC8vIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwiZGF0YS10eC1sYXN0XCIsIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS10eFwiKSk7XG5cdFx0XHRcdFx0dGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXR4XCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0LyogQ1NTXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHRfZ2V0Q1NTUHJvcDogZnVuY3Rpb24ocHJvcCkge1xuXHRcdHJldHVybiB0aGlzLmVsLnN0eWxlW3Byb3BOYW1lc1twcm9wXV07XG5cdFx0Ly8gcmV0dXJuIHRoaXMuZWwuc3R5bGVbcHJlZml4ZWRQcm9wZXJ0eShwcm9wKV07XG5cdFx0Ly8gcmV0dXJuIHRoaXMuZWwuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShzdHlsZU5hbWVzW3Byb3BdKTtcblx0fSxcblxuXHRfc2V0Q1NTUHJvcDogZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHtcblx0XHRpZiAocHJvcCA9PT0gXCJ0cmFuc2l0aW9uXCIgJiYgdmFsdWUgPT0gTk9fVFJBTlNJVElPTl9WQUxVRSkge1xuXHRcdFx0dmFsdWUgPSBcIlwiO1xuXHRcdH1cblx0XHRpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMCB8fCB2YWx1ZSA9PT0gXCJcIikge1xuXHRcdFx0dGhpcy5fcmVtb3ZlQ1NTUHJvcChwcm9wKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5lbC5zdHlsZVtwcm9wTmFtZXNbcHJvcF1dID0gdmFsdWU7XG5cdFx0XHQvLyB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHN0eWxlTmFtZXNbcHJvcF0sIHZhbHVlKTtcblx0XHR9XG5cdH0sXG5cblx0X3JlbW92ZUNTU1Byb3A6IGZ1bmN0aW9uKHByb3ApIHtcblx0XHR0aGlzLmVsLnN0eWxlW3Byb3BOYW1lc1twcm9wXV0gPSBcIlwiO1xuXHRcdC8vIHRoaXMuZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoc3R5bGVOYW1lc1twcm9wXSk7XG5cdH0sXG5cblx0X2dldENvbXB1dGVkQ1NTUHJvcHM6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB2YWx1ZXMgPSB7fTtcblx0XHR2YXIgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcblx0XHRmb3IgKHZhciBwIGluIHByb3BOYW1lcykge1xuXHRcdFx0dmFsdWVzW3BdID0gY29tcHV0ZWRbcHJvcE5hbWVzW3BdXTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlcztcblx0fSxcbn0sIHtcblx0dHJhbnNpdGlvbjoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fdHJhbnNpdGlvbjtcblx0XHR9XG5cdH0sXG5cdGhhc1RyYW5zaXRpb246IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2hhc1RyYW5zaXRpb247XG5cdFx0fVxuXHR9LFxuXHRjYXB0dXJlZENoYW5nZWQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2NhcHR1cmVkQ2hhbmdlZDtcblx0XHR9XG5cdH0sXG5cdGNhcHR1cmVkWDoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fY2FwdHVyZWRYO1xuXHRcdH1cblx0fSxcblx0Y2FwdHVyZWRZOiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9jYXB0dXJlZFk7XG5cdFx0fVxuXHR9LFxuXG5cdGhhc09mZnNldDoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5faGFzT2Zmc2V0O1xuXHRcdH1cblx0fSxcblx0b2Zmc2V0WDoge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fb2Zmc2V0WDtcblx0XHR9XG5cdH0sXG5cdG9mZnNldFk6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX29mZnNldFk7XG5cdFx0fVxuXHR9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtSXRlbTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhMSwgYTIsIGRlc3QpIHtcblx0cmV0dXJuIGExLnJlZHVjZShmdW5jdGlvbihyZXMsIG8sIGksIGEpIHtcblx0XHRpZiAoYTIuaW5kZXhPZihvKSA9PSAtMSkgcmVzLnB1c2gobyk7XG5cdFx0cmV0dXJuIHJlcztcblx0fSwgKGRlc3QgIT09IHZvaWQgMCkgPyBkZXN0IDogW10pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIFBJMiA9IE1hdGguUEkgKiAyO1xuXG52YXIgc3BsaWNlID0gQXJyYXkucHJvdG90eXBlLnNwbGljZTtcbi8vIHZhciBjb25jYXQgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0O1xuXG4vKlxuICpcdFVzaW5nIGphdmFzY3JpcHQgdG8gY29udmVydCByYWRpYW5zIHRvIGRlZ3JlZXMgd2l0aCBwb3NpdGl2ZSBhbmRcbiAqXHRuZWdhdGl2ZSB2YWx1ZXMgW2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI5NTg4NDA0L11cbiAqXHRgKCgociAqICgxODAvTWF0aC5QSSkpICUgMzYwKSArIDM2MCkgJSAzNjA7YFxuICpcdGBmdW5jdGlvbiBtb2QobiwgbSkge1xuICpcdFx0cmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xuICpcdH1gXG4gKi9cbnZhciBfbW9kID0gZnVuY3Rpb24obiwgbSkge1xuXHRyZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XG59O1xuXG52YXIgc2V0U3R5bGUgPSBmdW5jdGlvbihjdHgsIHMpIHtcblx0aWYgKHR5cGVvZiBzICE9IFwib2JqZWN0XCIpIHJldHVybjtcblx0Zm9yICh2YXIgcCBpbiBzKSB7XG5cdFx0c3dpdGNoICh0eXBlb2YgY3R4W3BdKSB7XG5cdFx0XHRjYXNlIFwidW5kZWZpbmVkXCI6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHNbcF0pKSB7XG5cdFx0XHRcdFx0Y3R4W3BdLmFwcGx5KGN0eCwgc1twXSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y3R4W3BdLmNhbGwoY3R4LCBzW3BdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGN0eFtwXSA9IHNbcF07XG5cdFx0fVxuXHR9XG59O1xuXG52YXIgX2RyYXdTaGFwZSA9IGZ1bmN0aW9uKGZuLCBzLCBjdHgpIHtcblx0Y3R4LnNhdmUoKTtcblx0aWYgKHMpIHtcblx0XHRzZXRTdHlsZShjdHgsIHMpO1xuXHR9XG5cdGZuLmFwcGx5KG51bGwsIHNwbGljZS5jYWxsKGFyZ3VtZW50cywgMikpO1xuXHRpZiAoJ3N0cm9rZVN0eWxlJyBpbiBzKSB7IC8qIGN0eC5saW5lV2lkdGggPiAwICovXG5cdFx0Y3R4LnN0cm9rZSgpO1xuXHR9XG5cdGlmICgnZmlsbFN0eWxlJyBpbiBzKSB7IC8qIGN0eC5maWxsU3R5bGUgIT09IFwidHJhbnNwYXJlbnRcIiAqL1xuXHRcdGN0eC5maWxsKCk7XG5cdH1cblx0Y3R4LnJlc3RvcmUoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRzZXRTdHlsZTogc2V0U3R5bGUsXG5cblx0dkd1aWRlOiBmdW5jdGlvbihjdHgsIHgpIHtcblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0Y3R4Lm1vdmVUbyh4LCAwKTtcblx0XHRjdHgubGluZVRvKHgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblx0fSxcblx0ZHJhd1ZHdWlkZTogZnVuY3Rpb24oY3R4LCBzLCB4KSB7XG5cdFx0X2RyYXdTaGFwZSh0aGlzLnZHdWlkZSwgcywgY3R4LCB4KTtcblx0fSxcblxuXHRoR3VpZGU6IGZ1bmN0aW9uKGN0eCwgeSkge1xuXHRcdGN0eC5iZWdpblBhdGgoKTtcblx0XHRjdHgubW92ZVRvKDAsIHkpO1xuXHRcdGN0eC5saW5lVG8oY3R4LmNhbnZhcy53aWR0aCwgeSk7XG5cdH0sXG5cdGRyYXdIR3VpZGU6IGZ1bmN0aW9uKGN0eCwgcywgeSkge1xuXHRcdF9kcmF3U2hhcGUodGhpcy5oR3VpZGUsIHMsIGN0eCwgeSk7XG5cdH0sXG5cblx0Y3Jvc3NoYWlyOiBmdW5jdGlvbihjdHgsIHgsIHksIHIpIHtcblx0XHRjdHguc2F2ZSgpO1xuXHRcdGN0eC50cmFuc2xhdGUoeCwgeSk7XG5cdFx0Y3R4LnJvdGF0ZShNYXRoLlBJIC8gNCk7XG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdGN0eC5tb3ZlVG8oMCwgLXIpO1xuXHRcdGN0eC5saW5lVG8oMCwgcik7XG5cdFx0Y3R4Lm1vdmVUbygtciwgMCk7XG5cdFx0Y3R4LmxpbmVUbyhyLCAwKTtcblx0XHRjdHgucmVzdG9yZSgpO1xuXHR9LFxuXHRkcmF3Q3Jvc3NoYWlyOiBmdW5jdGlvbihjdHgsIHMsIHgsIHksIHIpIHtcblx0XHRfZHJhd1NoYXBlKHRoaXMuY3Jvc3NoYWlyLCBzLCBjdHgsIHgsIHksIHIpO1xuXHR9LFxuXG5cdGNpcmNsZTogZnVuY3Rpb24oY3R4LCB4LCB5LCByKSB7XG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdGN0eC5hcmMoeCwgeSwgciwgMCwgUEkyKTtcblx0fSxcblx0ZHJhd0NpcmNsZTogZnVuY3Rpb24oY3R4LCBzLCB4LCB5LCByKSB7XG5cdFx0X2RyYXdTaGFwZSh0aGlzLmNpcmNsZSwgcywgY3R4LCB4LCB5LCByKTtcblx0fSxcblxuXHRzcXVhcmU6IGZ1bmN0aW9uKGN0eCwgeCwgeSwgcikge1xuXHRcdHIgPSBNYXRoLmZsb29yKHIgLyAyKSAqIDI7XG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdGN0eC5yZWN0KHggLSByLCB5IC0gciwgciAqIDIsIHIgKiAyKTtcblx0fSxcblx0ZHJhd1NxdWFyZTogZnVuY3Rpb24oY3R4LCBzLCB4LCB5LCByKSB7XG5cdFx0X2RyYXdTaGFwZSh0aGlzLnNxdWFyZSwgcywgY3R4LCB4LCB5LCByKTtcblx0fSxcblxuXHRhcnJvd2hlYWQ6IGZ1bmN0aW9uKGN0eCwgeCwgeSwgciwgdCkge1xuXHRcdGN0eC5zYXZlKCk7XG5cdFx0Y3R4LnRyYW5zbGF0ZSh4LCB5KTtcblx0XHRjdHgucm90YXRlKF9tb2QodCwgUEkyKSk7XG5cdFx0Y3R4LnRyYW5zbGF0ZShyICogMC41LCAwKTtcblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0Y3R4Lm1vdmVUbygwLCAwKTtcblx0XHQvLyBjdHgubGluZVRvKC1yLCByICogTWF0aC5TUVJUMV8yKTtcblx0XHQvLyBjdHgubGluZVRvKC1yLCAtciAqIE1hdGguU1FSVDFfMik7XG5cdFx0Y3R4LmxpbmVUbygtciAqIE1hdGguU1FSVDIsIHIgKiBNYXRoLlNRUlQxXzIpO1xuXHRcdGN0eC5hcmNUbygwLCAwLCAtciAqIE1hdGguU1FSVDIsIC1yICogTWF0aC5TUVJUMV8yLCByKTtcblx0XHQvLyBjdHgucXVhZHJhdGljQ3VydmVUbygwLCAwLCAtciAqIE1hdGguU1FSVDIsIC1yICogTWF0aC5TUVJUMV8yKTtcblx0XHRjdHgubGluZVRvKDAsIDApO1xuXHRcdGN0eC5jbG9zZVBhdGgoKTtcblx0XHRjdHgucmVzdG9yZSgpO1xuXHR9LFxuXHRkcmF3QXJyb3doZWFkOiBmdW5jdGlvbihjdHgsIHMsIHgsIHksIHIsIHQpIHtcblx0XHRfZHJhd1NoYXBlKHRoaXMuYXJyb3doZWFkLCBzLCBjdHgsIHgsIHksIHIsIHQpO1xuXHR9LFxuXG5cdGFycm93aGVhZDI6IGZ1bmN0aW9uKGN0eCwgeCwgeSwgciwgdCkge1xuXHRcdGN0eC5zYXZlKCk7XG5cdFx0Y3R4LnRyYW5zbGF0ZSh4LCB5KTtcblx0XHRjdHgucm90YXRlKF9tb2QodCwgUEkyKSk7XG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdGN0eC5tb3ZlVG8oLXIsIHIgKiBNYXRoLlNRUlQxXzIpO1xuXHRcdGN0eC5saW5lVG8oMCwgMCk7XG5cdFx0Y3R4LmxpbmVUbygtciwgLXIgKiBNYXRoLlNRUlQxXzIpO1xuXHRcdGN0eC5yZXN0b3JlKCk7XG5cdH0sXG5cdGRyYXdBcnJvd2hlYWQyOiBmdW5jdGlvbihjdHgsIHMsIHgsIHksIHIsIHQpIHtcblx0XHRfZHJhd1NoYXBlKHRoaXMuYXJyb3doZWFkLCBzLCBjdHgsIHgsIHksIHIsIHQpO1xuXHR9LFxuXG5cdHJlY3Q6IGZ1bmN0aW9uKGN0eCwgYTEsIGEyLCBhMywgYTQpIHtcblx0XHRpZiAodHlwZW9mIGExID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRhNCA9IGExLmhlaWdodDtcblx0XHRcdGEzID0gYTEud2lkdGg7XG5cdFx0XHRhMiA9IGExLnRvcDtcblx0XHRcdGExID0gYTEubGVmdDtcblx0XHR9XG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdGN0eC5yZWN0KGExLCBhMiwgYTMsIGE0KTtcblx0fSxcblx0ZHJhd1JlY3Q6IGZ1bmN0aW9uKGN0eCwgcywgYTEsIGEyLCBhMywgYTQpIHtcblx0XHRfZHJhd1NoYXBlKHRoaXMucmVjdCwgcywgY3R4LCBhMSwgYTIsIGEzLCBhNCk7XG5cdH0sXG5cblx0cm91bmRSZWN0OiBmdW5jdGlvbihjdHgsIHgsIHksIHcsIGgsIHIpIHtcblx0XHRpZiAodyA8IDIgKiByKSByID0gdyAvIDI7XG5cdFx0aWYgKGggPCAyICogcikgciA9IGggLyAyO1xuXHRcdGN0eC5iZWdpblBhdGgoKTtcblx0XHRjdHgubW92ZVRvKHggKyByLCB5KTtcblx0XHRjdHguYXJjVG8oeCArIHcsIHksIHggKyB3LCB5ICsgaCwgcik7XG5cdFx0Y3R4LmFyY1RvKHggKyB3LCB5ICsgaCwgeCwgeSArIGgsIHIpO1xuXHRcdGN0eC5hcmNUbyh4LCB5ICsgaCwgeCwgeSwgcik7XG5cdFx0Y3R4LmFyY1RvKHgsIHksIHggKyB3LCB5LCByKTtcblx0XHRjdHguY2xvc2VQYXRoKCk7XG5cdH0sXG5cdGRyYXdSb3VuZFJlY3Q6IGZ1bmN0aW9uKGN0eCwgcywgeCwgeSwgdywgaCwgcikge1xuXHRcdF9kcmF3U2hhcGUodGhpcy5yb3VuZFJlY3QsIHMsIGN0eCwgeCwgeSwgaCwgcik7XG5cdH0sXG5cblx0cXVhZFJvdW5kUmVjdDogZnVuY3Rpb24oY3R4LCB4LCB5LCB3LCBoLCByKSB7XG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xuXHRcdGN0eC5tb3ZlVG8oeCwgeSArIHIpO1xuXHRcdGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByLCB5KTtcblx0XHRjdHgubGluZVRvKHggKyB3IC0gciwgeSk7XG5cdFx0Y3R4LnF1YWRyYXRpY0N1cnZlVG8oeCArIHcsIHksIHggKyB3LCB5ICsgcik7XG5cdFx0Y3R4LmxpbmVUbyh4ICsgdywgeSArIGggLSByKTtcblx0XHRjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgdywgeSArIGgsIHggKyB3IC0gciwgeSArIGgpO1xuXHRcdGN0eC5saW5lVG8oeCArIHIsIHkgKyBoKTtcblx0XHRjdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaCwgeCwgeSArIGggLSByKTtcblx0XHRjdHguY2xvc2VQYXRoKCk7XG5cdH0sXG5cdGRyYXdRdWFkUm91bmRSZWN0OiBmdW5jdGlvbihjdHgsIHMsIHgsIHksIHcsIGgsIHIpIHtcblx0XHRfZHJhd1NoYXBlKHRoaXMucXVhZFJvdW5kUmVjdCwgcywgY3R4LCB4LCB5LCBoLCByKTtcblx0fSxcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qXG5cblN0YWNrQmx1ciAtIGEgZmFzdCBhbG1vc3QgR2F1c3NpYW4gQmx1ciBGb3IgQ2FudmFzXG5cblZlcnNpb246ICAwLjVcbkF1dGhvcjogTWFyaW8gS2xpbmdlbWFublxuQ29udGFjdDogIG1hcmlvQHF1YXNpbW9uZG8uY29tXG5XZWJzaXRlOiBodHRwOi8vd3d3LnF1YXNpbW9uZG8uY29tL1N0YWNrQmx1ckZvckNhbnZhc1xuVHdpdHRlcjogQHF1YXNpbW9uZG9cblxuSW4gY2FzZSB5b3UgZmluZCB0aGlzIGNsYXNzIHVzZWZ1bCAtIGVzcGVjaWFsbHkgaW4gY29tbWVyY2lhbCBwcm9qZWN0cyAtXG5JIGFtIG5vdCB0b3RhbGx5IHVuaGFwcHkgZm9yIGEgc21hbGwgZG9uYXRpb24gdG8gbXkgUGF5UGFsIGFjY291bnRcbm1hcmlvQHF1YXNpbW9uZG8uZGVcblxuT3Igc3VwcG9ydCBtZSBvbiBmbGF0dHI6IFxuaHR0cHM6Ly9mbGF0dHIuY29tL3RoaW5nLzcyNzkxL1N0YWNrQmx1ci1hLWZhc3QtYWxtb3N0LUdhdXNzaWFuLUJsdXItRWZmZWN0LWZvci1DYW52YXNKYXZhc2NyaXB0XG5cbkNvcHlyaWdodCAoYykgMjAxMCBNYXJpbyBLbGluZ2VtYW5uXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG5vYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG5yZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbmNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcblNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG5jb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG5FWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbk9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5OT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG5XSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbkZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1Jcbk9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdHRoaXMuciA9IDA7XG5cdHRoaXMuZyA9IDA7XG5cdHRoaXMuYiA9IDA7XG5cdHRoaXMuYSA9IDA7XG5cdHRoaXMubmV4dCA9IG51bGw7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGltYWdlRGF0YSwgYWRqKSB7XG5cdHZhciBwaXhlbHMgPSBpbWFnZURhdGEuZGF0YTtcblx0dmFyIHIsIGcsIGIsIHM7XG5cdHZhciBpLCBpaTtcblxuXHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdGZvciAoaSA9IDAsIGlpID0gcGl4ZWxzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcblx0XHRcdHBpeGVsc1tpXSA9IChwaXhlbHNbaV0gKiAyOTkgKyBwaXhlbHNbaSArIDFdICogNTg3ICsgcGl4ZWxzW2kgKyAyXSAqIDE0NCkgLyAxMDAwO1xuXHRcdH1cblx0fSBlbHNlXG5cdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG5cdFx0aWYgKDAgPj0gYWRqID4gMSkge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiYXJndW1lbnQgb3V0IG9mIHJhbmdlICgxLTApXCIsIGFkaik7XG5cdFx0XHRyZXR1cm4gaW1hZ2VEYXRhO1xuXHRcdH1cblx0XHRmb3IgKGkgPSAwLCBpaSA9IHBpeGVscy5sZW5ndGg7IGkgPCBpaTsgaSArPSA0KSB7XG5cdFx0XHRyID0gcGl4ZWxzW2ldO1xuXHRcdFx0ZyA9IHBpeGVsc1tpICsgMV07XG5cdFx0XHRiID0gcGl4ZWxzW2kgKyAyXTtcblx0XHRcdC8vIHMgPSAoKHIgKiAyOTkgKyBnICogNTg3ICsgYiAqIDE0NCkgLyAxMDAwKSAqICgxIC0gYWRqKTtcblx0XHRcdC8vIHBpeGVsc1tpXSA9IHIgKiBhZGogKyBzO1xuXHRcdFx0Ly8gcGl4ZWxzW2kgKyAxXSA9IGcgKiBhZGogKyBzO1xuXHRcdFx0Ly8gcGl4ZWxzW2kgKyAyXSA9IGIgKiBhZGogKyBzO1xuXHRcdFx0cyA9IE1hdGgubWF4KHIsIGcsIGIpO1xuXHRcdFx0aWYgKHMgPT09IDApIHtcblx0XHRcdFx0cGl4ZWxzW2ldID0gTWF0aC5yb3VuZCgyNTUgKiBhZGopO1xuXHRcdFx0XHRwaXhlbHNbaSArIDFdID0gTWF0aC5yb3VuZCgyNTUgKiBhZGopO1xuXHRcdFx0XHRwaXhlbHNbaSArIDJdID0gTWF0aC5yb3VuZCgyNTUgKiBhZGopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cyA9IDI1NSAqIGFkaiAvIHM7XG5cdFx0XHRcdHBpeGVsc1tpXSA9IE1hdGgucm91bmQociAqIHMpO1xuXHRcdFx0XHRwaXhlbHNbaSArIDFdID0gTWF0aC5yb3VuZChnICogcyk7XG5cdFx0XHRcdHBpeGVsc1tpICsgMl0gPSBNYXRoLnJvdW5kKGIgKiBzKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGltYWdlRGF0YTtcbn07XG5cbi8vIGZ1bmN0aW9uIHNhdHVyYXRpb24ocixnLGIsIHMpIHtcbi8vICAgICB2YXIgbWluID0gcmdiLmluZGV4T2YoTWF0aC5taW4uYXBwbHkobnVsbCwgcmdiKSksIC8vIGluZGV4IG9mIG1pblxuLy8gICAgICAgICBtYXggPSByZ2IuaW5kZXhPZihNYXRoLm1heC5hcHBseShudWxsLCByZ2IpKSwgLy8gaW5kZXggb2YgbWF4XG4vLyAgICAgICAgIG1pZCA9IFswLCAxLCAyXS5maWx0ZXIoZnVuY3Rpb24gKGkpIHtyZXR1cm4gaSAhPT0gbWluICYmIGkgIT09IG1heDt9KVswXSxcbi8vICAgICAgICAgYSA9IHJnYlttYXhdIC0gcmdiW21pbl0sXG4vLyAgICAgICAgIGIgPSByZ2JbbWlkXSAtIHJnYlttaW5dLFxuLy8gICAgICAgICB4ID0gcmdiW21heF0sXG4vLyAgICAgICAgIGFyciA9IFt4LCB4LCB4XTtcbi8vICAgICBpZiAobWluID09PSBtYXgpIHtcbi8vICAgICAgICAgbWluID0gMjsgLy8gYm90aCBtYXggPSBtaW4gPSAwLCA9PiBtaWQgPSAxLCBzbyBzZXQgbWluID0gMlxuLy8gICAgICAgICBhID0gMTsgICAvLyBhbHNvIG1lYW5zIGEgPSBiID0gMCwgZG9uJ3Qgd2FudCBkaXZpc2lvbiBieSAwIGluIGBiIC8gYWBcbi8vICAgICB9XG4vL1xuLy8gICAgIGFyclttYXhdID0geDtcbi8vICAgICBhcnJbbWluXSA9IE1hdGgucm91bmQoeCAqICgxIC0gcykpO1xuLy8gICAgIGFyclttaWRdID0gTWF0aC5yb3VuZCh4ICogKCgxIC0gcykgKyBzICogYiAvIGEpKTtcbi8vXG4vLyAgICAgcmV0dXJuIGFycjtcbi8vIH1cblxuXG4vLyBmdW5jdGlvbiBudmFsdWUocmdiLCB2KSB7XG4vLyAgICAgdmFyIHggPSBNYXRoLm1heC5hcHBseShudWxsLCByZ2IpO1xuLy8gICAgIGlmICh4ID09PSAwKVxuLy8gICAgICAgICByZXR1cm4gW1xuLy8gICAgICAgICAgICAgTWF0aC5yb3VuZCgyNTUgKiB2KSxcbi8vICAgICAgICAgICAgIE1hdGgucm91bmQoMjU1ICogdiksXG4vLyAgICAgICAgICAgICBNYXRoLnJvdW5kKDI1NSAqIHYpXG4vLyAgICAgICAgIF07XG4vLyAgICAgeCA9IDI1NSAqIHYgLyB4O1xuLy8gICAgIHJldHVybiBbXG4vLyAgICAgICAgIE1hdGgucm91bmQocmdiWzBdICogeCksXG4vLyAgICAgICAgIE1hdGgucm91bmQocmdiWzFdICogeCksXG4vLyAgICAgICAgIE1hdGgucm91bmQocmdiWzJdICogeClcbi8vICAgICBdO1xuLy8gfVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGltYWdlRGF0YSwgb3B0cykge1xuXHR2YXIgcGl4ZWxzID0gaW1hZ2VEYXRhLmRhdGE7XG5cdHZhciBwaXhlbHNOdW0gPSBwaXhlbHMubGVuZ3RoO1xuXHR2YXIgcmdiQXZnID0gWzAsIDAsIDBdO1xuXHR2YXIgaTtcblxuXHRmb3IgKGkgPSAwOyBpIDwgcGl4ZWxzTnVtOyBpICs9IDQpIHtcblx0XHRyZ2JBdmdbMF0gKz0gcGl4ZWxzW2ldO1xuXHRcdHJnYkF2Z1sxXSArPSBwaXhlbHNbaSArIDFdO1xuXHRcdHJnYkF2Z1syXSArPSBwaXhlbHNbaSArIDJdO1xuXHR9XG5cdGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRyZ2JBdmdbaV0gPSAocmdiQXZnW2ldIC8gKHBpeGVsc051bSAvIDQpKSB8IDA7XG5cdH1cblx0cmV0dXJuIHJnYkF2Zztcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qXG5cblN0YWNrQmx1ciAtIGEgZmFzdCBhbG1vc3QgR2F1c3NpYW4gQmx1ciBGb3IgQ2FudmFzXG5cblZlcnNpb246ICAwLjVcbkF1dGhvcjogTWFyaW8gS2xpbmdlbWFublxuQ29udGFjdDogIG1hcmlvQHF1YXNpbW9uZG8uY29tXG5XZWJzaXRlOiBodHRwOi8vd3d3LnF1YXNpbW9uZG8uY29tL1N0YWNrQmx1ckZvckNhbnZhc1xuVHdpdHRlcjogQHF1YXNpbW9uZG9cblxuSW4gY2FzZSB5b3UgZmluZCB0aGlzIGNsYXNzIHVzZWZ1bCAtIGVzcGVjaWFsbHkgaW4gY29tbWVyY2lhbCBwcm9qZWN0cyAtXG5JIGFtIG5vdCB0b3RhbGx5IHVuaGFwcHkgZm9yIGEgc21hbGwgZG9uYXRpb24gdG8gbXkgUGF5UGFsIGFjY291bnRcbm1hcmlvQHF1YXNpbW9uZG8uZGVcblxuT3Igc3VwcG9ydCBtZSBvbiBmbGF0dHI6IFxuaHR0cHM6Ly9mbGF0dHIuY29tL3RoaW5nLzcyNzkxL1N0YWNrQmx1ci1hLWZhc3QtYWxtb3N0LUdhdXNzaWFuLUJsdXItRWZmZWN0LWZvci1DYW52YXNKYXZhc2NyaXB0XG5cbkNvcHlyaWdodCAoYykgMjAxMCBNYXJpbyBLbGluZ2VtYW5uXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG5vYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG5yZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbmNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcblNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG5jb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG5FWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbk9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5OT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG5XSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbkZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1Jcbk9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiovXG5cbm1vZHVsZS5leHBvcnRzID0gW1xuXHRcdDUxMiwgNTEyLCA0NTYsIDUxMiwgMzI4LCA0NTYsIDMzNSwgNTEyLCA0MDUsIDMyOCwgMjcxLCA0NTYsIDM4OCwgMzM1LCAyOTIsIDUxMixcblx0XHQ0NTQsIDQwNSwgMzY0LCAzMjgsIDI5OCwgMjcxLCA0OTYsIDQ1NiwgNDIwLCAzODgsIDM2MCwgMzM1LCAzMTIsIDI5MiwgMjczLCA1MTIsXG5cdFx0NDgyLCA0NTQsIDQyOCwgNDA1LCAzODMsIDM2NCwgMzQ1LCAzMjgsIDMxMiwgMjk4LCAyODQsIDI3MSwgMjU5LCA0OTYsIDQ3NSwgNDU2LFxuXHRcdDQzNywgNDIwLCA0MDQsIDM4OCwgMzc0LCAzNjAsIDM0NywgMzM1LCAzMjMsIDMxMiwgMzAyLCAyOTIsIDI4MiwgMjczLCAyNjUsIDUxMixcblx0XHQ0OTcsIDQ4MiwgNDY4LCA0NTQsIDQ0MSwgNDI4LCA0MTcsIDQwNSwgMzk0LCAzODMsIDM3MywgMzY0LCAzNTQsIDM0NSwgMzM3LCAzMjgsXG5cdFx0MzIwLCAzMTIsIDMwNSwgMjk4LCAyOTEsIDI4NCwgMjc4LCAyNzEsIDI2NSwgMjU5LCA1MDcsIDQ5NiwgNDg1LCA0NzUsIDQ2NSwgNDU2LFxuXHRcdDQ0NiwgNDM3LCA0MjgsIDQyMCwgNDEyLCA0MDQsIDM5NiwgMzg4LCAzODEsIDM3NCwgMzY3LCAzNjAsIDM1NCwgMzQ3LCAzNDEsIDMzNSxcblx0XHQzMjksIDMyMywgMzE4LCAzMTIsIDMwNywgMzAyLCAyOTcsIDI5MiwgMjg3LCAyODIsIDI3OCwgMjczLCAyNjksIDI2NSwgMjYxLCA1MTIsXG5cdFx0NTA1LCA0OTcsIDQ4OSwgNDgyLCA0NzUsIDQ2OCwgNDYxLCA0NTQsIDQ0NywgNDQxLCA0MzUsIDQyOCwgNDIyLCA0MTcsIDQxMSwgNDA1LFxuXHRcdDM5OSwgMzk0LCAzODksIDM4MywgMzc4LCAzNzMsIDM2OCwgMzY0LCAzNTksIDM1NCwgMzUwLCAzNDUsIDM0MSwgMzM3LCAzMzIsIDMyOCxcblx0XHQzMjQsIDMyMCwgMzE2LCAzMTIsIDMwOSwgMzA1LCAzMDEsIDI5OCwgMjk0LCAyOTEsIDI4NywgMjg0LCAyODEsIDI3OCwgMjc0LCAyNzEsXG5cdFx0MjY4LCAyNjUsIDI2MiwgMjU5LCAyNTcsIDUwNywgNTAxLCA0OTYsIDQ5MSwgNDg1LCA0ODAsIDQ3NSwgNDcwLCA0NjUsIDQ2MCwgNDU2LFxuXHRcdDQ1MSwgNDQ2LCA0NDIsIDQzNywgNDMzLCA0MjgsIDQyNCwgNDIwLCA0MTYsIDQxMiwgNDA4LCA0MDQsIDQwMCwgMzk2LCAzOTIsIDM4OCxcblx0XHQzODUsIDM4MSwgMzc3LCAzNzQsIDM3MCwgMzY3LCAzNjMsIDM2MCwgMzU3LCAzNTQsIDM1MCwgMzQ3LCAzNDQsIDM0MSwgMzM4LCAzMzUsXG5cdFx0MzMyLCAzMjksIDMyNiwgMzIzLCAzMjAsIDMxOCwgMzE1LCAzMTIsIDMxMCwgMzA3LCAzMDQsIDMwMiwgMjk5LCAyOTcsIDI5NCwgMjkyLFxuXHRcdDI4OSwgMjg3LCAyODUsIDI4MiwgMjgwLCAyNzgsIDI3NSwgMjczLCAyNzEsIDI2OSwgMjY3LCAyNjUsIDI2MywgMjYxLCAyNTldO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBpeGVscywgYWRqdXN0bWVudCkge1xuXHR2YXIgZCA9IHBpeGVscy5kYXRhO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHtcblx0XHRkW2ldICo9IGFkanVzdG1lbnQ7XG5cdFx0ZFtpICsgMV0gKj0gYWRqdXN0bWVudDtcblx0XHRkW2kgKyAyXSAqPSBhZGp1c3RtZW50O1xuXHR9XG5cdHJldHVybiBwaXhlbHM7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuXG5TdGFja0JsdXIgLSBhIGZhc3QgYWxtb3N0IEdhdXNzaWFuIEJsdXIgRm9yIENhbnZhc1xuXG5WZXJzaW9uOiAgMC41XG5BdXRob3I6IE1hcmlvIEtsaW5nZW1hbm5cbkNvbnRhY3Q6ICBtYXJpb0BxdWFzaW1vbmRvLmNvbVxuV2Vic2l0ZTogaHR0cDovL3d3dy5xdWFzaW1vbmRvLmNvbS9TdGFja0JsdXJGb3JDYW52YXNcblR3aXR0ZXI6IEBxdWFzaW1vbmRvXG5cbkluIGNhc2UgeW91IGZpbmQgdGhpcyBjbGFzcyB1c2VmdWwgLSBlc3BlY2lhbGx5IGluIGNvbW1lcmNpYWwgcHJvamVjdHMgLVxuSSBhbSBub3QgdG90YWxseSB1bmhhcHB5IGZvciBhIHNtYWxsIGRvbmF0aW9uIHRvIG15IFBheVBhbCBhY2NvdW50XG5tYXJpb0BxdWFzaW1vbmRvLmRlXG5cbk9yIHN1cHBvcnQgbWUgb24gZmxhdHRyOiBcbmh0dHBzOi8vZmxhdHRyLmNvbS90aGluZy83Mjc5MS9TdGFja0JsdXItYS1mYXN0LWFsbW9zdC1HYXVzc2lhbi1CbHVyLUVmZmVjdC1mb3ItQ2FudmFzSmF2YXNjcmlwdFxuXG5Db3B5cmlnaHQgKGMpIDIwMTAgTWFyaW8gS2xpbmdlbWFublxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxub2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb25cbmZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxucmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXG5jb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG5Tb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xuY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbmluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxuRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG5PRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxuTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcbkhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG5GUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXG5PVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcblx0XHQ5LCAxMSwgMTIsIDEzLCAxMywgMTQsIDE0LCAxNSwgMTUsIDE1LCAxNSwgMTYsIDE2LCAxNiwgMTYsIDE3LFxuXHRcdDE3LCAxNywgMTcsIDE3LCAxNywgMTcsIDE4LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE5LFxuXHRcdDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAyMCwgMjAsIDIwLFxuXHRcdDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIxLFxuXHRcdDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLFxuXHRcdDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLFxuXHRcdDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLFxuXHRcdDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIzLFxuXHRcdDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLFxuXHRcdDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLFxuXHRcdDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLFxuXHRcdDIzLCAyMywgMjMsIDIzLCAyMywgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuXHRcdDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuXHRcdDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuXHRcdDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LFxuXHRcdDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjRdO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG4vKlxuXG5TdGFja0JsdXIgLSBhIGZhc3QgYWxtb3N0IEdhdXNzaWFuIEJsdXIgRm9yIENhbnZhc1xuXG5WZXJzaW9uOiAgMC41XG5BdXRob3I6IE1hcmlvIEtsaW5nZW1hbm5cbkNvbnRhY3Q6ICBtYXJpb0BxdWFzaW1vbmRvLmNvbVxuV2Vic2l0ZTogaHR0cDovL3d3dy5xdWFzaW1vbmRvLmNvbS9TdGFja0JsdXJGb3JDYW52YXNcblR3aXR0ZXI6IEBxdWFzaW1vbmRvXG5cbkluIGNhc2UgeW91IGZpbmQgdGhpcyBjbGFzcyB1c2VmdWwgLSBlc3BlY2lhbGx5IGluIGNvbW1lcmNpYWwgcHJvamVjdHMgLVxuSSBhbSBub3QgdG90YWxseSB1bmhhcHB5IGZvciBhIHNtYWxsIGRvbmF0aW9uIHRvIG15IFBheVBhbCBhY2NvdW50XG5tYXJpb0BxdWFzaW1vbmRvLmRlXG5cbk9yIHN1cHBvcnQgbWUgb24gZmxhdHRyOlxuaHR0cHM6Ly9mbGF0dHIuY29tL3RoaW5nLzcyNzkxL1N0YWNrQmx1ci1hLWZhc3QtYWxtb3N0LUdhdXNzaWFuLUJsdXItRWZmZWN0LWZvci1DYW52YXNKYXZhc2NyaXB0XG5cbkNvcHlyaWdodCAoYykgMjAxMCBNYXJpbyBLbGluZ2VtYW5uXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG5vYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG5yZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbmNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcblNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG5jb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG5FWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbk9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5OT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG5XSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbkZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1Jcbk9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiovXG5cbmNvbnN0IG11bF90YWJsZSA9IHJlcXVpcmUoXCIuL211bF90YWJsZVwiKTtcbmNvbnN0IHNoZ190YWJsZSA9IHJlcXVpcmUoXCIuL3NoZ190YWJsZVwiKTtcbmNvbnN0IEJsdXJTdGFjayA9IHJlcXVpcmUoXCIuL0JsdXJTdGFja1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpbWFnZURhdGEsIG9wdHMpIHtcblx0aWYgKCh0eXBlb2Ygb3B0cyA9PT0gXCJvYmplY3RcIikgJiYgb3B0cy5oYXNPd25Qcm9wZXJ0eShcInJhZGl1c1wiKSkge1xuXHRcdG9wdHMgPSBvcHRzLnJhZGl1cztcblx0fVxuXHRpZiAoKHR5cGVvZiBvcHRzICE9PSBcIm51bWJlclwiKSB8fCBpc05hTihvcHRzKSB8fCAoMSA+IG9wdHMpKSB7XG5cdFx0Ly8gbm8gdmFsaWQgYXJndW1lbnQgdmFsdWUgZG8gbm90aGluZ1xuXHRcdHJldHVybiBpbWFnZURhdGE7XG5cdH1cblx0dmFyIHJhZGl1cyA9IG9wdHMgfCAwO1xuXHR2YXIgcGl4ZWxzID0gaW1hZ2VEYXRhLmRhdGEsXG5cdFx0d2lkdGggPSBpbWFnZURhdGEud2lkdGgsXG5cdFx0aGVpZ2h0ID0gaW1hZ2VEYXRhLmhlaWdodDtcblxuXHR2YXIgeCwgeSwgaSwgcCwgeXAsIHlpLCB5dywgcl9zdW0sIGdfc3VtLCBiX3N1bSxcblx0XHRyX291dF9zdW0sIGdfb3V0X3N1bSwgYl9vdXRfc3VtLFxuXHRcdHJfaW5fc3VtLCBnX2luX3N1bSwgYl9pbl9zdW0sXG5cdFx0cHIsIHBnLCBwYiwgcmJzO1xuXG5cdHZhciBkaXYgPSByYWRpdXMgKyByYWRpdXMgKyAxO1xuXHR2YXIgdzQgPSB3aWR0aCA8PCAyO1xuXHR2YXIgd2lkdGhNaW51czEgPSB3aWR0aCAtIDE7XG5cdHZhciBoZWlnaHRNaW51czEgPSBoZWlnaHQgLSAxO1xuXHR2YXIgcmFkaXVzUGx1czEgPSByYWRpdXMgKyAxO1xuXHR2YXIgc3VtRmFjdG9yID0gcmFkaXVzUGx1czEgKiAocmFkaXVzUGx1czEgKyAxKSAvIDI7XG5cblx0dmFyIHN0YWNrU3RhcnQgPSBuZXcgQmx1clN0YWNrKCk7XG5cdHZhciBzdGFjayA9IHN0YWNrU3RhcnQ7XG5cdGZvciAoaSA9IDE7IGkgPCBkaXY7IGkrKykge1xuXHRcdHN0YWNrID0gc3RhY2submV4dCA9IG5ldyBCbHVyU3RhY2soKTtcblx0XHRpZiAoaSA9PSByYWRpdXNQbHVzMSkgdmFyIHN0YWNrRW5kID0gc3RhY2s7XG5cdH1cblx0c3RhY2submV4dCA9IHN0YWNrU3RhcnQ7XG5cdHZhciBzdGFja0luID0gbnVsbDtcblx0dmFyIHN0YWNrT3V0ID0gbnVsbDtcblxuXHR5dyA9IHlpID0gMDtcblxuXHR2YXIgbXVsX3N1bSA9IG11bF90YWJsZVtyYWRpdXNdO1xuXHR2YXIgc2hnX3N1bSA9IHNoZ190YWJsZVtyYWRpdXNdO1xuXG5cdGZvciAoeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuXHRcdHJfaW5fc3VtID0gZ19pbl9zdW0gPSBiX2luX3N1bSA9IHJfc3VtID0gZ19zdW0gPSBiX3N1bSA9IDA7XG5cblx0XHRyX291dF9zdW0gPSByYWRpdXNQbHVzMSAqIChwciA9IHBpeGVsc1t5aV0pO1xuXHRcdGdfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKHBnID0gcGl4ZWxzW3lpICsgMV0pO1xuXHRcdGJfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKHBiID0gcGl4ZWxzW3lpICsgMl0pO1xuXG5cdFx0cl9zdW0gKz0gc3VtRmFjdG9yICogcHI7XG5cdFx0Z19zdW0gKz0gc3VtRmFjdG9yICogcGc7XG5cdFx0Yl9zdW0gKz0gc3VtRmFjdG9yICogcGI7XG5cblx0XHRzdGFjayA9IHN0YWNrU3RhcnQ7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgcmFkaXVzUGx1czE7IGkrKykge1xuXHRcdFx0c3RhY2suciA9IHByO1xuXHRcdFx0c3RhY2suZyA9IHBnO1xuXHRcdFx0c3RhY2suYiA9IHBiO1xuXHRcdFx0c3RhY2sgPSBzdGFjay5uZXh0O1xuXHRcdH1cblxuXHRcdGZvciAoaSA9IDE7IGkgPCByYWRpdXNQbHVzMTsgaSsrKSB7XG5cdFx0XHRwID0geWkgKyAoKHdpZHRoTWludXMxIDwgaSA/IHdpZHRoTWludXMxIDogaSkgPDwgMik7XG5cdFx0XHRyX3N1bSArPSAoc3RhY2suciA9IChwciA9IHBpeGVsc1twXSkpICogKHJicyA9IHJhZGl1c1BsdXMxIC0gaSk7XG5cdFx0XHRnX3N1bSArPSAoc3RhY2suZyA9IChwZyA9IHBpeGVsc1twICsgMV0pKSAqIHJicztcblx0XHRcdGJfc3VtICs9IChzdGFjay5iID0gKHBiID0gcGl4ZWxzW3AgKyAyXSkpICogcmJzO1xuXG5cdFx0XHRyX2luX3N1bSArPSBwcjtcblx0XHRcdGdfaW5fc3VtICs9IHBnO1xuXHRcdFx0Yl9pbl9zdW0gKz0gcGI7XG5cblx0XHRcdHN0YWNrID0gc3RhY2submV4dDtcblx0XHR9XG5cblx0XHRzdGFja0luID0gc3RhY2tTdGFydDtcblx0XHRzdGFja091dCA9IHN0YWNrRW5kO1xuXHRcdGZvciAoeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG5cdFx0XHRwaXhlbHNbeWldID0gKHJfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bTtcblx0XHRcdHBpeGVsc1t5aSArIDFdID0gKGdfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bTtcblx0XHRcdHBpeGVsc1t5aSArIDJdID0gKGJfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bTtcblxuXHRcdFx0cl9zdW0gLT0gcl9vdXRfc3VtO1xuXHRcdFx0Z19zdW0gLT0gZ19vdXRfc3VtO1xuXHRcdFx0Yl9zdW0gLT0gYl9vdXRfc3VtO1xuXG5cdFx0XHRyX291dF9zdW0gLT0gc3RhY2tJbi5yO1xuXHRcdFx0Z19vdXRfc3VtIC09IHN0YWNrSW4uZztcblx0XHRcdGJfb3V0X3N1bSAtPSBzdGFja0luLmI7XG5cblx0XHRcdHAgPSAoeXcgKyAoKHAgPSB4ICsgcmFkaXVzICsgMSkgPCB3aWR0aE1pbnVzMSA/IHAgOiB3aWR0aE1pbnVzMSkpIDw8IDI7XG5cblx0XHRcdHJfaW5fc3VtICs9IChzdGFja0luLnIgPSBwaXhlbHNbcF0pO1xuXHRcdFx0Z19pbl9zdW0gKz0gKHN0YWNrSW4uZyA9IHBpeGVsc1twICsgMV0pO1xuXHRcdFx0Yl9pbl9zdW0gKz0gKHN0YWNrSW4uYiA9IHBpeGVsc1twICsgMl0pO1xuXG5cdFx0XHRyX3N1bSArPSByX2luX3N1bTtcblx0XHRcdGdfc3VtICs9IGdfaW5fc3VtO1xuXHRcdFx0Yl9zdW0gKz0gYl9pbl9zdW07XG5cblx0XHRcdHN0YWNrSW4gPSBzdGFja0luLm5leHQ7XG5cblx0XHRcdHJfb3V0X3N1bSArPSAocHIgPSBzdGFja091dC5yKTtcblx0XHRcdGdfb3V0X3N1bSArPSAocGcgPSBzdGFja091dC5nKTtcblx0XHRcdGJfb3V0X3N1bSArPSAocGIgPSBzdGFja091dC5iKTtcblxuXHRcdFx0cl9pbl9zdW0gLT0gcHI7XG5cdFx0XHRnX2luX3N1bSAtPSBwZztcblx0XHRcdGJfaW5fc3VtIC09IHBiO1xuXG5cdFx0XHRzdGFja091dCA9IHN0YWNrT3V0Lm5leHQ7XG5cblx0XHRcdHlpICs9IDQ7XG5cdFx0fVxuXHRcdHl3ICs9IHdpZHRoO1xuXHR9XG5cblx0Zm9yICh4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcblx0XHRnX2luX3N1bSA9IGJfaW5fc3VtID0gcl9pbl9zdW0gPSBnX3N1bSA9IGJfc3VtID0gcl9zdW0gPSAwO1xuXG5cdFx0eWkgPSB4IDw8IDI7XG5cdFx0cl9vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAocHIgPSBwaXhlbHNbeWldKTtcblx0XHRnX291dF9zdW0gPSByYWRpdXNQbHVzMSAqIChwZyA9IHBpeGVsc1t5aSArIDFdKTtcblx0XHRiX291dF9zdW0gPSByYWRpdXNQbHVzMSAqIChwYiA9IHBpeGVsc1t5aSArIDJdKTtcblxuXHRcdHJfc3VtICs9IHN1bUZhY3RvciAqIHByO1xuXHRcdGdfc3VtICs9IHN1bUZhY3RvciAqIHBnO1xuXHRcdGJfc3VtICs9IHN1bUZhY3RvciAqIHBiO1xuXG5cdFx0c3RhY2sgPSBzdGFja1N0YXJ0O1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IHJhZGl1c1BsdXMxOyBpKyspIHtcblx0XHRcdHN0YWNrLnIgPSBwcjtcblx0XHRcdHN0YWNrLmcgPSBwZztcblx0XHRcdHN0YWNrLmIgPSBwYjtcblx0XHRcdHN0YWNrID0gc3RhY2submV4dDtcblx0XHR9XG5cblx0XHR5cCA9IHdpZHRoO1xuXG5cdFx0Zm9yIChpID0gMTsgaSA8PSByYWRpdXM7IGkrKykge1xuXHRcdFx0eWkgPSAoeXAgKyB4KSA8PCAyO1xuXG5cdFx0XHRyX3N1bSArPSAoc3RhY2suciA9IChwciA9IHBpeGVsc1t5aV0pKSAqIChyYnMgPSByYWRpdXNQbHVzMSAtIGkpO1xuXHRcdFx0Z19zdW0gKz0gKHN0YWNrLmcgPSAocGcgPSBwaXhlbHNbeWkgKyAxXSkpICogcmJzO1xuXHRcdFx0Yl9zdW0gKz0gKHN0YWNrLmIgPSAocGIgPSBwaXhlbHNbeWkgKyAyXSkpICogcmJzO1xuXG5cdFx0XHRyX2luX3N1bSArPSBwcjtcblx0XHRcdGdfaW5fc3VtICs9IHBnO1xuXHRcdFx0Yl9pbl9zdW0gKz0gcGI7XG5cblx0XHRcdHN0YWNrID0gc3RhY2submV4dDtcblxuXHRcdFx0aWYgKGkgPCBoZWlnaHRNaW51czEpIHtcblx0XHRcdFx0eXAgKz0gd2lkdGg7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0eWkgPSB4O1xuXHRcdHN0YWNrSW4gPSBzdGFja1N0YXJ0O1xuXHRcdHN0YWNrT3V0ID0gc3RhY2tFbmQ7XG5cdFx0Zm9yICh5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG5cdFx0XHRwID0geWkgPDwgMjtcblx0XHRcdHBpeGVsc1twXSA9IChyX3N1bSAqIG11bF9zdW0pID4+IHNoZ19zdW07XG5cdFx0XHRwaXhlbHNbcCArIDFdID0gKGdfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bTtcblx0XHRcdHBpeGVsc1twICsgMl0gPSAoYl9zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtO1xuXG5cdFx0XHRyX3N1bSAtPSByX291dF9zdW07XG5cdFx0XHRnX3N1bSAtPSBnX291dF9zdW07XG5cdFx0XHRiX3N1bSAtPSBiX291dF9zdW07XG5cblx0XHRcdHJfb3V0X3N1bSAtPSBzdGFja0luLnI7XG5cdFx0XHRnX291dF9zdW0gLT0gc3RhY2tJbi5nO1xuXHRcdFx0Yl9vdXRfc3VtIC09IHN0YWNrSW4uYjtcblxuXHRcdFx0cCA9ICh4ICsgKCgocCA9IHkgKyByYWRpdXNQbHVzMSkgPCBoZWlnaHRNaW51czEgPyBwIDogaGVpZ2h0TWludXMxKSAqIHdpZHRoKSkgPDwgMjtcblxuXHRcdFx0cl9zdW0gKz0gKHJfaW5fc3VtICs9IChzdGFja0luLnIgPSBwaXhlbHNbcF0pKTtcblx0XHRcdGdfc3VtICs9IChnX2luX3N1bSArPSAoc3RhY2tJbi5nID0gcGl4ZWxzW3AgKyAxXSkpO1xuXHRcdFx0Yl9zdW0gKz0gKGJfaW5fc3VtICs9IChzdGFja0luLmIgPSBwaXhlbHNbcCArIDJdKSk7XG5cblx0XHRcdHN0YWNrSW4gPSBzdGFja0luLm5leHQ7XG5cblx0XHRcdHJfb3V0X3N1bSArPSAocHIgPSBzdGFja091dC5yKTtcblx0XHRcdGdfb3V0X3N1bSArPSAocGcgPSBzdGFja091dC5nKTtcblx0XHRcdGJfb3V0X3N1bSArPSAocGIgPSBzdGFja091dC5iKTtcblxuXHRcdFx0cl9pbl9zdW0gLT0gcHI7XG5cdFx0XHRnX2luX3N1bSAtPSBwZztcblx0XHRcdGJfaW5fc3VtIC09IHBiO1xuXG5cdFx0XHRzdGFja091dCA9IHN0YWNrT3V0Lm5leHQ7XG5cblx0XHRcdHlpICs9IHdpZHRoO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gaW1hZ2VEYXRhO1xufTtcblxuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAbW9kdWxlIHV0aWxzL2NhbnZhcy9jYWxjQXJjSENvbm5lY3RvclxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeDEsIHkxLCByMSwgeDIsIHkyLCByMiwgcm8pIHtcblx0dmFyIHF4ID0geDIgPiB4MSA/IDEgOiAtMTtcblx0dmFyIHF5ID0geTIgPiB5MSA/IDEgOiAtMTtcblx0dmFyIGR5ID0gTWF0aC5hYnMoeTIgLSB5MSk7XG5cdHZhciBkeCA9IE1hdGguYWJzKHgyIC0geDEpO1xuXHR2YXIgcnIgPSByMSArIHIyO1xuXHR2YXIgdHgxLCB0eDIsIGMsIHR4LCB0eTtcblxuXHRpZiAoZHkgPCAxKSB7XG5cdFx0Ly8gcG9pbnRzIGFyZSBhbGlnbmVkIGhvcml6b250YWxseSwgbm8gYXJjcyBuZWVkZWRcblx0XHR0eDEgPSAwO1xuXHRcdHR4MiA9IGR4XG5cdFx0Ly8gcmV0dXJuIFt4MSwgeDJdO1xuXHR9XG5cblx0aWYgKGR5ID49IHJyICYmIGR4ID49IHJyKSB7XG5cdFx0Ly8gYXJjcyBmaXQgaG9yaXpvbnRhbGx5OlxuXHRcdC8vIHNlY29uZCBjaXJjbGUgY2VudGVyIGlzIHIxK3IyLCB0YW5nZW50IGludGVyc2VjdCBhdCB4PXIxXG5cdFx0YyA9IHJyO1xuXHRcdHR4MSA9IHIxO1xuXHRcdHR4MiA9IHIxO1xuXHR9IGVsc2Uge1xuXHRcdC8vIGFyY3Mgb3ZlcmxhcCBob3Jpem9udGFsbHk6XG5cdFx0Ly8gZmluZCBzZWNvbmQgY2lyY2xlIGNlbnRlclxuXHRcdGMgPSBNYXRoLnNxcnQoZHkgKiByMiAqIDIgKyBkeSAqIHIxICogMiAtIGR5ICogZHkpO1xuXG5cdFx0Ly8gY2lyY2xlcyB0YW5nZW50IHBvaW50XG5cdFx0dHggPSAoYyAqIHIxKSAvIHJyO1xuXHRcdHR5ID0gKGR5ICogcjEpIC8gcnI7XG5cblx0XHRpZiAocjEgPCB0eSB8fCBjID4gZHgpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyB0YW5nZW50IHBlcnBlbmRpY3VsYXIgc2xvcGVcblx0XHR2YXIgc2xvcGUgPSAocnIgLSBkeSkgLyBjO1xuXHRcdC8vIHRhbmdlbnQgaW50ZXJzZWN0aW9uc1xuXHRcdHR4MSA9IHR4IC0gKHR5ICogc2xvcGUpO1xuXHRcdHR4MiA9IChkeSAqIHNsb3BlKSArIHR4MTtcblxuXHRcdC8qXG5cdFx0Ly8gY2lyY2xlIGNlbnRlcnNcblx0XHR2YXIgY2N4MSwgY2N5MSwgY2N4MiwgY2N5Mjtcblx0XHRjY3gxID0gMDtcblx0XHRjY3kxID0gcjE7XG5cdFx0Y2N4MiA9IGM7XG5cdFx0Y2N5MiA9IGR5IC0gcjI7XG5cdFx0Ly8gdGFuZ2VudCBwZXJwZW5kaWN1bGFyIHNsb3BlXG5cdFx0dmFyIHNsb3BlID0gKGNjeTEgLSBjY3kyKSAvIChjY3gyIC0gY2N4MSk7XG5cdFx0dmFyIHhTZWMgPSB0eCAtICh0eSAqIHNsb3BlKTtcblx0XHQvLyB0YW5nZW50IGludGVyc2VjdGlvbnNcblx0XHR0eDEgPSB4U2VjO1xuXHRcdHR4MiA9IChkeSAqIHNsb3BlKSArIHhTZWM7XG5cdFx0Ki9cblx0fVxuXG5cdC8vIG9mZnNldCBhcmNUbydzIGluIHgtYXhpc1xuXHRpZiAocm8gPiAwKSB7XG5cdFx0aWYgKHJvID4gMSkge1xuXHRcdFx0cm8gPSBNYXRoLm1pbihkeCAtIHJyLCBybyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJvICo9IGR4IC0gcnI7XG5cdFx0fVxuXHRcdHR4MSArPSBybztcblx0XHR0eDIgKz0gcm87XG5cdH1cblxuXHRyZXR1cm4gW3R4MSAqIHF4ICsgeDEsIHR4MiAqIHF4ICsgeDEsIHR4MSwgdHgyXTtcbn07XG5cbi8qXG52YXIgZHJhd0FyY0Nvbm5lY3RvciA9IGZ1bmN0aW9uKGN0eCwgeDEsIHkxLCB4MiwgeTIsIHIpIHtcblx0dmFyIGR4LCBkeSwgaHgsIGh5LCBneCwgZ3k7XG5cblx0aHggPSAwO1xuXHRoeSA9IDA7XG5cdGd4ID0gKHgxICsgeDIpIC8gMjtcblx0Z3kgPSAoeTEgKyB5MikgLyAyO1xuXHRkeCA9IE1hdGguYWJzKHgxIC0gZ3gpO1xuXHRkeSA9IE1hdGguYWJzKHkxIC0gZ3kpO1xuXG5cdGlmIChkeCA8IHIgJiYgZHkgPCByKSB7XG5cdFx0ciA9IE1hdGgubWluKGR4ICogTWF0aC5TUVJUMV8yLCBkeSAqIE1hdGguU1FSVDFfMik7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKGR4IDwgcikge1xuXHRcdFx0aHkgPSBNYXRoLmFjb3MoZHggLyByKSAqIHIgKiAwLjU7XG5cdFx0XHRpZiAoeTEgPiB5MikgaHkgKj0gLTE7XG5cdFx0fVxuXHRcdGlmIChkeSA8IHIpIHtcblx0XHRcdGh4ID0gTWF0aC5hY29zKGR5IC8gcikgKiByICogMC41O1xuXHRcdFx0aWYgKHgxID4geDIpIGh4ICo9IC0xO1xuXHRcdH1cblx0fVxuXHRjdHguYXJjVG8oZ3ggLSBoeCwgeTEsIGd4ICsgaHgsIHkyLCByKTtcblx0Y3R4LmFyY1RvKGd4ICsgaHgsIHkyLCB4MiwgeTIsIHIpO1xufTtcblxudmFyIGRyYXdBcmNDb25uZWN0b3IyID0gZnVuY3Rpb24oY3R4LCB4MSwgeTEsIHgyLCB5Miwgcikge1xuXHR2YXIgZHgsIGR5LCBoeCwgaHksIGN4MSwgY3gyO1xuXG5cdGh4ID0gMDtcblx0aHkgPSAwO1xuXHRkeCA9IE1hdGguYWJzKHgyIC0geDEpIC8gMjtcblx0ZHkgPSBNYXRoLmFicyh5MSAtIHkyKSAvIDI7XG5cblx0aWYgKGR4IDwgciAmJiBkeSA8IHIpIHtcblx0XHRyID0gTWF0aC5taW4oZHggKiBNYXRoLlNRUlQxXzIsIGR5ICogTWF0aC5TUVJUMV8yKTtcblx0fSBlbHNlIHtcblx0XHRpZiAoZHggPCByKSB7XG5cdFx0XHRoeSA9IE1hdGguYWNvcyhkeCAvIHIpICogcjtcblx0XHR9XG5cdFx0aWYgKGR5IDwgcikge1xuXHRcdFx0aHggPSBNYXRoLmFjb3MoZHkgLyByKSAqIHI7XG5cdFx0fVxuXHR9XG5cdGN4MSA9IHgxICsgZHg7XG5cdGN4MiA9IHgyIC0gKGR4IC0gaHggLyAyKTtcblx0Y3R4LmFyY1RvKGN4MSwgeTEsIGN4MiwgeTIsIHIpO1xuXHRjdHguYXJjVG8oY3gyLCB5MiwgeDIsIHkyLCByKTtcbn07XG5cbnZhciBkcmF3QXJjQ29ubmVjdG9yMSA9IGZ1bmN0aW9uKGN0eCwgeDEsIHkxLCB4MiwgeTIsIHIpIHtcblx0dmFyIGR4LCBkeSwgY3g7XG5cblx0ZHggPSBNYXRoLmFicyh4MiAtIHgxKSAvIDI7XG5cdGR5ID0gTWF0aC5hYnMoeTEgLSB5MikgLyAyO1xuXHRyID0gTWF0aC5taW4ociwgZHkgKiBNYXRoLlNRUlQxXzIpO1xuXHRpZiAoeDEgPCB4Mikge1xuXHRcdGN4ID0geDEgKyBkeCArIHI7XG5cdH0gZWxzZSB7XG5cdFx0Y3ggPSB4MiAtIGR4IC0gcjtcblx0fVxuXHQvLyBjeCA9ICh4MiArIHgxKSAvIDI7XG5cdC8vIGN4ICs9IHgxIDwgeDIgPyByIDogLXI7XG5cblx0Y3R4LmFyY1RvKGN4LCB5MSwgY3gsIHkyLCByKTtcblx0Y3R4LmFyY1RvKGN4LCB5MiwgeDIsIHkyLCByKTtcbn07XG4qL1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgSFRNTEVsZW1lbnQsIENTU1N0eWxlRGVjbGFyYXRpb24gKi9cblxuLy8gdmFyIHBhcnNlU2l6ZSA9IHJlcXVpcmUoXCIuL3BhcnNlU2l6ZVwiKTtcblxudmFyIENTU19CT1hfUFJPUFMgPSBbXG5cdFwiYm94U2l6aW5nXCIsIFwicG9zaXRpb25cIiwgXCJvYmplY3RGaXRcIlxuXTtcbnZhciBDU1NfRURHRV9QUk9QUyA9IFtcblx0XCJtYXJnaW5Ub3BcIiwgXCJtYXJnaW5Cb3R0b21cIiwgXCJtYXJnaW5MZWZ0XCIsIFwibWFyZ2luUmlnaHRcIixcblx0XCJib3JkZXJUb3BXaWR0aFwiLCBcImJvcmRlckJvdHRvbVdpZHRoXCIsIFwiYm9yZGVyTGVmdFdpZHRoXCIsIFwiYm9yZGVyUmlnaHRXaWR0aFwiLFxuXHRcInBhZGRpbmdUb3BcIiwgXCJwYWRkaW5nQm90dG9tXCIsIFwicGFkZGluZ0xlZnRcIiwgXCJwYWRkaW5nUmlnaHRcIixcbl07XG52YXIgQ1NTX1BPU19QUk9QUyA9IFtcInRvcFwiLCBcImJvdHRvbVwiLCBcImxlZnRcIiwgXCJyaWdodFwiXTtcbnZhciBDU1NfU0laRV9QUk9QUyA9IFtcIndpZHRoXCIsIFwiaGVpZ2h0XCIsIFwibWluV2lkdGhcIiwgXCJtaW5IZWlnaHRcIiwgXCJtYXhXaWR0aFwiLCBcIm1heEhlaWdodFwiXTtcbnZhciBDU1NfQUxMX1BST1BTID0gQ1NTX0VER0VfUFJPUFMuY29uY2F0KENTU19TSVpFX1BST1BTLCBDU1NfUE9TX1BST1BTKTtcblxuLy8gdmFyIENPTVBVVEVEX1BST1BTID0gW1xuLy8gXHRcImNsaWVudExlZnRcIiwgXCJjbGllbnRUb3BcIiwgXCJjbGllbnRXaWR0aFwiLCBcImNsaWVudEhlaWdodFwiLFxuLy8gXHRcIm9mZnNldExlZnRcIiwgXCJvZmZzZXRUb3BcIiwgXCJvZmZzZXRXaWR0aFwiLCBcIm9mZnNldEhlaWdodFwiXG4vLyBdO1xuLy8gdmFyIG8gPSBfLnBpY2soZWxlbWVudCwgZnVuY3Rpb24odmFsKSB7XG4vLyBcdHJldHVybiAvXihvZmZzZXR8Y2xpZW50KShMZWZ0fFRvcHxXaWR0aHxIZWlnaHQpLy50ZXN0KHZhbCk7XG4vLyB9KTtcblxudmFyIGNzc0RpbWVuc2lvblJFID0gL14oLT9bXFxkXFwuXSspKHB4fGVtfHJlbSkkLztcbi8vIHZhciBjc3NEaW1SZSA9IC9eKFstXFwuMC05XSspKFtyZW1dKykkLztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzLCBtLCBpbmNsdWRlU2l6ZVBvcykge1xuXHRpZiAocyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG5cdFx0cyA9IGdldENvbXB1dGVkU3R5bGUocyk7XG5cdH1cblx0aWYgKERFQlVHKSB7XG5cdFx0aWYgKCEocyBpbnN0YW5jZW9mIENTU1N0eWxlRGVjbGFyYXRpb24pKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYSBDU1NTdHlsZURlY2xhcmF0aW9uIG5vciBIVE1MRWxlbWVudFwiKTtcblx0XHR9XG5cdH1cblx0dmFyIHYsIHAsIGksIGlpLCBlbVB4LCByZW1QeDtcblx0bSB8fCAobSA9IHt9KTtcblxuXHRlbVB4ID0gbS5mb250U2l6ZSA9IHBhcnNlRmxvYXQocy5mb250U2l6ZSk7XG5cblx0Zm9yIChpID0gMCwgaWkgPSBDU1NfQk9YX1BST1BTLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcblx0XHRwID0gQ1NTX0JPWF9QUk9QU1tpXTtcblx0XHRpZiAocCBpbiBzKSB7XG5cdFx0XHRtW3BdID0gc1twXTtcblx0XHR9XG5cdH1cblx0dmFyIGNzc1Byb3BzID0gaW5jbHVkZVNpemVQb3MgPyBDU1NfRURHRV9QUk9QUyA6IENTU19BTExfUFJPUFM7XG5cdGZvciAoaSA9IDAsIGlpID0gY3NzUHJvcHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuXHRcdHAgPSBjc3NQcm9wc1tpXTtcblx0XHRtW1wiX1wiICsgcF0gPSBzW3BdO1xuXHRcdGlmIChzW3BdICYmICh2ID0gY3NzRGltZW5zaW9uUkUuZXhlYyhzW3BdKSkpIHtcblx0XHRcdGlmICh2WzJdID09PSBcInB4XCIpIHtcblx0XHRcdFx0bVtwXSA9IHBhcnNlRmxvYXQodlsxXSk7XG5cdFx0XHR9IGVsc2UgaWYgKHZbMl0gPT09IFwiZW1cIikge1xuXHRcdFx0XHRtW3BdID0gcGFyc2VGbG9hdCh2WzFdKSAqIGVtUHg7XG5cdFx0XHR9IGVsc2UgaWYgKHZbMl0gPT09IFwicmVtXCIpIHtcblx0XHRcdFx0cmVtUHggfHwgKHJlbVB4ID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuZm9udFNpemUpKTtcblx0XHRcdFx0bVtwXSA9IHBhcnNlRmxvYXQodlsxXSkgKiByZW1QeDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIklnbm9yaW5nIHZhbHVlXCIsIHAsIHZbMV0sIHZbMl0pO1xuXHRcdFx0XHRtW3BdID0gbnVsbDtcblx0XHRcdH1cblx0XHR9IC8vIGVsc2Uge1xuXHRcdC8vXHRjb25zb2xlLndhcm4oXCJJZ25vcmluZyB1bml0bGVzcyB2YWx1ZVwiLCBwLCB2KTtcblx0XHQvL31cblx0fVxuXHRyZXR1cm4gbTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIGVhc2VJblF1YWQgKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCwgdCwgYiwgYywgZCkge1xuXHRyZXR1cm4gYyAqICh0IC89IGQpICogdCArIGI7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBlYXNlT3V0UXVhZCAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdHJldHVybiAtYyAqICh0IC89IGQpICogKHQgLSAyKSArIGI7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIGN1cnJlbnQgaXRlcmF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gcyBzdGFydCB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGQgY2hhbmdlIGluIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gdCB0b3RhbCBpdGVyYXRpb25zXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbnZhciBsaW5lYXIgPSBmdW5jdGlvbihpLCBzLCBkLCB0KSB7XG5cdHJldHVybiBkICogaSAvIHQgKyBzO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBsaW5lYXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQG1vZHVsZSBhcHAvdmlldy9jb21wb25lbnQvR3JhcGhWaWV3XG4gKi9tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHJlY3QsIGR4LCBkeSkge1xuXHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG5cdFx0ZHkgPSBkeDtcblx0fVxuXHR2YXIgciA9IHtcblx0XHR3aWR0aDogcmVjdC53aWR0aCArIGR4ICogMixcblx0XHRoZWlnaHQ6IHJlY3QuaGVpZ2h0ICsgZHkgKiAyXG5cdH07XG5cdGlmIChyLndpZHRoID49IDApIHtcblx0XHRyLmxlZnQgPSByZWN0LmxlZnQgLSBkeDtcblx0XHRyLnJpZ2h0ID0gci5sZWZ0ICsgci53aWR0aDtcblx0XHRyLnggPSByLmxlZnQ7XG5cdH0gZWxzZSB7XG5cdFx0ci5yaWdodCA9IHJlY3QucmlnaHQgKyBkeDtcblx0XHRyLmxlZnQgPSByZWN0LnJpZ2h0IC0gci53aWR0aDtcblx0XHRyLnkgPSByLnJpZ2h0O1xuXHR9XG5cdGlmIChyLmhlaWdodCA+PSAwKSB7XG5cdFx0ci50b3AgPSByZWN0LnRvcCAtIGR5O1xuXHRcdHIuYm90dG9tID0gci50b3AgKyByLmhlaWdodDtcblx0XHRyLnkgPSByLnRvcDtcblx0fSBlbHNlIHtcblx0XHRyLmJvdHRvbSA9IHJlY3QuYm90dG9tICsgZHk7XG5cdFx0ci50b3AgPSByZWN0LmJvdHRvbSAtIHIuaGVpZ2h0O1xuXHRcdHIueSA9IHIuYm90dG9tO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiogQHR5cGUge0FycmF5fSBsb3dlcmNhc2UgcHJlZml4ZXMgKi9cbnZhciBsY1ByZWZpeGVzID0gW1wiXCJdLmNvbmNhdChyZXF1aXJlKFwiLi9wcmVmaXhlc1wiKSk7XG5cbi8qKiBAdHlwZSB7QXJyYXl9IGNhcGl0YWxpemVkIHByZWZpeGVzICovXG52YXIgdWNQcmVmaXhlcyA9IGxjUHJlZml4ZXMubWFwKGZ1bmN0aW9uKHMpIHtcblx0cmV0dXJuIChzID09PSBcIlwiKSA/IHMgOiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zdWJzdHIoMSk7XG59KTtcblxuLyoqIEB0eXBlIHtPYmplY3R9IHNwZWNpZmljIGV2ZW50IHNvbHZlcnMgKi9cbnZhciBfc29sdmVycyA9IHt9O1xuXG4vKiogQHR5cGUge09iamVjdH0gY2FjaGVkIHZhbHVlcyAqL1xudmFyIF9jYWNoZSA9IHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFVucHJlZml4ZWQgZXZlbnQgbmFtZVxuICogQHBhcmFtIHs/T2JqZWN0fSBvYmogUHJlZml4IHRlc3QgdGFyZ2V0XG4gKiBAcGFyYW0gez9TdHJpbmd9IHRlc3RQcm9wIFByb3h5IHByb3BlcnR5IHRvIHRlc3QgcHJlZml4ZXNcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG52YXIgX3ByZWZpeGVkRXZlbnQgPSBmdW5jdGlvbihuYW1lLCBvYmosIHRlc3RQcm9wKSB7XG5cdHZhciBwcmVmaXhlcyA9IC9eW0EtWl0vLnRlc3QobmFtZSkgPyB1Y1ByZWZpeGVzIDogbGNQcmVmaXhlcztcblx0b2JqIHx8IChvYmogPSBkb2N1bWVudCk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAodGVzdFByb3ApIHtcblx0XHRcdGlmICgocHJlZml4ZXNbaV0gKyB0ZXN0UHJvcCkgaW4gb2JqKSB7XG5cdFx0XHRcdHJldHVybiBwcmVmaXhlc1tpXSArIG5hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICgoXCJvblwiICsgcHJlZml4ZXNbaV0gKyBuYW1lKSBpbiBvYmopIHtcblx0XHRcdHJldHVybiBwcmVmaXhlc1tpXSArIG5hbWU7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBudWxsO1xufTtcblxuLy8gdHJhbnNpdGlvbmVuZFxuX3NvbHZlcnNbXCJ0cmFuc2l0aW9uZW5kXCJdID0gZnVuY3Rpb24oKSB7XG5cdHZhciBwcm9wLCBzdHlsZSA9IGRvY3VtZW50LmJvZHkuc3R5bGUsXG5cdFx0bWFwID0ge1xuXHRcdFx0XCJ0cmFuc2l0aW9uXCI6IFwidHJhbnNpdGlvbmVuZFwiLFxuXHRcdFx0XCJXZWJraXRUcmFuc2l0aW9uXCI6IFwid2Via2l0VHJhbnNpdGlvbkVuZFwiLFxuXHRcdFx0XCJNb3pUcmFuc2l0aW9uXCI6IFwidHJhbnNpdGlvbmVuZFwiLFxuXHRcdFx0Ly8gXCJtc1RyYW5zaXRpb25cIiA6IFwiTVNUcmFuc2l0aW9uRW5kXCIsXG5cdFx0XHRcIk9UcmFuc2l0aW9uXCI6IFwib1RyYW5zaXRpb25FbmRcIlxuXHRcdH07XG5cdGZvciAocHJvcCBpbiBtYXApIHtcblx0XHRpZiAocHJvcCBpbiBzdHlsZSkge1xuXHRcdFx0cmV0dXJuIG1hcFtwcm9wXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIGdldCB0aGUgcHJlZml4ZWQgcHJvcGVydHlcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBuYW1lXG4gKiBAcGFyYW0ge09iamVjdH0gbG9vay11cCBvYmplY3RcbiAqIEByZXR1cm5zIHtTdHJpbmd8bnVsbH0gcHJlZml4ZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihldk5hbWUpIHtcblx0aWYgKCFfY2FjaGUuaGFzT3duUHJvcGVydHkoZXZOYW1lKSkge1xuXHRcdF9jYWNoZVtldk5hbWVdID0gX3NvbHZlcnMuaGFzT3duUHJvcGVydHkoZXZOYW1lKSA/IF9zb2x2ZXJzW2V2TmFtZV0oKSA6IF9wcmVmaXhlZEV2ZW50LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG5cdFx0aWYgKF9jYWNoZVtldk5hbWVdID09PSBudWxsKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJFdmVudCAnJXMnIG5vdCBmb3VuZFwiLCBldk5hbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkV2ZW50ICclcycgZm91bmQgYXMgJyVzJ1wiLCBldk5hbWUsIF9jYWNoZVtldk5hbWVdKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIF9jYWNoZVtldk5hbWVdO1xuXHQvLyByZXR1cm4gX2NhY2hlW2V2TmFtZV0gfHwgKF9jYWNoZVtldk5hbWVdID0gX3NvbHZlcnNbZXZOYW1lXT8gX3NvbHZlcnNbZXZOYW1lXS5jYWxsKCkgOiBfcHJlZml4ZWRQcm9wZXJ0eS5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbn07XG5cbi8qXG52YXIgZGVmYXVsdFRlc3QgPSBmdW5jdGlvbihuYW1lLCBvYmopIHtcblx0dmFyIHByZWZpeGVzID0gL15bQS1aXS8udGVzdChuYW1lKT8gdWNQcmVmaXhlcyA6IGxjUHJlZml4ZXM7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoKFwib25cIiArIHByZWZpeGVzW2ldICsgbmFtZSkgaW4gb2JqKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkV2ZW50ICclcycgZm91bmQgYXMgJyVzJ1wiLCBuYW1lLCBwcmVmaXhlc1tpXSArIG5hbWUpO1xuXHRcdFx0cmV0dXJuIHByZWZpeGVzW2ldICsgbmFtZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG52YXIgcHJveHlUZXN0ID0gZnVuY3Rpb24obmFtZSwgb2JqLCB0ZXN0UHJvcCkge1xuXHR2YXIgcHJlZml4ZXMgPSAvXltBLVpdLy50ZXN0KG5hbWUpPyB1Y1ByZWZpeGVzIDogbGNQcmVmaXhlcztcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmICgocHJlZml4ZXNbaV0gKyB0ZXN0UHJvcCkgaW4gb2JqKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkV2ZW50ICVzIGluZmVycmVkIGFzICclcycgZnJvbSBwcm9wZXJ0eSAnJXMnXCIsIG5hbWUsIHByZWZpeGVzW2ldICsgbmFtZSwgdGVzdFByb3ApO1xuXHRcdFx0cmV0dXJuIHByZWZpeGVzW2ldICsgbmFtZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuKi9cbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4vKiBAbW9kdWxlIHV0aWxzL3ByZWZpeGVkUHJvcGVydHlcbi8qL1xuXG4vKiogQHR5cGUge21vZHVsZTp1dGlscy9wcmVmaXhlc30gKi9cbmNvbnN0IHByZWZpeGVzID0gcmVxdWlyZShcIi4vcHJlZml4ZXNcIik7XG4vKiogQHR5cGUge051bWJlcn0gcHJlZml4IGNvdW50ICovXG52YXIgX3ByZWZpeE51bSA9IHByZWZpeGVzLmxlbmd0aDtcbi8qKiBAdHlwZSB7QXJyYXl9IGNhY2hlZCB2YWx1ZXMgKi9cbnZhciBfY2FjaGUgPSB7fTtcblxudmFyIF9wcmVmaXhlZFByb3BlcnR5ID0gZnVuY3Rpb24ocHJvcCwgb2JqKSB7XG5cdHZhciBwcmVmaXhlZFByb3AsIGNhbWVsUHJvcDtcblxuXHRpZiAocHJvcCBpbiBvYmopIHtcblx0XHRjb25zb2xlLmxvZyhcIlByb3BlcnR5ICclcycgZm91bmQgdW5wcmVmaXhlZFwiLCBwcm9wKTtcblx0XHRyZXR1cm4gcHJvcDtcblx0fVxuXHRjYW1lbFByb3AgPSBwcm9wWzBdLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IF9wcmVmaXhOdW07IGkrKykge1xuXHRcdHByZWZpeGVkUHJvcCA9IHByZWZpeGVzW2ldICsgY2FtZWxQcm9wO1xuXHRcdGlmIChwcmVmaXhlZFByb3AgaW4gb2JqKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIlByb3BlcnR5ICclcycgZm91bmQgYXMgJyVzJ1wiLCBwcm9wLCBwcmVmaXhlZFByb3ApO1xuXHRcdFx0cmV0dXJuIHByZWZpeGVkUHJvcDtcblx0XHR9XG5cdH1cblx0Y29uc29sZS5lcnJvcihcIlByb3BlcnR5ICclcycgbm90IGZvdW5kXCIsIHByb3ApO1xuXHRyZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogZ2V0IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eVxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBsb29rLXVwIG9iamVjdFxuICogQHJldHVybnMge1N0cmluZ3xudWxsfSBwcmVmaXhlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHByb3AsIG9iaikge1xuXHRyZXR1cm4gX2NhY2hlW3Byb3BdIHx8IChfY2FjaGVbcHJvcF0gPSBfcHJlZml4ZWRQcm9wZXJ0eShwcm9wLCBvYmogfHwgZG9jdW1lbnQuYm9keS5zdHlsZSkpO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG4vKiBAbW9kdWxlIHV0aWxzL3ByZWZpeGVkU3R5bGVOYW1lXG4vKi9cblxuLyoqIEB0eXBlIHttb2R1bGU6dXRpbHMvcHJlZml4ZXN9ICovXG5jb25zdCBwcmVmaXhlcyA9IHJlcXVpcmUoXCIuL3ByZWZpeGVzXCIpOyAvLy5tYXAoZnVuY3Rpb24ocHJlZml4KSB7IHJldHVybiBcIi1cIiArIHByZWZpeCArIFwiLVwiOyB9KTtcbi8qKiBAdHlwZSB7TnVtYmVyfSBwcmVmaXggY291bnQgKi9cbnZhciBfcHJlZml4TnVtID0gcHJlZml4ZXMubGVuZ3RoO1xuLyoqIEB0eXBlIHtBcnJheX0gY2FjaGVkIHZhbHVlcyAqL1xudmFyIF9jYWNoZSA9IHt9O1xuXG52YXIgX3ByZWZpeGVkU3R5bGVOYW1lID0gZnVuY3Rpb24oc3R5bGUsIHN0eWxlT2JqKSB7XG5cdHZhciBwcmVmaXhlZFN0eWxlO1xuXG5cdGlmIChzdHlsZSBpbiBzdHlsZU9iaikge1xuXHRcdGNvbnNvbGUubG9nKFwiQ1NTIHN0eWxlICclcycgZm91bmQgdW5wcmVmaXhlZFwiLCBzdHlsZSk7XG5cdFx0cmV0dXJuIHN0eWxlO1xuXHR9XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgX3ByZWZpeE51bTsgaSsrKSB7XG5cdFx0cHJlZml4ZWRTdHlsZSA9IFwiLVwiICsgcHJlZml4ZXNbaV0gKyBcIi1cIiArIHN0eWxlO1xuXHRcdC8vIHByZWZpeGVkU3R5bGUgPSBwcmVmaXhlc1tpXSArIHN0eWxlO1xuXHRcdGlmIChwcmVmaXhlZFN0eWxlIGluIHN0eWxlT2JqKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkNTUyBzdHlsZSAnJXMnIGZvdW5kIGFzICclcydcIiwgc3R5bGUsIHByZWZpeGVkU3R5bGUpO1xuXHRcdFx0cmV0dXJuIHByZWZpeGVkU3R5bGU7XG5cdFx0fVxuXHR9XG5cdGNvbnNvbGUud2FybihcIkNTUyBzdHlsZSAnJXMnIG5vdCBmb3VuZFwiLCBzdHlsZSk7XG5cdHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBnZXQgdGhlIHByZWZpeGVkIHN0eWxlIG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHlsZSBuYW1lXG4gKiBAcGFyYW0ge09iamVjdH0gbG9vay11cCBzdHlsZSBvYmplY3RcbiAqIEByZXR1cm5zIHtTdHJpbmd8VW5kZWZpbmVkfSBwcmVmaXhlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHN0eWxlLCBzdHlsZU9iaikge1xuXHQvLyByZXR1cm4gX2NhY2hlW3N0eWxlXSB8fCAoX2NhY2hlW3N0eWxlXSA9IF9wcmVmaXhlZFN0eWxlTmFtZV9yZXZlcnNlKHN0eWxlLCBzdHlsZU9iaiB8fCBkb2N1bWVudC5ib2R5LnN0eWxlKSk7XG5cdHJldHVybiBfY2FjaGVbc3R5bGVdIHx8IChfY2FjaGVbc3R5bGVdID0gX3ByZWZpeGVkU3R5bGVOYW1lKHN0eWxlLCBzdHlsZU9iaiB8fCBkb2N1bWVudC5ib2R5LnN0eWxlKSk7XG59O1xuXG4vLyAvKiogQHR5cGUge21vZHVsZTp1dGlscy9zdHJpbmdzL2NhbWVsVG9EYXNoZWR9ICovXG4vLyB2YXIgY2FtZWxUb0Rhc2hlZCA9IHJlcXVpcmUoXCIuL3N0cmluZ3MvY2FtZWxUb0Rhc2hlZFwiKTtcbi8vIC8qKiBAdHlwZSB7bW9kdWxlOnV0aWxzL3ByZWZpeGVkUHJvcGVydHl9ICovXG4vLyB2YXIgcHJlZml4ZWRQcm9wZXJ0eSA9IHJlcXVpcmUoXCIuL3ByZWZpeGVkUHJvcGVydHlcIik7XG4vLyAvKiogQHR5cGUge21vZHVsZTp1dGlscy9zdHJpbmdzL2Rhc2hlZFRvQ2FtZWx9ICovXG4vLyB2YXIgZGFzaGVkVG9DYW1lbCA9IHJlcXVpcmUoXCIuL3N0cmluZ3MvZGFzaGVkVG9DYW1lbFwiKTtcbi8vXG4vLyB2YXIgX3ByZWZpeGVkU3R5bGVOYW1lX3JldmVyc2UgPSBmdW5jdGlvbiAoc3R5bGUsIHN0eWxlT2JqKSB7XG4vLyBcdHZhciBjYW1lbFByb3AsIHByZWZpeGVkUHJvcDtcbi8vIFx0Y2FtZWxQcm9wID0gZGFzaGVkVG9DYW1lbChzdHlsZSk7XG4vLyBcdHByZWZpeGVkUHJvcCA9IHByZWZpeGVkUHJvcGVydHkoY2FtZWxQcm9wLCBzdHlsZU9iaik7XG4vLyBcdHJldHVybiBwcmVmaXhlZFByb3A/IChjYW1lbFByb3AgPT09IHByZWZpeGVkUHJvcD8gXCJcIiA6IFwiLVwiKSArIGNhbWVsVG9EYXNoZWQocHJlZml4ZWRQcm9wKSA6IG51bGw7XG4vLyB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IFtcIndlYmtpdFwiLCBcIm1velwiLCBcIm1zXCIsIFwib1wiXTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwcCwgcmVhc29uKSB7XG5cdGlmIChwcC5sZW5ndGggPiAwKSB7XG5cdFx0cHAuZm9yRWFjaChmdW5jdGlvbihwLCBpLCBhKSB7XG5cdFx0XHRwLnJlamVjdChyZWFzb24pO1xuXHRcdFx0YVtpXSA9IG51bGw7XG5cdFx0fSk7XG5cdFx0cHAubGVuZ3RoID0gMDtcblx0fVxuXHRyZXR1cm4gcHA7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBwLCByZXN1bHQpIHtcblx0aWYgKHBwLmxlbmd0aCAhPSAwKSB7XG5cdFx0cHAuZm9yRWFjaChmdW5jdGlvbihwLCBpLCBhKSB7XG5cdFx0XHRwLnJlc29sdmUocmVzdWx0KTtcblx0XHRcdGFbaV0gPSBudWxsO1xuXHRcdH0pO1xuXHRcdHBwLmxlbmd0aCA9IDA7XG5cdH1cblx0cmV0dXJuIHBwO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzdHIpIHtcblx0cmV0dXJuIHN0ci5yZXBsYWNlKC9bQS1aXS9nLCBmdW5jdGlvbigkMCkge1xuXHRcdHJldHVybiBcIi1cIiArICQwLnRvTG93ZXJDYXNlKCk7XG5cdH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzKSB7XG5cdHJldHVybiBzLnJlcGxhY2UoLzxbXj5dKz4vZywgXCJcIik7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiogQHR5cGUge21vZHVsZTpoYW1tZXJqc30gKi9cbmNvbnN0IEhhbW1lciA9IHJlcXVpcmUoXCJoYW1tZXJqc1wiKTtcblxuLy8gLyoqXG4vLyAgKiBnZXQgYSB1c2FibGUgc3RyaW5nLCB1c2VkIGFzIGV2ZW50IHBvc3RmaXhcbi8vICAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG4vLyAgKiBAcmV0dXJucyB7U3RyaW5nfSBzdGF0ZVxuLy8gICovXG4vLyBmdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuLy8gXHRpZiAoc3RhdGUgJiBIYW1tZXIuU1RBVEVfQ0FOQ0VMTEVEKSB7XG4vLyBcdFx0cmV0dXJuIFwiY2FuY2VsXCI7XG4vLyBcdH0gZWxzZSBpZiAoc3RhdGUgJiBIYW1tZXIuU1RBVEVfRU5ERUQpIHtcbi8vIFx0XHRyZXR1cm4gXCJlbmRcIjtcbi8vIFx0fSBlbHNlIGlmIChzdGF0ZSAmIEhhbW1lci5TVEFURV9DSEFOR0VEKSB7XG4vLyBcdFx0cmV0dXJuIFwibW92ZVwiO1xuLy8gXHR9IGVsc2UgaWYgKHN0YXRlICYgSGFtbWVyLlNUQVRFX0JFR0FOKSB7XG4vLyBcdFx0cmV0dXJuIFwic3RhcnRcIjtcbi8vIFx0fVxuLy8gXHRyZXR1cm4gXCJcIjtcbi8vIH1cblxuLyoqXG4gKiBkaXJlY3Rpb24gY29ucyB0byBzdHJpbmdcbiAqIEBwYXJhbSB7Q29uc3R9IGRpcmVjdGlvblxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZGlyU3RyKGRpcmVjdGlvbikge1xuXHRpZiAoZGlyZWN0aW9uID09IEhhbW1lci5ESVJFQ1RJT05fRE9XTikge1xuXHRcdHJldHVybiBcImRvd25cIjtcblx0fSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gSGFtbWVyLkRJUkVDVElPTl9VUCkge1xuXHRcdHJldHVybiBcInVwXCI7XG5cdH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IEhhbW1lci5ESVJFQ1RJT05fTEVGVCkge1xuXHRcdHJldHVybiBcImxlZnRcIjtcblx0fSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gSGFtbWVyLkRJUkVDVElPTl9SSUdIVCkge1xuXHRcdHJldHVybiBcInJpZ2h0XCI7XG5cdH1cblx0cmV0dXJuIFwiXCI7XG59XG5cbi8vLyoqXG4vLyAqIFBhblxuLy8gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBhbmQgbW92ZWQgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuLy8gKiBAY29uc3RydWN0b3Jcbi8vICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbi8vICovXG4vL2Z1bmN0aW9uIFBhblJlY29nbml6ZXIoKSB7XG4vL1x0SGFtbWVyLkF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4vL1xuLy9cdHRoaXMucFggPSBudWxsO1xuLy9cdHRoaXMucFkgPSBudWxsO1xuLy99XG4vL1xuLy9pbmhlcml0KFBhblJlY29nbml6ZXIsIEhhbW1lci5BdHRyUmVjb2duaXplciwge1xuLy9cdC8qKlxuLy9cdC8qIEBuYW1lc3BhY2Vcbi8vXHQvKiBAbWVtYmVyb2YgUGFuUmVjb2duaXplclxuLy9cdC8qL1xuLy9cdGRlZmF1bHRzOiB7XG4vL1x0XHRldmVudDogXCJwYW5cIixcbi8vXHRcdHRocmVzaG9sZDogMTAsXG4vL1x0XHRwb2ludGVyczogMSxcbi8vXHRcdGRpcmVjdGlvbjogRElSRUNUSU9OX0FMTFxuLy9cdH0sXG4vL1xuLy9cdGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbi8vXHRcdHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuLy9cdFx0dmFyIGFjdGlvbnMgPSBbXTtcbi8vXHRcdGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuLy9cdFx0XHRhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcbi8vXHRcdH1cbi8vXHRcdGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcbi8vXHRcdFx0YWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWCk7XG4vL1x0XHR9XG4vL1x0XHRyZXR1cm4gYWN0aW9ucztcbi8vXHR9LFxuLy9cbi8vXHRkaXJlY3Rpb25UZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuLy9cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4vL1x0XHR2YXIgaGFzTW92ZWQgPSB0cnVlO1xuLy9cdFx0dmFyIGRpc3RhbmNlID0gaW5wdXQuZGlzdGFuY2U7XG4vL1x0XHR2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuLy9cdFx0dmFyIHggPSBpbnB1dC5kZWx0YVg7XG4vL1x0XHR2YXIgeSA9IGlucHV0LmRlbHRhWTtcbi8vXG4vL1x0XHQvLyBsb2NrIHRvIGF4aXM/XG4vL1x0XHRpZiAoIShkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbikpIHtcbi8vXHRcdFx0aWYgKG9wdGlvbnMuZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbi8vXHRcdFx0XHRkaXJlY3Rpb24gPSAoeCA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh4IDwgMCkgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbi8vXHRcdFx0XHRoYXNNb3ZlZCA9IHggIT0gdGhpcy5wWDtcbi8vXHRcdFx0XHRkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWCk7XG4vL1x0XHRcdH0gZWxzZSB7XG4vL1x0XHRcdFx0ZGlyZWN0aW9uID0gKHkgPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeSA8IDApID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG4vL1x0XHRcdFx0aGFzTW92ZWQgPSB5ICE9IHRoaXMucFk7XG4vL1x0XHRcdFx0ZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVkpO1xuLy9cdFx0XHR9XG4vL1x0XHR9XG4vL1x0XHRpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4vL1x0XHRyZXR1cm4gaGFzTW92ZWQgJiYgZGlzdGFuY2UgPiBvcHRpb25zLnRocmVzaG9sZCAmJiBkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbjtcbi8vXHR9LFxuLy9cbi8vXHRhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbi8vXHRcdHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbi8vXHRcdFx0KHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTiB8fCAoISh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pICYmIHRoaXMuZGlyZWN0aW9uVGVzdChpbnB1dCkpKTtcbi8vXHR9LFxuLy9cbi8vXHRlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuLy9cdFx0dGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcbi8vXHRcdHRoaXMucFkgPSBpbnB1dC5kZWx0YVk7XG4vL1xuLy9cdFx0dmFyIGRpcmVjdGlvbiA9IGRpclN0cihpbnB1dC5kaXJlY3Rpb24pO1xuLy9cdFx0aWYgKGRpcmVjdGlvbikge1xuLy9cdFx0XHR0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb24sIGlucHV0KTtcbi8vXHRcdH1cbi8vXG4vL1x0XHR0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuLy9cdH1cbi8vfSk7XG5cbi8qKlxuICogU21vb3RoUGFuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEhhbW1lci5QYW5cbiAqL1xuZnVuY3Rpb24gU21vb3RoUGFuKCkge1xuXHR2YXIgcmV0ID0gSGFtbWVyLlBhbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR0aGlzLnRocmVzaG9sZE9mZnNldFggPSBudWxsO1xuXHR0aGlzLnRocmVzaG9sZE9mZnNldFkgPSBudWxsO1xuXHR0aGlzLnRocmVzaG9sZE9mZnNldCA9IG51bGw7XG5cdHJldHVybiByZXQ7XG59XG5cbkhhbW1lci5pbmhlcml0KFNtb290aFBhbiwgSGFtbWVyLlBhbiwge1xuXHRlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHRcdC8vIEluaGVyaXRhbmNlIGJyZWFrcywgc28gdGhpcyBjb2RlIGlzIHRha2VuIGZyb20gUGFuUmVjb2duaXplci5lbWl0XG5cdFx0Ly9cdHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7IC8vIFRyaWdnZXJzIGluZmluaXRlIHJlY3Vyc2lvblxuXHRcdC8vXHRIYW1tZXIuUGFuLnByb3RvdHlwZS5lbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIFRoaXMgYnJlYWtzIHRvb1xuXG5cdFx0dmFyIHRocmVzaG9sZCA9IHRoaXMub3B0aW9ucy50aHJlc2hvbGQ7XG5cdFx0dmFyIGRpcmVjdGlvbiA9IGlucHV0LmRpcmVjdGlvbjtcblxuXHRcdGlmICh0aGlzLnN0YXRlID09IEhhbW1lci5TVEFURV9CRUdBTikge1xuXHRcdFx0dGhpcy50aHJlc2hvbGRPZmZzZXRYID0gKGRpcmVjdGlvbiAmIEhhbW1lci5ESVJFQ1RJT05fSE9SSVpPTlRBTCkgPyAoKGRpcmVjdGlvbiAmIEhhbW1lci5ESVJFQ1RJT05fTEVGVCkgPyB0aHJlc2hvbGQgOiAtdGhyZXNob2xkKSA6IDA7XG5cdFx0XHR0aGlzLnRocmVzaG9sZE9mZnNldFkgPSAoZGlyZWN0aW9uICYgSGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCkgPyAoKGRpcmVjdGlvbiAmIEhhbW1lci5ESVJFQ1RJT05fVVApID8gdGhyZXNob2xkIDogLXRocmVzaG9sZCkgOiAwO1xuXHRcdFx0Ly8gdGhpcy50aHJlc2hvbGRPZmZzZXQgPSAoZGlyZWN0aW9uICYgSGFtbWVyLkRJUkVDVElPTl9IT1JJWk9OVEFMKT8gaW5wdXQudGhyZXNob2xkT2Zmc2V0WCA6IGlucHV0LnRocmVzaG9sZE9mZnNldFk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhcIlJFQ09HTklaRVIgU1RBVEVcIiwgZGlyU3RyKGRpcmVjdGlvbiksIHN0YXRlU3RyKHRoaXMuc3RhdGUpLCB0aGlzLnRocmVzaG9sZE9mZnNldFgpO1xuXHRcdH1cblx0XHRpbnB1dC50aHJlc2hvbGRPZmZzZXRYID0gdGhpcy50aHJlc2hvbGRPZmZzZXRYO1xuXHRcdGlucHV0LnRocmVzaG9sZE9mZnNldFkgPSB0aGlzLnRocmVzaG9sZE9mZnNldFk7XG5cdFx0aW5wdXQudGhyZXNob2xkRGVsdGFYID0gaW5wdXQuZGVsdGFYICsgdGhpcy50aHJlc2hvbGRPZmZzZXRYO1xuXHRcdGlucHV0LnRocmVzaG9sZERlbHRhWSA9IGlucHV0LmRlbHRhWSArIHRoaXMudGhyZXNob2xkT2Zmc2V0WTtcblxuXHRcdHRoaXMucFggPSBpbnB1dC5kZWx0YVg7XG5cdFx0dGhpcy5wWSA9IGlucHV0LmRlbHRhWTtcblxuXHRcdGRpcmVjdGlvbiA9IGRpclN0cihkaXJlY3Rpb24pO1xuXHRcdGlmIChkaXJlY3Rpb24pIHtcblx0XHRcdHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbiwgaW5wdXQpO1xuXHRcdH1cblx0XHRyZXR1cm4gSGFtbWVyLlJlY29nbml6ZXIucHJvdG90eXBlLmVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU21vb3RoUGFuO1xuIiwibW9kdWxlLmV4cG9ydHM9e1xuXHRcInZpZGVvX2Nyb3BfcHhcIjogXCIwXCIsXG5cdFwidHJhbnNmb3JtX3R5cGVcIjogXCIzZFwiLFxuXHRcInRyYW5zaXRpb25zXCI6IHtcblx0XHRcImVhc2VcIjogXCJlYXNlLWluLW91dFwiLFxuXHRcdFwiZHVyYXRpb25fbXNcIjogXCIzNTBcIixcblx0XHRcImRlbGF5X2ludGVydmFsX21zXCI6IFwiMzRcIixcblx0XHRcIm1pbl9kZWxheV9tc1wiOiBcIjM0XCJcblx0fSxcblx0XCJicmVha3BvaW50c1wiOiB7XG5cdFx0XCJsYW5kc2NhcGVcIjogXCInKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpJ1wiLFxuXHRcdFwicG9ydHJhaXRcIjogXCInKG9yaWVudGF0aW9uOiBwb3J0cmFpdCknXCIsXG5cdFx0XCJ4c21hbGwtc3RyZXRjaFwiOiBcIidub3Qgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA0NjBweCksIG5vdCBzY3JlZW4gYW5kIChtaW4taGVpZ2h0OiA0MjBweCknXCIsXG5cdFx0XCJzbWFsbC1zdHJldGNoXCI6IFwiJ25vdCBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDcwNHB4KSwgbm90IHNjcmVlbiBhbmQgKG1pbi1oZWlnaHQ6IDU0MHB4KSdcIixcblx0XHRcImRlZmF1bHRcIjpcIidvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNzA0cHgpIGFuZCAobWluLWhlaWdodDogNTQwcHgpJ1wiLFxuXHRcdFwibWVkaXVtLXdpZGVcIjogXCInb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMjRweCkgYW5kIChtYXgtd2lkdGg6IDEyMjNweCkgYW5kIChtaW4taGVpZ2h0OiA0MjBweCknXCIsXG5cdFx0XCJtZWRpdW0td2lkZS1zdHJldGNoXCI6IFwiJ29ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjI0cHgpIGFuZCAobWluLWhlaWdodDogNDIwcHgpJ1wiXG5cdH0sXG5cdFwiZGVmYXVsdF9jb2xvcnNcIjoge1xuXHRcdFwiY29sb3JcIjogXCJoc2woNDcsIDUlLCAxNSUpXCIsXG5cdFx0XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiaHNsKDQ3LCA1JSwgOTUlKVwiLFxuXHRcdFwibGluay1jb2xvclwiOiBcImhzbCgxMCwgODAlLCA1MCUpXCJcblx0fSxcblx0XCJ0ZW1wXCI6IHtcblx0XHRcImNvbGxhcHNlX29mZnNldFwiOiBcIjM2MFwiXG5cdH0sXG5cdFwiX2lnbm9yZVwiOiB7XG5cdFx0XCJ0cmFuc2l0aW9uc1wiOiB7XG5cdFx0XHRcImVhc2VcIjogXCJjdWJpYy1iZXppZXIoMC40MiwgMC4wLCAwLjU4LCAxLjApXCIsXG5cdFx0XHRcImR1cmF0aW9uX21zXCI6IFwiNDAwXCIsXG5cdFx0XHRcImRlbGF5X2ludGVydmFsX21zXCI6IFwiMTM0XCIsXG5cdFx0XHRcIm1pbl9kZWxheV9tc1wiOiBcIjM0XCJcblx0XHR9LFxuXHRcdFwiZGVmYXVsdF9jb2xvcnNcIjoge1xuXHRcdFx0XCItLWxpbmstY29sb3JcIjogXCJoc2woMTAsIDgwJSwgNTAlKVwiLFxuXHRcdFx0XCItLWFsdC1iYWNrZ3JvdW5kLWNvbG9yXCI6IFwidW5zZXRcIlxuXHRcdH0sXG5cdFx0XCJ1bml0c1wiOiB7XG5cdFx0XHRcImh1X3B4XCI6IFwiMjBcIixcblx0XHRcdFwidnVfcHhcIjogXCIxMlwiXG5cdFx0fSxcblx0XHRcImJyZWFrcG9pbnRzXCI6IHtcblx0XHRcdFwibWVkaXVtLXdpZGUtc3RyZXRjaFwiOiBcIidvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTAyNHB4KSBhbmQgKG1pbi1oZWlnaHQ6IDQyMHB4KSdcIixcblx0XHRcdFwibGFyZ2Utd2lkZVwiOiBcIidvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTgyNHB4KSBhbmQgKG1pbi1oZWlnaHQ6IDEwMjRweCknXCIsXG5cdFx0XHRcIm1vYmlsZVwiOiBcIidub3Qgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3MDRweCksIG5vdCBzY3JlZW4gYW5kIChtaW4taGVpZ2h0OiA1NDBweCknXCIsXG5cdFx0XHRcInVuc3VwcG9ydGVkXCI6IFwiJ25vdCBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDcwNHB4KSdcIixcblx0XHRcdFwidW5xdW90ZWRcIjogXCJvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTgyNHB4KVwiLFxuXHRcdFx0XCJ1bnF1b3RlZF9uZWdcIjogXCJub3Qgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3MDRweClcIixcblx0XHRcdFwicXVvdGVkX2NvbWJpbmVkXCI6IFwiJ25vdCBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDcwNHB4KSwgbm90IHNjcmVlbiBhbmQgKG1pbi1oZWlnaHQ6IDU0MHB4KSdcIixcblx0XHRcdFwiYXJyYXlcIjogW1xuXHRcdFx0XHRcIm9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3MDRweClcIixcblx0XHRcdFx0XCJub3Qgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA3MDRweClcIixcblx0XHRcdFx0XCJub3Qgc2NyZWVuIGFuZCAobWluLWhlaWdodDogNTQwcHgpXCJcblx0XHRcdF1cblx0XHR9XG5cdH1cbn1cbiIsIi8qISBCYWNrYm9uZS5NdXRhdG9ycyAtIHYwLjQuNFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5CdWlsZCBAIDIwMTUtMDItMDNcbkRvY3VtZW50YXRpb24gYW5kIEZ1bGwgTGljZW5zZSBBdmFpbGFibGUgYXQ6XG5odHRwOi8vYXNjaWlkaXNjby5naXRodWIuY29tL0JhY2tib25lLk11dGF0b3JzL2luZGV4Lmh0bWxcbmdpdDovL2dpdGh1Yi5jb20vYXNjaWlkaXNjby9CYWNrYm9uZS5NdXRhdG9ycy5naXRcbkNvcHlyaWdodCAoYykgMjAxNSBTZWJhc3RpYW4gR29sYXNjaCA8cHVibGljQGFzY2lpZGlzY28uY29tPlxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxudG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxudGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG5hbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcblxuU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbkVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULlxuSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG5EQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLFxuQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTXG5JTiBUSEUgU09GVFdBUkUuKi9cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSwgdW5kZWYpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCd1bmRlcnNjb3JlJyksIHJlcXVpcmUoJ2JhY2tib25lJykpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsndW5kZXJzY29yZScsICdiYWNrYm9uZSddLCBmdW5jdGlvbiAoXywgQmFja2JvbmUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIHVzZSB0aGUgQU1EIGJyYW5jaCBvZiBCYWNrXG4gICAgICAgICAgICBfID0gXyA9PT0gdW5kZWYgPyByb290Ll8gOiBfO1xuICAgICAgICAgICAgQmFja2JvbmUgPSBCYWNrYm9uZSA9PT0gdW5kZWYgPyByb290LkJhY2tib25lIDogQmFja2JvbmU7XG4gICAgICAgICAgICByZXR1cm4gKHJvb3QucmV0dXJuRXhwb3J0c0dsb2JhbCA9IGZhY3RvcnkoXywgQmFja2JvbmUsIHJvb3QpKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIHJvb3QucmV0dXJuRXhwb3J0c0dsb2JhbCA9IGZhY3Rvcnkocm9vdC5fLCByb290LkJhY2tib25lKTtcbiAgICB9XG5cbi8vIFVzYWdlOlxuLy9cbi8vIE5vdGU6IFRoaXMgcGx1Z2luIGlzIFVNRCBjb21wYXRpYmxlLCB5b3UgY2FuIHVzZSBpdCBpbiBub2RlLCBhbWQgYW5kIHZhbmlsbGEganMgZW52c1xuLy9cbi8vIFZhbmlsbGEgSlM6XG4vLyA8c2NyaXB0IHNyYz1cInVuZGVyc2NvcmUuanNcIj48L3NjcmlwdD5cbi8vIDxzY3JpcHQgc3JjPVwiYmFja2JvbmUuanNcIj48L3NjcmlwdD5cbi8vIDxzY3JpcHQgc3JjPVwiYmFja2JvbmUubXV0YXRvcnMuanNcIj48L3NjcmlwdD5cbi8vXG4vLyBOb2RlOlxuLy8gdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG4vLyB2YXIgQmFja2JvbmUgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xuLy8gdmFyIE11dGF0b3JzID0gcmVxdWlyZSgnYmFja2JvbmUubXV0YXRvcnMnKTtcbi8vXG4vL1xuLy8gQU1EOlxuLy8gZGVmaW5lKFsndW5kZXJzY29yZScsICdiYWNrYm9uZScsICdiYWNrYm9uZS5tdXRhdG9ycyddLCBmdW5jdGlvbiAoXywgQmFja2JvbmUsIE11dGF0b3JzKSB7XG4vLyAgICAvLyBpbnNlcnQgc2FtcGxlIGZyb20gYmVsb3dcbi8vICAgIHJldHVybiBVc2VyO1xuLy8gfSk7XG4vL1xuLy8gdmFyIFVzZXIgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuLy8gICAgbXV0YXRvcnM6IHtcbi8vICAgICAgICBmdWxsbmFtZTogZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJzdG5hbWUgKyAnICcgKyB0aGlzLmxhc3RuYW1lO1xuLy8gICAgICAgIH1cbi8vICAgIH0sXG4vL1xuLy8gICAgZGVmYXVsdHM6IHtcbi8vICAgICAgICBmaXJzdG5hbWU6ICdTZWJhc3RpYW4nLFxuLy8gICAgICAgIGxhc3RuYW1lOiAnR29sYXNjaCdcbi8vICAgIH1cbi8vIH0pO1xuLy9cbi8vIHZhciB1c2VyID0gbmV3IFVzZXIoKTtcbi8vIHVzZXIuZ2V0KCdmdWxsbmFtZScpIC8vIHJldHVybnMgJ1NlYmFzdGlhbiBHb2xhc2NoJ1xuLy8gdXNlci50b0pTT04oKSAvLyByZXR1cm4gJ3tmaXJzdG5hbWU6ICdTZWJhc3RpYW4nLCBsYXN0bmFtZTogJ0dvbGFzY2gnLCBmdWxsbmFtZTogJ1NlYmFzdGlhbiBHb2xhc2NoJ30nXG5cbn0odGhpcywgZnVuY3Rpb24gKF8sIEJhY2tib25lLCByb290LCB1bmRlZikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGNoZWNrIGlmIHdlIHVzZSB0aGUgYW1kIGJyYW5jaCBvZiBiYWNrYm9uZSBhbmQgdW5kZXJzY29yZVxuICAgIEJhY2tib25lID0gQmFja2JvbmUgPT09IHVuZGVmID8gcm9vdC5CYWNrYm9uZSA6IEJhY2tib25lO1xuICAgIF8gPSBfID09PSB1bmRlZiA/IHJvb3QuXyA6IF87XG5cbiAgICAvLyBleHRlbmQgYmFja2JvbmVzIG1vZGVsIHByb3RvdHlwZSB3aXRoIHRoZSBtdXRhdG9yIGZ1bmN0aW9uYWxpdHlcbiAgICB2YXIgTXV0YXRvciAgICAgPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgb2xkR2V0ICAgICAgPSBCYWNrYm9uZS5Nb2RlbC5wcm90b3R5cGUuZ2V0LFxuICAgICAgICBvbGRTZXQgICAgICA9IEJhY2tib25lLk1vZGVsLnByb3RvdHlwZS5zZXQsXG4gICAgICAgIG9sZFRvSnNvbiAgID0gQmFja2JvbmUuTW9kZWwucHJvdG90eXBlLnRvSlNPTjtcblxuICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGVuc3VyZSB0aGF0IE1vZGVscyBkZWNsYXJlZCB3aXRob3V0IHRoZSBtdXRhdG9ycyBvYmplY3QgZG8gbm90IHRocm93IGFuZCBlcnJvclxuICAgIE11dGF0b3IucHJvdG90eXBlLm11dGF0b3JzID0ge307XG5cbiAgICAvLyBvdmVycmlkZSBnZXQgZnVuY3Rpb25hbGl0eSB0byBmZXRjaCB0aGUgbXV0YXRvciBwcm9wc1xuICAgIE11dGF0b3IucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgIHZhciBpc011dGF0b3IgPSB0aGlzLm11dGF0b3JzICE9PSB1bmRlZjtcblxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGEgZ2V0dGVyIG11dGF0aW9uXG4gICAgICAgIGlmIChpc011dGF0b3IgPT09IHRydWUgJiYgXy5pc0Z1bmN0aW9uKHRoaXMubXV0YXRvcnNbYXR0cl0pID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdXRhdG9yc1thdHRyXS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhIGRlZXBlciBuZXN0ZWQgZ2V0dGVyIG11dGF0aW9uXG4gICAgICAgIGlmIChpc011dGF0b3IgPT09IHRydWUgJiYgXy5pc09iamVjdCh0aGlzLm11dGF0b3JzW2F0dHJdKSA9PT0gdHJ1ZSAmJiBfLmlzRnVuY3Rpb24odGhpcy5tdXRhdG9yc1thdHRyXS5nZXQpID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tdXRhdG9yc1thdHRyXS5nZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvbGRHZXQuY2FsbCh0aGlzLCBhdHRyKTtcbiAgICB9O1xuXG4gICAgLy8gb3ZlcnJpZGUgc2V0IGZ1bmN0aW9uYWxpdHkgdG8gc2V0IHRoZSBtdXRhdG9yIHByb3BzXG4gICAgTXV0YXRvci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGlzTXV0YXRvciA9IHRoaXMubXV0YXRvcnMgIT09IHVuZGVmLFxuICAgICAgICAgICAgcmV0ID0gbnVsbCxcbiAgICAgICAgICAgIGF0dHJzID0gbnVsbDtcblxuXHRcdHJldCA9IG9sZFNldC5jYWxsKHRoaXMsIGtleSwgdmFsdWUsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIHNlYW1sZWFzc2x5IHN0b2xlbiBmcm9tIGJhY2tib25lIGNvcmVcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHNldHRlciBhY3Rpb24gaXMgdHJpZ2dlcmVkXG4gICAgICAgIC8vIHVzaW5nIGtleSA8LT4gdmFsdWUgb3Igb2JqZWN0XG4gICAgICAgIGlmIChfLmlzT2JqZWN0KGtleSkgfHwga2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF0dHJzID0ge307XG4gICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGEgZGVlcGVyIG5lc3RlZCBzZXR0ZXIgbXV0YXRpb25cbiAgICAgICAgaWYgKGlzTXV0YXRvciA9PT0gdHJ1ZSAmJiBfLmlzT2JqZWN0KHRoaXMubXV0YXRvcnNba2V5XSkgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzZXQgYSBzaW5nbGUgdmFsdWVcbiAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5tdXRhdG9yc1trZXldLnNldCkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXQgPSB0aGlzLm11dGF0b3JzW2tleV0uc2V0LmNhbGwodGhpcywga2V5LCBhdHRyc1trZXldLCBvcHRpb25zLCBfLmJpbmQob2xkU2V0LCB0aGlzKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYoXy5pc0Z1bmN0aW9uKHRoaXMubXV0YXRvcnNba2V5XSkpe1xuICAgICAgICAgICAgICAgIHJldCA9IHRoaXMubXV0YXRvcnNba2V5XS5jYWxsKHRoaXMsIGtleSwgYXR0cnNba2V5XSwgb3B0aW9ucywgXy5iaW5kKG9sZFNldCwgdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTXV0YXRvciA9PT0gdHJ1ZSAmJiBfLmlzT2JqZWN0KGF0dHJzKSkge1xuICAgICAgICAgICAgXy5lYWNoKGF0dHJzLCBfLmJpbmQoZnVuY3Rpb24gKGF0dHIsIGF0dHJLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc09iamVjdCh0aGlzLm11dGF0b3JzW2F0dHJLZXldKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNldCBhIHNpbmdsZSB2YWx1ZVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRoID0gdGhpcy5tdXRhdG9yc1thdHRyS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYoXy5pc0Z1bmN0aW9uKG1ldGguc2V0KSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRoID0gbWV0aC5zZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZihfLmlzRnVuY3Rpb24obWV0aCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IHVuZGVmIHx8IChfLmlzT2JqZWN0KG9wdGlvbnMpID09PSB0cnVlICYmIG9wdGlvbnMuc2lsZW50ICE9PSB0cnVlICYmIChvcHRpb25zLm11dGF0b3JzICE9PSB1bmRlZiAmJiBvcHRpb25zLm11dGF0b3JzLnNpbGVudCAhPT0gdHJ1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdtdXRhdG9yczpzZXQ6JyArIGF0dHJLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aC5jYWxsKHRoaXMsIGF0dHJLZXksIGF0dHIsIG9wdGlvbnMsIF8uYmluZChvbGRTZXQsIHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgLy8gb3ZlcnJpZGUgdG9KU09OIGZ1bmN0aW9uYWxpdHkgdG8gc2VyaWFsaXplIG11dGF0b3IgcHJvcGVydGllc1xuICAgIE11dGF0b3IucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIC8vIGZldGNoIHllIG9sZGUgdmFsdWVzXG4gICAgICAgIHZhciBhdHRyID0gb2xkVG9Kc29uLmNhbGwodGhpcyksXG4gICAgICAgICAgICBpc1NhdmluZyxcbiAgICAgICAgICAgIGlzVHJhbnNpZW50O1xuICAgICAgICAvLyBpdGVyYXRlIG92ZXIgYWxsIG11dGF0b3JzIChpZiB0aGVyZSBhcmUgc29tZSlcbiAgICAgICAgXy5lYWNoKHRoaXMubXV0YXRvcnMsIF8uYmluZChmdW5jdGlvbiAobXV0YXRvciwgbmFtZSkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBzb21lIGdldHRlciBtdXRhdGlvbnNcbiAgICAgICAgICAgIGlmIChfLmlzT2JqZWN0KHRoaXMubXV0YXRvcnNbbmFtZV0pID09PSB0cnVlICYmIF8uaXNGdW5jdGlvbih0aGlzLm11dGF0b3JzW25hbWVdLmdldCkpIHtcbiAgICAgICAgICAgICAgICBpc1NhdmluZyA9ICh0aGlzLmlzU2F2aW5nKSA/IHRoaXMuaXNTYXZpbmcob3B0aW9ucywgbXV0YXRvciwgbmFtZSkgOiBfLmhhcyhvcHRpb25zIHx8IHt9LCAnZW11bGF0ZUhUVFAnKTtcbiAgICAgICAgICAgICAgICBpc1RyYW5zaWVudCA9IHRoaXMubXV0YXRvcnNbbmFtZV0udHJhbnNpZW50O1xuICAgICAgICAgICAgICAgIGlmICghaXNTYXZpbmcgfHwgIWlzVHJhbnNpZW50KSB7XG4gICAgICAgICAgICAgICAgICBhdHRyW25hbWVdID0gXy5iaW5kKHRoaXMubXV0YXRvcnNbbmFtZV0uZ2V0LCB0aGlzKSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMubXV0YXRvcnNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgYXR0cltuYW1lXSA9IF8uYmluZCh0aGlzLm11dGF0b3JzW25hbWVdLCB0aGlzKSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKSk7XG5cbiAgICAgICAgcmV0dXJuIGF0dHI7XG4gICAgfTtcblxuICAgIC8vIG92ZXJyaWRlIGdldCBmdW5jdGlvbmFsaXR5IHRvIGdldCBIVE1MLWVzY2FwZWQgdGhlIG11dGF0b3IgcHJvcHNcbiAgICBNdXRhdG9yLnByb3RvdHlwZS5lc2NhcGUgPSBmdW5jdGlvbiAoYXR0cil7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLmdldChhdHRyKTtcbiAgICAgICAgcmV0dXJuIF8uZXNjYXBlKHZhbCA9PSBudWxsID8gJycgOiAnJyArIHZhbCk7XG4gICAgfTtcblxuICAgIC8vIGV4dGVuZCB0aGUgbW9kZWxzIHByb3RvdHlwZVxuICAgIF8uZXh0ZW5kKEJhY2tib25lLk1vZGVsLnByb3RvdHlwZSwgTXV0YXRvci5wcm90b3R5cGUpO1xuXG4gICAgLy8gbWFrZSBtdXRhdG9ycyBnbG9iYWxseSBhdmFpbGFibGUgdW5kZXIgdGhlIEJhY2tib25lIG5hbWVzcGFjZVxuICAgIEJhY2tib25lLk11dGF0b3JzID0gTXV0YXRvcjtcbiAgICByZXR1cm4gTXV0YXRvcjtcbn0pKTtcbiIsIi8vIEJhY2tib25lLkJhYnlTaXR0ZXJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIHYwLjEuMTFcbi8vXG4vLyBDb3B5cmlnaHQgKGMpMjAxNiBEZXJpY2sgQmFpbGV5LCBNdXRlZCBTb2x1dGlvbnMsIExMQy5cbi8vIERpc3RyaWJ1dGVkIHVuZGVyIE1JVCBsaWNlbnNlXG4vL1xuLy8gaHR0cDovL2dpdGh1Yi5jb20vbWFyaW9uZXR0ZWpzL2JhY2tib25lLmJhYnlzaXR0ZXJcblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFsnYmFja2JvbmUnLCAndW5kZXJzY29yZSddLCBmdW5jdGlvbihCYWNrYm9uZSwgXykge1xuICAgICAgcmV0dXJuIGZhY3RvcnkoQmFja2JvbmUsIF8pO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBCYWNrYm9uZSA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG4gICAgdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KEJhY2tib25lLCBfKTtcbiAgfSBlbHNlIHtcbiAgICBmYWN0b3J5KHJvb3QuQmFja2JvbmUsIHJvb3QuXyk7XG4gIH1cblxufSh0aGlzLCBmdW5jdGlvbihCYWNrYm9uZSwgXykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHByZXZpb3VzQ2hpbGRWaWV3Q29udGFpbmVyID0gQmFja2JvbmUuQ2hpbGRWaWV3Q29udGFpbmVyO1xuXG4gIC8vIEJhYnlTaXR0ZXIuQ2hpbGRWaWV3Q29udGFpbmVyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vIFByb3ZpZGUgYSBjb250YWluZXIgdG8gc3RvcmUsIHJldHJpZXZlIGFuZFxuICAvLyBzaHV0IGRvd24gY2hpbGQgdmlld3MuXG4gIFxuICBCYWNrYm9uZS5DaGlsZFZpZXdDb250YWluZXIgPSAoZnVuY3Rpb24gKEJhY2tib25lLCBfKSB7XG4gIFxuICAgIC8vIENvbnRhaW5lciBDb25zdHJ1Y3RvclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBcbiAgICB2YXIgQ29udGFpbmVyID0gZnVuY3Rpb24odmlld3Mpe1xuICAgICAgdGhpcy5fdmlld3MgPSB7fTtcbiAgICAgIHRoaXMuX2luZGV4QnlNb2RlbCA9IHt9O1xuICAgICAgdGhpcy5faW5kZXhCeUN1c3RvbSA9IHt9O1xuICAgICAgdGhpcy5fdXBkYXRlTGVuZ3RoKCk7XG4gIFxuICAgICAgXy5lYWNoKHZpZXdzLCB0aGlzLmFkZCwgdGhpcyk7XG4gICAgfTtcbiAgXG4gICAgLy8gQ29udGFpbmVyIE1ldGhvZHNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuICBcbiAgICBfLmV4dGVuZChDb250YWluZXIucHJvdG90eXBlLCB7XG4gIFxuICAgICAgLy8gQWRkIGEgdmlldyB0byB0aGlzIGNvbnRhaW5lci4gU3RvcmVzIHRoZSB2aWV3XG4gICAgICAvLyBieSBgY2lkYCBhbmQgbWFrZXMgaXQgc2VhcmNoYWJsZSBieSB0aGUgbW9kZWxcbiAgICAgIC8vIGNpZCAoYW5kIG1vZGVsIGl0c2VsZikuIE9wdGlvbmFsbHkgc3BlY2lmeVxuICAgICAgLy8gYSBjdXN0b20ga2V5IHRvIHN0b3JlIGFuIHJldHJpZXZlIHRoZSB2aWV3LlxuICAgICAgYWRkOiBmdW5jdGlvbih2aWV3LCBjdXN0b21JbmRleCl7XG4gICAgICAgIHZhciB2aWV3Q2lkID0gdmlldy5jaWQ7XG4gIFxuICAgICAgICAvLyBzdG9yZSB0aGUgdmlld1xuICAgICAgICB0aGlzLl92aWV3c1t2aWV3Q2lkXSA9IHZpZXc7XG4gIFxuICAgICAgICAvLyBpbmRleCBpdCBieSBtb2RlbFxuICAgICAgICBpZiAodmlldy5tb2RlbCl7XG4gICAgICAgICAgdGhpcy5faW5kZXhCeU1vZGVsW3ZpZXcubW9kZWwuY2lkXSA9IHZpZXdDaWQ7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGluZGV4IGJ5IGN1c3RvbVxuICAgICAgICBpZiAoY3VzdG9tSW5kZXgpe1xuICAgICAgICAgIHRoaXMuX2luZGV4QnlDdXN0b21bY3VzdG9tSW5kZXhdID0gdmlld0NpZDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgdGhpcy5fdXBkYXRlTGVuZ3RoKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBGaW5kIGEgdmlldyBieSB0aGUgbW9kZWwgdGhhdCB3YXMgYXR0YWNoZWQgdG9cbiAgICAgIC8vIGl0LiBVc2VzIHRoZSBtb2RlbCdzIGBjaWRgIHRvIGZpbmQgaXQuXG4gICAgICBmaW5kQnlNb2RlbDogZnVuY3Rpb24obW9kZWwpe1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kQnlNb2RlbENpZChtb2RlbC5jaWQpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBGaW5kIGEgdmlldyBieSB0aGUgYGNpZGAgb2YgdGhlIG1vZGVsIHRoYXQgd2FzIGF0dGFjaGVkIHRvXG4gICAgICAvLyBpdC4gVXNlcyB0aGUgbW9kZWwncyBgY2lkYCB0byBmaW5kIHRoZSB2aWV3IGBjaWRgIGFuZFxuICAgICAgLy8gcmV0cmlldmUgdGhlIHZpZXcgdXNpbmcgaXQuXG4gICAgICBmaW5kQnlNb2RlbENpZDogZnVuY3Rpb24obW9kZWxDaWQpe1xuICAgICAgICB2YXIgdmlld0NpZCA9IHRoaXMuX2luZGV4QnlNb2RlbFttb2RlbENpZF07XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRCeUNpZCh2aWV3Q2lkKTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gRmluZCBhIHZpZXcgYnkgYSBjdXN0b20gaW5kZXhlci5cbiAgICAgIGZpbmRCeUN1c3RvbTogZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICB2YXIgdmlld0NpZCA9IHRoaXMuX2luZGV4QnlDdXN0b21baW5kZXhdO1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kQnlDaWQodmlld0NpZCk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIEZpbmQgYnkgaW5kZXguIFRoaXMgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgYVxuICAgICAgLy8gc3RhYmxlIGluZGV4LlxuICAgICAgZmluZEJ5SW5kZXg6IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgcmV0dXJuIF8udmFsdWVzKHRoaXMuX3ZpZXdzKVtpbmRleF07XG4gICAgICB9LFxuICBcbiAgICAgIC8vIHJldHJpZXZlIGEgdmlldyBieSBpdHMgYGNpZGAgZGlyZWN0bHlcbiAgICAgIGZpbmRCeUNpZDogZnVuY3Rpb24oY2lkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdzW2NpZF07XG4gICAgICB9LFxuICBcbiAgICAgIC8vIFJlbW92ZSBhIHZpZXdcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24odmlldyl7XG4gICAgICAgIHZhciB2aWV3Q2lkID0gdmlldy5jaWQ7XG4gIFxuICAgICAgICAvLyBkZWxldGUgbW9kZWwgaW5kZXhcbiAgICAgICAgaWYgKHZpZXcubW9kZWwpe1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9pbmRleEJ5TW9kZWxbdmlldy5tb2RlbC5jaWRdO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBkZWxldGUgY3VzdG9tIGluZGV4XG4gICAgICAgIF8uYW55KHRoaXMuX2luZGV4QnlDdXN0b20sIGZ1bmN0aW9uKGNpZCwga2V5KSB7XG4gICAgICAgICAgaWYgKGNpZCA9PT0gdmlld0NpZCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2luZGV4QnlDdXN0b21ba2V5XTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gIFxuICAgICAgICAvLyByZW1vdmUgdGhlIHZpZXcgZnJvbSB0aGUgY29udGFpbmVyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl92aWV3c1t2aWV3Q2lkXTtcbiAgXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgbGVuZ3RoXG4gICAgICAgIHRoaXMuX3VwZGF0ZUxlbmd0aCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gQ2FsbCBhIG1ldGhvZCBvbiBldmVyeSB2aWV3IGluIHRoZSBjb250YWluZXIsXG4gICAgICAvLyBwYXNzaW5nIHBhcmFtZXRlcnMgdG8gdGhlIGNhbGwgbWV0aG9kIG9uZSBhdCBhXG4gICAgICAvLyB0aW1lLCBsaWtlIGBmdW5jdGlvbi5jYWxsYC5cbiAgICAgIGNhbGw6IGZ1bmN0aW9uKG1ldGhvZCl7XG4gICAgICAgIHRoaXMuYXBwbHkobWV0aG9kLCBfLnRhaWwoYXJndW1lbnRzKSk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIEFwcGx5IGEgbWV0aG9kIG9uIGV2ZXJ5IHZpZXcgaW4gdGhlIGNvbnRhaW5lcixcbiAgICAgIC8vIHBhc3NpbmcgcGFyYW1ldGVycyB0byB0aGUgY2FsbCBtZXRob2Qgb25lIGF0IGFcbiAgICAgIC8vIHRpbWUsIGxpa2UgYGZ1bmN0aW9uLmFwcGx5YC5cbiAgICAgIGFwcGx5OiBmdW5jdGlvbihtZXRob2QsIGFyZ3Mpe1xuICAgICAgICBfLmVhY2godGhpcy5fdmlld3MsIGZ1bmN0aW9uKHZpZXcpe1xuICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24odmlld1ttZXRob2RdKSl7XG4gICAgICAgICAgICB2aWV3W21ldGhvZF0uYXBwbHkodmlldywgYXJncyB8fCBbXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSBgLmxlbmd0aGAgYXR0cmlidXRlIG9uIHRoaXMgY29udGFpbmVyXG4gICAgICBfdXBkYXRlTGVuZ3RoOiBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmxlbmd0aCA9IF8uc2l6ZSh0aGlzLl92aWV3cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIC8vIEJvcnJvd2luZyB0aGlzIGNvZGUgZnJvbSBCYWNrYm9uZS5Db2xsZWN0aW9uOlxuICAgIC8vIGh0dHA6Ly9iYWNrYm9uZWpzLm9yZy9kb2NzL2JhY2tib25lLmh0bWwjc2VjdGlvbi0xMDZcbiAgICAvL1xuICAgIC8vIE1peCBpbiBtZXRob2RzIGZyb20gVW5kZXJzY29yZSwgZm9yIGl0ZXJhdGlvbiwgYW5kIG90aGVyXG4gICAgLy8gY29sbGVjdGlvbiByZWxhdGVkIGZlYXR1cmVzLlxuICAgIHZhciBtZXRob2RzID0gWydmb3JFYWNoJywgJ2VhY2gnLCAnbWFwJywgJ2ZpbmQnLCAnZGV0ZWN0JywgJ2ZpbHRlcicsXG4gICAgICAnc2VsZWN0JywgJ3JlamVjdCcsICdldmVyeScsICdhbGwnLCAnc29tZScsICdhbnknLCAnaW5jbHVkZScsXG4gICAgICAnY29udGFpbnMnLCAnaW52b2tlJywgJ3RvQXJyYXknLCAnZmlyc3QnLCAnaW5pdGlhbCcsICdyZXN0JyxcbiAgICAgICdsYXN0JywgJ3dpdGhvdXQnLCAnaXNFbXB0eScsICdwbHVjaycsICdyZWR1Y2UnXTtcbiAgXG4gICAgXy5lYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgQ29udGFpbmVyLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2aWV3cyA9IF8udmFsdWVzKHRoaXMuX3ZpZXdzKTtcbiAgICAgICAgdmFyIGFyZ3MgPSBbdmlld3NdLmNvbmNhdChfLnRvQXJyYXkoYXJndW1lbnRzKSk7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0uYXBwbHkoXywgYXJncyk7XG4gICAgICB9O1xuICAgIH0pO1xuICBcbiAgICAvLyByZXR1cm4gdGhlIHB1YmxpYyBBUElcbiAgICByZXR1cm4gQ29udGFpbmVyO1xuICB9KShCYWNrYm9uZSwgXyk7XG4gIFxuXG4gIEJhY2tib25lLkNoaWxkVmlld0NvbnRhaW5lci5WRVJTSU9OID0gJzAuMS4xMSc7XG5cbiAgQmFja2JvbmUuQ2hpbGRWaWV3Q29udGFpbmVyLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgQmFja2JvbmUuQ2hpbGRWaWV3Q29udGFpbmVyID0gcHJldmlvdXNDaGlsZFZpZXdDb250YWluZXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcmV0dXJuIEJhY2tib25lLkNoaWxkVmlld0NvbnRhaW5lcjtcblxufSkpO1xuIiwiLyoqXG4gKiBCYWNrYm9uZS5OYXRpdmVcbiAqXG4gKiBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4gKiBodHRwOi8vZ2l0aHViLmNvbS9pbmtsaW5nL2JhY2tib25lLm5hdGl2ZVxuICpcbiAqIENvcHlyaWdodCAyMDEzIElua2xpbmcgU3lzdGVtcywgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgbGlicmFyeSBpcyB0byBhbGxvdyBCYWNrYm9uZSB0byB3b3JrIHdpdGhvdXQgbmVlZGluZyB0byBsb2FkIGpRdWVyeSBvciBaZXB0by5cbiAqIFRoaXMgZmlsZSBwcm92aWRlcyBhIGJhc2ljIGpRdWVyeS1saWtlIGltcGxlbWVudGF0aW9uIGZvciBCYWNrYm9uZSwgaW1wbGVtZW50aW5nIHRoZVxuICogbWluaW11bSBmdW5jdGlvbmFsaXR5IGZvciBCYWNrYm9uZSB0byBmdW5jdGlvbi4gV2UgYXNzdW1lIHRoYXQgQmFja2JvbmUgYXBwbGljYXRpb25zIHVzaW5nXG4gKiB0aGlzIHdpbGwgbm90IGV4cGVjdCB0aGUgc3RhbmRhcmQgalF1ZXJ5IEFQSSB0byB3b3JrLCBhbmQgd2lsbCBpbnN0ZWFkIHVzZSBuYXRpdmUgSlMgZnVuY3Rpb25zLlxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IGR1ZSB0byB0aGUgQVBJcyBpbiB0aGlzLCBpdCB3aWxsIGxpa2VseSBvbmx5IHdvcmsgb24gcmVjZW50IGJyb3dzZXJzLlxuICpcbiAqIE5vdGU6XG4gKiAgLSBDb3JlIEJhY2tib25lIG9ubHkgbmVlZHMgY29sbGVjdGlvbnMgd2l0aCBzaW5nbGUgbWVtYmVycywgc28gdGhhdCBpcyBhbGwgdGhhdCBoYXMgYmVlblxuICogICAgICBzdXBwb3J0ZWQgaW4gdGhpcyBsaWJyYXJ5LiBJdCBpcyBleHBlY3RlZCB0aGF0IHlvdSB3aWxsIGp1c3QgdXNlIHF1ZXJ5U2VsZWN0b3JBbGwgaW5zdGVhZC5cbiAqICAgICAgVGhpcyB3aWxsIGJlIG1vc3Qgb2J2aW91cyBpZiB5b3UgbWFrZSBoZWF2eSB1c2Ugb2YgJ3ZpZXcuJCcuXG4gKiAgLSBFdmVudHMgZGVsZWdhdGVkIHdpdGggc2VsZWN0b3JzIHN0YXJ0aW5nIHdpdGggJz4nIGFyZSBub3Qgc3VwcG9ydGVkLlxuICogIC0gRHVlIHRvICdjdXJyZW50VGFyZ2V0JyBiZWluZyByZWFkLW9ubHkgb24gc3RhbmRhcmQgRE9NIGV2ZW50cywgd2UgY2Fubm90IG1ha2Ugc3RhbmRhcmRcbiAqICAgICAgZXZlbnRzIGJlaGF2ZSBpZGVudGljYWxseSB0byBqUXVlcnkncyBldmVudHMgd2hlbiBkZWxlZ2F0aW9uIGlzIHVzZWQuIFRoZSBlbGVtZW50IG1hdGNoaW5nXG4gKiAgICAgIHRoZSBkZWxlZ2F0ZSBzZWxlY3RvciBpcyBpbnN0ZWFkIHBhc3NlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIGV2ZW50IGhhbmRsZXJzLlxuICogIC0gVGhlICckLmFqYXgnIGltcGxlbWVudGF0aW9uIGlzIHZlcnkgc2ltcGxlIGFuZCBsaWtlbHkgbmVlZHMgdG8gYmUgZXhwYW5kZWQgdG8gYmV0dGVyIHN1cHBvcnRcbiAqICAgICAgc3RhbmRhcmQgdXNlLWNhc2VzLlxuICpcbiAqIFRlc3RlZCB3aXRoIEJhY2tib25lIHYwLjkuMiBhbmQgMS4wLjAuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy8gUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGFuIGV2ZW50IG5hbWUgYW5kL29yIGEgbmFtZXNwYWNlLlxuICAgIHZhciBuYW1lc3BhY2VSRSA9IC9eKFteLl0rKT8oPzpcXC4oW14uXSspKT8kLztcblxuICAgIHZhciBtYXRjaGVzU2VsZWN0b3IgPSBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgbnVsbDtcbiAgICBpZiAoIW1hdGNoZXNTZWxlY3Rvcil7XG4gICAgICAgIFsnd2Via2l0JywgJ21veicsICdvJywgJ21zJ10uZm9yRWFjaChmdW5jdGlvbihwcmVmaXgpe1xuICAgICAgICAgICAgdmFyIGZ1bmMgPSBFbGVtZW50LnByb3RvdHlwZVtwcmVmaXggKyAnTWF0Y2hlc1NlbGVjdG9yJ107XG4gICAgICAgICAgICBpZiAoZnVuYykgbWF0Y2hlc1NlbGVjdG9yID0gZnVuYztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGVsZW1lbnQgcHJvcGVydHkgdG8gc2F2ZSB0aGUgY2FjaGUga2V5IG9uLlxuICAgIHZhciBjYWNoZUtleVByb3AgPSAnYmFja2JvbmVOYXRpdmVLZXknICsgTWF0aC5yYW5kb20oKTtcbiAgICB2YXIgaWQgPSAxO1xuICAgIHZhciBoYW5kbGVycyA9IHt9O1xuICAgIHZhciB1bnVzZWRLZXlzID0gW107XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV2ZW50IGhhbmRsZXJzIGZvciBhIGdpdmVuIGVsZW1lbnQsIGNyZWF0aW5nIGFuIGVtcHR5IHNldCBpZiBvbmUgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIFRvIGF2b2lkIGNvbnN0YW50bHkgZmlsbGluZyB0aGUgaGFuZGxlcnMgb2JqZWN0IHdpdGggbnVsbCB2YWx1ZXMsIHdlIHJldXNlIG9sZCBJRHMgdGhhdFxuICAgICAqIGhhdmUgYmVlbiBjcmVhdGVkIGFuZCB0aGVuIGNsZWFyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsIFRoZSBlbGVtZW50IHRvIGdldCBoYW5kbGVycyBmb3IuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2YgaGFuZGxlcnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFuZGxlcnNGb3IoZWwpe1xuICAgICAgICBpZiAoIWVsW2NhY2hlS2V5UHJvcF0pe1xuICAgICAgICAgICAgLy8gUGljayBhIG5ldyBrZXksIGZyb20gdGhlIHVudXNlZCBwb29sLCBvciBtYWtlIGEgbmV3IG9uZS5cbiAgICAgICAgICAgIGVsW2NhY2hlS2V5UHJvcF0gPSB1bnVzZWRLZXlzLmxlbmd0aCA9PT0gMCA/ICsraWQgOiB1bnVzZWRLZXlzLnBvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNhY2hlS2V5ID0gZWxbY2FjaGVLZXlQcm9wXTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzW2NhY2hlS2V5XSB8fCAoaGFuZGxlcnNbY2FjaGVLZXldID0gW10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBldmVudCBoYW5kbGVycyBmb3IgYSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB0byBjbGVhci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbGVhckhhbmRsZXJzKGVsKXtcbiAgICAgICAgdmFyIGNhY2hlS2V5ID0gZWxbY2FjaGVLZXlQcm9wXTtcbiAgICAgICAgaWYgKGhhbmRsZXJzW2NhY2hlS2V5XSl7XG4gICAgICAgICAgICBoYW5kbGVyc1tjYWNoZUtleV0gPSBudWxsO1xuICAgICAgICAgICAgZWxbY2FjaGVLZXlQcm9wXSA9IG51bGw7XG4gICAgICAgICAgICB1bnVzZWRLZXlzLnB1c2goY2FjaGVLZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGV2ZW50IGhhbmRsZXJzIHRvIGFuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudEVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gYmluZCBldmVudCBoYW5kbGVycyB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCB0byBiaW5kLCBlLmcuICdjbGljaycuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIChPcHRpb25hbCkgVGhlIHNlbGVjdG9yIHRvIG1hdGNoIHdoZW4gYW4gZXZlbnQgcHJvcGFnYXRlcyB1cC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKEV2ZW50LCBFbGVtZW50KX0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgZmlyZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gb24ocGFyZW50RWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spe1xuICAgICAgICAvLyBBZGp1c3QgYXJndW1lbnRzIGlmIHNlbGVjdG9yIHdhcyBub3QgcHJvdmlkZWQuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdmdW5jdGlvbicpe1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBzZWxlY3RvcjtcbiAgICAgICAgICAgIHNlbGVjdG9yID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJ0cyA9IG5hbWVzcGFjZVJFLmV4ZWMoZXZlbnROYW1lKTtcbiAgICAgICAgZXZlbnROYW1lID0gcGFydHNbMV0gfHwgbnVsbDtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IHBhcnRzWzJdIHx8IG51bGw7XG5cbiAgICAgICAgaWYgKCFldmVudE5hbWUpIHJldHVybjtcblxuICAgICAgICB2YXIgaGFuZGxlciA9IGNhbGxiYWNrO1xuICAgICAgICB2YXIgb3JpZ2luYWxDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAoc2VsZWN0b3Ipe1xuICAgICAgICAgICAgLy8gRXZlbnQgZGVsZWdhdGlvbiBoYW5kbGVyIHRvIG1hdGNoIGEgc2VsZWN0b3IgZm9yIGNoaWxkIGVsZW1lbnQgZXZlbnRzLlxuICAgICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBlbCA9IGV2ZW50LnRhcmdldDsgZWwgJiYgZWwgIT09IHBhcmVudEVsZW1lbnQ7IGVsID0gZWwucGFyZW50RWxlbWVudCl7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzU2VsZWN0b3IuY2FsbChlbCwgc2VsZWN0b3IpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSBkb2VzIG5vdCBpbmNsdWRlIHRoZSBzZWNvbmQgYXJndW1lbnQsIGJ1dCB3ZSBoYXZlIGluY2x1ZGVkIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3Igc2ltcGxpY2l0eSBiZWNhdXNlICd0aGlzJyB3aWxsIGxpa2VseSBiZSBib3VuZCB0byB0aGUgdmlldyBpbnNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjYWxsYmFjaywgYW5kIGFzIG5vdGVkIGFib3ZlLCB3ZSBjYW5ub3Qgb3ZlcnJpZGUgJ2N1cnJlbnRUYXJnZXQnLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsQ2FsbGJhY2suY2FsbChlbCwgZXZlbnQsIGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTdGFuZGFyZCBldmVudCBoYW5kbGVyIGJvdW5kIGRpcmVjdGx5IHRvIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWxDYWxsYmFjay5jYWxsKHBhcmVudEVsZW1lbnQsIGV2ZW50LCBwYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTtcblxuICAgICAgICAvLyBTYXZlIGV2ZW50IGhhbmRsZXIgbWV0YWRhdGEgc28gdGhhdCB0aGUgaGFuZGxlciBjYW4gYmUgdW5ib3VuZCBsYXRlci5cbiAgICAgICAgaGFuZGxlcnNGb3IocGFyZW50RWxlbWVudCkucHVzaCh7XG4gICAgICAgICAgICBldmVudE5hbWU6IGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsXG4gICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvclxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW4gZXZlbnQgaGFuZGxlciBmcm9tIGFuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudEVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gdW5iaW5kIGV2ZW50IGhhbmRsZXJzIGZyb20uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAoT3B0aW9uYWwpIFRoZSBldmVudCB0byB1bmJpbmQsIGUuZy4gJ2NsaWNrJy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBUaGUgc2VsZWN0b3IgdG8gdW5iaW5kLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oRXZlbnQsIEVsZW1lbnQpfSBjYWxsYmFjayAoT3B0aW9uYWwpIFRoZSBmdW5jdGlvbiB0byB1bmJpbmQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gb2ZmKHBhcmVudEVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKXtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJyl7XG4gICAgICAgICAgICBjYWxsYmFjayA9IHNlbGVjdG9yO1xuICAgICAgICAgICAgc2VsZWN0b3IgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcnRzID0gbmFtZXNwYWNlUkUuZXhlYyhldmVudE5hbWUgfHwgJycpO1xuICAgICAgICBldmVudE5hbWUgPSBwYXJ0c1sxXTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IHBhcnRzWzJdO1xuICAgICAgICB2YXIgaGFuZGxlcnMgPSBoYW5kbGVyc0ZvcihwYXJlbnRFbGVtZW50KSB8fCBbXTtcblxuICAgICAgICBpZiAoIWV2ZW50TmFtZSAmJiAhbmFtZXNwYWNlICYmICFzZWxlY3RvciAmJiAhY2FsbGJhY2spe1xuICAgICAgICAgICAgLy8gRmFzdHBhdGggdG8gcmVtb3ZlIGFsbCBoYW5kbGVycy5cbiAgICAgICAgICAgIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGl0ZW0uZXZlbnROYW1lLCBpdGVtLmhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2xlYXJIYW5kbGVycyhwYXJlbnRFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkSGFuZGxlcnMgPSBoYW5kbGVycy5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgoIW5hbWVzcGFjZSB8fCBpdGVtLm5hbWVzcGFjZSA9PT0gbmFtZXNwYWNlKSAmJlxuICAgICAgICAgICAgICAgICAgICAoIWV2ZW50TmFtZSB8fCBpdGVtLmV2ZW50TmFtZSA9PT0gZXZlbnROYW1lKSAmJlxuICAgICAgICAgICAgICAgICAgICAoIWNhbGxiYWNrIHx8IGl0ZW0uY2FsbGJhY2sgPT09IGNhbGxiYWNrKSAmJlxuICAgICAgICAgICAgICAgICAgICAoIXNlbGVjdG9yIHx8IGl0ZW0uc2VsZWN0b3IgPT09IHNlbGVjdG9yKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWF0Y2hlZEhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGl0ZW0uZXZlbnROYW1lLCBpdGVtLmhhbmRsZXIsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShoYW5kbGVycy5pbmRleE9mKGl0ZW0pLCAxKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoaGFuZGxlcnMubGVuZ3RoID09PSAwKSBjbGVhckhhbmRsZXJzKHBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgbmV3IGpRdWVyeS1zdHlsZSBlbGVtZW50IHJlcHJlc2VudGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8RWxlbWVudHxXaW5kb3d9IGVsZW1lbnQgVGhlcmUgYXJlIHNldmVyYWwgZGlmZmVyZW50IHBvc3NpYmxlIHZhbHVlcyBmb3IgdGhpc1xuICAgICAqICAgICAgYXJndW1lbnQ6XG4gICAgICogICAgICAtIHtzdHJpbmd9IEEgc25pcHBldCBvZiBIVE1MLCBpZiBpdCBzdGFydHMgd2l0aCBhICc8Jywgb3IgYSBzZWxlY3RvciB0byBmaW5kLlxuICAgICAqICAgICAgLSB7RWxlbWVudH0gQW4gZXhpc3RpbmcgZWxlbWVudCB0byB3cmFwLlxuICAgICAqICAgICAgLSB7V2luZG93fSBUaGUgd2luZG93IG9iamVjdCB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gY29udGV4dCBUaGUgY29udGV4dCB0byBzZWFyY2ggd2l0aGluLCBpZiBhIHNlbGVjdG9yIHdhcyBnaXZlbi5cbiAgICAgKiAgICAgIERlZmF1bHRzIHRvIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICQoZWxlbWVudCwgY29udGV4dCl7XG4gICAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG4gICAgICAgIC8vIENhbGwgYXMgYSBjb25zdHJ1Y3RvciBpZiBpdCB3YXMgdXNlZCBhcyBhIGZ1bmN0aW9uLlxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgJCkpIHJldHVybiBuZXcgJChlbGVtZW50LCBjb250ZXh0KTtcblxuICAgICAgICBpZiAoIWVsZW1lbnQpe1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJyl7XG4gICAgICAgICAgICBpZiAoL15cXHMqPC8udGVzdChlbGVtZW50KSl7XG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgYXJiaXRyYXJ5IEhUTUwgaW50byBhbiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICB0aGlzWzBdID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgZGl2LnJlbW92ZUNoaWxkKGRpdi5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNbMF0gPSBjb250ZXh0LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBoYW5kbGVzIGJvdGggdGhlICdFbGVtZW50JyBhbmQgJ1dpbmRvdycgY2FzZSwgYXMgYm90aCBzdXBwb3J0XG4gICAgICAgICAgICAvLyBldmVudCBiaW5kaW5nIHZpYSAnYWRkRXZlbnRMaXN0ZW5lcicuXG4gICAgICAgICAgICB0aGlzWzBdID0gZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQucHJvdG90eXBlID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIGJ5IEJhY2tib25lLCBidXQgb25seSBpbiBjb2RlLXBhdGhzIGZvciBJRSA2Lzcgc3VwcG9ydC5cbiAgICAgICAgICogU2luY2Ugbm9uZSBvZiB0aGlzIHdpbGwgd29yayBmb3Igb2xkIElFIGFueXdheSwgdGhleSBhcmUgbm90IGltcGxlbWVudGVkLCBhbmRcbiAgICAgICAgICogaW5zdGVhZCBsZWZ0IGZvciBkb2N1bWVudGF0aW9uIHB1cnBvc2VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBVc2VkIGluIEJhY2tib25lLkhpc3RvcnkucHJvdG90eXBlLnN0YXJ0LlxuICAgICAgICAgKi9cbiAgICAgICAgaGlkZTogbnVsbCxcbiAgICAgICAgYXBwZW5kVG86IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpbmQgaXMgbm90IHN1cHBvcnRlZCB0byBlbmNvdXJhZ2UgdGhlIHVzZSBvZiBxdWVyeVNlbGVjdG9yKEFsbCkgYXMgYW4gYWx0ZXJuYXRpdmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIGUuZy5cbiAgICAgICAgICogSW5zdGVhZCBvZiAndGhpcy4kKHNlbCknLCB1c2UgJ3RoaXMuZWwucXVlcnlTZWxlY3RvckFsbChzZWwpJy5cbiAgICAgICAgICpcbiAgICAgICAgICogVXNlZCBpbiBCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS4kLCBidXQgbm90IGFjdHVhbGx5IGNhbGxlZCBpbnRlcm5hbGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgZmluZDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFVzZWQgaW4gQmFja2JvbmUuVmlldy5wcm90b3R5cGUubWFrZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGF0dHJpYnV0ZXMgQSBzZXQgb2YgYXR0cmlidXRlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7JH0gVGhpcyBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIGF0dHI6IGZ1bmN0aW9uKGF0dHJzKXtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uKGF0dHIpe1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0cil7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2h0bWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1swXS5pbm5lckhUTUwgPSBhdHRyc1thdHRyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbMF0udGV4dENvbnRlbnQgPSBhdHRyc1thdHRyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWzBdLmNsYXNzTmFtZSA9IGF0dHJzW2F0dHJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWzBdLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIEhUTUwgY29udGVudCBvZiB0aGUgZWxlbWVudC4gQmFja2JvbmUgZG9lcyBub3QgdXNlIHRoZSBuby1hcmd1bWVudCB2ZXJzaW9uXG4gICAgICAgICAqIHRvIHJlYWQgaW5uZXJIVE1MLCBzbyB0aGF0IGhhcyBub3QgYmVlbiBpbXBsZW1lbnRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogVXNlZCBpbiBCYWNrYm9uZS5WaWV3LnByb3RvdHlwZS5tYWtlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaHRtbCBUaGUgSFRNTCB0byBzZXQgYXMgdGhlIGVsZW1lbnQgY29udGVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7JH0gVGhpcyBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIGh0bWw6IGZ1bmN0aW9uKGh0bWwpe1xuICAgICAgICAgICAgdGhpc1swXS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSBhbiBlbGVtZW50IGZyb20gdGhlIERPTSBhbmQgcmVtb3ZlIGFsbCBldmVudCBoYW5kbGVycyBib3VuZCB0byBpdCBhbmRcbiAgICAgICAgICogaXRzIGNoaWxkIGVsZW1lbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBVc2VkIGluIEJhY2tib25lLlZpZXcucHJvdG90eXBlLnJlbW92ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiB7JH0gVGhpcyBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXNbMF07XG4gICAgICAgICAgICBpZiAoZWwucGFyZW50RWxlbWVudCkgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG5cbiAgICAgICAgICAgIC8vIFVuYmluZCBhbGwgZXZlbnQgaGFuZGxlcnMgb24gdGhlIGVsZW1lbnQgYW5kIGNoaWxkcmVuLlxuICAgICAgICAgICAgKGZ1bmN0aW9uIHJlbW92ZUNoaWxkRXZlbnRzKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIG9mZihlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZE5vZGVzW2ldLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDaGlsZEV2ZW50cyhlbGVtZW50LmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoZWwpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQmluZCBhbiBldmVudCBoYW5kbGVyIHRvIHRoaXMgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgdG8gYmluZCwgZS5nLiAnY2xpY2snLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgKE9wdGlvbmFsKSBUaGUgc2VsZWN0b3IgdG8gbWF0Y2ggd2hlbiBhbiBldmVudCBwcm9wYWdhdGVzIHVwLlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKEV2ZW50LCBFbGVtZW50KX0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgZmlyZWQuXG4gICAgICAgICAqL1xuICAgICAgICBvbjogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spe1xuICAgICAgICAgICAgb24odGhpc1swXSwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuYmluZCBhbiBldmVudCBoYW5kbGVyIHRvIHRoaXMgZWxlbWVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSAoT3B0aW9uYWwpIFRoZSBldmVudCB0byB1bmJpbmQsIGUuZy4gJ2NsaWNrJy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIChPcHRpb25hbCkgVGhlIHNlbGVjdG9yIHRvIHVuYmluZC5cbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihFdmVudCwgRWxlbWVudCl9IGNhbGxiYWNrIChPcHRpb25hbCkgVGhlIGZ1bmN0aW9uIHRvIHVuYmluZC5cbiAgICAgICAgICovXG4gICAgICAgIG9mZjogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spe1xuICAgICAgICAgICAgb2ZmKHRoaXNbMF0sIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEJhY2tib25lIHYwLjkuMiBzdXBwb3J0LlxuICAgICAgICBiaW5kOiBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICB1bmJpbmQ6IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2ZmKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBkZWxlZ2F0ZTogZnVuY3Rpb24oc2VsZWN0b3IsIGV2ZW50TmFtZSwgY2FsbGJhY2spe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24oZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbihzZWxlY3RvciwgZXZlbnROYW1lLCBjYWxsYmFjayl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vZmYoZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gQUpBWCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIG9wdGlvbnMgdG8gdXNlIGZvciB0aGUgY29ubmVjdGlvbjpcbiAgICAgKiAgICAgIC0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gY29ubmVjdCB0by5cbiAgICAgKiAgICAgIC0ge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiByZXF1ZXN0LCBlLmcuICdHRVQnLCBvciAnUE9TVCcuXG4gICAgICogICAgICAtIHtzdHJpbmd9IGRhdGFUeXBlIFRoZSB0eXBlIG9mIGRhdGEgZXhwZWN0ZWQsICdqc29uJy5cbiAgICAgKiAgICAgIC0ge3N0cmluZ30gY29udGVudFR5cGUgVGhlIGNvbnRlbnQtdHlwZSBvZiB0aGUgZGF0YS5cbiAgICAgKiAgICAgIC0ge3N0cmluZ3xvYmplY3R9IGRhdGEgVGhlIGNvbnRlbnQgdG8gc2VuZC5cbiAgICAgKiAgICAgIC0ge2Z1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0KX0gYmVmb3JlU2VuZCBBIGNhbGxiYWNrIHRvIGNhbGwgYmVmb3JlIHNlbmRpbmcuXG4gICAgICogICAgICAtIHtib29sZWFufSBwcm9jZXNzRGF0YSBUcnVlIGlmICdkYXRhJyBzaG91bGQgYmUgY29udmVydGVkXG4gICAgICogICAgICAgICAgdG8gYSBxdWVyeSBzdHJpbmcgZnJvbSBhbiBvYmplY3QuXG4gICAgICogICAgICAtIHtmdW5jdGlvbih7c3RyaW5nfG9iamVjdH0sIHtzdHJpbmd9LCB7WE1MSHR0cFJlcXVlc3R9KX0gc3VjY2VzcyBUaGUgc3VjY2VzcyBjYWxsYmFjay5cbiAgICAgKiAgICAgIC0ge2Z1bmN0aW9uKHtYTUxIdHRwUmVxdWVzdH0pfSBlcnJvciBUaGUgZXJyb3IgY2FsbGJhY2suXG4gICAgICovXG4gICAgJC5hamF4ID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCAnR0VUJztcbiAgICAgICAgdmFyIHVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB2YXIgcHJvY2Vzc0RhdGEgPSBvcHRpb25zLnByb2Nlc3NEYXRhID09PSB1bmRlZmluZWQgPyB0cnVlIDogISFvcHRpb25zLnByb2Nlc3NEYXRhO1xuXG4gICAgICAgIC8vIFByb2Nlc3MgdGhlIGRhdGEgZm9yIHNlbmRpbmcuXG4gICAgICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICBpZiAocHJvY2Vzc0RhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKXtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBPYmplY3Qua2V5cyhkYXRhKS5tYXAoZnVuY3Rpb24ocHJvcCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChwcm9wKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW3Byb3BdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGF0YSA9IHBhcmFtcy5qb2luKCcmJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEYXRhIGZvciBHRVQgYW5kIEhFQUQgZ29lcyBpbiB0aGUgVVJMLlxuICAgICAgICBpZiAoZGF0YSAmJiAodHlwZSA9PT0gJ0dFVCcgfHwgdHlwZSA9PT0gJ0hFQUQnKSl7XG4gICAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIGRhdGE7XG4gICAgICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3Blbih0eXBlLCB1cmwsIHRydWUpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRlbnRUeXBlKSB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgb3B0aW9ucy5jb250ZW50VHlwZSk7XG4gICAgICAgIGlmIChvcHRpb25zLmJlZm9yZVNlbmQpIG9wdGlvbnMuYmVmb3JlU2VuZCh4aHIpO1xuXG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBKU09OIGJlZm9yZSBjYWxsaW5nIHN1Y2Nlc3MuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kYXRhVHlwZSA9PT0gJ2pzb24nKXtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWVycm9yICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSl7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGFyZ3VtZW50cyBvbmx5IGFwcGx5IHRvIHYwLjkuMi5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdWNjZXNzKSBvcHRpb25zLnN1Y2Nlc3MoY29udGVudCwgeGhyLnN0YXR1c1RleHQsIHhocik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2lnbmF0dXJlIGlzIGluY29uc2lzdGVudCB3aXRoIHYwLjkuMiwgYnV0IGlzIGNvcnJlY3QgZm9yIDEuMC4wLlxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVycm9yKSBvcHRpb25zLmVycm9yKHhocik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICB4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmVycm9yKSBvcHRpb25zLmVycm9yKHhocik7XG4gICAgICAgIH07XG5cbiAgICAgICAgeGhyLnNlbmQoZGF0YSk7XG5cbiAgICAgICAgcmV0dXJuIHhocjtcbiAgICB9O1xuXG4gICAgLy8gRXhwb3NlIG9uL29mZiBmb3IgZXh0ZXJuYWwgdXNlIHdpdGggaGF2aW5nIHRvIGluc3RhbnRpYXRlIGEgd3JhcHBlci5cbiAgICAkLm9uID0gb247XG4gICAgJC5vZmYgPSBvZmY7XG5cbiAgICBpZih0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cyA9ICQ7XG4gICAgfVxuXG4gICAgdmFyIHJvb3QgPSB0aGlzO1xuICAgIHZhciBvcmlnaW5hbEJhY2tib25lTmF0aXZlID0gcm9vdC5CYWNrYm9uZSA/IHJvb3QuQmFja2JvbmUuTmF0aXZlIDogbnVsbDtcbiAgICB2YXIgb3JpZ2luYWwkID0gcm9vdC4kO1xuICAgIGlmIChyb290LkJhY2tib25lKSByb290LkJhY2tib25lLk5hdGl2ZSA9ICQ7XG4gICAgcm9vdC4kID0gJDtcblxuICAgICQubm9Db25mbGljdCA9IGZ1bmN0aW9uKGRlZXApe1xuICAgICAgICByb290LiQgPSBvcmlnaW5hbCQ7XG4gICAgICAgIGlmIChkZWVwKSByb290LkJhY2tib25lLk5hdGl2ZSA9IG9yaWdpbmFsQmFja2JvbmVOYXRpdmU7XG4gICAgICAgIHJldHVybiAkO1xuICAgIH07XG5cbiAgICBpZiAocm9vdC5CYWNrYm9uZSl7XG4gICAgICAgIGlmIChyb290LkJhY2tib25lLnNldERvbUxpYnJhcnkpeyAvLyB2MC45LjJcbiAgICAgICAgICAgIHJvb3QuQmFja2JvbmUuc2V0RG9tTGlicmFyeSgkKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gdjEuMC4wXG4gICAgICAgICAgICByb290LkJhY2tib25lLiQgPSAkO1xuICAgICAgICB9XG4gICAgfVxufSkuY2FsbCh0aGlzKTtcbiIsIi8vICAgICBCYWNrYm9uZS5qcyAxLjEuMlxuXG4vLyAgICAgKGMpIDIwMTAtMjAxNCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIEJhY2tib25lIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbi8vICAgICBodHRwOi8vYmFja2JvbmVqcy5vcmdcblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICAvLyBTZXQgdXAgQmFja2JvbmUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LiBTdGFydCB3aXRoIEFNRC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5JywgJ2V4cG9ydHMnXSwgZnVuY3Rpb24oXywgJCwgZXhwb3J0cykge1xuICAgICAgLy8gRXhwb3J0IGdsb2JhbCBldmVuIGluIEFNRCBjYXNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIHdpdGhcbiAgICAgIC8vIG90aGVycyB0aGF0IG1heSBzdGlsbCBleHBlY3QgYSBnbG9iYWwgQmFja2JvbmUuXG4gICAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcbiAgICB9KTtcblxuICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLiBqUXVlcnkgbWF5IG5vdCBiZSBuZWVkZWQgYXMgYSBtb2R1bGUuXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG4gICAgZmFjdG9yeShyb290LCBleHBvcnRzLCBfKTtcblxuICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxuICB9IGVsc2Uge1xuICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIHt9LCByb290Ll8sIChyb290LmpRdWVyeSB8fCByb290LlplcHRvIHx8IHJvb3QuZW5kZXIgfHwgcm9vdC4kKSk7XG4gIH1cblxufSh0aGlzLCBmdW5jdGlvbihyb290LCBCYWNrYm9uZSwgXywgJCkge1xuXG4gIC8vIEluaXRpYWwgU2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyByZXN0b3JlZCBsYXRlciBvbiwgaWYgYG5vQ29uZmxpY3RgIGlzIHVzZWQuXG4gIHZhciBwcmV2aW91c0JhY2tib25lID0gcm9vdC5CYWNrYm9uZTtcblxuICAvLyBDcmVhdGUgbG9jYWwgcmVmZXJlbmNlcyB0byBhcnJheSBtZXRob2RzIHdlJ2xsIHdhbnQgdG8gdXNlIGxhdGVyLlxuICB2YXIgYXJyYXkgPSBbXTtcbiAgdmFyIHB1c2ggPSBhcnJheS5wdXNoO1xuICB2YXIgc2xpY2UgPSBhcnJheS5zbGljZTtcbiAgdmFyIHNwbGljZSA9IGFycmF5LnNwbGljZTtcblxuICAvLyBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuIEtlZXAgaW4gc3luYyB3aXRoIGBwYWNrYWdlLmpzb25gLlxuICBCYWNrYm9uZS5WRVJTSU9OID0gJzEuMS4yJztcblxuICAvLyBGb3IgQmFja2JvbmUncyBwdXJwb3NlcywgalF1ZXJ5LCBaZXB0bywgRW5kZXIsIG9yIE15IExpYnJhcnkgKGtpZGRpbmcpIG93bnNcbiAgLy8gdGhlIGAkYCB2YXJpYWJsZS5cbiAgQmFja2JvbmUuJCA9ICQ7XG5cbiAgLy8gUnVucyBCYWNrYm9uZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlXG4gIC8vIHRvIGl0cyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIEJhY2tib25lIG9iamVjdC5cbiAgQmFja2JvbmUubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuQmFja2JvbmUgPSBwcmV2aW91c0JhY2tib25lO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVIVFRQYCB0byBzdXBwb3J0IGxlZ2FjeSBIVFRQIHNlcnZlcnMuIFNldHRpbmcgdGhpcyBvcHRpb25cbiAgLy8gd2lsbCBmYWtlIGBcIlBBVENIXCJgLCBgXCJQVVRcImAgYW5kIGBcIkRFTEVURVwiYCByZXF1ZXN0cyB2aWEgdGhlIGBfbWV0aG9kYCBwYXJhbWV0ZXIgYW5kXG4gIC8vIHNldCBhIGBYLUh0dHAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gIEJhY2tib25lLmVtdWxhdGVIVFRQID0gZmFsc2U7XG5cbiAgLy8gVHVybiBvbiBgZW11bGF0ZUpTT05gIHRvIHN1cHBvcnQgbGVnYWN5IHNlcnZlcnMgdGhhdCBjYW4ndCBkZWFsIHdpdGggZGlyZWN0XG4gIC8vIGBhcHBsaWNhdGlvbi9qc29uYCByZXF1ZXN0cyAuLi4gd2lsbCBlbmNvZGUgdGhlIGJvZHkgYXNcbiAgLy8gYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGAgaW5zdGVhZCBhbmQgd2lsbCBzZW5kIHRoZSBtb2RlbCBpbiBhXG4gIC8vIGZvcm0gcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgQmFja2JvbmUuZW11bGF0ZUpTT04gPSBmYWxzZTtcblxuICAvLyBCYWNrYm9uZS5FdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQSBtb2R1bGUgdGhhdCBjYW4gYmUgbWl4ZWQgaW4gdG8gKmFueSBvYmplY3QqIGluIG9yZGVyIHRvIHByb3ZpZGUgaXQgd2l0aFxuICAvLyBjdXN0b20gZXZlbnRzLiBZb3UgbWF5IGJpbmQgd2l0aCBgb25gIG9yIHJlbW92ZSB3aXRoIGBvZmZgIGNhbGxiYWNrXG4gIC8vIGZ1bmN0aW9ucyB0byBhbiBldmVudDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG4gIC8vIHN1Y2Nlc3Npb24uXG4gIC8vXG4gIC8vICAgICB2YXIgb2JqZWN0ID0ge307XG4gIC8vICAgICBfLmV4dGVuZChvYmplY3QsIEJhY2tib25lLkV2ZW50cyk7XG4gIC8vICAgICBvYmplY3Qub24oJ2V4cGFuZCcsIGZ1bmN0aW9uKCl7IGFsZXJ0KCdleHBhbmRlZCcpOyB9KTtcbiAgLy8gICAgIG9iamVjdC50cmlnZ2VyKCdleHBhbmQnKTtcbiAgLy9cbiAgdmFyIEV2ZW50cyA9IEJhY2tib25lLkV2ZW50cyA9IHtcblxuICAgIC8vIEJpbmQgYW4gZXZlbnQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmRcbiAgICAvLyB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cbiAgICBvbjogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICdvbicsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pIHx8ICFjYWxsYmFjaykgcmV0dXJuIHRoaXM7XG4gICAgICB0aGlzLl9ldmVudHMgfHwgKHRoaXMuX2V2ZW50cyA9IHt9KTtcbiAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV0gfHwgKHRoaXMuX2V2ZW50c1tuYW1lXSA9IFtdKTtcbiAgICAgIGV2ZW50cy5wdXNoKHtjYWxsYmFjazogY2FsbGJhY2ssIGNvbnRleHQ6IGNvbnRleHQsIGN0eDogY29udGV4dCB8fCB0aGlzfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbiBldmVudCB0byBvbmx5IGJlIHRyaWdnZXJlZCBhIHNpbmdsZSB0aW1lLiBBZnRlciB0aGUgZmlyc3QgdGltZVxuICAgIC8vIHRoZSBjYWxsYmFjayBpcyBpbnZva2VkLCBpdCB3aWxsIGJlIHJlbW92ZWQuXG4gICAgb25jZTogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICdvbmNlJywgbmFtZSwgW2NhbGxiYWNrLCBjb250ZXh0XSkgfHwgIWNhbGxiYWNrKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBvbmNlID0gXy5vbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLm9mZihuYW1lLCBvbmNlKTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgb25jZS5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIHJldHVybiB0aGlzLm9uKG5hbWUsIG9uY2UsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgICAvLyBjYWxsYmFja3Mgd2l0aCB0aGF0IGZ1bmN0aW9uLiBJZiBgY2FsbGJhY2tgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gICAgLy8gY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBuYW1lYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuICAgIC8vIGNhbGxiYWNrcyBmb3IgYWxsIGV2ZW50cy5cbiAgICBvZmY6IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcmV0YWluLCBldiwgZXZlbnRzLCBuYW1lcywgaSwgbCwgaiwgaztcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzIHx8ICFldmVudHNBcGkodGhpcywgJ29mZicsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghbmFtZSAmJiAhY2FsbGJhY2sgJiYgIWNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIG5hbWVzID0gbmFtZSA/IFtuYW1lXSA6IF8ua2V5cyh0aGlzLl9ldmVudHMpO1xuICAgICAgZm9yIChpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgIGlmIChldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV0pIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHNbbmFtZV0gPSByZXRhaW4gPSBbXTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sgfHwgY29udGV4dCkge1xuICAgICAgICAgICAgZm9yIChqID0gMCwgayA9IGV2ZW50cy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgICAgZXYgPSBldmVudHNbal07XG4gICAgICAgICAgICAgIGlmICgoY2FsbGJhY2sgJiYgY2FsbGJhY2sgIT09IGV2LmNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBldi5jYWxsYmFjay5fY2FsbGJhY2spIHx8XG4gICAgICAgICAgICAgICAgICAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBldi5jb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHJldGFpbi5wdXNoKGV2KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXJldGFpbi5sZW5ndGgpIGRlbGV0ZSB0aGlzLl9ldmVudHNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuICAgIC8vIHBhc3NlZCB0aGUgc2FtZSBhcmd1bWVudHMgYXMgYHRyaWdnZXJgIGlzLCBhcGFydCBmcm9tIHRoZSBldmVudCBuYW1lXG4gICAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG4gICAgLy8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgaWYgKCFldmVudHNBcGkodGhpcywgJ3RyaWdnZXInLCBuYW1lLCBhcmdzKSkgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdO1xuICAgICAgdmFyIGFsbEV2ZW50cyA9IHRoaXMuX2V2ZW50cy5hbGw7XG4gICAgICBpZiAoZXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGV2ZW50cywgYXJncyk7XG4gICAgICBpZiAoYWxsRXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGFsbEV2ZW50cywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBUZWxsIHRoaXMgb2JqZWN0IHRvIHN0b3AgbGlzdGVuaW5nIHRvIGVpdGhlciBzcGVjaWZpYyBldmVudHMgLi4uIG9yXG4gICAgLy8gdG8gZXZlcnkgb2JqZWN0IGl0J3MgY3VycmVudGx5IGxpc3RlbmluZyB0by5cbiAgICBzdG9wTGlzdGVuaW5nOiBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbztcbiAgICAgIGlmICghbGlzdGVuaW5nVG8pIHJldHVybiB0aGlzO1xuICAgICAgdmFyIHJlbW92ZSA9ICFuYW1lICYmICFjYWxsYmFjaztcbiAgICAgIGlmICghY2FsbGJhY2sgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSBjYWxsYmFjayA9IHRoaXM7XG4gICAgICBpZiAob2JqKSAobGlzdGVuaW5nVG8gPSB7fSlbb2JqLl9saXN0ZW5JZF0gPSBvYmo7XG4gICAgICBmb3IgKHZhciBpZCBpbiBsaXN0ZW5pbmdUbykge1xuICAgICAgICBvYmogPSBsaXN0ZW5pbmdUb1tpZF07XG4gICAgICAgIG9iai5vZmYobmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgICAgICBpZiAocmVtb3ZlIHx8IF8uaXNFbXB0eShvYmouX2V2ZW50cykpIGRlbGV0ZSB0aGlzLl9saXN0ZW5pbmdUb1tpZF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgfTtcblxuICAvLyBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byBzcGxpdCBldmVudCBzdHJpbmdzLlxuICB2YXIgZXZlbnRTcGxpdHRlciA9IC9cXHMrLztcblxuICAvLyBJbXBsZW1lbnQgZmFuY3kgZmVhdHVyZXMgb2YgdGhlIEV2ZW50cyBBUEkgc3VjaCBhcyBtdWx0aXBsZSBldmVudFxuICAvLyBuYW1lcyBgXCJjaGFuZ2UgYmx1clwiYCBhbmQgalF1ZXJ5LXN0eWxlIGV2ZW50IG1hcHMgYHtjaGFuZ2U6IGFjdGlvbn1gXG4gIC8vIGluIHRlcm1zIG9mIHRoZSBleGlzdGluZyBBUEkuXG4gIHZhciBldmVudHNBcGkgPSBmdW5jdGlvbihvYmosIGFjdGlvbiwgbmFtZSwgcmVzdCkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBIYW5kbGUgZXZlbnQgbWFwcy5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICBvYmpbYWN0aW9uXS5hcHBseShvYmosIFtrZXksIG5hbWVba2V5XV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc3BhY2Ugc2VwYXJhdGVkIGV2ZW50IG5hbWVzLlxuICAgIGlmIChldmVudFNwbGl0dGVyLnRlc3QobmFtZSkpIHtcbiAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoZXZlbnRTcGxpdHRlcik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBvYmpbYWN0aW9uXS5hcHBseShvYmosIFtuYW1lc1tpXV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBBIGRpZmZpY3VsdC10by1iZWxpZXZlLCBidXQgb3B0aW1pemVkIGludGVybmFsIGRpc3BhdGNoIGZ1bmN0aW9uIGZvclxuICAvLyB0cmlnZ2VyaW5nIGV2ZW50cy4gVHJpZXMgdG8ga2VlcCB0aGUgdXN1YWwgY2FzZXMgc3BlZWR5IChtb3N0IGludGVybmFsXG4gIC8vIEJhY2tib25lIGV2ZW50cyBoYXZlIDMgYXJndW1lbnRzKS5cbiAgdmFyIHRyaWdnZXJFdmVudHMgPSBmdW5jdGlvbihldmVudHMsIGFyZ3MpIHtcbiAgICB2YXIgZXYsIGkgPSAtMSwgbCA9IGV2ZW50cy5sZW5ndGgsIGExID0gYXJnc1swXSwgYTIgPSBhcmdzWzFdLCBhMyA9IGFyZ3NbMl07XG4gICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCk7IHJldHVybjtcbiAgICAgIGNhc2UgMTogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExKTsgcmV0dXJuO1xuICAgICAgY2FzZSAyOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyKTsgcmV0dXJuO1xuICAgICAgY2FzZSAzOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyLCBhMyk7IHJldHVybjtcbiAgICAgIGRlZmF1bHQ6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmFwcGx5KGV2LmN0eCwgYXJncyk7IHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGxpc3Rlbk1ldGhvZHMgPSB7bGlzdGVuVG86ICdvbicsIGxpc3RlblRvT25jZTogJ29uY2UnfTtcblxuICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25gIGFuZCBgb25jZWAuIFRlbGwgKnRoaXMqIG9iamVjdCB0b1xuICAvLyBsaXN0ZW4gdG8gYW4gZXZlbnQgaW4gYW5vdGhlciBvYmplY3QgLi4uIGtlZXBpbmcgdHJhY2sgb2Ygd2hhdCBpdCdzXG4gIC8vIGxpc3RlbmluZyB0by5cbiAgXy5lYWNoKGxpc3Rlbk1ldGhvZHMsIGZ1bmN0aW9uKGltcGxlbWVudGF0aW9uLCBtZXRob2QpIHtcbiAgICBFdmVudHNbbWV0aG9kXSA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvIHx8ICh0aGlzLl9saXN0ZW5pbmdUbyA9IHt9KTtcbiAgICAgIHZhciBpZCA9IG9iai5fbGlzdGVuSWQgfHwgKG9iai5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgICAgbGlzdGVuaW5nVG9baWRdID0gb2JqO1xuICAgICAgaWYgKCFjYWxsYmFjayAmJiB0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIGNhbGxiYWNrID0gdGhpcztcbiAgICAgIG9ialtpbXBsZW1lbnRhdGlvbl0obmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWxpYXNlcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIEV2ZW50cy5iaW5kICAgPSBFdmVudHMub247XG4gIEV2ZW50cy51bmJpbmQgPSBFdmVudHMub2ZmO1xuXG4gIC8vIEFsbG93IHRoZSBgQmFja2JvbmVgIG9iamVjdCB0byBzZXJ2ZSBhcyBhIGdsb2JhbCBldmVudCBidXMsIGZvciBmb2xrcyB3aG9cbiAgLy8gd2FudCBnbG9iYWwgXCJwdWJzdWJcIiBpbiBhIGNvbnZlbmllbnQgcGxhY2UuXG4gIF8uZXh0ZW5kKEJhY2tib25lLCBFdmVudHMpO1xuXG4gIC8vIEJhY2tib25lLk1vZGVsXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgKipNb2RlbHMqKiBhcmUgdGhlIGJhc2ljIGRhdGEgb2JqZWN0IGluIHRoZSBmcmFtZXdvcmsgLS1cbiAgLy8gZnJlcXVlbnRseSByZXByZXNlbnRpbmcgYSByb3cgaW4gYSB0YWJsZSBpbiBhIGRhdGFiYXNlIG9uIHlvdXIgc2VydmVyLlxuICAvLyBBIGRpc2NyZXRlIGNodW5rIG9mIGRhdGEgYW5kIGEgYnVuY2ggb2YgdXNlZnVsLCByZWxhdGVkIG1ldGhvZHMgZm9yXG4gIC8vIHBlcmZvcm1pbmcgY29tcHV0YXRpb25zIGFuZCB0cmFuc2Zvcm1hdGlvbnMgb24gdGhhdCBkYXRhLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlcy4gQSBjbGllbnQgaWQgKGBjaWRgKVxuICAvLyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBhbmQgYXNzaWduZWQgZm9yIHlvdS5cbiAgdmFyIE1vZGVsID0gQmFja2JvbmUuTW9kZWwgPSBmdW5jdGlvbihhdHRyaWJ1dGVzLCBvcHRpb25zKSB7XG4gICAgdmFyIGF0dHJzID0gYXR0cmlidXRlcyB8fCB7fTtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgnYycpO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChvcHRpb25zLmNvbGxlY3Rpb24pIHRoaXMuY29sbGVjdGlvbiA9IG9wdGlvbnMuY29sbGVjdGlvbjtcbiAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSB0aGlzLnBhcnNlKGF0dHJzLCBvcHRpb25zKSB8fCB7fTtcbiAgICBhdHRycyA9IF8uZGVmYXVsdHMoe30sIGF0dHJzLCBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSk7XG4gICAgdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEF0dGFjaCBhbGwgaW5oZXJpdGFibGUgbWV0aG9kcyB0byB0aGUgTW9kZWwgcHJvdG90eXBlLlxuICBfLmV4dGVuZChNb2RlbC5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gQSBoYXNoIG9mIGF0dHJpYnV0ZXMgd2hvc2UgY3VycmVudCBhbmQgcHJldmlvdXMgdmFsdWUgZGlmZmVyLlxuICAgIGNoYW5nZWQ6IG51bGwsXG5cbiAgICAvLyBUaGUgdmFsdWUgcmV0dXJuZWQgZHVyaW5nIHRoZSBsYXN0IGZhaWxlZCB2YWxpZGF0aW9uLlxuICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbCxcblxuICAgIC8vIFRoZSBkZWZhdWx0IG5hbWUgZm9yIHRoZSBKU09OIGBpZGAgYXR0cmlidXRlIGlzIGBcImlkXCJgLiBNb25nb0RCIGFuZFxuICAgIC8vIENvdWNoREIgdXNlcnMgbWF5IHdhbnQgdG8gc2V0IHRoaXMgdG8gYFwiX2lkXCJgLlxuICAgIGlkQXR0cmlidXRlOiAnaWQnLFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgbW9kZWwncyBgYXR0cmlidXRlc2Agb2JqZWN0LlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQgLS0gYnV0IG92ZXJyaWRlIHRoaXMgaWYgeW91IG5lZWRcbiAgICAvLyBjdXN0b20gc3luY2luZyBzZW1hbnRpY3MgZm9yICp0aGlzKiBwYXJ0aWN1bGFyIG1vZGVsLlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZ2V0OiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIEhUTUwtZXNjYXBlZCB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZXNjYXBlOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5lc2NhcGUodGhpcy5nZXQoYXR0cikpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRlIGNvbnRhaW5zIGEgdmFsdWUgdGhhdCBpcyBub3QgbnVsbFxuICAgIC8vIG9yIHVuZGVmaW5lZC5cbiAgICBoYXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChhdHRyKSAhPSBudWxsO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMgb24gdGhlIG9iamVjdCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gVGhpcyBpc1xuICAgIC8vIHRoZSBjb3JlIHByaW1pdGl2ZSBvcGVyYXRpb24gb2YgYSBtb2RlbCwgdXBkYXRpbmcgdGhlIGRhdGEgYW5kIG5vdGlmeWluZ1xuICAgIC8vIGFueW9uZSB3aG8gbmVlZHMgdG8ga25vdyBhYm91dCB0aGUgY2hhbmdlIGluIHN0YXRlLiBUaGUgaGVhcnQgb2YgdGhlIGJlYXN0LlxuICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRyLCBhdHRycywgdW5zZXQsIGNoYW5nZXMsIHNpbGVudCwgY2hhbmdpbmcsIHByZXYsIGN1cnJlbnQ7XG4gICAgICBpZiAoa2V5ID09IG51bGwpIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIC8vIFJ1biB2YWxpZGF0aW9uLlxuICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gRXh0cmFjdCBhdHRyaWJ1dGVzIGFuZCBvcHRpb25zLlxuICAgICAgdW5zZXQgICAgICAgICAgID0gb3B0aW9ucy51bnNldDtcbiAgICAgIHNpbGVudCAgICAgICAgICA9IG9wdGlvbnMuc2lsZW50O1xuICAgICAgY2hhbmdlcyAgICAgICAgID0gW107XG4gICAgICBjaGFuZ2luZyAgICAgICAgPSB0aGlzLl9jaGFuZ2luZztcbiAgICAgIHRoaXMuX2NoYW5naW5nICA9IHRydWU7XG5cbiAgICAgIGlmICghY2hhbmdpbmcpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzID0gXy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSB0aGlzLmF0dHJpYnV0ZXMsIHByZXYgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7XG5cbiAgICAgIC8vIENoZWNrIGZvciBjaGFuZ2VzIG9mIGBpZGAuXG4gICAgICBpZiAodGhpcy5pZEF0dHJpYnV0ZSBpbiBhdHRycykgdGhpcy5pZCA9IGF0dHJzW3RoaXMuaWRBdHRyaWJ1dGVdO1xuXG4gICAgICAvLyBGb3IgZWFjaCBgc2V0YCBhdHRyaWJ1dGUsIHVwZGF0ZSBvciBkZWxldGUgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICBmb3IgKGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgdmFsID0gYXR0cnNbYXR0cl07XG4gICAgICAgIGlmICghXy5pc0VxdWFsKGN1cnJlbnRbYXR0cl0sIHZhbCkpIGNoYW5nZXMucHVzaChhdHRyKTtcbiAgICAgICAgaWYgKCFfLmlzRXF1YWwocHJldlthdHRyXSwgdmFsKSkge1xuICAgICAgICAgIHRoaXMuY2hhbmdlZFthdHRyXSA9IHZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5jaGFuZ2VkW2F0dHJdO1xuICAgICAgICB9XG4gICAgICAgIHVuc2V0ID8gZGVsZXRlIGN1cnJlbnRbYXR0cl0gOiBjdXJyZW50W2F0dHJdID0gdmFsO1xuICAgICAgfVxuXG4gICAgICAvLyBUcmlnZ2VyIGFsbCByZWxldmFudCBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkgdGhpcy5fcGVuZGluZyA9IG9wdGlvbnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hhbmdlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZTonICsgY2hhbmdlc1tpXSwgdGhpcywgY3VycmVudFtjaGFuZ2VzW2ldXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gWW91IG1pZ2h0IGJlIHdvbmRlcmluZyB3aHkgdGhlcmUncyBhIGB3aGlsZWAgbG9vcCBoZXJlLiBDaGFuZ2VzIGNhblxuICAgICAgLy8gYmUgcmVjdXJzaXZlbHkgbmVzdGVkIHdpdGhpbiBgXCJjaGFuZ2VcImAgZXZlbnRzLlxuICAgICAgaWYgKGNoYW5naW5nKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLl9wZW5kaW5nKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMuX3BlbmRpbmc7XG4gICAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gYHVuc2V0YCBpcyBhIG5vb3BcbiAgICAvLyBpZiB0aGUgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3QuXG4gICAgdW5zZXQ6IGZ1bmN0aW9uKGF0dHIsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRyLCB2b2lkIDAsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIENsZWFyIGFsbCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC5cbiAgICBjbGVhcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSBhdHRyc1trZXldID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHJzLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIG1vZGVsIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBhbiBhdHRyaWJ1dGUgbmFtZSwgZGV0ZXJtaW5lIGlmIHRoYXQgYXR0cmlidXRlIGhhcyBjaGFuZ2VkLlxuICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwpIHJldHVybiAhXy5pc0VtcHR5KHRoaXMuY2hhbmdlZCk7XG4gICAgICByZXR1cm4gXy5oYXModGhpcy5jaGFuZ2VkLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCwgb3JcbiAgICAvLyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlZCBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIGRldGVybWluaW5nIHdoYXRcbiAgICAvLyBwYXJ0cyBvZiBhIHZpZXcgbmVlZCB0byBiZSB1cGRhdGVkIGFuZC9vciB3aGF0IGF0dHJpYnV0ZXMgbmVlZCB0byBiZVxuICAgIC8vIHBlcnNpc3RlZCB0byB0aGUgc2VydmVyLiBVbnNldCBhdHRyaWJ1dGVzIHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAgICAvLyBZb3UgY2FuIGFsc28gcGFzcyBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0byBkaWZmIGFnYWluc3QgdGhlIG1vZGVsLFxuICAgIC8vIGRldGVybWluaW5nIGlmIHRoZXJlICp3b3VsZCBiZSogYSBjaGFuZ2UuXG4gICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGRpZmYpIHtcbiAgICAgIGlmICghZGlmZikgcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpID8gXy5jbG9uZSh0aGlzLmNoYW5nZWQpIDogZmFsc2U7XG4gICAgICB2YXIgdmFsLCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICB2YXIgb2xkID0gdGhpcy5fY2hhbmdpbmcgPyB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgOiB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKHZhciBhdHRyIGluIGRpZmYpIHtcbiAgICAgICAgaWYgKF8uaXNFcXVhbChvbGRbYXR0cl0sICh2YWwgPSBkaWZmW2F0dHJdKSkpIGNvbnRpbnVlO1xuICAgICAgICAoY2hhbmdlZCB8fCAoY2hhbmdlZCA9IHt9KSlbYXR0cl0gPSB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwcmV2aW91cyB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUsIHJlY29yZGVkIGF0IHRoZSB0aW1lIHRoZSBsYXN0XG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50IHdhcyBmaXJlZC5cbiAgICBwcmV2aW91czogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCB8fCAhdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIGF0IHRoZSB0aW1lIG9mIHRoZSBwcmV2aW91c1xuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIG1vZGVsIGZyb20gdGhlIHNlcnZlci4gSWYgdGhlIHNlcnZlcidzIHJlcHJlc2VudGF0aW9uIG9mIHRoZVxuICAgIC8vIG1vZGVsIGRpZmZlcnMgZnJvbSBpdHMgY3VycmVudCBhdHRyaWJ1dGVzLCB0aGV5IHdpbGwgYmUgb3ZlcnJpZGRlbixcbiAgICAvLyB0cmlnZ2VyaW5nIGEgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBpZiAoIW1vZGVsLnNldChtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKSwgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzLCBhbmQgc3luYyB0aGUgbW9kZWwgdG8gdGhlIHNlcnZlci5cbiAgICAvLyBJZiB0aGUgc2VydmVyIHJldHVybnMgYW4gYXR0cmlidXRlcyBoYXNoIHRoYXQgZGlmZmVycywgdGhlIG1vZGVsJ3NcbiAgICAvLyBzdGF0ZSB3aWxsIGJlIGBzZXRgIGFnYWluLlxuICAgIHNhdmU6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cnMsIG1ldGhvZCwgeGhyLCBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgaWYgKGtleSA9PSBudWxsIHx8IHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7dmFsaWRhdGU6IHRydWV9LCBvcHRpb25zKTtcblxuICAgICAgLy8gSWYgd2UncmUgbm90IHdhaXRpbmcgYW5kIGF0dHJpYnV0ZXMgZXhpc3QsIHNhdmUgYWN0cyBhc1xuICAgICAgLy8gYHNldChhdHRyKS5zYXZlKG51bGwsIG9wdHMpYCB3aXRoIHZhbGlkYXRpb24uIE90aGVyd2lzZSwgY2hlY2sgaWZcbiAgICAgIC8vIHRoZSBtb2RlbCB3aWxsIGJlIHZhbGlkIHdoZW4gdGhlIGF0dHJpYnV0ZXMsIGlmIGFueSwgYXJlIHNldC5cbiAgICAgIGlmIChhdHRycyAmJiAhb3B0aW9ucy53YWl0KSB7XG4gICAgICAgIGlmICghdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGVtcG9yYXJ5IGF0dHJpYnV0ZXMgaWYgYHt3YWl0OiB0cnVlfWAuXG4gICAgICBpZiAoYXR0cnMgJiYgb3B0aW9ucy53YWl0KSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IF8uZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzLCBhdHRycyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFmdGVyIGEgc3VjY2Vzc2Z1bCBzZXJ2ZXItc2lkZSBzYXZlLCB0aGUgY2xpZW50IGlzIChvcHRpb25hbGx5KVxuICAgICAgLy8gdXBkYXRlZCB3aXRoIHRoZSBzZXJ2ZXItc2lkZSBzdGF0ZS5cbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAvLyBFbnN1cmUgYXR0cmlidXRlcyBhcmUgcmVzdG9yZWQgZHVyaW5nIHN5bmNocm9ub3VzIHNhdmVzLlxuICAgICAgICBtb2RlbC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQpIHNlcnZlckF0dHJzID0gXy5leHRlbmQoYXR0cnMgfHwge30sIHNlcnZlckF0dHJzKTtcbiAgICAgICAgaWYgKF8uaXNPYmplY3Qoc2VydmVyQXR0cnMpICYmICFtb2RlbC5zZXQoc2VydmVyQXR0cnMsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIG1ldGhvZCA9IHRoaXMuaXNOZXcoKSA/ICdjcmVhdGUnIDogKG9wdGlvbnMucGF0Y2ggPyAncGF0Y2gnIDogJ3VwZGF0ZScpO1xuICAgICAgaWYgKG1ldGhvZCA9PT0gJ3BhdGNoJykgb3B0aW9ucy5hdHRycyA9IGF0dHJzO1xuICAgICAgeGhyID0gdGhpcy5zeW5jKG1ldGhvZCwgdGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFJlc3RvcmUgYXR0cmlidXRlcy5cbiAgICAgIGlmIChhdHRycyAmJiBvcHRpb25zLndhaXQpIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG5cbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlc3Ryb3kgdGhpcyBtb2RlbCBvbiB0aGUgc2VydmVyIGlmIGl0IHdhcyBhbHJlYWR5IHBlcnNpc3RlZC5cbiAgICAvLyBPcHRpbWlzdGljYWxseSByZW1vdmVzIHRoZSBtb2RlbCBmcm9tIGl0cyBjb2xsZWN0aW9uLCBpZiBpdCBoYXMgb25lLlxuICAgIC8vIElmIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIHdhaXRzIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQgYmVmb3JlIHJlbW92YWwuXG4gICAgZGVzdHJveTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cbiAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ2Rlc3Ryb3knLCBtb2RlbCwgbW9kZWwuY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQgfHwgbW9kZWwuaXNOZXcoKSkgZGVzdHJveSgpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghbW9kZWwuaXNOZXcoKSkgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHtcbiAgICAgICAgb3B0aW9ucy5zdWNjZXNzKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblxuICAgICAgdmFyIHhociA9IHRoaXMuc3luYygnZGVsZXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW9wdGlvbnMud2FpdCkgZGVzdHJveSgpO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9LFxuXG4gICAgLy8gRGVmYXVsdCBVUkwgZm9yIHRoZSBtb2RlbCdzIHJlcHJlc2VudGF0aW9uIG9uIHRoZSBzZXJ2ZXIgLS0gaWYgeW91J3JlXG4gICAgLy8gdXNpbmcgQmFja2JvbmUncyByZXN0ZnVsIG1ldGhvZHMsIG92ZXJyaWRlIHRoaXMgdG8gY2hhbmdlIHRoZSBlbmRwb2ludFxuICAgIC8vIHRoYXQgd2lsbCBiZSBjYWxsZWQuXG4gICAgdXJsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYXNlID1cbiAgICAgICAgXy5yZXN1bHQodGhpcywgJ3VybFJvb3QnKSB8fFxuICAgICAgICBfLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sICd1cmwnKSB8fFxuICAgICAgICB1cmxFcnJvcigpO1xuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkgcmV0dXJuIGJhc2U7XG4gICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC8oW15cXC9dKSQvLCAnJDEvJykgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5pZCk7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gdGhlIGhhc2ggb2YgYXR0cmlidXRlcyB0byBiZSBgc2V0YCBvblxuICAgIC8vIHRoZSBtb2RlbC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIHRoZSByZXNwb25zZSBhbG9uZy5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIGlkZW50aWNhbCBhdHRyaWJ1dGVzIHRvIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBBIG1vZGVsIGlzIG5ldyBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBzYXZlZCB0byB0aGUgc2VydmVyLCBhbmQgbGFja3MgYW4gaWQuXG4gICAgaXNOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmhhcyh0aGlzLmlkQXR0cmlidXRlKTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBpbiBhIHZhbGlkIHN0YXRlLlxuICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZSh7fSwgXy5leHRlbmQob3B0aW9ucyB8fCB7fSwgeyB2YWxpZGF0ZTogdHJ1ZSB9KSk7XG4gICAgfSxcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluc3QgdGhlIG5leHQgY29tcGxldGUgc2V0IG9mIG1vZGVsIGF0dHJpYnV0ZXMsXG4gICAgLy8gcmV0dXJuaW5nIGB0cnVlYCBpZiBhbGwgaXMgd2VsbC4gT3RoZXJ3aXNlLCBmaXJlIGFuIGBcImludmFsaWRcImAgZXZlbnQuXG4gICAgX3ZhbGlkYXRlOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25zLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGF0dHJzID0gXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSB8fCBudWxsO1xuICAgICAgaWYgKCFlcnJvcikgcmV0dXJuIHRydWU7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBlcnJvciwgXy5leHRlbmQob3B0aW9ucywge3ZhbGlkYXRpb25FcnJvcjogZXJyb3J9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbC5cbiAgdmFyIG1vZGVsTWV0aG9kcyA9IFsna2V5cycsICd2YWx1ZXMnLCAncGFpcnMnLCAnaW52ZXJ0JywgJ3BpY2snLCAnb21pdCddO1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYE1vZGVsI2F0dHJpYnV0ZXNgLlxuICBfLmVhY2gobW9kZWxNZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBNb2RlbC5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBhcmdzLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybiBfW21ldGhvZF0uYXBwbHkoXywgYXJncyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuQ29sbGVjdGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSWYgbW9kZWxzIHRlbmQgdG8gcmVwcmVzZW50IGEgc2luZ2xlIHJvdyBvZiBkYXRhLCBhIEJhY2tib25lIENvbGxlY3Rpb24gaXNcbiAgLy8gbW9yZSBhbmFsYWdvdXMgdG8gYSB0YWJsZSBmdWxsIG9mIGRhdGEgLi4uIG9yIGEgc21hbGwgc2xpY2Ugb3IgcGFnZSBvZiB0aGF0XG4gIC8vIHRhYmxlLCBvciBhIGNvbGxlY3Rpb24gb2Ygcm93cyB0aGF0IGJlbG9uZyB0b2dldGhlciBmb3IgYSBwYXJ0aWN1bGFyIHJlYXNvblxuICAvLyAtLSBhbGwgb2YgdGhlIG1lc3NhZ2VzIGluIHRoaXMgcGFydGljdWxhciBmb2xkZXIsIGFsbCBvZiB0aGUgZG9jdW1lbnRzXG4gIC8vIGJlbG9uZ2luZyB0byB0aGlzIHBhcnRpY3VsYXIgYXV0aG9yLCBhbmQgc28gb24uIENvbGxlY3Rpb25zIG1haW50YWluXG4gIC8vIGluZGV4ZXMgb2YgdGhlaXIgbW9kZWxzLCBib3RoIGluIG9yZGVyLCBhbmQgZm9yIGxvb2t1cCBieSBgaWRgLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyAqKkNvbGxlY3Rpb24qKiwgcGVyaGFwcyB0byBjb250YWluIGEgc3BlY2lmaWMgdHlwZSBvZiBgbW9kZWxgLlxuICAvLyBJZiBhIGBjb21wYXJhdG9yYCBpcyBzcGVjaWZpZWQsIHRoZSBDb2xsZWN0aW9uIHdpbGwgbWFpbnRhaW5cbiAgLy8gaXRzIG1vZGVscyBpbiBzb3J0IG9yZGVyLCBhcyB0aGV5J3JlIGFkZGVkIGFuZCByZW1vdmVkLlxuICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24gPSBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLm1vZGVsKSB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICBpZiAob3B0aW9ucy5jb21wYXJhdG9yICE9PSB2b2lkIDApIHRoaXMuY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvcjtcbiAgICB0aGlzLl9yZXNldCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChtb2RlbHMpIHRoaXMucmVzZXQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuICB9O1xuXG4gIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbGxlY3Rpb24jc2V0YC5cbiAgdmFyIHNldE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IHRydWUsIG1lcmdlOiB0cnVlfTtcbiAgdmFyIGFkZE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IGZhbHNlfTtcblxuICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuICAgIG1vZGVsOiBNb2RlbCxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgQ29sbGVjdGlvbiBpcyBhbiBhcnJheSBvZiB0aGVcbiAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obW9kZWwpeyByZXR1cm4gbW9kZWwudG9KU09OKG9wdGlvbnMpOyB9KTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQuXG4gICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCwgb3IgbGlzdCBvZiBtb2RlbHMgdG8gdGhlIHNldC5cbiAgICBhZGQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KG1vZGVscywgXy5leHRlbmQoe21lcmdlOiBmYWxzZX0sIG9wdGlvbnMsIGFkZE9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwsIG9yIGEgbGlzdCBvZiBtb2RlbHMgZnJvbSB0aGUgc2V0LlxuICAgIHJlbW92ZTogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogXy5jbG9uZShtb2RlbHMpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHZhciBpLCBsLCBpbmRleCwgbW9kZWw7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gbW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuZ2V0KG1vZGVsc1tpXSk7XG4gICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5pZF07XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG4gICAgICAgIGluZGV4ID0gdGhpcy5pbmRleE9mKG1vZGVsKTtcbiAgICAgICAgdGhpcy5tb2RlbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdyZW1vdmUnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gVXBkYXRlIGEgY29sbGVjdGlvbiBieSBgc2V0YC1pbmcgYSBuZXcgbGlzdCBvZiBtb2RlbHMsIGFkZGluZyBuZXcgb25lcyxcbiAgICAvLyByZW1vdmluZyBtb2RlbHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQsIGFuZCBtZXJnaW5nIG1vZGVscyB0aGF0XG4gICAgLy8gYWxyZWFkeSBleGlzdCBpbiB0aGUgY29sbGVjdGlvbiwgYXMgbmVjZXNzYXJ5LiBTaW1pbGFyIHRvICoqTW9kZWwjc2V0KiosXG4gICAgLy8gdGhlIGNvcmUgb3BlcmF0aW9uIGZvciB1cGRhdGluZyB0aGUgZGF0YSBjb250YWluZWQgYnkgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBfLmRlZmF1bHRzKHt9LCBvcHRpb25zLCBzZXRPcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBtb2RlbHMgPSB0aGlzLnBhcnNlKG1vZGVscywgb3B0aW9ucyk7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IChtb2RlbHMgPyBbbW9kZWxzXSA6IFtdKSA6IF8uY2xvbmUobW9kZWxzKTtcbiAgICAgIHZhciBpLCBsLCBpZCwgbW9kZWwsIGF0dHJzLCBleGlzdGluZywgc29ydDtcbiAgICAgIHZhciBhdCA9IG9wdGlvbnMuYXQ7XG4gICAgICB2YXIgdGFyZ2V0TW9kZWwgPSB0aGlzLm1vZGVsO1xuICAgICAgdmFyIHNvcnRhYmxlID0gdGhpcy5jb21wYXJhdG9yICYmIChhdCA9PSBudWxsKSAmJiBvcHRpb25zLnNvcnQgIT09IGZhbHNlO1xuICAgICAgdmFyIHNvcnRBdHRyID0gXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbDtcbiAgICAgIHZhciB0b0FkZCA9IFtdLCB0b1JlbW92ZSA9IFtdLCBtb2RlbE1hcCA9IHt9O1xuICAgICAgdmFyIGFkZCA9IG9wdGlvbnMuYWRkLCBtZXJnZSA9IG9wdGlvbnMubWVyZ2UsIHJlbW92ZSA9IG9wdGlvbnMucmVtb3ZlO1xuICAgICAgdmFyIG9yZGVyID0gIXNvcnRhYmxlICYmIGFkZCAmJiByZW1vdmUgPyBbXSA6IGZhbHNlO1xuXG4gICAgICAvLyBUdXJuIGJhcmUgb2JqZWN0cyBpbnRvIG1vZGVsIHJlZmVyZW5jZXMsIGFuZCBwcmV2ZW50IGludmFsaWQgbW9kZWxzXG4gICAgICAvLyBmcm9tIGJlaW5nIGFkZGVkLlxuICAgICAgZm9yIChpID0gMCwgbCA9IG1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgYXR0cnMgPSBtb2RlbHNbaV0gfHwge307XG4gICAgICAgIGlmIChhdHRycyBpbnN0YW5jZW9mIE1vZGVsKSB7XG4gICAgICAgICAgaWQgPSBtb2RlbCA9IGF0dHJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gYXR0cnNbdGFyZ2V0TW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlIHx8ICdpZCddO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYSBkdXBsaWNhdGUgaXMgZm91bmQsIHByZXZlbnQgaXQgZnJvbSBiZWluZyBhZGRlZCBhbmRcbiAgICAgICAgLy8gb3B0aW9uYWxseSBtZXJnZSBpdCBpbnRvIHRoZSBleGlzdGluZyBtb2RlbC5cbiAgICAgICAgaWYgKGV4aXN0aW5nID0gdGhpcy5nZXQoaWQpKSB7XG4gICAgICAgICAgaWYgKHJlbW92ZSkgbW9kZWxNYXBbZXhpc3RpbmcuY2lkXSA9IHRydWU7XG4gICAgICAgICAgaWYgKG1lcmdlKSB7XG4gICAgICAgICAgICBhdHRycyA9IGF0dHJzID09PSBtb2RlbCA/IG1vZGVsLmF0dHJpYnV0ZXMgOiBhdHRycztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBhdHRycyA9IGV4aXN0aW5nLnBhcnNlKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnNldChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoc29ydGFibGUgJiYgIXNvcnQgJiYgZXhpc3RpbmcuaGFzQ2hhbmdlZChzb3J0QXR0cikpIHNvcnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RlbHNbaV0gPSBleGlzdGluZztcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbmV3LCB2YWxpZCBtb2RlbCwgcHVzaCBpdCB0byB0aGUgYHRvQWRkYCBsaXN0LlxuICAgICAgICB9IGVsc2UgaWYgKGFkZCkge1xuICAgICAgICAgIG1vZGVsID0gbW9kZWxzW2ldID0gdGhpcy5fcHJlcGFyZU1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcbiAgICAgICAgICB0b0FkZC5wdXNoKG1vZGVsKTtcbiAgICAgICAgICB0aGlzLl9hZGRSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGFkZCBtdWx0aXBsZSBtb2RlbHMgd2l0aCB0aGUgc2FtZSBgaWRgLlxuICAgICAgICBtb2RlbCA9IGV4aXN0aW5nIHx8IG1vZGVsO1xuICAgICAgICBpZiAob3JkZXIgJiYgKG1vZGVsLmlzTmV3KCkgfHwgIW1vZGVsTWFwW21vZGVsLmlkXSkpIG9yZGVyLnB1c2gobW9kZWwpO1xuICAgICAgICBtb2RlbE1hcFttb2RlbC5pZF0gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgbm9uZXhpc3RlbnQgbW9kZWxzIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICBpZiAoIW1vZGVsTWFwWyhtb2RlbCA9IHRoaXMubW9kZWxzW2ldKS5jaWRdKSB0b1JlbW92ZS5wdXNoKG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoKSB0aGlzLnJlbW92ZSh0b1JlbW92ZSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZSBpZiBzb3J0aW5nIGlzIG5lZWRlZCwgdXBkYXRlIGBsZW5ndGhgIGFuZCBzcGxpY2UgaW4gbmV3IG1vZGVscy5cbiAgICAgIGlmICh0b0FkZC5sZW5ndGggfHwgKG9yZGVyICYmIG9yZGVyLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHNvcnRhYmxlKSBzb3J0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggKz0gdG9BZGQubGVuZ3RoO1xuICAgICAgICBpZiAoYXQgIT0gbnVsbCkge1xuICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0b0FkZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShhdCArIGksIDAsIHRvQWRkW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG9yZGVyKSB0aGlzLm1vZGVscy5sZW5ndGggPSAwO1xuICAgICAgICAgIHZhciBvcmRlcmVkTW9kZWxzID0gb3JkZXIgfHwgdG9BZGQ7XG4gICAgICAgICAgZm9yIChpID0gMCwgbCA9IG9yZGVyZWRNb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5wdXNoKG9yZGVyZWRNb2RlbHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTaWxlbnRseSBzb3J0IHRoZSBjb2xsZWN0aW9uIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHNvcnQpIHRoaXMuc29ydCh7c2lsZW50OiB0cnVlfSk7XG5cbiAgICAgIC8vIFVubGVzcyBzaWxlbmNlZCwgaXQncyB0aW1lIHRvIGZpcmUgYWxsIGFwcHJvcHJpYXRlIGFkZC9zb3J0IGV2ZW50cy5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRvQWRkLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIChtb2RlbCA9IHRvQWRkW2ldKS50cmlnZ2VyKCdhZGQnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnQgfHwgKG9yZGVyICYmIG9yZGVyLmxlbmd0aCkpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIGFkZGVkIChvciBtZXJnZWQpIG1vZGVsIChvciBtb2RlbHMpLlxuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gbW9kZWxzWzBdIDogbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBXaGVuIHlvdSBoYXZlIG1vcmUgaXRlbXMgdGhhbiB5b3Ugd2FudCB0byBhZGQgb3IgcmVtb3ZlIGluZGl2aWR1YWxseSxcbiAgICAvLyB5b3UgY2FuIHJlc2V0IHRoZSBlbnRpcmUgc2V0IHdpdGggYSBuZXcgbGlzdCBvZiBtb2RlbHMsIHdpdGhvdXQgZmlyaW5nXG4gICAgLy8gYW55IGdyYW51bGFyIGBhZGRgIG9yIGByZW1vdmVgIGV2ZW50cy4gRmlyZXMgYHJlc2V0YCB3aGVuIGZpbmlzaGVkLlxuICAgIC8vIFVzZWZ1bCBmb3IgYnVsayBvcGVyYXRpb25zIGFuZCBvcHRpbWl6YXRpb25zLlxuICAgIHJlc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbaV0sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5wcmV2aW91c01vZGVscyA9IHRoaXMubW9kZWxzO1xuICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgIG1vZGVscyA9IHRoaXMuYWRkKG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcigncmVzZXQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgcHVzaDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiB0aGlzLmxlbmd0aH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBvcDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgICAgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHVuc2hpZnQ6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogMH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHNoaWZ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzLmF0KDApO1xuICAgICAgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBTbGljZSBvdXQgYSBzdWItYXJyYXkgb2YgbW9kZWxzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWNlLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYSBtb2RlbCBmcm9tIHRoZSBzZXQgYnkgaWQuXG4gICAgZ2V0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLl9ieUlkW29ial0gfHwgdGhpcy5fYnlJZFtvYmouaWRdIHx8IHRoaXMuX2J5SWRbb2JqLmNpZF07XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbW9kZWwgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgIGF0OiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMubW9kZWxzW2luZGV4XTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIG1vZGVscyB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzIG9mXG4gICAgLy8gYGZpbHRlcmAuXG4gICAgd2hlcmU6IGZ1bmN0aW9uKGF0dHJzLCBmaXJzdCkge1xuICAgICAgaWYgKF8uaXNFbXB0eShhdHRycykpIHJldHVybiBmaXJzdCA/IHZvaWQgMCA6IFtdO1xuICAgICAgcmV0dXJuIHRoaXNbZmlyc3QgPyAnZmluZCcgOiAnZmlsdGVyJ10oZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGF0dHJzKSB7XG4gICAgICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG1vZGVsLmdldChrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIHRoZSBmaXJzdCBtb2RlbCB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzXG4gICAgLy8gb2YgYGZpbmRgLlxuICAgIGZpbmRXaGVyZTogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiB0aGlzLndoZXJlKGF0dHJzLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gRm9yY2UgdGhlIGNvbGxlY3Rpb24gdG8gcmUtc29ydCBpdHNlbGYuIFlvdSBkb24ndCBuZWVkIHRvIGNhbGwgdGhpcyB1bmRlclxuICAgIC8vIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBhcyB0aGUgc2V0IHdpbGwgbWFpbnRhaW4gc29ydCBvcmRlciBhcyBlYWNoIGl0ZW1cbiAgICAvLyBpcyBhZGRlZC5cbiAgICBzb3J0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcGFyYXRvcikgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvcicpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgLy8gUnVuIHNvcnQgYmFzZWQgb24gdHlwZSBvZiBgY29tcGFyYXRvcmAuXG4gICAgICBpZiAoXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpIHx8IHRoaXMuY29tcGFyYXRvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlbHMuc29ydChfLmJpbmQodGhpcy5jb21wYXJhdG9yLCB0aGlzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFBsdWNrIGFuIGF0dHJpYnV0ZSBmcm9tIGVhY2ggbW9kZWwgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgcGx1Y2s6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiBfLmludm9rZSh0aGlzLm1vZGVscywgJ2dldCcsIGF0dHIpO1xuICAgIH0sXG5cbiAgICAvLyBGZXRjaCB0aGUgZGVmYXVsdCBzZXQgb2YgbW9kZWxzIGZvciB0aGlzIGNvbGxlY3Rpb24sIHJlc2V0dGluZyB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIHdoZW4gdGhleSBhcnJpdmUuIElmIGByZXNldDogdHJ1ZWAgaXMgcGFzc2VkLCB0aGUgcmVzcG9uc2VcbiAgICAvLyBkYXRhIHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGByZXNldGAgbWV0aG9kIGluc3RlYWQgb2YgYHNldGAuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG4gICAgICAgIGNvbGxlY3Rpb25bbWV0aG9kXShyZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MoY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGNvbGxlY3Rpb24udHJpZ2dlcignc3luYycsIGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIGEgbW9kZWwgaW4gdGhpcyBjb2xsZWN0aW9uLiBBZGQgdGhlIG1vZGVsIHRvIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24gaW1tZWRpYXRlbHksIHVubGVzcyBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCBpbiB3aGljaCBjYXNlIHdlXG4gICAgLy8gd2FpdCBmb3IgdGhlIHNlcnZlciB0byBhZ3JlZS5cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmICghKG1vZGVsID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghb3B0aW9ucy53YWl0KSB0aGlzLmFkZChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKG1vZGVsLCByZXNwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQpIGNvbGxlY3Rpb24uYWRkKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIG1vZGVsLnNhdmUobnVsbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gYSBsaXN0IG9mIG1vZGVscyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgaXQgdGhyb3VnaC5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uIHdpdGggYW4gaWRlbnRpY2FsIGxpc3Qgb2YgbW9kZWxzIGFzIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscyk7XG4gICAgfSxcblxuICAgIC8vIFByaXZhdGUgbWV0aG9kIHRvIHJlc2V0IGFsbCBpbnRlcm5hbCBzdGF0ZS4gQ2FsbGVkIHdoZW4gdGhlIGNvbGxlY3Rpb25cbiAgICAvLyBpcyBmaXJzdCBpbml0aWFsaXplZCBvciByZXNldC5cbiAgICBfcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5tb2RlbHMgPSBbXTtcbiAgICAgIHRoaXMuX2J5SWQgID0ge307XG4gICAgfSxcblxuICAgIC8vIFByZXBhcmUgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgKG9yIG90aGVyIG1vZGVsKSB0byBiZSBhZGRlZCB0byB0aGlzXG4gICAgLy8gY29sbGVjdGlvbi5cbiAgICBfcHJlcGFyZU1vZGVsOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKGF0dHJzIGluc3RhbmNlb2YgTW9kZWwpIHJldHVybiBhdHRycztcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgb3B0aW9ucy5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBtb2RlbCA9IG5ldyB0aGlzLm1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgIGlmICghbW9kZWwudmFsaWRhdGlvbkVycm9yKSByZXR1cm4gbW9kZWw7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBtb2RlbC52YWxpZGF0aW9uRXJyb3IsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gY3JlYXRlIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfYWRkUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fYnlJZFttb2RlbC5jaWRdID0gbW9kZWw7XG4gICAgICBpZiAobW9kZWwuaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFttb2RlbC5pZF0gPSBtb2RlbDtcbiAgICAgIGlmICghbW9kZWwuY29sbGVjdGlvbikgbW9kZWwuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBtb2RlbC5vbignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldmVyIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgaWYgKHRoaXMgPT09IG1vZGVsLmNvbGxlY3Rpb24pIGRlbGV0ZSBtb2RlbC5jb2xsZWN0aW9uO1xuICAgICAgbW9kZWwub2ZmKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBtb2RlbCBpbiB0aGUgc2V0IGZpcmVzIGFuIGV2ZW50LlxuICAgIC8vIFNldHMgbmVlZCB0byB1cGRhdGUgdGhlaXIgaW5kZXhlcyB3aGVuIG1vZGVscyBjaGFuZ2UgaWRzLiBBbGwgb3RoZXJcbiAgICAvLyBldmVudHMgc2ltcGx5IHByb3h5IHRocm91Z2guIFwiYWRkXCIgYW5kIFwicmVtb3ZlXCIgZXZlbnRzIHRoYXQgb3JpZ2luYXRlXG4gICAgLy8gaW4gb3RoZXIgY29sbGVjdGlvbnMgYXJlIGlnbm9yZWQuXG4gICAgX29uTW9kZWxFdmVudDogZnVuY3Rpb24oZXZlbnQsIG1vZGVsLCBjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICBpZiAoKGV2ZW50ID09PSAnYWRkJyB8fCBldmVudCA9PT0gJ3JlbW92ZScpICYmIGNvbGxlY3Rpb24gIT09IHRoaXMpIHJldHVybjtcbiAgICAgIGlmIChldmVudCA9PT0gJ2Rlc3Ryb3knKSB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAobW9kZWwgJiYgZXZlbnQgPT09ICdjaGFuZ2U6JyArIG1vZGVsLmlkQXR0cmlidXRlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLnByZXZpb3VzKG1vZGVsLmlkQXR0cmlidXRlKV07XG4gICAgICAgIGlmIChtb2RlbC5pZCAhPSBudWxsKSB0aGlzLl9ieUlkW21vZGVsLmlkXSA9IG1vZGVsO1xuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBDb2xsZWN0aW9uLlxuICAvLyA5MCUgb2YgdGhlIGNvcmUgdXNlZnVsbmVzcyBvZiBCYWNrYm9uZSBDb2xsZWN0aW9ucyBpcyBhY3R1YWxseSBpbXBsZW1lbnRlZFxuICAvLyByaWdodCBoZXJlOlxuICB2YXIgbWV0aG9kcyA9IFsnZm9yRWFjaCcsICdlYWNoJywgJ21hcCcsICdjb2xsZWN0JywgJ3JlZHVjZScsICdmb2xkbCcsXG4gICAgJ2luamVjdCcsICdyZWR1Y2VSaWdodCcsICdmb2xkcicsICdmaW5kJywgJ2RldGVjdCcsICdmaWx0ZXInLCAnc2VsZWN0JyxcbiAgICAncmVqZWN0JywgJ2V2ZXJ5JywgJ2FsbCcsICdzb21lJywgJ2FueScsICdpbmNsdWRlJywgJ2NvbnRhaW5zJywgJ2ludm9rZScsXG4gICAgJ21heCcsICdtaW4nLCAndG9BcnJheScsICdzaXplJywgJ2ZpcnN0JywgJ2hlYWQnLCAndGFrZScsICdpbml0aWFsJywgJ3Jlc3QnLFxuICAgICd0YWlsJywgJ2Ryb3AnLCAnbGFzdCcsICd3aXRob3V0JywgJ2RpZmZlcmVuY2UnLCAnaW5kZXhPZicsICdzaHVmZmxlJyxcbiAgICAnbGFzdEluZGV4T2YnLCAnaXNFbXB0eScsICdjaGFpbicsICdzYW1wbGUnXTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBDb2xsZWN0aW9uI21vZGVsc2AuXG4gIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzLm1vZGVscyk7XG4gICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHRha2UgYSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LlxuICB2YXIgYXR0cmlidXRlTWV0aG9kcyA9IFsnZ3JvdXBCeScsICdjb3VudEJ5JywgJ3NvcnRCeScsICdpbmRleEJ5J107XG5cbiAgLy8gVXNlIGF0dHJpYnV0ZXMgaW5zdGVhZCBvZiBwcm9wZXJ0aWVzLlxuICBfLmVhY2goYXR0cmlidXRlTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUgOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gbW9kZWwuZ2V0KHZhbHVlKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXMubW9kZWxzLCBpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuVmlld1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgVmlld3MgYXJlIGFsbW9zdCBtb3JlIGNvbnZlbnRpb24gdGhhbiB0aGV5IGFyZSBhY3R1YWwgY29kZS4gQSBWaWV3XG4gIC8vIGlzIHNpbXBseSBhIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIGxvZ2ljYWwgY2h1bmsgb2YgVUkgaW4gdGhlXG4gIC8vIERPTS4gVGhpcyBtaWdodCBiZSBhIHNpbmdsZSBpdGVtLCBhbiBlbnRpcmUgbGlzdCwgYSBzaWRlYmFyIG9yIHBhbmVsLCBvclxuICAvLyBldmVuIHRoZSBzdXJyb3VuZGluZyBmcmFtZSB3aGljaCB3cmFwcyB5b3VyIHdob2xlIGFwcC4gRGVmaW5pbmcgYSBjaHVuayBvZlxuICAvLyBVSSBhcyBhICoqVmlldyoqIGFsbG93cyB5b3UgdG8gZGVmaW5lIHlvdXIgRE9NIGV2ZW50cyBkZWNsYXJhdGl2ZWx5LCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byB3b3JyeSBhYm91dCByZW5kZXIgb3JkZXIgLi4uIGFuZCBtYWtlcyBpdCBlYXN5IGZvciB0aGUgdmlldyB0b1xuICAvLyByZWFjdCB0byBzcGVjaWZpYyBjaGFuZ2VzIGluIHRoZSBzdGF0ZSBvZiB5b3VyIG1vZGVscy5cblxuICAvLyBDcmVhdGluZyBhIEJhY2tib25lLlZpZXcgY3JlYXRlcyBpdHMgaW5pdGlhbCBlbGVtZW50IG91dHNpZGUgb2YgdGhlIERPTSxcbiAgLy8gaWYgYW4gZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgcHJvdmlkZWQuLi5cbiAgdmFyIFZpZXcgPSBCYWNrYm9uZS5WaWV3ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgndmlldycpO1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIHZpZXdPcHRpb25zKSk7XG4gICAgdGhpcy5fZW5zdXJlRWxlbWVudCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVnZXggdG8gc3BsaXQga2V5cyBmb3IgYGRlbGVnYXRlYC5cbiAgdmFyIGRlbGVnYXRlRXZlbnRTcGxpdHRlciA9IC9eKFxcUyspXFxzKiguKikkLztcblxuICAvLyBMaXN0IG9mIHZpZXcgb3B0aW9ucyB0byBiZSBtZXJnZWQgYXMgcHJvcGVydGllcy5cbiAgdmFyIHZpZXdPcHRpb25zID0gWydtb2RlbCcsICdjb2xsZWN0aW9uJywgJ2VsJywgJ2lkJywgJ2F0dHJpYnV0ZXMnLCAnY2xhc3NOYW1lJywgJ3RhZ05hbWUnLCAnZXZlbnRzJ107XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlZpZXcqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChWaWV3LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBgdGFnTmFtZWAgb2YgYSBWaWV3J3MgZWxlbWVudCBpcyBgXCJkaXZcImAuXG4gICAgdGFnTmFtZTogJ2RpdicsXG5cbiAgICAvLyBqUXVlcnkgZGVsZWdhdGUgZm9yIGVsZW1lbnQgbG9va3VwLCBzY29wZWQgdG8gRE9NIGVsZW1lbnRzIHdpdGhpbiB0aGVcbiAgICAvLyBjdXJyZW50IHZpZXcuIFRoaXMgc2hvdWxkIGJlIHByZWZlcnJlZCB0byBnbG9iYWwgbG9va3VwcyB3aGVyZSBwb3NzaWJsZS5cbiAgICAkOiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMuJGVsLmZpbmQoc2VsZWN0b3IpO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyAqKnJlbmRlcioqIGlzIHRoZSBjb3JlIGZ1bmN0aW9uIHRoYXQgeW91ciB2aWV3IHNob3VsZCBvdmVycmlkZSwgaW4gb3JkZXJcbiAgICAvLyB0byBwb3B1bGF0ZSBpdHMgZWxlbWVudCAoYHRoaXMuZWxgKSwgd2l0aCB0aGUgYXBwcm9wcmlhdGUgSFRNTC4gVGhlXG4gICAgLy8gY29udmVudGlvbiBpcyBmb3IgKipyZW5kZXIqKiB0byBhbHdheXMgcmV0dXJuIGB0aGlzYC5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcgYnkgdGFraW5nIHRoZSBlbGVtZW50IG91dCBvZiB0aGUgRE9NLCBhbmQgcmVtb3ZpbmcgYW55XG4gICAgLy8gYXBwbGljYWJsZSBCYWNrYm9uZS5FdmVudHMgbGlzdGVuZXJzLlxuICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENoYW5nZSB0aGUgdmlldydzIGVsZW1lbnQgKGB0aGlzLmVsYCBwcm9wZXJ0eSksIGluY2x1ZGluZyBldmVudFxuICAgIC8vIHJlLWRlbGVnYXRpb24uXG4gICAgc2V0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgZGVsZWdhdGUpIHtcbiAgICAgIGlmICh0aGlzLiRlbCkgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICB0aGlzLiRlbCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBCYWNrYm9uZS4kID8gZWxlbWVudCA6IEJhY2tib25lLiQoZWxlbWVudCk7XG4gICAgICB0aGlzLmVsID0gdGhpcy4kZWxbMF07XG4gICAgICBpZiAoZGVsZWdhdGUgIT09IGZhbHNlKSB0aGlzLmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gU2V0IGNhbGxiYWNrcywgd2hlcmUgYHRoaXMuZXZlbnRzYCBpcyBhIGhhc2ggb2ZcbiAgICAvL1xuICAgIC8vICp7XCJldmVudCBzZWxlY3RvclwiOiBcImNhbGxiYWNrXCJ9KlxuICAgIC8vXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAnbW91c2Vkb3duIC50aXRsZSc6ICAnZWRpdCcsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5idXR0b24nOiAgICAgJ3NhdmUnLFxuICAgIC8vICAgICAgICdjbGljayAub3Blbic6ICAgICAgIGZ1bmN0aW9uKGUpIHsgLi4uIH1cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy8gcGFpcnMuIENhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoZSB2aWV3LCB3aXRoIGB0aGlzYCBzZXQgcHJvcGVybHkuXG4gICAgLy8gVXNlcyBldmVudCBkZWxlZ2F0aW9uIGZvciBlZmZpY2llbmN5LlxuICAgIC8vIE9taXR0aW5nIHRoZSBzZWxlY3RvciBiaW5kcyB0aGUgZXZlbnQgdG8gYHRoaXMuZWxgLlxuICAgIC8vIFRoaXMgb25seSB3b3JrcyBmb3IgZGVsZWdhdGUtYWJsZSBldmVudHM6IG5vdCBgZm9jdXNgLCBgYmx1cmAsIGFuZFxuICAgIC8vIG5vdCBgY2hhbmdlYCwgYHN1Ym1pdGAsIGFuZCBgcmVzZXRgIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIGlmICghKGV2ZW50cyB8fCAoZXZlbnRzID0gXy5yZXN1bHQodGhpcywgJ2V2ZW50cycpKSkpIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBldmVudHNba2V5XTtcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24obWV0aG9kKSkgbWV0aG9kID0gdGhpc1tldmVudHNba2V5XV07XG4gICAgICAgIGlmICghbWV0aG9kKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgbWF0Y2ggPSBrZXkubWF0Y2goZGVsZWdhdGVFdmVudFNwbGl0dGVyKTtcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IG1hdGNoWzFdLCBzZWxlY3RvciA9IG1hdGNoWzJdO1xuICAgICAgICBtZXRob2QgPSBfLmJpbmQobWV0aG9kLCB0aGlzKTtcbiAgICAgICAgZXZlbnROYW1lICs9ICcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQ7XG4gICAgICAgIGlmIChzZWxlY3RvciA9PT0gJycpIHtcbiAgICAgICAgICB0aGlzLiRlbC5vbihldmVudE5hbWUsIG1ldGhvZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lLCBzZWxlY3RvciwgbWV0aG9kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENsZWFycyBhbGwgY2FsbGJhY2tzIHByZXZpb3VzbHkgYm91bmQgdG8gdGhlIHZpZXcgd2l0aCBgZGVsZWdhdGVFdmVudHNgLlxuICAgIC8vIFlvdSB1c3VhbGx5IGRvbid0IG5lZWQgdG8gdXNlIHRoaXMsIGJ1dCBtYXkgd2lzaCB0byBpZiB5b3UgaGF2ZSBtdWx0aXBsZVxuICAgIC8vIEJhY2tib25lIHZpZXdzIGF0dGFjaGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50LlxuICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy4kZWwub2ZmKCcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBWaWV3IGhhcyBhIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgIC8vIElmIGB0aGlzLmVsYCBpcyBhIHN0cmluZywgcGFzcyBpdCB0aHJvdWdoIGAkKClgLCB0YWtlIHRoZSBmaXJzdFxuICAgIC8vIG1hdGNoaW5nIGVsZW1lbnQsIGFuZCByZS1hc3NpZ24gaXQgdG8gYGVsYC4gT3RoZXJ3aXNlLCBjcmVhdGVcbiAgICAvLyBhbiBlbGVtZW50IGZyb20gdGhlIGBpZGAsIGBjbGFzc05hbWVgIGFuZCBgdGFnTmFtZWAgcHJvcGVydGllcy5cbiAgICBfZW5zdXJlRWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgdmFyIGF0dHJzID0gXy5leHRlbmQoe30sIF8ucmVzdWx0KHRoaXMsICdhdHRyaWJ1dGVzJykpO1xuICAgICAgICBpZiAodGhpcy5pZCkgYXR0cnMuaWQgPSBfLnJlc3VsdCh0aGlzLCAnaWQnKTtcbiAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSBhdHRyc1snY2xhc3MnXSA9IF8ucmVzdWx0KHRoaXMsICdjbGFzc05hbWUnKTtcbiAgICAgICAgdmFyICRlbCA9IEJhY2tib25lLiQoJzwnICsgXy5yZXN1bHQodGhpcywgJ3RhZ05hbWUnKSArICc+JykuYXR0cihhdHRycyk7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudCgkZWwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudChfLnJlc3VsdCh0aGlzLCAnZWwnKSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5zeW5jXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgbWFubmVyIGluIHdoaWNoIEJhY2tib25lIHBlcnNpc3RzXG4gIC8vIG1vZGVscyB0byB0aGUgc2VydmVyLiBZb3Ugd2lsbCBiZSBwYXNzZWQgdGhlIHR5cGUgb2YgcmVxdWVzdCwgYW5kIHRoZVxuICAvLyBtb2RlbCBpbiBxdWVzdGlvbi4gQnkgZGVmYXVsdCwgbWFrZXMgYSBSRVNUZnVsIEFqYXggcmVxdWVzdFxuICAvLyB0byB0aGUgbW9kZWwncyBgdXJsKClgLiBTb21lIHBvc3NpYmxlIGN1c3RvbWl6YXRpb25zIGNvdWxkIGJlOlxuICAvL1xuICAvLyAqIFVzZSBgc2V0VGltZW91dGAgdG8gYmF0Y2ggcmFwaWQtZmlyZSB1cGRhdGVzIGludG8gYSBzaW5nbGUgcmVxdWVzdC5cbiAgLy8gKiBTZW5kIHVwIHRoZSBtb2RlbHMgYXMgWE1MIGluc3RlYWQgb2YgSlNPTi5cbiAgLy8gKiBQZXJzaXN0IG1vZGVscyB2aWEgV2ViU29ja2V0cyBpbnN0ZWFkIG9mIEFqYXguXG4gIC8vXG4gIC8vIFR1cm4gb24gYEJhY2tib25lLmVtdWxhdGVIVFRQYCBpbiBvcmRlciB0byBzZW5kIGBQVVRgIGFuZCBgREVMRVRFYCByZXF1ZXN0c1xuICAvLyBhcyBgUE9TVGAsIHdpdGggYSBgX21ldGhvZGAgcGFyYW1ldGVyIGNvbnRhaW5pbmcgdGhlIHRydWUgSFRUUCBtZXRob2QsXG4gIC8vIGFzIHdlbGwgYXMgYWxsIHJlcXVlc3RzIHdpdGggdGhlIGJvZHkgYXMgYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGBcbiAgLy8gaW5zdGVhZCBvZiBgYXBwbGljYXRpb24vanNvbmAgd2l0aCB0aGUgbW9kZWwgaW4gYSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuICAvLyBVc2VmdWwgd2hlbiBpbnRlcmZhY2luZyB3aXRoIHNlcnZlci1zaWRlIGxhbmd1YWdlcyBsaWtlICoqUEhQKiogdGhhdCBtYWtlXG4gIC8vIGl0IGRpZmZpY3VsdCB0byByZWFkIHRoZSBib2R5IG9mIGBQVVRgIHJlcXVlc3RzLlxuICBCYWNrYm9uZS5zeW5jID0gZnVuY3Rpb24obWV0aG9kLCBtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gbWV0aG9kTWFwW21ldGhvZF07XG5cbiAgICAvLyBEZWZhdWx0IG9wdGlvbnMsIHVubGVzcyBzcGVjaWZpZWQuXG4gICAgXy5kZWZhdWx0cyhvcHRpb25zIHx8IChvcHRpb25zID0ge30pLCB7XG4gICAgICBlbXVsYXRlSFRUUDogQmFja2JvbmUuZW11bGF0ZUhUVFAsXG4gICAgICBlbXVsYXRlSlNPTjogQmFja2JvbmUuZW11bGF0ZUpTT05cbiAgICB9KTtcblxuICAgIC8vIERlZmF1bHQgSlNPTi1yZXF1ZXN0IG9wdGlvbnMuXG4gICAgdmFyIHBhcmFtcyA9IHt0eXBlOiB0eXBlLCBkYXRhVHlwZTogJ2pzb24nfTtcblxuICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgYSBVUkwuXG4gICAgaWYgKCFvcHRpb25zLnVybCkge1xuICAgICAgcGFyYW1zLnVybCA9IF8ucmVzdWx0KG1vZGVsLCAndXJsJykgfHwgdXJsRXJyb3IoKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIHRoZSBhcHByb3ByaWF0ZSByZXF1ZXN0IGRhdGEuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSA9PSBudWxsICYmIG1vZGVsICYmIChtZXRob2QgPT09ICdjcmVhdGUnIHx8IG1ldGhvZCA9PT0gJ3VwZGF0ZScgfHwgbWV0aG9kID09PSAncGF0Y2gnKSkge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgcGFyYW1zLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmF0dHJzIHx8IG1vZGVsLnRvSlNPTihvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSlNPTiBieSBlbmNvZGluZyB0aGUgcmVxdWVzdCBpbnRvIGFuIEhUTUwtZm9ybS5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG4gICAgICBwYXJhbXMuZGF0YSA9IHBhcmFtcy5kYXRhID8ge21vZGVsOiBwYXJhbXMuZGF0YX0gOiB7fTtcbiAgICB9XG5cbiAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBIVFRQIGJ5IG1pbWlja2luZyB0aGUgSFRUUCBtZXRob2Qgd2l0aCBgX21ldGhvZGBcbiAgICAvLyBBbmQgYW4gYFgtSFRUUC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSFRUUCAmJiAodHlwZSA9PT0gJ1BVVCcgfHwgdHlwZSA9PT0gJ0RFTEVURScgfHwgdHlwZSA9PT0gJ1BBVENIJykpIHtcbiAgICAgIHBhcmFtcy50eXBlID0gJ1BPU1QnO1xuICAgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHBhcmFtcy5kYXRhLl9tZXRob2QgPSB0eXBlO1xuICAgICAgdmFyIGJlZm9yZVNlbmQgPSBvcHRpb25zLmJlZm9yZVNlbmQ7XG4gICAgICBvcHRpb25zLmJlZm9yZVNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnLCB0eXBlKTtcbiAgICAgICAgaWYgKGJlZm9yZVNlbmQpIHJldHVybiBiZWZvcmVTZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERvbid0IHByb2Nlc3MgZGF0YSBvbiBhIG5vbi1HRVQgcmVxdWVzdC5cbiAgICBpZiAocGFyYW1zLnR5cGUgIT09ICdHRVQnICYmICFvcHRpb25zLmVtdWxhdGVKU09OKSB7XG4gICAgICBwYXJhbXMucHJvY2Vzc0RhdGEgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBzZW5kaW5nIGEgYFBBVENIYCByZXF1ZXN0LCBhbmQgd2UncmUgaW4gYW4gb2xkIEludGVybmV0IEV4cGxvcmVyXG4gICAgLy8gdGhhdCBzdGlsbCBoYXMgQWN0aXZlWCBlbmFibGVkIGJ5IGRlZmF1bHQsIG92ZXJyaWRlIGpRdWVyeSB0byB1c2UgdGhhdFxuICAgIC8vIGZvciBYSFIgaW5zdGVhZC4gUmVtb3ZlIHRoaXMgbGluZSB3aGVuIGpRdWVyeSBzdXBwb3J0cyBgUEFUQ0hgIG9uIElFOC5cbiAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdQQVRDSCcgJiYgbm9YaHJQYXRjaCkge1xuICAgICAgcGFyYW1zLnhociA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTWFrZSB0aGUgcmVxdWVzdCwgYWxsb3dpbmcgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55IEFqYXggb3B0aW9ucy5cbiAgICB2YXIgeGhyID0gb3B0aW9ucy54aHIgPSBCYWNrYm9uZS5hamF4KF8uZXh0ZW5kKHBhcmFtcywgb3B0aW9ucykpO1xuICAgIG1vZGVsLnRyaWdnZXIoJ3JlcXVlc3QnLCBtb2RlbCwgeGhyLCBvcHRpb25zKTtcbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIHZhciBub1hoclBhdGNoID1cbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0ICYmXG4gICAgICAhKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiAobmV3IFhNTEh0dHBSZXF1ZXN0KS5kaXNwYXRjaEV2ZW50KTtcblxuICAvLyBNYXAgZnJvbSBDUlVEIHRvIEhUVFAgZm9yIG91ciBkZWZhdWx0IGBCYWNrYm9uZS5zeW5jYCBpbXBsZW1lbnRhdGlvbi5cbiAgdmFyIG1ldGhvZE1hcCA9IHtcbiAgICAnY3JlYXRlJzogJ1BPU1QnLFxuICAgICd1cGRhdGUnOiAnUFVUJyxcbiAgICAncGF0Y2gnOiAgJ1BBVENIJyxcbiAgICAnZGVsZXRlJzogJ0RFTEVURScsXG4gICAgJ3JlYWQnOiAgICdHRVQnXG4gIH07XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBCYWNrYm9uZS5hamF4YCB0byBwcm94eSB0aHJvdWdoIHRvIGAkYC5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBpZiB5b3UnZCBsaWtlIHRvIHVzZSBhIGRpZmZlcmVudCBsaWJyYXJ5LlxuICBCYWNrYm9uZS5hamF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLiQuYWpheC5hcHBseShCYWNrYm9uZS4kLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEJhY2tib25lLlJvdXRlclxuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSb3V0ZXJzIG1hcCBmYXV4LVVSTHMgdG8gYWN0aW9ucywgYW5kIGZpcmUgZXZlbnRzIHdoZW4gcm91dGVzIGFyZVxuICAvLyBtYXRjaGVkLiBDcmVhdGluZyBhIG5ldyBvbmUgc2V0cyBpdHMgYHJvdXRlc2AgaGFzaCwgaWYgbm90IHNldCBzdGF0aWNhbGx5LlxuICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgaWYgKG9wdGlvbnMucm91dGVzKSB0aGlzLnJvdXRlcyA9IG9wdGlvbnMucm91dGVzO1xuICAgIHRoaXMuX2JpbmRSb3V0ZXMoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3IgbWF0Y2hpbmcgbmFtZWQgcGFyYW0gcGFydHMgYW5kIHNwbGF0dGVkXG4gIC8vIHBhcnRzIG9mIHJvdXRlIHN0cmluZ3MuXG4gIHZhciBvcHRpb25hbFBhcmFtID0gL1xcKCguKj8pXFwpL2c7XG4gIHZhciBuYW1lZFBhcmFtICAgID0gLyhcXChcXD8pPzpcXHcrL2c7XG4gIHZhciBzcGxhdFBhcmFtICAgID0gL1xcKlxcdysvZztcbiAgdmFyIGVzY2FwZVJlZ0V4cCAgPSAvW1xcLXt9XFxbXFxdKz8uLFxcXFxcXF4kfCNcXHNdL2c7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlJvdXRlcioqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFJvdXRlci5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gTWFudWFsbHkgYmluZCBhIHNpbmdsZSBuYW1lZCByb3V0ZSB0byBhIGNhbGxiYWNrLiBGb3IgZXhhbXBsZTpcbiAgICAvL1xuICAgIC8vICAgICB0aGlzLnJvdXRlKCdzZWFyY2gvOnF1ZXJ5L3A6bnVtJywgJ3NlYXJjaCcsIGZ1bmN0aW9uKHF1ZXJ5LCBudW0pIHtcbiAgICAvLyAgICAgICAuLi5cbiAgICAvLyAgICAgfSk7XG4gICAgLy9cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIV8uaXNSZWdFeHAocm91dGUpKSByb3V0ZSA9IHRoaXMuX3JvdXRlVG9SZWdFeHAocm91dGUpO1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICBjYWxsYmFjayA9IG5hbWU7XG4gICAgICAgIG5hbWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gdGhpc1tuYW1lXTtcbiAgICAgIHZhciByb3V0ZXIgPSB0aGlzO1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5yb3V0ZShyb3V0ZSwgZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSByb3V0ZXIuX2V4dHJhY3RQYXJhbWV0ZXJzKHJvdXRlLCBmcmFnbWVudCk7XG4gICAgICAgIHJvdXRlci5leGVjdXRlKGNhbGxiYWNrLCBhcmdzKTtcbiAgICAgICAgcm91dGVyLnRyaWdnZXIuYXBwbHkocm91dGVyLCBbJ3JvdXRlOicgKyBuYW1lXS5jb25jYXQoYXJncykpO1xuICAgICAgICByb3V0ZXIudHJpZ2dlcigncm91dGUnLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgQmFja2JvbmUuaGlzdG9yeS50cmlnZ2VyKCdyb3V0ZScsIHJvdXRlciwgbmFtZSwgYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBFeGVjdXRlIGEgcm91dGUgaGFuZGxlciB3aXRoIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLiAgVGhpcyBpcyBhblxuICAgIC8vIGV4Y2VsbGVudCBwbGFjZSB0byBkbyBwcmUtcm91dGUgc2V0dXAgb3IgcG9zdC1yb3V0ZSBjbGVhbnVwLlxuICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0sXG5cbiAgICAvLyBTaW1wbGUgcHJveHkgdG8gYEJhY2tib25lLmhpc3RvcnlgIHRvIHNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoaXN0b3J5LlxuICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbGwgZGVmaW5lZCByb3V0ZXMgdG8gYEJhY2tib25lLmhpc3RvcnlgLiBXZSBoYXZlIHRvIHJldmVyc2UgdGhlXG4gICAgLy8gb3JkZXIgb2YgdGhlIHJvdXRlcyBoZXJlIHRvIHN1cHBvcnQgYmVoYXZpb3Igd2hlcmUgdGhlIG1vc3QgZ2VuZXJhbFxuICAgIC8vIHJvdXRlcyBjYW4gYmUgZGVmaW5lZCBhdCB0aGUgYm90dG9tIG9mIHRoZSByb3V0ZSBtYXAuXG4gICAgX2JpbmRSb3V0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLnJvdXRlcykgcmV0dXJuO1xuICAgICAgdGhpcy5yb3V0ZXMgPSBfLnJlc3VsdCh0aGlzLCAncm91dGVzJyk7XG4gICAgICB2YXIgcm91dGUsIHJvdXRlcyA9IF8ua2V5cyh0aGlzLnJvdXRlcyk7XG4gICAgICB3aGlsZSAoKHJvdXRlID0gcm91dGVzLnBvcCgpKSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucm91dGUocm91dGUsIHRoaXMucm91dGVzW3JvdXRlXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENvbnZlcnQgYSByb3V0ZSBzdHJpbmcgaW50byBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwgc3VpdGFibGUgZm9yIG1hdGNoaW5nXG4gICAgLy8gYWdhaW5zdCB0aGUgY3VycmVudCBsb2NhdGlvbiBoYXNoLlxuICAgIF9yb3V0ZVRvUmVnRXhwOiBmdW5jdGlvbihyb3V0ZSkge1xuICAgICAgcm91dGUgPSByb3V0ZS5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgJ1xcXFwkJicpXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uob3B0aW9uYWxQYXJhbSwgJyg/OiQxKT8nKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG5hbWVkUGFyYW0sIGZ1bmN0aW9uKG1hdGNoLCBvcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbmFsID8gbWF0Y2ggOiAnKFteLz9dKyknO1xuICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uoc3BsYXRQYXJhbSwgJyhbXj9dKj8pJyk7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpO1xuICAgIH0sXG5cbiAgICAvLyBHaXZlbiBhIHJvdXRlLCBhbmQgYSBVUkwgZnJhZ21lbnQgdGhhdCBpdCBtYXRjaGVzLCByZXR1cm4gdGhlIGFycmF5IG9mXG4gICAgLy8gZXh0cmFjdGVkIGRlY29kZWQgcGFyYW1ldGVycy4gRW1wdHkgb3IgdW5tYXRjaGVkIHBhcmFtZXRlcnMgd2lsbCBiZVxuICAgIC8vIHRyZWF0ZWQgYXMgYG51bGxgIHRvIG5vcm1hbGl6ZSBjcm9zcy1icm93c2VyIGJlaGF2aW9yLlxuICAgIF9leHRyYWN0UGFyYW1ldGVyczogZnVuY3Rpb24ocm91dGUsIGZyYWdtZW50KSB7XG4gICAgICB2YXIgcGFyYW1zID0gcm91dGUuZXhlYyhmcmFnbWVudCkuc2xpY2UoMSk7XG4gICAgICByZXR1cm4gXy5tYXAocGFyYW1zLCBmdW5jdGlvbihwYXJhbSwgaSkge1xuICAgICAgICAvLyBEb24ndCBkZWNvZGUgdGhlIHNlYXJjaCBwYXJhbXMuXG4gICAgICAgIGlmIChpID09PSBwYXJhbXMubGVuZ3RoIC0gMSkgcmV0dXJuIHBhcmFtIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBwYXJhbSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSkgOiBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLkhpc3RvcnlcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEhhbmRsZXMgY3Jvc3MtYnJvd3NlciBoaXN0b3J5IG1hbmFnZW1lbnQsIGJhc2VkIG9uIGVpdGhlclxuICAvLyBbcHVzaFN0YXRlXShodHRwOi8vZGl2ZWludG9odG1sNS5pbmZvL2hpc3RvcnkuaHRtbCkgYW5kIHJlYWwgVVJMcywgb3JcbiAgLy8gW29uaGFzaGNoYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vd2luZG93Lm9uaGFzaGNoYW5nZSlcbiAgLy8gYW5kIFVSTCBmcmFnbWVudHMuIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIG5laXRoZXIgKG9sZCBJRSwgbmF0Y2gpLFxuICAvLyBmYWxscyBiYWNrIHRvIHBvbGxpbmcuXG4gIHZhciBIaXN0b3J5ID0gQmFja2JvbmUuSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoZWNrVXJsJyk7XG5cbiAgICAvLyBFbnN1cmUgdGhhdCBgSGlzdG9yeWAgY2FuIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgYnJvd3Nlci5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICB0aGlzLmhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgYSBsZWFkaW5nIGhhc2gvc2xhc2ggYW5kIHRyYWlsaW5nIHNwYWNlLlxuICB2YXIgcm91dGVTdHJpcHBlciA9IC9eWyNcXC9dfFxccyskL2c7XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcy5cbiAgdmFyIHJvb3RTdHJpcHBlciA9IC9eXFwvK3xcXC8rJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3IgZGV0ZWN0aW5nIE1TSUUuXG4gIHZhciBpc0V4cGxvcmVyID0gL21zaWUgW1xcdy5dKy87XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciByZW1vdmluZyBhIHRyYWlsaW5nIHNsYXNoLlxuICB2YXIgdHJhaWxpbmdTbGFzaCA9IC9cXC8kLztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyB1cmxzIG9mIGhhc2guXG4gIHZhciBwYXRoU3RyaXBwZXIgPSAvIy4qJC87XG5cbiAgLy8gSGFzIHRoZSBoaXN0b3J5IGhhbmRsaW5nIGFscmVhZHkgYmVlbiBzdGFydGVkP1xuICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuSGlzdG9yeSoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKEhpc3RvcnkucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHRvIHBvbGwgZm9yIGhhc2ggY2hhbmdlcywgaWYgbmVjZXNzYXJ5LCBpc1xuICAgIC8vIHR3ZW50eSB0aW1lcyBhIHNlY29uZC5cbiAgICBpbnRlcnZhbDogNTAsXG5cbiAgICAvLyBBcmUgd2UgYXQgdGhlIGFwcCByb290P1xuICAgIGF0Um9vdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9bXlxcL10kLywgJyQmLycpID09PSB0aGlzLnJvb3Q7XG4gICAgfSxcblxuICAgIC8vIEdldHMgdGhlIHRydWUgaGFzaCB2YWx1ZS4gQ2Fubm90IHVzZSBsb2NhdGlvbi5oYXNoIGRpcmVjdGx5IGR1ZSB0byBidWdcbiAgICAvLyBpbiBGaXJlZm94IHdoZXJlIGxvY2F0aW9uLmhhc2ggd2lsbCBhbHdheXMgYmUgZGVjb2RlZC5cbiAgICBnZXRIYXNoOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAgIHZhciBtYXRjaCA9ICh3aW5kb3cgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIGNyb3NzLWJyb3dzZXIgbm9ybWFsaXplZCBVUkwgZnJhZ21lbnQsIGVpdGhlciBmcm9tIHRoZSBVUkwsXG4gICAgLy8gdGhlIGhhc2gsIG9yIHRoZSBvdmVycmlkZS5cbiAgICBnZXRGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQsIGZvcmNlUHVzaFN0YXRlKSB7XG4gICAgICBpZiAoZnJhZ21lbnQgPT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlIHx8ICF0aGlzLl93YW50c0hhc2hDaGFuZ2UgfHwgZm9yY2VQdXNoU3RhdGUpIHtcbiAgICAgICAgICBmcmFnbWVudCA9IGRlY29kZVVSSSh0aGlzLmxvY2F0aW9uLnBhdGhuYW1lICsgdGhpcy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHZhciByb290ID0gdGhpcy5yb290LnJlcGxhY2UodHJhaWxpbmdTbGFzaCwgJycpO1xuICAgICAgICAgIGlmICghZnJhZ21lbnQuaW5kZXhPZihyb290KSkgZnJhZ21lbnQgPSBmcmFnbWVudC5zbGljZShyb290Lmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgIH0sXG5cbiAgICAvLyBTdGFydCB0aGUgaGFzaCBjaGFuZ2UgaGFuZGxpbmcsIHJldHVybmluZyBgdHJ1ZWAgaWYgdGhlIGN1cnJlbnQgVVJMIG1hdGNoZXNcbiAgICAvLyBhbiBleGlzdGluZyByb3V0ZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoSGlzdG9yeS5zdGFydGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWNrYm9uZS5oaXN0b3J5IGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZFwiKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGluaXRpYWwgY29uZmlndXJhdGlvbi4gRG8gd2UgbmVlZCBhbiBpZnJhbWU/XG4gICAgICAvLyBJcyBwdXNoU3RhdGUgZGVzaXJlZCAuLi4gaXMgaXQgYXZhaWxhYmxlP1xuICAgICAgdGhpcy5vcHRpb25zICAgICAgICAgID0gXy5leHRlbmQoe3Jvb3Q6ICcvJ30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnJvb3QgICAgICAgICAgICAgPSB0aGlzLm9wdGlvbnMucm9vdDtcbiAgICAgIHRoaXMuX3dhbnRzSGFzaENoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlICE9PSBmYWxzZTtcbiAgICAgIHRoaXMuX3dhbnRzUHVzaFN0YXRlICA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMub3B0aW9ucy5wdXNoU3RhdGUgJiYgdGhpcy5oaXN0b3J5ICYmIHRoaXMuaGlzdG9yeS5wdXNoU3RhdGUpO1xuICAgICAgdmFyIGZyYWdtZW50ICAgICAgICAgID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuICAgICAgdmFyIGRvY01vZGUgICAgICAgICAgID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuICAgICAgdmFyIG9sZElFICAgICAgICAgICAgID0gKGlzRXhwbG9yZXIuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpICYmICghZG9jTW9kZSB8fCBkb2NNb2RlIDw9IDcpKTtcblxuICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cbiAgICAgIHRoaXMucm9vdCA9ICgnLycgKyB0aGlzLnJvb3QgKyAnLycpLnJlcGxhY2Uocm9vdFN0cmlwcGVyLCAnLycpO1xuXG4gICAgICBpZiAob2xkSUUgJiYgdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHZhciBmcmFtZSA9IEJhY2tib25lLiQoJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIgdGFiaW5kZXg9XCItMVwiPicpO1xuICAgICAgICB0aGlzLmlmcmFtZSA9IGZyYW1lLmhpZGUoKS5hcHBlbmRUbygnYm9keScpWzBdLmNvbnRlbnRXaW5kb3c7XG4gICAgICAgIHRoaXMubmF2aWdhdGUoZnJhZ21lbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB3ZSdyZSB1c2luZyBwdXNoU3RhdGUgb3IgaGFzaGVzLCBhbmQgd2hldGhlclxuICAgICAgLy8gJ29uaGFzaGNoYW5nZScgaXMgc3VwcG9ydGVkLCBkZXRlcm1pbmUgaG93IHdlIGNoZWNrIHRoZSBVUkwgc3RhdGUuXG4gICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlKSB7XG4gICAgICAgIEJhY2tib25lLiQod2luZG93KS5vbigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmICgnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3cpICYmICFvbGRJRSkge1xuICAgICAgICBCYWNrYm9uZS4kKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLCB0aGlzLmludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBiYXNlIHVybCwgZm9yIGEgcHVzaFN0YXRlIGxpbmtcbiAgICAgIC8vIG9wZW5lZCBieSBhIG5vbi1wdXNoU3RhdGUgYnJvd3Nlci5cbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcbiAgICAgIHZhciBsb2MgPSB0aGlzLmxvY2F0aW9uO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXG4gICAgICAgIC8vIElmIHdlJ3ZlIHN0YXJ0ZWQgb2ZmIHdpdGggYSByb3V0ZSBmcm9tIGEgYHB1c2hTdGF0ZWAtZW5hYmxlZFxuICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KG51bGwsIHRydWUpO1xuICAgICAgICAgIHRoaXMubG9jYXRpb24ucmVwbGFjZSh0aGlzLnJvb3QgKyAnIycgKyB0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgICAvLyBSZXR1cm4gaW1tZWRpYXRlbHkgYXMgYnJvd3NlciB3aWxsIGRvIHJlZGlyZWN0IHRvIG5ldyB1cmxcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAvLyBPciBpZiB3ZSd2ZSBzdGFydGVkIG91dCB3aXRoIGEgaGFzaC1iYXNlZCByb3V0ZSwgYnV0IHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAvLyBpbiBhIGJyb3dzZXIgd2hlcmUgaXQgY291bGQgYmUgYHB1c2hTdGF0ZWAtYmFzZWQgaW5zdGVhZC4uLlxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSAmJiB0aGlzLmF0Um9vdCgpICYmIGxvYy5oYXNoKSB7XG4gICAgICAgICAgdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpLnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgICAgICAgIHRoaXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB0aGlzLnJvb3QgKyB0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnNpbGVudCkgcmV0dXJuIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBEaXNhYmxlIEJhY2tib25lLmhpc3RvcnksIHBlcmhhcHMgdGVtcG9yYXJpbHkuIE5vdCB1c2VmdWwgaW4gYSByZWFsIGFwcCxcbiAgICAvLyBidXQgcG9zc2libHkgdXNlZnVsIGZvciB1bml0IHRlc3RpbmcgUm91dGVycy5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIEJhY2tib25lLiQod2luZG93KS5vZmYoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCkub2ZmKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICBpZiAodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbCh0aGlzLl9jaGVja1VybEludGVydmFsKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSByb3V0ZSB0byBiZSB0ZXN0ZWQgd2hlbiB0aGUgZnJhZ21lbnQgY2hhbmdlcy4gUm91dGVzIGFkZGVkIGxhdGVyXG4gICAgLy8gbWF5IG92ZXJyaWRlIHByZXZpb3VzIHJvdXRlcy5cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOiByb3V0ZSwgY2FsbGJhY2s6IGNhbGxiYWNrfSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrcyB0aGUgY3VycmVudCBVUkwgdG8gc2VlIGlmIGl0IGhhcyBjaGFuZ2VkLCBhbmQgaWYgaXQgaGFzLFxuICAgIC8vIGNhbGxzIGBsb2FkVXJsYCwgbm9ybWFsaXppbmcgYWNyb3NzIHRoZSBoaWRkZW4gaWZyYW1lLlxuICAgIGNoZWNrVXJsOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuZnJhZ21lbnQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICh0aGlzLmlmcmFtZSkgdGhpcy5uYXZpZ2F0ZShjdXJyZW50KTtcbiAgICAgIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBBdHRlbXB0IHRvIGxvYWQgdGhlIGN1cnJlbnQgVVJMIGZyYWdtZW50LiBJZiBhIHJvdXRlIHN1Y2NlZWRzIHdpdGggYVxuICAgIC8vIG1hdGNoLCByZXR1cm5zIGB0cnVlYC4gSWYgbm8gZGVmaW5lZCByb3V0ZXMgbWF0Y2hlcyB0aGUgZnJhZ21lbnQsXG4gICAgLy8gcmV0dXJucyBgZmFsc2VgLlxuICAgIGxvYWRVcmw6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybiBfLmFueSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG4gICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG4gICAgLy8gJ3JlcGxhY2UnIG9wdGlvbiBpcyBwYXNzZWQuIFlvdSBhcmUgcmVzcG9uc2libGUgZm9yIHByb3Blcmx5IFVSTC1lbmNvZGluZ1xuICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBjb250YWluIGB0cmlnZ2VyOiB0cnVlYCBpZiB5b3Ugd2lzaCB0byBoYXZlIHRoZVxuICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG4gICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXG4gICAgICB2YXIgdXJsID0gdGhpcy5yb290ICsgKGZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCB8fCAnJykpO1xuXG4gICAgICAvLyBTdHJpcCB0aGUgaGFzaCBmb3IgbWF0Y2hpbmcuXG4gICAgICBmcmFnbWVudCA9IGZyYWdtZW50LnJlcGxhY2UocGF0aFN0cmlwcGVyLCAnJyk7XG5cbiAgICAgIGlmICh0aGlzLmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgdGhpcy5mcmFnbWVudCA9IGZyYWdtZW50O1xuXG4gICAgICAvLyBEb24ndCBpbmNsdWRlIGEgdHJhaWxpbmcgc2xhc2ggb24gdGhlIHJvb3QuXG4gICAgICBpZiAoZnJhZ21lbnQgPT09ICcnICYmIHVybCAhPT0gJy8nKSB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xuXG4gICAgICAvLyBJZiBwdXNoU3RhdGUgaXMgYXZhaWxhYmxlLCB3ZSB1c2UgaXQgdG8gc2V0IHRoZSBmcmFnbWVudCBhcyBhIHJlYWwgVVJMLlxuICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSkge1xuICAgICAgICB0aGlzLmhpc3Rvcnlbb3B0aW9ucy5yZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oe30sIGRvY3VtZW50LnRpdGxlLCB1cmwpO1xuXG4gICAgICAvLyBJZiBoYXNoIGNoYW5nZXMgaGF2ZW4ndCBiZWVuIGV4cGxpY2l0bHkgZGlzYWJsZWQsIHVwZGF0ZSB0aGUgaGFzaFxuICAgICAgLy8gZnJhZ21lbnQgdG8gc3RvcmUgaGlzdG9yeS5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhhc2godGhpcy5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIGlmICh0aGlzLmlmcmFtZSAmJiAoZnJhZ21lbnQgIT09IHRoaXMuZ2V0RnJhZ21lbnQodGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSkpKSB7XG4gICAgICAgICAgLy8gT3BlbmluZyBhbmQgY2xvc2luZyB0aGUgaWZyYW1lIHRyaWNrcyBJRTcgYW5kIGVhcmxpZXIgdG8gcHVzaCBhXG4gICAgICAgICAgLy8gaGlzdG9yeSBlbnRyeSBvbiBoYXNoLXRhZyBjaGFuZ2UuICBXaGVuIHJlcGxhY2UgaXMgdHJ1ZSwgd2UgZG9uJ3RcbiAgICAgICAgICAvLyB3YW50IHRoaXMuXG4gICAgICAgICAgaWYoIW9wdGlvbnMucmVwbGFjZSkgdGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmlmcmFtZS5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgLy8gSWYgeW91J3ZlIHRvbGQgdXMgdGhhdCB5b3UgZXhwbGljaXRseSBkb24ndCB3YW50IGZhbGxiYWNrIGhhc2hjaGFuZ2UtXG4gICAgICAvLyBiYXNlZCBoaXN0b3J5LCB0aGVuIGBuYXZpZ2F0ZWAgYmVjb21lcyBhIHBhZ2UgcmVmcmVzaC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikgcmV0dXJuIHRoaXMubG9hZFVybChmcmFnbWVudCk7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSB0aGUgaGFzaCBsb2NhdGlvbiwgZWl0aGVyIHJlcGxhY2luZyB0aGUgY3VycmVudCBlbnRyeSwgb3IgYWRkaW5nXG4gICAgLy8gYSBuZXcgb25lIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKGxvY2F0aW9uLCBmcmFnbWVudCwgcmVwbGFjZSkge1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgdmFyIGhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICcnKTtcbiAgICAgICAgbG9jYXRpb24ucmVwbGFjZShocmVmICsgJyMnICsgZnJhZ21lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU29tZSBicm93c2VycyByZXF1aXJlIHRoYXQgYGhhc2hgIGNvbnRhaW5zIGEgbGVhZGluZyAjLlxuICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyMnICsgZnJhZ21lbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBCYWNrYm9uZS5oaXN0b3J5LlxuICBCYWNrYm9uZS5oaXN0b3J5ID0gbmV3IEhpc3Rvcnk7XG5cbiAgLy8gSGVscGVyc1xuICAvLyAtLS0tLS0tXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiwgZm9yIHN1YmNsYXNzZXMuXG4gIC8vIFNpbWlsYXIgdG8gYGdvb2cuaW5oZXJpdHNgLCBidXQgdXNlcyBhIGhhc2ggb2YgcHJvdG90eXBlIHByb3BlcnRpZXMgYW5kXG4gIC8vIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG4gIHZhciBleHRlbmQgPSBmdW5jdGlvbihwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHZhciBjaGlsZDtcblxuICAgIC8vIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIG5ldyBzdWJjbGFzcyBpcyBlaXRoZXIgZGVmaW5lZCBieSB5b3VcbiAgICAvLyAodGhlIFwiY29uc3RydWN0b3JcIiBwcm9wZXJ0eSBpbiB5b3VyIGBleHRlbmRgIGRlZmluaXRpb24pLCBvciBkZWZhdWx0ZWRcbiAgICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50J3MgY29uc3RydWN0b3IuXG4gICAgaWYgKHByb3RvUHJvcHMgJiYgXy5oYXMocHJvdG9Qcm9wcywgJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gICAgfVxuXG4gICAgLy8gQWRkIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaWYgc3VwcGxpZWQuXG4gICAgXy5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xuXG4gICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcbiAgICAvLyBgcGFyZW50YCdzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgIHZhciBTdXJyb2dhdGUgPSBmdW5jdGlvbigpeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH07XG4gICAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG4gICAgY2hpbGQucHJvdG90eXBlID0gbmV3IFN1cnJvZ2F0ZTtcblxuICAgIC8vIEFkZCBwcm90b3R5cGUgcHJvcGVydGllcyAoaW5zdGFuY2UgcHJvcGVydGllcykgdG8gdGhlIHN1YmNsYXNzLFxuICAgIC8vIGlmIHN1cHBsaWVkLlxuICAgIGlmIChwcm90b1Byb3BzKSBfLmV4dGVuZChjaGlsZC5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXG4gICAgLy8gU2V0IGEgY29udmVuaWVuY2UgcHJvcGVydHkgaW4gY2FzZSB0aGUgcGFyZW50J3MgcHJvdG90eXBlIGlzIG5lZWRlZFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7XG5cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH07XG5cbiAgLy8gU2V0IHVwIGluaGVyaXRhbmNlIGZvciB0aGUgbW9kZWwsIGNvbGxlY3Rpb24sIHJvdXRlciwgdmlldyBhbmQgaGlzdG9yeS5cbiAgTW9kZWwuZXh0ZW5kID0gQ29sbGVjdGlvbi5leHRlbmQgPSBSb3V0ZXIuZXh0ZW5kID0gVmlldy5leHRlbmQgPSBIaXN0b3J5LmV4dGVuZCA9IGV4dGVuZDtcblxuICAvLyBUaHJvdyBhbiBlcnJvciB3aGVuIGEgVVJMIGlzIG5lZWRlZCwgYW5kIG5vbmUgaXMgc3VwcGxpZWQuXG4gIHZhciB1cmxFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBcInVybFwiIHByb3BlcnR5IG9yIGZ1bmN0aW9uIG11c3QgYmUgc3BlY2lmaWVkJyk7XG4gIH07XG5cbiAgLy8gV3JhcCBhbiBvcHRpb25hbCBlcnJvciBjYWxsYmFjayB3aXRoIGEgZmFsbGJhY2sgZXJyb3IgZXZlbnQuXG4gIHZhciB3cmFwRXJyb3IgPSBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gICAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgIGlmIChlcnJvcikgZXJyb3IobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgbW9kZWwudHJpZ2dlcignZXJyb3InLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQmFja2JvbmU7XG5cbn0pKTtcbiIsInZhciBNdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJcbiAgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJcbiAgfHwgd2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXI7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAxMiBUaGUgUG9seW1lciBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJlbmVkIGJ5IGEgQlNELXN0eWxlXG4gKiBsaWNlbnNlIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUuXG4gKi9cblxudmFyIFdlYWtNYXAgPSB3aW5kb3cuV2Vha01hcDtcblxuaWYgKHR5cGVvZiBXZWFrTWFwID09PSAndW5kZWZpbmVkJykge1xuICB2YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gIHZhciBjb3VudGVyID0gRGF0ZS5ub3coKSAlIDFlOTtcblxuICBXZWFrTWFwID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5uYW1lID0gJ19fc3QnICsgKE1hdGgucmFuZG9tKCkgKiAxZTkgPj4+IDApICsgKGNvdW50ZXIrKyArICdfXycpO1xuICB9O1xuXG4gIFdlYWtNYXAucHJvdG90eXBlID0ge1xuICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIGVudHJ5ID0ga2V5W3RoaXMubmFtZV07XG4gICAgICBpZiAoZW50cnkgJiYgZW50cnlbMF0gPT09IGtleSlcbiAgICAgICAgZW50cnlbMV0gPSB2YWx1ZTtcbiAgICAgIGVsc2VcbiAgICAgICAgZGVmaW5lUHJvcGVydHkoa2V5LCB0aGlzLm5hbWUsIHt2YWx1ZTogW2tleSwgdmFsdWVdLCB3cml0YWJsZTogdHJ1ZX0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGVudHJ5O1xuICAgICAgcmV0dXJuIChlbnRyeSA9IGtleVt0aGlzLm5hbWVdKSAmJiBlbnRyeVswXSA9PT0ga2V5ID9cbiAgICAgICAgICBlbnRyeVsxXSA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICAgICdkZWxldGUnOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBlbnRyeSA9IGtleVt0aGlzLm5hbWVdO1xuICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuIGZhbHNlO1xuICAgICAgdmFyIGhhc1ZhbHVlID0gZW50cnlbMF0gPT09IGtleTtcbiAgICAgIGVudHJ5WzBdID0gZW50cnlbMV0gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gaGFzVmFsdWU7XG4gICAgfSxcbiAgICBoYXM6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGVudHJ5ID0ga2V5W3RoaXMubmFtZV07XG4gICAgICBpZiAoIWVudHJ5KSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gZW50cnlbMF0gPT09IGtleTtcbiAgICB9XG4gIH07XG59XG5cbnZhciByZWdpc3RyYXRpb25zVGFibGUgPSBuZXcgV2Vha01hcCgpO1xuXG4vLyBXZSB1c2Ugc2V0SW1tZWRpYXRlIG9yIHBvc3RNZXNzYWdlIGZvciBvdXIgZnV0dXJlIGNhbGxiYWNrLlxudmFyIHNldEltbWVkaWF0ZSA9IHdpbmRvdy5tc1NldEltbWVkaWF0ZTtcblxuLy8gVXNlIHBvc3QgbWVzc2FnZSB0byBlbXVsYXRlIHNldEltbWVkaWF0ZS5cbmlmICghc2V0SW1tZWRpYXRlKSB7XG4gIHZhciBzZXRJbW1lZGlhdGVRdWV1ZSA9IFtdO1xuICB2YXIgc2VudGluZWwgPSBTdHJpbmcoTWF0aC5yYW5kb20oKSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLmRhdGEgPT09IHNlbnRpbmVsKSB7XG4gICAgICB2YXIgcXVldWUgPSBzZXRJbW1lZGlhdGVRdWV1ZTtcbiAgICAgIHNldEltbWVkaWF0ZVF1ZXVlID0gW107XG4gICAgICBxdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAgICAgZnVuYygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgc2V0SW1tZWRpYXRlID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHNldEltbWVkaWF0ZVF1ZXVlLnB1c2goZnVuYyk7XG4gICAgd2luZG93LnBvc3RNZXNzYWdlKHNlbnRpbmVsLCAnKicpO1xuICB9O1xufVxuXG4vLyBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgd2UgbmV2ZXIgc2NoZWR1bGUgMiBjYWxsYXMgdG8gc2V0SW1tZWRpYXRlXG52YXIgaXNTY2hlZHVsZWQgPSBmYWxzZTtcblxuLy8gS2VlcCB0cmFjayBvZiBvYnNlcnZlcnMgdGhhdCBuZWVkcyB0byBiZSBub3RpZmllZCBuZXh0IHRpbWUuXG52YXIgc2NoZWR1bGVkT2JzZXJ2ZXJzID0gW107XG5cbi8qKlxuICogU2NoZWR1bGVzIHxkaXNwYXRjaENhbGxiYWNrfCB0byBiZSBjYWxsZWQgaW4gdGhlIGZ1dHVyZS5cbiAqIEBwYXJhbSB7TXV0YXRpb25PYnNlcnZlcn0gb2JzZXJ2ZXJcbiAqL1xuZnVuY3Rpb24gc2NoZWR1bGVDYWxsYmFjayhvYnNlcnZlcikge1xuICBzY2hlZHVsZWRPYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gIGlmICghaXNTY2hlZHVsZWQpIHtcbiAgICBpc1NjaGVkdWxlZCA9IHRydWU7XG4gICAgc2V0SW1tZWRpYXRlKGRpc3BhdGNoQ2FsbGJhY2tzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwSWZOZWVkZWQobm9kZSkge1xuICByZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsICYmXG4gICAgICB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKG5vZGUpIHx8XG4gICAgICBub2RlO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaENhbGxiYWNrcygpIHtcbiAgLy8gaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI211dGF0aW9uLW9ic2VydmVyc1xuXG4gIGlzU2NoZWR1bGVkID0gZmFsc2U7IC8vIFVzZWQgdG8gYWxsb3cgYSBuZXcgc2V0SW1tZWRpYXRlIGNhbGwgYWJvdmUuXG5cbiAgdmFyIG9ic2VydmVycyA9IHNjaGVkdWxlZE9ic2VydmVycztcbiAgc2NoZWR1bGVkT2JzZXJ2ZXJzID0gW107XG4gIC8vIFNvcnQgb2JzZXJ2ZXJzIGJhc2VkIG9uIHRoZWlyIGNyZWF0aW9uIFVJRCAoaW5jcmVtZW50YWwpLlxuICBvYnNlcnZlcnMuc29ydChmdW5jdGlvbihvMSwgbzIpIHtcbiAgICByZXR1cm4gbzEudWlkXyAtIG8yLnVpZF87XG4gIH0pO1xuXG4gIHZhciBhbnlOb25FbXB0eSA9IGZhbHNlO1xuICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbihvYnNlcnZlcikge1xuXG4gICAgLy8gMi4xLCAyLjJcbiAgICB2YXIgcXVldWUgPSBvYnNlcnZlci50YWtlUmVjb3JkcygpO1xuICAgIC8vIDIuMy4gUmVtb3ZlIGFsbCB0cmFuc2llbnQgcmVnaXN0ZXJlZCBvYnNlcnZlcnMgd2hvc2Ugb2JzZXJ2ZXIgaXMgbW8uXG4gICAgcmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzRm9yKG9ic2VydmVyKTtcblxuICAgIC8vIDIuNFxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgIG9ic2VydmVyLmNhbGxiYWNrXyhxdWV1ZSwgb2JzZXJ2ZXIpO1xuICAgICAgYW55Tm9uRW1wdHkgPSB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gMy5cbiAgaWYgKGFueU5vbkVtcHR5KVxuICAgIGRpc3BhdGNoQ2FsbGJhY2tzKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVRyYW5zaWVudE9ic2VydmVyc0ZvcihvYnNlcnZlcikge1xuICBvYnNlcnZlci5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XG4gICAgdmFyIHJlZ2lzdHJhdGlvbnMgPSByZWdpc3RyYXRpb25zVGFibGUuZ2V0KG5vZGUpO1xuICAgIGlmICghcmVnaXN0cmF0aW9ucylcbiAgICAgIHJldHVybjtcbiAgICByZWdpc3RyYXRpb25zLmZvckVhY2goZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICBpZiAocmVnaXN0cmF0aW9uLm9ic2VydmVyID09PSBvYnNlcnZlcilcbiAgICAgICAgcmVnaXN0cmF0aW9uLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIHRoZSBcIkZvciBlYWNoIHJlZ2lzdGVyZWQgb2JzZXJ2ZXIgb2JzZXJ2ZXIgKHdpdGhcbiAqIG9ic2VydmVyJ3Mgb3B0aW9ucyBhcyBvcHRpb25zKSBpbiB0YXJnZXQncyBsaXN0IG9mIHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzLFxuICogcnVuIHRoZXNlIHN1YnN0ZXBzOlwiIGFuZCB0aGUgXCJGb3IgZWFjaCBhbmNlc3RvciBhbmNlc3RvciBvZiB0YXJnZXQsIGFuZCBmb3JcbiAqIGVhY2ggcmVnaXN0ZXJlZCBvYnNlcnZlciBvYnNlcnZlciAod2l0aCBvcHRpb25zIG9wdGlvbnMpIGluIGFuY2VzdG9yJ3MgbGlzdFxuICogb2YgcmVnaXN0ZXJlZCBvYnNlcnZlcnMsIHJ1biB0aGVzZSBzdWJzdGVwczpcIiBwYXJ0IG9mIHRoZSBhbGdvcml0aG1zLiBUaGVcbiAqIHxvcHRpb25zLnN1YnRyZWV8IGlzIGNoZWNrZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZFxuICogY29ycmVjdGx5LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKE11dGF0aW9uT2JzZXJ2ZXJJbml0KTpNdXRhdGlvblJlY29yZH0gY2FsbGJhY2tcbiAqL1xuZnVuY3Rpb24gZm9yRWFjaEFuY2VzdG9yQW5kT2JzZXJ2ZXJFbnF1ZXVlUmVjb3JkKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgbm9kZSA9IHRhcmdldDsgbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSkge1xuICAgIHZhciByZWdpc3RyYXRpb25zID0gcmVnaXN0cmF0aW9uc1RhYmxlLmdldChub2RlKTtcblxuICAgIGlmIChyZWdpc3RyYXRpb25zKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlZ2lzdHJhdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiA9IHJlZ2lzdHJhdGlvbnNbal07XG4gICAgICAgIHZhciBvcHRpb25zID0gcmVnaXN0cmF0aW9uLm9wdGlvbnM7XG5cbiAgICAgICAgLy8gT25seSB0YXJnZXQgaWdub3JlcyBzdWJ0cmVlLlxuICAgICAgICBpZiAobm9kZSAhPT0gdGFyZ2V0ICYmICFvcHRpb25zLnN1YnRyZWUpXG4gICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IGNhbGxiYWNrKG9wdGlvbnMpO1xuICAgICAgICBpZiAocmVjb3JkKVxuICAgICAgICAgIHJlZ2lzdHJhdGlvbi5lbnF1ZXVlKHJlY29yZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnZhciB1aWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBUaGUgY2xhc3MgdGhhdCBtYXBzIHRvIHRoZSBET00gTXV0YXRpb25PYnNlcnZlciBpbnRlcmZhY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjay5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBKc011dGF0aW9uT2JzZXJ2ZXIoY2FsbGJhY2spIHtcbiAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcbiAgdGhpcy5ub2Rlc18gPSBbXTtcbiAgdGhpcy5yZWNvcmRzXyA9IFtdO1xuICB0aGlzLnVpZF8gPSArK3VpZENvdW50ZXI7XG59XG5cbkpzTXV0YXRpb25PYnNlcnZlci5wcm90b3R5cGUgPSB7XG4gIG9ic2VydmU6IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHRhcmdldCA9IHdyYXBJZk5lZWRlZCh0YXJnZXQpO1xuXG4gICAgLy8gMS4xXG4gICAgaWYgKCFvcHRpb25zLmNoaWxkTGlzdCAmJiAhb3B0aW9ucy5hdHRyaWJ1dGVzICYmICFvcHRpb25zLmNoYXJhY3RlckRhdGEgfHxcblxuICAgICAgICAvLyAxLjJcbiAgICAgICAgb3B0aW9ucy5hdHRyaWJ1dGVPbGRWYWx1ZSAmJiAhb3B0aW9ucy5hdHRyaWJ1dGVzIHx8XG5cbiAgICAgICAgLy8gMS4zXG4gICAgICAgIG9wdGlvbnMuYXR0cmlidXRlRmlsdGVyICYmIG9wdGlvbnMuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCAmJlxuICAgICAgICAgICAgIW9wdGlvbnMuYXR0cmlidXRlcyB8fFxuXG4gICAgICAgIC8vIDEuNFxuICAgICAgICBvcHRpb25zLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSAmJiAhb3B0aW9ucy5jaGFyYWN0ZXJEYXRhKSB7XG5cbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigpO1xuICAgIH1cblxuICAgIHZhciByZWdpc3RyYXRpb25zID0gcmVnaXN0cmF0aW9uc1RhYmxlLmdldCh0YXJnZXQpO1xuICAgIGlmICghcmVnaXN0cmF0aW9ucylcbiAgICAgIHJlZ2lzdHJhdGlvbnNUYWJsZS5zZXQodGFyZ2V0LCByZWdpc3RyYXRpb25zID0gW10pO1xuXG4gICAgLy8gMlxuICAgIC8vIElmIHRhcmdldCdzIGxpc3Qgb2YgcmVnaXN0ZXJlZCBvYnNlcnZlcnMgYWxyZWFkeSBpbmNsdWRlcyBhIHJlZ2lzdGVyZWRcbiAgICAvLyBvYnNlcnZlciBhc3NvY2lhdGVkIHdpdGggdGhlIGNvbnRleHQgb2JqZWN0LCByZXBsYWNlIHRoYXQgcmVnaXN0ZXJlZFxuICAgIC8vIG9ic2VydmVyJ3Mgb3B0aW9ucyB3aXRoIG9wdGlvbnMuXG4gICAgdmFyIHJlZ2lzdHJhdGlvbjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZ2lzdHJhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWdpc3RyYXRpb25zW2ldLm9ic2VydmVyID09PSB0aGlzKSB7XG4gICAgICAgIHJlZ2lzdHJhdGlvbiA9IHJlZ2lzdHJhdGlvbnNbaV07XG4gICAgICAgIHJlZ2lzdHJhdGlvbi5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgcmVnaXN0cmF0aW9uLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzLlxuICAgIC8vIE90aGVyd2lzZSwgYWRkIGEgbmV3IHJlZ2lzdGVyZWQgb2JzZXJ2ZXIgdG8gdGFyZ2V0J3MgbGlzdCBvZiByZWdpc3RlcmVkXG4gICAgLy8gb2JzZXJ2ZXJzIHdpdGggdGhlIGNvbnRleHQgb2JqZWN0IGFzIHRoZSBvYnNlcnZlciBhbmQgb3B0aW9ucyBhcyB0aGVcbiAgICAvLyBvcHRpb25zLCBhbmQgYWRkIHRhcmdldCB0byBjb250ZXh0IG9iamVjdCdzIGxpc3Qgb2Ygbm9kZXMgb24gd2hpY2ggaXRcbiAgICAvLyBpcyByZWdpc3RlcmVkLlxuICAgIGlmICghcmVnaXN0cmF0aW9uKSB7XG4gICAgICByZWdpc3RyYXRpb24gPSBuZXcgUmVnaXN0cmF0aW9uKHRoaXMsIHRhcmdldCwgb3B0aW9ucyk7XG4gICAgICByZWdpc3RyYXRpb25zLnB1c2gocmVnaXN0cmF0aW9uKTtcbiAgICAgIHRoaXMubm9kZXNfLnB1c2godGFyZ2V0KTtcbiAgICB9XG5cbiAgICByZWdpc3RyYXRpb24uYWRkTGlzdGVuZXJzKCk7XG4gIH0sXG5cbiAgZGlzY29ubmVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgcmVnaXN0cmF0aW9ucyA9IHJlZ2lzdHJhdGlvbnNUYWJsZS5nZXQobm9kZSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZ2lzdHJhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiA9IHJlZ2lzdHJhdGlvbnNbaV07XG4gICAgICAgIGlmIChyZWdpc3RyYXRpb24ub2JzZXJ2ZXIgPT09IHRoaXMpIHtcbiAgICAgICAgICByZWdpc3RyYXRpb24ucmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgcmVnaXN0cmF0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgLy8gRWFjaCBub2RlIGNhbiBvbmx5IGhhdmUgb25lIHJlZ2lzdGVyZWQgb2JzZXJ2ZXIgYXNzb2NpYXRlZCB3aXRoXG4gICAgICAgICAgLy8gdGhpcyBvYnNlcnZlci5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMucmVjb3Jkc18gPSBbXTtcbiAgfSxcblxuICB0YWtlUmVjb3JkczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHlPZlJlY29yZHMgPSB0aGlzLnJlY29yZHNfO1xuICAgIHRoaXMucmVjb3Jkc18gPSBbXTtcbiAgICByZXR1cm4gY29weU9mUmVjb3JkcztcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBNdXRhdGlvblJlY29yZCh0eXBlLCB0YXJnZXQpIHtcbiAgdGhpcy50eXBlID0gdHlwZTtcbiAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gIHRoaXMuYWRkZWROb2RlcyA9IFtdO1xuICB0aGlzLnJlbW92ZWROb2RlcyA9IFtdO1xuICB0aGlzLnByZXZpb3VzU2libGluZyA9IG51bGw7XG4gIHRoaXMubmV4dFNpYmxpbmcgPSBudWxsO1xuICB0aGlzLmF0dHJpYnV0ZU5hbWUgPSBudWxsO1xuICB0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZSA9IG51bGw7XG4gIHRoaXMub2xkVmFsdWUgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBjb3B5TXV0YXRpb25SZWNvcmQob3JpZ2luYWwpIHtcbiAgdmFyIHJlY29yZCA9IG5ldyBNdXRhdGlvblJlY29yZChvcmlnaW5hbC50eXBlLCBvcmlnaW5hbC50YXJnZXQpO1xuICByZWNvcmQuYWRkZWROb2RlcyA9IG9yaWdpbmFsLmFkZGVkTm9kZXMuc2xpY2UoKTtcbiAgcmVjb3JkLnJlbW92ZWROb2RlcyA9IG9yaWdpbmFsLnJlbW92ZWROb2Rlcy5zbGljZSgpO1xuICByZWNvcmQucHJldmlvdXNTaWJsaW5nID0gb3JpZ2luYWwucHJldmlvdXNTaWJsaW5nO1xuICByZWNvcmQubmV4dFNpYmxpbmcgPSBvcmlnaW5hbC5uZXh0U2libGluZztcbiAgcmVjb3JkLmF0dHJpYnV0ZU5hbWUgPSBvcmlnaW5hbC5hdHRyaWJ1dGVOYW1lO1xuICByZWNvcmQuYXR0cmlidXRlTmFtZXNwYWNlID0gb3JpZ2luYWwuYXR0cmlidXRlTmFtZXNwYWNlO1xuICByZWNvcmQub2xkVmFsdWUgPSBvcmlnaW5hbC5vbGRWYWx1ZTtcbiAgcmV0dXJuIHJlY29yZDtcbn07XG5cbi8vIFdlIGtlZXAgdHJhY2sgb2YgdGhlIHR3byAocG9zc2libHkgb25lKSByZWNvcmRzIHVzZWQgaW4gYSBzaW5nbGUgbXV0YXRpb24uXG52YXIgY3VycmVudFJlY29yZCwgcmVjb3JkV2l0aE9sZFZhbHVlO1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZWNvcmQgd2l0aG91dCB8b2xkVmFsdWV8IGFuZCBjYWNoZXMgaXQgYXMgfGN1cnJlbnRSZWNvcmR8IGZvclxuICogbGF0ZXIgdXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IG9sZFZhbHVlXG4gKiBAcmV0dXJuIHtNdXRhdGlvblJlY29yZH1cbiAqL1xuZnVuY3Rpb24gZ2V0UmVjb3JkKHR5cGUsIHRhcmdldCkge1xuICByZXR1cm4gY3VycmVudFJlY29yZCA9IG5ldyBNdXRhdGlvblJlY29yZCh0eXBlLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIEdldHMgb3IgY3JlYXRlcyBhIHJlY29yZCB3aXRoIHxvbGRWYWx1ZXwgYmFzZWQgaW4gdGhlIHxjdXJyZW50UmVjb3JkfFxuICogQHBhcmFtIHtzdHJpbmd9IG9sZFZhbHVlXG4gKiBAcmV0dXJuIHtNdXRhdGlvblJlY29yZH1cbiAqL1xuZnVuY3Rpb24gZ2V0UmVjb3JkV2l0aE9sZFZhbHVlKG9sZFZhbHVlKSB7XG4gIGlmIChyZWNvcmRXaXRoT2xkVmFsdWUpXG4gICAgcmV0dXJuIHJlY29yZFdpdGhPbGRWYWx1ZTtcbiAgcmVjb3JkV2l0aE9sZFZhbHVlID0gY29weU11dGF0aW9uUmVjb3JkKGN1cnJlbnRSZWNvcmQpO1xuICByZWNvcmRXaXRoT2xkVmFsdWUub2xkVmFsdWUgPSBvbGRWYWx1ZTtcbiAgcmV0dXJuIHJlY29yZFdpdGhPbGRWYWx1ZTtcbn1cblxuZnVuY3Rpb24gY2xlYXJSZWNvcmRzKCkge1xuICBjdXJyZW50UmVjb3JkID0gcmVjb3JkV2l0aE9sZFZhbHVlID0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TXV0YXRpb25SZWNvcmR9IHJlY29yZFxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcmVjb3JkIHJlcHJlc2VudHMgYSByZWNvcmQgZnJvbSB0aGUgY3VycmVudFxuICogbXV0YXRpb24gZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIHJlY29yZFJlcHJlc2VudHNDdXJyZW50TXV0YXRpb24ocmVjb3JkKSB7XG4gIHJldHVybiByZWNvcmQgPT09IHJlY29yZFdpdGhPbGRWYWx1ZSB8fCByZWNvcmQgPT09IGN1cnJlbnRSZWNvcmQ7XG59XG5cbi8qKlxuICogU2VsZWN0cyB3aGljaCByZWNvcmQsIGlmIGFueSwgdG8gcmVwbGFjZSB0aGUgbGFzdCByZWNvcmQgaW4gdGhlIHF1ZXVlLlxuICogVGhpcyByZXR1cm5zIHxudWxsfCBpZiBubyByZWNvcmQgc2hvdWxkIGJlIHJlcGxhY2VkLlxuICpcbiAqIEBwYXJhbSB7TXV0YXRpb25SZWNvcmR9IGxhc3RSZWNvcmRcbiAqIEBwYXJhbSB7TXV0YXRpb25SZWNvcmR9IG5ld1JlY29yZFxuICogQHBhcmFtIHtNdXRhdGlvblJlY29yZH1cbiAqL1xuZnVuY3Rpb24gc2VsZWN0UmVjb3JkKGxhc3RSZWNvcmQsIG5ld1JlY29yZCkge1xuICBpZiAobGFzdFJlY29yZCA9PT0gbmV3UmVjb3JkKVxuICAgIHJldHVybiBsYXN0UmVjb3JkO1xuXG4gIC8vIENoZWNrIGlmIHRoZSB0aGUgcmVjb3JkIHdlIGFyZSBhZGRpbmcgcmVwcmVzZW50cyB0aGUgc2FtZSByZWNvcmQuIElmXG4gIC8vIHNvLCB3ZSBrZWVwIHRoZSBvbmUgd2l0aCB0aGUgb2xkVmFsdWUgaW4gaXQuXG4gIGlmIChyZWNvcmRXaXRoT2xkVmFsdWUgJiYgcmVjb3JkUmVwcmVzZW50c0N1cnJlbnRNdXRhdGlvbihsYXN0UmVjb3JkKSlcbiAgICByZXR1cm4gcmVjb3JkV2l0aE9sZFZhbHVlO1xuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENsYXNzIHVzZWQgdG8gcmVwcmVzZW50IGEgcmVnaXN0ZXJlZCBvYnNlcnZlci5cbiAqIEBwYXJhbSB7TXV0YXRpb25PYnNlcnZlcn0gb2JzZXJ2ZXJcbiAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge011dGF0aW9uT2JzZXJ2ZXJJbml0fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUmVnaXN0cmF0aW9uKG9ic2VydmVyLCB0YXJnZXQsIG9wdGlvbnMpIHtcbiAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzID0gW107XG59XG5cblJlZ2lzdHJhdGlvbi5wcm90b3R5cGUgPSB7XG4gIGVucXVldWU6IGZ1bmN0aW9uKHJlY29yZCkge1xuICAgIHZhciByZWNvcmRzID0gdGhpcy5vYnNlcnZlci5yZWNvcmRzXztcbiAgICB2YXIgbGVuZ3RoID0gcmVjb3Jkcy5sZW5ndGg7XG5cbiAgICAvLyBUaGVyZSBhcmUgY2FzZXMgd2hlcmUgd2UgcmVwbGFjZSB0aGUgbGFzdCByZWNvcmQgd2l0aCB0aGUgbmV3IHJlY29yZC5cbiAgICAvLyBGb3IgZXhhbXBsZSBpZiB0aGUgcmVjb3JkIHJlcHJlc2VudHMgdGhlIHNhbWUgbXV0YXRpb24gd2UgbmVlZCB0byB1c2VcbiAgICAvLyB0aGUgb25lIHdpdGggdGhlIG9sZFZhbHVlLiBJZiB3ZSBnZXQgc2FtZSByZWNvcmQgKHRoaXMgY2FuIGhhcHBlbiBhcyB3ZVxuICAgIC8vIHdhbGsgdXAgdGhlIHRyZWUpIHdlIGlnbm9yZSB0aGUgbmV3IHJlY29yZC5cbiAgICBpZiAocmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgbGFzdFJlY29yZCA9IHJlY29yZHNbbGVuZ3RoIC0gMV07XG4gICAgICB2YXIgcmVjb3JkVG9SZXBsYWNlTGFzdCA9IHNlbGVjdFJlY29yZChsYXN0UmVjb3JkLCByZWNvcmQpO1xuICAgICAgaWYgKHJlY29yZFRvUmVwbGFjZUxhc3QpIHtcbiAgICAgICAgcmVjb3Jkc1tsZW5ndGggLSAxXSA9IHJlY29yZFRvUmVwbGFjZUxhc3Q7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVDYWxsYmFjayh0aGlzLm9ic2VydmVyKTtcbiAgICB9XG5cbiAgICByZWNvcmRzW2xlbmd0aF0gPSByZWNvcmQ7XG4gIH0sXG5cbiAgYWRkTGlzdGVuZXJzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpO1xuICB9LFxuXG4gIGFkZExpc3RlbmVyc186IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVzKVxuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdET01BdHRyTW9kaWZpZWQnLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmIChvcHRpb25zLmNoYXJhY3RlckRhdGEpXG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNoYXJhY3RlckRhdGFNb2RpZmllZCcsIHRoaXMsIHRydWUpO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hpbGRMaXN0KVxuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmIChvcHRpb25zLmNoaWxkTGlzdCB8fCBvcHRpb25zLnN1YnRyZWUpXG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkJywgdGhpcywgdHJ1ZSk7XG4gIH0sXG5cbiAgcmVtb3ZlTGlzdGVuZXJzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpO1xuICB9LFxuXG4gIHJlbW92ZUxpc3RlbmVyc186IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVzKVxuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdET01BdHRyTW9kaWZpZWQnLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmIChvcHRpb25zLmNoYXJhY3RlckRhdGEpXG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNoYXJhY3RlckRhdGFNb2RpZmllZCcsIHRoaXMsIHRydWUpO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hpbGRMaXN0KVxuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmIChvcHRpb25zLmNoaWxkTGlzdCB8fCBvcHRpb25zLnN1YnRyZWUpXG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkJywgdGhpcywgdHJ1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZHMgYSB0cmFuc2llbnQgb2JzZXJ2ZXIgb24gbm9kZS4gVGhlIHRyYW5zaWVudCBvYnNlcnZlciBnZXRzIHJlbW92ZWRcbiAgICogbmV4dCB0aW1lIHdlIGRlbGl2ZXIgdGhlIGNoYW5nZSByZWNvcmRzLlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICovXG4gIGFkZFRyYW5zaWVudE9ic2VydmVyOiBmdW5jdGlvbihub2RlKSB7XG4gICAgLy8gRG9uJ3QgYWRkIHRyYW5zaWVudCBvYnNlcnZlcnMgb24gdGhlIHRhcmdldCBpdHNlbGYuIFdlIGFscmVhZHkgaGF2ZSBhbGxcbiAgICAvLyB0aGUgcmVxdWlyZWQgbGlzdGVuZXJzIHNldCB1cCBvbiB0aGUgdGFyZ2V0LlxuICAgIGlmIChub2RlID09PSB0aGlzLnRhcmdldClcbiAgICAgIHJldHVybjtcblxuICAgIHRoaXMuYWRkTGlzdGVuZXJzXyhub2RlKTtcbiAgICB0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChub2RlKTtcbiAgICB2YXIgcmVnaXN0cmF0aW9ucyA9IHJlZ2lzdHJhdGlvbnNUYWJsZS5nZXQobm9kZSk7XG4gICAgaWYgKCFyZWdpc3RyYXRpb25zKVxuICAgICAgcmVnaXN0cmF0aW9uc1RhYmxlLnNldChub2RlLCByZWdpc3RyYXRpb25zID0gW10pO1xuXG4gICAgLy8gV2Uga25vdyB0aGF0IHJlZ2lzdHJhdGlvbnMgZG9lcyBub3QgY29udGFpbiB0aGlzIGJlY2F1c2Ugd2UgYWxyZWFkeVxuICAgIC8vIGNoZWNrZWQgaWYgbm9kZSA9PT0gdGhpcy50YXJnZXQuXG4gICAgcmVnaXN0cmF0aW9ucy5wdXNoKHRoaXMpO1xuICB9LFxuXG4gIHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRyYW5zaWVudE9ic2VydmVkTm9kZXMgPSB0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7XG4gICAgdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzID0gW107XG5cbiAgICB0cmFuc2llbnRPYnNlcnZlZE5vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xuICAgICAgLy8gVHJhbnNpZW50IG9ic2VydmVycyBhcmUgbmV2ZXIgYWRkZWQgdG8gdGhlIHRhcmdldC5cbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzXyhub2RlKTtcblxuICAgICAgdmFyIHJlZ2lzdHJhdGlvbnMgPSByZWdpc3RyYXRpb25zVGFibGUuZ2V0KG5vZGUpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWdpc3RyYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25zW2ldID09PSB0aGlzKSB7XG4gICAgICAgICAgcmVnaXN0cmF0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgLy8gRWFjaCBub2RlIGNhbiBvbmx5IGhhdmUgb25lIHJlZ2lzdGVyZWQgb2JzZXJ2ZXIgYXNzb2NpYXRlZCB3aXRoXG4gICAgICAgICAgLy8gdGhpcyBvYnNlcnZlci5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9LFxuXG4gIGhhbmRsZUV2ZW50OiBmdW5jdGlvbihlKSB7XG4gICAgLy8gU3RvcCBwcm9wYWdhdGlvbiBzaW5jZSB3ZSBhcmUgbWFuYWdpbmcgdGhlIHByb3BhZ2F0aW9uIG1hbnVhbGx5LlxuICAgIC8vIFRoaXMgbWVhbnMgdGhhdCBvdGhlciBtdXRhdGlvbiBldmVudHMgb24gdGhlIHBhZ2Ugd2lsbCBub3Qgd29ya1xuICAgIC8vIGNvcnJlY3RseSBidXQgdGhhdCBpcyBieSBkZXNpZ24uXG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICBjYXNlICdET01BdHRyTW9kaWZpZWQnOlxuICAgICAgICAvLyBodHRwOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1tby1xdWV1ZS1hdHRyaWJ1dGVzXG5cbiAgICAgICAgdmFyIG5hbWUgPSBlLmF0dHJOYW1lO1xuICAgICAgICB2YXIgbmFtZXNwYWNlID0gZS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkk7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcblxuICAgICAgICAvLyAxLlxuICAgICAgICB2YXIgcmVjb3JkID0gbmV3IGdldFJlY29yZCgnYXR0cmlidXRlcycsIHRhcmdldCk7XG4gICAgICAgIHJlY29yZC5hdHRyaWJ1dGVOYW1lID0gbmFtZTtcbiAgICAgICAgcmVjb3JkLmF0dHJpYnV0ZU5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblxuICAgICAgICAvLyAyLlxuICAgICAgICB2YXIgb2xkVmFsdWUgPSBudWxsO1xuICAgICAgICBpZiAoISh0eXBlb2YgTXV0YXRpb25FdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZS5hdHRyQ2hhbmdlID09PSBNdXRhdGlvbkV2ZW50LkFERElUSU9OKSlcbiAgICAgICAgICBvbGRWYWx1ZSA9IGUucHJldlZhbHVlO1xuXG4gICAgICAgIGZvckVhY2hBbmNlc3RvckFuZE9ic2VydmVyRW5xdWV1ZVJlY29yZCh0YXJnZXQsIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAvLyAzLjEsIDQuMlxuICAgICAgICAgIGlmICghb3B0aW9ucy5hdHRyaWJ1dGVzKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gMy4yLCA0LjNcbiAgICAgICAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVGaWx0ZXIgJiYgb3B0aW9ucy5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoICYmXG4gICAgICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YobmFtZSkgPT09IC0xICYmXG4gICAgICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YobmFtZXNwYWNlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gMy4zLCA0LjRcbiAgICAgICAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVPbGRWYWx1ZSlcbiAgICAgICAgICAgIHJldHVybiBnZXRSZWNvcmRXaXRoT2xkVmFsdWUob2xkVmFsdWUpO1xuXG4gICAgICAgICAgLy8gMy40LCA0LjVcbiAgICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgICB9KTtcblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkJzpcbiAgICAgICAgLy8gaHR0cDovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtbW8tcXVldWUtY2hhcmFjdGVyZGF0YVxuICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG5cbiAgICAgICAgLy8gMS5cbiAgICAgICAgdmFyIHJlY29yZCA9IGdldFJlY29yZCgnY2hhcmFjdGVyRGF0YScsIHRhcmdldCk7XG5cbiAgICAgICAgLy8gMi5cbiAgICAgICAgdmFyIG9sZFZhbHVlID0gZS5wcmV2VmFsdWU7XG5cblxuICAgICAgICBmb3JFYWNoQW5jZXN0b3JBbmRPYnNlcnZlckVucXVldWVSZWNvcmQodGFyZ2V0LCBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgLy8gMy4xLCA0LjJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMuY2hhcmFjdGVyRGF0YSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIC8vIDMuMiwgNC4zXG4gICAgICAgICAgaWYgKG9wdGlvbnMuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIGdldFJlY29yZFdpdGhPbGRWYWx1ZShvbGRWYWx1ZSk7XG5cbiAgICAgICAgICAvLyAzLjMsIDQuNFxuICAgICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdET01Ob2RlUmVtb3ZlZCc6XG4gICAgICAgIHRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoZS50YXJnZXQpO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2guXG4gICAgICBjYXNlICdET01Ob2RlSW5zZXJ0ZWQnOlxuICAgICAgICAvLyBodHRwOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1tby1xdWV1ZS1jaGlsZGxpc3RcbiAgICAgICAgdmFyIHRhcmdldCA9IGUucmVsYXRlZE5vZGU7XG4gICAgICAgIHZhciBjaGFuZ2VkTm9kZSA9IGUudGFyZ2V0O1xuICAgICAgICB2YXIgYWRkZWROb2RlcywgcmVtb3ZlZE5vZGVzO1xuICAgICAgICBpZiAoZS50eXBlID09PSAnRE9NTm9kZUluc2VydGVkJykge1xuICAgICAgICAgIGFkZGVkTm9kZXMgPSBbY2hhbmdlZE5vZGVdO1xuICAgICAgICAgIHJlbW92ZWROb2RlcyA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgYWRkZWROb2RlcyA9IFtdO1xuICAgICAgICAgIHJlbW92ZWROb2RlcyA9IFtjaGFuZ2VkTm9kZV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZpb3VzU2libGluZyA9IGNoYW5nZWROb2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgdmFyIG5leHRTaWJsaW5nID0gY2hhbmdlZE5vZGUubmV4dFNpYmxpbmc7XG5cbiAgICAgICAgLy8gMS5cbiAgICAgICAgdmFyIHJlY29yZCA9IGdldFJlY29yZCgnY2hpbGRMaXN0JywgdGFyZ2V0KTtcbiAgICAgICAgcmVjb3JkLmFkZGVkTm9kZXMgPSBhZGRlZE5vZGVzO1xuICAgICAgICByZWNvcmQucmVtb3ZlZE5vZGVzID0gcmVtb3ZlZE5vZGVzO1xuICAgICAgICByZWNvcmQucHJldmlvdXNTaWJsaW5nID0gcHJldmlvdXNTaWJsaW5nO1xuICAgICAgICByZWNvcmQubmV4dFNpYmxpbmcgPSBuZXh0U2libGluZztcblxuICAgICAgICBmb3JFYWNoQW5jZXN0b3JBbmRPYnNlcnZlckVucXVldWVSZWNvcmQodGFyZ2V0LCBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgLy8gMi4xLCAzLjJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMuY2hpbGRMaXN0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gMi4yLCAzLjNcbiAgICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGNsZWFyUmVjb3JkcygpO1xuICB9XG59O1xuXG5pZiAoIU11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgTXV0YXRpb25PYnNlcnZlciA9IEpzTXV0YXRpb25PYnNlcnZlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNdXRhdGlvbk9ic2VydmVyO1xuIiwiLy8gVGhpcyBmaWxlIGNhbiBiZSByZXF1aXJlZCBpbiBCcm93c2VyaWZ5IGFuZCBOb2RlLmpzIGZvciBhdXRvbWF0aWMgcG9seWZpbGxcbi8vIFRvIHVzZSBpdDogIHJlcXVpcmUoJ2VzNi1wcm9taXNlL2F1dG8nKTtcbid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi8nKS5wb2x5ZmlsbCgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oZG9jKSB7XG5cdC8vIFVzZSBKYXZhU2NyaXB0IHNjcmlwdCBtb2RlXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdC8qZ2xvYmFsIEVsZW1lbnQgKi9cblxuXHR2YXIgcG9sbHV0ZSA9IHRydWUsXG5cdFx0YXBpLFxuXHRcdHZlbmRvcixcblx0XHRhcGlzID0ge1xuXHRcdFx0Ly8gaHR0cDovL2R2Y3MudzMub3JnL2hnL2Z1bGxzY3JlZW4vcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWxcblx0XHRcdHczOiB7XG5cdFx0XHRcdGVuYWJsZWQ6IFwiZnVsbHNjcmVlbkVuYWJsZWRcIixcblx0XHRcdFx0ZWxlbWVudDogXCJmdWxsc2NyZWVuRWxlbWVudFwiLFxuXHRcdFx0XHRyZXF1ZXN0OiBcInJlcXVlc3RGdWxsc2NyZWVuXCIsXG5cdFx0XHRcdGV4aXQ6IFwiZXhpdEZ1bGxzY3JlZW5cIixcblx0XHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdFx0Y2hhbmdlOiBcImZ1bGxzY3JlZW5jaGFuZ2VcIixcblx0XHRcdFx0XHRlcnJvcjogXCJmdWxsc2NyZWVuZXJyb3JcIlxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0d2Via2l0OiB7XG5cdFx0XHRcdGVuYWJsZWQ6IFwid2Via2l0SXNGdWxsU2NyZWVuXCIsXG5cdFx0XHRcdGVsZW1lbnQ6IFwid2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50XCIsXG5cdFx0XHRcdHJlcXVlc3Q6IFwid2Via2l0UmVxdWVzdEZ1bGxTY3JlZW5cIixcblx0XHRcdFx0ZXhpdDogXCJ3ZWJraXRDYW5jZWxGdWxsU2NyZWVuXCIsXG5cdFx0XHRcdGV2ZW50czoge1xuXHRcdFx0XHRcdGNoYW5nZTogXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwid2Via2l0ZnVsbHNjcmVlbmVycm9yXCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdG1vejoge1xuXHRcdFx0XHRlbmFibGVkOiBcIm1vekZ1bGxTY3JlZW5FbmFibGVkXCIsXG5cdFx0XHRcdGVsZW1lbnQ6IFwibW96RnVsbFNjcmVlbkVsZW1lbnRcIixcblx0XHRcdFx0cmVxdWVzdDogXCJtb3pSZXF1ZXN0RnVsbFNjcmVlblwiLFxuXHRcdFx0XHRleGl0OiBcIm1vekNhbmNlbEZ1bGxTY3JlZW5cIixcblx0XHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdFx0Y2hhbmdlOiBcIm1vemZ1bGxzY3JlZW5jaGFuZ2VcIixcblx0XHRcdFx0XHRlcnJvcjogXCJtb3pmdWxsc2NyZWVuZXJyb3JcIlxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bXM6IHtcblx0XHRcdFx0ZW5hYmxlZDogXCJtc0Z1bGxzY3JlZW5FbmFibGVkXCIsXG5cdFx0XHRcdGVsZW1lbnQ6IFwibXNGdWxsc2NyZWVuRWxlbWVudFwiLFxuXHRcdFx0XHRyZXF1ZXN0OiBcIm1zUmVxdWVzdEZ1bGxzY3JlZW5cIixcblx0XHRcdFx0ZXhpdDogXCJtc0V4aXRGdWxsc2NyZWVuXCIsXG5cdFx0XHRcdGV2ZW50czoge1xuXHRcdFx0XHRcdGNoYW5nZTogXCJNU0Z1bGxzY3JlZW5DaGFuZ2VcIixcblx0XHRcdFx0XHRlcnJvcjogXCJNU0Z1bGxzY3JlZW5FcnJvclwiXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHczID0gYXBpcy53MztcblxuXHQvLyBMb29wIHRocm91Z2ggZWFjaCB2ZW5kb3IncyBzcGVjaWZpYyBBUElcblx0Zm9yICh2ZW5kb3IgaW4gYXBpcykge1xuXHRcdC8vIENoZWNrIGlmIGRvY3VtZW50IGhhcyB0aGUgXCJlbmFibGVkXCIgcHJvcGVydHlcblx0XHRpZiAoYXBpc1t2ZW5kb3JdLmVuYWJsZWQgaW4gZG9jKSB7XG5cdFx0XHQvLyBJdCBzZWVtcyB0aGlzIGJyb3dzZXIgc3VwcG9ydCB0aGUgZnVsbHNjcmVlbiBBUElcblx0XHRcdGFwaSA9IGFwaXNbdmVuZG9yXTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGRpc3BhdGNoKHR5cGUsIHRhcmdldCwgb3JpZykge1xuXHRcdHZhciBldmVudCA9IGRvYy5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuXG5cdFx0ZXZlbnQuaW5pdEV2ZW50KHR5cGUsIHRydWUsIGZhbHNlKTtcblx0XHQvLyBldmVudC5vcmlnaW5hbCA9IG9yaWc7XG5cblx0XHQvLyB2YXIgcHJvcHZhbCwgbyA9IHt9O1xuXHRcdC8vIGZvciAodmFyIHByb3AgaW4gb3JpZykge1xuXHRcdC8vIFx0cHJvcHZhbCA9IHR5cGVvZiBvcmlnW3Byb3BdO1xuXHRcdC8vIFx0c3dpdGNoIChwcm9wdmFsKSB7XG5cdFx0Ly8gXHRcdGNhc2UgJ2Z1bmN0aW9uJzpcblx0XHQvLyBcdFx0Y2FzZSAnb2JqZWN0Jzpcblx0XHQvLyBcdFx0Y2FzZSAnYXJyYXknOlxuXHRcdC8vIFx0XHRcdGJyZWFrO1xuXHRcdC8vIFx0XHRkZWZhdWx0OlxuXHRcdC8vIFx0XHRcdHByb3B2YWwgPSBvcmlnW3Byb3BdO1xuXHRcdC8vIFx0XHRcdGJyZWFrO1xuXHRcdC8vIFx0fVxuXHRcdC8vIFx0b1twcm9wXSA9IHByb3B2YWw7XG5cdFx0Ly8gfVxuXHRcdC8vIGNvbnNvbGUubG9nKFwiZnVsbHNjcmVlbiBwb2x5ZmlsbCByZWRpc3BhdGNoIGV2ZW50ICVzIC0+ICVzXCIsIG9yaWcudHlwZSwgdHlwZSwgbyk7XG5cblx0XHRjb25zb2xlLmxvZyhcImZ1bGxzY3JlZW4gcG9seWZpbGwgcmVkaXNwYXRjaCBldmVudCAlcyAtPiAlc1wiLCBvcmlnLnR5cGUsIHR5cGUpO1xuXG5cdFx0dGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHR9IC8vIGVuZCBvZiBkaXNwYXRjaCgpXG5cblx0ZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGUpIHtcblx0XHQvLyBSZWNvcHkgdGhlIGVuYWJsZWQgYW5kIGVsZW1lbnQgdmFsdWVzXG5cdFx0ZG9jW3czLmVuYWJsZWRdID0gZG9jW2FwaS5lbmFibGVkXTtcblx0XHRkb2NbdzMuZWxlbWVudF0gPSBkb2NbYXBpLmVsZW1lbnRdO1xuXG5cdFx0Y29uc29sZS5sb2coXCJmdWxsc2NyZWVuIHBvbHlmaWxsIHJlZGlzcGF0Y2ggZXZlbnRcIiwgZSk7XG5cdFx0ZGlzcGF0Y2godzMuZXZlbnRzLmNoYW5nZSwgZS50YXJnZXQsIGUpO1xuXHRcdC8vIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH0gLy8gZW5kIG9mIGhhbmRsZUNoYW5nZSgpXG5cblx0ZnVuY3Rpb24gaGFuZGxlRXJyb3IoZSkge1xuXHRcdGRpc3BhdGNoKHczLmV2ZW50cy5lcnJvciwgZS50YXJnZXQsIGUpO1xuXHR9IC8vIGVuZCBvZiBoYW5kbGVFcnJvcigpXG5cblx0Ly8gUG9sbHV0ZSBvbmx5IGlmIHRoZSBBUEkgZG9lc24ndCBhbHJlYWR5IGV4aXN0c1xuXHRpZiAocG9sbHV0ZSAmJiAhKHczLmVuYWJsZWQgaW4gZG9jKSAmJiBhcGkpIHtcblx0XHQvLyBBZGQgbGlzdGVuZXJzIGZvciBmdWxsc2NyZWVuIGV2ZW50c1xuXHRcdC8vIGRvYy5hZGRFdmVudExpc3RlbmVyKGFwaS5ldmVudHMuY2hhbmdlLCBoYW5kbGVDaGFuZ2UsIHRydWUpO1xuXHRcdC8vIGRvYy5hZGRFdmVudExpc3RlbmVyKGFwaS5ldmVudHMuZXJyb3IsIGhhbmRsZUVycm9yLCB0cnVlKTtcblx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lcihhcGkuZXZlbnRzLmNoYW5nZSwgaGFuZGxlQ2hhbmdlLCBmYWxzZSk7XG5cdFx0ZG9jLmFkZEV2ZW50TGlzdGVuZXIoYXBpLmV2ZW50cy5lcnJvciwgaGFuZGxlRXJyb3IsIGZhbHNlKTtcblxuXHRcdC8vIENvcHkgdGhlIGRlZmF1bHQgdmFsdWVcblx0XHRkb2NbdzMuZW5hYmxlZF0gPSBkb2NbYXBpLmVuYWJsZWRdO1xuXHRcdGRvY1t3My5lbGVtZW50XSA9IGRvY1thcGkuZWxlbWVudF07XG5cblx0XHQvLyBNYXRjaCB0aGUgcmVmZXJlbmNlIGZvciBleGl0RnVsbHNjcmVlblxuXHRcdGRvY1t3My5leGl0XSA9IGRvY1thcGkuZXhpdF07XG5cblx0XHQvLyBBZGQgdGhlIHJlcXVlc3QgbWV0aG9kIHRvIHRoZSBFbGVtZW50J3MgcHJvdG90eXBlXG5cdFx0RWxlbWVudC5wcm90b3R5cGVbdzMucmVxdWVzdF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzW2FwaS5yZXF1ZXN0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH07XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIEFQSSBmb3VuZCAob3IgdW5kZWZpbmVkIGlmIHRoZSBGdWxsc2NyZWVuIEFQSSBpcyB1bmF2YWlsYWJsZSlcblx0cmV0dXJuIGFwaTtcblxufShkb2N1bWVudCkpO1xuIiwiLyohIEhhbW1lci5KUyAtIHYyLjAuNyAtIDIwMTYtMDQtMjJcbiAqIGh0dHA6Ly9oYW1tZXJqcy5naXRodWIuaW8vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IEpvcmlrIFRhbmdlbGRlcjtcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIGV4cG9ydE5hbWUsIHVuZGVmaW5lZCkge1xuICAndXNlIHN0cmljdCc7XG5cbnZhciBWRU5ET1JfUFJFRklYRVMgPSBbJycsICd3ZWJraXQnLCAnTW96JywgJ01TJywgJ21zJywgJ28nXTtcbnZhciBURVNUX0VMRU1FTlQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxudmFyIFRZUEVfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXG52YXIgcm91bmQgPSBNYXRoLnJvdW5kO1xudmFyIGFicyA9IE1hdGguYWJzO1xudmFyIG5vdyA9IERhdGUubm93O1xuXG4vKipcbiAqIHNldCBhIHRpbWVvdXQgd2l0aCBhIGdpdmVuIHNjb3BlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBzZXRUaW1lb3V0Q29udGV4dChmbiwgdGltZW91dCwgY29udGV4dCkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGJpbmRGbihmbiwgY29udGV4dCksIHRpbWVvdXQpO1xufVxuXG4vKipcbiAqIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgd2Ugd2FudCB0byBleGVjdXRlIHRoZSBmbiBvbiBlYWNoIGVudHJ5XG4gKiBpZiBpdCBhaW50IGFuIGFycmF5IHdlIGRvbid0IHdhbnQgdG8gZG8gYSB0aGluZy5cbiAqIHRoaXMgaXMgdXNlZCBieSBhbGwgdGhlIG1ldGhvZHMgdGhhdCBhY2NlcHQgYSBzaW5nbGUgYW5kIGFycmF5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfEFycmF5fSBhcmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBmblxuICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGludm9rZUFycmF5QXJnKGFyZywgZm4sIGNvbnRleHQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgIGVhY2goYXJnLCBjb250ZXh0W2ZuXSwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogd2FsayBvYmplY3RzIGFuZCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICovXG5mdW5jdGlvbiBlYWNoKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgaTtcblxuICAgIGlmICghb2JqKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob2JqLmZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpIGluIG9iaikge1xuICAgICAgICAgICAgb2JqLmhhc093blByb3BlcnR5KGkpICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIHdyYXAgYSBtZXRob2Qgd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgYW5kIHN0YWNrIHRyYWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyB0aGUgc3VwcGxpZWQgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBkZXByZWNhdGUobWV0aG9kLCBuYW1lLCBtZXNzYWdlKSB7XG4gICAgdmFyIGRlcHJlY2F0aW9uTWVzc2FnZSA9ICdERVBSRUNBVEVEIE1FVEhPRDogJyArIG5hbWUgKyAnXFxuJyArIG1lc3NhZ2UgKyAnIEFUIFxcbic7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignZ2V0LXN0YWNrLXRyYWNlJyk7XG4gICAgICAgIHZhciBzdGFjayA9IGUgJiYgZS5zdGFjayA/IGUuc3RhY2sucmVwbGFjZSgvXlteXFwoXSs/W1xcbiRdL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eXFxzK2F0XFxzKy9nbSwgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sICd7YW5vbnltb3VzfSgpQCcpIDogJ1Vua25vd24gU3RhY2sgVHJhY2UnO1xuXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUud2FybiB8fCB3aW5kb3cuY29uc29sZS5sb2cpO1xuICAgICAgICBpZiAobG9nKSB7XG4gICAgICAgICAgICBsb2cuY2FsbCh3aW5kb3cuY29uc29sZSwgZGVwcmVjYXRpb25NZXNzYWdlLCBzdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHsuLi5PYmplY3R9IG9iamVjdHNfdG9fYXNzaWduXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB0YXJnZXRcbiAqL1xudmFyIGFzc2lnbjtcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xufVxuXG4vKipcbiAqIGV4dGVuZCBvYmplY3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFttZXJnZT1mYWxzZV1cbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIGV4dGVuZCA9IGRlcHJlY2F0ZShmdW5jdGlvbiBleHRlbmQoZGVzdCwgc3JjLCBtZXJnZSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc3JjKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW1lcmdlIHx8IChtZXJnZSAmJiBkZXN0W2tleXNbaV1dID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBkZXN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59LCAnZXh0ZW5kJywgJ1VzZSBgYXNzaWduYC4nKTtcblxuLyoqXG4gKiBtZXJnZSB0aGUgdmFsdWVzIGZyb20gc3JjIGluIHRoZSBkZXN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIHRoYXQgZXhpc3QgaW4gZGVzdCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzcmNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG4gKi9cbnZhciBtZXJnZSA9IGRlcHJlY2F0ZShmdW5jdGlvbiBtZXJnZShkZXN0LCBzcmMpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYywgdHJ1ZSk7XG59LCAnbWVyZ2UnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIHNpbXBsZSBjbGFzcyBpbmhlcml0YW5jZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hpbGRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGJhc2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc11cbiAqL1xuZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcGVydGllcykge1xuICAgIHZhciBiYXNlUCA9IGJhc2UucHJvdG90eXBlLFxuICAgICAgICBjaGlsZFA7XG5cbiAgICBjaGlsZFAgPSBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VQKTtcbiAgICBjaGlsZFAuY29uc3RydWN0b3IgPSBjaGlsZDtcbiAgICBjaGlsZFAuX3N1cGVyID0gYmFzZVA7XG5cbiAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICBhc3NpZ24oY2hpbGRQLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogc2ltcGxlIGZ1bmN0aW9uIGJpbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBiaW5kRm4oZm4sIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gYm91bmRGbigpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBsZXQgYSBib29sZWFuIHZhbHVlIGFsc28gYmUgYSBmdW5jdGlvbiB0aGF0IG11c3QgcmV0dXJuIGEgYm9vbGVhblxuICogdGhpcyBmaXJzdCBpdGVtIGluIGFyZ3Mgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZXh0XG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IHZhbFxuICogQHBhcmFtIHtBcnJheX0gW2FyZ3NdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gYm9vbE9yRm4odmFsLCBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT0gVFlQRV9GVU5DVElPTikge1xuICAgICAgICByZXR1cm4gdmFsLmFwcGx5KGFyZ3MgPyBhcmdzWzBdIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogdXNlIHRoZSB2YWwyIHdoZW4gdmFsMSBpcyB1bmRlZmluZWRcbiAqIEBwYXJhbSB7Kn0gdmFsMVxuICogQHBhcmFtIHsqfSB2YWwyXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gaWZVbmRlZmluZWQodmFsMSwgdmFsMikge1xuICAgIHJldHVybiAodmFsMSA9PT0gdW5kZWZpbmVkKSA/IHZhbDIgOiB2YWwxO1xufVxuXG4vKipcbiAqIGFkZEV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiByZW1vdmVFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2VcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcbiAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogZmluZCBpZiBhIG5vZGUgaXMgaW4gdGhlIGdpdmVuIHBhcmVudFxuICogQG1ldGhvZCBoYXNQYXJlbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHJldHVybiB7Qm9vbGVhbn0gZm91bmRcbiAqL1xuZnVuY3Rpb24gaGFzUGFyZW50KG5vZGUsIHBhcmVudCkge1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHNtYWxsIGluZGV4T2Ygd3JhcHBlclxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEByZXR1cm5zIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBpblN0cihzdHIsIGZpbmQpIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2YoZmluZCkgPiAtMTtcbn1cblxuLyoqXG4gKiBzcGxpdCBzdHJpbmcgb24gd2hpdGVzcGFjZVxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybnMge0FycmF5fSB3b3Jkc1xuICovXG5mdW5jdGlvbiBzcGxpdFN0cihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy9nKTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgYXJyYXkgY29udGFpbnMgdGhlIG9iamVjdCB1c2luZyBpbmRleE9mIG9yIGEgc2ltcGxlIHBvbHlGaWxsXG4gKiBAcGFyYW0ge0FycmF5fSBzcmNcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG4gKiBAcGFyYW0ge1N0cmluZ30gW2ZpbmRCeUtleV1cbiAqIEByZXR1cm4ge0Jvb2xlYW58TnVtYmVyfSBmYWxzZSB3aGVuIG5vdCBmb3VuZCwgb3IgdGhlIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGluQXJyYXkoc3JjLCBmaW5kLCBmaW5kQnlLZXkpIHtcbiAgICBpZiAoc3JjLmluZGV4T2YgJiYgIWZpbmRCeUtleSkge1xuICAgICAgICByZXR1cm4gc3JjLmluZGV4T2YoZmluZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICgoZmluZEJ5S2V5ICYmIHNyY1tpXVtmaW5kQnlLZXldID09IGZpbmQpIHx8ICghZmluZEJ5S2V5ICYmIHNyY1tpXSA9PT0gZmluZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufVxuXG4vKipcbiAqIGNvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIHJlYWwgYXJyYXlzXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaiwgMCk7XG59XG5cbi8qKlxuICogdW5pcXVlIGFycmF5IHdpdGggb2JqZWN0cyBiYXNlZCBvbiBhIGtleSAobGlrZSAnaWQnKSBvciBqdXN0IGJ5IHRoZSBhcnJheSdzIHZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSBzcmMgW3tpZDoxfSx7aWQ6Mn0se2lkOjF9XVxuICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzb3J0PUZhbHNlXVxuICogQHJldHVybnMge0FycmF5fSBbe2lkOjF9LHtpZDoyfV1cbiAqL1xuZnVuY3Rpb24gdW5pcXVlQXJyYXkoc3JjLCBrZXksIHNvcnQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbCA9IGtleSA/IHNyY1tpXVtrZXldIDogc3JjW2ldO1xuICAgICAgICBpZiAoaW5BcnJheSh2YWx1ZXMsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goc3JjW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaV0gPSB2YWw7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoc29ydCkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydChmdW5jdGlvbiBzb3J0VW5pcXVlQXJyYXkoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gPiBiW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIGdldCB0aGUgcHJlZml4ZWQgcHJvcGVydHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICogQHJldHVybnMge1N0cmluZ3xVbmRlZmluZWR9IHByZWZpeGVkXG4gKi9cbmZ1bmN0aW9uIHByZWZpeGVkKG9iaiwgcHJvcGVydHkpIHtcbiAgICB2YXIgcHJlZml4LCBwcm9wO1xuICAgIHZhciBjYW1lbFByb3AgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpICsgcHJvcGVydHkuc2xpY2UoMSk7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBWRU5ET1JfUFJFRklYRVMubGVuZ3RoKSB7XG4gICAgICAgIHByZWZpeCA9IFZFTkRPUl9QUkVGSVhFU1tpXTtcbiAgICAgICAgcHJvcCA9IChwcmVmaXgpID8gcHJlZml4ICsgY2FtZWxQcm9wIDogcHJvcGVydHk7XG5cbiAgICAgICAgaWYgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogZ2V0IGEgdW5pcXVlIGlkXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB1bmlxdWVJZFxuICovXG52YXIgX3VuaXF1ZUlkID0gMTtcbmZ1bmN0aW9uIHVuaXF1ZUlkKCkge1xuICAgIHJldHVybiBfdW5pcXVlSWQrKztcbn1cblxuLyoqXG4gKiBnZXQgdGhlIHdpbmRvdyBvYmplY3Qgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybnMge0RvY3VtZW50Vmlld3xXaW5kb3d9XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvd0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgIHZhciBkb2MgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQgfHwgZWxlbWVudDtcbiAgICByZXR1cm4gKGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93IHx8IHdpbmRvdyk7XG59XG5cbnZhciBNT0JJTEVfUkVHRVggPSAvbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2k7XG5cbnZhciBTVVBQT1JUX1RPVUNIID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyk7XG52YXIgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IHByZWZpeGVkKHdpbmRvdywgJ1BvaW50ZXJFdmVudCcpICE9PSB1bmRlZmluZWQ7XG52YXIgU1VQUE9SVF9PTkxZX1RPVUNIID0gU1VQUE9SVF9UT1VDSCAmJiBNT0JJTEVfUkVHRVgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxudmFyIElOUFVUX1RZUEVfVE9VQ0ggPSAndG91Y2gnO1xudmFyIElOUFVUX1RZUEVfUEVOID0gJ3Blbic7XG52YXIgSU5QVVRfVFlQRV9NT1VTRSA9ICdtb3VzZSc7XG52YXIgSU5QVVRfVFlQRV9LSU5FQ1QgPSAna2luZWN0JztcblxudmFyIENPTVBVVEVfSU5URVJWQUwgPSAyNTtcblxudmFyIElOUFVUX1NUQVJUID0gMTtcbnZhciBJTlBVVF9NT1ZFID0gMjtcbnZhciBJTlBVVF9FTkQgPSA0O1xudmFyIElOUFVUX0NBTkNFTCA9IDg7XG5cbnZhciBESVJFQ1RJT05fTk9ORSA9IDE7XG52YXIgRElSRUNUSU9OX0xFRlQgPSAyO1xudmFyIERJUkVDVElPTl9SSUdIVCA9IDQ7XG52YXIgRElSRUNUSU9OX1VQID0gODtcbnZhciBESVJFQ1RJT05fRE9XTiA9IDE2O1xuXG52YXIgRElSRUNUSU9OX0hPUklaT05UQUwgPSBESVJFQ1RJT05fTEVGVCB8IERJUkVDVElPTl9SSUdIVDtcbnZhciBESVJFQ1RJT05fVkVSVElDQUwgPSBESVJFQ1RJT05fVVAgfCBESVJFQ1RJT05fRE9XTjtcbnZhciBESVJFQ1RJT05fQUxMID0gRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUw7XG5cbnZhciBQUk9QU19YWSA9IFsneCcsICd5J107XG52YXIgUFJPUFNfQ0xJRU5UX1hZID0gWydjbGllbnRYJywgJ2NsaWVudFknXTtcblxuLyoqXG4gKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0lucHV0fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIElucHV0KG1hbmFnZXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICB0aGlzLnRhcmdldCA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dFRhcmdldDtcblxuICAgIC8vIHNtYWxsZXIgd3JhcHBlciBhcm91bmQgdGhlIGhhbmRsZXIsIGZvciB0aGUgc2NvcGUgYW5kIHRoZSBlbmFibGVkIHN0YXRlIG9mIHRoZSBtYW5hZ2VyLFxuICAgIC8vIHNvIHdoZW4gZGlzYWJsZWQgdGhlIGlucHV0IGV2ZW50cyBhcmUgY29tcGxldGVseSBieXBhc3NlZC5cbiAgICB0aGlzLmRvbUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICBpZiAoYm9vbE9yRm4obWFuYWdlci5vcHRpb25zLmVuYWJsZSwgW21hbmFnZXJdKSkge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVyKGV2KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmluaXQoKTtcblxufVxuXG5JbnB1dC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2hvdWxkIGhhbmRsZSB0aGUgaW5wdXRFdmVudCBkYXRhIGFuZCB0cmlnZ2VyIHRoZSBjYWxsYmFja1xuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIGFkZEV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5iaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBjYWxsZWQgYnkgdGhlIE1hbmFnZXIgY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0SW5zdGFuY2UobWFuYWdlcikge1xuICAgIHZhciBUeXBlO1xuICAgIHZhciBpbnB1dENsYXNzID0gbWFuYWdlci5vcHRpb25zLmlucHV0Q2xhc3M7XG5cbiAgICBpZiAoaW5wdXRDbGFzcykge1xuICAgICAgICBUeXBlID0gaW5wdXRDbGFzcztcbiAgICB9IGVsc2UgaWYgKFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMpIHtcbiAgICAgICAgVHlwZSA9IFBvaW50ZXJFdmVudElucHV0O1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9PTkxZX1RPVUNIKSB7XG4gICAgICAgIFR5cGUgPSBUb3VjaElucHV0O1xuICAgIH0gZWxzZSBpZiAoIVNVUFBPUlRfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IE1vdXNlSW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoTW91c2VJbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyAoVHlwZSkobWFuYWdlciwgaW5wdXRIYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBoYW5kbGUgaW5wdXQgZXZlbnRzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBpbnB1dEhhbmRsZXIobWFuYWdlciwgZXZlbnRUeXBlLCBpbnB1dCkge1xuICAgIHZhciBwb2ludGVyc0xlbiA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgY2hhbmdlZFBvaW50ZXJzTGVuID0gaW5wdXQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgaXNGaXJzdCA9IChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcbiAgICB2YXIgaXNGaW5hbCA9IChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcblxuICAgIGlucHV0LmlzRmlyc3QgPSAhIWlzRmlyc3Q7XG4gICAgaW5wdXQuaXNGaW5hbCA9ICEhaXNGaW5hbDtcblxuICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgIG1hbmFnZXIuc2Vzc2lvbiA9IHt9O1xuICAgIH1cblxuICAgIC8vIHNvdXJjZSBldmVudCBpcyB0aGUgbm9ybWFsaXplZCB2YWx1ZSBvZiB0aGUgZG9tRXZlbnRzXG4gICAgLy8gbGlrZSAndG91Y2hzdGFydCwgbW91c2V1cCwgcG9pbnRlcmRvd24nXG4gICAgaW5wdXQuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXG4gICAgLy8gY29tcHV0ZSBzY2FsZSwgcm90YXRpb24gZXRjXG4gICAgY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCk7XG5cbiAgICAvLyBlbWl0IHNlY3JldCBldmVudFxuICAgIG1hbmFnZXIuZW1pdCgnaGFtbWVyLmlucHV0JywgaW5wdXQpO1xuXG4gICAgbWFuYWdlci5yZWNvZ25pemUoaW5wdXQpO1xuICAgIG1hbmFnZXIuc2Vzc2lvbi5wcmV2SW5wdXQgPSBpbnB1dDtcbn1cblxuLyoqXG4gKiBleHRlbmQgdGhlIGRhdGEgd2l0aCBzb21lIHVzYWJsZSBwcm9wZXJ0aWVzIGxpa2Ugc2NhbGUsIHJvdGF0ZSwgdmVsb2NpdHkgZXRjXG4gKiBAcGFyYW0ge09iamVjdH0gbWFuYWdlclxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpIHtcbiAgICB2YXIgc2Vzc2lvbiA9IG1hbmFnZXIuc2Vzc2lvbjtcbiAgICB2YXIgcG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycztcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBzdG9yZSB0aGUgZmlyc3QgaW5wdXQgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBhbmQgZGlyZWN0aW9uXG4gICAgaWYgKCFzZXNzaW9uLmZpcnN0SW5wdXQpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdElucHV0ID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH1cblxuICAgIC8vIHRvIGNvbXB1dGUgc2NhbGUgYW5kIHJvdGF0aW9uIHdlIG5lZWQgdG8gc3RvcmUgdGhlIG11bHRpcGxlIHRvdWNoZXNcbiAgICBpZiAocG9pbnRlcnNMZW5ndGggPiAxICYmICFzZXNzaW9uLmZpcnN0TXVsdGlwbGUpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH0gZWxzZSBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0SW5wdXQgPSBzZXNzaW9uLmZpcnN0SW5wdXQ7XG4gICAgdmFyIGZpcnN0TXVsdGlwbGUgPSBzZXNzaW9uLmZpcnN0TXVsdGlwbGU7XG4gICAgdmFyIG9mZnNldENlbnRlciA9IGZpcnN0TXVsdGlwbGUgPyBmaXJzdE11bHRpcGxlLmNlbnRlciA6IGZpcnN0SW5wdXQuY2VudGVyO1xuXG4gICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlciA9IGdldENlbnRlcihwb2ludGVycyk7XG4gICAgaW5wdXQudGltZVN0YW1wID0gbm93KCk7XG4gICAgaW5wdXQuZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gZmlyc3RJbnB1dC50aW1lU3RhbXA7XG5cbiAgICBpbnB1dC5hbmdsZSA9IGdldEFuZ2xlKG9mZnNldENlbnRlciwgY2VudGVyKTtcbiAgICBpbnB1dC5kaXN0YW5jZSA9IGdldERpc3RhbmNlKG9mZnNldENlbnRlciwgY2VudGVyKTtcblxuICAgIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KTtcbiAgICBpbnB1dC5vZmZzZXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuXG4gICAgdmFyIG92ZXJhbGxWZWxvY2l0eSA9IGdldFZlbG9jaXR5KGlucHV0LmRlbHRhVGltZSwgaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVggPSBvdmVyYWxsVmVsb2NpdHkueDtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZID0gb3ZlcmFsbFZlbG9jaXR5Lnk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5ID0gKGFicyhvdmVyYWxsVmVsb2NpdHkueCkgPiBhYnMob3ZlcmFsbFZlbG9jaXR5LnkpKSA/IG92ZXJhbGxWZWxvY2l0eS54IDogb3ZlcmFsbFZlbG9jaXR5Lnk7XG5cbiAgICBpbnB1dC5zY2FsZSA9IGZpcnN0TXVsdGlwbGUgPyBnZXRTY2FsZShmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAxO1xuICAgIGlucHV0LnJvdGF0aW9uID0gZmlyc3RNdWx0aXBsZSA/IGdldFJvdGF0aW9uKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDA7XG5cbiAgICBpbnB1dC5tYXhQb2ludGVycyA9ICFzZXNzaW9uLnByZXZJbnB1dCA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6ICgoaW5wdXQucG9pbnRlcnMubGVuZ3RoID5cbiAgICAgICAgc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpO1xuXG4gICAgY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KTtcblxuICAgIC8vIGZpbmQgdGhlIGNvcnJlY3QgdGFyZ2V0XG4gICAgdmFyIHRhcmdldCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICBpZiAoaGFzUGFyZW50KGlucHV0LnNyY0V2ZW50LnRhcmdldCwgdGFyZ2V0KSkge1xuICAgICAgICB0YXJnZXQgPSBpbnB1dC5zcmNFdmVudC50YXJnZXQ7XG4gICAgfVxuICAgIGlucHV0LnRhcmdldCA9IHRhcmdldDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyO1xuICAgIHZhciBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSB8fCB7fTtcbiAgICB2YXIgcHJldklucHV0ID0gc2Vzc2lvbi5wcmV2SW5wdXQgfHwge307XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9TVEFSVCB8fCBwcmV2SW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9FTkQpIHtcbiAgICAgICAgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBwcmV2SW5wdXQuZGVsdGFYIHx8IDAsXG4gICAgICAgICAgICB5OiBwcmV2SW5wdXQuZGVsdGFZIHx8IDBcbiAgICAgICAgfTtcblxuICAgICAgICBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhID0ge1xuICAgICAgICAgICAgeDogY2VudGVyLngsXG4gICAgICAgICAgICB5OiBjZW50ZXIueVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlucHV0LmRlbHRhWCA9IHByZXZEZWx0YS54ICsgKGNlbnRlci54IC0gb2Zmc2V0LngpO1xuICAgIGlucHV0LmRlbHRhWSA9IHByZXZEZWx0YS55ICsgKGNlbnRlci55IC0gb2Zmc2V0LnkpO1xufVxuXG4vKipcbiAqIHZlbG9jaXR5IGlzIGNhbGN1bGF0ZWQgZXZlcnkgeCBtc1xuICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgbGFzdCA9IHNlc3Npb24ubGFzdEludGVydmFsIHx8IGlucHV0LFxuICAgICAgICBkZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBsYXN0LnRpbWVTdGFtcCxcbiAgICAgICAgdmVsb2NpdHksIHZlbG9jaXR5WCwgdmVsb2NpdHlZLCBkaXJlY3Rpb247XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0NBTkNFTCAmJiAoZGVsdGFUaW1lID4gQ09NUFVURV9JTlRFUlZBTCB8fCBsYXN0LnZlbG9jaXR5ID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBpbnB1dC5kZWx0YVggLSBsYXN0LmRlbHRhWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGlucHV0LmRlbHRhWSAtIGxhc3QuZGVsdGFZO1xuXG4gICAgICAgIHZhciB2ID0gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCBkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgIHZlbG9jaXR5WCA9IHYueDtcbiAgICAgICAgdmVsb2NpdHlZID0gdi55O1xuICAgICAgICB2ZWxvY2l0eSA9IChhYnModi54KSA+IGFicyh2LnkpKSA/IHYueCA6IHYueTtcbiAgICAgICAgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGRlbHRhWCwgZGVsdGFZKTtcblxuICAgICAgICBzZXNzaW9uLmxhc3RJbnRlcnZhbCA9IGlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVzZSBsYXRlc3QgdmVsb2NpdHkgaW5mbyBpZiBpdCBkb2Vzbid0IG92ZXJ0YWtlIGEgbWluaW11bSBwZXJpb2RcbiAgICAgICAgdmVsb2NpdHkgPSBsYXN0LnZlbG9jaXR5O1xuICAgICAgICB2ZWxvY2l0eVggPSBsYXN0LnZlbG9jaXR5WDtcbiAgICAgICAgdmVsb2NpdHlZID0gbGFzdC52ZWxvY2l0eVk7XG4gICAgICAgIGRpcmVjdGlvbiA9IGxhc3QuZGlyZWN0aW9uO1xuICAgIH1cblxuICAgIGlucHV0LnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgaW5wdXQudmVsb2NpdHlYID0gdmVsb2NpdHlYO1xuICAgIGlucHV0LnZlbG9jaXR5WSA9IHZlbG9jaXR5WTtcbiAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG59XG5cbi8qKlxuICogY3JlYXRlIGEgc2ltcGxlIGNsb25lIGZyb20gdGhlIGlucHV0IHVzZWQgZm9yIHN0b3JhZ2Ugb2YgZmlyc3RJbnB1dCBhbmQgZmlyc3RNdWx0aXBsZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBjbG9uZWRJbnB1dERhdGFcbiAqL1xuZnVuY3Rpb24gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpIHtcbiAgICAvLyBtYWtlIGEgc2ltcGxlIGNvcHkgb2YgdGhlIHBvaW50ZXJzIGJlY2F1c2Ugd2Ugd2lsbCBnZXQgYSByZWZlcmVuY2UgaWYgd2UgZG9uJ3RcbiAgICAvLyB3ZSBvbmx5IG5lZWQgY2xpZW50WFkgZm9yIHRoZSBjYWxjdWxhdGlvbnNcbiAgICB2YXIgcG9pbnRlcnMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBpbnB1dC5wb2ludGVycy5sZW5ndGgpIHtcbiAgICAgICAgcG9pbnRlcnNbaV0gPSB7XG4gICAgICAgICAgICBjbGllbnRYOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRYKSxcbiAgICAgICAgICAgIGNsaWVudFk6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0aW1lU3RhbXA6IG5vdygpLFxuICAgICAgICBwb2ludGVyczogcG9pbnRlcnMsXG4gICAgICAgIGNlbnRlcjogZ2V0Q2VudGVyKHBvaW50ZXJzKSxcbiAgICAgICAgZGVsdGFYOiBpbnB1dC5kZWx0YVgsXG4gICAgICAgIGRlbHRhWTogaW5wdXQuZGVsdGFZXG4gICAgfTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGNlbnRlciBvZiBhbGwgdGhlIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBwb2ludGVyc1xuICogQHJldHVybiB7T2JqZWN0fSBjZW50ZXIgY29udGFpbnMgYHhgIGFuZCBgeWAgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBnZXRDZW50ZXIocG9pbnRlcnMpIHtcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBubyBuZWVkIHRvIGxvb3Agd2hlbiBvbmx5IG9uZSB0b3VjaFxuICAgIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WCksXG4gICAgICAgICAgICB5OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciB4ID0gMCwgeSA9IDAsIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcG9pbnRlcnNMZW5ndGgpIHtcbiAgICAgICAgeCArPSBwb2ludGVyc1tpXS5jbGllbnRYO1xuICAgICAgICB5ICs9IHBvaW50ZXJzW2ldLmNsaWVudFk7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB4OiByb3VuZCh4IC8gcG9pbnRlcnNMZW5ndGgpLFxuICAgICAgICB5OiByb3VuZCh5IC8gcG9pbnRlcnNMZW5ndGgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHZlbG9jaXR5IGJldHdlZW4gdHdvIHBvaW50cy4gdW5pdCBpcyBpbiBweCBwZXIgbXMuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsdGFUaW1lXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge09iamVjdH0gdmVsb2NpdHkgYHhgIGFuZCBgeWBcbiAqL1xuZnVuY3Rpb24gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCB4LCB5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogeCAvIGRlbHRhVGltZSB8fCAwLFxuICAgICAgICB5OiB5IC8gZGVsdGFUaW1lIHx8IDBcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpcmVjdGlvblxuICovXG5mdW5jdGlvbiBnZXREaXJlY3Rpb24oeCwgeSkge1xuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgIHJldHVybiBESVJFQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICBpZiAoYWJzKHgpID49IGFicyh5KSkge1xuICAgICAgICByZXR1cm4geCA8IDAgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICB9XG4gICAgcmV0dXJuIHkgPCAwID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhYnNvbHV0ZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMSB7eCwgeX1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwMiB7eCwgeX1cbiAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcbiAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcHJvcHMgPSBQUk9QU19YWTtcbiAgICB9XG4gICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG4gICAgICAgIHkgPSBwMltwcm9wc1sxXV0gLSBwMVtwcm9wc1sxXV07XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KCh4ICogeCkgKyAoeSAqIHkpKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge09iamVjdH0gcDFcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMlxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuICovXG5mdW5jdGlvbiBnZXRBbmdsZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih5LCB4KSAqIDE4MCAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSByb3RhdGlvbiBkZWdyZWVzIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHJvdGF0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldFJvdGF0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0QW5nbGUoZW5kWzFdLCBlbmRbMF0sIFBST1BTX0NMSUVOVF9YWSkgKyBnZXRBbmdsZShzdGFydFsxXSwgc3RhcnRbMF0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBzY2FsZSBmYWN0b3IgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIG5vIHNjYWxlIGlzIDEsIGFuZCBnb2VzIGRvd24gdG8gMCB3aGVuIHBpbmNoZWQgdG9nZXRoZXIsIGFuZCBiaWdnZXIgd2hlbiBwaW5jaGVkIG91dFxuICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuICogQHJldHVybiB7TnVtYmVyfSBzY2FsZVxuICovXG5mdW5jdGlvbiBnZXRTY2FsZShzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGdldERpc3RhbmNlKGVuZFswXSwgZW5kWzFdLCBQUk9QU19DTElFTlRfWFkpIC8gZ2V0RGlzdGFuY2Uoc3RhcnRbMF0sIHN0YXJ0WzFdLCBQUk9QU19DTElFTlRfWFkpO1xufVxuXG52YXIgTU9VU0VfSU5QVVRfTUFQID0ge1xuICAgIG1vdXNlZG93bjogSU5QVVRfU1RBUlQsXG4gICAgbW91c2Vtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIG1vdXNldXA6IElOUFVUX0VORFxufTtcblxudmFyIE1PVVNFX0VMRU1FTlRfRVZFTlRTID0gJ21vdXNlZG93bic7XG52YXIgTU9VU0VfV0lORE9XX0VWRU5UUyA9ICdtb3VzZW1vdmUgbW91c2V1cCc7XG5cbi8qKlxuICogTW91c2UgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIE1vdXNlSW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gTU9VU0VfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IE1PVVNFX1dJTkRPV19FVkVOVFM7XG5cbiAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTsgLy8gbW91c2Vkb3duIHN0YXRlXG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1FaGFuZGxlcihldikge1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gTU9VU0VfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIG9uIHN0YXJ0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgbGVmdCBtb3VzZSBidXR0b24gZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgZXYuYnV0dG9uID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX01PVkUgJiYgZXYud2hpY2ggIT09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9IElOUFVUX0VORDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoIXRoaXMucHJlc3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX01PVVNFLFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG52YXIgUE9JTlRFUl9JTlBVVF9NQVAgPSB7XG4gICAgcG9pbnRlcmRvd246IElOUFVUX1NUQVJULFxuICAgIHBvaW50ZXJtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHBvaW50ZXJ1cDogSU5QVVRfRU5ELFxuICAgIHBvaW50ZXJjYW5jZWw6IElOUFVUX0NBTkNFTCxcbiAgICBwb2ludGVyb3V0OiBJTlBVVF9DQU5DRUxcbn07XG5cbi8vIGluIElFMTAgdGhlIHBvaW50ZXIgdHlwZXMgaXMgZGVmaW5lZCBhcyBhbiBlbnVtXG52YXIgSUUxMF9QT0lOVEVSX1RZUEVfRU5VTSA9IHtcbiAgICAyOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgIDM6IElOUFVUX1RZUEVfUEVOLFxuICAgIDQ6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgNTogSU5QVVRfVFlQRV9LSU5FQ1QgLy8gc2VlIGh0dHBzOi8vdHdpdHRlci5jb20vamFjb2Jyb3NzaS9zdGF0dXMvNDgwNTk2NDM4NDg5ODkwODE2XG59O1xuXG52YXIgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdwb2ludGVyZG93bic7XG52YXIgUE9JTlRFUl9XSU5ET1dfRVZFTlRTID0gJ3BvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsJztcblxuLy8gSUUxMCBoYXMgcHJlZml4ZWQgc3VwcG9ydCwgYW5kIGNhc2Utc2Vuc2l0aXZlXG5pZiAod2luZG93Lk1TUG9pbnRlckV2ZW50ICYmICF3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdNU1BvaW50ZXJEb3duJztcbiAgICBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAnTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWwnO1xufVxuXG4vKipcbiAqIFBvaW50ZXIgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFBvaW50ZXJFdmVudElucHV0KCkge1xuICAgIHRoaXMuZXZFbCA9IFBPSU5URVJfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFBPSU5URVJfV0lORE9XX0VWRU5UUztcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnN0b3JlID0gKHRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHMgPSBbXSk7XG59XG5cbmluaGVyaXQoUG9pbnRlckV2ZW50SW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFBFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnN0b3JlO1xuICAgICAgICB2YXIgcmVtb3ZlUG9pbnRlciA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBldmVudFR5cGVOb3JtYWxpemVkID0gZXYudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ21zJywgJycpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gUE9JTlRFUl9JTlBVVF9NQVBbZXZlbnRUeXBlTm9ybWFsaXplZF07XG4gICAgICAgIHZhciBwb2ludGVyVHlwZSA9IElFMTBfUE9JTlRFUl9UWVBFX0VOVU1bZXYucG9pbnRlclR5cGVdIHx8IGV2LnBvaW50ZXJUeXBlO1xuXG4gICAgICAgIHZhciBpc1RvdWNoID0gKHBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpO1xuXG4gICAgICAgIC8vIGdldCBpbmRleCBvZiB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG4gICAgICAgIHZhciBzdG9yZUluZGV4ID0gaW5BcnJheShzdG9yZSwgZXYucG9pbnRlcklkLCAncG9pbnRlcklkJyk7XG5cbiAgICAgICAgLy8gc3RhcnQgYW5kIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKGV2LmJ1dHRvbiA9PT0gMCB8fCBpc1RvdWNoKSkge1xuICAgICAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcmUucHVzaChldik7XG4gICAgICAgICAgICAgICAgc3RvcmVJbmRleCA9IHN0b3JlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgICAgIHJlbW92ZVBvaW50ZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXQgbm90IGZvdW5kLCBzbyB0aGUgcG9pbnRlciBoYXNuJ3QgYmVlbiBkb3duIChzbyBpdCdzIHByb2JhYmx5IGEgaG92ZXIpXG4gICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgc3RvcmVbc3RvcmVJbmRleF0gPSBldjtcblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogc3RvcmUsXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGUsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlbW92ZVBvaW50ZXIpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHRoZSBzdG9yZVxuICAgICAgICAgICAgc3RvcmUuc3BsaWNlKHN0b3JlSW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbnZhciBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0JztcbnZhciBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8qKlxuICogVG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFNpbmdsZVRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUztcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU2luZ2xlVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBURWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIHNob3VsZCB3ZSBoYW5kbGUgdGhlIHRvdWNoIGV2ZW50cz9cbiAgICAgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b3VjaGVzID0gbm9ybWFsaXplU2luZ2xlVG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcblxuICAgICAgICAvLyB3aGVuIGRvbmUsIHJlc2V0IHRoZSBzdGFydGVkIHN0YXRlXG4gICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgdG91Y2hlc1swXS5sZW5ndGggLSB0b3VjaGVzWzFdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAdGhpcyB7VG91Y2hJbnB1dH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU2luZ2xlVG91Y2hlcyhldiwgdHlwZSkge1xuICAgIHZhciBhbGwgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciBjaGFuZ2VkID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyk7XG5cbiAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIGFsbCA9IHVuaXF1ZUFycmF5KGFsbC5jb25jYXQoY2hhbmdlZCksICdpZGVudGlmaWVyJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFthbGwsIGNoYW5nZWRdO1xufVxuXG52YXIgVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBUT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBNdWx0aS11c2VyIHRvdWNoIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBUb3VjaElucHV0KCkge1xuICAgIHRoaXMuZXZUYXJnZXQgPSBUT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMudGFyZ2V0SWRzID0ge307XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFRvdWNoSW5wdXQsIElucHV0LCB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTVRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFRPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBnZXRUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuICAgICAgICBpZiAoIXRvdWNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBnZXRUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbFRvdWNoZXMgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciB0YXJnZXRJZHMgPSB0aGlzLnRhcmdldElkcztcblxuICAgIC8vIHdoZW4gdGhlcmUgaXMgb25seSBvbmUgdG91Y2gsIHRoZSBwcm9jZXNzIGNhbiBiZSBzaW1wbGlmaWVkXG4gICAgaWYgKHR5cGUgJiAoSU5QVVRfU1RBUlQgfCBJTlBVVF9NT1ZFKSAmJiBhbGxUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0YXJnZXRJZHNbYWxsVG91Y2hlc1swXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgIHJldHVybiBbYWxsVG91Y2hlcywgYWxsVG91Y2hlc107XG4gICAgfVxuXG4gICAgdmFyIGksXG4gICAgICAgIHRhcmdldFRvdWNoZXMsXG4gICAgICAgIGNoYW5nZWRUb3VjaGVzID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzID0gW10sXG4gICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXG4gICAgLy8gZ2V0IHRhcmdldCB0b3VjaGVzIGZyb20gdG91Y2hlc1xuICAgIHRhcmdldFRvdWNoZXMgPSBhbGxUb3VjaGVzLmZpbHRlcihmdW5jdGlvbih0b3VjaCkge1xuICAgICAgICByZXR1cm4gaGFzUGFyZW50KHRvdWNoLnRhcmdldCwgdGFyZ2V0KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbGxlY3QgdG91Y2hlc1xuICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFyZ2V0SWRzW3RhcmdldFRvdWNoZXNbaV0uaWRlbnRpZmllcl0gPSB0cnVlO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmlsdGVyIGNoYW5nZWQgdG91Y2hlcyB0byBvbmx5IGNvbnRhaW4gdG91Y2hlcyB0aGF0IGV4aXN0IGluIHRoZSBjb2xsZWN0ZWQgdGFyZ2V0IGlkc1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl0pIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzLnB1c2goY2hhbmdlZFRvdWNoZXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xlYW51cCByZW1vdmVkIHRvdWNoZXNcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgaWYgKCFjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICAgIC8vIG1lcmdlIHRhcmdldFRvdWNoZXMgd2l0aCBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyBzbyBpdCBjb250YWlucyBBTEwgdG91Y2hlcywgaW5jbHVkaW5nICdlbmQnIGFuZCAnY2FuY2VsJ1xuICAgICAgICB1bmlxdWVBcnJheSh0YXJnZXRUb3VjaGVzLmNvbmNhdChjaGFuZ2VkVGFyZ2V0VG91Y2hlcyksICdpZGVudGlmaWVyJywgdHJ1ZSksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzXG4gICAgXTtcbn1cblxuLyoqXG4gKiBDb21iaW5lZCB0b3VjaCBhbmQgbW91c2UgaW5wdXRcbiAqXG4gKiBUb3VjaCBoYXMgYSBoaWdoZXIgcHJpb3JpdHkgdGhlbiBtb3VzZSwgYW5kIHdoaWxlIHRvdWNoaW5nIG5vIG1vdXNlIGV2ZW50cyBhcmUgYWxsb3dlZC5cbiAqIFRoaXMgYmVjYXVzZSB0b3VjaCBkZXZpY2VzIGFsc28gZW1pdCBtb3VzZSBldmVudHMgd2hpbGUgZG9pbmcgYSB0b3VjaC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cblxudmFyIERFRFVQX1RJTUVPVVQgPSAyNTAwO1xudmFyIERFRFVQX0RJU1RBTkNFID0gMjU7XG5cbmZ1bmN0aW9uIFRvdWNoTW91c2VJbnB1dCgpIHtcbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdmFyIGhhbmRsZXIgPSBiaW5kRm4odGhpcy5oYW5kbGVyLCB0aGlzKTtcbiAgICB0aGlzLnRvdWNoID0gbmV3IFRvdWNoSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcbiAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcblxuICAgIHRoaXMucHJpbWFyeVRvdWNoID0gbnVsbDtcbiAgICB0aGlzLmxhc3RUb3VjaGVzID0gW107XG59XG5cbmluaGVyaXQoVG91Y2hNb3VzZUlucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzXG4gICAgICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXRFdmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBUTUVoYW5kbGVyKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSkge1xuICAgICAgICB2YXIgaXNUb3VjaCA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCksXG4gICAgICAgICAgICBpc01vdXNlID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX01PVVNFKTtcblxuICAgICAgICBpZiAoaXNNb3VzZSAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2hlbiB3ZSdyZSBpbiBhIHRvdWNoIGV2ZW50LCByZWNvcmQgdG91Y2hlcyB0byAgZGUtZHVwZSBzeW50aGV0aWMgbW91c2UgZXZlbnRcbiAgICAgICAgaWYgKGlzVG91Y2gpIHtcbiAgICAgICAgICAgIHJlY29yZFRvdWNoZXMuY2FsbCh0aGlzLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW91c2UgJiYgaXNTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGlucHV0RGF0YSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvdWNoLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tb3VzZS5kZXN0cm95KCk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIHJlY29yZFRvdWNoZXMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcbiAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBldmVudERhdGEuY2hhbmdlZFBvaW50ZXJzWzBdLmlkZW50aWZpZXI7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TGFzdFRvdWNoKGV2ZW50RGF0YSkge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF07XG5cbiAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5wcmltYXJ5VG91Y2gpIHtcbiAgICAgICAgdmFyIGxhc3RUb3VjaCA9IHt4OiB0b3VjaC5jbGllbnRYLCB5OiB0b3VjaC5jbGllbnRZfTtcbiAgICAgICAgdGhpcy5sYXN0VG91Y2hlcy5wdXNoKGxhc3RUb3VjaCk7XG4gICAgICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuICAgICAgICB2YXIgcmVtb3ZlTGFzdFRvdWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGx0cy5pbmRleE9mKGxhc3RUb3VjaCk7XG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbHRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2V0VGltZW91dChyZW1vdmVMYXN0VG91Y2gsIERFRFVQX1RJTUVPVVQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNTeW50aGV0aWNFdmVudChldmVudERhdGEpIHtcbiAgICB2YXIgeCA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRYLCB5ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxhc3RUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5sYXN0VG91Y2hlc1tpXTtcbiAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHQueCksIGR5ID0gTWF0aC5hYnMoeSAtIHQueSk7XG4gICAgICAgIGlmIChkeCA8PSBERURVUF9ESVNUQU5DRSAmJiBkeSA8PSBERURVUF9ESVNUQU5DRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgUFJFRklYRURfVE9VQ0hfQUNUSU9OID0gcHJlZml4ZWQoVEVTVF9FTEVNRU5ULnN0eWxlLCAndG91Y2hBY3Rpb24nKTtcbnZhciBOQVRJVkVfVE9VQ0hfQUNUSU9OID0gUFJFRklYRURfVE9VQ0hfQUNUSU9OICE9PSB1bmRlZmluZWQ7XG5cbi8vIG1hZ2ljYWwgdG91Y2hBY3Rpb24gdmFsdWVcbnZhciBUT1VDSF9BQ1RJT05fQ09NUFVURSA9ICdjb21wdXRlJztcbnZhciBUT1VDSF9BQ1RJT05fQVVUTyA9ICdhdXRvJztcbnZhciBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OID0gJ21hbmlwdWxhdGlvbic7IC8vIG5vdCBpbXBsZW1lbnRlZFxudmFyIFRPVUNIX0FDVElPTl9OT05FID0gJ25vbmUnO1xudmFyIFRPVUNIX0FDVElPTl9QQU5fWCA9ICdwYW4teCc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9ZID0gJ3Bhbi15JztcbnZhciBUT1VDSF9BQ1RJT05fTUFQID0gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpO1xuXG4vKipcbiAqIFRvdWNoIEFjdGlvblxuICogc2V0cyB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgb3IgdXNlcyB0aGUganMgYWx0ZXJuYXRpdmVcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVG91Y2hBY3Rpb24obWFuYWdlciwgdmFsdWUpIHtcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgIHRoaXMuc2V0KHZhbHVlKTtcbn1cblxuVG91Y2hBY3Rpb24ucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWUgb24gdGhlIGVsZW1lbnQgb3IgZW5hYmxlIHRoZSBwb2x5ZmlsbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gZmluZCBvdXQgdGhlIHRvdWNoLWFjdGlvbiBieSB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKHZhbHVlID09IFRPVUNIX0FDVElPTl9DT01QVVRFKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE5BVElWRV9UT1VDSF9BQ1RJT04gJiYgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGUgJiYgVE9VQ0hfQUNUSU9OX01BUFt2YWx1ZV0pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW1BSRUZJWEVEX1RPVUNIX0FDVElPTl0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGlvbnMgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICoganVzdCByZS1zZXQgdGhlIHRvdWNoQWN0aW9uIHZhbHVlXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjb21wdXRlIHRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IGJhc2VkIG9uIHRoZSByZWNvZ25pemVyJ3Mgc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIGNvbXB1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBlYWNoKHRoaXMubWFuYWdlci5yZWNvZ25pemVycywgZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICAgICAgaWYgKGJvb2xPckZuKHJlY29nbml6ZXIub3B0aW9ucy5lbmFibGUsIFtyZWNvZ25pemVyXSkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucy5jb25jYXQocmVjb2duaXplci5nZXRUb3VjaEFjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zLmpvaW4oJyAnKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbiBlYWNoIGlucHV0IGN5Y2xlIGFuZCBwcm92aWRlcyB0aGUgcHJldmVudGluZyBvZiB0aGUgYnJvd3NlciBiZWhhdmlvclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0czogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNyY0V2ZW50ID0gaW5wdXQuc3JjRXZlbnQ7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5vZmZzZXREaXJlY3Rpb247XG5cbiAgICAgICAgLy8gaWYgdGhlIHRvdWNoIGFjdGlvbiBkaWQgcHJldmVudGVkIG9uY2UgdGhpcyBzZXNzaW9uXG4gICAgICAgIGlmICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgdmFyIGhhc05vbmUgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgICAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9ZXTtcbiAgICAgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWF07XG5cbiAgICAgICAgaWYgKGhhc05vbmUpIHtcbiAgICAgICAgICAgIC8vZG8gbm90IHByZXZlbnQgZGVmYXVsdHMgaWYgdGhpcyBpcyBhIHRhcCBnZXN0dXJlXG5cbiAgICAgICAgICAgIHZhciBpc1RhcFBvaW50ZXIgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICB2YXIgaXNUYXBNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgMjtcbiAgICAgICAgICAgIHZhciBpc1RhcFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IDI1MDtcblxuICAgICAgICAgICAgaWYgKGlzVGFwUG9pbnRlciAmJiBpc1RhcE1vdmVtZW50ICYmIGlzVGFwVG91Y2hUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICAgICAgLy8gYHBhbi14IHBhbi15YCBtZWFucyBicm93c2VyIGhhbmRsZXMgYWxsIHNjcm9sbGluZy9wYW5uaW5nLCBkbyBub3QgcHJldmVudFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc05vbmUgfHxcbiAgICAgICAgICAgIChoYXNQYW5ZICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB8fFxuICAgICAgICAgICAgKGhhc1BhblggJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudFNyYyhzcmNFdmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FsbCBwcmV2ZW50RGVmYXVsdCB0byBwcmV2ZW50IHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvciAoc2Nyb2xsaW5nIGluIG1vc3QgY2FzZXMpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNyY0V2ZW50XG4gICAgICovXG4gICAgcHJldmVudFNyYzogZnVuY3Rpb24oc3JjRXZlbnQpIHtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIHdoZW4gdGhlIHRvdWNoQWN0aW9ucyBhcmUgY29sbGVjdGVkIHRoZXkgYXJlIG5vdCBhIHZhbGlkIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIGNsZWFuIHRoaW5ncyB1cC4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvbnNcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zKSB7XG4gICAgLy8gbm9uZVxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cbiAgICAvLyBpZiBib3RoIHBhbi14IGFuZCBwYW4teSBhcmUgc2V0IChkaWZmZXJlbnQgcmVjb2duaXplcnNcbiAgICAvLyBmb3IgZGlmZmVyZW50IGRpcmVjdGlvbnMsIGUuZy4gaG9yaXpvbnRhbCBwYW4gYnV0IHZlcnRpY2FsIHN3aXBlPylcbiAgICAvLyB3ZSBuZWVkIG5vbmUgKGFzIG90aGVyd2lzZSB3aXRoIHBhbi14IHBhbi15IGNvbWJpbmVkIG5vbmUgb2YgdGhlc2VcbiAgICAvLyByZWNvZ25pemVycyB3aWxsIHdvcmssIHNpbmNlIHRoZSBicm93c2VyIHdvdWxkIGhhbmRsZSBhbGwgcGFubmluZ1xuICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIC8vIHBhbi14IE9SIHBhbi15XG4gICAgaWYgKGhhc1BhblggfHwgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gaGFzUGFuWCA/IFRPVUNIX0FDVElPTl9QQU5fWCA6IFRPVUNIX0FDVElPTl9QQU5fWTtcbiAgICB9XG5cbiAgICAvLyBtYW5pcHVsYXRpb25cbiAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTikpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT047XG4gICAgfVxuXG4gICAgcmV0dXJuIFRPVUNIX0FDVElPTl9BVVRPO1xufVxuXG5mdW5jdGlvbiBnZXRUb3VjaEFjdGlvblByb3BzKCkge1xuICAgIGlmICghTkFUSVZFX1RPVUNIX0FDVElPTikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB0b3VjaE1hcCA9IHt9O1xuICAgIHZhciBjc3NTdXBwb3J0cyA9IHdpbmRvdy5DU1MgJiYgd2luZG93LkNTUy5zdXBwb3J0cztcbiAgICBbJ2F1dG8nLCAnbWFuaXB1bGF0aW9uJywgJ3Bhbi15JywgJ3Bhbi14JywgJ3Bhbi14IHBhbi15JywgJ25vbmUnXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCkge1xuXG4gICAgICAgIC8vIElmIGNzcy5zdXBwb3J0cyBpcyBub3Qgc3VwcG9ydGVkIGJ1dCB0aGVyZSBpcyBuYXRpdmUgdG91Y2gtYWN0aW9uIGFzc3VtZSBpdCBzdXBwb3J0c1xuICAgICAgICAvLyBhbGwgdmFsdWVzLiBUaGlzIGlzIHRoZSBjYXNlIGZvciBJRSAxMCBhbmQgMTEuXG4gICAgICAgIHRvdWNoTWFwW3ZhbF0gPSBjc3NTdXBwb3J0cyA/IHdpbmRvdy5DU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsIHZhbCkgOiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0b3VjaE1hcDtcbn1cblxuLyoqXG4gKiBSZWNvZ25pemVyIGZsb3cgZXhwbGFpbmVkOyAqXG4gKiBBbGwgcmVjb2duaXplcnMgaGF2ZSB0aGUgaW5pdGlhbCBzdGF0ZSBvZiBQT1NTSUJMRSB3aGVuIGEgaW5wdXQgc2Vzc2lvbiBzdGFydHMuXG4gKiBUaGUgZGVmaW5pdGlvbiBvZiBhIGlucHV0IHNlc3Npb24gaXMgZnJvbSB0aGUgZmlyc3QgaW5wdXQgdW50aWwgdGhlIGxhc3QgaW5wdXQsIHdpdGggYWxsIGl0J3MgbW92ZW1lbnQgaW4gaXQuICpcbiAqIEV4YW1wbGUgc2Vzc2lvbiBmb3IgbW91c2UtaW5wdXQ6IG1vdXNlZG93biAtPiBtb3VzZW1vdmUgLT4gbW91c2V1cFxuICpcbiAqIE9uIGVhY2ggcmVjb2duaXppbmcgY3ljbGUgKHNlZSBNYW5hZ2VyLnJlY29nbml6ZSkgdGhlIC5yZWNvZ25pemUoKSBtZXRob2QgaXMgZXhlY3V0ZWRcbiAqIHdoaWNoIGRldGVybWluZXMgd2l0aCBzdGF0ZSBpdCBzaG91bGQgYmUuXG4gKlxuICogSWYgdGhlIHJlY29nbml6ZXIgaGFzIHRoZSBzdGF0ZSBGQUlMRUQsIENBTkNFTExFRCBvciBSRUNPR05JWkVEIChlcXVhbHMgRU5ERUQpLCBpdCBpcyByZXNldCB0b1xuICogUE9TU0lCTEUgdG8gZ2l2ZSBpdCBhbm90aGVyIGNoYW5nZSBvbiB0aGUgbmV4dCBjeWNsZS5cbiAqXG4gKiAgICAgICAgICAgICAgIFBvc3NpYmxlXG4gKiAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgKy0tLS0tKy0tLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgKy0tLS0tKy0tLS0tKyAgICAgICAgICAgICAgIHxcbiAqICAgICAgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgIHxcbiAqICAgRmFpbGVkICAgICAgQ2FuY2VsbGVkICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLSstLS0tLS0rXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgUmVjb2duaXplZCAgICAgICBCZWdhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2VkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kZWQvUmVjb2duaXplZFxuICovXG52YXIgU1RBVEVfUE9TU0lCTEUgPSAxO1xudmFyIFNUQVRFX0JFR0FOID0gMjtcbnZhciBTVEFURV9DSEFOR0VEID0gNDtcbnZhciBTVEFURV9FTkRFRCA9IDg7XG52YXIgU1RBVEVfUkVDT0dOSVpFRCA9IFNUQVRFX0VOREVEO1xudmFyIFNUQVRFX0NBTkNFTExFRCA9IDE2O1xudmFyIFNUQVRFX0ZBSUxFRCA9IDMyO1xuXG4vKipcbiAqIFJlY29nbml6ZXJcbiAqIEV2ZXJ5IHJlY29nbml6ZXIgbmVlZHMgdG8gZXh0ZW5kIGZyb20gdGhpcyBjbGFzcy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gUmVjb2duaXplcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMuaWQgPSB1bmlxdWVJZCgpO1xuXG4gICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcblxuICAgIC8vIGRlZmF1bHQgaXMgZW5hYmxlIHRydWVcbiAgICB0aGlzLm9wdGlvbnMuZW5hYmxlID0gaWZVbmRlZmluZWQodGhpcy5vcHRpb25zLmVuYWJsZSwgdHJ1ZSk7XG5cbiAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG5cbiAgICB0aGlzLnNpbXVsdGFuZW91cyA9IHt9O1xuICAgIHRoaXMucmVxdWlyZUZhaWwgPSBbXTtcbn1cblxuUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7fSxcblxuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtSZWNvZ25pemVyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBhbHNvIHVwZGF0ZSB0aGUgdG91Y2hBY3Rpb24sIGluIGNhc2Ugc29tZXRoaW5nIGNoYW5nZWQgYWJvdXQgdGhlIGRpcmVjdGlvbnMvZW5hYmxlZCBzdGF0ZVxuICAgICAgICB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaW11bHRhbmVvdXMgPSB0aGlzLnNpbXVsdGFuZW91cztcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoIXNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdKSB7XG4gICAgICAgICAgICBzaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXSA9IG90aGVyUmVjb2duaXplcjtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZWNvZ25pemVXaXRoKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSBzaW11bHRhbmVvdXMgbGluay4gaXQgZG9lc250IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgZHJvcFJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlY29nbml6ZVdpdGgnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplciBjYW4gb25seSBydW4gd2hlbiBhbiBvdGhlciBpcyBmYWlsaW5nXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ3JlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlcXVpcmVGYWlsID0gdGhpcy5yZXF1aXJlRmFpbDtcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoaW5BcnJheShyZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJlcXVpcmVGYWlsLnB1c2gob3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZXF1aXJlRmFpbHVyZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZHJvcCB0aGUgcmVxdWlyZUZhaWx1cmUgbGluay4gaXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHRoaXMucmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGhhcyByZXF1aXJlIGZhaWx1cmVzIGJvb2xlYW5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBoYXNSZXF1aXJlRmFpbHVyZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGggPiAwO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBpZiB0aGUgcmVjb2duaXplciBjYW4gcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNhblJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBZb3Ugc2hvdWxkIHVzZSBgdHJ5RW1pdGAgaW5zdGVhZCBvZiBgZW1pdGAgZGlyZWN0bHkgdG8gY2hlY2tcbiAgICAgKiB0aGF0IGFsbCB0aGUgbmVlZGVkIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQgYmVmb3JlIGVtaXR0aW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLm1hbmFnZXIuZW1pdChldmVudCwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gJ3BhbnN0YXJ0JyBhbmQgJ3Bhbm1vdmUnXG4gICAgICAgIGlmIChzdGF0ZSA8IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCk7IC8vIHNpbXBsZSAnZXZlbnROYW1lJyBldmVudHNcblxuICAgICAgICBpZiAoaW5wdXQuYWRkaXRpb25hbEV2ZW50KSB7IC8vIGFkZGl0aW9uYWwgZXZlbnQocGFubGVmdCwgcGFucmlnaHQsIHBpbmNoaW4sIHBpbmNob3V0Li4uKVxuICAgICAgICAgICAgZW1pdChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFuZW5kIGFuZCBwYW5jYW5jZWxcbiAgICAgICAgaWYgKHN0YXRlID49IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhhdCBhbGwgdGhlIHJlcXVpcmUgZmFpbHVyZSByZWNvZ25pemVycyBoYXMgZmFpbGVkLFxuICAgICAqIGlmIHRydWUsIGl0IGVtaXRzIGEgZ2VzdHVyZSBldmVudCxcbiAgICAgKiBvdGhlcndpc2UsIHNldHVwIHRoZSBzdGF0ZSB0byBGQUlMRUQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgdHJ5RW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuRW1pdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpdCdzIGZhaWxpbmcgYW55d2F5XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbiB3ZSBlbWl0P1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGNhbkVtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMucmVxdWlyZUZhaWxbaV0uc3RhdGUgJiAoU1RBVEVfRkFJTEVEIHwgU1RBVEVfUE9TU0lCTEUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIC8vIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgaW5wdXREYXRhXG4gICAgICAgIC8vIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGlucHV0RGF0YSB3aXRob3V0IG1lc3NpbmcgdXAgdGhlIG90aGVyIHJlY29nbml6ZXJzXG4gICAgICAgIHZhciBpbnB1dERhdGFDbG9uZSA9IGFzc2lnbih7fSwgaW5wdXREYXRhKTtcblxuICAgICAgICAvLyBpcyBpcyBlbmFibGVkIGFuZCBhbGxvdyByZWNvZ25pemluZz9cbiAgICAgICAgaWYgKCFib29sT3JGbih0aGlzLm9wdGlvbnMuZW5hYmxlLCBbdGhpcywgaW5wdXREYXRhQ2xvbmVdKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0IHdoZW4gd2UndmUgcmVhY2hlZCB0aGUgZW5kXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX1JFQ09HTklaRUQgfCBTVEFURV9DQU5DRUxMRUQgfCBTVEFURV9GQUlMRUQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5wcm9jZXNzKGlucHV0RGF0YUNsb25lKTtcblxuICAgICAgICAvLyB0aGUgcmVjb2duaXplciBoYXMgcmVjb2duaXplZCBhIGdlc3R1cmVcbiAgICAgICAgLy8gc28gdHJpZ2dlciBhbiBldmVudFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCB8IFNUQVRFX0NBTkNFTExFRCkpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5RW1pdChpbnB1dERhdGFDbG9uZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBzdGF0ZSBvZiB0aGUgcmVjb2duaXplclxuICAgICAqIHRoZSBhY3R1YWwgcmVjb2duaXppbmcgaGFwcGVucyBpbiB0aGlzIG1ldGhvZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqIEByZXR1cm5zIHtDb25zdH0gU1RBVEVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dERhdGEpIHsgfSwgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHByZWZlcnJlZCB0b3VjaC1hY3Rpb25cbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZ2VzdHVyZSBpc24ndCBhbGxvd2VkIHRvIHJlY29nbml6ZVxuICAgICAqIGxpa2Ugd2hlbiBhbm90aGVyIGlzIGJlaW5nIHJlY29nbml6ZWQgb3IgaXQgaXMgZGlzYWJsZWRcbiAgICAgKiBAdmlydHVhbFxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgfVxufTtcblxuLyoqXG4gKiBnZXQgYSB1c2FibGUgc3RyaW5nLCB1c2VkIGFzIGV2ZW50IHBvc3RmaXhcbiAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdGF0ZVxuICovXG5mdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSAmIFNUQVRFX0NBTkNFTExFRCkge1xuICAgICAgICByZXR1cm4gJ2NhbmNlbCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0VOREVEKSB7XG4gICAgICAgIHJldHVybiAnZW5kJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfQ0hBTkdFRCkge1xuICAgICAgICByZXR1cm4gJ21vdmUnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9CRUdBTikge1xuICAgICAgICByZXR1cm4gJ3N0YXJ0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGRpcmVjdGlvbiBjb25zIHRvIHN0cmluZ1xuICogQHBhcmFtIHtDb25zdH0gZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBkaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSB7XG4gICAgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fRE9XTikge1xuICAgICAgICByZXR1cm4gJ2Rvd24nO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9VUCkge1xuICAgICAgICByZXR1cm4gJ3VwJztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fTEVGVCkge1xuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGdldCBhIHJlY29nbml6ZXIgYnkgbmFtZSBpZiBpdCBpcyBib3VuZCB0byBhIG1hbmFnZXJcbiAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IG90aGVyUmVjb2duaXplclxuICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gKiBAcmV0dXJucyB7UmVjb2duaXplcn1cbiAqL1xuZnVuY3Rpb24gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHJlY29nbml6ZXIpIHtcbiAgICB2YXIgbWFuYWdlciA9IHJlY29nbml6ZXIubWFuYWdlcjtcbiAgICBpZiAobWFuYWdlcikge1xuICAgICAgICByZXR1cm4gbWFuYWdlci5nZXQob3RoZXJSZWNvZ25pemVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG90aGVyUmVjb2duaXplcjtcbn1cblxuLyoqXG4gKiBUaGlzIHJlY29nbml6ZXIgaXMganVzdCB1c2VkIGFzIGEgYmFzZSBmb3IgdGhlIHNpbXBsZSBhdHRyaWJ1dGUgcmVjb2duaXplcnMuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gQXR0clJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KEF0dHJSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICBwb2ludGVyczogMVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGNoZWNrIGlmIGl0IHRoZSByZWNvZ25pemVyIHJlY2VpdmVzIHZhbGlkIGlucHV0LCBsaWtlIGlucHV0LmRpc3RhbmNlID4gMTAuXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IHJlY29nbml6ZWRcbiAgICAgKi9cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvblBvaW50ZXJzID0gdGhpcy5vcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICByZXR1cm4gb3B0aW9uUG9pbnRlcnMgPT09IDAgfHwgaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25Qb2ludGVycztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgc3RhdGUgZm9yIHRoZSByZWNvZ25pemVyXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMgeyp9IFN0YXRlXG4gICAgICovXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGlucHV0LmV2ZW50VHlwZTtcblxuICAgICAgICB2YXIgaXNSZWNvZ25pemVkID0gc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEKTtcbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLmF0dHJUZXN0KGlucHV0KTtcblxuICAgICAgICAvLyBvbiBjYW5jZWwgaW5wdXQgYW5kIHdlJ3ZlIHJlY29nbml6ZWQgYmVmb3JlLCByZXR1cm4gU1RBVEVfQ0FOQ0VMTEVEXG4gICAgICAgIGlmIChpc1JlY29nbml6ZWQgJiYgKGV2ZW50VHlwZSAmIElOUFVUX0NBTkNFTCB8fCAhaXNWYWxpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NBTkNFTExFRDtcbiAgICAgICAgfSBlbHNlIGlmIChpc1JlY29nbml6ZWQgfHwgaXNWYWxpZCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0VOREVEO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghKHN0YXRlICYgU1RBVEVfQkVHQU4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX0JFR0FOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0hBTkdFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFBhblxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gYW5kIG1vdmVkIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGFuUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5wWCA9IG51bGw7XG4gICAgdGhpcy5wWSA9IG51bGw7XG59XG5cbmluaGVyaXQoUGFuUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBhblJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BhbicsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICBkaXJlY3Rpb246IERJUkVDVElPTl9BTExcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWN0aW9ucztcbiAgICB9LFxuXG4gICAgZGlyZWN0aW9uVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciBoYXNNb3ZlZCA9IHRydWU7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGlucHV0LmRpc3RhbmNlO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgeCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdmFyIHkgPSBpbnB1dC5kZWx0YVk7XG5cbiAgICAgICAgLy8gbG9jayB0byBheGlzP1xuICAgICAgICBpZiAoIShkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHggPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeCA8IDApID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB4ICE9IHRoaXMucFg7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeSA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh5IDwgMCkgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHkgIT0gdGhpcy5wWTtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gaGFzTW92ZWQgJiYgZGlzdGFuY2UgPiBvcHRpb25zLnRocmVzaG9sZCAmJiBkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbjtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4gfHwgKCEodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKSAmJiB0aGlzLmRpcmVjdGlvblRlc3QoaW5wdXQpKSk7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cbiAgICAgICAgdGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdGhpcy5wWSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0LmRpcmVjdGlvbik7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGluY2hcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVycyBhcmUgbW92aW5nIHRvd2FyZCAoem9vbS1pbikgb3IgYXdheSBmcm9tIGVhY2ggb3RoZXIgKHpvb20tb3V0KS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGluY2hSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUGluY2hSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwaW5jaCcsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnNjYWxlIC0gMSkgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5zY2FsZSAhPT0gMSkge1xuICAgICAgICAgICAgdmFyIGluT3V0ID0gaW5wdXQuc2NhbGUgPCAxID8gJ2luJyA6ICdvdXQnO1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgaW5PdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQcmVzc1xuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gZm9yIHggbXMgd2l0aG91dCBhbnkgbW92ZW1lbnQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUHJlc3NSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG59XG5cbmluaGVyaXQoUHJlc3NSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQcmVzc1JlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3ByZXNzJyxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIHRpbWU6IDI1MSwgLy8gbWluaW1hbCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIHByZXNzZWRcbiAgICAgICAgdGhyZXNob2xkOiA5IC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fQVVUT107XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICB2YXIgdmFsaWRUaW1lID0gaW5wdXQuZGVsdGFUaW1lID4gb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAoIXZhbGlkTW92ZW1lbnQgfHwgIXZhbGlkUG9pbnRlcnMgfHwgKGlucHV0LmV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmICF2YWxpZFRpbWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICB9LCBvcHRpb25zLnRpbWUsIHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0ICYmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyAndXAnLCBpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogUm90YXRlXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlciBhcmUgbW92aW5nIGluIGEgY2lyY3VsYXIgbW90aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBSb3RhdGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUm90YXRlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFJvdGF0ZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3JvdGF0ZScsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnJvdGF0aW9uKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTd2lwZVxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIG1vdmluZyBmYXN0ICh2ZWxvY2l0eSksIHdpdGggZW5vdWdoIGRpc3RhbmNlIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gU3dpcGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU3dpcGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgU3dpcGVSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdzd2lwZScsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHZlbG9jaXR5OiAwLjMsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFBhblJlY29nbml6ZXIucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyk7XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiAoRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICBkaXJlY3Rpb24gJiBpbnB1dC5vZmZzZXREaXJlY3Rpb24gJiZcbiAgICAgICAgICAgIGlucHV0LmRpc3RhbmNlID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCAmJlxuICAgICAgICAgICAgaW5wdXQubWF4UG9pbnRlcnMgPT0gdGhpcy5vcHRpb25zLnBvaW50ZXJzICYmXG4gICAgICAgICAgICBhYnModmVsb2NpdHkpID4gdGhpcy5vcHRpb25zLnZlbG9jaXR5ICYmIGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORDtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5vZmZzZXREaXJlY3Rpb24pO1xuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb24sIGlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEEgdGFwIGlzIGVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvaW5nIGEgc21hbGwgdGFwL2NsaWNrLiBNdWx0aXBsZSB0YXBzIGFyZSByZWNvZ25pemVkIGlmIHRoZXkgb2NjdXJcbiAqIGJldHdlZW4gdGhlIGdpdmVuIGludGVydmFsIGFuZCBwb3NpdGlvbi4gVGhlIGRlbGF5IG9wdGlvbiBjYW4gYmUgdXNlZCB0byByZWNvZ25pemUgbXVsdGktdGFwcyB3aXRob3V0IGZpcmluZ1xuICogYSBzaW5nbGUgdGFwLlxuICpcbiAqIFRoZSBldmVudERhdGEgZnJvbSB0aGUgZW1pdHRlZCBldmVudCBjb250YWlucyB0aGUgcHJvcGVydHkgYHRhcENvdW50YCwgd2hpY2ggY29udGFpbnMgdGhlIGFtb3VudCBvZlxuICogbXVsdGktdGFwcyBiZWluZyByZWNvZ25pemVkLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFRhcFJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgLy8gcHJldmlvdXMgdGltZSBhbmQgY2VudGVyLFxuICAgIC8vIHVzZWQgZm9yIHRhcCBjb3VudGluZ1xuICAgIHRoaXMucFRpbWUgPSBmYWxzZTtcbiAgICB0aGlzLnBDZW50ZXIgPSBmYWxzZTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG4gICAgdGhpcy5jb3VudCA9IDA7XG59XG5cbmluaGVyaXQoVGFwUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICd0YXAnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGFwczogMSxcbiAgICAgICAgaW50ZXJ2YWw6IDMwMCwgLy8gbWF4IHRpbWUgYmV0d2VlbiB0aGUgbXVsdGktdGFwIHRhcHNcbiAgICAgICAgdGltZTogMjUwLCAvLyBtYXggdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBkb3duIChsaWtlIGZpbmdlciBvbiB0aGUgc2NyZWVuKVxuICAgICAgICB0aHJlc2hvbGQ6IDksIC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgICAgIHBvc1RocmVzaG9sZDogMTAgLy8gYSBtdWx0aS10YXAgY2FuIGJlIGEgYml0IG9mZiB0aGUgaW5pdGlhbCBwb3NpdGlvblxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTl07XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IG9wdGlvbnMudGltZTtcblxuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgICAgaWYgKChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkgJiYgKHRoaXMuY291bnQgPT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAodmFsaWRNb3ZlbWVudCAmJiB2YWxpZFRvdWNoVGltZSAmJiB2YWxpZFBvaW50ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWxpZEludGVydmFsID0gdGhpcy5wVGltZSA/IChpbnB1dC50aW1lU3RhbXAgLSB0aGlzLnBUaW1lIDwgb3B0aW9ucy5pbnRlcnZhbCkgOiB0cnVlO1xuICAgICAgICAgICAgdmFyIHZhbGlkTXVsdGlUYXAgPSAhdGhpcy5wQ2VudGVyIHx8IGdldERpc3RhbmNlKHRoaXMucENlbnRlciwgaW5wdXQuY2VudGVyKSA8IG9wdGlvbnMucG9zVGhyZXNob2xkO1xuXG4gICAgICAgICAgICB0aGlzLnBUaW1lID0gaW5wdXQudGltZVN0YW1wO1xuICAgICAgICAgICAgdGhpcy5wQ2VudGVyID0gaW5wdXQuY2VudGVyO1xuXG4gICAgICAgICAgICBpZiAoIXZhbGlkTXVsdGlUYXAgfHwgIXZhbGlkSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXG4gICAgICAgICAgICAvLyBpZiB0YXAgY291bnQgbWF0Y2hlcyB3ZSBoYXZlIHJlY29nbml6ZWQgaXQsXG4gICAgICAgICAgICAvLyBlbHNlIGl0IGhhcyBiZWdhbiByZWNvZ25pemluZy4uLlxuICAgICAgICAgICAgdmFyIHRhcENvdW50ID0gdGhpcy5jb3VudCAlIG9wdGlvbnMudGFwcztcbiAgICAgICAgICAgIGlmICh0YXBDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGZhaWxpbmcgcmVxdWlyZW1lbnRzLCBpbW1lZGlhdGVseSB0cmlnZ2VyIHRoZSB0YXAgZXZlbnRcbiAgICAgICAgICAgICAgICAvLyBvciB3YWl0IGFzIGxvbmcgYXMgdGhlIG11bHRpdGFwIGludGVydmFsIHRvIHRyaWdnZXJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIGZhaWxUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFNUQVRFX1JFQ09HTklaRUQpIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2ltcGxlIHdheSB0byBjcmVhdGUgYSBtYW5hZ2VyIHdpdGggYSBkZWZhdWx0IHNldCBvZiByZWNvZ25pemVycy5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBIYW1tZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMucmVjb2duaXplcnMgPSBpZlVuZGVmaW5lZChvcHRpb25zLnJlY29nbml6ZXJzLCBIYW1tZXIuZGVmYXVsdHMucHJlc2V0KTtcbiAgICByZXR1cm4gbmV3IE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkhhbW1lci5WRVJTSU9OID0gJzIuMC43JztcblxuLyoqXG4gKiBkZWZhdWx0IHNldHRpbmdzXG4gKiBAbmFtZXNwYWNlXG4gKi9cbkhhbW1lci5kZWZhdWx0cyA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgaWYgRE9NIGV2ZW50cyBhcmUgYmVpbmcgdHJpZ2dlcmVkLlxuICAgICAqIEJ1dCB0aGlzIGlzIHNsb3dlciBhbmQgdW51c2VkIGJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbnMsIHNvIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBkb21FdmVudHM6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkvZmFsbGJhY2suXG4gICAgICogV2hlbiBzZXQgdG8gYGNvbXB1dGVgIGl0IHdpbGwgbWFnaWNhbGx5IHNldCB0aGUgY29ycmVjdCB2YWx1ZSBiYXNlZCBvbiB0aGUgYWRkZWQgcmVjb2duaXplcnMuXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKiBAZGVmYXVsdCBjb21wdXRlXG4gICAgICovXG4gICAgdG91Y2hBY3Rpb246IFRPVUNIX0FDVElPTl9DT01QVVRFLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGVuYWJsZTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEVYUEVSSU1FTlRBTCBGRUFUVVJFIC0tIGNhbiBiZSByZW1vdmVkL2NoYW5nZWRcbiAgICAgKiBDaGFuZ2UgdGhlIHBhcmVudCBpbnB1dCB0YXJnZXQgZWxlbWVudC5cbiAgICAgKiBJZiBOdWxsLCB0aGVuIGl0IGlzIGJlaW5nIHNldCB0aGUgdG8gbWFpbiBlbGVtZW50LlxuICAgICAqIEB0eXBlIHtOdWxsfEV2ZW50VGFyZ2V0fVxuICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICBpbnB1dFRhcmdldDogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIGZvcmNlIGFuIGlucHV0IGNsYXNzXG4gICAgICogQHR5cGUge051bGx8RnVuY3Rpb259XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0Q2xhc3M6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHJlY29nbml6ZXIgc2V0dXAgd2hlbiBjYWxsaW5nIGBIYW1tZXIoKWBcbiAgICAgKiBXaGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIgdGhlc2Ugd2lsbCBiZSBza2lwcGVkLlxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICBwcmVzZXQ6IFtcbiAgICAgICAgLy8gUmVjb2duaXplckNsYXNzLCBvcHRpb25zLCBbcmVjb2duaXplV2l0aCwgLi4uXSwgW3JlcXVpcmVGYWlsdXJlLCAuLi5dXG4gICAgICAgIFtSb3RhdGVSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX1dLFxuICAgICAgICBbUGluY2hSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX0sIFsncm90YXRlJ11dLFxuICAgICAgICBbU3dpcGVSZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH1dLFxuICAgICAgICBbUGFuUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9LCBbJ3N3aXBlJ11dLFxuICAgICAgICBbVGFwUmVjb2duaXplcl0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyLCB7ZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyfSwgWyd0YXAnXV0sXG4gICAgICAgIFtQcmVzc1JlY29nbml6ZXJdXG4gICAgXSxcblxuICAgIC8qKlxuICAgICAqIFNvbWUgQ1NTIHByb3BlcnRpZXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSB0aGUgd29ya2luZyBvZiBIYW1tZXIuXG4gICAgICogQWRkIHRoZW0gdG8gdGhpcyBtZXRob2QgYW5kIHRoZXkgd2lsbCBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICBjc3NQcm9wczoge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGV4dCBzZWxlY3Rpb24gdG8gaW1wcm92ZSB0aGUgZHJhZ2dpbmcgZ2VzdHVyZS4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZSB0aGUgV2luZG93cyBQaG9uZSBncmlwcGVycyB3aGVuIHByZXNzaW5nIGFuIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGhlIGRlZmF1bHQgY2FsbG91dCBzaG93biB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldC5cbiAgICAgICAgICogT24gaU9TLCB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldCBzdWNoIGFzIGEgbGluaywgU2FmYXJpIGRpc3BsYXlzXG4gICAgICAgICAqIGEgY2FsbG91dCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5rLiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGlzYWJsZSB0aGF0IGNhbGxvdXQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hDYWxsb3V0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHpvb21pbmcgaXMgZW5hYmxlZC4gVXNlZCBieSBJRTEwPlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIGNvbnRlbnRab29taW5nOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGF0IGFuIGVudGlyZSBlbGVtZW50IHNob3VsZCBiZSBkcmFnZ2FibGUgaW5zdGVhZCBvZiBpdHMgY29udGVudHMuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB1c2VyRHJhZzogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdmVycmlkZXMgdGhlIGhpZ2hsaWdodCBjb2xvciBzaG93biB3aGVuIHRoZSB1c2VyIHRhcHMgYSBsaW5rIG9yIGEgSmF2YVNjcmlwdFxuICAgICAgICAgKiBjbGlja2FibGUgZWxlbWVudCBpbiBpT1MuIFRoaXMgcHJvcGVydHkgb2JleXMgdGhlIGFscGhhIHZhbHVlLCBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdyZ2JhKDAsMCwwLDApJ1xuICAgICAgICAgKi9cbiAgICAgICAgdGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJ1xuICAgIH1cbn07XG5cbnZhciBTVE9QID0gMTtcbnZhciBGT1JDRURfU1RPUCA9IDI7XG5cbi8qKlxuICogTWFuYWdlclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgSGFtbWVyLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBlbGVtZW50O1xuXG4gICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgIHRoaXMucmVjb2duaXplcnMgPSBbXTtcbiAgICB0aGlzLm9sZENzc1Byb3BzID0ge307XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuaW5wdXQgPSBjcmVhdGVJbnB1dEluc3RhbmNlKHRoaXMpO1xuICAgIHRoaXMudG91Y2hBY3Rpb24gPSBuZXcgVG91Y2hBY3Rpb24odGhpcywgdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblxuICAgIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIHRydWUpO1xuXG4gICAgZWFjaCh0aGlzLm9wdGlvbnMucmVjb2duaXplcnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgdmFyIHJlY29nbml6ZXIgPSB0aGlzLmFkZChuZXcgKGl0ZW1bMF0pKGl0ZW1bMV0pKTtcbiAgICAgICAgaXRlbVsyXSAmJiByZWNvZ25pemVyLnJlY29nbml6ZVdpdGgoaXRlbVsyXSk7XG4gICAgICAgIGl0ZW1bM10gJiYgcmVjb2duaXplci5yZXF1aXJlRmFpbHVyZShpdGVtWzNdKTtcbiAgICB9LCB0aGlzKTtcbn1cblxuTWFuYWdlci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBPcHRpb25zIHRoYXQgbmVlZCBhIGxpdHRsZSBtb3JlIHNldHVwXG4gICAgICAgIGlmIChvcHRpb25zLnRvdWNoQWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmlucHV0VGFyZ2V0KSB7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBleGlzdGluZyBldmVudCBsaXN0ZW5lcnMgYW5kIHJlaW5pdGlhbGl6ZVxuICAgICAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnRhcmdldCA9IG9wdGlvbnMuaW5wdXRUYXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlucHV0LmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogc3RvcCByZWNvZ25pemluZyBmb3IgdGhpcyBzZXNzaW9uLlxuICAgICAqIFRoaXMgc2Vzc2lvbiB3aWxsIGJlIGRpc2NhcmRlZCwgd2hlbiBhIG5ldyBbaW5wdXRdc3RhcnQgZXZlbnQgaXMgZmlyZWQuXG4gICAgICogV2hlbiBmb3JjZWQsIHRoZSByZWNvZ25pemVyIGN5Y2xlIGlzIHN0b3BwZWQgaW1tZWRpYXRlbHkuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnN0b3BwZWQgPSBmb3JjZSA/IEZPUkNFRF9TVE9QIDogU1RPUDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcnVuIHRoZSByZWNvZ25pemVycyFcbiAgICAgKiBjYWxsZWQgYnkgdGhlIGlucHV0SGFuZGxlciBmdW5jdGlvbiBvbiBldmVyeSBtb3ZlbWVudCBvZiB0aGUgcG9pbnRlcnMgKHRvdWNoZXMpXG4gICAgICogaXQgd2Fsa3MgdGhyb3VnaCBhbGwgdGhlIHJlY29nbml6ZXJzIGFuZCB0cmllcyB0byBkZXRlY3QgdGhlIGdlc3R1cmUgdGhhdCBpcyBiZWluZyBtYWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBydW4gdGhlIHRvdWNoLWFjdGlvbiBwb2x5ZmlsbFxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnByZXZlbnREZWZhdWx0cyhpbnB1dERhdGEpO1xuXG4gICAgICAgIHZhciByZWNvZ25pemVyO1xuICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuXG4gICAgICAgIC8vIHRoaXMgaG9sZHMgdGhlIHJlY29nbml6ZXIgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuICAgICAgICAvLyBzbyB0aGUgcmVjb2duaXplcidzIHN0YXRlIG5lZWRzIHRvIGJlIEJFR0FOLCBDSEFOR0VELCBFTkRFRCBvciBSRUNPR05JWkVEXG4gICAgICAgIC8vIGlmIG5vIHJlY29nbml6ZXIgaXMgZGV0ZWN0aW5nIGEgdGhpbmcsIGl0IGlzIHNldCB0byBgbnVsbGBcbiAgICAgICAgdmFyIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXI7XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB0aGUgbGFzdCByZWNvZ25pemVyIGlzIHJlY29nbml6ZWRcbiAgICAgICAgLy8gb3Igd2hlbiB3ZSdyZSBpbiBhIG5ldyBzZXNzaW9uXG4gICAgICAgIGlmICghY3VyUmVjb2duaXplciB8fCAoY3VyUmVjb2duaXplciAmJiBjdXJSZWNvZ25pemVyLnN0YXRlICYgU1RBVEVfUkVDT0dOSVpFRCkpIHtcbiAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHJlY29nbml6ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVjb2duaXplciA9IHJlY29nbml6ZXJzW2ldO1xuXG4gICAgICAgICAgICAvLyBmaW5kIG91dCBpZiB3ZSBhcmUgYWxsb3dlZCB0cnkgdG8gcmVjb2duaXplIHRoZSBpbnB1dCBmb3IgdGhpcyBvbmUuXG4gICAgICAgICAgICAvLyAxLiAgIGFsbG93IGlmIHRoZSBzZXNzaW9uIGlzIE5PVCBmb3JjZWQgc3RvcHBlZCAoc2VlIHRoZSAuc3RvcCgpIG1ldGhvZClcbiAgICAgICAgICAgIC8vIDIuICAgYWxsb3cgaWYgd2Ugc3RpbGwgaGF2ZW4ndCByZWNvZ25pemVkIGEgZ2VzdHVyZSBpbiB0aGlzIHNlc3Npb24sIG9yIHRoZSB0aGlzIHJlY29nbml6ZXIgaXMgdGhlIG9uZVxuICAgICAgICAgICAgLy8gICAgICB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgICAgICAvLyAzLiAgIGFsbG93IGlmIHRoZSByZWNvZ25pemVyIGlzIGFsbG93ZWQgdG8gcnVuIHNpbXVsdGFuZW91cyB3aXRoIHRoZSBjdXJyZW50IHJlY29nbml6ZWQgcmVjb2duaXplci5cbiAgICAgICAgICAgIC8vICAgICAgdGhpcyBjYW4gYmUgc2V0dXAgd2l0aCB0aGUgYHJlY29nbml6ZVdpdGgoKWAgbWV0aG9kIG9uIHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCAhPT0gRk9SQ0VEX1NUT1AgJiYgKCAvLyAxXG4gICAgICAgICAgICAgICAgICAgICFjdXJSZWNvZ25pemVyIHx8IHJlY29nbml6ZXIgPT0gY3VyUmVjb2duaXplciB8fCAvLyAyXG4gICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuY2FuUmVjb2duaXplV2l0aChjdXJSZWNvZ25pemVyKSkpIHsgLy8gM1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVjb2duaXplKGlucHV0RGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVzZXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhlIHJlY29nbml6ZXIgaGFzIGJlZW4gcmVjb2duaXppbmcgdGhlIGlucHV0IGFzIGEgdmFsaWQgZ2VzdHVyZSwgd2Ugd2FudCB0byBzdG9yZSB0aGlzIG9uZSBhcyB0aGVcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIHJlY29nbml6ZXIuIGJ1dCBvbmx5IGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgcmVjb2duaXplclxuICAgICAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyICYmIHJlY29nbml6ZXIuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQpKSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgcmVjb2duaXplciBieSBpdHMgZXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TnVsbH1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKHJlY29nbml6ZXIgaW5zdGFuY2VvZiBSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyZWNvZ25pemVyc1tpXS5vcHRpb25zLmV2ZW50ID09IHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcnNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGFkZCBhIHJlY29nbml6ZXIgdG8gdGhlIG1hbmFnZXJcbiAgICAgKiBleGlzdGluZyByZWNvZ25pemVycyB3aXRoIHRoZSBzYW1lIGV2ZW50IG5hbWUgd2lsbCBiZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TWFuYWdlcn1cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdhZGQnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQocmVjb2duaXplci5vcHRpb25zLmV2ZW50KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShleGlzdGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY29nbml6ZXJzLnB1c2gocmVjb2duaXplcik7XG4gICAgICAgIHJlY29nbml6ZXIubWFuYWdlciA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBhIHJlY29nbml6ZXIgYnkgbmFtZSBvciBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cbiAgICAgKi9cbiAgICByZW1vdmU6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdyZW1vdmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICByZWNvZ25pemVyID0gdGhpcy5nZXQocmVjb2duaXplcik7XG5cbiAgICAgICAgLy8gbGV0J3MgbWFrZSBzdXJlIHRoaXMgcmVjb2duaXplciBleGlzdHNcbiAgICAgICAgaWYgKHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHJlY29nbml6ZXJzLCByZWNvZ25pemVyKTtcblxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIGV2ZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gPSBoYW5kbGVyc1tldmVudF0gfHwgW107XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0ucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgZXZlbnQsIGxlYXZlIGVtaXQgYmxhbmsgdG8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaGFuZGxlcl1cbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gJiYgaGFuZGxlcnNbZXZlbnRdLnNwbGljZShpbkFycmF5KGhhbmRsZXJzW2V2ZW50XSwgaGFuZGxlciksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGVtaXQgZXZlbnQgdG8gdGhlIGxpc3RlbmVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgLy8gd2UgYWxzbyB3YW50IHRvIHRyaWdnZXIgZG9tIGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRvbUV2ZW50cykge1xuICAgICAgICAgICAgdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIGhhbmRsZXJzLCBzbyBza2lwIGl0IGFsbFxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW2V2ZW50XSAmJiB0aGlzLmhhbmRsZXJzW2V2ZW50XS5zbGljZSgpO1xuICAgICAgICBpZiAoIWhhbmRsZXJzIHx8ICFoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEudHlwZSA9IGV2ZW50O1xuICAgICAgICBkYXRhLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkYXRhLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlcnNbaV0oZGF0YSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGVzdHJveSB0aGUgbWFuYWdlciBhbmQgdW5iaW5kcyBhbGwgZXZlbnRzXG4gICAgICogaXQgZG9lc24ndCB1bmJpbmQgZG9tIGV2ZW50cywgdGhhdCBpcyB0aGUgdXNlciBvd24gcmVzcG9uc2liaWxpdHlcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ICYmIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB9XG59O1xuXG4vKipcbiAqIGFkZC9yZW1vdmUgdGhlIGNzcyBwcm9wZXJ0aWVzIGFzIGRlZmluZWQgaW4gbWFuYWdlci5vcHRpb25zLmNzc1Byb3BzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYWRkXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZUNzc1Byb3BzKG1hbmFnZXIsIGFkZCkge1xuICAgIHZhciBlbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmICghZWxlbWVudC5zdHlsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwcm9wO1xuICAgIGVhY2gobWFuYWdlci5vcHRpb25zLmNzc1Byb3BzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICBwcm9wID0gcHJlZml4ZWQoZWxlbWVudC5zdHlsZSwgbmFtZSk7XG4gICAgICAgIGlmIChhZGQpIHtcbiAgICAgICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gPSBlbGVtZW50LnN0eWxlW3Byb3BdO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gfHwgJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWFkZCkge1xuICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzID0ge307XG4gICAgfVxufVxuXG4vKipcbiAqIHRyaWdnZXIgZG9tIGV2ZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKi9cbmZ1bmN0aW9uIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSkge1xuICAgIHZhciBnZXN0dXJlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBnZXN0dXJlRXZlbnQuaW5pdEV2ZW50KGV2ZW50LCB0cnVlLCB0cnVlKTtcbiAgICBnZXN0dXJlRXZlbnQuZ2VzdHVyZSA9IGRhdGE7XG4gICAgZGF0YS50YXJnZXQuZGlzcGF0Y2hFdmVudChnZXN0dXJlRXZlbnQpO1xufVxuXG5hc3NpZ24oSGFtbWVyLCB7XG4gICAgSU5QVVRfU1RBUlQ6IElOUFVUX1NUQVJULFxuICAgIElOUFVUX01PVkU6IElOUFVUX01PVkUsXG4gICAgSU5QVVRfRU5EOiBJTlBVVF9FTkQsXG4gICAgSU5QVVRfQ0FOQ0VMOiBJTlBVVF9DQU5DRUwsXG5cbiAgICBTVEFURV9QT1NTSUJMRTogU1RBVEVfUE9TU0lCTEUsXG4gICAgU1RBVEVfQkVHQU46IFNUQVRFX0JFR0FOLFxuICAgIFNUQVRFX0NIQU5HRUQ6IFNUQVRFX0NIQU5HRUQsXG4gICAgU1RBVEVfRU5ERUQ6IFNUQVRFX0VOREVELFxuICAgIFNUQVRFX1JFQ09HTklaRUQ6IFNUQVRFX1JFQ09HTklaRUQsXG4gICAgU1RBVEVfQ0FOQ0VMTEVEOiBTVEFURV9DQU5DRUxMRUQsXG4gICAgU1RBVEVfRkFJTEVEOiBTVEFURV9GQUlMRUQsXG5cbiAgICBESVJFQ1RJT05fTk9ORTogRElSRUNUSU9OX05PTkUsXG4gICAgRElSRUNUSU9OX0xFRlQ6IERJUkVDVElPTl9MRUZULFxuICAgIERJUkVDVElPTl9SSUdIVDogRElSRUNUSU9OX1JJR0hULFxuICAgIERJUkVDVElPTl9VUDogRElSRUNUSU9OX1VQLFxuICAgIERJUkVDVElPTl9ET1dOOiBESVJFQ1RJT05fRE9XTixcbiAgICBESVJFQ1RJT05fSE9SSVpPTlRBTDogRElSRUNUSU9OX0hPUklaT05UQUwsXG4gICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgRElSRUNUSU9OX0FMTDogRElSRUNUSU9OX0FMTCxcblxuICAgIE1hbmFnZXI6IE1hbmFnZXIsXG4gICAgSW5wdXQ6IElucHV0LFxuICAgIFRvdWNoQWN0aW9uOiBUb3VjaEFjdGlvbixcblxuICAgIFRvdWNoSW5wdXQ6IFRvdWNoSW5wdXQsXG4gICAgTW91c2VJbnB1dDogTW91c2VJbnB1dCxcbiAgICBQb2ludGVyRXZlbnRJbnB1dDogUG9pbnRlckV2ZW50SW5wdXQsXG4gICAgVG91Y2hNb3VzZUlucHV0OiBUb3VjaE1vdXNlSW5wdXQsXG4gICAgU2luZ2xlVG91Y2hJbnB1dDogU2luZ2xlVG91Y2hJbnB1dCxcblxuICAgIFJlY29nbml6ZXI6IFJlY29nbml6ZXIsXG4gICAgQXR0clJlY29nbml6ZXI6IEF0dHJSZWNvZ25pemVyLFxuICAgIFRhcDogVGFwUmVjb2duaXplcixcbiAgICBQYW46IFBhblJlY29nbml6ZXIsXG4gICAgU3dpcGU6IFN3aXBlUmVjb2duaXplcixcbiAgICBQaW5jaDogUGluY2hSZWNvZ25pemVyLFxuICAgIFJvdGF0ZTogUm90YXRlUmVjb2duaXplcixcbiAgICBQcmVzczogUHJlc3NSZWNvZ25pemVyLFxuXG4gICAgb246IGFkZEV2ZW50TGlzdGVuZXJzLFxuICAgIG9mZjogcmVtb3ZlRXZlbnRMaXN0ZW5lcnMsXG4gICAgZWFjaDogZWFjaCxcbiAgICBtZXJnZTogbWVyZ2UsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgYXNzaWduOiBhc3NpZ24sXG4gICAgaW5oZXJpdDogaW5oZXJpdCxcbiAgICBiaW5kRm46IGJpbmRGbixcbiAgICBwcmVmaXhlZDogcHJlZml4ZWRcbn0pO1xuXG4vLyB0aGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIEhhbW1lciBpcyBsb2FkZWQgaW4gdGhlIHByZXNlbmNlIG9mIGFuIEFNRFxuLy8gIHN0eWxlIGxvYWRlciBidXQgYnkgc2NyaXB0IHRhZywgbm90IGJ5IHRoZSBsb2FkZXIuXG52YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6ICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge30pKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5mcmVlR2xvYmFsLkhhbW1lciA9IEhhbW1lcjtcblxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEhhbW1lcjtcbiAgICB9KTtcbn0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gSGFtbWVyO1xufSBlbHNlIHtcbiAgICB3aW5kb3dbZXhwb3J0TmFtZV0gPSBIYW1tZXI7XG59XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsICdIYW1tZXInKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKVtcImRlZmF1bHRcIl07XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8vIGVwLm1hdGNoZXNTZWxlY3RvciA9IGVwLm1hdGNoZXNTZWxlY3RvciB8fCBlcC5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcbi8vIFx0XHRlcC5tc01hdGNoZXNTZWxlY3RvciB8fCBlcC5vTWF0Y2hlc1NlbGVjdG9yIHx8IGVwLndlYmtpdE1hdGNoZXNTZWxlY3RvclxuKGZ1bmN0aW9uKGVwKSB7XG5cdHZhciB2ZW5kb3JzID0gW1wibXNcIiwgXCJtb3pcIiwgXCJ3ZWJraXRcIiwgXCJvXCJdLCB4ID0gLTE7XG5cdGZvciAoeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhZXAubWF0Y2hlczsgKyt4KSB7XG5cdFx0ZXAubWF0Y2hlcyA9IGVwW3ZlbmRvcnNbeF0gKyBcIk1hdGNoZXNTZWxlY3RvclwiXTtcblx0fVxuXHRpZiAoZXAubWF0Y2hlcykge1xuXHRcdGNvbnNvbGUubG9nKFwiTmF0aXZlIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgZm91bmQgKFwiKyAoeD8gXCJwcmVmaXg6IFwiICsgdmVuZG9yc1t4XSA6IFwidW5wcmVmaXhlZFwiKSArXCIpXCIpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUud2FybihcIk5vIG5hdGl2ZSBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzIGZvdW5kXCIpO1xuXHR9XG5cdGlmICghZXAubWF0Y2hlcykge1xuXHRcdC8vIEBzZWUgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vam9uYXRoYW50bmVhbC8zMDYyOTU1XG5cdFx0ZXAubWF0Y2hlcyA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuXHRcdFx0dmFyIG5vZGUgPSB0aGlzLFxuXHRcdFx0XHRub2RlcyA9IChub2RlLnBhcmVudE5vZGUgfHwgbm9kZS5kb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvciksXG5cdFx0XHRcdGkgPSAtMTtcblx0XHRcdHdoaWxlIChub2Rlc1srK2ldICYmIG5vZGVzW2ldICE9IG5vZGUpO1xuXHRcdFx0cmV0dXJuICEhbm9kZXNbaV07XG5cdFx0fTtcblx0fVxufSkod2luZG93LkVsZW1lbnQucHJvdG90eXBlKTtcblxuLy8gbW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyoqXG5odHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9NYXRoL3NpZ24gKi9cblxuKGZ1bmN0aW9uKCkge1xuXHRpZiAoIU1hdGguc2lnbikge1xuXHRcdE1hdGguc2lnbiA9IGZ1bmN0aW9uKHgpIHtcblx0XHRcdC8vIElmIHggaXMgTmFOLCB0aGUgcmVzdWx0IGlzIE5hTi5cblx0XHRcdC8vIElmIHggaXMgLTAsIHRoZSByZXN1bHQgaXMgLTAuXG5cdFx0XHQvLyBJZiB4IGlzICswLCB0aGUgcmVzdWx0IGlzICswLlxuXHRcdFx0Ly8gSWYgeCBpcyBuZWdhdGl2ZSBhbmQgbm90IC0wLCB0aGUgcmVzdWx0IGlzIC0xLlxuXHRcdFx0Ly8gSWYgeCBpcyBwb3NpdGl2ZSBhbmQgbm90ICswLCB0aGUgcmVzdWx0IGlzICsxLlxuXHRcdFx0cmV0dXJuICgoeCA+IDApIC0gKHggPCAwKSkgfHwgK3g7XG5cdFx0XHQvLyBBIG1vcmUgYWVzdGhldGljYWwgcGVyc3VhZG8tcmVwcmVzZW50YXRpb24gaXMgc2hvd24gYmVsb3dcblx0XHRcdC8vXG5cdFx0XHQvLyAoICh4ID4gMCkgPyAwIDogMSApICAvLyBpZiB4IGlzIG5lZ2F0aXZlIHRoZW4gbmVnYXRpdmUgb25lXG5cdFx0XHQvLyAgICAgICAgICArICAgICAgICAgICAvLyBlbHNlIChiZWNhdXNlIHlvdSBjYW50IGJlIGJvdGggLSBhbmQgKylcblx0XHRcdC8vICggKHggPCAwKSA/IDAgOiAtMSApIC8vIGlmIHggaXMgcG9zaXRpdmUgdGhlbiBwb3NpdGl2ZSBvbmVcblx0XHRcdC8vICAgICAgICAgfHwgICAgICAgICAgIC8vIGlmIHggaXMgMCwgLTAsIG9yIE5hTiwgb3Igbm90IGEgbnVtYmVyLFxuXHRcdFx0Ly8gICAgICAgICAreCAgICAgICAgICAgLy8gVGhlbiB0aGUgcmVzdWx0IHdpbGwgYmUgeCwgKG9yKSBpZiB4IGlzXG5cdFx0XHQvLyAgICAgICAgICAgICAgICAgICAgICAvLyBub3QgYSBudW1iZXIsIHRoZW4geCBjb252ZXJ0cyB0byBudW1iZXJcblx0XHR9O1xuXHR9XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKSB7XG5cdHZhciB2ZW5kb3JzID0gW1wibXNcIiwgXCJtb3pcIiwgXCJ3ZWJraXRcIiwgXCJvXCJdLCB4ID0gLTE7XG5cdGZvciAoeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7XG5cdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XG5cdFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdIHx8XG5cdFx0XHRcdHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XG5cdH1cblx0aWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcblx0XHRjb25zb2xlLmxvZyhcIk5hdGl2ZSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvdW5kIChcIisgKHg/IFwicHJlZml4OiBcIiArIHZlbmRvcnNbeF0gOiBcInVucHJlZml4ZWRcIikgK1wiKVwiKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLndhcm4oXCJObyBuYXRpdmUgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3VuZFwiKTtcblx0fVxuXHRpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcblx0XHQvLyAoZnVuY3Rpb24oKSB7XG5cdFx0Ly8gXHR2YXIgRlBTID0gMTAwMC82MDtcblx0XHQvLyBcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHQvLyBcdFx0cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCBGUFMpO1xuXHRcdC8vIFx0fTtcblx0XHQvLyB9KSgpO1xuXHRcdChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBsYXN0VGltZSA9IDA7XG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBlbGVtZW50KSB7XG5cdFx0XHRcdHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuXHRcdFx0XHRcdHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSksXG5cdFx0XHRcdFx0aWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7XG5cdFx0XHRcdFx0fSwgdGltZVRvQ2FsbCk7XG5cdFx0XHRcdGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xuXHRcdFx0XHRyZXR1cm4gaWQ7XG5cdFx0XHR9O1xuXHRcdH0pKCk7XG5cdH1cblx0aWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpIHtcblx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoaWQpIHtcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoaWQpO1xuXHRcdH07XG5cdH1cbn0pKCk7XG5cbi8vIG1vZHVsZS5leHBvcnRzID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcbiIsIi8vICAgICBVbmRlcnNjb3JlLmpzIDEuOC4zXG4vLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmdcbi8vICAgICAoYykgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4vLyAgICAgVW5kZXJzY29yZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuKGZ1bmN0aW9uKCkge1xuXG4gIC8vIEJhc2VsaW5lIHNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgaW4gdGhlIGJyb3dzZXIsIG9yIGBleHBvcnRzYCBvbiB0aGUgc2VydmVyLlxuICB2YXIgcm9vdCA9IHRoaXM7XG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS5cbiAgdmFyIHByZXZpb3VzVW5kZXJzY29yZSA9IHJvb3QuXztcblxuICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5cbiAgLy8gQ3JlYXRlIHF1aWNrIHJlZmVyZW5jZSB2YXJpYWJsZXMgZm9yIHNwZWVkIGFjY2VzcyB0byBjb3JlIHByb3RvdHlwZXMuXG4gIHZhclxuICAgIHB1c2ggICAgICAgICAgICAgPSBBcnJheVByb3RvLnB1c2gsXG4gICAgc2xpY2UgICAgICAgICAgICA9IEFycmF5UHJvdG8uc2xpY2UsXG4gICAgdG9TdHJpbmcgICAgICAgICA9IE9ialByb3RvLnRvU3RyaW5nLFxuICAgIGhhc093blByb3BlcnR5ICAgPSBPYmpQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuICAvLyBBbGwgKipFQ01BU2NyaXB0IDUqKiBuYXRpdmUgZnVuY3Rpb24gaW1wbGVtZW50YXRpb25zIHRoYXQgd2UgaG9wZSB0byB1c2VcbiAgLy8gYXJlIGRlY2xhcmVkIGhlcmUuXG4gIHZhclxuICAgIG5hdGl2ZUlzQXJyYXkgICAgICA9IEFycmF5LmlzQXJyYXksXG4gICAgbmF0aXZlS2V5cyAgICAgICAgID0gT2JqZWN0LmtleXMsXG4gICAgbmF0aXZlQmluZCAgICAgICAgID0gRnVuY1Byb3RvLmJpbmQsXG4gICAgbmF0aXZlQ3JlYXRlICAgICAgID0gT2JqZWN0LmNyZWF0ZTtcblxuICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuXG4gIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBfKSByZXR1cm4gb2JqO1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBfKSkgcmV0dXJuIG5ldyBfKG9iaik7XG4gICAgdGhpcy5fd3JhcHBlZCA9IG9iajtcbiAgfTtcblxuICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlIG9sZCBgcmVxdWlyZSgpYCBBUEkuIElmIHdlJ3JlIGluXG4gIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdC5cbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gXztcbiAgICB9XG4gICAgZXhwb3J0cy5fID0gXztcbiAgfSBlbHNlIHtcbiAgICByb290Ll8gPSBfO1xuICB9XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uLlxuICBfLlZFUlNJT04gPSAnMS44LjMnO1xuXG4gIC8vIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBlZmZpY2llbnQgKGZvciBjdXJyZW50IGVuZ2luZXMpIHZlcnNpb25cbiAgLy8gb2YgdGhlIHBhc3NlZC1pbiBjYWxsYmFjaywgdG8gYmUgcmVwZWF0ZWRseSBhcHBsaWVkIGluIG90aGVyIFVuZGVyc2NvcmVcbiAgLy8gZnVuY3Rpb25zLlxuICB2YXIgb3B0aW1pemVDYiA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgcmV0dXJuIGZ1bmM7XG4gICAgc3dpdGNoIChhcmdDb3VudCA9PSBudWxsID8gMyA6IGFyZ0NvdW50KSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgb3RoZXIpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9O1xuICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEEgbW9zdGx5LWludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkXG4gIC8vIHRvIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlclxuICAvLyBpZGVudGl0eSwgYW4gYXJiaXRyYXJ5IGNhbGxiYWNrLCBhIHByb3BlcnR5IG1hdGNoZXIsIG9yIGEgcHJvcGVydHkgYWNjZXNzb3IuXG4gIHZhciBjYiA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuIG9wdGltaXplQ2IodmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KTtcbiAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkpIHJldHVybiBfLm1hdGNoZXIodmFsdWUpO1xuICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTtcbiAgfTtcbiAgXy5pdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGNiKHZhbHVlLCBjb250ZXh0LCBJbmZpbml0eSk7XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFzc2lnbmVyIGZ1bmN0aW9ucy5cbiAgdmFyIGNyZWF0ZUFzc2lnbmVyID0gZnVuY3Rpb24oa2V5c0Z1bmMsIHVuZGVmaW5lZE9ubHkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggPCAyIHx8IG9iaiA9PSBudWxsKSByZXR1cm4gb2JqO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSxcbiAgICAgICAgICAgIGtleXMgPSBrZXlzRnVuYyhzb3VyY2UpLFxuICAgICAgICAgICAgbCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmICghdW5kZWZpbmVkT25seSB8fCBvYmpba2V5XSA9PT0gdm9pZCAwKSBvYmpba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci5cbiAgdmFyIGJhc2VDcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9O1xuICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtcbiAgICBDdG9yLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIHByb3BlcnR5ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW2tleV07XG4gICAgfTtcbiAgfTtcblxuICAvLyBIZWxwZXIgZm9yIGNvbGxlY3Rpb24gbWV0aG9kcyB0byBkZXRlcm1pbmUgd2hldGhlciBhIGNvbGxlY3Rpb25cbiAgLy8gc2hvdWxkIGJlIGl0ZXJhdGVkIGFzIGFuIGFycmF5IG9yIGFzIGFuIG9iamVjdFxuICAvLyBSZWxhdGVkOiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aFxuICAvLyBBdm9pZHMgYSB2ZXJ5IG5hc3R5IGlPUyA4IEpJVCBidWcgb24gQVJNLTY0LiAjMjA5NFxuICB2YXIgTUFYX0FSUkFZX0lOREVYID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcbiAgdmFyIGdldExlbmd0aCA9IHByb3BlcnR5KCdsZW5ndGgnKTtcbiAgdmFyIGlzQXJyYXlMaWtlID0gZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoY29sbGVjdGlvbik7XG4gICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID49IDAgJiYgbGVuZ3RoIDw9IE1BWF9BUlJBWV9JTkRFWDtcbiAgfTtcblxuICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuICAvLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsXG4gIC8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuXG4gIF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBpLCBsZW5ndGg7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpbaV0sIGksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtrZXlzW2ldXSwga2V5c1tpXSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudC5cbiAgXy5tYXAgPSBfLmNvbGxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdHMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICByZXN1bHRzW2luZGV4XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpIHtcbiAgICAvLyBPcHRpbWl6ZWQgaXRlcmF0b3IgZnVuY3Rpb24gYXMgdXNpbmcgYXJndW1lbnRzLmxlbmd0aFxuICAgIC8vIGluIHRoZSBtYWluIGZ1bmN0aW9uIHdpbGwgZGVvcHRpbWl6ZSB0aGUsIHNlZSAjMTk5MS5cbiAgICBmdW5jdGlvbiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKSB7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICAgIG1lbW8gPSBpdGVyYXRlZShtZW1vLCBvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgY29udGV4dCkge1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCA0KTtcbiAgICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgICAgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIGluaXRpYWwgdmFsdWUgaWYgbm9uZSBpcyBwcm92aWRlZC5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykge1xuICAgICAgICBtZW1vID0gb2JqW2tleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4XTtcbiAgICAgICAgaW5kZXggKz0gZGlyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpO1xuICAgIH07XG4gIH1cblxuICAvLyAqKlJlZHVjZSoqIGJ1aWxkcyB1cCBhIHNpbmdsZSByZXN1bHQgZnJvbSBhIGxpc3Qgb2YgdmFsdWVzLCBha2EgYGluamVjdGAsXG4gIC8vIG9yIGBmb2xkbGAuXG4gIF8ucmVkdWNlID0gXy5mb2xkbCA9IF8uaW5qZWN0ID0gY3JlYXRlUmVkdWNlKDEpO1xuXG4gIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLlxuICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGNyZWF0ZVJlZHVjZSgtMSk7XG5cbiAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLlxuICBfLmZpbmQgPSBfLmRldGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIGtleTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAga2V5ID0gXy5maW5kSW5kZXgob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXkgPSBfLmZpbmRLZXkob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIH1cbiAgICBpZiAoa2V5ICE9PSB2b2lkIDAgJiYga2V5ICE9PSAtMSkgcmV0dXJuIG9ialtrZXldO1xuICB9O1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIHRoYXQgcGFzcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYHNlbGVjdGAuXG4gIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBsaXN0KSkgcmVzdWx0cy5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggYSB0cnV0aCB0ZXN0IGZhaWxzLlxuICBfLnJlamVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5uZWdhdGUoY2IocHJlZGljYXRlKSksIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBhbGxgLlxuICBfLmV2ZXJ5ID0gXy5hbGwgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIGlmICghcHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIG9iamVjdCBtYXRjaGVzIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYW55YC5cbiAgXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiB0aGUgYXJyYXkgb3Igb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gaXRlbSAodXNpbmcgYD09PWApLlxuICAvLyBBbGlhc2VkIGFzIGBpbmNsdWRlc2AgYW5kIGBpbmNsdWRlYC5cbiAgXy5jb250YWlucyA9IF8uaW5jbHVkZXMgPSBfLmluY2x1ZGUgPSBmdW5jdGlvbihvYmosIGl0ZW0sIGZyb21JbmRleCwgZ3VhcmQpIHtcbiAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggIT0gJ251bWJlcicgfHwgZ3VhcmQpIGZyb21JbmRleCA9IDA7XG4gICAgcmV0dXJuIF8uaW5kZXhPZihvYmosIGl0ZW0sIGZyb21JbmRleCkgPj0gMDtcbiAgfTtcblxuICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi5cbiAgXy5pbnZva2UgPSBmdW5jdGlvbihvYmosIG1ldGhvZCkge1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBpc0Z1bmMgPSBfLmlzRnVuY3Rpb24obWV0aG9kKTtcbiAgICByZXR1cm4gXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGZ1bmMgPSBpc0Z1bmMgPyBtZXRob2QgOiB2YWx1ZVttZXRob2RdO1xuICAgICAgcmV0dXJuIGZ1bmMgPT0gbnVsbCA/IGZ1bmMgOiBmdW5jLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBtYXBgOiBmZXRjaGluZyBhIHByb3BlcnR5LlxuICBfLnBsdWNrID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gXy5tYXAob2JqLCBfLnByb3BlcnR5KGtleSkpO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbHRlcmA6IHNlbGVjdGluZyBvbmx5IG9iamVjdHNcbiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy53aGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaW5kYDogZ2V0dGluZyB0aGUgZmlyc3Qgb2JqZWN0XG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uZmluZFdoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuICAgIHJldHVybiBfLmZpbmQob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1heGltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWF4ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSAtSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IC1JbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA+IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkID4gbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSAtSW5maW5pdHkgJiYgcmVzdWx0ID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlIDwgcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gU2h1ZmZsZSBhIGNvbGxlY3Rpb24sIHVzaW5nIHRoZSBtb2Rlcm4gdmVyc2lvbiBvZiB0aGVcbiAgLy8gW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlcuKAk1lhdGVzX3NodWZmbGUpLlxuICBfLnNodWZmbGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgc2V0ID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IHNldC5sZW5ndGg7XG4gICAgdmFyIHNodWZmbGVkID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDAsIHJhbmQ7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICByYW5kID0gXy5yYW5kb20oMCwgaW5kZXgpO1xuICAgICAgaWYgKHJhbmQgIT09IGluZGV4KSBzaHVmZmxlZFtpbmRleF0gPSBzaHVmZmxlZFtyYW5kXTtcbiAgICAgIHNodWZmbGVkW3JhbmRdID0gc2V0W2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIHNodWZmbGVkO1xuICB9O1xuXG4gIC8vIFNhbXBsZSAqKm4qKiByYW5kb20gdmFsdWVzIGZyb20gYSBjb2xsZWN0aW9uLlxuICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LlxuICAvLyBUaGUgaW50ZXJuYWwgYGd1YXJkYCBhcmd1bWVudCBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBtYXBgLlxuICBfLnNhbXBsZSA9IGZ1bmN0aW9uKG9iaiwgbiwgZ3VhcmQpIHtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG4gICAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgICByZXR1cm4gb2JqW18ucmFuZG9tKG9iai5sZW5ndGggLSAxKV07XG4gICAgfVxuICAgIHJldHVybiBfLnNodWZmbGUob2JqKS5zbGljZSgwLCBNYXRoLm1heCgwLCBuKSk7XG4gIH07XG5cbiAgLy8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdGVlLlxuICBfLnNvcnRCeSA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIGNyaXRlcmlhOiBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpXG4gICAgICB9O1xuICAgIH0pLnNvcnQoZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICAgIHZhciBhID0gbGVmdC5jcml0ZXJpYTtcbiAgICAgIHZhciBiID0gcmlnaHQuY3JpdGVyaWE7XG4gICAgICBpZiAoYSAhPT0gYikge1xuICAgICAgICBpZiAoYSA+IGIgfHwgYSA9PT0gdm9pZCAwKSByZXR1cm4gMTtcbiAgICAgICAgaWYgKGEgPCBiIHx8IGIgPT09IHZvaWQgMCkgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxlZnQuaW5kZXggLSByaWdodC5pbmRleDtcbiAgICB9KSwgJ3ZhbHVlJyk7XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gdXNlZCBmb3IgYWdncmVnYXRlIFwiZ3JvdXAgYnlcIiBvcGVyYXRpb25zLlxuICB2YXIgZ3JvdXAgPSBmdW5jdGlvbihiZWhhdmlvcikge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopO1xuICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi5cbiAgXy5ncm91cEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7IGVsc2UgcmVzdWx0W2tleV0gPSBbdmFsdWVdO1xuICB9KTtcblxuICAvLyBJbmRleGVzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24sIHNpbWlsYXIgdG8gYGdyb3VwQnlgLCBidXQgZm9yXG4gIC8vIHdoZW4geW91IGtub3cgdGhhdCB5b3VyIGluZGV4IHZhbHVlcyB3aWxsIGJlIHVuaXF1ZS5cbiAgXy5pbmRleEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfSk7XG5cbiAgLy8gQ291bnRzIGluc3RhbmNlcyBvZiBhbiBvYmplY3QgdGhhdCBncm91cCBieSBhIGNlcnRhaW4gY3JpdGVyaW9uLiBQYXNzXG4gIC8vIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUgdG8gY291bnQgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAvLyBjcml0ZXJpb24uXG4gIF8uY291bnRCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldKys7IGVsc2UgcmVzdWx0W2tleV0gPSAxO1xuICB9KTtcblxuICAvLyBTYWZlbHkgY3JlYXRlIGEgcmVhbCwgbGl2ZSBhcnJheSBmcm9tIGFueXRoaW5nIGl0ZXJhYmxlLlxuICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIW9iaikgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSkgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7XG4gICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwO1xuICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDtcbiAgfTtcblxuICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuXG4gIC8vIHByZWRpY2F0ZSwgYW5kIG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgZG8gbm90IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAgXy5wYXJ0aXRpb24gPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIHBhc3MgPSBbXSwgZmFpbCA9IFtdO1xuICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikge1xuICAgICAgKHByZWRpY2F0ZSh2YWx1ZSwga2V5LCBvYmopID8gcGFzcyA6IGZhaWwpLnB1c2godmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBbcGFzcywgZmFpbF07XG4gIH07XG5cbiAgLy8gQXJyYXkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgZmlyc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrXG4gIC8vIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC5cbiAgXy5maXJzdCA9IF8uaGVhZCA9IF8udGFrZSA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVswXTtcbiAgICByZXR1cm4gXy5pbml0aWFsKGFycmF5LCBhcnJheS5sZW5ndGggLSBuKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS4gRXNwZWNpYWxseSB1c2VmdWwgb25cbiAgLy8gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gYWxsIHRoZSB2YWx1ZXMgaW5cbiAgLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi5cbiAgXy5pbml0aWFsID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIDAsIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIChuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbikpKTtcbiAgfTtcblxuICAvLyBHZXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgbGFzdCBOXG4gIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ubGFzdCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLlxuICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVyblxuICAvLyB0aGUgcmVzdCBOIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7XG4gIH07XG5cbiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuICBfLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgXy5pZGVudGl0eSk7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLlxuICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBzdHJpY3QsIHN0YXJ0SW5kZXgpIHtcbiAgICB2YXIgb3V0cHV0ID0gW10sIGlkeCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXggfHwgMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGlucHV0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpbnB1dFtpXTtcbiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgIC8vZmxhdHRlbiBjdXJyZW50IGxldmVsIG9mIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3RcbiAgICAgICAgaWYgKCFzaGFsbG93KSB2YWx1ZSA9IGZsYXR0ZW4odmFsdWUsIHNoYWxsb3csIHN0cmljdCk7XG4gICAgICAgIHZhciBqID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICBvdXRwdXQubGVuZ3RoICs9IGxlbjtcbiAgICAgICAgd2hpbGUgKGogPCBsZW4pIHtcbiAgICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWVbaisrXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7XG4gICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBGbGF0dGVuIG91dCBhbiBhcnJheSwgZWl0aGVyIHJlY3Vyc2l2ZWx5IChieSBkZWZhdWx0KSwgb3IganVzdCBvbmUgbGV2ZWwuXG4gIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cbiAgXy53aXRob3V0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG4gIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cbiAgLy8gQWxpYXNlZCBhcyBgdW5pcXVlYC5cbiAgXy51bmlxID0gXy51bmlxdWUgPSBmdW5jdGlvbihhcnJheSwgaXNTb3J0ZWQsIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKCFfLmlzQm9vbGVhbihpc1NvcnRlZCkpIHtcbiAgICAgIGNvbnRleHQgPSBpdGVyYXRlZTtcbiAgICAgIGl0ZXJhdGVlID0gaXNTb3J0ZWQ7XG4gICAgICBpc1NvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaXRlcmF0ZWUgIT0gbnVsbCkgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBzZWVuID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaV0sXG4gICAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSA/IGl0ZXJhdGVlKHZhbHVlLCBpLCBhcnJheSkgOiB2YWx1ZTtcbiAgICAgIGlmIChpc1NvcnRlZCkge1xuICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgfSBlbHNlIGlmIChpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7XG4gICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIV8uY29udGFpbnMocmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cbiAgXy51bmlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuaXEoZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlXG4gIC8vIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gYXJyYXlbaV07XG4gICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTtcbiAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgYXJnc0xlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhhcmd1bWVudHNbal0sIGl0ZW0pKSBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChqID09PSBhcmdzTGVuZ3RoKSByZXN1bHQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBUYWtlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gb25lIGFycmF5IGFuZCBhIG51bWJlciBvZiBvdGhlciBhcnJheXMuXG4gIC8vIE9ubHkgdGhlIGVsZW1lbnRzIHByZXNlbnQgaW4ganVzdCB0aGUgZmlyc3QgYXJyYXkgd2lsbCByZW1haW4uXG4gIF8uZGlmZmVyZW5jZSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3QgPSBmbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSwgMSk7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmVcbiAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuXG4gIF8uemlwID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIF8udW56aXAoYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDb21wbGVtZW50IG9mIF8uemlwLiBVbnppcCBhY2NlcHRzIGFuIGFycmF5IG9mIGFycmF5cyBhbmQgZ3JvdXBzXG4gIC8vIGVhY2ggYXJyYXkncyBlbGVtZW50cyBvbiBzaGFyZWQgaW5kaWNlc1xuICBfLnVuemlwID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgJiYgXy5tYXgoYXJyYXksIGdldExlbmd0aCkubGVuZ3RoIHx8IDA7XG4gICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICByZXN1bHRbaW5kZXhdID0gXy5wbHVjayhhcnJheSwgaW5kZXgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENvbnZlcnRzIGxpc3RzIGludG8gb2JqZWN0cy4gUGFzcyBlaXRoZXIgYSBzaW5nbGUgYXJyYXkgb2YgYFtrZXksIHZhbHVlXWBcbiAgLy8gcGFpcnMsIG9yIHR3byBwYXJhbGxlbCBhcnJheXMgb2YgdGhlIHNhbWUgbGVuZ3RoIC0tIG9uZSBvZiBrZXlzLCBhbmQgb25lIG9mXG4gIC8vIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlcy5cbiAgXy5vYmplY3QgPSBmdW5jdGlvbihsaXN0LCB2YWx1ZXMpIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChsaXN0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgIHJlc3VsdFtsaXN0W2ldXSA9IHZhbHVlc1tpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtsaXN0W2ldWzBdXSA9IGxpc3RbaV1bMV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZmluZEluZGV4IGFuZCBmaW5kTGFzdEluZGV4IGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcihkaXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgdmFyIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBvbiBhbiBhcnJheS1saWtlIHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kSW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigxKTtcbiAgXy5maW5kTGFzdEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoLTEpO1xuXG4gIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2hcbiAgLy8gYW4gb2JqZWN0IHNob3VsZCBiZSBpbnNlcnRlZCBzbyBhcyB0byBtYWludGFpbiBvcmRlci4gVXNlcyBiaW5hcnkgc2VhcmNoLlxuICBfLnNvcnRlZEluZGV4ID0gZnVuY3Rpb24oYXJyYXksIG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICB2YXIgdmFsdWUgPSBpdGVyYXRlZShvYmopO1xuICAgIHZhciBsb3cgPSAwLCBoaWdoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgdmFyIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMik7XG4gICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbbWlkXSkgPCB2YWx1ZSkgbG93ID0gbWlkICsgMTsgZWxzZSBoaWdoID0gbWlkO1xuICAgIH1cbiAgICByZXR1cm4gbG93O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGluZGV4T2YgYW5kIGxhc3RJbmRleE9mIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBjcmVhdGVJbmRleEZpbmRlcihkaXIsIHByZWRpY2F0ZUZpbmQsIHNvcnRlZEluZGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBpZHgpIHtcbiAgICAgIHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIGlmICh0eXBlb2YgaWR4ID09ICdudW1iZXInKSB7XG4gICAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICBpID0gaWR4ID49IDAgPyBpZHggOiBNYXRoLm1heChpZHggKyBsZW5ndGgsIGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGVuZ3RoID0gaWR4ID49IDAgPyBNYXRoLm1pbihpZHggKyAxLCBsZW5ndGgpIDogaWR4ICsgbGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzb3J0ZWRJbmRleCAmJiBpZHggJiYgbGVuZ3RoKSB7XG4gICAgICAgIGlkeCA9IHNvcnRlZEluZGV4KGFycmF5LCBpdGVtKTtcbiAgICAgICAgcmV0dXJuIGFycmF5W2lkeF0gPT09IGl0ZW0gPyBpZHggOiAtMTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtICE9PSBpdGVtKSB7XG4gICAgICAgIGlkeCA9IHByZWRpY2F0ZUZpbmQoc2xpY2UuY2FsbChhcnJheSwgaSwgbGVuZ3RoKSwgXy5pc05hTik7XG4gICAgICAgIHJldHVybiBpZHggPj0gMCA/IGlkeCArIGkgOiAtMTtcbiAgICAgIH1cbiAgICAgIGZvciAoaWR4ID0gZGlyID4gMCA/IGkgOiBsZW5ndGggLSAxOyBpZHggPj0gMCAmJiBpZHggPCBsZW5ndGg7IGlkeCArPSBkaXIpIHtcbiAgICAgICAgaWYgKGFycmF5W2lkeF0gPT09IGl0ZW0pIHJldHVybiBpZHg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFJldHVybiB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gaXRlbSBpbiBhbiBhcnJheSxcbiAgLy8gb3IgLTEgaWYgdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS5cbiAgLy8gSWYgdGhlIGFycmF5IGlzIGxhcmdlIGFuZCBhbHJlYWR5IGluIHNvcnQgb3JkZXIsIHBhc3MgYHRydWVgXG4gIC8vIGZvciAqKmlzU29ydGVkKiogdG8gdXNlIGJpbmFyeSBzZWFyY2guXG4gIF8uaW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKDEsIF8uZmluZEluZGV4LCBfLnNvcnRlZEluZGV4KTtcbiAgXy5sYXN0SW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKC0xLCBfLmZpbmRMYXN0SW5kZXgpO1xuXG4gIC8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2ZcbiAgLy8gdGhlIG5hdGl2ZSBQeXRob24gYHJhbmdlKClgIGZ1bmN0aW9uLiBTZWVcbiAgLy8gW3RoZSBQeXRob24gZG9jdW1lbnRhdGlvbl0oaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L2Z1bmN0aW9ucy5odG1sI3JhbmdlKS5cbiAgXy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7XG4gICAgaWYgKHN0b3AgPT0gbnVsbCkge1xuICAgICAgc3RvcCA9IHN0YXJ0IHx8IDA7XG4gICAgICBzdGFydCA9IDA7XG4gICAgfVxuICAgIHN0ZXAgPSBzdGVwIHx8IDE7XG5cbiAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5jZWlsKChzdG9wIC0gc3RhcnQpIC8gc3RlcCksIDApO1xuICAgIHZhciByYW5nZSA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrLCBzdGFydCArPSBzdGVwKSB7XG4gICAgICByYW5nZVtpZHhdID0gc3RhcnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIChhaGVtKSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGV4ZWN1dGUgYSBmdW5jdGlvbiBhcyBhIGNvbnN0cnVjdG9yXG4gIC8vIG9yIGEgbm9ybWFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3ZpZGVkIGFyZ3VtZW50c1xuICB2YXIgZXhlY3V0ZUJvdW5kID0gZnVuY3Rpb24oc291cmNlRnVuYywgYm91bmRGdW5jLCBjb250ZXh0LCBjYWxsaW5nQ29udGV4dCwgYXJncykge1xuICAgIGlmICghKGNhbGxpbmdDb250ZXh0IGluc3RhbmNlb2YgYm91bmRGdW5jKSkgcmV0dXJuIHNvdXJjZUZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gc291cmNlRnVuYy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICBpZiAoXy5pc09iamVjdChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLFxuICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmXG4gIC8vIGF2YWlsYWJsZS5cbiAgXy5iaW5kID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCkge1xuICAgIGlmIChuYXRpdmVCaW5kICYmIGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCkgcmV0dXJuIG5hdGl2ZUJpbmQuYXBwbHkoZnVuYywgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICBpZiAoIV8uaXNGdW5jdGlvbihmdW5jKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCBjb250ZXh0LCB0aGlzLCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzXG4gIC8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHNcbiAgLy8gYXMgYSBwbGFjZWhvbGRlciwgYWxsb3dpbmcgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cyB0byBiZSBwcmUtZmlsbGVkLlxuICBfLnBhcnRpYWwgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgdmFyIGJvdW5kQXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IDAsIGxlbmd0aCA9IGJvdW5kQXJncy5sZW5ndGg7XG4gICAgICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyZ3NbaV0gPSBib3VuZEFyZ3NbaV0gPT09IF8gPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07XG4gICAgICB9XG4gICAgICB3aGlsZSAocG9zaXRpb24gPCBhcmd1bWVudHMubGVuZ3RoKSBhcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9O1xuXG4gIC8vIEJpbmQgYSBudW1iZXIgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gUmVtYWluaW5nIGFyZ3VtZW50c1xuICAvLyBhcmUgdGhlIG1ldGhvZCBuYW1lcyB0byBiZSBib3VuZC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGFsbCBjYWxsYmFja3NcbiAgLy8gZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LlxuICBfLmJpbmRBbGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaSwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCwga2V5O1xuICAgIGlmIChsZW5ndGggPD0gMSkgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7XG4gICAgZm9yIChpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBhcmd1bWVudHNbaV07XG4gICAgICBvYmpba2V5XSA9IF8uYmluZChvYmpba2V5XSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBNZW1vaXplIGFuIGV4cGVuc2l2ZSBmdW5jdGlvbiBieSBzdG9yaW5nIGl0cyByZXN1bHRzLlxuICBfLm1lbW9pemUgPSBmdW5jdGlvbihmdW5jLCBoYXNoZXIpIHtcbiAgICB2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZS5jYWNoZTtcbiAgICAgIHZhciBhZGRyZXNzID0gJycgKyAoaGFzaGVyID8gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBrZXkpO1xuICAgICAgaWYgKCFfLmhhcyhjYWNoZSwgYWRkcmVzcykpIGNhY2hlW2FkZHJlc3NdID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIGNhY2hlW2FkZHJlc3NdO1xuICAgIH07XG4gICAgbWVtb2l6ZS5jYWNoZSA9IHt9O1xuICAgIHJldHVybiBtZW1vaXplO1xuICB9O1xuXG4gIC8vIERlbGF5cyBhIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gY2FsbHNcbiAgLy8gaXQgd2l0aCB0aGUgYXJndW1lbnRzIHN1cHBsaWVkLlxuICBfLmRlbGF5ID0gZnVuY3Rpb24oZnVuYywgd2FpdCkge1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9LCB3YWl0KTtcbiAgfTtcblxuICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXNcbiAgLy8gY2xlYXJlZC5cbiAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4gIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjtcbiAgLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3NcbiAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG4gIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgdGltZW91dCA9IG51bGw7XG4gICAgdmFyIHByZXZpb3VzID0gMDtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBfLm5vdygpO1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm93ID0gXy5ub3coKTtcbiAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG4gICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICAvLyBOIG1pbGxpc2Vjb25kcy4gSWYgYGltbWVkaWF0ZWAgaXMgcGFzc2VkLCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGVcbiAgLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblxuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxhc3QgPSBfLm5vdygpIC0gdGltZXN0YW1wO1xuXG4gICAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHRpbWVzdGFtcCA9IF8ubm93KCk7XG4gICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgIGlmICghdGltZW91dCkgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgZnVuY3Rpb24gcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBzZWNvbmQsXG4gIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmRcbiAgLy8gY29uZGl0aW9uYWxseSBleGVjdXRlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cbiAgXy53cmFwID0gZnVuY3Rpb24oZnVuYywgd3JhcHBlcikge1xuICAgIHJldHVybiBfLnBhcnRpYWwod3JhcHBlciwgZnVuYyk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIG5lZ2F0ZWQgdmVyc2lvbiBvZiB0aGUgcGFzc2VkLWluIHByZWRpY2F0ZS5cbiAgXy5uZWdhdGUgPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgdGhlIGNvbXBvc2l0aW9uIG9mIGEgbGlzdCBvZiBmdW5jdGlvbnMsIGVhY2hcbiAgLy8gY29uc3VtaW5nIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cbiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIHN0YXJ0ID0gYXJncy5sZW5ndGggLSAxO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpID0gc3RhcnQ7XG4gICAgICB2YXIgcmVzdWx0ID0gYXJnc1tzdGFydF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCBvbiBhbmQgYWZ0ZXIgdGhlIE50aCBjYWxsLlxuICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCB1cCB0byAoYnV0IG5vdCBpbmNsdWRpbmcpIHRoZSBOdGggY2FsbC5cbiAgXy5iZWZvcmUgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIHZhciBtZW1vO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzID4gMCkge1xuICAgICAgICBtZW1vID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKHRpbWVzIDw9IDEpIGZ1bmMgPSBudWxsO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGF0IG1vc3Qgb25lIHRpbWUsIG5vIG1hdHRlciBob3dcbiAgLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi5cbiAgXy5vbmNlID0gXy5wYXJ0aWFsKF8uYmVmb3JlLCAyKTtcblxuICAvLyBPYmplY3QgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLlxuICB2YXIgaGFzRW51bUJ1ZyA9ICF7dG9TdHJpbmc6IG51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpO1xuICB2YXIgbm9uRW51bWVyYWJsZVByb3BzID0gWyd2YWx1ZU9mJywgJ2lzUHJvdG90eXBlT2YnLCAndG9TdHJpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddO1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKSB7XG4gICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgcHJvdG8gPSAoXy5pc0Z1bmN0aW9uKGNvbnN0cnVjdG9yKSAmJiBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpIHx8IE9ialByb3RvO1xuXG4gICAgLy8gQ29uc3RydWN0b3IgaXMgYSBzcGVjaWFsIGNhc2UuXG4gICAgdmFyIHByb3AgPSAnY29uc3RydWN0b3InO1xuICAgIGlmIChfLmhhcyhvYmosIHByb3ApICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSBrZXlzLnB1c2gocHJvcCk7XG5cbiAgICB3aGlsZSAobm9uRW51bUlkeC0tKSB7XG4gICAgICBwcm9wID0gbm9uRW51bWVyYWJsZVByb3BzW25vbkVudW1JZHhdO1xuICAgICAgaWYgKHByb3AgaW4gb2JqICYmIG9ialtwcm9wXSAhPT0gcHJvdG9bcHJvcF0gJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIHtcbiAgICAgICAga2V5cy5wdXNoKHByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFJldHJpZXZlIHRoZSBuYW1lcyBvZiBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYFxuICBfLmtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIGlmIChuYXRpdmVLZXlzKSByZXR1cm4gbmF0aXZlS2V5cyhvYmopO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKF8uaGFzKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgYWxsIHRoZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QuXG4gIF8uYWxsS2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuXG4gIF8udmFsdWVzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHZhbHVlcyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWVzW2ldID0gb2JqW2tleXNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudCBvZiB0aGUgb2JqZWN0XG4gIC8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0XG4gIF8ubWFwT2JqZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdHMgPSB7fSxcbiAgICAgICAgICBjdXJyZW50S2V5O1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjdXJyZW50S2V5ID0ga2V5c1tpbmRleF07XG4gICAgICAgIHJlc3VsdHNbY3VycmVudEtleV0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy5cbiAgXy5wYWlycyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciBwYWlycyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcGFpcnNbaV0gPSBba2V5c1tpXSwgb2JqW2tleXNbaV1dXTtcbiAgICB9XG4gICAgcmV0dXJuIHBhaXJzO1xuICB9O1xuXG4gIC8vIEludmVydCB0aGUga2V5cyBhbmQgdmFsdWVzIG9mIGFuIG9iamVjdC4gVGhlIHZhbHVlcyBtdXN0IGJlIHNlcmlhbGl6YWJsZS5cbiAgXy5pbnZlcnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgcmVzdWx0W29ialtrZXlzW2ldXV0gPSBrZXlzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHNvcnRlZCBsaXN0IG9mIHRoZSBmdW5jdGlvbiBuYW1lcyBhdmFpbGFibGUgb24gdGhlIG9iamVjdC5cbiAgLy8gQWxpYXNlZCBhcyBgbWV0aG9kc2BcbiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuICB9O1xuXG4gIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7XG5cbiAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3QocylcbiAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24pXG4gIF8uZXh0ZW5kT3duID0gXy5hc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihfLmtleXMpO1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGtleSBvbiBhbiBvYmplY3QgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuICBfLmZpbmRLZXkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKSwga2V5O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKHByZWRpY2F0ZShvYmpba2V5XSwga2V5LCBvYmopKSByZXR1cm4ga2V5O1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLnBpY2sgPSBmdW5jdGlvbihvYmplY3QsIG9pdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSB7fSwgb2JqID0gb2JqZWN0LCBpdGVyYXRlZSwga2V5cztcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHQ7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihvaXRlcmF0ZWUpKSB7XG4gICAgICBrZXlzID0gXy5hbGxLZXlzKG9iaik7XG4gICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2Iob2l0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5cyA9IGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHsgcmV0dXJuIGtleSBpbiBvYmo7IH07XG4gICAgICBvYmogPSBPYmplY3Qob2JqKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBpZiAoaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqKSkgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ub21pdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaXRlcmF0ZWUgPSBfLm5lZ2F0ZShpdGVyYXRlZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5tYXAoZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSksIFN0cmluZyk7XG4gICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKGtleXMsIGtleSk7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gXy5waWNrKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIF8uZGVmYXVsdHMgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsIHRydWUpO1xuXG4gIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC5cbiAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgLy8gY3JlYXRlZCBvYmplY3QuXG4gIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykge1xuICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC5cbiAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7XG4gIH07XG5cbiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLlxuICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cbiAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gIF8udGFwID0gZnVuY3Rpb24ob2JqLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZiBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5pc01hdGNoID0gZnVuY3Rpb24ob2JqZWN0LCBhdHRycykge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gIWxlbmd0aDtcbiAgICB2YXIgb2JqID0gT2JqZWN0KG9iamVjdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoYXR0cnNba2V5XSAhPT0gb2JqW2tleV0gfHwgIShrZXkgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuXG4gIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuXG4gIHZhciBlcSA9IGZ1bmN0aW9uKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG4gICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuICAgIC8vIFNlZSB0aGUgW0hhcm1vbnkgYGVnYWxgIHByb3Bvc2FsXShodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwpLlxuICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGI7XG4gICAgLy8gQSBzdHJpY3QgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkgYmVjYXVzZSBgbnVsbCA9PSB1bmRlZmluZWRgLlxuICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSByZXR1cm4gYSA9PT0gYjtcbiAgICAvLyBVbndyYXAgYW55IHdyYXBwZWQgb2JqZWN0cy5cbiAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkO1xuICAgIGlmIChiIGluc3RhbmNlb2YgXykgYiA9IGIuX3dyYXBwZWQ7XG4gICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cbiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBpZiAoY2xhc3NOYW1lICE9PSB0b1N0cmluZy5jYWxsKGIpKSByZXR1cm4gZmFsc2U7XG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvZXJjZWQgdG8gc3RyaW5ncyBmb3IgY29tcGFyaXNvbiAoTm90ZTogJycgKyAvYS9pID09PSAnL2EvaScpXG4gICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAvLyBQcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCB3cmFwcGVycyBhcmUgZXF1aXZhbGVudDsgdGh1cywgYFwiNVwiYCBpc1xuICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG4gICAgICAgIHJldHVybiAnJyArIGEgPT09ICcnICsgYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG4gICAgICAgIC8vIE9iamVjdChOYU4pIGlzIGVxdWl2YWxlbnQgdG8gTmFOXG4gICAgICAgIGlmICgrYSAhPT0gK2EpIHJldHVybiArYiAhPT0gK2I7XG4gICAgICAgIC8vIEFuIGBlZ2FsYCBjb21wYXJpc29uIGlzIHBlcmZvcm1lZCBmb3Igb3RoZXIgbnVtZXJpYyB2YWx1ZXMuXG4gICAgICAgIHJldHVybiArYSA9PT0gMCA/IDEgLyArYSA9PT0gMSAvIGIgOiArYSA9PT0gK2I7XG4gICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWVyaWMgcHJpbWl0aXZlIHZhbHVlcy4gRGF0ZXMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyXG4gICAgICAgIC8vIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucy4gTm90ZSB0aGF0IGludmFsaWQgZGF0ZXMgd2l0aCBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnNcbiAgICAgICAgLy8gb2YgYE5hTmAgYXJlIG5vdCBlcXVpdmFsZW50LlxuICAgICAgICByZXR1cm4gK2EgPT09ICtiO1xuICAgIH1cblxuICAgIHZhciBhcmVBcnJheXMgPSBjbGFzc05hbWUgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgaWYgKCFhcmVBcnJheXMpIHtcbiAgICAgIGlmICh0eXBlb2YgYSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBPYmplY3RzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWl2YWxlbnQsIGJ1dCBgT2JqZWN0YHMgb3IgYEFycmF5YHNcbiAgICAgIC8vIGZyb20gZGlmZmVyZW50IGZyYW1lcyBhcmUuXG4gICAgICB2YXIgYUN0b3IgPSBhLmNvbnN0cnVjdG9yLCBiQ3RvciA9IGIuY29uc3RydWN0b3I7XG4gICAgICBpZiAoYUN0b3IgIT09IGJDdG9yICYmICEoXy5pc0Z1bmN0aW9uKGFDdG9yKSAmJiBhQ3RvciBpbnN0YW5jZW9mIGFDdG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5pc0Z1bmN0aW9uKGJDdG9yKSAmJiBiQ3RvciBpbnN0YW5jZW9mIGJDdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJ2NvbnN0cnVjdG9yJyBpbiBhICYmICdjb25zdHJ1Y3RvcicgaW4gYikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljXG4gICAgLy8gc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AuXG5cbiAgICAvLyBJbml0aWFsaXppbmcgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgLy8gSXQncyBkb25lIGhlcmUgc2luY2Ugd2Ugb25seSBuZWVkIHRoZW0gZm9yIG9iamVjdHMgYW5kIGFycmF5cyBjb21wYXJpc29uLlxuICAgIGFTdGFjayA9IGFTdGFjayB8fCBbXTtcbiAgICBiU3RhY2sgPSBiU3RhY2sgfHwgW107XG4gICAgdmFyIGxlbmd0aCA9IGFTdGFjay5sZW5ndGg7XG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAvLyBMaW5lYXIgc2VhcmNoLiBQZXJmb3JtYW5jZSBpcyBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2ZcbiAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy5cbiAgICAgIGlmIChhU3RhY2tbbGVuZ3RoXSA9PT0gYSkgcmV0dXJuIGJTdGFja1tsZW5ndGhdID09PSBiO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBhU3RhY2sucHVzaChhKTtcbiAgICBiU3RhY2sucHVzaChiKTtcblxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgIGlmIChhcmVBcnJheXMpIHtcbiAgICAgIC8vIENvbXBhcmUgYXJyYXkgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5LlxuICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gRGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcy5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoIWVxKGFbbGVuZ3RoXSwgYltsZW5ndGhdLCBhU3RhY2ssIGJTdGFjaykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVlcCBjb21wYXJlIG9iamVjdHMuXG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhhKSwga2V5O1xuICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAvLyBFbnN1cmUgdGhhdCBib3RoIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllcyBiZWZvcmUgY29tcGFyaW5nIGRlZXAgZXF1YWxpdHkuXG4gICAgICBpZiAoXy5rZXlzKGIpLmxlbmd0aCAhPT0gbGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgLy8gRGVlcCBjb21wYXJlIGVhY2ggbWVtYmVyXG4gICAgICAgIGtleSA9IGtleXNbbGVuZ3RoXTtcbiAgICAgICAgaWYgKCEoXy5oYXMoYiwga2V5KSAmJiBlcShhW2tleV0sIGJba2V5XSwgYVN0YWNrLCBiU3RhY2spKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IG9iamVjdCBmcm9tIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBhU3RhY2sucG9wKCk7XG4gICAgYlN0YWNrLnBvcCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIFBlcmZvcm0gYSBkZWVwIGNvbXBhcmlzb24gdG8gY2hlY2sgaWYgdHdvIG9iamVjdHMgYXJlIGVxdWFsLlxuICBfLmlzRXF1YWwgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGVxKGEsIGIpO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gYXJyYXksIHN0cmluZywgb3Igb2JqZWN0IGVtcHR5P1xuICAvLyBBbiBcImVtcHR5XCIgb2JqZWN0IGhhcyBubyBlbnVtZXJhYmxlIG93bi1wcm9wZXJ0aWVzLlxuICBfLmlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopICYmIChfLmlzQXJyYXkob2JqKSB8fCBfLmlzU3RyaW5nKG9iaikgfHwgXy5pc0FyZ3VtZW50cyhvYmopKSkgcmV0dXJuIG9iai5sZW5ndGggPT09IDA7XG4gICAgcmV0dXJuIF8ua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgRE9NIGVsZW1lbnQ/XG4gIF8uaXNFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT09IDEpO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYW4gYXJyYXk/XG4gIC8vIERlbGVnYXRlcyB0byBFQ01BNSdzIG5hdGl2ZSBBcnJheS5pc0FycmF5XG4gIF8uaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIGFuIG9iamVjdD9cbiAgXy5pc09iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlID09PSAnb2JqZWN0JyAmJiAhIW9iajtcbiAgfTtcblxuICAvLyBBZGQgc29tZSBpc1R5cGUgbWV0aG9kczogaXNBcmd1bWVudHMsIGlzRnVuY3Rpb24sIGlzU3RyaW5nLCBpc051bWJlciwgaXNEYXRlLCBpc1JlZ0V4cCwgaXNFcnJvci5cbiAgXy5lYWNoKFsnQXJndW1lbnRzJywgJ0Z1bmN0aW9uJywgJ1N0cmluZycsICdOdW1iZXInLCAnRGF0ZScsICdSZWdFeHAnLCAnRXJyb3InXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJztcbiAgICB9O1xuICB9KTtcblxuICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFIDwgOSksIHdoZXJlXG4gIC8vIHRoZXJlIGlzbid0IGFueSBpbnNwZWN0YWJsZSBcIkFyZ3VtZW50c1wiIHR5cGUuXG4gIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7XG4gICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaGFzKG9iaiwgJ2NhbGxlZScpO1xuICAgIH07XG4gIH1cblxuICAvLyBPcHRpbWl6ZSBgaXNGdW5jdGlvbmAgaWYgYXBwcm9wcmlhdGUuIFdvcmsgYXJvdW5kIHNvbWUgdHlwZW9mIGJ1Z3MgaW4gb2xkIHY4LFxuICAvLyBJRSAxMSAoIzE2MjEpLCBhbmQgaW4gU2FmYXJpIDggKCMxOTI5KS5cbiAgaWYgKHR5cGVvZiAvLi8gIT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnKSB7XG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICAgIH07XG4gIH1cblxuICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG4gIF8uaXNGaW5pdGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gaXNGaW5pdGUob2JqKSAmJiAhaXNOYU4ocGFyc2VGbG9hdChvYmopKTtcbiAgfTtcblxuICAvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/IChOYU4gaXMgdGhlIG9ubHkgbnVtYmVyIHdoaWNoIGRvZXMgbm90IGVxdWFsIGl0c2VsZikuXG4gIF8uaXNOYU4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gXy5pc051bWJlcihvYmopICYmIG9iaiAhPT0gK29iajtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj9cbiAgXy5pc0Jvb2xlYW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuICBfLmlzTnVsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IG51bGw7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG4gIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBwcm9wZXJ0eSBkaXJlY3RseVxuICAvLyBvbiBpdHNlbGYgKGluIG90aGVyIHdvcmRzLCBub3Qgb24gYSBwcm90b3R5cGUpLlxuICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuICB9O1xuXG4gIC8vIFV0aWxpdHkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUnVuIFVuZGVyc2NvcmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYF9gIHZhcmlhYmxlIHRvIGl0c1xuICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuXyA9IHByZXZpb3VzVW5kZXJzY29yZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBLZWVwIHRoZSBpZGVudGl0eSBmdW5jdGlvbiBhcm91bmQgZm9yIGRlZmF1bHQgaXRlcmF0ZWVzLlxuICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLy8gUHJlZGljYXRlLWdlbmVyYXRpbmcgZnVuY3Rpb25zLiBPZnRlbiB1c2VmdWwgb3V0c2lkZSBvZiBVbmRlcnNjb3JlLlxuICBfLmNvbnN0YW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfTtcblxuICBfLm5vb3AgPSBmdW5jdGlvbigpe307XG5cbiAgXy5wcm9wZXJ0eSA9IHByb3BlcnR5O1xuXG4gIC8vIEdlbmVyYXRlcyBhIGZ1bmN0aW9uIGZvciBhIGdpdmVuIG9iamVjdCB0aGF0IHJldHVybnMgYSBnaXZlbiBwcm9wZXJ0eS5cbiAgXy5wcm9wZXJ0eU9mID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PSBudWxsID8gZnVuY3Rpb24oKXt9IDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgcHJlZGljYXRlIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2ZcbiAgLy8gYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ubWF0Y2hlciA9IF8ubWF0Y2hlcyA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgYXR0cnMgPSBfLmV4dGVuZE93bih7fSwgYXR0cnMpO1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmlzTWF0Y2gob2JqLCBhdHRycyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSdW4gYSBmdW5jdGlvbiAqKm4qKiB0aW1lcy5cbiAgXy50aW1lcyA9IGZ1bmN0aW9uKG4sIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIGFjY3VtID0gQXJyYXkoTWF0aC5tYXgoMCwgbikpO1xuICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIGFjY3VtW2ldID0gaXRlcmF0ZWUoaSk7XG4gICAgcmV0dXJuIGFjY3VtO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSkuXG4gIF8ucmFuZG9tID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICBpZiAobWF4ID09IG51bGwpIHtcbiAgICAgIG1heCA9IG1pbjtcbiAgICAgIG1pbiA9IDA7XG4gICAgfVxuICAgIHJldHVybiBtaW4gKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xuICB9O1xuXG4gIC8vIEEgKHBvc3NpYmx5IGZhc3Rlcikgd2F5IHRvIGdldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYXMgYW4gaW50ZWdlci5cbiAgXy5ub3cgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH07XG5cbiAgIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuXG4gIHZhciBlc2NhcGVNYXAgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgICAnYCc6ICcmI3g2MDsnXG4gIH07XG4gIHZhciB1bmVzY2FwZU1hcCA9IF8uaW52ZXJ0KGVzY2FwZU1hcCk7XG5cbiAgLy8gRnVuY3Rpb25zIGZvciBlc2NhcGluZyBhbmQgdW5lc2NhcGluZyBzdHJpbmdzIHRvL2Zyb20gSFRNTCBpbnRlcnBvbGF0aW9uLlxuICB2YXIgY3JlYXRlRXNjYXBlciA9IGZ1bmN0aW9uKG1hcCkge1xuICAgIHZhciBlc2NhcGVyID0gZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXBbbWF0Y2hdO1xuICAgIH07XG4gICAgLy8gUmVnZXhlcyBmb3IgaWRlbnRpZnlpbmcgYSBrZXkgdGhhdCBuZWVkcyB0byBiZSBlc2NhcGVkXG4gICAgdmFyIHNvdXJjZSA9ICcoPzonICsgXy5rZXlzKG1hcCkuam9pbignfCcpICsgJyknO1xuICAgIHZhciB0ZXN0UmVnZXhwID0gUmVnRXhwKHNvdXJjZSk7XG4gICAgdmFyIHJlcGxhY2VSZWdleHAgPSBSZWdFeHAoc291cmNlLCAnZycpO1xuICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBudWxsID8gJycgOiAnJyArIHN0cmluZztcbiAgICAgIHJldHVybiB0ZXN0UmVnZXhwLnRlc3Qoc3RyaW5nKSA/IHN0cmluZy5yZXBsYWNlKHJlcGxhY2VSZWdleHAsIGVzY2FwZXIpIDogc3RyaW5nO1xuICAgIH07XG4gIH07XG4gIF8uZXNjYXBlID0gY3JlYXRlRXNjYXBlcihlc2NhcGVNYXApO1xuICBfLnVuZXNjYXBlID0gY3JlYXRlRXNjYXBlcih1bmVzY2FwZU1hcCk7XG5cbiAgLy8gSWYgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZCBgcHJvcGVydHlgIGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQgd2l0aCB0aGVcbiAgLy8gYG9iamVjdGAgYXMgY29udGV4dDsgb3RoZXJ3aXNlLCByZXR1cm4gaXQuXG4gIF8ucmVzdWx0ID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgZmFsbGJhY2spIHtcbiAgICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHZvaWQgMCA6IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIHZhbHVlID0gZmFsbGJhY2s7XG4gICAgfVxuICAgIHJldHVybiBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS5cbiAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbiAgdmFyIGlkQ291bnRlciA9IDA7XG4gIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgaWQgPSArK2lkQ291bnRlciArICcnO1xuICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuICAvLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICBldmFsdWF0ZSAgICA6IC88JShbXFxzXFxTXSs/KSU+L2csXG4gICAgaW50ZXJwb2xhdGUgOiAvPCU9KFtcXHNcXFNdKz8pJT4vZyxcbiAgICBlc2NhcGUgICAgICA6IC88JS0oW1xcc1xcU10rPyklPi9nXG4gIH07XG5cbiAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhblxuICAvLyBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uIG9yIGVzY2FwaW5nIHJlZ2V4LCB3ZSBuZWVkIG9uZSB0aGF0IGlzXG4gIC8vIGd1YXJhbnRlZWQgbm90IHRvIG1hdGNoLlxuICB2YXIgbm9NYXRjaCA9IC8oLileLztcblxuICAvLyBDZXJ0YWluIGNoYXJhY3RlcnMgbmVlZCB0byBiZSBlc2NhcGVkIHNvIHRoYXQgdGhleSBjYW4gYmUgcHV0IGludG8gYVxuICAvLyBzdHJpbmcgbGl0ZXJhbC5cbiAgdmFyIGVzY2FwZXMgPSB7XG4gICAgXCInXCI6ICAgICAgXCInXCIsXG4gICAgJ1xcXFwnOiAgICAgJ1xcXFwnLFxuICAgICdcXHInOiAgICAgJ3InLFxuICAgICdcXG4nOiAgICAgJ24nLFxuICAgICdcXHUyMDI4JzogJ3UyMDI4JyxcbiAgICAnXFx1MjAyOSc6ICd1MjAyOSdcbiAgfTtcblxuICB2YXIgZXNjYXBlciA9IC9cXFxcfCd8XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvZztcblxuICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgcmV0dXJuICdcXFxcJyArIGVzY2FwZXNbbWF0Y2hdO1xuICB9O1xuXG4gIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uXG4gIC8vIFVuZGVyc2NvcmUgdGVtcGxhdGluZyBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXMgd2hpdGVzcGFjZSxcbiAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuXG4gIC8vIE5COiBgb2xkU2V0dGluZ3NgIG9ubHkgZXhpc3RzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgXy50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHRleHQsIHNldHRpbmdzLCBvbGRTZXR0aW5ncykge1xuICAgIGlmICghc2V0dGluZ3MgJiYgb2xkU2V0dGluZ3MpIHNldHRpbmdzID0gb2xkU2V0dGluZ3M7XG4gICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHt9LCBzZXR0aW5ncywgXy50ZW1wbGF0ZVNldHRpbmdzKTtcblxuICAgIC8vIENvbWJpbmUgZGVsaW1pdGVycyBpbnRvIG9uZSByZWd1bGFyIGV4cHJlc3Npb24gdmlhIGFsdGVybmF0aW9uLlxuICAgIHZhciBtYXRjaGVyID0gUmVnRXhwKFtcbiAgICAgIChzZXR0aW5ncy5lc2NhcGUgfHwgbm9NYXRjaCkuc291cmNlLFxuICAgICAgKHNldHRpbmdzLmludGVycG9sYXRlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoKS5zb3VyY2VcbiAgICBdLmpvaW4oJ3wnKSArICd8JCcsICdnJyk7XG5cbiAgICAvLyBDb21waWxlIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGVzY2FwaW5nIHN0cmluZyBsaXRlcmFscyBhcHByb3ByaWF0ZWx5LlxuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHNvdXJjZSA9IFwiX19wKz0nXCI7XG4gICAgdGV4dC5yZXBsYWNlKG1hdGNoZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUsIGludGVycG9sYXRlLCBldmFsdWF0ZSwgb2Zmc2V0KSB7XG4gICAgICBzb3VyY2UgKz0gdGV4dC5zbGljZShpbmRleCwgb2Zmc2V0KS5yZXBsYWNlKGVzY2FwZXIsIGVzY2FwZUNoYXIpO1xuICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBlc2NhcGUgKyBcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBpbnRlcnBvbGF0ZSArIFwiKSk9PW51bGw/Jyc6X190KStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZSArIFwiXFxuX19wKz0nXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZmVzdC5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcbiAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cbiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXG4gICAgc291cmNlID0gXCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIgK1xuICAgICAgXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiICtcbiAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xcbic7XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHJlbmRlciA9IG5ldyBGdW5jdGlvbihzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJywgJ18nLCBzb3VyY2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGUuc291cmNlID0gc291cmNlO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgZGF0YSwgXyk7XG4gICAgfTtcblxuICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIHNvdXJjZSBhcyBhIGNvbnZlbmllbmNlIGZvciBwcmVjb21waWxhdGlvbi5cbiAgICB2YXIgYXJndW1lbnQgPSBzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJztcbiAgICB0ZW1wbGF0ZS5zb3VyY2UgPSAnZnVuY3Rpb24oJyArIGFyZ3VtZW50ICsgJyl7XFxuJyArIHNvdXJjZSArICd9JztcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfTtcblxuICAvLyBBZGQgYSBcImNoYWluXCIgZnVuY3Rpb24uIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBpbnN0YW5jZSA9IF8ob2JqKTtcbiAgICBpbnN0YW5jZS5fY2hhaW4gPSB0cnVlO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcblxuICAvLyBPT1BcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gIC8vIElmIFVuZGVyc2NvcmUgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0XG4gIC8vIGNhbiBiZSB1c2VkIE9PLXN0eWxlLiBUaGlzIHdyYXBwZXIgaG9sZHMgYWx0ZXJlZCB2ZXJzaW9ucyBvZiBhbGwgdGhlXG4gIC8vIHVuZGVyc2NvcmUgZnVuY3Rpb25zLiBXcmFwcGVkIG9iamVjdHMgbWF5IGJlIGNoYWluZWQuXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnRpbnVlIGNoYWluaW5nIGludGVybWVkaWF0ZSByZXN1bHRzLlxuICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikge1xuICAgIHJldHVybiBpbnN0YW5jZS5fY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajtcbiAgfTtcblxuICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubWl4aW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdO1xuICAgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07XG4gICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBmdW5jLmFwcGx5KF8sIGFyZ3MpKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQWRkIGFsbCBvZiB0aGUgVW5kZXJzY29yZSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIgb2JqZWN0LlxuICBfLm1peGluKF8pO1xuXG4gIC8vIEFkZCBhbGwgbXV0YXRvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ3BvcCcsICdwdXNoJywgJ3JldmVyc2UnLCAnc2hpZnQnLCAnc29ydCcsICdzcGxpY2UnLCAndW5zaGlmdCddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG4gICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvYmogPSB0aGlzLl93cmFwcGVkO1xuICAgICAgbWV0aG9kLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcbiAgICAgIGlmICgobmFtZSA9PT0gJ3NoaWZ0JyB8fCBuYW1lID09PSAnc3BsaWNlJykgJiYgb2JqLmxlbmd0aCA9PT0gMCkgZGVsZXRlIG9ialswXTtcbiAgICAgIHJldHVybiByZXN1bHQodGhpcywgb2JqKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBFeHRyYWN0cyB0aGUgcmVzdWx0IGZyb20gYSB3cmFwcGVkIGFuZCBjaGFpbmVkIG9iamVjdC5cbiAgXy5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBQcm92aWRlIHVud3JhcHBpbmcgcHJveHkgZm9yIHNvbWUgbWV0aG9kcyB1c2VkIGluIGVuZ2luZSBvcGVyYXRpb25zXG4gIC8vIHN1Y2ggYXMgYXJpdGhtZXRpYyBhbmQgSlNPTiBzdHJpbmdpZmljYXRpb24uXG4gIF8ucHJvdG90eXBlLnZhbHVlT2YgPSBfLnByb3RvdHlwZS50b0pTT04gPSBfLnByb3RvdHlwZS52YWx1ZTtcblxuICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAnJyArIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gQU1EIHJlZ2lzdHJhdGlvbiBoYXBwZW5zIGF0IHRoZSBlbmQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQgbG9hZGVyc1xuICAvLyB0aGF0IG1heSBub3QgZW5mb3JjZSBuZXh0LXR1cm4gc2VtYW50aWNzIG9uIG1vZHVsZXMuIEV2ZW4gdGhvdWdoIGdlbmVyYWxcbiAgLy8gcHJhY3RpY2UgZm9yIEFNRCByZWdpc3RyYXRpb24gaXMgdG8gYmUgYW5vbnltb3VzLCB1bmRlcnNjb3JlIHJlZ2lzdGVyc1xuICAvLyBhcyBhIG5hbWVkIG1vZHVsZSBiZWNhdXNlLCBsaWtlIGpRdWVyeSwgaXQgaXMgYSBiYXNlIGxpYnJhcnkgdGhhdCBpc1xuICAvLyBwb3B1bGFyIGVub3VnaCB0byBiZSBidW5kbGVkIGluIGEgdGhpcmQgcGFydHkgbGliLCBidXQgbm90IGJlIHBhcnQgb2ZcbiAgLy8gYW4gQU1EIGxvYWQgcmVxdWVzdC4gVGhvc2UgY2FzZXMgY291bGQgZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhblxuICAvLyBhbm9ueW1vdXMgZGVmaW5lKCkgaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBsb2FkZXIgcmVxdWVzdC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZSgndW5kZXJzY29yZScsIFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfO1xuICAgIH0pO1xuICB9XG59LmNhbGwodGhpcykpO1xuIiwiLyogV2ViIEZvbnQgTG9hZGVyIHYxLjYuMjggLSAoYykgQWRvYmUgU3lzdGVtcywgR29vZ2xlLiBMaWNlbnNlOiBBcGFjaGUgMi4wICovKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYWEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9ZnVuY3Rpb24gYmEoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShjLGQpO3JldHVybiBhLmFwcGx5KGIsYyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcChhLGIsYyl7cD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP2FhOmJhO3JldHVybiBwLmFwcGx5KG51bGwsYXJndW1lbnRzKX12YXIgcT1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9O2Z1bmN0aW9uIGNhKGEsYil7dGhpcy5hPWE7dGhpcy5vPWJ8fGE7dGhpcy5jPXRoaXMuby5kb2N1bWVudH12YXIgZGE9ISF3aW5kb3cuRm9udEZhY2U7ZnVuY3Rpb24gdChhLGIsYyxkKXtiPWEuYy5jcmVhdGVFbGVtZW50KGIpO2lmKGMpZm9yKHZhciBlIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShlKSYmKFwic3R5bGVcIj09ZT9iLnN0eWxlLmNzc1RleHQ9Y1tlXTpiLnNldEF0dHJpYnV0ZShlLGNbZV0pKTtkJiZiLmFwcGVuZENoaWxkKGEuYy5jcmVhdGVUZXh0Tm9kZShkKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gdShhLGIsYyl7YT1hLmMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYilbMF07YXx8KGE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTthLmluc2VydEJlZm9yZShjLGEubGFzdENoaWxkKX1mdW5jdGlvbiB2KGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfVxuZnVuY3Rpb24gdyhhLGIsYyl7Yj1ifHxbXTtjPWN8fFtdO2Zvcih2YXIgZD1hLmNsYXNzTmFtZS5zcGxpdCgvXFxzKy8pLGU9MDtlPGIubGVuZ3RoO2UrPTEpe2Zvcih2YXIgZj0hMSxnPTA7ZzxkLmxlbmd0aDtnKz0xKWlmKGJbZV09PT1kW2ddKXtmPSEwO2JyZWFrfWZ8fGQucHVzaChiW2VdKX1iPVtdO2ZvcihlPTA7ZTxkLmxlbmd0aDtlKz0xKXtmPSExO2ZvcihnPTA7ZzxjLmxlbmd0aDtnKz0xKWlmKGRbZV09PT1jW2ddKXtmPSEwO2JyZWFrfWZ8fGIucHVzaChkW2VdKX1hLmNsYXNzTmFtZT1iLmpvaW4oXCIgXCIpLnJlcGxhY2UoL1xccysvZyxcIiBcIikucmVwbGFjZSgvXlxccyt8XFxzKyQvLFwiXCIpfWZ1bmN0aW9uIHkoYSxiKXtmb3IodmFyIGM9YS5jbGFzc05hbWUuc3BsaXQoL1xccysvKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWlmKGNbZF09PWIpcmV0dXJuITA7cmV0dXJuITF9XG5mdW5jdGlvbiBlYShhKXtyZXR1cm4gYS5vLmxvY2F0aW9uLmhvc3RuYW1lfHxhLmEubG9jYXRpb24uaG9zdG5hbWV9ZnVuY3Rpb24geihhLGIsYyl7ZnVuY3Rpb24gZCgpe20mJmUmJmYmJihtKGcpLG09bnVsbCl9Yj10KGEsXCJsaW5rXCIse3JlbDpcInN0eWxlc2hlZXRcIixocmVmOmIsbWVkaWE6XCJhbGxcIn0pO3ZhciBlPSExLGY9ITAsZz1udWxsLG09Y3x8bnVsbDtkYT8oYi5vbmxvYWQ9ZnVuY3Rpb24oKXtlPSEwO2QoKX0sYi5vbmVycm9yPWZ1bmN0aW9uKCl7ZT0hMDtnPUVycm9yKFwiU3R5bGVzaGVldCBmYWlsZWQgdG8gbG9hZFwiKTtkKCl9KTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZT0hMDtkKCl9LDApO3UoYSxcImhlYWRcIixiKX1cbmZ1bmN0aW9uIEEoYSxiLGMsZCl7dmFyIGU9YS5jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtpZihlKXt2YXIgZj10KGEsXCJzY3JpcHRcIix7c3JjOmJ9KSxnPSExO2Yub25sb2FkPWYub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7Z3x8dGhpcy5yZWFkeVN0YXRlJiZcImxvYWRlZFwiIT10aGlzLnJlYWR5U3RhdGUmJlwiY29tcGxldGVcIiE9dGhpcy5yZWFkeVN0YXRlfHwoZz0hMCxjJiZjKG51bGwpLGYub25sb2FkPWYub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsXCJIRUFEXCI9PWYucGFyZW50Tm9kZS50YWdOYW1lJiZlLnJlbW92ZUNoaWxkKGYpKX07ZS5hcHBlbmRDaGlsZChmKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Z3x8KGc9ITAsYyYmYyhFcnJvcihcIlNjcmlwdCBsb2FkIHRpbWVvdXRcIikpKX0sZHx8NUUzKTtyZXR1cm4gZn1yZXR1cm4gbnVsbH07ZnVuY3Rpb24gQigpe3RoaXMuYT0wO3RoaXMuYz1udWxsfWZ1bmN0aW9uIEMoYSl7YS5hKys7cmV0dXJuIGZ1bmN0aW9uKCl7YS5hLS07RChhKX19ZnVuY3Rpb24gRShhLGIpe2EuYz1iO0QoYSl9ZnVuY3Rpb24gRChhKXswPT1hLmEmJmEuYyYmKGEuYygpLGEuYz1udWxsKX07ZnVuY3Rpb24gRihhKXt0aGlzLmE9YXx8XCItXCJ9Ri5wcm90b3R5cGUuYz1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYi5wdXNoKGFyZ3VtZW50c1tjXS5yZXBsYWNlKC9bXFxXX10rL2csXCJcIikudG9Mb3dlckNhc2UoKSk7cmV0dXJuIGIuam9pbih0aGlzLmEpfTtmdW5jdGlvbiBHKGEsYil7dGhpcy5jPWE7dGhpcy5mPTQ7dGhpcy5hPVwiblwiO3ZhciBjPShifHxcIm40XCIpLm1hdGNoKC9eKFtuaW9dKShbMS05XSkkL2kpO2MmJih0aGlzLmE9Y1sxXSx0aGlzLmY9cGFyc2VJbnQoY1syXSwxMCkpfWZ1bmN0aW9uIGZhKGEpe3JldHVybiBIKGEpK1wiIFwiKyhhLmYrXCIwMFwiKStcIiAzMDBweCBcIitJKGEuYyl9ZnVuY3Rpb24gSShhKXt2YXIgYj1bXTthPWEuc3BsaXQoLyxcXHMqLyk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10ucmVwbGFjZSgvWydcIl0vZyxcIlwiKTstMSE9ZC5pbmRleE9mKFwiIFwiKXx8L15cXGQvLnRlc3QoZCk/Yi5wdXNoKFwiJ1wiK2QrXCInXCIpOmIucHVzaChkKX1yZXR1cm4gYi5qb2luKFwiLFwiKX1mdW5jdGlvbiBKKGEpe3JldHVybiBhLmErYS5mfWZ1bmN0aW9uIEgoYSl7dmFyIGI9XCJub3JtYWxcIjtcIm9cIj09PWEuYT9iPVwib2JsaXF1ZVwiOlwiaVwiPT09YS5hJiYoYj1cIml0YWxpY1wiKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIGdhKGEpe3ZhciBiPTQsYz1cIm5cIixkPW51bGw7YSYmKChkPWEubWF0Y2goLyhub3JtYWx8b2JsaXF1ZXxpdGFsaWMpL2kpKSYmZFsxXSYmKGM9ZFsxXS5zdWJzdHIoMCwxKS50b0xvd2VyQ2FzZSgpKSwoZD1hLm1hdGNoKC8oWzEtOV0wMHxub3JtYWx8Ym9sZCkvaSkpJiZkWzFdJiYoL2JvbGQvaS50ZXN0KGRbMV0pP2I9NzovWzEtOV0wMC8udGVzdChkWzFdKSYmKGI9cGFyc2VJbnQoZFsxXS5zdWJzdHIoMCwxKSwxMCkpKSk7cmV0dXJuIGMrYn07ZnVuY3Rpb24gaGEoYSxiKXt0aGlzLmM9YTt0aGlzLmY9YS5vLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt0aGlzLmg9Yjt0aGlzLmE9bmV3IEYoXCItXCIpO3RoaXMuaj0hMSE9PWIuZXZlbnRzO3RoaXMuZz0hMSE9PWIuY2xhc3Nlc31mdW5jdGlvbiBpYShhKXthLmcmJncoYS5mLFthLmEuYyhcIndmXCIsXCJsb2FkaW5nXCIpXSk7SyhhLFwibG9hZGluZ1wiKX1mdW5jdGlvbiBMKGEpe2lmKGEuZyl7dmFyIGI9eShhLmYsYS5hLmMoXCJ3ZlwiLFwiYWN0aXZlXCIpKSxjPVtdLGQ9W2EuYS5jKFwid2ZcIixcImxvYWRpbmdcIildO2J8fGMucHVzaChhLmEuYyhcIndmXCIsXCJpbmFjdGl2ZVwiKSk7dyhhLmYsYyxkKX1LKGEsXCJpbmFjdGl2ZVwiKX1mdW5jdGlvbiBLKGEsYixjKXtpZihhLmomJmEuaFtiXSlpZihjKWEuaFtiXShjLmMsSihjKSk7ZWxzZSBhLmhbYl0oKX07ZnVuY3Rpb24gamEoKXt0aGlzLmM9e319ZnVuY3Rpb24ga2EoYSxiLGMpe3ZhciBkPVtdLGU7Zm9yKGUgaW4gYilpZihiLmhhc093blByb3BlcnR5KGUpKXt2YXIgZj1hLmNbZV07ZiYmZC5wdXNoKGYoYltlXSxjKSl9cmV0dXJuIGR9O2Z1bmN0aW9uIE0oYSxiKXt0aGlzLmM9YTt0aGlzLmY9Yjt0aGlzLmE9dCh0aGlzLmMsXCJzcGFuXCIse1wiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0sdGhpcy5mKX1mdW5jdGlvbiBOKGEpe3UoYS5jLFwiYm9keVwiLGEuYSl9ZnVuY3Rpb24gTyhhKXtyZXR1cm5cImRpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7dG9wOi05OTk5cHg7bGVmdDotOTk5OXB4O2ZvbnQtc2l6ZTozMDBweDt3aWR0aDphdXRvO2hlaWdodDphdXRvO2xpbmUtaGVpZ2h0Om5vcm1hbDttYXJnaW46MDtwYWRkaW5nOjA7Zm9udC12YXJpYW50Om5vcm1hbDt3aGl0ZS1zcGFjZTpub3dyYXA7Zm9udC1mYW1pbHk6XCIrSShhLmMpK1wiO1wiKyhcImZvbnQtc3R5bGU6XCIrSChhKStcIjtmb250LXdlaWdodDpcIisoYS5mK1wiMDBcIikrXCI7XCIpfTtmdW5jdGlvbiBQKGEsYixjLGQsZSxmKXt0aGlzLmc9YTt0aGlzLmo9Yjt0aGlzLmE9ZDt0aGlzLmM9Yzt0aGlzLmY9ZXx8M0UzO3RoaXMuaD1mfHx2b2lkIDB9UC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmMuby5kb2N1bWVudCxiPXRoaXMsYz1xKCksZD1uZXcgUHJvbWlzZShmdW5jdGlvbihkLGUpe2Z1bmN0aW9uIGYoKXtxKCktYz49Yi5mP2UoKTphLmZvbnRzLmxvYWQoZmEoYi5hKSxiLmgpLnRoZW4oZnVuY3Rpb24oYSl7MTw9YS5sZW5ndGg/ZCgpOnNldFRpbWVvdXQoZiwyNSl9LGZ1bmN0aW9uKCl7ZSgpfSl9ZigpfSksZT1udWxsLGY9bmV3IFByb21pc2UoZnVuY3Rpb24oYSxkKXtlPXNldFRpbWVvdXQoZCxiLmYpfSk7UHJvbWlzZS5yYWNlKFtmLGRdKS50aGVuKGZ1bmN0aW9uKCl7ZSYmKGNsZWFyVGltZW91dChlKSxlPW51bGwpO2IuZyhiLmEpfSxmdW5jdGlvbigpe2IuaihiLmEpfSl9O2Z1bmN0aW9uIFEoYSxiLGMsZCxlLGYsZyl7dGhpcy52PWE7dGhpcy5CPWI7dGhpcy5jPWM7dGhpcy5hPWQ7dGhpcy5zPWd8fFwiQkVTYnN3eVwiO3RoaXMuZj17fTt0aGlzLnc9ZXx8M0UzO3RoaXMudT1mfHxudWxsO3RoaXMubT10aGlzLmo9dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuZz1uZXcgTSh0aGlzLmMsdGhpcy5zKTt0aGlzLmg9bmV3IE0odGhpcy5jLHRoaXMucyk7dGhpcy5qPW5ldyBNKHRoaXMuYyx0aGlzLnMpO3RoaXMubT1uZXcgTSh0aGlzLmMsdGhpcy5zKTthPW5ldyBHKHRoaXMuYS5jK1wiLHNlcmlmXCIsSih0aGlzLmEpKTthPU8oYSk7dGhpcy5nLmEuc3R5bGUuY3NzVGV4dD1hO2E9bmV3IEcodGhpcy5hLmMrXCIsc2Fucy1zZXJpZlwiLEoodGhpcy5hKSk7YT1PKGEpO3RoaXMuaC5hLnN0eWxlLmNzc1RleHQ9YTthPW5ldyBHKFwic2VyaWZcIixKKHRoaXMuYSkpO2E9TyhhKTt0aGlzLmouYS5zdHlsZS5jc3NUZXh0PWE7YT1uZXcgRyhcInNhbnMtc2VyaWZcIixKKHRoaXMuYSkpO2E9XG5PKGEpO3RoaXMubS5hLnN0eWxlLmNzc1RleHQ9YTtOKHRoaXMuZyk7Tih0aGlzLmgpO04odGhpcy5qKTtOKHRoaXMubSl9dmFyIFI9e0Q6XCJzZXJpZlwiLEM6XCJzYW5zLXNlcmlmXCJ9LFM9bnVsbDtmdW5jdGlvbiBUKCl7aWYobnVsbD09PVMpe3ZhciBhPS9BcHBsZVdlYktpdFxcLyhbMC05XSspKD86XFwuKFswLTldKykpLy5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtTPSEhYSYmKDUzNj5wYXJzZUludChhWzFdLDEwKXx8NTM2PT09cGFyc2VJbnQoYVsxXSwxMCkmJjExPj1wYXJzZUludChhWzJdLDEwKSl9cmV0dXJuIFN9US5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmYuc2VyaWY9dGhpcy5qLmEub2Zmc2V0V2lkdGg7dGhpcy5mW1wic2Fucy1zZXJpZlwiXT10aGlzLm0uYS5vZmZzZXRXaWR0aDt0aGlzLkE9cSgpO1UodGhpcyl9O1xuZnVuY3Rpb24gbGEoYSxiLGMpe2Zvcih2YXIgZCBpbiBSKWlmKFIuaGFzT3duUHJvcGVydHkoZCkmJmI9PT1hLmZbUltkXV0mJmM9PT1hLmZbUltkXV0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gVShhKXt2YXIgYj1hLmcuYS5vZmZzZXRXaWR0aCxjPWEuaC5hLm9mZnNldFdpZHRoLGQ7KGQ9Yj09PWEuZi5zZXJpZiYmYz09PWEuZltcInNhbnMtc2VyaWZcIl0pfHwoZD1UKCkmJmxhKGEsYixjKSk7ZD9xKCktYS5BPj1hLnc/VCgpJiZsYShhLGIsYykmJihudWxsPT09YS51fHxhLnUuaGFzT3duUHJvcGVydHkoYS5hLmMpKT9WKGEsYS52KTpWKGEsYS5CKTptYShhKTpWKGEsYS52KX1mdW5jdGlvbiBtYShhKXtzZXRUaW1lb3V0KHAoZnVuY3Rpb24oKXtVKHRoaXMpfSxhKSw1MCl9ZnVuY3Rpb24gVihhLGIpe3NldFRpbWVvdXQocChmdW5jdGlvbigpe3YodGhpcy5nLmEpO3YodGhpcy5oLmEpO3YodGhpcy5qLmEpO3YodGhpcy5tLmEpO2IodGhpcy5hKX0sYSksMCl9O2Z1bmN0aW9uIFcoYSxiLGMpe3RoaXMuYz1hO3RoaXMuYT1iO3RoaXMuZj0wO3RoaXMubT10aGlzLmo9ITE7dGhpcy5zPWN9dmFyIFg9bnVsbDtXLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYTtiLmcmJncoYi5mLFtiLmEuYyhcIndmXCIsYS5jLEooYSkudG9TdHJpbmcoKSxcImFjdGl2ZVwiKV0sW2IuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwibG9hZGluZ1wiKSxiLmEuYyhcIndmXCIsYS5jLEooYSkudG9TdHJpbmcoKSxcImluYWN0aXZlXCIpXSk7SyhiLFwiZm9udGFjdGl2ZVwiLGEpO3RoaXMubT0hMDtuYSh0aGlzKX07XG5XLnByb3RvdHlwZS5oPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYTtpZihiLmcpe3ZhciBjPXkoYi5mLGIuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwiYWN0aXZlXCIpKSxkPVtdLGU9W2IuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwibG9hZGluZ1wiKV07Y3x8ZC5wdXNoKGIuYS5jKFwid2ZcIixhLmMsSihhKS50b1N0cmluZygpLFwiaW5hY3RpdmVcIikpO3coYi5mLGQsZSl9SyhiLFwiZm9udGluYWN0aXZlXCIsYSk7bmEodGhpcyl9O2Z1bmN0aW9uIG5hKGEpezA9PS0tYS5mJiZhLmomJihhLm0/KGE9YS5hLGEuZyYmdyhhLmYsW2EuYS5jKFwid2ZcIixcImFjdGl2ZVwiKV0sW2EuYS5jKFwid2ZcIixcImxvYWRpbmdcIiksYS5hLmMoXCJ3ZlwiLFwiaW5hY3RpdmVcIildKSxLKGEsXCJhY3RpdmVcIikpOkwoYS5hKSl9O2Z1bmN0aW9uIG9hKGEpe3RoaXMuaj1hO3RoaXMuYT1uZXcgamE7dGhpcy5oPTA7dGhpcy5mPXRoaXMuZz0hMH1vYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt0aGlzLmM9bmV3IGNhKHRoaXMuaixhLmNvbnRleHR8fHRoaXMuaik7dGhpcy5nPSExIT09YS5ldmVudHM7dGhpcy5mPSExIT09YS5jbGFzc2VzO3BhKHRoaXMsbmV3IGhhKHRoaXMuYyxhKSxhKX07XG5mdW5jdGlvbiBxYShhLGIsYyxkLGUpe3ZhciBmPTA9PS0tYS5oOyhhLmZ8fGEuZykmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT1lfHxudWxsLG09ZHx8bnVsbHx8e307aWYoMD09PWMubGVuZ3RoJiZmKUwoYi5hKTtlbHNle2IuZis9Yy5sZW5ndGg7ZiYmKGIuaj1mKTt2YXIgaCxsPVtdO2ZvcihoPTA7aDxjLmxlbmd0aDtoKyspe3ZhciBrPWNbaF0sbj1tW2suY10scj1iLmEseD1rO3IuZyYmdyhyLmYsW3IuYS5jKFwid2ZcIix4LmMsSih4KS50b1N0cmluZygpLFwibG9hZGluZ1wiKV0pO0socixcImZvbnRsb2FkaW5nXCIseCk7cj1udWxsO2lmKG51bGw9PT1YKWlmKHdpbmRvdy5Gb250RmFjZSl7dmFyIHg9L0dlY2tvLipGaXJlZm94XFwvKFxcZCspLy5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSx4YT0vT1MgWC4qVmVyc2lvblxcLzEwXFwuLipTYWZhcmkvLmV4ZWMod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpJiYvQXBwbGUvLmV4ZWMod2luZG93Lm5hdmlnYXRvci52ZW5kb3IpO1xuWD14PzQyPHBhcnNlSW50KHhbMV0sMTApOnhhPyExOiEwfWVsc2UgWD0hMTtYP3I9bmV3IFAocChiLmcsYikscChiLmgsYiksYi5jLGssYi5zLG4pOnI9bmV3IFEocChiLmcsYikscChiLmgsYiksYi5jLGssYi5zLGEsbik7bC5wdXNoKHIpfWZvcihoPTA7aDxsLmxlbmd0aDtoKyspbFtoXS5zdGFydCgpfX0sMCl9ZnVuY3Rpb24gcGEoYSxiLGMpe3ZhciBkPVtdLGU9Yy50aW1lb3V0O2lhKGIpO3ZhciBkPWthKGEuYSxjLGEuYyksZj1uZXcgVyhhLmMsYixlKTthLmg9ZC5sZW5ndGg7Yj0wO2ZvcihjPWQubGVuZ3RoO2I8YztiKyspZFtiXS5sb2FkKGZ1bmN0aW9uKGIsZCxjKXtxYShhLGYsYixkLGMpfSl9O2Z1bmN0aW9uIHJhKGEsYil7dGhpcy5jPWE7dGhpcy5hPWJ9XG5yYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoZltcIl9fbXRpX2ZudExzdFwiK2RdKXt2YXIgYz1mW1wiX19tdGlfZm50THN0XCIrZF0oKSxlPVtdLGg7aWYoYylmb3IodmFyIGw9MDtsPGMubGVuZ3RoO2wrKyl7dmFyIGs9Y1tsXS5mb250ZmFtaWx5O3ZvaWQgMCE9Y1tsXS5mb250U3R5bGUmJnZvaWQgMCE9Y1tsXS5mb250V2VpZ2h0PyhoPWNbbF0uZm9udFN0eWxlK2NbbF0uZm9udFdlaWdodCxlLnB1c2gobmV3IEcoayxoKSkpOmUucHVzaChuZXcgRyhrKSl9YShlKX1lbHNlIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiKCl9LDUwKX12YXIgYz10aGlzLGQ9Yy5hLnByb2plY3RJZCxlPWMuYS52ZXJzaW9uO2lmKGQpe3ZhciBmPWMuYy5vO0EodGhpcy5jLChjLmEuYXBpfHxcImh0dHBzOi8vZmFzdC5mb250cy5uZXQvanNhcGlcIikrXCIvXCIrZCtcIi5qc1wiKyhlP1wiP3Y9XCIrZTpcIlwiKSxmdW5jdGlvbihlKXtlP2EoW10pOihmW1wiX19Nb25vdHlwZUNvbmZpZ3VyYXRpb25fX1wiK1xuZF09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hfSxiKCkpfSkuaWQ9XCJfX01vbm90eXBlQVBJU2NyaXB0X19cIitkfWVsc2UgYShbXSl9O2Z1bmN0aW9uIHNhKGEsYil7dGhpcy5jPWE7dGhpcy5hPWJ9c2EucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMuYS51cmxzfHxbXSxlPXRoaXMuYS5mYW1pbGllc3x8W10sZj10aGlzLmEudGVzdFN0cmluZ3N8fHt9LGc9bmV3IEI7Yj0wO2ZvcihjPWQubGVuZ3RoO2I8YztiKyspeih0aGlzLmMsZFtiXSxDKGcpKTt2YXIgbT1bXTtiPTA7Zm9yKGM9ZS5sZW5ndGg7YjxjO2IrKylpZihkPWVbYl0uc3BsaXQoXCI6XCIpLGRbMV0pZm9yKHZhciBoPWRbMV0uc3BsaXQoXCIsXCIpLGw9MDtsPGgubGVuZ3RoO2wrPTEpbS5wdXNoKG5ldyBHKGRbMF0saFtsXSkpO2Vsc2UgbS5wdXNoKG5ldyBHKGRbMF0pKTtFKGcsZnVuY3Rpb24oKXthKG0sZil9KX07ZnVuY3Rpb24gdGEoYSxiKXthP3RoaXMuYz1hOnRoaXMuYz11YTt0aGlzLmE9W107dGhpcy5mPVtdO3RoaXMuZz1ifHxcIlwifXZhciB1YT1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzXCI7ZnVuY3Rpb24gdmEoYSxiKXtmb3IodmFyIGM9Yi5sZW5ndGgsZD0wO2Q8YztkKyspe3ZhciBlPWJbZF0uc3BsaXQoXCI6XCIpOzM9PWUubGVuZ3RoJiZhLmYucHVzaChlLnBvcCgpKTt2YXIgZj1cIlwiOzI9PWUubGVuZ3RoJiZcIlwiIT1lWzFdJiYoZj1cIjpcIik7YS5hLnB1c2goZS5qb2luKGYpKX19XG5mdW5jdGlvbiB3YShhKXtpZigwPT1hLmEubGVuZ3RoKXRocm93IEVycm9yKFwiTm8gZm9udHMgdG8gbG9hZCFcIik7aWYoLTEhPWEuYy5pbmRleE9mKFwia2l0PVwiKSlyZXR1cm4gYS5jO2Zvcih2YXIgYj1hLmEubGVuZ3RoLGM9W10sZD0wO2Q8YjtkKyspYy5wdXNoKGEuYVtkXS5yZXBsYWNlKC8gL2csXCIrXCIpKTtiPWEuYytcIj9mYW1pbHk9XCIrYy5qb2luKFwiJTdDXCIpOzA8YS5mLmxlbmd0aCYmKGIrPVwiJnN1YnNldD1cIithLmYuam9pbihcIixcIikpOzA8YS5nLmxlbmd0aCYmKGIrPVwiJnRleHQ9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGEuZykpO3JldHVybiBifTtmdW5jdGlvbiB5YShhKXt0aGlzLmY9YTt0aGlzLmE9W107dGhpcy5jPXt9fVxudmFyIHphPXtsYXRpbjpcIkJFU2Jzd3lcIixcImxhdGluLWV4dFwiOlwiXFx1MDBlN1xcdTAwZjZcXHUwMGZjXFx1MDExZlxcdTAxNWZcIixjeXJpbGxpYzpcIlxcdTA0MzlcXHUwNDRmXFx1MDQxNlwiLGdyZWVrOlwiXFx1MDNiMVxcdTAzYjJcXHUwM2EzXCIsa2htZXI6XCJcXHUxNzgwXFx1MTc4MVxcdTE3ODJcIixIYW51bWFuOlwiXFx1MTc4MFxcdTE3ODFcXHUxNzgyXCJ9LEFhPXt0aGluOlwiMVwiLGV4dHJhbGlnaHQ6XCIyXCIsXCJleHRyYS1saWdodFwiOlwiMlwiLHVsdHJhbGlnaHQ6XCIyXCIsXCJ1bHRyYS1saWdodFwiOlwiMlwiLGxpZ2h0OlwiM1wiLHJlZ3VsYXI6XCI0XCIsYm9vazpcIjRcIixtZWRpdW06XCI1XCIsXCJzZW1pLWJvbGRcIjpcIjZcIixzZW1pYm9sZDpcIjZcIixcImRlbWktYm9sZFwiOlwiNlwiLGRlbWlib2xkOlwiNlwiLGJvbGQ6XCI3XCIsXCJleHRyYS1ib2xkXCI6XCI4XCIsZXh0cmFib2xkOlwiOFwiLFwidWx0cmEtYm9sZFwiOlwiOFwiLHVsdHJhYm9sZDpcIjhcIixibGFjazpcIjlcIixoZWF2eTpcIjlcIixsOlwiM1wiLHI6XCI0XCIsYjpcIjdcIn0sQmE9e2k6XCJpXCIsaXRhbGljOlwiaVwiLG46XCJuXCIsbm9ybWFsOlwiblwifSxcbkNhPS9eKHRoaW58KD86KD86ZXh0cmF8dWx0cmEpLT8pP2xpZ2h0fHJlZ3VsYXJ8Ym9va3xtZWRpdW18KD86KD86c2VtaXxkZW1pfGV4dHJhfHVsdHJhKS0/KT9ib2xkfGJsYWNrfGhlYXZ5fGx8cnxifFsxLTldMDApPyhufGl8bm9ybWFsfGl0YWxpYyk/JC87XG5mdW5jdGlvbiBEYShhKXtmb3IodmFyIGI9YS5mLmxlbmd0aCxjPTA7YzxiO2MrKyl7dmFyIGQ9YS5mW2NdLnNwbGl0KFwiOlwiKSxlPWRbMF0ucmVwbGFjZSgvXFwrL2csXCIgXCIpLGY9W1wibjRcIl07aWYoMjw9ZC5sZW5ndGgpe3ZhciBnO3ZhciBtPWRbMV07Zz1bXTtpZihtKWZvcih2YXIgbT1tLnNwbGl0KFwiLFwiKSxoPW0ubGVuZ3RoLGw9MDtsPGg7bCsrKXt2YXIgaztrPW1bbF07aWYoay5tYXRjaCgvXltcXHctXSskLykpe3ZhciBuPUNhLmV4ZWMoay50b0xvd2VyQ2FzZSgpKTtpZihudWxsPT1uKWs9XCJcIjtlbHNle2s9blsyXTtrPW51bGw9PWt8fFwiXCI9PWs/XCJuXCI6QmFba107bj1uWzFdO2lmKG51bGw9PW58fFwiXCI9PW4pbj1cIjRcIjtlbHNlIHZhciByPUFhW25dLG49cj9yOmlzTmFOKG4pP1wiNFwiOm4uc3Vic3RyKDAsMSk7az1bayxuXS5qb2luKFwiXCIpfX1lbHNlIGs9XCJcIjtrJiZnLnB1c2goayl9MDxnLmxlbmd0aCYmKGY9Zyk7Mz09ZC5sZW5ndGgmJihkPWRbMl0sZz1bXSxkPWQ/ZC5zcGxpdChcIixcIik6XG5nLDA8ZC5sZW5ndGgmJihkPXphW2RbMF1dKSYmKGEuY1tlXT1kKSl9YS5jW2VdfHwoZD16YVtlXSkmJihhLmNbZV09ZCk7Zm9yKGQ9MDtkPGYubGVuZ3RoO2QrPTEpYS5hLnB1c2gobmV3IEcoZSxmW2RdKSl9fTtmdW5jdGlvbiBFYShhLGIpe3RoaXMuYz1hO3RoaXMuYT1ifXZhciBGYT17QXJpbW86ITAsQ291c2luZTohMCxUaW5vczohMH07RWEucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEIsYz10aGlzLmMsZD1uZXcgdGEodGhpcy5hLmFwaSx0aGlzLmEudGV4dCksZT10aGlzLmEuZmFtaWxpZXM7dmEoZCxlKTt2YXIgZj1uZXcgeWEoZSk7RGEoZik7eihjLHdhKGQpLEMoYikpO0UoYixmdW5jdGlvbigpe2EoZi5hLGYuYyxGYSl9KX07ZnVuY3Rpb24gR2EoYSxiKXt0aGlzLmM9YTt0aGlzLmE9Yn1HYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmEuaWQsYz10aGlzLmMubztiP0EodGhpcy5jLCh0aGlzLmEuYXBpfHxcImh0dHBzOi8vdXNlLnR5cGVraXQubmV0XCIpK1wiL1wiK2IrXCIuanNcIixmdW5jdGlvbihiKXtpZihiKWEoW10pO2Vsc2UgaWYoYy5UeXBla2l0JiZjLlR5cGVraXQuY29uZmlnJiZjLlR5cGVraXQuY29uZmlnLmZuKXtiPWMuVHlwZWtpdC5jb25maWcuZm47Zm9yKHZhciBlPVtdLGY9MDtmPGIubGVuZ3RoO2YrPTIpZm9yKHZhciBnPWJbZl0sbT1iW2YrMV0saD0wO2g8bS5sZW5ndGg7aCsrKWUucHVzaChuZXcgRyhnLG1baF0pKTt0cnl7Yy5UeXBla2l0LmxvYWQoe2V2ZW50czohMSxjbGFzc2VzOiExLGFzeW5jOiEwfSl9Y2F0Y2gobCl7fWEoZSl9fSwyRTMpOmEoW10pfTtmdW5jdGlvbiBIYShhLGIpe3RoaXMuYz1hO3RoaXMuZj1iO3RoaXMuYT1bXX1IYS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmYuaWQsYz10aGlzLmMubyxkPXRoaXM7Yj8oYy5fX3dlYmZvbnRmb250ZGVja21vZHVsZV9ffHwoYy5fX3dlYmZvbnRmb250ZGVja21vZHVsZV9fPXt9KSxjLl9fd2ViZm9udGZvbnRkZWNrbW9kdWxlX19bYl09ZnVuY3Rpb24oYixjKXtmb3IodmFyIGc9MCxtPWMuZm9udHMubGVuZ3RoO2c8bTsrK2cpe3ZhciBoPWMuZm9udHNbZ107ZC5hLnB1c2gobmV3IEcoaC5uYW1lLGdhKFwiZm9udC13ZWlnaHQ6XCIraC53ZWlnaHQrXCI7Zm9udC1zdHlsZTpcIitoLnN0eWxlKSkpfWEoZC5hKX0sQSh0aGlzLmMsKHRoaXMuZi5hcGl8fFwiaHR0cHM6Ly9mLmZvbnRkZWNrLmNvbS9zL2Nzcy9qcy9cIikrZWEodGhpcy5jKStcIi9cIitiK1wiLmpzXCIsZnVuY3Rpb24oYil7YiYmYShbXSl9KSk6YShbXSl9O3ZhciBZPW5ldyBvYSh3aW5kb3cpO1kuYS5jLmN1c3RvbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgc2EoYixhKX07WS5hLmMuZm9udGRlY2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEhhKGIsYSl9O1kuYS5jLm1vbm90eXBlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByYShiLGEpfTtZLmEuYy50eXBla2l0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHYShiLGEpfTtZLmEuYy5nb29nbGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEVhKGIsYSl9O3ZhciBaPXtsb2FkOnAoWS5sb2FkLFkpfTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBafSk6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPVo6KHdpbmRvdy5XZWJGb250PVosd2luZG93LldlYkZvbnRDb25maWcmJlkubG9hZCh3aW5kb3cuV2ViRm9udENvbmZpZykpO30oKSk7XG4iXX0=
